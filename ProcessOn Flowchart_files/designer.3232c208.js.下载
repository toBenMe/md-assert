parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"g5N4":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=exports.default=function(){function t(r){var n=this;e(this,t),this._data={};var o=[];Object.keys(r).forEach(function(t){n._data[t]=r[t],o.push(t)}),this.types=o}return n(t,[{key:"getType",value:function(t){var e=this;return new Promise(function(r,n){r(e._data[t])})}}]),t}();
},{}],"KUPG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadImg=e,exports.reImgBase64=void 0;var o=exports.reImgBase64=/^data\:(image\/.+);base64,/;function e(o){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(n,r){var s=new Image;s.src=o,e&&(s.crossOrigin="anonymous"),s.onload=function(){this.onload=null,this.onerror=null,n(s)},s.onerror=function(o){this.onload=null,this.onerror=null,n(null)}})}
},{}],"NJiq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dataURLToBlob=a,exports.imageToBlob=u,exports.imgToBlob=c,exports.readBlob=i,exports.strToBlob=s;var t=require("./img");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(){e=function(){return n};var t,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,r,e){t[r]=e.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch(t){h=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof w?r:w,i=Object.create(o.prototype),u=new G(n||[]);return a(i,"_invoke",{value:T(t,e,u)}),i}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var y="suspendedStart",v="suspendedYield",d="executing",g="completed",m={};function w(){}function b(){}function x(){}var L={};h(L,c,function(){return this});var E=Object.getPrototypeOf,_=E&&E(E(N([])));_&&_!==o&&i.call(_,c)&&(L=_);var O=x.prototype=w.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(r){h(t,r,function(t){return this._invoke(r,t)})})}function P(t,e){function n(o,a,u,c){var l=p(t[o],t,a);if("throw"!==l.type){var s=l.arg,h=s.value;return h&&"object"==r(h)&&i.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(h).then(function(t){s.value=t,u(s)},function(t){return n("throw",t,u,c)})}c(l.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function T(r,e,n){var o=y;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=S(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=p(r,e,n);if("normal"===l.type){if(o=n.done?g:v,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=g,n.method="throw",n.arg=l.arg)}}}function S(r,e){var n=e.method,o=r.iterator[n];if(o===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,S(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,r.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[r.resultName]=a.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function B(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=x,a(O,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=h(x,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},n.awrap=function(t){return{__await:t}},j(P.prototype),h(P.prototype,l,function(){return this}),n.AsyncIterator=P,n.async=function(t,r,e,o,i){void 0===i&&(i=Promise);var a=new P(f(t,r,e,o),i);return n.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(O),h(O,s,"Generator"),h(O,c,function(){return this}),h(O,"toString",function(){return"[object Generator]"}),n.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,G.prototype={constructor:G,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!r)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(n,o){return u.type="throw",u.arg=r,e.next=n,o&&(e.method="next",e.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:N(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),m}},n}function n(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(l){return void e(l)}u.done?r(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var r=this,e=arguments;return new Promise(function(o,i){var a=t.apply(r,e);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}function i(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/plain";return new Promise(function(e,n){var o=new FileReader;r.startsWith("text/")?o.readAsText(t,"utf-8"):o.readAsDataURL(t),o.onload=function(){this.onload=null,this.onerror=null,e(o.result)},o.onerror=function(t){this.onload=null,this.onerror=null,e(null)}})}function a(r,e){var n=t.reImgBase64.exec(r),o="image/png";n&&(r=r.substring(n[0].length),o=n[1]),e&&(o=e);for(var i=window.atob(r),a=i.length,u=new Uint8Array(a);a--;)u[a]=i.charCodeAt(a);return new Blob([u],{type:o})}function u(r){return new Promise(function(e,n){if(t.reImgBase64.test(r))return e(a(r));var o=new XMLHttpRequest;o.open("get",r,!0),o.responseType="blob",o.onload=function(){this.status>=200&&this.status<300||304==this.status?e(this.response):e(null)},o.onerror=function(t){this.onload=null,this.onerror=null,e(null)},o.send()})}function c(t){return l.apply(this,arguments)}function l(){return(l=o(e().mark(function r(n){var o,i,a,u,c=arguments;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=c.length>1&&void 0!==c[1]?c[1]:"image/png",i=document.createElement("canvas"),a=i.getContext("2d"),r.next=5,(0,t.loadImg)(n,!0);case 5:return u=r.sent,i.width=u.width,i.height=u.height,a.drawImage(u,0,0,u.width,u.height),r.abrupt("return",new Promise(function(t,r){i.toBlob(function(r){t(r)},o)}));case 10:case"end":return r.stop()}},r)}))).apply(this,arguments)}function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/plain";return new Blob([t],{type:r})}
},{"./img":"KUPG"}],"GNJQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.webSocketUrl=exports.isTest=exports.isLocal=void 0;var o=exports.isTest=window.location.port||/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))$/.test(window.location.hostname),e=exports.isLocal=["localhost","127.0.0.1"].includes(window.location.hostname),s=window.location.protocol,t="https:"==s?"wss:":"ws:",c=exports.webSocketUrl=t+(o?"//192.168.10.135/websocket":"//wpscb.processon.com/websocket");
},{}],"l40E":[function(require,module,exports) {
"use strict";function e(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;for(var n=e.target;n&&1==n.nodeType&&!(["textarea","input"].includes(n.tagName.toLowerCase())||t&&["","true"].includes(n.getAttribute("contenteditable")));)n=n.parentNode;return n&&1==n.nodeType?["textarea","input"].includes(n.tagName.toLowerCase())?1:t&&["","true"].includes(n.getAttribute("contenteditable"))?2:0:0}function t(){var e="",t="";if(window.getSelection){var n=window.getSelection();e=n.toString();var r=n.getRangeAt(0),a=document.createElement("div");a.appendChild(r.cloneContents()),t=a.innerHTML}else if(document.selection){var i=document.selection.createRange();e=i.text,t=i.htmlText}return{html:t,text:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCurrentSelect=t,exports.isEditTextElement=e,exports.pasteString=r,exports.reInlineTag=void 0;var n=exports.reInlineTag=/^<(b|i|span|u[\s>]|strike|font)/;function r(e,t){if(e){t||(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/\n/g,"<br>")).replace(/\u2029/g,"<br>").replace(/\u2028/g,"<br>")).replace(/\x0a/g,"<br>").replace(/\x0d/g,"")).replace(/[\u200B-\u200D\uFEFF]/g,"")).trim().replace(/\s/g,"&nbsp;")).replace(/[\u0000-\u001f]/g,"").replace(/\t|\s/g,"&nbsp;"));var n=window.getSelection().getRangeAt(0);if(document.queryCommandSupported("insertHTML")){if(!document.execCommand("insertHTML",!1,e)){var r=document.activeElement,a=r.selectionStart,i=r.selectionEnd,o=r.contentEditable,c=["inherit","false"].includes(o)?"value":"innerHTML",l=document.activeElement[c];document.activeElement[c]=l.substring(0,a)+e+l.substring(i)}}else n.pasteHTML&&n.pasteHTML(e);if(t&&e.includes('class="equation-text"')){var u=(document.activeElement||document.body).querySelectorAll(".equation-text");Array.prototype.forEach.call(u,function(e){e.children.length<2&&(e.innerHTML="<span></span><span>&#65279;</span>")}),window.insert.equation.renderEquation(document.activeElement)}}}
},{}],"QAnv":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"O1Qa":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"z6OH":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"VjIL":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"QAnv","ieee754":"O1Qa","isarray":"z6OH","buffer":"VjIL"}],"udfh":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function o(r,e){for(var o in r)e[o]=r[o]}function n(r,o,n){return e(r,o,n)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(o(r,exports),exports.Buffer=n),n.prototype=Object.create(e.prototype),o(e,n),n.from=function(r,o,n){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,o,n)},n.alloc=function(r,o,n){if("number"!=typeof r)throw new TypeError("Argument must be a number");var t=e(r);return void 0!==o?"string"==typeof n?t.fill(o,n):t.fill(o):t.fill(0),t},n.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"VjIL"}],"rH1J":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"V4U6":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process"),o=65536,n=4294967295;function t(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var s=require("safe-buffer").Buffer,u=e.crypto||e.msCrypto;function a(e,t){if(e>n)throw new RangeError("requested too many random bytes");var a=s.allocUnsafe(e);if(e>0)if(e>o)for(var f=0;f<e;f+=o)u.getRandomValues(a.slice(f,f+o));else u.getRandomValues(a);return"function"==typeof t?r.nextTick(function(){t(null,a)}):a}u&&u.getRandomValues?module.exports=a:module.exports=t;
},{"safe-buffer":"udfh","process":"rH1J"}],"UAgo":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"LMQS":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,module.exports.once=m,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,s,c;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),c=s[t]),void 0===c)c=s[t]=n,++e._eventsCount;else if("function"==typeof c?c=s[t]=i?[n,c]:[c,n]:i?c.unshift(n):c.push(n),(o=f(e))>0&&c.length>o&&!c.warned){c.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=c.length,r(v)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=v.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):h(i,i.length)}function a(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function m(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&L(e,i,{once:!0})})}function L(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var c=f.length,v=h(f,c);for(r=0;r<c;++r)n(v[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):a.call(e,t)},o.prototype.listenerCount=a,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"WiQS":[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":"LMQS"}],"Zcgp":[function(require,module,exports) {

},{}],"sjy9":[function(require,module,exports) {

"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function r(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function h(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(e){var n=o(e,"string");return"symbol"===t(n)?n:String(n)}function o(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}var u=require("buffer"),s=u.Buffer,c=require("util"),f=c.inspect,d=f&&f.custom||"inspect";function y(t,e,n){s.prototype.copy.call(t,e,n)}module.exports=function(){function t(){i(this,t),this.head=null,this.tail=null,this.length=0}return h(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e=s.allocUnsafe(t>>>0),n=this.head,r=0;n;)y(n.data,e,r),r+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,a=t>i.length?i.length:t;if(a===i.length?r+=i:r+=i.slice(0,t),0===(t-=a)){a===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(a));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,a=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,a),0===(t-=a)){a===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(a));break}++r}return this.length-=r,e}},{key:d,value:function(t,e){return f(this,n(n({},e),{},{depth:0,customInspect:!1}))}}]),t}();
},{"buffer":"VjIL","util":"Zcgp"}],"BBXB":[function(require,module,exports) {
var process = require("process");
var t=require("process");function e(e,r){var d=this,l=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return l||o?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(s,this,e)):t.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!r&&e?d._writableState?d._writableState.errorEmitted?t.nextTick(i,d):(d._writableState.errorEmitted=!0,t.nextTick(a,d,e)):t.nextTick(a,d,e):r?(t.nextTick(i,d),r(e)):t.nextTick(i,d)}),this)}function a(t,e){s(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(t,e){t.emit("error",e)}function d(t,e){var a=t._readableState,i=t._writableState;a&&a.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}module.exports={destroy:e,undestroy:r,errorOrDestroy:d};
},{"process":"rH1J"}],"zVCK":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var e={};function o(t,o,r){r||(r=Error);var c=function(t){function e(n,e,r){return t.call(this,function(t,n,e){return"string"==typeof o?o:o(t,n,e)}(n,e,r))||this}return n(e,t),e}(r);c.prototype.name=r.name,c.prototype.code=t,e[t]=c}function r(t,n){if(Array.isArray(t)){var e=t.length;return t=t.map(function(t){return String(t)}),e>2?"one of ".concat(n," ").concat(t.slice(0,e-1).join(", "),", or ")+t[e-1]:2===e?"one of ".concat(n," ").concat(t[0]," or ").concat(t[1]):"of ".concat(n," ").concat(t[0])}return"of ".concat(n," ").concat(String(t))}function c(t,n,e){return t.substr(!e||e<0?0:+e,n.length)===n}function a(t,n,e){return(void 0===e||e>t.length)&&(e=t.length),t.substring(e-n.length,e)===n}function u(t,n,e){return"number"!=typeof e&&(e=0),!(e+n.length>t.length)&&-1!==t.indexOf(n,e)}o("ERR_INVALID_OPT_VALUE",function(t,n){return'The value "'+n+'" is invalid for option "'+t+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(n,e,o){var i,E;if("string"==typeof e&&c(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be",a(n," argument"))E="The ".concat(n," ").concat(i," ").concat(r(e,"type"));else{var f=u(n,".")?"property":"argument";E='The "'.concat(n,'" ').concat(f," ").concat(i," ").concat(r(e,"type"))}return E+=". Received type ".concat(t(o))},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.codes=e;
},{}],"S36t":[function(require,module,exports) {
"use strict";var r=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function e(r,e,t){return null!=r.highWaterMark?r.highWaterMark:e?r[t]:null}function t(t,i,o,a){var n=e(i,a,o);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new r(a?o:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}module.exports={getHighWaterMark:t};
},{"../../../errors":"zVCK"}],"E8KT":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(n){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],"KNil":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){G(t,e)}}module.exports=x,x.WritableState=m;var o={deprecate:require("util-deprecate")},s=require("./internal/streams/stream"),f=require("buffer").Buffer,u=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function a(e){return f.from(e)}function c(e){return f.isBuffer(e)||e instanceof u}var l,d=require("./internal/streams/destroy"),h=require("./internal/streams/state"),b=h.getHighWaterMark,p=require("../errors").codes,w=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,R=p.ERR_STREAM_DESTROYED,k=p.ERR_STREAM_NULL_VALUES,E=p.ERR_STREAM_WRITE_AFTER_END,S=p.ERR_UNKNOWN_ENCODING,q=d.errorOrDestroy;function v(){}function m(t,n,i){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof e),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=b(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){O(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function x(t){var n=this instanceof(e=e||require("./_stream_duplex"));if(!n&&!l.call(x,this))return new x(t);this._writableState=new m(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function M(e,t){var i=new E;q(e,i),n.nextTick(t,i)}function B(e,t,i,r){var o;return null===i?o=new k:"string"==typeof i||t.objectMode||(o=new w("chunk",["string","Buffer"],i)),!o||(q(e,o),n.nextTick(r,o),!1)}function T(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}function D(e,t,n,i,r,o){if(!n){var s=T(t,i,r);i!==s&&(n=!0,r="buffer",i=s)}var f=t.objectMode?1:i.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,f,i,r,o);return u}function P(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function j(e,t,i,r,o){--t.pendingcb,i?(n.nextTick(o,r),n.nextTick(U,e,t),e._writableState.errorEmitted=!0,q(e,r)):(o(r),e._writableState.errorEmitted=!0,q(e,r),U(e,t))}function C(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function O(e,t){var i=e._writableState,r=i.sync,o=i.writecb;if("function"!=typeof o)throw new g;if(C(i),t)j(e,i,r,t,o);else{var s=I(i)||e.destroyed;s||i.corked||i.bufferProcessing||!i.bufferedRequest||N(e,i),r?n.nextTick(A,e,i,s,o):A(e,i,s,o)}}function A(e,t,n,i){n||L(e,t),t.pendingcb--,i(),U(e,t)}function L(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function N(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,P(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(P(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function W(e,t){e._final(function(n){t.pendingcb--,n&&q(e,n),t.prefinished=!0,e.emit("prefinish"),U(e,t)})}function F(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(W,e,t)))}function U(e,t){var n=I(t);if(n&&(F(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}function H(e,t,i){t.ending=!0,U(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function G(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}require("inherits")(x,s),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===x&&(e&&e._writableState instanceof m)}})):l=function(e){return e instanceof this},x.prototype.pipe=function(){q(this,new _)},x.prototype.write=function(e,t,n){var i=this._writableState,r=!1,o=!i.objectMode&&c(e);return o&&!f.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ending?M(this,n):(o||B(this,i,e,n))&&(i.pendingcb++,r=D(this,i,o,e,t,n)),r},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||N(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new y("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||H(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=d.destroy,x.prototype._undestroy=d.undestroy,x.prototype._destroy=function(e,t){t(e)};
},{"util-deprecate":"E8KT","./internal/streams/stream":"WiQS","buffer":"VjIL","./internal/streams/destroy":"BBXB","./internal/streams/state":"S36t","../errors":"zVCK","inherits":"UAgo","./_stream_duplex":"s34C","process":"rH1J"}],"s34C":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=require("./_stream_readable"),a=require("./_stream_writable");require("inherits")(l,r);for(var i=t(a.prototype),n=0;n<i.length;n++){var o=i[n];l.prototype[o]||(l.prototype[o]=a.prototype[o])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||e.nextTick(b,this)}function b(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});
},{"./_stream_readable":"Fj4k","./_stream_writable":"KNil","inherits":"UAgo","process":"rH1J"}],"lrG1":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"udfh"}],"IvhR":[function(require,module,exports) {
"use strict";var e=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(e){var r=!1;return function(){if(!r){r=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.apply(this,n)}}}function t(){}function n(e){return e.setHeader&&"function"==typeof e.abort}function o(i,a,l){if("function"==typeof a)return o(i,null,a);a||(a={}),l=r(l||t);var s=a.readable||!1!==a.readable&&i.readable,c=a.writable||!1!==a.writable&&i.writable,u=function(){i.writable||d()},f=i._writableState&&i._writableState.finished,d=function(){c=!1,f=!0,s||l.call(i)},b=i._readableState&&i._readableState.endEmitted,v=function(){s=!1,b=!0,c||l.call(i)},m=function(e){l.call(i,e)},w=function(){var r;return s&&!b?(i._readableState&&i._readableState.ended||(r=new e),l.call(i,r)):c&&!f?(i._writableState&&i._writableState.ended||(r=new e),l.call(i,r)):void 0},_=function(){i.req.on("finish",d)};return n(i)?(i.on("complete",d),i.on("abort",w),i.req?_():i.on("request",_)):c&&!i._writableState&&(i.on("end",u),i.on("close",u)),i.on("end",v),i.on("finish",d),!1!==a.error&&i.on("error",m),i.on("close",w),function(){i.removeListener("complete",d),i.removeListener("abort",w),i.removeListener("request",_),i.req&&i.req.removeListener("finish",d),i.removeListener("end",u),i.removeListener("close",u),i.removeListener("finish",d),i.removeListener("end",v),i.removeListener("error",m),i.removeListener("close",w)}}module.exports=o;
},{"../../../errors":"zVCK"}],"LNnP":[function(require,module,exports) {
var process = require("process");
var e,t=require("process");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=o(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,t||"default");if("object"!==r(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var i=require("./end-of-stream"),u=Symbol("lastResolve"),a=Symbol("lastReject"),f=Symbol("error"),s=Symbol("ended"),c=Symbol("lastPromise"),v=Symbol("handlePromise"),m=Symbol("stream");function b(e,t){return{value:e,done:t}}function y(e){var t=e[u];if(null!==t){var r=e[m].read();null!==r&&(e[c]=null,e[u]=null,e[a]=null,t(b(r,!1)))}}function d(e){t.nextTick(y,e)}function S(e,t){return function(r,n){e.then(function(){t[s]?r(b(void 0,!0)):t[v](r,n)},n)}}var h=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((n(e={get stream(){return this[m]},next:function(){var e=this,r=this[f];if(null!==r)return Promise.reject(r);if(this[s])return Promise.resolve(b(void 0,!0));if(this[m].destroyed)return new Promise(function(r,n){t.nextTick(function(){e[f]?n(e[f]):r(b(void 0,!0))})});var n,l=this[c];if(l)n=new Promise(S(l,this));else{var o=this[m].read();if(null!==o)return Promise.resolve(b(o,!1));n=new Promise(this[v])}return this[c]=n,n}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var e=this;return new Promise(function(t,r){e[m].destroy(null,function(e){e?r(e):t(b(void 0,!0))})})}),e),h),p=function(e){var t,r=Object.create(P,(n(t={},m,{value:e,writable:!0}),n(t,u,{value:null,writable:!0}),n(t,a,{value:null,writable:!0}),n(t,f,{value:null,writable:!0}),n(t,s,{value:e._readableState.endEmitted,writable:!0}),n(t,v,{value:function(e,t){var n=r[m].read();n?(r[c]=null,r[u]=null,r[a]=null,e(b(n,!1))):(r[u]=e,r[a]=t)},writable:!0}),t));return r[c]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[u]=null,r[a]=null,t(e)),void(r[f]=e)}var n=r[u];null!==n&&(r[c]=null,r[u]=null,r[a]=null,n(b(void 0,!0))),r[s]=!0}),e.on("readable",d.bind(null,r)),r};module.exports=p;
},{"./end-of-stream":"IvhR","process":"rH1J"}],"UGls":[function(require,module,exports) {
module.exports=function(){throw new Error("Readable.from is not available in the browser")};
},{}],"Fj4k":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");module.exports=j,j.ReadableState=L;var r=require("events").EventEmitter,i=function(e,t){return e.listeners(t).length},a=require("./internal/streams/stream"),d=require("buffer").Buffer,o=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function s(e){return d.from(e)}function l(e){return d.isBuffer(e)||e instanceof o}var u,h=require("util");u=h&&h.debuglog?h.debuglog("stream"):function(){};var f,p,c,b=require("./internal/streams/buffer_list"),g=require("./internal/streams/destroy"),m=require("./internal/streams/state"),y=m.getHighWaterMark,_=require("../errors").codes,v=_.ERR_INVALID_ARG_TYPE,w=_.ERR_STREAM_PUSH_AFTER_EOF,S=_.ERR_METHOD_NOT_IMPLEMENTED,R=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;require("inherits")(j,a);var M=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function L(t,n,r){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",r),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=require("string_decoder/").StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function j(t){if(e=e||require("./_stream_duplex"),!(this instanceof j))return new j(t);var n=this instanceof e;this._readableState=new L(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function D(e,t,n,r,i){u("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,A(e,o);else if(i||(a=T(o,t)),a)M(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=s(t)),r)o.endEmitted?M(e,new R):C(e,o,t,!0);else if(o.ended)M(e,new w);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?C(e,o,t,!1):U(e,o)):C(e,o,t,!1)}else r||(o.reading=!1,U(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),U(e,t)}function T(e,t){var n;return l(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t)),n}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),j.prototype.destroy=g.destroy,j.prototype._undestroy=g.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),D(this,e,t,!1,n)},j.prototype.unshift=function(e){return D(this,e,null,!0,!1)},j.prototype.isPaused=function(){return!1===this._readableState.flowing},j.prototype.setEncoding=function(e){f||(f=require("string_decoder/").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var q=1073741824;function W(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=W(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,G(e)}function U(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function H(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,G(e))}}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function F(e){u("readable nexttick read 0"),e.read(0)}function B(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(V,e,t))}function V(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),G(e),t.flowing&&!t.reading&&e.read(0)}function G(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function Y(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function z(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(J,t,e))}function J(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function K(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}j.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=e>0?Y(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},j.prototype._read=function(e){M(this,new S("_read()"))},j.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:g;function o(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",c),e.removeListener("finish",b),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",g),r.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function s(){u("onend"),e.end()}a.endEmitted?n.nextTick(d):r.once("end",d),e.on("unpipe",o);var l=H(r);e.on("drain",l);var h=!1;function f(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==K(a.pipes,e))&&!h&&(u("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function p(t){u("onerror",t),g(),e.removeListener("error",p),0===i(e,"error")&&M(e,t)}function c(){e.removeListener("finish",b),g()}function b(){u("onfinish"),e.removeListener("close",c),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",f),k(e,"error",p),e.once("close",c),e.once("finish",b),e.emit("pipe",r),a.flowing||(u("pipe resume"),r.resume()),e},j.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var d=K(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},j.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||n.nextTick(F,this))),r},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(I,this),r},j.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(I,this),t},j.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,B(this,e)),e.paused=!1,this},j.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(j.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=require("./internal/streams/async_iterator")),p(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),j._fromList=Y,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(j.from=function(e,t){return void 0===c&&(c=require("./internal/streams/from")),c(j,e,t)});
},{"events":"LMQS","./internal/streams/stream":"WiQS","buffer":"VjIL","util":"Zcgp","./internal/streams/buffer_list":"sjy9","./internal/streams/destroy":"BBXB","./internal/streams/state":"S36t","../errors":"zVCK","inherits":"UAgo","./_stream_duplex":"s34C","string_decoder/":"lrG1","./internal/streams/async_iterator":"LNnP","./internal/streams/from":"UGls","process":"rH1J"}],"xbp9":[function(require,module,exports) {
"use strict";module.exports=o;var t=require("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,e=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,a=require("./_stream_duplex");function s(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new e);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(r,e){f(t,r,e)})}function f(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new i;if(t._transformState.transforming)throw new n;return t.push(null)}require("inherits")(o,a),o.prototype.push=function(t,r){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,r)},o.prototype._transform=function(t,e,n){n(new r("_transform()"))},o.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},o.prototype._destroy=function(t,r){a.prototype._destroy.call(this,t,function(t){r(t)})};
},{"../errors":"zVCK","./_stream_duplex":"s34C","inherits":"UAgo"}],"O2wC":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform");function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}require("inherits")(t,r),t.prototype._transform=function(r,t,e){e(null,r)};
},{"./_stream_transform":"xbp9","inherits":"UAgo"}],"CRBE":[function(require,module,exports) {
"use strict";var r;function n(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var t=require("../../../errors").codes,e=t.ERR_MISSING_ARGS,o=t.ERR_STREAM_DESTROYED;function i(r){if(r)throw r}function u(r){return r.setHeader&&"function"==typeof r.abort}function f(t,e,i,f){f=n(f);var a=!1;t.on("close",function(){a=!0}),void 0===r&&(r=require("./end-of-stream")),r(t,{readable:e,writable:i},function(r){if(r)return f(r);a=!0,f()});var c=!1;return function(r){if(!a&&!c)return c=!0,u(t)?t.abort():"function"==typeof t.destroy?t.destroy():void f(r||new o("pipe"))}}function a(r){r()}function c(r,n){return r.pipe(n)}function p(r){return r.length?"function"!=typeof r[r.length-1]?i:r.pop():i}function s(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];var o,i=p(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new e("streams");var u=n.map(function(r,t){var e=t<n.length-1;return f(r,e,t>0,function(r){o||(o=r),r&&u.forEach(a),e||(u.forEach(a),i(o))})});return n.reduce(c)}module.exports=s;
},{"../../../errors":"zVCK","./end-of-stream":"IvhR"}],"jSYL":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),exports.finished=require("./lib/internal/streams/end-of-stream.js"),exports.pipeline=require("./lib/internal/streams/pipeline.js");
},{"./lib/_stream_readable.js":"Fj4k","./lib/_stream_writable.js":"KNil","./lib/_stream_duplex.js":"s34C","./lib/_stream_transform.js":"xbp9","./lib/_stream_passthrough.js":"O2wC","./lib/internal/streams/end-of-stream.js":"IvhR","./lib/internal/streams/pipeline.js":"CRBE"}],"lj1J":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=require("readable-stream").Transform,i=require("inherits");function r(e,i){if(!t.isBuffer(e)&&"string"!=typeof e)throw new TypeError(i+" must be a string or a buffer")}function o(i){e.call(this),this._block=t.allocUnsafe(i),this._blockSize=i,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(o,e),o.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(o){r=o}i(r)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(i){e=i}t(e)},o.prototype.update=function(e,i){if(r(e,"Data"),this._finalized)throw new Error("Digest already called");t.isBuffer(e)||(e=t.from(e,i));for(var o=this._block,s=0;this._blockOffset+e.length-s>=this._blockSize;){for(var f=this._blockOffset;f<this._blockSize;)o[f++]=e[s++];this._update(),this._blockOffset=0}for(;s<e.length;)o[this._blockOffset++]=e[s++];for(var n=0,h=8*e.length;h>0;++n)this._length[n]+=h,(h=this._length[n]/4294967296|0)>0&&(this._length[n]-=4294967296*h);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},module.exports=o;
},{"safe-buffer":"udfh","readable-stream":"jSYL","inherits":"UAgo"}],"vbTd":[function(require,module,exports) {

"use strict";var t=require("inherits"),i=require("hash-base"),s=require("safe-buffer").Buffer,e=new Array(16);function h(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function r(t,i){return t<<i|t>>>32-i}function _(t,i,s,e,h,_,n){return r(t+(i&s|~i&e)+h+_|0,n)+i|0}function n(t,i,s,e,h,_,n){return r(t+(i&e|s&~e)+h+_|0,n)+i|0}function c(t,i,s,e,h,_,n){return r(t+(i^s^e)+h+_|0,n)+i|0}function f(t,i,s,e,h,_,n){return r(t+(s^(i|~e))+h+_|0,n)+i|0}t(h,i),h.prototype._update=function(){for(var t=e,i=0;i<16;++i)t[i]=this._block.readInt32LE(4*i);var s=this._a,h=this._b,r=this._c,o=this._d;s=_(s,h,r,o,t[0],3614090360,7),o=_(o,s,h,r,t[1],3905402710,12),r=_(r,o,s,h,t[2],606105819,17),h=_(h,r,o,s,t[3],3250441966,22),s=_(s,h,r,o,t[4],4118548399,7),o=_(o,s,h,r,t[5],1200080426,12),r=_(r,o,s,h,t[6],2821735955,17),h=_(h,r,o,s,t[7],4249261313,22),s=_(s,h,r,o,t[8],1770035416,7),o=_(o,s,h,r,t[9],2336552879,12),r=_(r,o,s,h,t[10],4294925233,17),h=_(h,r,o,s,t[11],2304563134,22),s=_(s,h,r,o,t[12],1804603682,7),o=_(o,s,h,r,t[13],4254626195,12),r=_(r,o,s,h,t[14],2792965006,17),s=n(s,h=_(h,r,o,s,t[15],1236535329,22),r,o,t[1],4129170786,5),o=n(o,s,h,r,t[6],3225465664,9),r=n(r,o,s,h,t[11],643717713,14),h=n(h,r,o,s,t[0],3921069994,20),s=n(s,h,r,o,t[5],3593408605,5),o=n(o,s,h,r,t[10],38016083,9),r=n(r,o,s,h,t[15],3634488961,14),h=n(h,r,o,s,t[4],3889429448,20),s=n(s,h,r,o,t[9],568446438,5),o=n(o,s,h,r,t[14],3275163606,9),r=n(r,o,s,h,t[3],4107603335,14),h=n(h,r,o,s,t[8],1163531501,20),s=n(s,h,r,o,t[13],2850285829,5),o=n(o,s,h,r,t[2],4243563512,9),r=n(r,o,s,h,t[7],1735328473,14),s=c(s,h=n(h,r,o,s,t[12],2368359562,20),r,o,t[5],4294588738,4),o=c(o,s,h,r,t[8],2272392833,11),r=c(r,o,s,h,t[11],1839030562,16),h=c(h,r,o,s,t[14],4259657740,23),s=c(s,h,r,o,t[1],2763975236,4),o=c(o,s,h,r,t[4],1272893353,11),r=c(r,o,s,h,t[7],4139469664,16),h=c(h,r,o,s,t[10],3200236656,23),s=c(s,h,r,o,t[13],681279174,4),o=c(o,s,h,r,t[0],3936430074,11),r=c(r,o,s,h,t[3],3572445317,16),h=c(h,r,o,s,t[6],76029189,23),s=c(s,h,r,o,t[9],3654602809,4),o=c(o,s,h,r,t[12],3873151461,11),r=c(r,o,s,h,t[15],530742520,16),s=f(s,h=c(h,r,o,s,t[2],3299628645,23),r,o,t[0],4096336452,6),o=f(o,s,h,r,t[7],1126891415,10),r=f(r,o,s,h,t[14],2878612391,15),h=f(h,r,o,s,t[5],4237533241,21),s=f(s,h,r,o,t[12],1700485571,6),o=f(o,s,h,r,t[3],2399980690,10),r=f(r,o,s,h,t[10],4293915773,15),h=f(h,r,o,s,t[1],2240044497,21),s=f(s,h,r,o,t[8],1873313359,6),o=f(o,s,h,r,t[15],4264355552,10),r=f(r,o,s,h,t[6],2734768916,15),h=f(h,r,o,s,t[13],1309151649,21),s=f(s,h,r,o,t[4],4149444226,6),o=f(o,s,h,r,t[11],3174756917,10),r=f(r,o,s,h,t[2],718787259,15),h=f(h,r,o,s,t[9],3951481745,21),this._a=this._a+s|0,this._b=this._b+h|0,this._c=this._c+r|0,this._d=this._d+o|0},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=s.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},module.exports=h;
},{"inherits":"UAgo","hash-base":"lj1J","safe-buffer":"udfh"}],"eCoJ":[function(require,module,exports) {

"use strict";var t=require("buffer").Buffer,i=require("inherits"),s=require("hash-base"),h=new Array(16),e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],r=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],n=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],o=[1352829926,1548603684,1836072691,2053994217,0];function f(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function u(t,i){return t<<i|t>>>32-i}function l(t,i,s,h,e,_,r,n){return u(t+(i^s^h)+_+r|0,n)+e|0}function a(t,i,s,h,e,_,r,n){return u(t+(i&s|~i&h)+_+r|0,n)+e|0}function b(t,i,s,h,e,_,r,n){return u(t+((i|~s)^h)+_+r|0,n)+e|0}function d(t,i,s,h,e,_,r,n){return u(t+(i&h|s&~h)+_+r|0,n)+e|0}function k(t,i,s,h,e,_,r,n){return u(t+(i^(s|~h))+_+r|0,n)+e|0}i(f,s),f.prototype._update=function(){for(var t=h,i=0;i<16;++i)t[i]=this._block.readInt32LE(4*i);for(var s=0|this._a,f=0|this._b,w=0|this._c,p=0|this._d,E=0|this._e,I=0|this._a,L=0|this._b,v=0|this._c,O=0|this._d,g=0|this._e,q=0;q<80;q+=1){var y,U;q<16?(y=l(s,f,w,p,E,t[e[q]],c[0],r[q]),U=k(I,L,v,O,g,t[_[q]],o[0],n[q])):q<32?(y=a(s,f,w,p,E,t[e[q]],c[1],r[q]),U=d(I,L,v,O,g,t[_[q]],o[1],n[q])):q<48?(y=b(s,f,w,p,E,t[e[q]],c[2],r[q]),U=b(I,L,v,O,g,t[_[q]],o[2],n[q])):q<64?(y=d(s,f,w,p,E,t[e[q]],c[3],r[q]),U=a(I,L,v,O,g,t[_[q]],o[3],n[q])):(y=k(s,f,w,p,E,t[e[q]],c[4],r[q]),U=l(I,L,v,O,g,t[_[q]],o[4],n[q])),s=E,E=p,p=u(w,10),w=f,f=y,I=g,g=O,O=u(v,10),v=L,L=U}var m=this._b+w+O|0;this._b=this._c+p+g|0,this._c=this._d+E+I|0,this._d=this._e+s+L|0,this._e=this._a+f+v|0,this._a=m},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var i=t.alloc?t.alloc(20):new t(20);return i.writeInt32LE(this._a,0),i.writeInt32LE(this._b,4),i.writeInt32LE(this._c,8),i.writeInt32LE(this._d,12),i.writeInt32LE(this._e,16),i},module.exports=f;
},{"buffer":"VjIL","inherits":"UAgo","hash-base":"lj1J"}],"BRYs":[function(require,module,exports) {

var t=require("safe-buffer").Buffer;function i(i,e){this._block=t.alloc(i),this._finalSize=e,this._blockSize=i,this._len=0}i.prototype.update=function(i,e){"string"==typeof i&&(e=e||"utf8",i=t.from(i,e));for(var s=this._block,o=this._blockSize,l=i.length,h=this._len,r=0;r<l;){for(var _=h%o,n=Math.min(l-r,o-_),c=0;c<n;c++)s[_+c]=i[r+c];r+=n,(h+=n)%o==0&&this._update(s)}return this._len+=l,this},i.prototype.digest=function(t){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var e=8*this._len;if(e<=4294967295)this._block.writeUInt32BE(e,this._blockSize-4);else{var s=(4294967295&e)>>>0,o=(e-s)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var l=this._hash();return t?l.toString(t):l},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},module.exports=i;
},{"safe-buffer":"udfh"}],"jR7J":[function(require,module,exports) {

var t=require("inherits"),i=require("./hash"),r=require("safe-buffer").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],h=new Array(80);function e(){this.init(),this._w=h,i.call(this,64,56)}function n(t){return t<<5|t>>>27}function _(t){return t<<30|t>>>2}function a(t,i,r,s){return 0===t?i&r|~i&s:2===t?i&r|i&s|r&s:i^r^s}t(e,i),e.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},e.prototype._update=function(t){for(var i=this._w,r=0|this._a,h=0|this._b,e=0|this._c,o=0|this._d,u=0|this._e,f=0;f<16;++f)i[f]=t.readInt32BE(4*f);for(;f<80;++f)i[f]=i[f-3]^i[f-8]^i[f-14]^i[f-16];for(var c=0;c<80;++c){var d=~~(c/20),p=n(r)+a(d,h,e,o)+u+i[c]+s[d]|0;u=o,o=e,e=_(h),h=r,r=p}this._a=r+this._a|0,this._b=h+this._b|0,this._c=e+this._c|0,this._d=o+this._d|0,this._e=u+this._e|0},e.prototype._hash=function(){var t=r.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=e;
},{"inherits":"UAgo","./hash":"BRYs","safe-buffer":"udfh"}],"Vi91":[function(require,module,exports) {

var t=require("inherits"),i=require("./hash"),r=require("safe-buffer").Buffer,s=[1518500249,1859775393,-1894007588,-899497514],e=new Array(80);function h(){this.init(),this._w=e,i.call(this,64,56)}function n(t){return t<<1|t>>>31}function _(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function o(t,i,r,s){return 0===t?i&r|~i&s:2===t?i&r|i&s|r&s:i^r^s}t(h,i),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var i=this._w,r=0|this._a,e=0|this._b,h=0|this._c,a=0|this._d,f=0|this._e,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<80;++c)i[c]=n(i[c-3]^i[c-8]^i[c-14]^i[c-16]);for(var d=0;d<80;++d){var p=~~(d/20),w=_(r)+o(p,e,h,a)+f+i[d]+s[p]|0;f=a,a=h,h=u(e),e=r,r=w}this._a=r+this._a|0,this._b=e+this._b|0,this._c=h+this._c|0,this._d=a+this._d|0,this._e=f+this._e|0},h.prototype._hash=function(){var t=r.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},module.exports=h;
},{"inherits":"UAgo","./hash":"BRYs","safe-buffer":"udfh"}],"A4Mv":[function(require,module,exports) {

var t=require("inherits"),i=require("./hash"),h=require("safe-buffer").Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=new Array(64);function _(){this.init(),this._w=r,i.call(this,64,56)}function n(t,i,h){return h^t&(i^h)}function e(t,i,h){return t&i|h&(t|i)}function u(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function o(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function a(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}t(_,i),_.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},_.prototype._update=function(t){for(var i=this._w,h=0|this._a,r=0|this._b,_=0|this._c,c=0|this._d,w=0|this._e,B=0|this._f,E=0|this._g,I=0|this._h,d=0;d<16;++d)i[d]=t.readInt32BE(4*d);for(;d<64;++d)i[d]=a(i[d-2])+i[d-7]+o(i[d-15])+i[d-16]|0;for(var p=0;p<64;++p){var b=I+f(w)+n(w,B,E)+s[p]+i[p]|0,g=u(h)+e(h,r,_)|0;I=E,E=B,B=w,w=c+b|0,c=_,_=r,r=h,h=b+g|0}this._a=h+this._a|0,this._b=r+this._b|0,this._c=_+this._c|0,this._d=c+this._d|0,this._e=w+this._e|0,this._f=B+this._f|0,this._g=E+this._g|0,this._h=I+this._h|0},_.prototype._hash=function(){var t=h.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},module.exports=_;
},{"inherits":"UAgo","./hash":"BRYs","safe-buffer":"udfh"}],"aEGo":[function(require,module,exports) {

var t=require("inherits"),i=require("./sha256"),e=require("./hash"),r=require("safe-buffer").Buffer,h=new Array(64);function s(){this.init(),this._w=h,e.call(this,64,56)}t(s,i),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var t=r.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},module.exports=s;
},{"inherits":"UAgo","./sha256":"A4Mv","./hash":"BRYs","safe-buffer":"udfh"}],"HR6Y":[function(require,module,exports) {

var h=require("inherits"),t=require("./hash"),i=require("safe-buffer").Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],_=new Array(160);function l(){this.init(),this._w=_,t.call(this,128,112)}function r(h,t,i){return i^h&(t^i)}function n(h,t,i){return h&t|i&(h|t)}function e(h,t){return(h>>>28|t<<4)^(t>>>2|h<<30)^(t>>>7|h<<25)}function f(h,t){return(h>>>14|t<<18)^(h>>>18|t<<14)^(t>>>9|h<<23)}function u(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^h>>>7}function a(h,t){return(h>>>1|t<<31)^(h>>>8|t<<24)^(h>>>7|t<<25)}function c(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^h>>>6}function o(h,t){return(h>>>19|t<<13)^(t>>>29|h<<3)^(h>>>6|t<<26)}function d(h,t){return h>>>0<t>>>0?1:0}h(l,t),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(h){for(var t=this._w,i=0|this._ah,_=0|this._bh,l=0|this._ch,b=0|this._dh,g=0|this._eh,p=0|this._fh,v=0|this._gh,w=0|this._hh,B=0|this._al,y=0|this._bl,E=0|this._cl,I=0|this._dl,q=0|this._el,m=0|this._fl,x=0|this._gl,A=0|this._hl,U=0;U<32;U+=2)t[U]=h.readInt32BE(4*U),t[U+1]=h.readInt32BE(4*U+4);for(;U<160;U+=2){var j=t[U-30],k=t[U-30+1],z=u(j,k),C=a(k,j),D=c(j=t[U-4],k=t[U-4+1]),F=o(k,j),G=t[U-14],H=t[U-14+1],J=t[U-32],K=t[U-32+1],L=C+H|0,M=z+G+d(L,C)|0;M=(M=M+D+d(L=L+F|0,F)|0)+J+d(L=L+K|0,K)|0,t[U]=M,t[U+1]=L}for(var N=0;N<160;N+=2){M=t[N],L=t[N+1];var O=n(i,_,l),P=n(B,y,E),Q=e(i,B),R=e(B,i),S=f(g,q),T=f(q,g),V=s[N],W=s[N+1],X=r(g,p,v),Y=r(q,m,x),Z=A+T|0,$=w+S+d(Z,A)|0;$=($=($=$+X+d(Z=Z+Y|0,Y)|0)+V+d(Z=Z+W|0,W)|0)+M+d(Z=Z+L|0,L)|0;var hh=R+P|0,th=Q+O+d(hh,R)|0;w=v,A=x,v=p,x=m,p=g,m=q,g=b+$+d(q=I+Z|0,I)|0,b=l,I=E,l=_,E=y,_=i,y=B,i=$+th+d(B=Z+hh|0,Z)|0}this._al=this._al+B|0,this._bl=this._bl+y|0,this._cl=this._cl+E|0,this._dl=this._dl+I|0,this._el=this._el+q|0,this._fl=this._fl+m|0,this._gl=this._gl+x|0,this._hl=this._hl+A|0,this._ah=this._ah+i+d(this._al,B)|0,this._bh=this._bh+_+d(this._bl,y)|0,this._ch=this._ch+l+d(this._cl,E)|0,this._dh=this._dh+b+d(this._dl,I)|0,this._eh=this._eh+g+d(this._el,q)|0,this._fh=this._fh+p+d(this._fl,m)|0,this._gh=this._gh+v+d(this._gl,x)|0,this._hh=this._hh+w+d(this._hl,A)|0},l.prototype._hash=function(){var h=i.allocUnsafe(64);function t(t,i,s){h.writeInt32BE(t,s),h.writeInt32BE(i,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),h},module.exports=l;
},{"inherits":"UAgo","./hash":"BRYs","safe-buffer":"udfh"}],"HeE9":[function(require,module,exports) {

var h=require("inherits"),t=require("./sha512"),i=require("./hash"),s=require("safe-buffer").Buffer,_=new Array(160);function e(){this.init(),this._w=_,i.call(this,128,112)}h(e,t),e.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},e.prototype._hash=function(){var h=s.allocUnsafe(48);function t(t,i,s){h.writeInt32BE(t,s),h.writeInt32BE(i,s+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),h},module.exports=e;
},{"inherits":"UAgo","./sha512":"HR6Y","./hash":"BRYs","safe-buffer":"udfh"}],"cBQa":[function(require,module,exports) {
var e=module.exports=function(r){r=r.toLowerCase();var s=e[r];if(!s)throw new Error(r+" is not supported (we accept pull requests)");return new s};e.sha=require("./sha"),e.sha1=require("./sha1"),e.sha224=require("./sha224"),e.sha256=require("./sha256"),e.sha384=require("./sha384"),e.sha512=require("./sha512");
},{"./sha":"jR7J","./sha1":"Vi91","./sha224":"aEGo","./sha256":"A4Mv","./sha384":"HeE9","./sha512":"HR6Y"}],"ZENO":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(e,r,t,c){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,l,u=arguments.length;switch(u){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick(function(){e.call(null,r)});case 3:return n.nextTick(function(){e.call(null,r,t)});case 4:return n.nextTick(function(){e.call(null,r,t,c)});default:for(i=new Array(u-1),l=0;l<i.length;)i[l++]=arguments[l];return n.nextTick(function(){e.apply(null,i)})}}void 0===n||!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?module.exports={nextTick:e}:module.exports=n;
},{"process":"rH1J"}],"dH1N":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"VjIL"}],"FX3H":[function(require,module,exports) {
function r(r){return Array.isArray?Array.isArray(r):"[object Array]"===b(r)}function t(r){return"boolean"==typeof r}function e(r){return null===r}function n(r){return null==r}function o(r){return"number"==typeof r}function i(r){return"string"==typeof r}function u(r){return"symbol"==typeof r}function s(r){return void 0===r}function f(r){return"[object RegExp]"===b(r)}function p(r){return"object"==typeof r&&null!==r}function c(r){return"[object Date]"===b(r)}function l(r){return"[object Error]"===b(r)||r instanceof Error}function y(r){return"function"==typeof r}function x(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function b(r){return Object.prototype.toString.call(r)}exports.isArray=r,exports.isBoolean=t,exports.isNull=e,exports.isNullOrUndefined=n,exports.isNumber=o,exports.isString=i,exports.isSymbol=u,exports.isUndefined=s,exports.isRegExp=f,exports.isObject=p,exports.isDate=c,exports.isError=l,exports.isFunction=y,exports.isPrimitive=x,exports.isBuffer=require("buffer").Buffer.isBuffer;
},{"buffer":"VjIL"}],"lGjX":[function(require,module,exports) {

"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n=require("safe-buffer").Buffer,e=require("util");function i(t,n,e){t.copy(n,e)}module.exports=function(){function e(){t(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(0===this.length)return"";for(var n=this.head,e=""+n.data;n=n.next;)e+=t+n.data;return e},e.prototype.concat=function(t){if(0===this.length)return n.alloc(0);for(var e=n.allocUnsafe(t>>>0),h=this.head,a=0;h;)i(h.data,e,a),a+=h.data.length,h=h.next;return e},e}(),e&&e.inspect&&e.inspect.custom&&(module.exports.prototype[e.inspect.custom]=function(){var t=e.inspect({length:this.length});return this.constructor.name+" "+t});
},{"safe-buffer":"dH1N","util":"Zcgp"}],"NZa7":[function(require,module,exports) {
"use strict";var t=require("process-nextick-args");function e(e,i){var r=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(a,this,e)):t.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!i&&e?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,t.nextTick(a,r,e)):t.nextTick(a,r,e):i&&i(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(t,e){t.emit("error",e)}module.exports={destroy:e,undestroy:i};
},{"process-nextick-args":"ZENO"}],"ReVI":[function(require,module,exports) {
var process = require("process");

var global = arguments[3];
var e=require("process"),t=arguments[3],n=require("process-nextick-args");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){F(t,e)}}module.exports=g;var o,s=n.nextTick;g.WritableState=y;var f=Object.create(require("core-util-is"));f.inherits=require("inherits");var u={deprecate:require("util-deprecate")},a=require("./internal/streams/stream"),c=require("safe-buffer").Buffer,d=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function l(e){return c.from(e)}function h(e){return c.isBuffer(e)||e instanceof d}var b,p=require("./internal/streams/destroy");function w(){}function y(e,t){o=o||require("./_stream_duplex"),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,s=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){R(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(o=o||require("./_stream_duplex"),!(b.call(g,this)||this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function k(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}function v(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}function q(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}function _(e,t,n,r,i,o){if(!n){var s=q(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var f=t.objectMode?1:r.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,f,r,i,o);return u}function m(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}function S(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function R(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(S(n),t)x(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||B(e,n),r?s(M,e,n,o,i):M(e,n,o,i)}}function M(e,t,n,r){n||j(e,t),t.pendingcb--,r(),T(e,t)}function j(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function B(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,m(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,d=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function W(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function F(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}f.inherits(g,a),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):b=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&h(e);return o&&!c.isBuffer(e)&&(e=l(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ended?k(this,n):(o||v(this,r,e,n))&&(r.pendingcb++,i=_(this,r,o,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||B(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||W(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)};
},{"process-nextick-args":"ZENO","core-util-is":"FX3H","inherits":"UAgo","util-deprecate":"E8KT","./internal/streams/stream":"WiQS","safe-buffer":"dH1N","./internal/streams/destroy":"NZa7","./_stream_duplex":"Fbpv","process":"rH1J"}],"Fbpv":[function(require,module,exports) {
"use strict";var e=require("process-nextick-args"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=Object.create(require("core-util-is"));r.inherits=require("inherits");var i=require("./_stream_readable"),a=require("./_stream_writable");r.inherits(l,i);for(var o=t(a.prototype),s=0;s<o.length;s++){var n=o[s];l.prototype[n]||(l.prototype[n]=a.prototype[n])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||e.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)};
},{"process-nextick-args":"ZENO","core-util-is":"FX3H","inherits":"UAgo","./_stream_readable":"D1OO","./_stream_writable":"ReVI"}],"HOpH":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"dH1N"}],"D1OO":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),n=require("process-nextick-args");module.exports=_;var r,i=require("isarray");_.ReadableState=w;var a=require("events").EventEmitter,d=function(e,t){return e.listeners(t).length},o=require("./internal/streams/stream"),s=require("safe-buffer").Buffer,u=(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function l(e){return s.from(e)}function h(e){return s.isBuffer(e)||e instanceof u}var p=Object.create(require("core-util-is"));p.inherits=require("inherits");var f=require("util"),c=void 0;c=f&&f.debuglog?f.debuglog("stream"):function(){};var g,b=require("./internal/streams/BufferList"),m=require("./internal/streams/destroy");p.inherits(_,o);var v=["error","close","destroy","pause","resume"];function y(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function w(e,t){e=e||{};var n=t instanceof(r=r||require("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=require("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||require("./_stream_duplex"),!(this instanceof _))return new _(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function M(e,t,n,r,i){var a,d=e._readableState;null===t?(d.reading=!1,x(e,d)):(i||(a=k(d,t)),a?e.emit("error",a):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=l(t)),r?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?S(e,d,t,!1):C(e,d)):S(e,d,t,!1))):r||(d.reading=!1));return j(d)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&q(e)),C(e,t)}function k(e,t){var n;return h(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function j(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),M(this,e,t,!1,n)},_.prototype.unshift=function(e){return M(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return g||(g=require("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var R=8388608;function E(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,q(e)}}function q(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(W,e):W(e))}function W(e){c("emit readable"),e.emit("readable"),B(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function O(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&d(e,"data")&&(t.flowing=!0,B(e))}}function T(e){c("readable nexttick read 0"),e.read(0)}function U(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}function P(e,t){t.reading||(c("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=I(e,t.buffer,t.decoder),n);var n}function I(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?A(e,t):F(e,t),r}function A(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,d=e>a.length?a.length:e;if(d===a.length?i+=a:i+=a.slice(0,e),0===(e-=d)){d===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(d));break}++r}return t.length-=r,i}function F(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,d=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,d),0===(e-=d)){d===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(d));break}++i}return t.length-=i,n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):q(this),null;if(0===(e=L(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(n,t))),null===(r=e>0?H(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,r){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var o=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr?u:v;function s(t,n){c("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",b),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}a.endEmitted?n.nextTick(o):i.once("end",o),e.on("unpipe",s);var l=O(i);e.on("drain",l);var h=!1;var p=!1;function f(t){c("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==J(a.pipes,e))&&!h&&(c("false write response, pause",a.awaitDrain),a.awaitDrain++,p=!0),i.pause())}function g(t){c("onerror",t),v(),e.removeListener("error",g),0===d(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",m),v()}function m(){c("onfinish"),e.removeListener("close",b),v()}function v(){c("unpipe"),i.unpipe(e)}return i.on("data",f),y(e,"error",g),e.once("close",b),e.once("finish",m),e.emit("pipe",i),a.flowing||(c("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var d=J(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&q(this):n.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,U(this,e)),this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=H;
},{"process-nextick-args":"ZENO","isarray":"z6OH","events":"LMQS","./internal/streams/stream":"WiQS","safe-buffer":"dH1N","core-util-is":"FX3H","inherits":"UAgo","util":"Zcgp","./internal/streams/BufferList":"lGjX","./internal/streams/destroy":"NZa7","./_stream_duplex":"Fbpv","string_decoder/":"HOpH","process":"rH1J"}],"LKUl":[function(require,module,exports) {
"use strict";module.exports=n;var t=require("./_stream_duplex"),r=Object.create(require("core-util-is"));function e(t,r){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=r&&this.push(r),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(r){if(!(this instanceof n))return new n(r);t.call(this,r),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush(function(r,e){a(t,r,e)}):a(this,null,null)}function a(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=require("inherits"),r.inherits(n,t),n.prototype.push=function(r,e){return this._transformState.needTransform=!1,t.prototype.push.call(this,r,e)},n.prototype._transform=function(t,r,e){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},n.prototype._destroy=function(r,e){var n=this;t.prototype._destroy.call(this,r,function(t){e(t),n.emit("close")})};
},{"./_stream_duplex":"Fbpv","core-util-is":"FX3H","inherits":"UAgo"}],"DHMt":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform"),e=Object.create(require("core-util-is"));function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}e.inherits=require("inherits"),e.inherits(t,r),t.prototype._transform=function(r,e,t){t(null,r)};
},{"./_stream_transform":"LKUl","core-util-is":"FX3H","inherits":"UAgo"}],"T8s1":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_readable.js":"D1OO","./lib/_stream_writable.js":"ReVI","./lib/_stream_duplex.js":"Fbpv","./lib/_stream_transform.js":"LKUl","./lib/_stream_passthrough.js":"DHMt"}],"HHxx":[function(require,module,exports) {
module.exports=require("./lib/_stream_writable.js");
},{"./lib/_stream_writable.js":"ReVI"}],"phD3":[function(require,module,exports) {
module.exports=require("./lib/_stream_duplex.js");
},{"./lib/_stream_duplex.js":"Fbpv"}],"sfFR":[function(require,module,exports) {
module.exports=require("./readable").Transform;
},{"./readable":"T8s1"}],"iCCB":[function(require,module,exports) {
module.exports=require("./readable").PassThrough;
},{"./readable":"T8s1"}],"kbGg":[function(require,module,exports) {
module.exports=n;var e=require("events").EventEmitter,r=require("inherits");function n(){e.call(this)}r(n,e),n.Readable=require("readable-stream/readable.js"),n.Writable=require("readable-stream/writable.js"),n.Duplex=require("readable-stream/duplex.js"),n.Transform=require("readable-stream/transform.js"),n.PassThrough=require("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(r,n){var o=this;function t(e){r.writable&&!1===r.write(e)&&o.pause&&o.pause()}function s(){o.readable&&o.resume&&o.resume()}o.on("data",t),r.on("drain",s),r._isStdio||n&&!1===n.end||(o.on("end",a),o.on("close",u));var i=!1;function a(){i||(i=!0,r.end())}function u(){i||(i=!0,"function"==typeof r.destroy&&r.destroy())}function d(r){if(l(),0===e.listenerCount(this,"error"))throw r}function l(){o.removeListener("data",t),r.removeListener("drain",s),o.removeListener("end",a),o.removeListener("close",u),o.removeListener("error",d),r.removeListener("error",d),o.removeListener("end",l),o.removeListener("close",l),r.removeListener("close",l)}return o.on("error",d),r.on("error",d),o.on("end",l),o.on("close",l),r.on("close",l),r.emit("pipe",o),r};
},{"events":"LMQS","inherits":"UAgo","readable-stream/readable.js":"T8s1","readable-stream/writable.js":"HHxx","readable-stream/duplex.js":"phD3","readable-stream/transform.js":"sfFR","readable-stream/passthrough.js":"iCCB"}],"ccPm":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"dH1N"}],"fT2I":[function(require,module,exports) {

var t=require("safe-buffer").Buffer,i=require("stream").Transform,r=require("string_decoder").StringDecoder,e=require("inherits");function n(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e(n,i),n.prototype.update=function(i,r,e){"string"==typeof i&&(i=t.from(i,r));var n=this._update(i);return this.hashMode?this:(e&&(n=this._toString(n,e)),n)},n.prototype.setAutoPadding=function(){},n.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},n.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},n.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},n.prototype._transform=function(t,i,r){var e;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(n){e=n}finally{r(e)}},n.prototype._flush=function(t){var i;try{this.push(this.__final())}catch(r){i=r}t(i)},n.prototype._finalOrDigest=function(i){var r=this.__final()||t.alloc(0);return i&&(r=this._toString(r,i,!0)),r},n.prototype._toString=function(t,i,e){if(this._decoder||(this._decoder=new r(i),this._encoding=i),this._encoding!==i)throw new Error("can't switch encodings");var n=this._decoder.write(t);return e&&(n+=this._decoder.end()),n},module.exports=n;
},{"safe-buffer":"udfh","stream":"kbGg","string_decoder":"ccPm","inherits":"UAgo"}],"QR3Y":[function(require,module,exports) {
"use strict";var e=require("inherits"),r=require("md5.js"),t=require("ripemd160"),i=require("sha.js"),s=require("cipher-base");function n(e){s.call(this,"digest"),this._hash=e}e(n,s),n.prototype._update=function(e){this._hash.update(e)},n.prototype._final=function(){return this._hash.digest()},module.exports=function(e){return"md5"===(e=e.toLowerCase())?new r:"rmd160"===e||"ripemd160"===e?new t:new n(i(e))};
},{"inherits":"UAgo","md5.js":"vbTd","ripemd160":"eCoJ","sha.js":"cBQa","cipher-base":"fT2I"}],"RU50":[function(require,module,exports) {

"use strict";var t=require("inherits"),e=require("safe-buffer").Buffer,a=require("cipher-base"),i=e.alloc(128),s=64;function h(t,h){a.call(this,"digest"),"string"==typeof h&&(h=e.from(h)),this._alg=t,this._key=h,h.length>s?h=t(h):h.length<s&&(h=e.concat([h,i],s));for(var r=this._ipad=e.allocUnsafe(s),o=this._opad=e.allocUnsafe(s),n=0;n<s;n++)r[n]=54^h[n],o[n]=92^h[n];this._hash=[r]}t(h,a),h.prototype._update=function(t){this._hash.push(t)},h.prototype._final=function(){var t=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,t]))},module.exports=h;
},{"inherits":"UAgo","safe-buffer":"udfh","cipher-base":"fT2I"}],"IqXP":[function(require,module,exports) {
var e=require("md5.js");module.exports=function(r){return(new e).update(r).digest()};
},{"md5.js":"vbTd"}],"LZdq":[function(require,module,exports) {

"use strict";var e=require("inherits"),t=require("./legacy"),r=require("cipher-base"),a=require("safe-buffer").Buffer,i=require("create-hash/md5"),s=require("ripemd160"),h=require("sha.js"),n=a.alloc(128);function d(e,t){r.call(this,"digest"),"string"==typeof t&&(t=a.from(t));var i="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>i)?t=("rmd160"===e?new s:h(e)).update(t).digest():t.length<i&&(t=a.concat([t,n],i));for(var d=this._ipad=a.allocUnsafe(i),u=this._opad=a.allocUnsafe(i),o=0;o<i;o++)d[o]=54^t[o],u[o]=92^t[o];this._hash="rmd160"===e?new s:h(e),this._hash.update(d)}e(d,r),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new s:h(this._alg)).update(this._opad).update(e).digest()},module.exports=function(e,r){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",r):"md5"===e?new t(i,r):new d(e,r)};
},{"inherits":"UAgo","./legacy":"RU50","cipher-base":"fT2I","safe-buffer":"udfh","create-hash/md5":"IqXP","ripemd160":"eCoJ","sha.js":"cBQa"}],"Z1R8":[function(require,module,exports) {
module.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};
},{}],"lS9h":[function(require,module,exports) {
module.exports=require("./browser/algorithms.json");
},{"./browser/algorithms.json":"Z1R8"}],"Mg48":[function(require,module,exports) {
var r=Math.pow(2,30)-1;module.exports=function(e,o){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0||o>r||o!=o)throw new TypeError("Bad key length")};
},{}],"EHHH":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var s,e=arguments[3],r=require("process");if(e.process&&e.process.browser)s="utf-8";else if(e.process&&e.process.version){var o=parseInt(r.version.split(".")[0].slice(1),10);s=o>=6?"utf-8":"binary"}else s="utf-8";module.exports=s;
},{"process":"rH1J"}],"QMvR":[function(require,module,exports) {

var r=require("safe-buffer").Buffer;module.exports=function(e,f,u){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,f);if(ArrayBuffer.isView(e))return r.from(e.buffer);throw new TypeError(u+" must be a string, a Buffer, a typed array or a DataView")};
},{"safe-buffer":"udfh"}],"jpOk":[function(require,module,exports) {

var e=require("create-hash/md5"),r=require("ripemd160"),a=require("sha.js"),t=require("safe-buffer").Buffer,i=require("./precondition"),s=require("./default-encoding"),n=require("./to-buffer"),h=t.alloc(128),o={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function u(e,r,a){var i=c(e),s="sha512"===e||"sha384"===e?128:64;r.length>s?r=i(r):r.length<s&&(r=t.concat([r,h],s));for(var n=t.allocUnsafe(s+o[e]),u=t.allocUnsafe(s+o[e]),l=0;l<s;l++)n[l]=54^r[l],u[l]=92^r[l];var d=t.allocUnsafe(s+a+4);n.copy(d,0,0,s),this.ipad1=d,this.ipad2=n,this.opad=u,this.alg=e,this.blocksize=s,this.hash=i,this.size=o[e]}function c(t){return"rmd160"===t||"ripemd160"===t?function(e){return(new r).update(e).digest()}:"md5"===t?e:function(e){return a(t).update(e).digest()}}function l(e,r,a,h,c){i(a,h);var l=new u(c=c||"sha1",e=n(e,s,"Password"),(r=n(r,s,"Salt")).length),d=t.allocUnsafe(h),f=t.allocUnsafe(r.length+4);r.copy(f,0,0,r.length);for(var p=0,g=o[c],m=Math.ceil(h/g),v=1;v<=m;v++){f.writeUInt32BE(v,r.length);for(var q=l.run(f,l.ipad1),y=q,U=1;U<a;U++){y=l.run(y,l.ipad2);for(var b=0;b<g;b++)q[b]^=y[b]}q.copy(d,p),p+=g}return d}u.prototype.run=function(e,r){return e.copy(r,this.blocksize),this.hash(r).copy(this.opad,this.blocksize),this.hash(this.opad)},module.exports=l;
},{"create-hash/md5":"IqXP","ripemd160":"eCoJ","sha.js":"cBQa","safe-buffer":"udfh","./precondition":"Mg48","./default-encoding":"EHHH","./to-buffer":"QMvR"}],"Q77g":[function(require,module,exports) {

var global = arguments[3];
var e,r,t=arguments[3],n=require("safe-buffer").Buffer,o=require("./precondition"),i=require("./default-encoding"),u=require("./sync"),s=require("./to-buffer"),c=t.crypto&&t.crypto.subtle,a={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function h(r){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==f[r])return f[r];var o=m(e=e||n.alloc(8),e,10,128,r).then(function(){return!0}).catch(function(){return!1});return f[r]=o,o}function l(){return r||(r=t.process&&t.process.nextTick?t.process.nextTick:t.queueMicrotask?t.queueMicrotask:t.setImmediate?t.setImmediate:t.setTimeout)}function m(e,r,t,o,i){return c.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return c.deriveBits({name:"PBKDF2",salt:r,iterations:t,hash:{name:i}},e,o<<3)}).then(function(e){return n.from(e)})}function p(e,r){e.then(function(e){l()(function(){r(null,e)})},function(e){l()(function(){r(e)})})}module.exports=function(e,r,n,c,f,d){"function"==typeof f&&(d=f,f=void 0);var v=a[(f=f||"sha1").toLowerCase()];if(v&&"function"==typeof t.Promise){if(o(n,c),e=s(e,i,"Password"),r=s(r,i,"Salt"),"function"!=typeof d)throw new Error("No callback provided to pbkdf2");p(h(v).then(function(t){return t?m(e,r,n,c,v):u(e,r,n,c,f)}),d)}else l()(function(){var t;try{t=u(e,r,n,c,f)}catch(o){return d(o)}d(null,t)})};
},{"safe-buffer":"udfh","./precondition":"Mg48","./default-encoding":"EHHH","./sync":"jpOk","./to-buffer":"QMvR"}],"zhze":[function(require,module,exports) {
exports.pbkdf2=require("./lib/async"),exports.pbkdf2Sync=require("./lib/sync");
},{"./lib/async":"Q77g","./lib/sync":"jpOk"}],"FLKs":[function(require,module,exports) {
"use strict";exports.readUInt32BE=function(r,o){return(r[0+o]<<24|r[1+o]<<16|r[2+o]<<8|r[3+o])>>>0},exports.writeUInt32BE=function(r,o,t){r[0+t]=o>>>24,r[1+t]=o>>>16&255,r[2+t]=o>>>8&255,r[3+t]=255&o},exports.ip=function(r,o,t,f){for(var n=0,e=0,u=6;u>=0;u-=2){for(var i=0;i<=24;i+=8)n<<=1,n|=o>>>i+u&1;for(i=0;i<=24;i+=8)n<<=1,n|=r>>>i+u&1}for(u=6;u>=0;u-=2){for(i=1;i<=25;i+=8)e<<=1,e|=o>>>i+u&1;for(i=1;i<=25;i+=8)e<<=1,e|=r>>>i+u&1}t[f+0]=n>>>0,t[f+1]=e>>>0},exports.rip=function(r,o,t,f){for(var n=0,e=0,u=0;u<4;u++)for(var i=24;i>=0;i-=8)n<<=1,n|=o>>>i+u&1,n<<=1,n|=r>>>i+u&1;for(u=4;u<8;u++)for(i=24;i>=0;i-=8)e<<=1,e|=o>>>i+u&1,e<<=1,e|=r>>>i+u&1;t[f+0]=n>>>0,t[f+1]=e>>>0},exports.pc1=function(r,o,t,f){for(var n=0,e=0,u=7;u>=5;u--){for(var i=0;i<=24;i+=8)n<<=1,n|=o>>i+u&1;for(i=0;i<=24;i+=8)n<<=1,n|=r>>i+u&1}for(i=0;i<=24;i+=8)n<<=1,n|=o>>i+u&1;for(u=1;u<=3;u++){for(i=0;i<=24;i+=8)e<<=1,e|=o>>i+u&1;for(i=0;i<=24;i+=8)e<<=1,e|=r>>i+u&1}for(i=0;i<=24;i+=8)e<<=1,e|=r>>i+u&1;t[f+0]=n>>>0,t[f+1]=e>>>0},exports.r28shl=function(r,o){return r<<o&268435455|r>>>28-o};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];exports.pc2=function(o,t,f,n){for(var e=0,u=0,i=r.length>>>1,p=0;p<i;p++)e<<=1,e|=o>>>r[p]&1;for(p=i;p<r.length;p++)u<<=1,u|=t>>>r[p]&1;f[n+0]=e>>>0,f[n+1]=u>>>0},exports.expand=function(r,o,t){var f=0,n=0;f=(1&r)<<5|r>>>27;for(var e=23;e>=15;e-=4)f<<=6,f|=r>>>e&63;for(e=11;e>=3;e-=4)n|=r>>>e&63,n<<=6;n|=(31&r)<<1|r>>>31,o[t+0]=f>>>0,o[t+1]=n>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];exports.substitute=function(r,t){for(var f=0,n=0;n<4;n++){f<<=4,f|=o[64*n+(r>>>18-6*n&63)]}for(n=0;n<4;n++){f<<=4,f|=o[256+64*n+(t>>>18-6*n&63)]}return f>>>0};var t=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];exports.permute=function(r){for(var o=0,f=0;f<t.length;f++)o<<=1,o|=r>>>t[f]&1;return o>>>0},exports.padSplit=function(r,o,t){for(var f=r.toString(2);f.length<o;)f="0"+f;for(var n=[],e=0;e<o;e+=t)n.push(f.slice(e,e+t));return n.join(" ")};
},{}],"ITMc":[function(require,module,exports) {
function r(r,o){if(!r)throw new Error(o||"Assertion failed")}module.exports=r,r.equal=function(r,o,e){if(r!=o)throw new Error(e||"Assertion failed: "+r+" != "+o)};
},{}],"vDMT":[function(require,module,exports) {
"use strict";var t=require("minimalistic-assert");function f(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==t.padding}module.exports=f,f.prototype._init=function(){},f.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},f.prototype._buffer=function(t,f){for(var e=Math.min(this.buffer.length-this.bufferOff,t.length-f),i=0;i<e;i++)this.buffer[this.bufferOff+i]=t[f+i];return this.bufferOff+=e,e},f.prototype._flushBuffer=function(t,f){return this._update(this.buffer,0,t,f),this.bufferOff=0,this.blockSize},f.prototype._updateEncrypt=function(t){var f=0,e=0,i=(this.bufferOff+t.length)/this.blockSize|0,r=new Array(i*this.blockSize);0!==this.bufferOff&&(f+=this._buffer(t,f),this.bufferOff===this.buffer.length&&(e+=this._flushBuffer(r,e)));for(var h=t.length-(t.length-f)%this.blockSize;f<h;f+=this.blockSize)this._update(t,f,r,e),e+=this.blockSize;for(;f<t.length;f++,this.bufferOff++)this.buffer[this.bufferOff]=t[f];return r},f.prototype._updateDecrypt=function(t){for(var f=0,e=0,i=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,r=new Array(i*this.blockSize);i>0;i--)f+=this._buffer(t,f),e+=this._flushBuffer(r,e);return f+=this._buffer(t,f),r},f.prototype.final=function(t){var f,e;return t&&(f=this.update(t)),e="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),f?f.concat(e):e},f.prototype._pad=function(t,f){if(0===f)return!1;for(;f<t.length;)t[f++]=0;return!0},f.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},f.prototype._unpad=function(t){return t},f.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var f=new Array(this.blockSize);return this._flushBuffer(f,0),this._unpad(f)};
},{"minimalistic-assert":"ITMc"}],"kDh9":[function(require,module,exports) {
"use strict";var t=require("minimalistic-assert"),e=require("inherits"),r=require("./utils"),n=require("./cipher");function p(){this.tmp=new Array(2),this.keys=null}function i(t){n.call(this,t);var e=new p;this._desState=e,this.deriveKeys(e,t.key)}e(i,n),module.exports=i,i.create=function(t){return new i(t)};var s=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];i.prototype.deriveKeys=function(e,n){e.keys=new Array(32),t.equal(n.length,this.blockSize,"Invalid key length");var p=r.readUInt32BE(n,0),i=r.readUInt32BE(n,4);r.pc1(p,i,e.tmp,0),p=e.tmp[0],i=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var u=s[a>>>1];p=r.r28shl(p,u),i=r.r28shl(i,u),r.pc2(p,i,e.keys,a)}},i.prototype._update=function(t,e,n,p){var i=this._desState,s=r.readUInt32BE(t,e),a=r.readUInt32BE(t,e+4);r.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],r.writeUInt32BE(n,s,p),r.writeUInt32BE(n,a,p+4)},i.prototype._pad=function(t,e){if(!1===this.padding)return!1;for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return!0},i.prototype._unpad=function(e){if(!1===this.padding)return e;for(var r=e[e.length-1],n=e.length-r;n<e.length;n++)t.equal(e[n],r);return e.slice(0,e.length-r)},i.prototype._encrypt=function(t,e,n,p,i){for(var s=e,a=n,u=0;u<t.keys.length;u+=2){var o=t.keys[u],y=t.keys[u+1];r.expand(a,t.tmp,0),o^=t.tmp[0],y^=t.tmp[1];var h=r.substitute(o,y),l=a;a=(s^r.permute(h))>>>0,s=l}r.rip(a,s,p,i)},i.prototype._decrypt=function(t,e,n,p,i){for(var s=n,a=e,u=t.keys.length-2;u>=0;u-=2){var o=t.keys[u],y=t.keys[u+1];r.expand(s,t.tmp,0),o^=t.tmp[0],y^=t.tmp[1];var h=r.substitute(o,y),l=s;s=(a^r.permute(h))>>>0,a=l}r.rip(s,a,p,i)};
},{"minimalistic-assert":"ITMc","inherits":"UAgo","./utils":"FLKs","./cipher":"vDMT"}],"bsRH":[function(require,module,exports) {
"use strict";var t=require("minimalistic-assert"),i=require("inherits"),e={};function r(i){t.equal(i.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=i[e]}function n(t){function r(i){t.call(this,i),this._cbcInit()}i(r,t);for(var n=Object.keys(e),s=0;s<n.length;s++){var c=n[s];r.prototype[c]=e[c]}return r.create=function(t){return new r(t)},r}exports.instantiate=n,e._cbcInit=function(){var t=new r(this.options.iv);this._cbcState=t},e._update=function(t,i,e,r){var n=this._cbcState,s=this.constructor.super_.prototype,c=n.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)c[o]^=t[i+o];s._update.call(this,c,0,e,r);for(o=0;o<this.blockSize;o++)c[o]=e[r+o]}else{s._update.call(this,t,i,e,r);for(o=0;o<this.blockSize;o++)e[r+o]^=c[o];for(o=0;o<this.blockSize;o++)c[o]=t[i+o]}};
},{"minimalistic-assert":"ITMc","inherits":"UAgo"}],"E6Yv":[function(require,module,exports) {
"use strict";var e=require("minimalistic-assert"),t=require("inherits"),r=require("./cipher"),p=require("./des");function i(t,r){e.equal(r.length,24,"Invalid key length");var i=r.slice(0,8),c=r.slice(8,16),y=r.slice(16,24);this.ciphers="encrypt"===t?[p.create({type:"encrypt",key:i}),p.create({type:"decrypt",key:c}),p.create({type:"encrypt",key:y})]:[p.create({type:"decrypt",key:y}),p.create({type:"encrypt",key:c}),p.create({type:"decrypt",key:i})]}function c(e){r.call(this,e);var t=new i(this.type,this.options.key);this._edeState=t}t(c,r),module.exports=c,c.create=function(e){return new c(e)},c.prototype._update=function(e,t,r,p){var i=this._edeState;i.ciphers[0]._update(e,t,r,p),i.ciphers[1]._update(r,p,r,p),i.ciphers[2]._update(r,p,r,p)},c.prototype._pad=p.prototype._pad,c.prototype._unpad=p.prototype._unpad;
},{"minimalistic-assert":"ITMc","inherits":"UAgo","./cipher":"vDMT","./des":"kDh9"}],"VkDE":[function(require,module,exports) {
"use strict";exports.utils=require("./des/utils"),exports.Cipher=require("./des/cipher"),exports.DES=require("./des/des"),exports.CBC=require("./des/cbc"),exports.EDE=require("./des/ede");
},{"./des/utils":"FLKs","./des/cipher":"vDMT","./des/des":"kDh9","./des/cbc":"bsRH","./des/ede":"E6Yv"}],"B7VB":[function(require,module,exports) {

var e=require("cipher-base"),r=require("des.js"),t=require("inherits"),s=require("safe-buffer").Buffer,d={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function i(r){e.call(this);var t,i=r.mode.toLowerCase(),c=d[i];t=r.decrypt?"decrypt":"encrypt";var a=r.key;s.isBuffer(a)||(a=s.from(a)),"des-ede"!==i&&"des-ede-cbc"!==i||(a=s.concat([a,a.slice(0,8)]));var n=r.iv;s.isBuffer(n)||(n=s.from(n)),this._des=c.create({key:a,iv:n,type:t})}d.des=d["des-cbc"],d.des3=d["des-ede3-cbc"],module.exports=i,t(i,e),i.prototype._update=function(e){return s.from(this._des.update(e))},i.prototype._final=function(){return s.from(this._des.final())};
},{"cipher-base":"fT2I","des.js":"VkDE","inherits":"UAgo","safe-buffer":"udfh"}],"ozjv":[function(require,module,exports) {
exports.encrypt=function(r,c){return r._cipher.encryptBlock(c)},exports.decrypt=function(r,c){return r._cipher.decryptBlock(c)};
},{}],"j0Hn":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;module.exports=function(r,n){for(var f=Math.min(r.length,n.length),t=new e(f),u=0;u<f;++u)t[u]=r[u]^n[u];return t};
},{"buffer":"VjIL"}],"iKKB":[function(require,module,exports) {
var r=require("buffer-xor");exports.encrypt=function(e,p){var c=r(p,e._prev);return e._prev=e._cipher.encryptBlock(c),e._prev},exports.decrypt=function(e,p){var c=e._prev;e._prev=p;var t=e._cipher.decryptBlock(p);return r(t,c)};
},{"buffer-xor":"j0Hn"}],"IoIW":[function(require,module,exports) {

var e=require("safe-buffer").Buffer,c=require("buffer-xor");function r(r,a,n){var t=a.length,h=c(a,r._cache);return r._cache=r._cache.slice(t),r._prev=e.concat([r._prev,n?a:h]),h}exports.encrypt=function(c,a,n){for(var t,h=e.allocUnsafe(0);a.length;){if(0===c._cache.length&&(c._cache=c._cipher.encryptBlock(c._prev),c._prev=e.allocUnsafe(0)),!(c._cache.length<=a.length)){h=e.concat([h,r(c,a,n)]);break}t=c._cache.length,h=e.concat([h,r(c,a.slice(0,t),n)]),a=a.slice(t)}return h};
},{"safe-buffer":"udfh","buffer-xor":"j0Hn"}],"xVrh":[function(require,module,exports) {

var r=require("safe-buffer").Buffer;function e(e,n,c){var f=e._cipher.encryptBlock(e._prev)[0]^n;return e._prev=r.concat([e._prev.slice(1),r.from([c?n:f])]),f}exports.encrypt=function(n,c,f){for(var t=c.length,o=r.allocUnsafe(t),a=-1;++a<t;)o[a]=e(n,c[a],f);return o};
},{"safe-buffer":"udfh"}],"X3n0":[function(require,module,exports) {

var r=require("safe-buffer").Buffer;function e(r,e,f){for(var t,o,c=-1,a=0;++c<8;)t=e&1<<7-c?128:0,a+=(128&(o=r._cipher.encryptBlock(r._prev)[0]^t))>>c%8,r._prev=n(r._prev,f?t:o);return a}function n(e,n){var f=e.length,t=-1,o=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([n])]);++t<f;)o[t]=e[t]<<1|e[t+1]>>7;return o}exports.encrypt=function(n,f,t){for(var o=f.length,c=r.allocUnsafe(o),a=-1;++a<o;)c[a]=e(n,f[a],t);return c};
},{"safe-buffer":"udfh"}],"LKkn":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,c=require("buffer-xor");function r(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}exports.encrypt=function(n,t){for(;n._cache.length<t.length;)n._cache=e.concat([n._cache,r(n)]);var h=n._cache.slice(0,t.length);return n._cache=n._cache.slice(t.length),c(t,h)};
},{"buffer-xor":"j0Hn","buffer":"VjIL"}],"QOvJ":[function(require,module,exports) {
function t(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r)}}module.exports=t;
},{}],"eH11":[function(require,module,exports) {

var e=require("buffer-xor"),c=require("safe-buffer").Buffer,r=require("../incr32");function a(e){var c=e._cipher.encryptBlockRaw(e._prev);return r(e._prev),c}var t=16;exports.encrypt=function(r,n){var h=Math.ceil(n.length/t),i=r._cache.length;r._cache=c.concat([r._cache,c.allocUnsafe(h*t)]);for(var _=0;_<h;_++){var f=a(r),l=i+_*t;r._cache.writeUInt32BE(f[0],l+0),r._cache.writeUInt32BE(f[1],l+4),r._cache.writeUInt32BE(f[2],l+8),r._cache.writeUInt32BE(f[3],l+12)}var u=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),e(n,u)};
},{"buffer-xor":"j0Hn","safe-buffer":"udfh","../incr32":"QOvJ"}],"zVBc":[function(require,module,exports) {
module.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};
},{}],"FvEC":[function(require,module,exports) {
var r={ECB:require("./ecb"),CBC:require("./cbc"),CFB:require("./cfb"),CFB8:require("./cfb8"),CFB1:require("./cfb1"),OFB:require("./ofb"),CTR:require("./ctr"),GCM:require("./ctr")},e=require("./list.json");for(var i in e)e[i].module=r[e[i].mode];module.exports=e;
},{"./ecb":"ozjv","./cbc":"iKKB","./cfb":"IoIW","./cfb8":"xVrh","./cfb1":"X3n0","./ofb":"LKkn","./ctr":"eH11","./list.json":"zVBc"}],"DMHf":[function(require,module,exports) {

var e=require("safe-buffer").Buffer;function t(t){e.isBuffer(t)||(t=e.from(t));for(var r=t.length/4|0,n=new Array(r),o=0;o<r;o++)n[o]=t.readUInt32BE(4*o);return n}function r(e){for(;0<e.length;e++)e[0]=0}function n(e,t,r,n,o){for(var i,B,S,u,c=r[0],_=r[1],f=r[2],a=r[3],s=e[0]^t[0],y=e[1]^t[1],I=e[2]^t[2],X=e[3]^t[3],h=4,l=1;l<o;l++)i=c[s>>>24]^_[y>>>16&255]^f[I>>>8&255]^a[255&X]^t[h++],B=c[y>>>24]^_[I>>>16&255]^f[X>>>8&255]^a[255&s]^t[h++],S=c[I>>>24]^_[X>>>16&255]^f[s>>>8&255]^a[255&y]^t[h++],u=c[X>>>24]^_[s>>>16&255]^f[y>>>8&255]^a[255&I]^t[h++],s=i,y=B,I=S,X=u;return i=(n[s>>>24]<<24|n[y>>>16&255]<<16|n[I>>>8&255]<<8|n[255&X])^t[h++],B=(n[y>>>24]<<24|n[I>>>16&255]<<16|n[X>>>8&255]<<8|n[255&s])^t[h++],S=(n[I>>>24]<<24|n[X>>>16&255]<<16|n[s>>>8&255]<<8|n[255&y])^t[h++],u=(n[X>>>24]<<24|n[s>>>16&255]<<16|n[y>>>8&255]<<8|n[255&I])^t[h++],[i>>>=0,B>>>=0,S>>>=0,u>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],i=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],o=[[],[],[],[]],i=[[],[],[],[]],B=0,S=0,u=0;u<256;++u){var c=S^S<<1^S<<2^S<<3^S<<4;c=c>>>8^255&c^99,r[B]=c,n[c]=B;var _=e[B],f=e[_],a=e[f],s=257*e[c]^16843008*c;o[0][B]=s<<24|s>>>8,o[1][B]=s<<16|s>>>16,o[2][B]=s<<8|s>>>24,o[3][B]=s,s=16843009*a^65537*f^257*_^16843008*B,i[0][c]=s<<24|s>>>8,i[1][c]=s<<16|s>>>16,i[2][c]=s<<8|s>>>24,i[3][c]=s,0===B?B=S=1:(B=_^e[e[e[a^_]]],S^=e[e[S]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:o,INV_SUB_MIX:i}}();function B(e){this._key=t(e),this._reset()}B.blockSize=16,B.keySize=32,B.prototype.blockSize=B.blockSize,B.prototype.keySize=B.keySize,B.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),B=[],S=0;S<t;S++)B[S]=e[S];for(S=t;S<n;S++){var u=B[S-1];S%t==0?(u=u<<8|u>>>24,u=i.SBOX[u>>>24]<<24|i.SBOX[u>>>16&255]<<16|i.SBOX[u>>>8&255]<<8|i.SBOX[255&u],u^=o[S/t|0]<<24):t>6&&S%t==4&&(u=i.SBOX[u>>>24]<<24|i.SBOX[u>>>16&255]<<16|i.SBOX[u>>>8&255]<<8|i.SBOX[255&u]),B[S]=B[S-t]^u}for(var c=[],_=0;_<n;_++){var f=n-_,a=B[f-(_%4?0:4)];c[_]=_<4||f<=4?a:i.INV_SUB_MIX[0][i.SBOX[a>>>24]]^i.INV_SUB_MIX[1][i.SBOX[a>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[a>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[255&a]]}this._nRounds=r,this._keySchedule=B,this._invKeySchedule=c},B.prototype.encryptBlockRaw=function(e){return n(e=t(e),this._keySchedule,i.SUB_MIX,i.SBOX,this._nRounds)},B.prototype.encryptBlock=function(t){var r=this.encryptBlockRaw(t),n=e.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},B.prototype.decryptBlock=function(r){var o=(r=t(r))[1];r[1]=r[3],r[3]=o;var B=n(r,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX,this._nRounds),S=e.allocUnsafe(16);return S.writeUInt32BE(B[0],0),S.writeUInt32BE(B[3],4),S.writeUInt32BE(B[2],8),S.writeUInt32BE(B[1],12),S},B.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},module.exports.AES=B;
},{"safe-buffer":"udfh"}],"ecLa":[function(require,module,exports) {

var t=require("safe-buffer").Buffer,e=t.alloc(16,0);function h(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function a(e){var h=t.allocUnsafe(16);return h.writeUInt32BE(e[0]>>>0,0),h.writeUInt32BE(e[1]>>>0,4),h.writeUInt32BE(e[2]>>>0,8),h.writeUInt32BE(e[3]>>>0,12),h}function i(e){this.h=e,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}i.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},i.prototype._multiply=function(){for(var t,e,i=h(this.h),c=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(c[0]^=i[0],c[1]^=i[1],c[2]^=i[2],c[3]^=i[3]),e=0!=(1&i[3]),t=3;t>0;t--)i[t]=i[t]>>>1|(1&i[t-1])<<31;i[0]=i[0]>>>1,e&&(i[0]=i[0]^225<<24)}this.state=a(c)},i.prototype.update=function(e){var h;for(this.cache=t.concat([this.cache,e]);this.cache.length>=16;)h=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(h)},i.prototype.final=function(h,i){return this.cache.length&&this.ghash(t.concat([this.cache,e],16)),this.ghash(a([0,h,0,i])),this.state},module.exports=i;
},{"safe-buffer":"udfh"}],"eCh4":[function(require,module,exports) {

var t=require("./aes"),e=require("safe-buffer").Buffer,r=require("cipher-base"),h=require("inherits"),a=require("./ghash"),i=require("buffer-xor"),n=require("./incr32");function s(t,e){var r=0;t.length!==e.length&&r++;for(var h=Math.min(t.length,e.length),a=0;a<h;++a)r+=t[a]^e[a];return r}function o(t,r,h){if(12===r.length)return t._finID=e.concat([r,e.from([0,0,0,1])]),e.concat([r,e.from([0,0,0,2])]);var i=new a(h),s=r.length,o=s%16;i.update(r),o&&(o=16-o,i.update(e.alloc(o,0))),i.update(e.alloc(8,0));var u=8*s,l=e.alloc(8);l.writeUIntBE(u,0,8),i.update(l),t._finID=i.state;var c=e.from(t._finID);return n(c),c}function u(h,i,n,s){r.call(this);var u=e.alloc(4,0);this._cipher=new t.AES(i);var l=this._cipher.encryptBlock(u);this._ghash=new a(l),n=o(this,n,l),this._prev=e.from(n),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}h(u,r),u.prototype._update=function(t){if(!this._called&&this._alen){var r=16-this._alen%16;r<16&&(r=e.alloc(r,0),this._ghash.update(r))}this._called=!0;var h=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(h),this._len+=t.length,h},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=i(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&s(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},u.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},module.exports=u;
},{"./aes":"DMHf","safe-buffer":"udfh","cipher-base":"fT2I","inherits":"UAgo","./ghash":"ecLa","buffer-xor":"j0Hn","./incr32":"QOvJ"}],"rBsa":[function(require,module,exports) {

var e=require("./aes"),r=require("safe-buffer").Buffer,t=require("cipher-base"),i=require("inherits");function s(i,s,c,h){t.call(this),this._cipher=new e.AES(s),this._prev=r.from(c),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=h,this._mode=i}i(s,t),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},module.exports=s;
},{"./aes":"DMHf","safe-buffer":"udfh","cipher-base":"fT2I","inherits":"UAgo"}],"vnlH":[function(require,module,exports) {

var e=require("safe-buffer").Buffer,r=require("md5.js");function t(t,a,f,l){if(e.isBuffer(t)||(t=e.from(t,"binary")),a&&(e.isBuffer(a)||(a=e.from(a,"binary")),8!==a.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var n=f/8,i=e.alloc(n),o=e.alloc(l||0),u=e.alloc(0);n>0||l>0;){var h=new r;h.update(u),h.update(t),a&&h.update(a),u=h.digest();var g=0;if(n>0){var s=i.length-n;g=Math.min(n,u.length),u.copy(i,s,0,g),n-=g}if(g<u.length&&l>0){var d=o.length-l,v=Math.min(l,u.length-g);u.copy(o,d,g,g+v),l-=v}}return u.fill(0),{key:i,iv:o}}module.exports=t;
},{"safe-buffer":"udfh","md5.js":"vbTd"}],"bniq":[function(require,module,exports) {

var e=require("./modes"),t=require("./authCipher"),r=require("safe-buffer").Buffer,i=require("./streamCipher"),n=require("cipher-base"),h=require("./aes"),o=require("evp_bytestokey"),a=require("inherits");function c(e,t,i){n.call(this),this._cache=new u,this._cipher=new h.AES(t),this._prev=r.from(i),this._mode=e,this._autopadding=!0}a(c,n),c.prototype._update=function(e){var t,i;this._cache.add(e);for(var n=[];t=this._cache.get();)i=this._mode.encrypt(this,t),n.push(i);return r.concat(n)};var s=r.alloc(16,16);function u(){this.cache=r.allocUnsafe(0)}function p(n,h,o){var a=e[n.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=r.from(h)),h.length!==a.key/8)throw new TypeError("invalid key length "+h.length);if("string"==typeof o&&(o=r.from(o)),"GCM"!==a.mode&&o.length!==a.iv)throw new TypeError("invalid iv length "+o.length);return"stream"===a.type?new i(a.module,h,o):"auth"===a.type?new t(a.module,h,o):new c(a.module,h,o)}function f(t,r){var i=e[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=o(r,!1,i.key,i.iv);return p(t,n.key,n.iv)}c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(s))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},u.prototype.add=function(e){this.cache=r.concat([this.cache,e])},u.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},u.prototype.flush=function(){for(var e=16-this.cache.length,t=r.allocUnsafe(e),i=-1;++i<e;)t.writeUInt8(e,i);return r.concat([this.cache,t])},exports.createCipheriv=p,exports.createCipher=f;
},{"./modes":"FvEC","./authCipher":"eCh4","safe-buffer":"udfh","./streamCipher":"rBsa","cipher-base":"fT2I","./aes":"DMHf","evp_bytestokey":"vnlH","inherits":"UAgo"}],"cZBQ":[function(require,module,exports) {

var e=require("./authCipher"),t=require("safe-buffer").Buffer,r=require("./modes"),i=require("./streamCipher"),h=require("cipher-base"),n=require("./aes"),o=require("evp_bytestokey"),a=require("inherits");function c(e,r,i){h.call(this),this._cache=new s,this._last=void 0,this._cipher=new n.AES(r),this._prev=t.from(i),this._mode=e,this._autopadding=!0}function s(){this.cache=t.allocUnsafe(0)}function u(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var r=-1;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function p(h,n,o){var a=r[h.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof o&&(o=t.from(o)),"GCM"!==a.mode&&o.length!==a.iv)throw new TypeError("invalid iv length "+o.length);if("string"==typeof n&&(n=t.from(n)),n.length!==a.key/8)throw new TypeError("invalid key length "+n.length);return"stream"===a.type?new i(a.module,n,o,!0):"auth"===a.type?new e(a.module,n,o,!0):new c(a.module,n,o)}function f(e,t){var i=r[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var h=o(t,!1,i.key,i.iv);return p(e,h.key,h.iv)}a(c,h),c.prototype._update=function(e){var r,i;this._cache.add(e);for(var h=[];r=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,r),h.push(i);return t.concat(h)},c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return u(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},s.prototype.add=function(e){this.cache=t.concat([this.cache,e])},s.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},s.prototype.flush=function(){if(this.cache.length)return this.cache},exports.createDecipher=f,exports.createDecipheriv=p;
},{"./authCipher":"eCh4","safe-buffer":"udfh","./modes":"FvEC","./streamCipher":"rBsa","cipher-base":"fT2I","./aes":"DMHf","evp_bytestokey":"vnlH","inherits":"UAgo"}],"nysh":[function(require,module,exports) {
var e=require("./encrypter"),r=require("./decrypter"),i=require("./modes/list.json");function p(){return Object.keys(i)}exports.createCipher=exports.Cipher=e.createCipher,exports.createCipheriv=exports.Cipheriv=e.createCipheriv,exports.createDecipher=exports.Decipher=r.createDecipher,exports.createDecipheriv=exports.Decipheriv=r.createDecipheriv,exports.listCiphers=exports.getCiphers=p;
},{"./encrypter":"bniq","./decrypter":"cZBQ","./modes/list.json":"zVBc"}],"PlgF":[function(require,module,exports) {
exports["des-ecb"]={key:8,iv:0},exports["des-cbc"]=exports.des={key:8,iv:8},exports["des-ede3-cbc"]=exports.des3={key:24,iv:8},exports["des-ede3"]={key:24,iv:0},exports["des-ede-cbc"]={key:16,iv:8},exports["des-ede"]={key:16,iv:0};
},{}],"YaJT":[function(require,module,exports) {
var e=require("browserify-des"),r=require("browserify-aes/browser"),i=require("browserify-aes/modes"),t=require("browserify-des/modes"),o=require("evp_bytestokey");function s(e,r){var s,p;if(e=e.toLowerCase(),i[e])s=i[e].key,p=i[e].iv;else{if(!t[e])throw new TypeError("invalid suite type");s=8*t[e].key,p=t[e].iv}var v=o(r,!1,s,p);return n(e,v.key,v.iv)}function p(e,r){var s,p;if(e=e.toLowerCase(),i[e])s=i[e].key,p=i[e].iv;else{if(!t[e])throw new TypeError("invalid suite type");s=8*t[e].key,p=t[e].iv}var n=o(r,!1,s,p);return v(e,n.key,n.iv)}function n(o,s,p){if(o=o.toLowerCase(),i[o])return r.createCipheriv(o,s,p);if(t[o])return new e({key:s,iv:p,mode:o});throw new TypeError("invalid suite type")}function v(o,s,p){if(o=o.toLowerCase(),i[o])return r.createDecipheriv(o,s,p);if(t[o])return new e({key:s,iv:p,mode:o,decrypt:!0});throw new TypeError("invalid suite type")}function y(){return Object.keys(t).concat(r.getCiphers())}exports.createCipher=exports.Cipher=s,exports.createCipheriv=exports.Cipheriv=n,exports.createDecipher=exports.Decipher=p,exports.createDecipheriv=exports.Decipheriv=v,exports.listCiphers=exports.getCiphers=y;
},{"browserify-des":"B7VB","browserify-aes/browser":"nysh","browserify-aes/modes":"FvEC","browserify-des/modes":"PlgF","evp_bytestokey":"vnlH"}],"XRJY":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;!function(t,i){"use strict";function r(t,i){if(!t)throw new Error(i||"Assertion failed")}function n(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}function h(t,i,r){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(r=i,i=10),this._init(t||0,i||10,r||"be"))}var e;"object"==typeof t?t.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{e="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(A){}function o(t,i){var r=t.charCodeAt(i);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(t,i,r){var n=o(t,r);return r-1>=i&&(n|=o(t,r-1)<<4),n}function u(t,i,r,n){for(var h=0,e=Math.min(t.length,r),o=i;o<e;o++){var s=t.charCodeAt(o)-48;h*=n,h+=s>=49?s-49+10:s>=17?s-17+10:s}return h}h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype._init=function(t,i,n){if("number"==typeof t)return this._initNumber(t,i,n);if("object"==typeof t)return this._initArray(t,i,n);"hex"===i&&(i=16),r(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<t.length&&(16===i?this._parseHex(t,h,n):(this._parseBase(t,i,h),"le"===n&&this._initArray(this.toArray(),i,n)))},h.prototype._initNumber=function(t,i,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),i,n)},h.prototype._initArray=function(t,i,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var e,o,s=0;if("be"===n)for(h=t.length-1,e=0;h>=0;h-=3)o=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);else if("le"===n)for(h=0,e=0;h<t.length;h+=3)o=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);return this.strip()},h.prototype._parseHex=function(t,i,r){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var h,e=0,o=0;if("be"===r)for(n=t.length-1;n>=i;n-=2)h=s(t,i,n)<<e,this.words[o]|=67108863&h,e>=18?(e-=18,o+=1,this.words[o]|=h>>>26):e+=8;else for(n=(t.length-i)%2==0?i+1:i;n<t.length;n+=2)h=s(t,i,n)<<e,this.words[o]|=67108863&h,e>=18?(e-=18,o+=1,this.words[o]|=h>>>26):e+=8;this.strip()},h.prototype._parseBase=function(t,i,r){this.words=[0],this.length=1;for(var n=0,h=1;h<=67108863;h*=i)n++;n--,h=h/i|0;for(var e=t.length-r,o=e%n,s=Math.min(e,e-o)+r,a=0,l=r;l<s;l+=n)a=u(t,l,l+n,i),this.imuln(h),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==o){var m=1;for(a=u(t,l,t.length,i),l=0;l<o;l++)m*=i;this.imuln(m),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this.strip()},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},h.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},h.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,i,r){r.negative=i.negative^t.negative;var n=t.length+i.length|0;r.length=n,n=n-1|0;var h=0|t.words[0],e=0|i.words[0],o=h*e,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var a=1;a<n;a++){for(var l=u>>>26,m=67108863&u,f=Math.min(a,i.length-1),d=Math.max(0,a-t.length+1);d<=f;d++){var p=a-d|0;l+=(o=(h=0|t.words[p])*(e=0|i.words[d])+m)/67108864|0,m=67108863&o}r.words[a]=0|m,u=0|l}return 0!==u?r.words[a]=0|u:r.length--,r.strip()}h.prototype.toString=function(t,i){var n;if(i=0|i||1,16===(t=t||10)||"hex"===t){n="";for(var h=0,e=0,o=0;o<this.length;o++){var s=this.words[o],u=(16777215&(s<<h|e)).toString(16);n=0!==(e=s>>>24-h&16777215)||o!==this.length-1?a[6-u.length]+u+n:u+n,(h+=2)>=26&&(h-=26,o--)}for(0!==e&&(n=e.toString(16)+n);n.length%i!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var f=l[t],d=m[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var M=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?M+n:a[f-M.length]+M+n}for(this.isZero()&&(n="0"+n);n.length%i!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16)},h.prototype.toBuffer=function(t,i){return r(void 0!==e),this.toArrayLike(e,t,i)},h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},h.prototype.toArrayLike=function(t,i,n){var h=this.byteLength(),e=n||Math.max(1,h);r(h<=e,"byte array longer than desired length"),r(e>0,"Requested array length <= 0"),this.strip();var o,s,u="le"===i,a=new t(e),l=this.clone();if(u){for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[s]=o;for(;s<e;s++)a[s]=0}else{for(s=0;s<e-h;s++)a[s]=0;for(s=0;!l.isZero();s++)o=l.andln(255),l.iushrn(8),a[e-s-1]=o}return a},Math.clz32?h.prototype._countBits=function(t){return 32-Math.clz32(t)}:h.prototype._countBits=function(t){var i=t,r=0;return i>=4096&&(r+=13,i>>>=13),i>=64&&(r+=7,i>>>=7),i>=8&&(r+=4,i>>>=4),i>=2&&(r+=2,i>>>=2),r+i},h.prototype._zeroBits=function(t){if(0===t)return 26;var i=t,r=0;return 0==(8191&i)&&(r+=13,i>>>=13),0==(127&i)&&(r+=7,i>>>=7),0==(15&i)&&(r+=4,i>>>=4),0==(3&i)&&(r+=2,i>>>=2),0==(1&i)&&r++,r},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this._countBits(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var r=this._zeroBits(this.words[i]);if(t+=r,26!==r)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},h.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var r=0;r<i.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=i.length,this.strip()},h.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,r;this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=i.words[n]^r.words[n];if(this!==i)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=i.length,this.strip()},h.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),n=t%26;this._expand(i),n>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return n>0&&(this.words[h]=~this.words[h]&67108863>>26-n),this.strip()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){r("number"==typeof t&&t>=0);var n=t/26|0,h=t%26;return this._expand(n+1),this.words[n]=i?this.words[n]|1<<h:this.words[n]&~(1<<h),this.strip()},h.prototype.iadd=function(t){var i,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var h=0,e=0;e<n.length;e++)i=(0|r.words[e])+(0|n.words[e])+h,this.words[e]=67108863&i,h=i>>>26;for(;0!==h&&e<r.length;e++)i=(0|r.words[e])+h,this.words[e]=67108863&i,h=i>>>26;if(this.length=r.length,0!==h)this.words[this.length]=h,this.length++;else if(r!==this)for(;e<r.length;e++)this.words[e]=r.words[e];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(r=this,n=t):(r=t,n=this);for(var e=0,o=0;o<n.length;o++)e=(i=(0|r.words[o])-(0|n.words[o])+e)>>26,this.words[o]=67108863&i;for(;0!==e&&o<r.length;o++)e=(i=(0|r.words[o])+e)>>26,this.words[o]=67108863&i;if(0===e&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},h.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,i,r){var n,h,e,o=t.words,s=i.words,u=r.words,a=0,l=0|o[0],m=8191&l,f=l>>>13,d=0|o[1],p=8191&d,M=d>>>13,v=0|o[2],g=8191&v,c=v>>>13,w=0|o[3],y=8191&w,b=w>>>13,_=0|o[4],k=8191&_,A=_>>>13,x=0|o[5],S=8191&x,q=x>>>13,B=0|o[6],Z=8191&B,R=B>>>13,N=0|o[7],L=8191&N,I=N>>>13,z=0|o[8],T=8191&z,E=z>>>13,O=0|o[9],j=8191&O,K=O>>>13,P=0|s[0],F=8191&P,C=P>>>13,D=0|s[1],H=8191&D,J=D>>>13,U=0|s[2],G=8191&U,Q=U>>>13,V=0|s[3],W=8191&V,X=V>>>13,Y=0|s[4],$=8191&Y,tt=Y>>>13,it=0|s[5],rt=8191&it,nt=it>>>13,ht=0|s[6],et=8191&ht,ot=ht>>>13,st=0|s[7],ut=8191&st,at=st>>>13,lt=0|s[8],mt=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,Mt=dt>>>13;r.negative=t.negative^i.negative,r.length=19;var vt=(a+(n=Math.imul(m,F))|0)+((8191&(h=(h=Math.imul(m,C))+Math.imul(f,F)|0))<<13)|0;a=((e=Math.imul(f,C))+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(p,F),h=(h=Math.imul(p,C))+Math.imul(M,F)|0,e=Math.imul(M,C);var gt=(a+(n=n+Math.imul(m,H)|0)|0)+((8191&(h=(h=h+Math.imul(m,J)|0)+Math.imul(f,H)|0))<<13)|0;a=((e=e+Math.imul(f,J)|0)+(h>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),h=(h=Math.imul(g,C))+Math.imul(c,F)|0,e=Math.imul(c,C),n=n+Math.imul(p,H)|0,h=(h=h+Math.imul(p,J)|0)+Math.imul(M,H)|0,e=e+Math.imul(M,J)|0;var ct=(a+(n=n+Math.imul(m,G)|0)|0)+((8191&(h=(h=h+Math.imul(m,Q)|0)+Math.imul(f,G)|0))<<13)|0;a=((e=e+Math.imul(f,Q)|0)+(h>>>13)|0)+(ct>>>26)|0,ct&=67108863,n=Math.imul(y,F),h=(h=Math.imul(y,C))+Math.imul(b,F)|0,e=Math.imul(b,C),n=n+Math.imul(g,H)|0,h=(h=h+Math.imul(g,J)|0)+Math.imul(c,H)|0,e=e+Math.imul(c,J)|0,n=n+Math.imul(p,G)|0,h=(h=h+Math.imul(p,Q)|0)+Math.imul(M,G)|0,e=e+Math.imul(M,Q)|0;var wt=(a+(n=n+Math.imul(m,W)|0)|0)+((8191&(h=(h=h+Math.imul(m,X)|0)+Math.imul(f,W)|0))<<13)|0;a=((e=e+Math.imul(f,X)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(k,F),h=(h=Math.imul(k,C))+Math.imul(A,F)|0,e=Math.imul(A,C),n=n+Math.imul(y,H)|0,h=(h=h+Math.imul(y,J)|0)+Math.imul(b,H)|0,e=e+Math.imul(b,J)|0,n=n+Math.imul(g,G)|0,h=(h=h+Math.imul(g,Q)|0)+Math.imul(c,G)|0,e=e+Math.imul(c,Q)|0,n=n+Math.imul(p,W)|0,h=(h=h+Math.imul(p,X)|0)+Math.imul(M,W)|0,e=e+Math.imul(M,X)|0;var yt=(a+(n=n+Math.imul(m,$)|0)|0)+((8191&(h=(h=h+Math.imul(m,tt)|0)+Math.imul(f,$)|0))<<13)|0;a=((e=e+Math.imul(f,tt)|0)+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(S,F),h=(h=Math.imul(S,C))+Math.imul(q,F)|0,e=Math.imul(q,C),n=n+Math.imul(k,H)|0,h=(h=h+Math.imul(k,J)|0)+Math.imul(A,H)|0,e=e+Math.imul(A,J)|0,n=n+Math.imul(y,G)|0,h=(h=h+Math.imul(y,Q)|0)+Math.imul(b,G)|0,e=e+Math.imul(b,Q)|0,n=n+Math.imul(g,W)|0,h=(h=h+Math.imul(g,X)|0)+Math.imul(c,W)|0,e=e+Math.imul(c,X)|0,n=n+Math.imul(p,$)|0,h=(h=h+Math.imul(p,tt)|0)+Math.imul(M,$)|0,e=e+Math.imul(M,tt)|0;var bt=(a+(n=n+Math.imul(m,rt)|0)|0)+((8191&(h=(h=h+Math.imul(m,nt)|0)+Math.imul(f,rt)|0))<<13)|0;a=((e=e+Math.imul(f,nt)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(Z,F),h=(h=Math.imul(Z,C))+Math.imul(R,F)|0,e=Math.imul(R,C),n=n+Math.imul(S,H)|0,h=(h=h+Math.imul(S,J)|0)+Math.imul(q,H)|0,e=e+Math.imul(q,J)|0,n=n+Math.imul(k,G)|0,h=(h=h+Math.imul(k,Q)|0)+Math.imul(A,G)|0,e=e+Math.imul(A,Q)|0,n=n+Math.imul(y,W)|0,h=(h=h+Math.imul(y,X)|0)+Math.imul(b,W)|0,e=e+Math.imul(b,X)|0,n=n+Math.imul(g,$)|0,h=(h=h+Math.imul(g,tt)|0)+Math.imul(c,$)|0,e=e+Math.imul(c,tt)|0,n=n+Math.imul(p,rt)|0,h=(h=h+Math.imul(p,nt)|0)+Math.imul(M,rt)|0,e=e+Math.imul(M,nt)|0;var _t=(a+(n=n+Math.imul(m,et)|0)|0)+((8191&(h=(h=h+Math.imul(m,ot)|0)+Math.imul(f,et)|0))<<13)|0;a=((e=e+Math.imul(f,ot)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(L,F),h=(h=Math.imul(L,C))+Math.imul(I,F)|0,e=Math.imul(I,C),n=n+Math.imul(Z,H)|0,h=(h=h+Math.imul(Z,J)|0)+Math.imul(R,H)|0,e=e+Math.imul(R,J)|0,n=n+Math.imul(S,G)|0,h=(h=h+Math.imul(S,Q)|0)+Math.imul(q,G)|0,e=e+Math.imul(q,Q)|0,n=n+Math.imul(k,W)|0,h=(h=h+Math.imul(k,X)|0)+Math.imul(A,W)|0,e=e+Math.imul(A,X)|0,n=n+Math.imul(y,$)|0,h=(h=h+Math.imul(y,tt)|0)+Math.imul(b,$)|0,e=e+Math.imul(b,tt)|0,n=n+Math.imul(g,rt)|0,h=(h=h+Math.imul(g,nt)|0)+Math.imul(c,rt)|0,e=e+Math.imul(c,nt)|0,n=n+Math.imul(p,et)|0,h=(h=h+Math.imul(p,ot)|0)+Math.imul(M,et)|0,e=e+Math.imul(M,ot)|0;var kt=(a+(n=n+Math.imul(m,ut)|0)|0)+((8191&(h=(h=h+Math.imul(m,at)|0)+Math.imul(f,ut)|0))<<13)|0;a=((e=e+Math.imul(f,at)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(T,F),h=(h=Math.imul(T,C))+Math.imul(E,F)|0,e=Math.imul(E,C),n=n+Math.imul(L,H)|0,h=(h=h+Math.imul(L,J)|0)+Math.imul(I,H)|0,e=e+Math.imul(I,J)|0,n=n+Math.imul(Z,G)|0,h=(h=h+Math.imul(Z,Q)|0)+Math.imul(R,G)|0,e=e+Math.imul(R,Q)|0,n=n+Math.imul(S,W)|0,h=(h=h+Math.imul(S,X)|0)+Math.imul(q,W)|0,e=e+Math.imul(q,X)|0,n=n+Math.imul(k,$)|0,h=(h=h+Math.imul(k,tt)|0)+Math.imul(A,$)|0,e=e+Math.imul(A,tt)|0,n=n+Math.imul(y,rt)|0,h=(h=h+Math.imul(y,nt)|0)+Math.imul(b,rt)|0,e=e+Math.imul(b,nt)|0,n=n+Math.imul(g,et)|0,h=(h=h+Math.imul(g,ot)|0)+Math.imul(c,et)|0,e=e+Math.imul(c,ot)|0,n=n+Math.imul(p,ut)|0,h=(h=h+Math.imul(p,at)|0)+Math.imul(M,ut)|0,e=e+Math.imul(M,at)|0;var At=(a+(n=n+Math.imul(m,mt)|0)|0)+((8191&(h=(h=h+Math.imul(m,ft)|0)+Math.imul(f,mt)|0))<<13)|0;a=((e=e+Math.imul(f,ft)|0)+(h>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(j,F),h=(h=Math.imul(j,C))+Math.imul(K,F)|0,e=Math.imul(K,C),n=n+Math.imul(T,H)|0,h=(h=h+Math.imul(T,J)|0)+Math.imul(E,H)|0,e=e+Math.imul(E,J)|0,n=n+Math.imul(L,G)|0,h=(h=h+Math.imul(L,Q)|0)+Math.imul(I,G)|0,e=e+Math.imul(I,Q)|0,n=n+Math.imul(Z,W)|0,h=(h=h+Math.imul(Z,X)|0)+Math.imul(R,W)|0,e=e+Math.imul(R,X)|0,n=n+Math.imul(S,$)|0,h=(h=h+Math.imul(S,tt)|0)+Math.imul(q,$)|0,e=e+Math.imul(q,tt)|0,n=n+Math.imul(k,rt)|0,h=(h=h+Math.imul(k,nt)|0)+Math.imul(A,rt)|0,e=e+Math.imul(A,nt)|0,n=n+Math.imul(y,et)|0,h=(h=h+Math.imul(y,ot)|0)+Math.imul(b,et)|0,e=e+Math.imul(b,ot)|0,n=n+Math.imul(g,ut)|0,h=(h=h+Math.imul(g,at)|0)+Math.imul(c,ut)|0,e=e+Math.imul(c,at)|0,n=n+Math.imul(p,mt)|0,h=(h=h+Math.imul(p,ft)|0)+Math.imul(M,mt)|0,e=e+Math.imul(M,ft)|0;var xt=(a+(n=n+Math.imul(m,pt)|0)|0)+((8191&(h=(h=h+Math.imul(m,Mt)|0)+Math.imul(f,pt)|0))<<13)|0;a=((e=e+Math.imul(f,Mt)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(j,H),h=(h=Math.imul(j,J))+Math.imul(K,H)|0,e=Math.imul(K,J),n=n+Math.imul(T,G)|0,h=(h=h+Math.imul(T,Q)|0)+Math.imul(E,G)|0,e=e+Math.imul(E,Q)|0,n=n+Math.imul(L,W)|0,h=(h=h+Math.imul(L,X)|0)+Math.imul(I,W)|0,e=e+Math.imul(I,X)|0,n=n+Math.imul(Z,$)|0,h=(h=h+Math.imul(Z,tt)|0)+Math.imul(R,$)|0,e=e+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,h=(h=h+Math.imul(S,nt)|0)+Math.imul(q,rt)|0,e=e+Math.imul(q,nt)|0,n=n+Math.imul(k,et)|0,h=(h=h+Math.imul(k,ot)|0)+Math.imul(A,et)|0,e=e+Math.imul(A,ot)|0,n=n+Math.imul(y,ut)|0,h=(h=h+Math.imul(y,at)|0)+Math.imul(b,ut)|0,e=e+Math.imul(b,at)|0,n=n+Math.imul(g,mt)|0,h=(h=h+Math.imul(g,ft)|0)+Math.imul(c,mt)|0,e=e+Math.imul(c,ft)|0;var St=(a+(n=n+Math.imul(p,pt)|0)|0)+((8191&(h=(h=h+Math.imul(p,Mt)|0)+Math.imul(M,pt)|0))<<13)|0;a=((e=e+Math.imul(M,Mt)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(j,G),h=(h=Math.imul(j,Q))+Math.imul(K,G)|0,e=Math.imul(K,Q),n=n+Math.imul(T,W)|0,h=(h=h+Math.imul(T,X)|0)+Math.imul(E,W)|0,e=e+Math.imul(E,X)|0,n=n+Math.imul(L,$)|0,h=(h=h+Math.imul(L,tt)|0)+Math.imul(I,$)|0,e=e+Math.imul(I,tt)|0,n=n+Math.imul(Z,rt)|0,h=(h=h+Math.imul(Z,nt)|0)+Math.imul(R,rt)|0,e=e+Math.imul(R,nt)|0,n=n+Math.imul(S,et)|0,h=(h=h+Math.imul(S,ot)|0)+Math.imul(q,et)|0,e=e+Math.imul(q,ot)|0,n=n+Math.imul(k,ut)|0,h=(h=h+Math.imul(k,at)|0)+Math.imul(A,ut)|0,e=e+Math.imul(A,at)|0,n=n+Math.imul(y,mt)|0,h=(h=h+Math.imul(y,ft)|0)+Math.imul(b,mt)|0,e=e+Math.imul(b,ft)|0;var qt=(a+(n=n+Math.imul(g,pt)|0)|0)+((8191&(h=(h=h+Math.imul(g,Mt)|0)+Math.imul(c,pt)|0))<<13)|0;a=((e=e+Math.imul(c,Mt)|0)+(h>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(j,W),h=(h=Math.imul(j,X))+Math.imul(K,W)|0,e=Math.imul(K,X),n=n+Math.imul(T,$)|0,h=(h=h+Math.imul(T,tt)|0)+Math.imul(E,$)|0,e=e+Math.imul(E,tt)|0,n=n+Math.imul(L,rt)|0,h=(h=h+Math.imul(L,nt)|0)+Math.imul(I,rt)|0,e=e+Math.imul(I,nt)|0,n=n+Math.imul(Z,et)|0,h=(h=h+Math.imul(Z,ot)|0)+Math.imul(R,et)|0,e=e+Math.imul(R,ot)|0,n=n+Math.imul(S,ut)|0,h=(h=h+Math.imul(S,at)|0)+Math.imul(q,ut)|0,e=e+Math.imul(q,at)|0,n=n+Math.imul(k,mt)|0,h=(h=h+Math.imul(k,ft)|0)+Math.imul(A,mt)|0,e=e+Math.imul(A,ft)|0;var Bt=(a+(n=n+Math.imul(y,pt)|0)|0)+((8191&(h=(h=h+Math.imul(y,Mt)|0)+Math.imul(b,pt)|0))<<13)|0;a=((e=e+Math.imul(b,Mt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(j,$),h=(h=Math.imul(j,tt))+Math.imul(K,$)|0,e=Math.imul(K,tt),n=n+Math.imul(T,rt)|0,h=(h=h+Math.imul(T,nt)|0)+Math.imul(E,rt)|0,e=e+Math.imul(E,nt)|0,n=n+Math.imul(L,et)|0,h=(h=h+Math.imul(L,ot)|0)+Math.imul(I,et)|0,e=e+Math.imul(I,ot)|0,n=n+Math.imul(Z,ut)|0,h=(h=h+Math.imul(Z,at)|0)+Math.imul(R,ut)|0,e=e+Math.imul(R,at)|0,n=n+Math.imul(S,mt)|0,h=(h=h+Math.imul(S,ft)|0)+Math.imul(q,mt)|0,e=e+Math.imul(q,ft)|0;var Zt=(a+(n=n+Math.imul(k,pt)|0)|0)+((8191&(h=(h=h+Math.imul(k,Mt)|0)+Math.imul(A,pt)|0))<<13)|0;a=((e=e+Math.imul(A,Mt)|0)+(h>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,n=Math.imul(j,rt),h=(h=Math.imul(j,nt))+Math.imul(K,rt)|0,e=Math.imul(K,nt),n=n+Math.imul(T,et)|0,h=(h=h+Math.imul(T,ot)|0)+Math.imul(E,et)|0,e=e+Math.imul(E,ot)|0,n=n+Math.imul(L,ut)|0,h=(h=h+Math.imul(L,at)|0)+Math.imul(I,ut)|0,e=e+Math.imul(I,at)|0,n=n+Math.imul(Z,mt)|0,h=(h=h+Math.imul(Z,ft)|0)+Math.imul(R,mt)|0,e=e+Math.imul(R,ft)|0;var Rt=(a+(n=n+Math.imul(S,pt)|0)|0)+((8191&(h=(h=h+Math.imul(S,Mt)|0)+Math.imul(q,pt)|0))<<13)|0;a=((e=e+Math.imul(q,Mt)|0)+(h>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(j,et),h=(h=Math.imul(j,ot))+Math.imul(K,et)|0,e=Math.imul(K,ot),n=n+Math.imul(T,ut)|0,h=(h=h+Math.imul(T,at)|0)+Math.imul(E,ut)|0,e=e+Math.imul(E,at)|0,n=n+Math.imul(L,mt)|0,h=(h=h+Math.imul(L,ft)|0)+Math.imul(I,mt)|0,e=e+Math.imul(I,ft)|0;var Nt=(a+(n=n+Math.imul(Z,pt)|0)|0)+((8191&(h=(h=h+Math.imul(Z,Mt)|0)+Math.imul(R,pt)|0))<<13)|0;a=((e=e+Math.imul(R,Mt)|0)+(h>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(j,ut),h=(h=Math.imul(j,at))+Math.imul(K,ut)|0,e=Math.imul(K,at),n=n+Math.imul(T,mt)|0,h=(h=h+Math.imul(T,ft)|0)+Math.imul(E,mt)|0,e=e+Math.imul(E,ft)|0;var Lt=(a+(n=n+Math.imul(L,pt)|0)|0)+((8191&(h=(h=h+Math.imul(L,Mt)|0)+Math.imul(I,pt)|0))<<13)|0;a=((e=e+Math.imul(I,Mt)|0)+(h>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(j,mt),h=(h=Math.imul(j,ft))+Math.imul(K,mt)|0,e=Math.imul(K,ft);var It=(a+(n=n+Math.imul(T,pt)|0)|0)+((8191&(h=(h=h+Math.imul(T,Mt)|0)+Math.imul(E,pt)|0))<<13)|0;a=((e=e+Math.imul(E,Mt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863;var zt=(a+(n=Math.imul(j,pt))|0)+((8191&(h=(h=Math.imul(j,Mt))+Math.imul(K,pt)|0))<<13)|0;return a=((e=Math.imul(K,Mt))+(h>>>13)|0)+(zt>>>26)|0,zt&=67108863,u[0]=vt,u[1]=gt,u[2]=ct,u[3]=wt,u[4]=yt,u[5]=bt,u[6]=_t,u[7]=kt,u[8]=At,u[9]=xt,u[10]=St,u[11]=qt,u[12]=Bt,u[13]=Zt,u[14]=Rt,u[15]=Nt,u[16]=Lt,u[17]=It,u[18]=zt,0!==a&&(u[19]=a,r.length++),r};function p(t,i,r){return(new M).mulp(t,i,r)}function M(t,i){this.x=t,this.y=i}Math.imul||(d=f),h.prototype.mulTo=function(t,i){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,i):r<63?f(this,t,i):r<1024?function(t,i,r){r.negative=i.negative^t.negative,r.length=t.length+i.length;for(var n=0,h=0,e=0;e<r.length-1;e++){var o=h;h=0;for(var s=67108863&n,u=Math.min(e,i.length-1),a=Math.max(0,e-t.length+1);a<=u;a++){var l=e-a,m=(0|t.words[l])*(0|i.words[a]),f=67108863&m;s=67108863&(f=f+s|0),h+=(o=(o=o+(m/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[e]=s,n=o,o=h}return 0!==n?r.words[e]=n:r.length--,r.strip()}(this,t,i):p(this,t,i)},M.prototype.makeRBT=function(t){for(var i=new Array(t),r=h.prototype._countBits(t)-1,n=0;n<t;n++)i[n]=this.revBin(n,r,t);return i},M.prototype.revBin=function(t,i,r){if(0===t||t===r-1)return t;for(var n=0,h=0;h<i;h++)n|=(1&t)<<i-h-1,t>>=1;return n},M.prototype.permute=function(t,i,r,n,h,e){for(var o=0;o<e;o++)n[o]=i[t[o]],h[o]=r[t[o]]},M.prototype.transform=function(t,i,r,n,h,e){this.permute(e,t,i,r,n,h);for(var o=1;o<h;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),a=Math.sin(2*Math.PI/s),l=0;l<h;l+=s)for(var m=u,f=a,d=0;d<o;d++){var p=r[l+d],M=n[l+d],v=r[l+d+o],g=n[l+d+o],c=m*v-f*g;g=m*g+f*v,v=c,r[l+d]=p+v,n[l+d]=M+g,r[l+d+o]=p-v,n[l+d+o]=M-g,d!==s&&(c=u*m-a*f,f=u*f+a*m,m=c)}},M.prototype.guessLen13b=function(t,i){var r=1|Math.max(i,t),n=1&r,h=0;for(r=r/2|0;r;r>>>=1)h++;return 1<<h+1+n},M.prototype.conjugate=function(t,i,r){if(!(r<=1))for(var n=0;n<r/2;n++){var h=t[n];t[n]=t[r-n-1],t[r-n-1]=h,h=i[n],i[n]=-i[r-n-1],i[r-n-1]=-h}},M.prototype.normalize13b=function(t,i){for(var r=0,n=0;n<i/2;n++){var h=8192*Math.round(t[2*n+1]/i)+Math.round(t[2*n]/i)+r;t[n]=67108863&h,r=h<67108864?0:h/67108864|0}return t},M.prototype.convert13b=function(t,i,n,h){for(var e=0,o=0;o<i;o++)e+=0|t[o],n[2*o]=8191&e,e>>>=13,n[2*o+1]=8191&e,e>>>=13;for(o=2*i;o<h;++o)n[o]=0;r(0===e),r(0==(-8192&e))},M.prototype.stub=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=0;return i},M.prototype.mulp=function(t,i,r){var n=2*this.guessLen13b(t.length,i.length),h=this.makeRBT(n),e=this.stub(n),o=new Array(n),s=new Array(n),u=new Array(n),a=new Array(n),l=new Array(n),m=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(i.words,i.length,a,n),this.transform(o,e,s,u,n,h),this.transform(a,e,l,m,n,h);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*m[d];u[d]=s[d]*m[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,f,e,n,h),this.conjugate(f,e,n),this.normalize13b(f,n),r.negative=t.negative^i.negative,r.length=t.length+i.length,r.strip()},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),p(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var i=0,n=0;n<this.length;n++){var h=(0|this.words[n])*t,e=(67108863&h)+(67108863&i);i>>=26,i+=h/67108864|0,i+=e>>>26,this.words[n]=67108863&e}return 0!==i&&(this.words[n]=i,this.length++),this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),r=0;r<i.length;r++){var n=r/26|0,h=r%26;i[r]=(t.words[n]&1<<h)>>>h}return i}(t);if(0===i.length)return new h(1);for(var r=this,n=0;n<i.length&&0===i[n];n++,r=r.sqr());if(++n<i.length)for(var e=r.sqr();n<i.length;n++,e=e.sqr())0!==i[n]&&(r=r.mul(e));return r},h.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var i,n=t%26,h=(t-n)/26,e=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(i=0;i<this.length;i++){var s=this.words[i]&e,u=(0|this.words[i])-s<<n;this.words[i]=u|o,o=s>>>26-n}o&&(this.words[i]=o,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this.strip()},h.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,n){var h;r("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var e=t%26,o=Math.min((t-e)/26,this.length),s=67108863^67108863>>>e<<e,u=n;if(h-=o,h=Math.max(0,h),u){for(var a=0;a<o;a++)u.words[a]=this.words[a];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,a=0;a<this.length;a++)this.words[a]=this.words[a+o];else this.words[0]=0,this.length=1;var l=0;for(a=this.length-1;a>=0&&(0!==l||a>=h);a--){var m=0|this.words[a];this.words[a]=l<<26-e|m>>>e,l=m&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},h.prototype.ishrn=function(t,i,n){return r(0===this.negative),this.iushrn(t,i,n)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){r("number"==typeof t&&t>=0);var i=t%26,n=(t-i)/26,h=1<<i;return!(this.length<=n)&&!!(this.words[n]&h)},h.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var i=t%26,n=(t-i)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==i&&n++,this.length=Math.min(n,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this.strip()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},h.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(t,i,n){var h,e,o=t.length+n;this._expand(o);var s=0;for(h=0;h<t.length;h++){e=(0|this.words[h+n])+s;var u=(0|t.words[h])*i;s=((e-=67108863&u)>>26)-(u/67108864|0),this.words[h+n]=67108863&e}for(;h<this.length-n;h++)s=(e=(0|this.words[h+n])+s)>>26,this.words[h+n]=67108863&e;if(0===s)return this.strip();for(r(-1===s),s=0,h=0;h<this.length;h++)s=(e=-(0|this.words[h])+s)>>26,this.words[h]=67108863&e;return this.negative=1,this.strip()},h.prototype._wordDiv=function(t,i){var r=(this.length,t.length),n=this.clone(),e=t,o=0|e.words[e.length-1];0!==(r=26-this._countBits(o))&&(e=e.ushln(r),n.iushln(r),o=0|e.words[e.length-1]);var s,u=n.length-e.length;if("mod"!==i){(s=new h(null)).length=u+1,s.words=new Array(s.length);for(var a=0;a<s.length;a++)s.words[a]=0}var l=n.clone()._ishlnsubmul(e,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var m=u-1;m>=0;m--){var f=67108864*(0|n.words[e.length+m])+(0|n.words[e.length+m-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(e,f,m);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(e,1,m),n.isZero()||(n.negative^=1);s&&(s.words[m]=f)}return s&&s.strip(),n.strip(),"div"!==i&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},h.prototype.divmod=function(t,i,n){return r(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,i),"mod"!==i&&(e=s.div.neg()),"div"!==i&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:e,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),i),"mod"!==i&&(e=s.div.neg()),{div:e,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),i),"div"!==i&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modn(t.words[0]))}:this._wordDiv(t,i);var e,o,s},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var r=0!==i.div.negative?i.mod.isub(t):i.mod,n=t.ushrn(1),h=t.andln(1),e=r.cmp(n);return e<0||1===h&&0===e?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modn=function(t){r(t<=67108863);for(var i=(1<<26)%t,n=0,h=this.length-1;h>=0;h--)n=(i*n+(0|this.words[h]))%t;return n},h.prototype.idivn=function(t){r(t<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var h=(0|this.words[n])+67108864*i;this.words[n]=h/t|0,i=h%t}return this.strip()},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var i=this,n=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e=new h(1),o=new h(0),s=new h(0),u=new h(1),a=0;i.isEven()&&n.isEven();)i.iushrn(1),n.iushrn(1),++a;for(var l=n.clone(),m=i.clone();!i.isZero();){for(var f=0,d=1;0==(i.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(e.isOdd()||o.isOdd())&&(e.iadd(l),o.isub(m)),e.iushrn(1),o.iushrn(1);for(var p=0,M=1;0==(n.words[0]&M)&&p<26;++p,M<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(m)),s.iushrn(1),u.iushrn(1);i.cmp(n)>=0?(i.isub(n),e.isub(s),o.isub(u)):(n.isub(i),s.isub(e),u.isub(o))}return{a:s,b:u,gcd:n.iushln(a)}},h.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var i=this,n=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e,o=new h(1),s=new h(0),u=n.clone();i.cmpn(1)>0&&n.cmpn(1)>0;){for(var a=0,l=1;0==(i.words[0]&l)&&a<26;++a,l<<=1);if(a>0)for(i.iushrn(a);a-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var m=0,f=1;0==(n.words[0]&f)&&m<26;++m,f<<=1);if(m>0)for(n.iushrn(m);m-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);i.cmp(n)>=0?(i.isub(n),o.isub(s)):(n.isub(i),s.isub(o))}return(e=0===i.cmpn(1)?o:s).cmpn(0)<0&&e.iadd(t),e},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),r=t.clone();i.negative=0,r.negative=0;for(var n=0;i.isEven()&&r.isEven();n++)i.iushrn(1),r.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;r.isEven();)r.iushrn(1);var h=i.cmp(r);if(h<0){var e=i;i=r,r=e}else if(0===h||0===r.cmpn(1))break;i.isub(r)}return r.iushln(n)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){r("number"==typeof t);var i=t%26,n=(t-i)/26,h=1<<i;if(this.length<=n)return this._expand(n+1),this.words[n]|=h,this;for(var e=h,o=n;0!==e&&o<this.length;o++){var s=0|this.words[o];e=(s+=e)>>>26,s&=67108863,this.words[o]=s}return 0!==e&&(this.words[o]=e,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)i=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],h=0|t.words[r];if(n!==h){n<h?i=-1:n>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new _(t)},h.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},h.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},h.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function g(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function c(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var i=h._prime(t);this.m=i.p,this.prime=i}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},g.prototype.ireduce=function(t){var i,r=t;do{this.split(r,this.tmp),i=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(i>this.n);var n=i<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(t,i){t.iushrn(this.n,0,i)},g.prototype.imulK=function(t){return t.imul(this.k)},n(c,g),c.prototype.split=function(t,i){for(var r=Math.min(t.length,9),n=0;n<r;n++)i.words[n]=t.words[n];if(i.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var h=t.words[9];for(i.words[i.length++]=4194303&h,n=10;n<t.length;n++){var e=0|t.words[n];t.words[n-10]=(4194303&e)<<4|h>>>22,h=e}h>>>=22,t.words[n-10]=h,0===h&&t.length>10?t.length-=10:t.length-=9},c.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,r=0;r<t.length;r++){var n=0|t.words[r];i+=977*n,t.words[r]=67108863&i,i=64*n+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(w,g),n(y,g),n(b,g),b.prototype.imulK=function(t){for(var i=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+i,h=67108863&n;n>>>=26,t.words[r]=h,i=n}return 0!==i&&(t.words[t.length++]=i),t},h._prime=function(t){if(v[t])return v[t];var i;if("k256"===t)i=new c;else if("p224"===t)i=new w;else if("p192"===t)i=new y;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new b}return v[t]=i,i},_.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},_.prototype._verify2=function(t,i){r(0==(t.negative|i.negative),"red works only with positives"),r(t.red&&t.red===i.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,i){this._verify2(t,i);var r=t.add(i);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(t,i){this._verify2(t,i);var r=t.iadd(i);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(t,i){this._verify2(t,i);var r=t.sub(i);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(t,i){this._verify2(t,i);var r=t.isub(i);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},_.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},_.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(r(i%2==1),3===i){var n=this.m.add(new h(1)).iushrn(2);return this.pow(t,n)}for(var e=this.m.subn(1),o=0;!e.isZero()&&0===e.andln(1);)o++,e.iushrn(1);r(!e.isZero());var s=new h(1).toRed(this),u=s.redNeg(),a=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,a).cmp(u);)l.redIAdd(u);for(var m=this.pow(l,e),f=this.pow(t,e.addn(1).iushrn(1)),d=this.pow(t,e),p=o;0!==d.cmp(s);){for(var M=d,v=0;0!==M.cmp(s);v++)M=M.redSqr();r(v<p);var g=this.pow(m,new h(1).iushln(p-v-1));f=f.redMul(g),m=g.redSqr(),d=d.redMul(m),p=v}return f},_.prototype.invm=function(t){var i=t._invmp(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},_.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var r=new Array(16);r[0]=new h(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var e=r[0],o=0,s=0,u=i.bitLength()%26;for(0===u&&(u=26),n=i.length-1;n>=0;n--){for(var a=i.words[n],l=u-1;l>=0;l--){var m=a>>l&1;e!==r[0]&&(e=this.sqr(e)),0!==m||0!==o?(o<<=1,o|=m,(4===++s||0===n&&0===l)&&(e=this.mul(e,r[o]),s=0,o=0)):s=0}u=26}return e},_.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},_.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new k(t)},n(k,_),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},k.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(i),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=r.isub(n).iushrn(this.shift),e=h;return h.cmp(this.m)>=0?e=h.isub(this.m):h.cmpn(0)<0&&(e=h.iadd(this.m)),e._forceRed(this)},k.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0)._forceRed(this);var r=t.mul(i),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=r.isub(n).iushrn(this.shift),o=e;return e.cmp(this.m)>=0?o=e.isub(this.m):e.cmpn(0)<0&&(o=e.iadd(this.m)),o._forceRed(this)},k.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"==typeof module||module,this);
},{"buffer":"Zcgp"}],"FKeL":[function(require,module,exports) {
var t;function e(t){this.rand=t}if(module.exports=function(r){return t||(t=new e(null)),t.generate(r)},module.exports.Rand=e,e.prototype.generate=function(t){return this._rand(t)},e.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=require("crypto");if("function"!=typeof r.randomBytes)throw new Error("Not supported");e.prototype._rand=function(t){return r.randomBytes(t)}}catch(n){}
},{"crypto":"Zcgp"}],"DC7X":[function(require,module,exports) {
var r=require("bn.js"),e=require("brorand");function n(r){this.rand=r||new e.Rand}module.exports=n,n.create=function(r){return new n(r)},n.prototype._randbelow=function(e){var n=e.bitLength(),t=Math.ceil(n/8);do{var o=new r(this.rand.generate(t))}while(o.cmp(e)>=0);return o},n.prototype._randrange=function(r,e){var n=e.sub(r);return r.add(this._randbelow(n))},n.prototype.test=function(e,n,t){var o=e.bitLength(),a=r.mont(e),d=new r(1).toRed(a);n||(n=Math.max(1,o/48|0));for(var i=e.subn(1),u=0;!i.testn(u);u++);for(var f=e.shrn(u),c=i.toRed(a);n>0;n--){var p=this._randrange(new r(2),i);t&&t(p);var s=p.toRed(a).redPow(f);if(0!==s.cmp(d)&&0!==s.cmp(c)){for(var m=1;m<u;m++){if(0===(s=s.redSqr()).cmp(d))return!1;if(0===s.cmp(c))break}if(m===u)return!1}}return!0},n.prototype.getDivisor=function(e,n){var t=e.bitLength(),o=r.mont(e),a=new r(1).toRed(o);n||(n=Math.max(1,t/48|0));for(var d=e.subn(1),i=0;!d.testn(i);i++);for(var u=e.shrn(i),f=d.toRed(o);n>0;n--){var c=this._randrange(new r(2),d),p=e.gcd(c);if(0!==p.cmpn(1))return p;var s=c.toRed(o).redPow(u);if(0!==s.cmp(a)&&0!==s.cmp(f)){for(var m=1;m<i;m++){if(0===(s=s.redSqr()).cmp(a))return s.fromRed().subn(1).gcd(e);if(0===s.cmp(f))break}if(m===i)return(s=s.redSqr()).fromRed().subn(1).gcd(e)}}return!1};
},{"bn.js":"XRJY","brorand":"FKeL"}],"cIS0":[function(require,module,exports) {
var e=require("randombytes");module.exports=M,M.simpleSieve=b,M.fermatTest=q;var n=require("bn.js"),r=new n(24),t=require("miller-rabin"),i=new t,o=new n(1),f=new n(2),a=new n(5),u=new n(16),w=new n(8),d=new n(10),m=new n(3),s=new n(7),c=new n(11),l=new n(4),v=new n(12),p=null;function h(){if(null!==p)return p;var e=[];e[0]=2;for(var n=1,r=3;r<1048576;r+=2){for(var t=Math.ceil(Math.sqrt(r)),i=0;i<n&&e[i]<=t&&r%e[i]!=0;i++);n!==i&&e[i]<=t||(e[n++]=r)}return p=e,e}function b(e){for(var n=h(),r=0;r<n.length;r++)if(0===e.modn(n[r]))return 0===e.cmpn(n[r]);return!0}function q(e){var r=n.mont(e);return 0===f.toRed(r).redPow(e.subn(1)).fromRed().cmpn(1)}function M(t,u){if(t<16)return new n(2===u||5===u?[140,123]:[140,39]);var w,s;for(u=new n(u);;){for(w=new n(e(Math.ceil(t/8)));w.bitLength()>t;)w.ishrn(1);if(w.isEven()&&w.iadd(o),w.testn(1)||w.iadd(f),u.cmp(f)){if(!u.cmp(a))for(;w.mod(d).cmp(m);)w.iadd(l)}else for(;w.mod(r).cmp(c);)w.iadd(l);if(b(s=w.shrn(1))&&b(w)&&q(s)&&q(w)&&i.test(s)&&i.test(w))return w}}
},{"randombytes":"V4U6","bn.js":"XRJY","miller-rabin":"DC7X"}],"tqvZ":[function(require,module,exports) {
module.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}};
},{}],"Hore":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("bn.js"),r=require("miller-rabin"),i=new r,n=new t(24),o=new t(11),s=new t(10),u=new t(3),p=new t(7),h=require("./generatePrime"),f=require("randombytes");function _(r,i){return i=i||"utf8",e.isBuffer(r)||(r=new e(r,i)),this._pub=new t(r),this}function m(r,i){return i=i||"utf8",e.isBuffer(r)||(r=new e(r,i)),this._priv=new t(r),this}module.exports=g;var c={};function a(e,t){var r=t.toString("hex"),f=[r,e.toString(16)].join("_");if(f in c)return c[f];var _,m=0;if(e.isEven()||!h.simpleSieve||!h.fermatTest(e)||!i.test(e))return m+=1,m+="02"===r||"05"===r?8:4,c[f]=m,m;switch(i.test(e.shrn(1))||(m+=2),r){case"02":e.mod(n).cmp(o)&&(m+=8);break;case"05":(_=e.mod(s)).cmp(u)&&_.cmp(p)&&(m+=8);break;default:m+=4}return c[f]=m,m}function g(e,r,i){this.setGenerator(r),this.__prime=new t(e),this._prime=t.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=_,this.setPrivateKey=m):this._primeCode=8}function v(t,r){var i=new e(t.toArray());return r?i.toString(r):i}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=a(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new t(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(r){var i=(r=(r=new t(r)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new e(i.toArray()),o=this.getPrime();if(n.length<o.length){var s=new e(o.length-n.length);s.fill(0),n=e.concat([s,n])}return n},g.prototype.getPublicKey=function(e){return v(this._pub,e)},g.prototype.getPrivateKey=function(e){return v(this._priv,e)},g.prototype.getPrime=function(e){return v(this.__prime,e)},g.prototype.getGenerator=function(e){return v(this._gen,e)},g.prototype.setGenerator=function(r,i){return i=i||"utf8",e.isBuffer(r)||(r=new e(r,i)),this.__gen=r,this._gen=new t(r),this};
},{"bn.js":"XRJY","miller-rabin":"DC7X","./generatePrime":"cIS0","randombytes":"V4U6","buffer":"VjIL"}],"f96k":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("./lib/generatePrime"),i=require("./lib/primes.json"),n=require("./lib/dh");function f(r){var f=new e(i[r].prime,"hex"),a=new e(i[r].gen,"hex");return new n(f,a)}var a={binary:!0,hex:!0,base64:!0};function u(i,f,t,l){return e.isBuffer(f)||void 0===a[f]?u(i,"binary",f,t):(f=f||"binary",l=l||"binary",t=t||new e([2]),e.isBuffer(t)||(t=new e(t,l)),"number"==typeof i?new n(r(i,t),t,!0):(e.isBuffer(i)||(i=new e(i,f)),new n(i,t,!0)))}exports.DiffieHellmanGroup=exports.createDiffieHellmanGroup=exports.getDiffieHellman=f,exports.createDiffieHellman=exports.DiffieHellman=u;
},{"./lib/generatePrime":"cIS0","./lib/primes.json":"tqvZ","./lib/dh":"Hore","buffer":"VjIL"}],"Ljy5":[function(require,module,exports) {
"use strict";var r=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function e(r,e,t){return null!=r.highWaterMark?r.highWaterMark:e?r[t]:null}function t(t,i,o,a){var n=e(i,a,o);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new r(a?o:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}module.exports={getHighWaterMark:t};
},{"../../../errors":"zVCK"}],"IioU":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){G(t,e)}}module.exports=x,x.WritableState=m;var o={deprecate:require("util-deprecate")},s=require("./internal/streams/stream"),f=require("buffer").Buffer,u=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function a(e){return f.from(e)}function c(e){return f.isBuffer(e)||e instanceof u}var l,d=require("./internal/streams/destroy"),h=require("./internal/streams/state"),b=h.getHighWaterMark,p=require("../errors").codes,w=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,R=p.ERR_STREAM_DESTROYED,k=p.ERR_STREAM_NULL_VALUES,E=p.ERR_STREAM_WRITE_AFTER_END,S=p.ERR_UNKNOWN_ENCODING,q=d.errorOrDestroy;function v(){}function m(t,n,i){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof e),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=b(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){O(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function x(t){var n=this instanceof(e=e||require("./_stream_duplex"));if(!n&&!l.call(x,this))return new x(t);this._writableState=new m(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function M(e,t){var i=new E;q(e,i),n.nextTick(t,i)}function B(e,t,i,r){var o;return null===i?o=new k:"string"==typeof i||t.objectMode||(o=new w("chunk",["string","Buffer"],i)),!o||(q(e,o),n.nextTick(r,o),!1)}function T(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}function D(e,t,n,i,r,o){if(!n){var s=T(t,i,r);i!==s&&(n=!0,r="buffer",i=s)}var f=t.objectMode?1:i.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,f,i,r,o);return u}function P(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function j(e,t,i,r,o){--t.pendingcb,i?(n.nextTick(o,r),n.nextTick(U,e,t),e._writableState.errorEmitted=!0,q(e,r)):(o(r),e._writableState.errorEmitted=!0,q(e,r),U(e,t))}function C(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function O(e,t){var i=e._writableState,r=i.sync,o=i.writecb;if("function"!=typeof o)throw new g;if(C(i),t)j(e,i,r,t,o);else{var s=I(i)||e.destroyed;s||i.corked||i.bufferProcessing||!i.bufferedRequest||N(e,i),r?n.nextTick(A,e,i,s,o):A(e,i,s,o)}}function A(e,t,n,i){n||L(e,t),t.pendingcb--,i(),U(e,t)}function L(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function N(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,P(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(P(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function W(e,t){e._final(function(n){t.pendingcb--,n&&q(e,n),t.prefinished=!0,e.emit("prefinish"),U(e,t)})}function F(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(W,e,t)))}function U(e,t){var n=I(t);if(n&&(F(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}function H(e,t,i){t.ending=!0,U(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}function G(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}require("inherits")(x,s),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===x&&(e&&e._writableState instanceof m)}})):l=function(e){return e instanceof this},x.prototype.pipe=function(){q(this,new _)},x.prototype.write=function(e,t,n){var i=this._writableState,r=!1,o=!i.objectMode&&c(e);return o&&!f.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ending?M(this,n):(o||B(this,i,e,n))&&(i.pendingcb++,r=D(this,i,o,e,t,n)),r},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||N(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new y("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||H(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=d.destroy,x.prototype._undestroy=d.undestroy,x.prototype._destroy=function(e,t){t(e)};
},{"util-deprecate":"E8KT","./internal/streams/stream":"WiQS","buffer":"VjIL","./internal/streams/destroy":"BBXB","./internal/streams/state":"Ljy5","../errors":"zVCK","inherits":"UAgo","./_stream_duplex":"vtow","process":"rH1J"}],"vtow":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=require("./_stream_readable"),a=require("./_stream_writable");require("inherits")(l,r);for(var i=t(a.prototype),n=0;n<i.length;n++){var o=i[n];l.prototype[o]||(l.prototype[o]=a.prototype[o])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||e.nextTick(b,this)}function b(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});
},{"./_stream_readable":"OLMJ","./_stream_writable":"IioU","inherits":"UAgo","process":"rH1J"}],"ZY2P":[function(require,module,exports) {
"use strict";var e=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(e){var r=!1;return function(){if(!r){r=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.apply(this,n)}}}function t(){}function n(e){return e.setHeader&&"function"==typeof e.abort}function o(i,a,l){if("function"==typeof a)return o(i,null,a);a||(a={}),l=r(l||t);var s=a.readable||!1!==a.readable&&i.readable,c=a.writable||!1!==a.writable&&i.writable,u=function(){i.writable||d()},f=i._writableState&&i._writableState.finished,d=function(){c=!1,f=!0,s||l.call(i)},b=i._readableState&&i._readableState.endEmitted,v=function(){s=!1,b=!0,c||l.call(i)},m=function(e){l.call(i,e)},w=function(){var r;return s&&!b?(i._readableState&&i._readableState.ended||(r=new e),l.call(i,r)):c&&!f?(i._writableState&&i._writableState.ended||(r=new e),l.call(i,r)):void 0},_=function(){i.req.on("finish",d)};return n(i)?(i.on("complete",d),i.on("abort",w),i.req?_():i.on("request",_)):c&&!i._writableState&&(i.on("end",u),i.on("close",u)),i.on("end",v),i.on("finish",d),!1!==a.error&&i.on("error",m),i.on("close",w),function(){i.removeListener("complete",d),i.removeListener("abort",w),i.removeListener("request",_),i.req&&i.req.removeListener("finish",d),i.removeListener("end",u),i.removeListener("close",u),i.removeListener("finish",d),i.removeListener("end",v),i.removeListener("error",m),i.removeListener("close",w)}}module.exports=o;
},{"../../../errors":"zVCK"}],"lKjK":[function(require,module,exports) {
var process = require("process");
var e,t=require("process");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=o(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,t||"default");if("object"!==r(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var i=require("./end-of-stream"),u=Symbol("lastResolve"),a=Symbol("lastReject"),f=Symbol("error"),s=Symbol("ended"),c=Symbol("lastPromise"),v=Symbol("handlePromise"),m=Symbol("stream");function b(e,t){return{value:e,done:t}}function y(e){var t=e[u];if(null!==t){var r=e[m].read();null!==r&&(e[c]=null,e[u]=null,e[a]=null,t(b(r,!1)))}}function d(e){t.nextTick(y,e)}function S(e,t){return function(r,n){e.then(function(){t[s]?r(b(void 0,!0)):t[v](r,n)},n)}}var h=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((n(e={get stream(){return this[m]},next:function(){var e=this,r=this[f];if(null!==r)return Promise.reject(r);if(this[s])return Promise.resolve(b(void 0,!0));if(this[m].destroyed)return new Promise(function(r,n){t.nextTick(function(){e[f]?n(e[f]):r(b(void 0,!0))})});var n,l=this[c];if(l)n=new Promise(S(l,this));else{var o=this[m].read();if(null!==o)return Promise.resolve(b(o,!1));n=new Promise(this[v])}return this[c]=n,n}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var e=this;return new Promise(function(t,r){e[m].destroy(null,function(e){e?r(e):t(b(void 0,!0))})})}),e),h),p=function(e){var t,r=Object.create(P,(n(t={},m,{value:e,writable:!0}),n(t,u,{value:null,writable:!0}),n(t,a,{value:null,writable:!0}),n(t,f,{value:null,writable:!0}),n(t,s,{value:e._readableState.endEmitted,writable:!0}),n(t,v,{value:function(e,t){var n=r[m].read();n?(r[c]=null,r[u]=null,r[a]=null,e(b(n,!1))):(r[u]=e,r[a]=t)},writable:!0}),t));return r[c]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[c]=null,r[u]=null,r[a]=null,t(e)),void(r[f]=e)}var n=r[u];null!==n&&(r[c]=null,r[u]=null,r[a]=null,n(b(void 0,!0))),r[s]=!0}),e.on("readable",d.bind(null,r)),r};module.exports=p;
},{"./end-of-stream":"ZY2P","process":"rH1J"}],"OLMJ":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");module.exports=j,j.ReadableState=L;var r=require("events").EventEmitter,i=function(e,t){return e.listeners(t).length},a=require("./internal/streams/stream"),d=require("buffer").Buffer,o=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function s(e){return d.from(e)}function l(e){return d.isBuffer(e)||e instanceof o}var u,h=require("util");u=h&&h.debuglog?h.debuglog("stream"):function(){};var f,p,c,b=require("./internal/streams/buffer_list"),g=require("./internal/streams/destroy"),m=require("./internal/streams/state"),y=m.getHighWaterMark,_=require("../errors").codes,v=_.ERR_INVALID_ARG_TYPE,w=_.ERR_STREAM_PUSH_AFTER_EOF,S=_.ERR_METHOD_NOT_IMPLEMENTED,R=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;require("inherits")(j,a);var M=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function L(t,n,r){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",r),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f||(f=require("string_decoder/").StringDecoder),this.decoder=new f(t.encoding),this.encoding=t.encoding)}function j(t){if(e=e||require("./_stream_duplex"),!(this instanceof j))return new j(t);var n=this instanceof e;this._readableState=new L(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function D(e,t,n,r,i){u("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,A(e,o);else if(i||(a=T(o,t)),a)M(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=s(t)),r)o.endEmitted?M(e,new R):C(e,o,t,!0);else if(o.ended)M(e,new w);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?C(e,o,t,!1):U(e,o)):C(e,o,t,!1)}else r||(o.reading=!1,U(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),U(e,t)}function T(e,t){var n;return l(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t)),n}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),j.prototype.destroy=g.destroy,j.prototype._undestroy=g.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),D(this,e,t,!1,n)},j.prototype.unshift=function(e){return D(this,e,null,!0,!1)},j.prototype.isPaused=function(){return!1===this._readableState.flowing},j.prototype.setEncoding=function(e){f||(f=require("string_decoder/").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var q=1073741824;function W(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=W(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,G(e)}function U(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function H(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,G(e))}}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function F(e){u("readable nexttick read 0"),e.read(0)}function B(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(V,e,t))}function V(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),G(e),t.flowing&&!t.reading&&e.read(0)}function G(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function Y(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function z(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(J,t,e))}function J(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function K(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}j.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=e>0?Y(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},j.prototype._read=function(e){M(this,new S("_read()"))},j.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:g;function o(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",c),e.removeListener("finish",b),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",g),r.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function s(){u("onend"),e.end()}a.endEmitted?n.nextTick(d):r.once("end",d),e.on("unpipe",o);var l=H(r);e.on("drain",l);var h=!1;function f(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==K(a.pipes,e))&&!h&&(u("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function p(t){u("onerror",t),g(),e.removeListener("error",p),0===i(e,"error")&&M(e,t)}function c(){e.removeListener("finish",b),g()}function b(){u("onfinish"),e.removeListener("close",c),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",f),k(e,"error",p),e.once("close",c),e.once("finish",b),e.emit("pipe",r),a.flowing||(u("pipe resume"),r.resume()),e},j.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var d=K(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},j.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||n.nextTick(F,this))),r},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(I,this),r},j.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(I,this),t},j.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,B(this,e)),e.paused=!1,this},j.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(j.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=require("./internal/streams/async_iterator")),p(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),j._fromList=Y,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(j.from=function(e,t){return void 0===c&&(c=require("./internal/streams/from")),c(j,e,t)});
},{"events":"LMQS","./internal/streams/stream":"WiQS","buffer":"VjIL","util":"Zcgp","./internal/streams/buffer_list":"sjy9","./internal/streams/destroy":"BBXB","./internal/streams/state":"Ljy5","../errors":"zVCK","inherits":"UAgo","./_stream_duplex":"vtow","string_decoder/":"lrG1","./internal/streams/async_iterator":"lKjK","./internal/streams/from":"UGls","process":"rH1J"}],"wDmc":[function(require,module,exports) {
"use strict";module.exports=o;var t=require("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,e=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,a=require("./_stream_duplex");function s(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new e);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(r,e){f(t,r,e)})}function f(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new i;if(t._transformState.transforming)throw new n;return t.push(null)}require("inherits")(o,a),o.prototype.push=function(t,r){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,r)},o.prototype._transform=function(t,e,n){n(new r("_transform()"))},o.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},o.prototype._destroy=function(t,r){a.prototype._destroy.call(this,t,function(t){r(t)})};
},{"../errors":"zVCK","./_stream_duplex":"vtow","inherits":"UAgo"}],"FN97":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform");function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}require("inherits")(t,r),t.prototype._transform=function(r,t,e){e(null,r)};
},{"./_stream_transform":"wDmc","inherits":"UAgo"}],"Y8AA":[function(require,module,exports) {
"use strict";var r;function n(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var t=require("../../../errors").codes,e=t.ERR_MISSING_ARGS,o=t.ERR_STREAM_DESTROYED;function i(r){if(r)throw r}function u(r){return r.setHeader&&"function"==typeof r.abort}function f(t,e,i,f){f=n(f);var a=!1;t.on("close",function(){a=!0}),void 0===r&&(r=require("./end-of-stream")),r(t,{readable:e,writable:i},function(r){if(r)return f(r);a=!0,f()});var c=!1;return function(r){if(!a&&!c)return c=!0,u(t)?t.abort():"function"==typeof t.destroy?t.destroy():void f(r||new o("pipe"))}}function a(r){r()}function c(r,n){return r.pipe(n)}function p(r){return r.length?"function"!=typeof r[r.length-1]?i:r.pop():i}function s(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];var o,i=p(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new e("streams");var u=n.map(function(r,t){var e=t<n.length-1;return f(r,e,t>0,function(r){o||(o=r),r&&u.forEach(a),e||(u.forEach(a),i(o))})});return n.reduce(c)}module.exports=s;
},{"../../../errors":"zVCK","./end-of-stream":"ZY2P"}],"mI0B":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),exports.finished=require("./lib/internal/streams/end-of-stream.js"),exports.pipeline=require("./lib/internal/streams/pipeline.js");
},{"./lib/_stream_readable.js":"OLMJ","./lib/_stream_writable.js":"IioU","./lib/_stream_duplex.js":"vtow","./lib/_stream_transform.js":"wDmc","./lib/_stream_passthrough.js":"FN97","./lib/internal/streams/end-of-stream.js":"ZY2P","./lib/internal/streams/pipeline.js":"Y8AA"}],"ur6d":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;!function(t,i){"use strict";function r(t,i){if(!t)throw new Error(i||"Assertion failed")}function n(t,i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}function h(t,i,r){if(h.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==i&&"be"!==i||(r=i,i=10),this._init(t||0,i||10,r||"be"))}var e;"object"==typeof t?t.exports=h:i.BN=h,h.BN=h,h.wordSize=26;try{e="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(B){}function o(t,i){var n=t.charCodeAt(i);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function s(t,i,r){var n=o(t,r);return r-1>=i&&(n|=o(t,r-1)<<4),n}function u(t,i,n,h){for(var e=0,o=0,s=Math.min(t.length,n),u=i;u<s;u++){var a=t.charCodeAt(u)-48;e*=h,o=a>=49?a-49+10:a>=17?a-17+10:a,r(a>=0&&o<h,"Invalid character"),e+=o}return e}function a(t,i){t.words=i.words,t.length=i.length,t.negative=i.negative,t.red=i.red}if(h.isBN=function(t){return t instanceof h||null!==t&&"object"==typeof t&&t.constructor.wordSize===h.wordSize&&Array.isArray(t.words)},h.max=function(t,i){return t.cmp(i)>0?t:i},h.min=function(t,i){return t.cmp(i)<0?t:i},h.prototype._init=function(t,i,n){if("number"==typeof t)return this._initNumber(t,i,n);if("object"==typeof t)return this._initArray(t,i,n);"hex"===i&&(i=16),r(i===(0|i)&&i>=2&&i<=36);var h=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<t.length&&(16===i?this._parseHex(t,h,n):(this._parseBase(t,i,h),"le"===n&&this._initArray(this.toArray(),i,n)))},h.prototype._initNumber=function(t,i,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),i,n)},h.prototype._initArray=function(t,i,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var e,o,s=0;if("be"===n)for(h=t.length-1,e=0;h>=0;h-=3)o=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);else if("le"===n)for(h=0,e=0;h<t.length;h+=3)o=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[e]|=o<<s&67108863,this.words[e+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,e++);return this._strip()},h.prototype._parseHex=function(t,i,r){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var h,e=0,o=0;if("be"===r)for(n=t.length-1;n>=i;n-=2)h=s(t,i,n)<<e,this.words[o]|=67108863&h,e>=18?(e-=18,o+=1,this.words[o]|=h>>>26):e+=8;else for(n=(t.length-i)%2==0?i+1:i;n<t.length;n+=2)h=s(t,i,n)<<e,this.words[o]|=67108863&h,e>=18?(e-=18,o+=1,this.words[o]|=h>>>26):e+=8;this._strip()},h.prototype._parseBase=function(t,i,r){this.words=[0],this.length=1;for(var n=0,h=1;h<=67108863;h*=i)n++;n--,h=h/i|0;for(var e=t.length-r,o=e%n,s=Math.min(e,e-o)+r,a=0,l=r;l<s;l+=n)a=u(t,l,l+n,i),this.imuln(h),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(0!==o){var m=1;for(a=u(t,l,t.length,i),l=0;l<o;l++)m*=i;this.imuln(m),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},h.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},h.prototype._move=function(t){a(t,this)},h.prototype.clone=function(){var t=new h(null);return this.copy(t),t},h.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},h.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},h.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{h.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(B){h.prototype.inspect=l}else h.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];h.prototype.toString=function(t,i){var n;if(i=0|i||1,16===(t=t||10)||"hex"===t){n="";for(var h=0,e=0,o=0;o<this.length;o++){var s=this.words[o],u=(16777215&(s<<h|e)).toString(16);e=s>>>24-h&16777215,(h+=2)>=26&&(h-=26,o--),n=0!==e||o!==this.length-1?m[6-u.length]+u+n:u+n}for(0!==e&&(n=e.toString(16)+n);n.length%i!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var a=f[t],l=d[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var M=p.modrn(l).toString(t);n=(p=p.idivn(l)).isZero()?M+n:m[a-M.length]+M+n}for(this.isZero()&&(n="0"+n);n.length%i!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},h.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},h.prototype.toJSON=function(){return this.toString(16,2)},e&&(h.prototype.toBuffer=function(t,i){return this.toArrayLike(e,t,i)}),h.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)};function p(t,i,r){r.negative=i.negative^t.negative;var n=t.length+i.length|0;r.length=n,n=n-1|0;var h=0|t.words[0],e=0|i.words[0],o=h*e,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var a=1;a<n;a++){for(var l=u>>>26,m=67108863&u,f=Math.min(a,i.length-1),d=Math.max(0,a-t.length+1);d<=f;d++){var p=a-d|0;l+=(o=(h=0|t.words[p])*(e=0|i.words[d])+m)/67108864|0,m=67108863&o}r.words[a]=0|m,u=0|l}return 0!==u?r.words[a]=0|u:r.length--,r._strip()}h.prototype.toArrayLike=function(t,i,n){this._strip();var h=this.byteLength(),e=n||Math.max(1,h);r(h<=e,"byte array longer than desired length"),r(e>0,"Requested array length <= 0");var o=function(t,i){return t.allocUnsafe?t.allocUnsafe(i):new t(i)}(t,e);return this["_toArrayLike"+("le"===i?"LE":"BE")](o,h),o},h.prototype._toArrayLikeLE=function(t,i){for(var r=0,n=0,h=0,e=0;h<this.length;h++){var o=this.words[h]<<e|n;t[r++]=255&o,r<t.length&&(t[r++]=o>>8&255),r<t.length&&(t[r++]=o>>16&255),6===e?(r<t.length&&(t[r++]=o>>24&255),n=0,e=0):(n=o>>>24,e+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},h.prototype._toArrayLikeBE=function(t,i){for(var r=t.length-1,n=0,h=0,e=0;h<this.length;h++){var o=this.words[h]<<e|n;t[r--]=255&o,r>=0&&(t[r--]=o>>8&255),r>=0&&(t[r--]=o>>16&255),6===e?(r>=0&&(t[r--]=o>>24&255),n=0,e=0):(n=o>>>24,e+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?h.prototype._countBits=function(t){return 32-Math.clz32(t)}:h.prototype._countBits=function(t){var i=t,r=0;return i>=4096&&(r+=13,i>>>=13),i>=64&&(r+=7,i>>>=7),i>=8&&(r+=4,i>>>=4),i>=2&&(r+=2,i>>>=2),r+i},h.prototype._zeroBits=function(t){if(0===t)return 26;var i=t,r=0;return 0==(8191&i)&&(r+=13,i>>>=13),0==(127&i)&&(r+=7,i>>>=7),0==(15&i)&&(r+=4,i>>>=4),0==(3&i)&&(r+=2,i>>>=2),0==(1&i)&&r++,r},h.prototype.bitLength=function(){var t=this.words[this.length-1],i=this._countBits(t);return 26*(this.length-1)+i},h.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var r=this._zeroBits(this.words[i]);if(t+=r,26!==r)break}return t},h.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},h.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},h.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},h.prototype.isNeg=function(){return 0!==this.negative},h.prototype.neg=function(){return this.clone().ineg()},h.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},h.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this._strip()},h.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},h.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},h.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},h.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var r=0;r<i.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=i.length,this._strip()},h.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},h.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},h.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},h.prototype.iuxor=function(t){var i,r;this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=i.words[n]^r.words[n];if(this!==i)for(;n<i.length;n++)this.words[n]=i.words[n];return this.length=i.length,this._strip()},h.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},h.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},h.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},h.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),n=t%26;this._expand(i),n>0&&i--;for(var h=0;h<i;h++)this.words[h]=67108863&~this.words[h];return n>0&&(this.words[h]=~this.words[h]&67108863>>26-n),this._strip()},h.prototype.notn=function(t){return this.clone().inotn(t)},h.prototype.setn=function(t,i){r("number"==typeof t&&t>=0);var n=t/26|0,h=t%26;return this._expand(n+1),this.words[n]=i?this.words[n]|1<<h:this.words[n]&~(1<<h),this._strip()},h.prototype.iadd=function(t){var i,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var h=0,e=0;e<n.length;e++)i=(0|r.words[e])+(0|n.words[e])+h,this.words[e]=67108863&i,h=i>>>26;for(;0!==h&&e<r.length;e++)i=(0|r.words[e])+h,this.words[e]=67108863&i,h=i>>>26;if(this.length=r.length,0!==h)this.words[this.length]=h,this.length++;else if(r!==this)for(;e<r.length;e++)this.words[e]=r.words[e];return this},h.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},h.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,h=this.cmp(t);if(0===h)return this.negative=0,this.length=1,this.words[0]=0,this;h>0?(r=this,n=t):(r=t,n=this);for(var e=0,o=0;o<n.length;o++)e=(i=(0|r.words[o])-(0|n.words[o])+e)>>26,this.words[o]=67108863&i;for(;0!==e&&o<r.length;o++)e=(i=(0|r.words[o])+e)>>26,this.words[o]=67108863&i;if(0===e&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},h.prototype.sub=function(t){return this.clone().isub(t)};var M=function(t,i,r){var n,h,e,o=t.words,s=i.words,u=r.words,a=0,l=0|o[0],m=8191&l,f=l>>>13,d=0|o[1],p=8191&d,M=d>>>13,v=0|o[2],g=8191&v,c=v>>>13,w=0|o[3],y=8191&w,b=w>>>13,_=0|o[4],k=8191&_,A=_>>>13,S=0|o[5],x=8191&S,B=S>>>13,q=0|o[6],R=8191&q,Z=q>>>13,L=0|o[7],N=8191&L,I=L>>>13,E=0|o[8],z=8191&E,T=E>>>13,O=0|o[9],j=8191&O,K=O>>>13,P=0|s[0],F=8191&P,U=P>>>13,C=0|s[1],D=8191&C,H=C>>>13,J=0|s[2],G=8191&J,Q=J>>>13,V=0|s[3],W=8191&V,X=V>>>13,Y=0|s[4],$=8191&Y,tt=Y>>>13,it=0|s[5],rt=8191&it,nt=it>>>13,ht=0|s[6],et=8191&ht,ot=ht>>>13,st=0|s[7],ut=8191&st,at=st>>>13,lt=0|s[8],mt=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,Mt=dt>>>13;r.negative=t.negative^i.negative,r.length=19;var vt=(a+(n=Math.imul(m,F))|0)+((8191&(h=(h=Math.imul(m,U))+Math.imul(f,F)|0))<<13)|0;a=((e=Math.imul(f,U))+(h>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(p,F),h=(h=Math.imul(p,U))+Math.imul(M,F)|0,e=Math.imul(M,U);var gt=(a+(n=n+Math.imul(m,D)|0)|0)+((8191&(h=(h=h+Math.imul(m,H)|0)+Math.imul(f,D)|0))<<13)|0;a=((e=e+Math.imul(f,H)|0)+(h>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,F),h=(h=Math.imul(g,U))+Math.imul(c,F)|0,e=Math.imul(c,U),n=n+Math.imul(p,D)|0,h=(h=h+Math.imul(p,H)|0)+Math.imul(M,D)|0,e=e+Math.imul(M,H)|0;var ct=(a+(n=n+Math.imul(m,G)|0)|0)+((8191&(h=(h=h+Math.imul(m,Q)|0)+Math.imul(f,G)|0))<<13)|0;a=((e=e+Math.imul(f,Q)|0)+(h>>>13)|0)+(ct>>>26)|0,ct&=67108863,n=Math.imul(y,F),h=(h=Math.imul(y,U))+Math.imul(b,F)|0,e=Math.imul(b,U),n=n+Math.imul(g,D)|0,h=(h=h+Math.imul(g,H)|0)+Math.imul(c,D)|0,e=e+Math.imul(c,H)|0,n=n+Math.imul(p,G)|0,h=(h=h+Math.imul(p,Q)|0)+Math.imul(M,G)|0,e=e+Math.imul(M,Q)|0;var wt=(a+(n=n+Math.imul(m,W)|0)|0)+((8191&(h=(h=h+Math.imul(m,X)|0)+Math.imul(f,W)|0))<<13)|0;a=((e=e+Math.imul(f,X)|0)+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(k,F),h=(h=Math.imul(k,U))+Math.imul(A,F)|0,e=Math.imul(A,U),n=n+Math.imul(y,D)|0,h=(h=h+Math.imul(y,H)|0)+Math.imul(b,D)|0,e=e+Math.imul(b,H)|0,n=n+Math.imul(g,G)|0,h=(h=h+Math.imul(g,Q)|0)+Math.imul(c,G)|0,e=e+Math.imul(c,Q)|0,n=n+Math.imul(p,W)|0,h=(h=h+Math.imul(p,X)|0)+Math.imul(M,W)|0,e=e+Math.imul(M,X)|0;var yt=(a+(n=n+Math.imul(m,$)|0)|0)+((8191&(h=(h=h+Math.imul(m,tt)|0)+Math.imul(f,$)|0))<<13)|0;a=((e=e+Math.imul(f,tt)|0)+(h>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(x,F),h=(h=Math.imul(x,U))+Math.imul(B,F)|0,e=Math.imul(B,U),n=n+Math.imul(k,D)|0,h=(h=h+Math.imul(k,H)|0)+Math.imul(A,D)|0,e=e+Math.imul(A,H)|0,n=n+Math.imul(y,G)|0,h=(h=h+Math.imul(y,Q)|0)+Math.imul(b,G)|0,e=e+Math.imul(b,Q)|0,n=n+Math.imul(g,W)|0,h=(h=h+Math.imul(g,X)|0)+Math.imul(c,W)|0,e=e+Math.imul(c,X)|0,n=n+Math.imul(p,$)|0,h=(h=h+Math.imul(p,tt)|0)+Math.imul(M,$)|0,e=e+Math.imul(M,tt)|0;var bt=(a+(n=n+Math.imul(m,rt)|0)|0)+((8191&(h=(h=h+Math.imul(m,nt)|0)+Math.imul(f,rt)|0))<<13)|0;a=((e=e+Math.imul(f,nt)|0)+(h>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(R,F),h=(h=Math.imul(R,U))+Math.imul(Z,F)|0,e=Math.imul(Z,U),n=n+Math.imul(x,D)|0,h=(h=h+Math.imul(x,H)|0)+Math.imul(B,D)|0,e=e+Math.imul(B,H)|0,n=n+Math.imul(k,G)|0,h=(h=h+Math.imul(k,Q)|0)+Math.imul(A,G)|0,e=e+Math.imul(A,Q)|0,n=n+Math.imul(y,W)|0,h=(h=h+Math.imul(y,X)|0)+Math.imul(b,W)|0,e=e+Math.imul(b,X)|0,n=n+Math.imul(g,$)|0,h=(h=h+Math.imul(g,tt)|0)+Math.imul(c,$)|0,e=e+Math.imul(c,tt)|0,n=n+Math.imul(p,rt)|0,h=(h=h+Math.imul(p,nt)|0)+Math.imul(M,rt)|0,e=e+Math.imul(M,nt)|0;var _t=(a+(n=n+Math.imul(m,et)|0)|0)+((8191&(h=(h=h+Math.imul(m,ot)|0)+Math.imul(f,et)|0))<<13)|0;a=((e=e+Math.imul(f,ot)|0)+(h>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(N,F),h=(h=Math.imul(N,U))+Math.imul(I,F)|0,e=Math.imul(I,U),n=n+Math.imul(R,D)|0,h=(h=h+Math.imul(R,H)|0)+Math.imul(Z,D)|0,e=e+Math.imul(Z,H)|0,n=n+Math.imul(x,G)|0,h=(h=h+Math.imul(x,Q)|0)+Math.imul(B,G)|0,e=e+Math.imul(B,Q)|0,n=n+Math.imul(k,W)|0,h=(h=h+Math.imul(k,X)|0)+Math.imul(A,W)|0,e=e+Math.imul(A,X)|0,n=n+Math.imul(y,$)|0,h=(h=h+Math.imul(y,tt)|0)+Math.imul(b,$)|0,e=e+Math.imul(b,tt)|0,n=n+Math.imul(g,rt)|0,h=(h=h+Math.imul(g,nt)|0)+Math.imul(c,rt)|0,e=e+Math.imul(c,nt)|0,n=n+Math.imul(p,et)|0,h=(h=h+Math.imul(p,ot)|0)+Math.imul(M,et)|0,e=e+Math.imul(M,ot)|0;var kt=(a+(n=n+Math.imul(m,ut)|0)|0)+((8191&(h=(h=h+Math.imul(m,at)|0)+Math.imul(f,ut)|0))<<13)|0;a=((e=e+Math.imul(f,at)|0)+(h>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,F),h=(h=Math.imul(z,U))+Math.imul(T,F)|0,e=Math.imul(T,U),n=n+Math.imul(N,D)|0,h=(h=h+Math.imul(N,H)|0)+Math.imul(I,D)|0,e=e+Math.imul(I,H)|0,n=n+Math.imul(R,G)|0,h=(h=h+Math.imul(R,Q)|0)+Math.imul(Z,G)|0,e=e+Math.imul(Z,Q)|0,n=n+Math.imul(x,W)|0,h=(h=h+Math.imul(x,X)|0)+Math.imul(B,W)|0,e=e+Math.imul(B,X)|0,n=n+Math.imul(k,$)|0,h=(h=h+Math.imul(k,tt)|0)+Math.imul(A,$)|0,e=e+Math.imul(A,tt)|0,n=n+Math.imul(y,rt)|0,h=(h=h+Math.imul(y,nt)|0)+Math.imul(b,rt)|0,e=e+Math.imul(b,nt)|0,n=n+Math.imul(g,et)|0,h=(h=h+Math.imul(g,ot)|0)+Math.imul(c,et)|0,e=e+Math.imul(c,ot)|0,n=n+Math.imul(p,ut)|0,h=(h=h+Math.imul(p,at)|0)+Math.imul(M,ut)|0,e=e+Math.imul(M,at)|0;var At=(a+(n=n+Math.imul(m,mt)|0)|0)+((8191&(h=(h=h+Math.imul(m,ft)|0)+Math.imul(f,mt)|0))<<13)|0;a=((e=e+Math.imul(f,ft)|0)+(h>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(j,F),h=(h=Math.imul(j,U))+Math.imul(K,F)|0,e=Math.imul(K,U),n=n+Math.imul(z,D)|0,h=(h=h+Math.imul(z,H)|0)+Math.imul(T,D)|0,e=e+Math.imul(T,H)|0,n=n+Math.imul(N,G)|0,h=(h=h+Math.imul(N,Q)|0)+Math.imul(I,G)|0,e=e+Math.imul(I,Q)|0,n=n+Math.imul(R,W)|0,h=(h=h+Math.imul(R,X)|0)+Math.imul(Z,W)|0,e=e+Math.imul(Z,X)|0,n=n+Math.imul(x,$)|0,h=(h=h+Math.imul(x,tt)|0)+Math.imul(B,$)|0,e=e+Math.imul(B,tt)|0,n=n+Math.imul(k,rt)|0,h=(h=h+Math.imul(k,nt)|0)+Math.imul(A,rt)|0,e=e+Math.imul(A,nt)|0,n=n+Math.imul(y,et)|0,h=(h=h+Math.imul(y,ot)|0)+Math.imul(b,et)|0,e=e+Math.imul(b,ot)|0,n=n+Math.imul(g,ut)|0,h=(h=h+Math.imul(g,at)|0)+Math.imul(c,ut)|0,e=e+Math.imul(c,at)|0,n=n+Math.imul(p,mt)|0,h=(h=h+Math.imul(p,ft)|0)+Math.imul(M,mt)|0,e=e+Math.imul(M,ft)|0;var St=(a+(n=n+Math.imul(m,pt)|0)|0)+((8191&(h=(h=h+Math.imul(m,Mt)|0)+Math.imul(f,pt)|0))<<13)|0;a=((e=e+Math.imul(f,Mt)|0)+(h>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(j,D),h=(h=Math.imul(j,H))+Math.imul(K,D)|0,e=Math.imul(K,H),n=n+Math.imul(z,G)|0,h=(h=h+Math.imul(z,Q)|0)+Math.imul(T,G)|0,e=e+Math.imul(T,Q)|0,n=n+Math.imul(N,W)|0,h=(h=h+Math.imul(N,X)|0)+Math.imul(I,W)|0,e=e+Math.imul(I,X)|0,n=n+Math.imul(R,$)|0,h=(h=h+Math.imul(R,tt)|0)+Math.imul(Z,$)|0,e=e+Math.imul(Z,tt)|0,n=n+Math.imul(x,rt)|0,h=(h=h+Math.imul(x,nt)|0)+Math.imul(B,rt)|0,e=e+Math.imul(B,nt)|0,n=n+Math.imul(k,et)|0,h=(h=h+Math.imul(k,ot)|0)+Math.imul(A,et)|0,e=e+Math.imul(A,ot)|0,n=n+Math.imul(y,ut)|0,h=(h=h+Math.imul(y,at)|0)+Math.imul(b,ut)|0,e=e+Math.imul(b,at)|0,n=n+Math.imul(g,mt)|0,h=(h=h+Math.imul(g,ft)|0)+Math.imul(c,mt)|0,e=e+Math.imul(c,ft)|0;var xt=(a+(n=n+Math.imul(p,pt)|0)|0)+((8191&(h=(h=h+Math.imul(p,Mt)|0)+Math.imul(M,pt)|0))<<13)|0;a=((e=e+Math.imul(M,Mt)|0)+(h>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(j,G),h=(h=Math.imul(j,Q))+Math.imul(K,G)|0,e=Math.imul(K,Q),n=n+Math.imul(z,W)|0,h=(h=h+Math.imul(z,X)|0)+Math.imul(T,W)|0,e=e+Math.imul(T,X)|0,n=n+Math.imul(N,$)|0,h=(h=h+Math.imul(N,tt)|0)+Math.imul(I,$)|0,e=e+Math.imul(I,tt)|0,n=n+Math.imul(R,rt)|0,h=(h=h+Math.imul(R,nt)|0)+Math.imul(Z,rt)|0,e=e+Math.imul(Z,nt)|0,n=n+Math.imul(x,et)|0,h=(h=h+Math.imul(x,ot)|0)+Math.imul(B,et)|0,e=e+Math.imul(B,ot)|0,n=n+Math.imul(k,ut)|0,h=(h=h+Math.imul(k,at)|0)+Math.imul(A,ut)|0,e=e+Math.imul(A,at)|0,n=n+Math.imul(y,mt)|0,h=(h=h+Math.imul(y,ft)|0)+Math.imul(b,mt)|0,e=e+Math.imul(b,ft)|0;var Bt=(a+(n=n+Math.imul(g,pt)|0)|0)+((8191&(h=(h=h+Math.imul(g,Mt)|0)+Math.imul(c,pt)|0))<<13)|0;a=((e=e+Math.imul(c,Mt)|0)+(h>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(j,W),h=(h=Math.imul(j,X))+Math.imul(K,W)|0,e=Math.imul(K,X),n=n+Math.imul(z,$)|0,h=(h=h+Math.imul(z,tt)|0)+Math.imul(T,$)|0,e=e+Math.imul(T,tt)|0,n=n+Math.imul(N,rt)|0,h=(h=h+Math.imul(N,nt)|0)+Math.imul(I,rt)|0,e=e+Math.imul(I,nt)|0,n=n+Math.imul(R,et)|0,h=(h=h+Math.imul(R,ot)|0)+Math.imul(Z,et)|0,e=e+Math.imul(Z,ot)|0,n=n+Math.imul(x,ut)|0,h=(h=h+Math.imul(x,at)|0)+Math.imul(B,ut)|0,e=e+Math.imul(B,at)|0,n=n+Math.imul(k,mt)|0,h=(h=h+Math.imul(k,ft)|0)+Math.imul(A,mt)|0,e=e+Math.imul(A,ft)|0;var qt=(a+(n=n+Math.imul(y,pt)|0)|0)+((8191&(h=(h=h+Math.imul(y,Mt)|0)+Math.imul(b,pt)|0))<<13)|0;a=((e=e+Math.imul(b,Mt)|0)+(h>>>13)|0)+(qt>>>26)|0,qt&=67108863,n=Math.imul(j,$),h=(h=Math.imul(j,tt))+Math.imul(K,$)|0,e=Math.imul(K,tt),n=n+Math.imul(z,rt)|0,h=(h=h+Math.imul(z,nt)|0)+Math.imul(T,rt)|0,e=e+Math.imul(T,nt)|0,n=n+Math.imul(N,et)|0,h=(h=h+Math.imul(N,ot)|0)+Math.imul(I,et)|0,e=e+Math.imul(I,ot)|0,n=n+Math.imul(R,ut)|0,h=(h=h+Math.imul(R,at)|0)+Math.imul(Z,ut)|0,e=e+Math.imul(Z,at)|0,n=n+Math.imul(x,mt)|0,h=(h=h+Math.imul(x,ft)|0)+Math.imul(B,mt)|0,e=e+Math.imul(B,ft)|0;var Rt=(a+(n=n+Math.imul(k,pt)|0)|0)+((8191&(h=(h=h+Math.imul(k,Mt)|0)+Math.imul(A,pt)|0))<<13)|0;a=((e=e+Math.imul(A,Mt)|0)+(h>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(j,rt),h=(h=Math.imul(j,nt))+Math.imul(K,rt)|0,e=Math.imul(K,nt),n=n+Math.imul(z,et)|0,h=(h=h+Math.imul(z,ot)|0)+Math.imul(T,et)|0,e=e+Math.imul(T,ot)|0,n=n+Math.imul(N,ut)|0,h=(h=h+Math.imul(N,at)|0)+Math.imul(I,ut)|0,e=e+Math.imul(I,at)|0,n=n+Math.imul(R,mt)|0,h=(h=h+Math.imul(R,ft)|0)+Math.imul(Z,mt)|0,e=e+Math.imul(Z,ft)|0;var Zt=(a+(n=n+Math.imul(x,pt)|0)|0)+((8191&(h=(h=h+Math.imul(x,Mt)|0)+Math.imul(B,pt)|0))<<13)|0;a=((e=e+Math.imul(B,Mt)|0)+(h>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,n=Math.imul(j,et),h=(h=Math.imul(j,ot))+Math.imul(K,et)|0,e=Math.imul(K,ot),n=n+Math.imul(z,ut)|0,h=(h=h+Math.imul(z,at)|0)+Math.imul(T,ut)|0,e=e+Math.imul(T,at)|0,n=n+Math.imul(N,mt)|0,h=(h=h+Math.imul(N,ft)|0)+Math.imul(I,mt)|0,e=e+Math.imul(I,ft)|0;var Lt=(a+(n=n+Math.imul(R,pt)|0)|0)+((8191&(h=(h=h+Math.imul(R,Mt)|0)+Math.imul(Z,pt)|0))<<13)|0;a=((e=e+Math.imul(Z,Mt)|0)+(h>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(j,ut),h=(h=Math.imul(j,at))+Math.imul(K,ut)|0,e=Math.imul(K,at),n=n+Math.imul(z,mt)|0,h=(h=h+Math.imul(z,ft)|0)+Math.imul(T,mt)|0,e=e+Math.imul(T,ft)|0;var Nt=(a+(n=n+Math.imul(N,pt)|0)|0)+((8191&(h=(h=h+Math.imul(N,Mt)|0)+Math.imul(I,pt)|0))<<13)|0;a=((e=e+Math.imul(I,Mt)|0)+(h>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(j,mt),h=(h=Math.imul(j,ft))+Math.imul(K,mt)|0,e=Math.imul(K,ft);var It=(a+(n=n+Math.imul(z,pt)|0)|0)+((8191&(h=(h=h+Math.imul(z,Mt)|0)+Math.imul(T,pt)|0))<<13)|0;a=((e=e+Math.imul(T,Mt)|0)+(h>>>13)|0)+(It>>>26)|0,It&=67108863;var Et=(a+(n=Math.imul(j,pt))|0)+((8191&(h=(h=Math.imul(j,Mt))+Math.imul(K,pt)|0))<<13)|0;return a=((e=Math.imul(K,Mt))+(h>>>13)|0)+(Et>>>26)|0,Et&=67108863,u[0]=vt,u[1]=gt,u[2]=ct,u[3]=wt,u[4]=yt,u[5]=bt,u[6]=_t,u[7]=kt,u[8]=At,u[9]=St,u[10]=xt,u[11]=Bt,u[12]=qt,u[13]=Rt,u[14]=Zt,u[15]=Lt,u[16]=Nt,u[17]=It,u[18]=Et,0!==a&&(u[19]=a,r.length++),r};function v(t,i,r){r.negative=i.negative^t.negative,r.length=t.length+i.length;for(var n=0,h=0,e=0;e<r.length-1;e++){var o=h;h=0;for(var s=67108863&n,u=Math.min(e,i.length-1),a=Math.max(0,e-t.length+1);a<=u;a++){var l=e-a,m=(0|t.words[l])*(0|i.words[a]),f=67108863&m;s=67108863&(f=f+s|0),h+=(o=(o=o+(m/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}r.words[e]=s,n=o,o=h}return 0!==n?r.words[e]=n:r.length--,r._strip()}function g(t,i,r){return v(t,i,r)}function c(t,i){this.x=t,this.y=i}Math.imul||(M=p),h.prototype.mulTo=function(t,i){var r=this.length+t.length;return 10===this.length&&10===t.length?M(this,t,i):r<63?p(this,t,i):r<1024?v(this,t,i):g(this,t,i)},c.prototype.makeRBT=function(t){for(var i=new Array(t),r=h.prototype._countBits(t)-1,n=0;n<t;n++)i[n]=this.revBin(n,r,t);return i},c.prototype.revBin=function(t,i,r){if(0===t||t===r-1)return t;for(var n=0,h=0;h<i;h++)n|=(1&t)<<i-h-1,t>>=1;return n},c.prototype.permute=function(t,i,r,n,h,e){for(var o=0;o<e;o++)n[o]=i[t[o]],h[o]=r[t[o]]},c.prototype.transform=function(t,i,r,n,h,e){this.permute(e,t,i,r,n,h);for(var o=1;o<h;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),a=Math.sin(2*Math.PI/s),l=0;l<h;l+=s)for(var m=u,f=a,d=0;d<o;d++){var p=r[l+d],M=n[l+d],v=r[l+d+o],g=n[l+d+o],c=m*v-f*g;g=m*g+f*v,v=c,r[l+d]=p+v,n[l+d]=M+g,r[l+d+o]=p-v,n[l+d+o]=M-g,d!==s&&(c=u*m-a*f,f=u*f+a*m,m=c)}},c.prototype.guessLen13b=function(t,i){var r=1|Math.max(i,t),n=1&r,h=0;for(r=r/2|0;r;r>>>=1)h++;return 1<<h+1+n},c.prototype.conjugate=function(t,i,r){if(!(r<=1))for(var n=0;n<r/2;n++){var h=t[n];t[n]=t[r-n-1],t[r-n-1]=h,h=i[n],i[n]=-i[r-n-1],i[r-n-1]=-h}},c.prototype.normalize13b=function(t,i){for(var r=0,n=0;n<i/2;n++){var h=8192*Math.round(t[2*n+1]/i)+Math.round(t[2*n]/i)+r;t[n]=67108863&h,r=h<67108864?0:h/67108864|0}return t},c.prototype.convert13b=function(t,i,n,h){for(var e=0,o=0;o<i;o++)e+=0|t[o],n[2*o]=8191&e,e>>>=13,n[2*o+1]=8191&e,e>>>=13;for(o=2*i;o<h;++o)n[o]=0;r(0===e),r(0==(-8192&e))},c.prototype.stub=function(t){for(var i=new Array(t),r=0;r<t;r++)i[r]=0;return i},c.prototype.mulp=function(t,i,r){var n=2*this.guessLen13b(t.length,i.length),h=this.makeRBT(n),e=this.stub(n),o=new Array(n),s=new Array(n),u=new Array(n),a=new Array(n),l=new Array(n),m=new Array(n),f=r.words;f.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(i.words,i.length,a,n),this.transform(o,e,s,u,n,h),this.transform(a,e,l,m,n,h);for(var d=0;d<n;d++){var p=s[d]*l[d]-u[d]*m[d];u[d]=s[d]*m[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,n),this.transform(s,u,f,e,n,h),this.conjugate(f,e,n),this.normalize13b(f,n),r.negative=t.negative^i.negative,r.length=t.length+i.length,r._strip()},h.prototype.mul=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},h.prototype.mulf=function(t){var i=new h(null);return i.words=new Array(this.length+t.length),g(this,t,i)},h.prototype.imul=function(t){return this.clone().mulTo(t,this)},h.prototype.imuln=function(t){var i=t<0;i&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,h=0;h<this.length;h++){var e=(0|this.words[h])*t,o=(67108863&e)+(67108863&n);n>>=26,n+=e/67108864|0,n+=o>>>26,this.words[h]=67108863&o}return 0!==n&&(this.words[h]=n,this.length++),i?this.ineg():this},h.prototype.muln=function(t){return this.clone().imuln(t)},h.prototype.sqr=function(){return this.mul(this)},h.prototype.isqr=function(){return this.imul(this.clone())},h.prototype.pow=function(t){var i=function(t){for(var i=new Array(t.bitLength()),r=0;r<i.length;r++){var n=r/26|0,h=r%26;i[r]=t.words[n]>>>h&1}return i}(t);if(0===i.length)return new h(1);for(var r=this,n=0;n<i.length&&0===i[n];n++,r=r.sqr());if(++n<i.length)for(var e=r.sqr();n<i.length;n++,e=e.sqr())0!==i[n]&&(r=r.mul(e));return r},h.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var i,n=t%26,h=(t-n)/26,e=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(i=0;i<this.length;i++){var s=this.words[i]&e,u=(0|this.words[i])-s<<n;this.words[i]=u|o,o=s>>>26-n}o&&(this.words[i]=o,this.length++)}if(0!==h){for(i=this.length-1;i>=0;i--)this.words[i+h]=this.words[i];for(i=0;i<h;i++)this.words[i]=0;this.length+=h}return this._strip()},h.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},h.prototype.iushrn=function(t,i,n){var h;r("number"==typeof t&&t>=0),h=i?(i-i%26)/26:0;var e=t%26,o=Math.min((t-e)/26,this.length),s=67108863^67108863>>>e<<e,u=n;if(h-=o,h=Math.max(0,h),u){for(var a=0;a<o;a++)u.words[a]=this.words[a];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,a=0;a<this.length;a++)this.words[a]=this.words[a+o];else this.words[0]=0,this.length=1;var l=0;for(a=this.length-1;a>=0&&(0!==l||a>=h);a--){var m=0|this.words[a];this.words[a]=l<<26-e|m>>>e,l=m&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},h.prototype.ishrn=function(t,i,n){return r(0===this.negative),this.iushrn(t,i,n)},h.prototype.shln=function(t){return this.clone().ishln(t)},h.prototype.ushln=function(t){return this.clone().iushln(t)},h.prototype.shrn=function(t){return this.clone().ishrn(t)},h.prototype.ushrn=function(t){return this.clone().iushrn(t)},h.prototype.testn=function(t){r("number"==typeof t&&t>=0);var i=t%26,n=(t-i)/26,h=1<<i;return!(this.length<=n)&&!!(this.words[n]&h)},h.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var i=t%26,n=(t-i)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==i&&n++,this.length=Math.min(n,this.length),0!==i){var h=67108863^67108863>>>i<<i;this.words[this.length-1]&=h}return this._strip()},h.prototype.maskn=function(t){return this.clone().imaskn(t)},h.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},h.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},h.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this._strip()},h.prototype.addn=function(t){return this.clone().iaddn(t)},h.prototype.subn=function(t){return this.clone().isubn(t)},h.prototype.iabs=function(){return this.negative=0,this},h.prototype.abs=function(){return this.clone().iabs()},h.prototype._ishlnsubmul=function(t,i,n){var h,e,o=t.length+n;this._expand(o);var s=0;for(h=0;h<t.length;h++){e=(0|this.words[h+n])+s;var u=(0|t.words[h])*i;s=((e-=67108863&u)>>26)-(u/67108864|0),this.words[h+n]=67108863&e}for(;h<this.length-n;h++)s=(e=(0|this.words[h+n])+s)>>26,this.words[h+n]=67108863&e;if(0===s)return this._strip();for(r(-1===s),s=0,h=0;h<this.length;h++)s=(e=-(0|this.words[h])+s)>>26,this.words[h]=67108863&e;return this.negative=1,this._strip()},h.prototype._wordDiv=function(t,i){var r=(this.length,t.length),n=this.clone(),e=t,o=0|e.words[e.length-1];0!==(r=26-this._countBits(o))&&(e=e.ushln(r),n.iushln(r),o=0|e.words[e.length-1]);var s,u=n.length-e.length;if("mod"!==i){(s=new h(null)).length=u+1,s.words=new Array(s.length);for(var a=0;a<s.length;a++)s.words[a]=0}var l=n.clone()._ishlnsubmul(e,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var m=u-1;m>=0;m--){var f=67108864*(0|n.words[e.length+m])+(0|n.words[e.length+m-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(e,f,m);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(e,1,m),n.isZero()||(n.negative^=1);s&&(s.words[m]=f)}return s&&s._strip(),n._strip(),"div"!==i&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},h.prototype.divmod=function(t,i,n){return r(!t.isZero()),this.isZero()?{div:new h(0),mod:new h(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,i),"mod"!==i&&(e=s.div.neg()),"div"!==i&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:e,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),i),"mod"!==i&&(e=s.div.neg()),{div:e,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),i),"div"!==i&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new h(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new h(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new h(this.modrn(t.words[0]))}:this._wordDiv(t,i);var e,o,s},h.prototype.div=function(t){return this.divmod(t,"div",!1).div},h.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},h.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},h.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var r=0!==i.div.negative?i.mod.isub(t):i.mod,n=t.ushrn(1),h=t.andln(1),e=r.cmp(n);return e<0||1===h&&0===e?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},h.prototype.modrn=function(t){var i=t<0;i&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,h=0,e=this.length-1;e>=0;e--)h=(n*h+(0|this.words[e]))%t;return i?-h:h},h.prototype.modn=function(t){return this.modrn(t)},h.prototype.idivn=function(t){var i=t<0;i&&(t=-t),r(t<=67108863);for(var n=0,h=this.length-1;h>=0;h--){var e=(0|this.words[h])+67108864*n;this.words[h]=e/t|0,n=e%t}return this._strip(),i?this.ineg():this},h.prototype.divn=function(t){return this.clone().idivn(t)},h.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var i=this,n=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e=new h(1),o=new h(0),s=new h(0),u=new h(1),a=0;i.isEven()&&n.isEven();)i.iushrn(1),n.iushrn(1),++a;for(var l=n.clone(),m=i.clone();!i.isZero();){for(var f=0,d=1;0==(i.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(i.iushrn(f);f-- >0;)(e.isOdd()||o.isOdd())&&(e.iadd(l),o.isub(m)),e.iushrn(1),o.iushrn(1);for(var p=0,M=1;0==(n.words[0]&M)&&p<26;++p,M<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(m)),s.iushrn(1),u.iushrn(1);i.cmp(n)>=0?(i.isub(n),e.isub(s),o.isub(u)):(n.isub(i),s.isub(e),u.isub(o))}return{a:s,b:u,gcd:n.iushln(a)}},h.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var i=this,n=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var e,o=new h(1),s=new h(0),u=n.clone();i.cmpn(1)>0&&n.cmpn(1)>0;){for(var a=0,l=1;0==(i.words[0]&l)&&a<26;++a,l<<=1);if(a>0)for(i.iushrn(a);a-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var m=0,f=1;0==(n.words[0]&f)&&m<26;++m,f<<=1);if(m>0)for(n.iushrn(m);m-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);i.cmp(n)>=0?(i.isub(n),o.isub(s)):(n.isub(i),s.isub(o))}return(e=0===i.cmpn(1)?o:s).cmpn(0)<0&&e.iadd(t),e},h.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),r=t.clone();i.negative=0,r.negative=0;for(var n=0;i.isEven()&&r.isEven();n++)i.iushrn(1),r.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;r.isEven();)r.iushrn(1);var h=i.cmp(r);if(h<0){var e=i;i=r,r=e}else if(0===h||0===r.cmpn(1))break;i.isub(r)}return r.iushln(n)},h.prototype.invm=function(t){return this.egcd(t).a.umod(t)},h.prototype.isEven=function(){return 0==(1&this.words[0])},h.prototype.isOdd=function(){return 1==(1&this.words[0])},h.prototype.andln=function(t){return this.words[0]&t},h.prototype.bincn=function(t){r("number"==typeof t);var i=t%26,n=(t-i)/26,h=1<<i;if(this.length<=n)return this._expand(n+1),this.words[n]|=h,this;for(var e=h,o=n;0!==e&&o<this.length;o++){var s=0|this.words[o];e=(s+=e)>>>26,s&=67108863,this.words[o]=s}return 0!==e&&(this.words[o]=e,this.length++),this},h.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},h.prototype.cmpn=function(t){var i,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)i=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var h=0|this.words[0];i=h===t?0:h<t?-1:1}return 0!==this.negative?0|-i:i},h.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},h.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],h=0|t.words[r];if(n!==h){n<h?i=-1:n>h&&(i=1);break}}return i},h.prototype.gtn=function(t){return 1===this.cmpn(t)},h.prototype.gt=function(t){return 1===this.cmp(t)},h.prototype.gten=function(t){return this.cmpn(t)>=0},h.prototype.gte=function(t){return this.cmp(t)>=0},h.prototype.ltn=function(t){return-1===this.cmpn(t)},h.prototype.lt=function(t){return-1===this.cmp(t)},h.prototype.lten=function(t){return this.cmpn(t)<=0},h.prototype.lte=function(t){return this.cmp(t)<=0},h.prototype.eqn=function(t){return 0===this.cmpn(t)},h.prototype.eq=function(t){return 0===this.cmp(t)},h.red=function(t){return new S(t)},h.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},h.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},h.prototype._forceRed=function(t){return this.red=t,this},h.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},h.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},h.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},h.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},h.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},h.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},h.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},h.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},h.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},h.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},h.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},h.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},h.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},h.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function y(t,i){this.name=t,this.p=new h(i,16),this.n=this.p.bitLength(),this.k=new h(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(t){if("string"==typeof t){var i=h._prime(t);this.m=i.p,this.prime=i}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){S.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new h(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new h(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var i,r=t;do{this.split(r,this.tmp),i=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(i>this.n);var n=i<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,i){t.iushrn(this.n,0,i)},y.prototype.imulK=function(t){return t.imul(this.k)},n(b,y),b.prototype.split=function(t,i){for(var r=Math.min(t.length,9),n=0;n<r;n++)i.words[n]=t.words[n];if(i.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var h=t.words[9];for(i.words[i.length++]=4194303&h,n=10;n<t.length;n++){var e=0|t.words[n];t.words[n-10]=(4194303&e)<<4|h>>>22,h=e}h>>>=22,t.words[n-10]=h,0===h&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,r=0;r<t.length;r++){var n=0|t.words[r];i+=977*n,t.words[r]=67108863&i,i=64*n+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(k,y),n(A,y),A.prototype.imulK=function(t){for(var i=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+i,h=67108863&n;n>>>=26,t.words[r]=h,i=n}return 0!==i&&(t.words[t.length++]=i),t},h._prime=function(t){if(w[t])return w[t];var i;if("k256"===t)i=new b;else if("p224"===t)i=new _;else if("p192"===t)i=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new A}return w[t]=i,i},S.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},S.prototype._verify2=function(t,i){r(0==(t.negative|i.negative),"red works only with positives"),r(t.red&&t.red===i.red,"red works only with red numbers")},S.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(a(t,t.umod(this.m)._forceRed(this)),t)},S.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},S.prototype.add=function(t,i){this._verify2(t,i);var r=t.add(i);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(t,i){this._verify2(t,i);var r=t.iadd(i);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(t,i){this._verify2(t,i);var r=t.sub(i);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(t,i){this._verify2(t,i);var r=t.isub(i);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},S.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},S.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},S.prototype.isqr=function(t){return this.imul(t,t.clone())},S.prototype.sqr=function(t){return this.mul(t,t)},S.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(r(i%2==1),3===i){var n=this.m.add(new h(1)).iushrn(2);return this.pow(t,n)}for(var e=this.m.subn(1),o=0;!e.isZero()&&0===e.andln(1);)o++,e.iushrn(1);r(!e.isZero());var s=new h(1).toRed(this),u=s.redNeg(),a=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new h(2*l*l).toRed(this);0!==this.pow(l,a).cmp(u);)l.redIAdd(u);for(var m=this.pow(l,e),f=this.pow(t,e.addn(1).iushrn(1)),d=this.pow(t,e),p=o;0!==d.cmp(s);){for(var M=d,v=0;0!==M.cmp(s);v++)M=M.redSqr();r(v<p);var g=this.pow(m,new h(1).iushln(p-v-1));f=f.redMul(g),m=g.redSqr(),d=d.redMul(m),p=v}return f},S.prototype.invm=function(t){var i=t._invmp(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},S.prototype.pow=function(t,i){if(i.isZero())return new h(1).toRed(this);if(0===i.cmpn(1))return t.clone();var r=new Array(16);r[0]=new h(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var e=r[0],o=0,s=0,u=i.bitLength()%26;for(0===u&&(u=26),n=i.length-1;n>=0;n--){for(var a=i.words[n],l=u-1;l>=0;l--){var m=a>>l&1;e!==r[0]&&(e=this.sqr(e)),0!==m||0!==o?(o<<=1,o|=m,(4===++s||0===n&&0===l)&&(e=this.mul(e,r[o]),s=0,o=0)):s=0}u=26}return e},S.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},S.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},h.mont=function(t){return new x(t)},n(x,S),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},x.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(i),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=r.isub(n).iushrn(this.shift),e=h;return h.cmp(this.m)>=0?e=h.isub(this.m):h.cmpn(0)<0&&(e=h.iadd(this.m)),e._forceRed(this)},x.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new h(0)._forceRed(this);var r=t.mul(i),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=r.isub(n).iushrn(this.shift),o=e;return e.cmp(this.m)>=0?o=e.isub(this.m):e.cmpn(0)<0&&(o=e.iadd(this.m)),o._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"==typeof module||module,this);
},{"buffer":"Zcgp"}],"yANG":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=require("bn.js"),u=require("randombytes");function o(e){var u=n(e);return{blinder:u.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:u.invm(e.modulus)}}function n(e){var o,n=e.modulus.byteLength();do{o=new r(u(n))}while(o.cmp(e.modulus)>=0||!o.umod(e.prime1)||!o.umod(e.prime2));return o}function m(u,n){var m=o(n),d=n.modulus.byteLength(),i=new r(u).mul(m.blinder).umod(n.modulus),t=i.toRed(r.mont(n.prime1)),l=i.toRed(r.mont(n.prime2)),b=n.coefficient,f=n.prime1,p=n.prime2,s=t.redPow(n.exponent1).fromRed(),a=l.redPow(n.exponent2).fromRed(),c=s.isub(a).imul(b).umod(f).imul(p);return a.iadd(c).imul(m.unblinder).umod(n.modulus).toArrayLike(e,"be",d)}m.getr=n,module.exports=m;
},{"bn.js":"ur6d","randombytes":"V4U6","buffer":"VjIL"}],"ZtFN":[function(require,module,exports) {
module.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}};
},{}],"vCVL":[function(require,module,exports) {
"use strict";var r=exports;function e(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if("string"!=typeof r){for(var n=0;n<r.length;n++)t[n]=0|r[n];return t}if("hex"===e){(r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r);for(n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(n=0;n<r.length;n++){var o=r.charCodeAt(n),u=o>>8,i=255&o;u?t.push(u,i):t.push(i)}return t}function t(r){return 1===r.length?"0"+r:r}function n(r){for(var e="",n=0;n<r.length;n++)e+=t(r[n].toString(16));return e}r.toArray=e,r.zero2=t,r.toHex=n,r.encode=function(r,e){return"hex"===e?n(r):r};
},{}],"iSWW":[function(require,module,exports) {
"use strict";var r=exports,n=require("bn.js"),t=require("minimalistic-assert"),e=require("minimalistic-crypto-utils");function i(r,n,t){var e=new Array(Math.max(r.bitLength(),t)+1);e.fill(0);for(var i=1<<n+1,o=r.clone(),a=0;a<e.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,e[a]=s,o.iushrn(1)}return e}function o(r,n){var t=[[],[]];r=r.clone(),n=n.clone();for(var e,i=0,o=0;r.cmpn(-i)>0||n.cmpn(-o)>0;){var a,s,u=r.andln(3)+i&3,c=n.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0==(1&u)?0:3!==(e=r.andln(7)+i&7)&&5!==e||2!==c?u:-u,t[0].push(a),s=0==(1&c)?0:3!==(e=n.andln(7)+o&7)&&5!==e||2!==u?c:-c,t[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),r.iushrn(1),n.iushrn(1)}return t}function a(r,n,t){var e="_"+n;r.prototype[n]=function(){return void 0!==this[e]?this[e]:this[e]=t.call(this)}}function s(n){return"string"==typeof n?r.toArray(n,"hex"):n}function u(r){return new n(r,"hex","le")}r.assert=t,r.toArray=e.toArray,r.zero2=e.zero2,r.toHex=e.toHex,r.encode=e.encode,r.getNAF=i,r.getJSF=o,r.cachedProperty=a,r.parseBytes=s,r.intFromLE=u;
},{"bn.js":"XRJY","minimalistic-assert":"ITMc","minimalistic-crypto-utils":"vCVL"}],"wiYq":[function(require,module,exports) {
"use strict";var t=require("bn.js"),e=require("../utils"),n=e.getNAF,r=e.getJSF,i=e.assert;function o(e,n){this.type=e,this.p=new t(n.p,16),this.red=n.prime?t.red(n.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=n.n&&new t(n.n,16),this.g=n.g&&this.pointFromJSON(n.g,n.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function s(t,e){this.curve=t,this.type=e,this.precomputed=null}module.exports=o,o.prototype.point=function(){throw new Error("Not implemented")},o.prototype.validate=function(){throw new Error("Not implemented")},o.prototype._fixedNafMul=function(t,e){i(t.precomputed);var r=t._getDoubles(),o=n(e,1,this._bitLength),s=(1<<r.step+1)-(r.step%2==0?2:1);s/=3;var p,h,d=[];for(p=0;p<o.length;p+=r.step){h=0;for(var u=p+r.step-1;u>=p;u--)h=(h<<1)+o[u];d.push(h)}for(var a=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=s;f>0;f--){for(p=0;p<d.length;p++)(h=d[p])===f?l=l.mixedAdd(r.points[p]):h===-f&&(l=l.mixedAdd(r.points[p].neg()));a=a.add(l)}return a.toP()},o.prototype._wnafMul=function(t,e){var r=4,o=t._getNAFPoints(r);r=o.wnd;for(var s=o.points,p=n(e,r,this._bitLength),h=this.jpoint(null,null,null),d=p.length-1;d>=0;d--){for(var u=0;d>=0&&0===p[d];d--)u++;if(d>=0&&u++,h=h.dblp(u),d<0)break;var a=p[d];i(0!==a),h="affine"===t.type?a>0?h.mixedAdd(s[a-1>>1]):h.mixedAdd(s[-a-1>>1].neg()):a>0?h.add(s[a-1>>1]):h.add(s[-a-1>>1].neg())}return"affine"===t.type?h.toP():h},o.prototype._wnafMulAdd=function(t,e,i,o,s){var p,h,d,u=this._wnafT1,a=this._wnafT2,l=this._wnafT3,f=0;for(p=0;p<o;p++){var c=(d=e[p])._getNAFPoints(t);u[p]=c.wnd,a[p]=c.points}for(p=o-1;p>=1;p-=2){var g=p-1,m=p;if(1===u[g]&&1===u[m]){var y=[e[g],null,null,e[m]];0===e[g].y.cmp(e[m].y)?(y[1]=e[g].add(e[m]),y[2]=e[g].toJ().mixedAdd(e[m].neg())):0===e[g].y.cmp(e[m].y.redNeg())?(y[1]=e[g].toJ().mixedAdd(e[m]),y[2]=e[g].add(e[m].neg())):(y[1]=e[g].toJ().mixedAdd(e[m]),y[2]=e[g].toJ().mixedAdd(e[m].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],w=r(i[g],i[m]);for(f=Math.max(w[0].length,f),l[g]=new Array(f),l[m]=new Array(f),h=0;h<f;h++){var b=0|w[0][h],_=0|w[1][h];l[g][h]=v[3*(b+1)+(_+1)],l[m][h]=0,a[g]=y}}else l[g]=n(i[g],u[g],this._bitLength),l[m]=n(i[m],u[m],this._bitLength),f=Math.max(l[g].length,f),f=Math.max(l[m].length,f)}var A=this.jpoint(null,null,null),x=this._wnafT4;for(p=f;p>=0;p--){for(var N=0;p>=0;){var L=!0;for(h=0;h<o;h++)x[h]=0|l[h][p],0!==x[h]&&(L=!1);if(!L)break;N++,p--}if(p>=0&&N++,A=A.dblp(N),p<0)break;for(h=0;h<o;h++){var P=x[h];0!==P&&(P>0?d=a[h][P-1>>1]:P<0&&(d=a[h][-P-1>>1].neg()),A="affine"===d.type?A.mixedAdd(d):A.add(d))}}for(p=0;p<o;p++)a[p]=null;return s?A:A.toP()},o.BasePoint=s,s.prototype.eq=function(){throw new Error("Not implemented")},s.prototype.validate=function(){return this.curve.validate(this)},o.prototype.decodePoint=function(t,n){t=e.toArray(t,n);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?i(t[t.length-1]%2==0):7===t[0]&&i(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},s.prototype.encodeCompressed=function(t){return this.encode(t,!0)},s.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},s.prototype.encode=function(t,n){return e.encode(this._encode(n),t)},s.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},s.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},s.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},s.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},s.prototype._getBeta=function(){return null},s.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e};
},{"bn.js":"XRJY","../utils":"iSWW"}],"xMUM":[function(require,module,exports) {
"use strict";var r=require("../utils"),e=require("bn.js"),t=require("inherits"),d=require("./base"),i=r.assert;function n(r){d.call(this,"short",r),this.a=new e(r.a,16).toRed(this.red),this.b=new e(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(r,t,i,n){d.BasePoint.call(this,r,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(t,16),this.y=new e(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function s(r,t,i,n){d.BasePoint.call(this,r,"jacobian"),null===t&&null===i&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(t,16),this.y=new e(i,16),this.z=new e(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}t(n,d),module.exports=n,n.prototype._getEndomorphism=function(r){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,d;if(r.beta)t=new e(r.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(r.lambda)d=new e(r.lambda,16);else{var u=this._getEndoRoots(this.n);0===this.g.mul(u[0]).x.cmp(this.g.x.redMul(t))?d=u[0]:(d=u[1],i(0===this.g.mul(d).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:d,basis:r.basis?r.basis.map(function(r){return{a:new e(r.a,16),b:new e(r.b,16)}}):this._getEndoBasis(d)}}},n.prototype._getEndoRoots=function(r){var t=r===this.p?this.red:e.mont(r),d=new e(2).toRed(t).redInvm(),i=d.redNeg(),n=new e(3).toRed(t).redNeg().redSqrt().redMul(d);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},n.prototype._getEndoBasis=function(r){for(var t,d,i,n,u,s,o,h,p,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=r,f=this.n.clone(),c=new e(1),S=new e(0),b=new e(0),v=new e(1),I=0;0!==a.cmpn(0);){var y=f.div(a);h=f.sub(y.mul(a)),p=b.sub(y.mul(c));var A=v.sub(y.mul(S));if(!i&&h.cmp(l)<0)t=o.neg(),d=c,i=h.neg(),n=p;else if(i&&2==++I)break;o=h,f=a,a=h,b=c,c=p,v=S,S=A}u=h.neg(),s=p;var m=i.sqr().add(n.sqr());return u.sqr().add(s.sqr()).cmp(m)>=0&&(u=t,s=d),i.negative&&(i=i.neg(),n=n.neg()),u.negative&&(u=u.neg(),s=s.neg()),[{a:i,b:n},{a:u,b:s}]},n.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],d=e[1],i=d.b.mul(r).divRound(this.n),n=t.b.neg().mul(r).divRound(this.n),u=i.mul(t.a),s=n.mul(d.a),o=i.mul(t.b),h=n.mul(d.b);return{k1:r.sub(u).sub(s),k2:o.add(h).neg()}},n.prototype.pointFromX=function(r,t){(r=new e(r,16)).red||(r=r.toRed(this.red));var d=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=d.redSqrt();if(0!==i.redSqr().redSub(d).cmp(this.zero))throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(r,i)},n.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,d=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(d).redIAdd(this.b);return 0===t.redSqr().redISub(i).cmpn(0)},n.prototype._endoWnafMulAdd=function(r,e,t){for(var d=this._endoWnafT1,i=this._endoWnafT2,n=0;n<r.length;n++){var u=this._endoSplit(e[n]),s=r[n],o=s._getBeta();u.k1.negative&&(u.k1.ineg(),s=s.neg(!0)),u.k2.negative&&(u.k2.ineg(),o=o.neg(!0)),d[2*n]=s,d[2*n+1]=o,i[2*n]=u.k1,i[2*n+1]=u.k2}for(var h=this._wnafMulAdd(1,d,i,2*n,t),p=0;p<2*n;p++)d[p]=null,i[p]=null;return h},t(u,d.BasePoint),n.prototype.point=function(r,e,t){return new u(this,r,e,t)},n.prototype.pointFromJSON=function(r,e){return u.fromJSON(this,r,e)},u.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,d=function(r){return t.point(r.x.redMul(t.endo.beta),r.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(d)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(d)}}}return e}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(r,e,t){"string"==typeof e&&(e=JSON.parse(e));var d=r.point(e[0],e[1],t);if(!e[2])return d;function i(e){return r.point(e[0],e[1],t)}var n=e[2];return d.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[d].concat(n.doubles.points.map(i))},naf:n.naf&&{wnd:n.naf.wnd,points:[d].concat(n.naf.points.map(i))}},d},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(0===this.x.cmp(r.x))return this.curve.point(null,null);var e=this.y.redSub(r.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),d=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,d)},u.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(0===r.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),d=r.redInvm(),i=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(d),n=i.redSqr().redISub(this.x.redAdd(this.x)),u=i.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,u)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(r){return r=new e(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},u.prototype.mulAdd=function(r,e,t){var d=[this,e],i=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(d,i):this.curve._wnafMulAdd(1,d,i,2)},u.prototype.jmulAdd=function(r,e,t){var d=[this,e],i=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(d,i,!0):this.curve._wnafMulAdd(1,d,i,2,!0)},u.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||0===this.x.cmp(r.x)&&0===this.y.cmp(r.y))},u.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,d=function(r){return r.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(d)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(d)}}}return e},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},t(s,d.BasePoint),n.prototype.jpoint=function(r,e,t){return new s(this,r,e,t)},s.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),d=this.y.redMul(e).redMul(r);return this.curve.point(t,d)},s.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},s.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),d=this.x.redMul(e),i=r.x.redMul(t),n=this.y.redMul(e.redMul(r.z)),u=r.y.redMul(t.redMul(this.z)),s=d.redSub(i),o=n.redSub(u);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),p=h.redMul(s),l=d.redMul(h),a=o.redSqr().redIAdd(p).redISub(l).redISub(l),f=o.redMul(l.redISub(a)).redISub(n.redMul(p)),c=this.z.redMul(r.z).redMul(s);return this.curve.jpoint(a,f,c)},s.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,d=r.x.redMul(e),i=this.y,n=r.y.redMul(e).redMul(this.z),u=t.redSub(d),s=i.redSub(n);if(0===u.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var o=u.redSqr(),h=o.redMul(u),p=t.redMul(o),l=s.redSqr().redIAdd(h).redISub(p).redISub(p),a=s.redMul(p.redISub(l)).redISub(i.redMul(h)),f=this.z.redMul(u);return this.curve.jpoint(l,a,f)},s.prototype.dblp=function(r){if(0===r)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<r;e++)t=t.dbl();return t}var d=this.curve.a,i=this.curve.tinv,n=this.x,u=this.y,s=this.z,o=s.redSqr().redSqr(),h=u.redAdd(u);for(e=0;e<r;e++){var p=n.redSqr(),l=h.redSqr(),a=l.redSqr(),f=p.redAdd(p).redIAdd(p).redIAdd(d.redMul(o)),c=n.redMul(l),S=f.redSqr().redISub(c.redAdd(c)),b=c.redISub(S),v=f.redMul(b);v=v.redIAdd(v).redISub(a);var I=h.redMul(s);e+1<r&&(o=o.redMul(a)),n=S,s=I,h=v}return this.curve.jpoint(n,h.redMul(i),s)},s.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},s.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var d=this.x.redSqr(),i=this.y.redSqr(),n=i.redSqr(),u=this.x.redAdd(i).redSqr().redISub(d).redISub(n);u=u.redIAdd(u);var s=d.redAdd(d).redIAdd(d),o=s.redSqr().redISub(u).redISub(u),h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),r=o,e=s.redMul(u.redISub(o)).redISub(h),t=this.y.redAdd(this.y)}else{var p=this.x.redSqr(),l=this.y.redSqr(),a=l.redSqr(),f=this.x.redAdd(l).redSqr().redISub(p).redISub(a);f=f.redIAdd(f);var c=p.redAdd(p).redIAdd(p),S=c.redSqr(),b=a.redIAdd(a);b=(b=b.redIAdd(b)).redIAdd(b),r=S.redISub(f).redISub(f),e=c.redMul(f.redISub(r)).redISub(b),t=(t=this.y.redMul(this.z)).redIAdd(t)}return this.curve.jpoint(r,e,t)},s.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var d=this.x.redSqr(),i=this.y.redSqr(),n=i.redSqr(),u=this.x.redAdd(i).redSqr().redISub(d).redISub(n);u=u.redIAdd(u);var s=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a),o=s.redSqr().redISub(u).redISub(u);r=o;var h=n.redIAdd(n);h=(h=h.redIAdd(h)).redIAdd(h),e=s.redMul(u.redISub(o)).redISub(h),t=this.y.redAdd(this.y)}else{var p=this.z.redSqr(),l=this.y.redSqr(),a=this.x.redMul(l),f=this.x.redSub(p).redMul(this.x.redAdd(p));f=f.redAdd(f).redIAdd(f);var c=a.redIAdd(a),S=(c=c.redIAdd(c)).redAdd(c);r=f.redSqr().redISub(S),t=this.y.redAdd(this.z).redSqr().redISub(l).redISub(p);var b=l.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),e=f.redMul(c.redISub(r)).redISub(b)}return this.curve.jpoint(r,e,t)},s.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,d=this.z,i=d.redSqr().redSqr(),n=e.redSqr(),u=t.redSqr(),s=n.redAdd(n).redIAdd(n).redIAdd(r.redMul(i)),o=e.redAdd(e),h=(o=o.redIAdd(o)).redMul(u),p=s.redSqr().redISub(h.redAdd(h)),l=h.redISub(p),a=u.redSqr();a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);var f=s.redMul(l).redISub(a),c=t.redAdd(t).redMul(d);return this.curve.jpoint(p,f,c)},s.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),d=e.redSqr(),i=r.redAdd(r).redIAdd(r),n=i.redSqr(),u=this.x.redAdd(e).redSqr().redISub(r).redISub(d),s=(u=(u=(u=u.redIAdd(u)).redAdd(u).redIAdd(u)).redISub(n)).redSqr(),o=d.redIAdd(d);o=(o=(o=o.redIAdd(o)).redIAdd(o)).redIAdd(o);var h=i.redIAdd(u).redSqr().redISub(n).redISub(s).redISub(o),p=e.redMul(h);p=(p=p.redIAdd(p)).redIAdd(p);var l=this.x.redMul(s).redISub(p);l=(l=l.redIAdd(l)).redIAdd(l);var a=this.y.redMul(h.redMul(o.redISub(h)).redISub(u.redMul(s)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);var f=this.z.redAdd(u).redSqr().redISub(t).redISub(s);return this.curve.jpoint(l,a,f)},s.prototype.mul=function(r,t){return r=new e(r,t),this.curve._wnafMul(this,r)},s.prototype.eq=function(r){if("affine"===r.type)return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(0!==this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0))return!1;var d=e.redMul(this.z),i=t.redMul(r.z);return 0===this.y.redMul(i).redISub(r.y.redMul(d)).cmpn(0)},s.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(t))return!0;for(var d=r.clone(),i=this.curve.redN.redMul(e);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},s.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};
},{"../utils":"iSWW","bn.js":"XRJY","inherits":"UAgo","./base":"wiYq"}],"WMDI":[function(require,module,exports) {
"use strict";var t=require("bn.js"),r=require("inherits"),e=require("./base"),i=require("../utils");function o(r){e.call(this,"mont",r),this.a=new t(r.a,16).toRed(this.red),this.b=new t(r.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function n(r,i,o){e.BasePoint.call(this,r,"projective"),null===i&&null===o?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(i,16),this.z=new t(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(o,e),module.exports=o,o.prototype.validate=function(t){var r=t.normalize().x,e=r.redSqr(),i=e.redMul(r).redAdd(e.redMul(this.a)).redAdd(r);return 0===i.redSqrt().redSqr().cmp(i)},r(n,e.BasePoint),o.prototype.decodePoint=function(t,r){return this.point(i.toArray(t,r),1)},o.prototype.point=function(t,r){return new n(this,t,r)},o.prototype.pointFromJSON=function(t){return n.fromJSON(this,t)},n.prototype.precompute=function(){},n.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},n.fromJSON=function(t,r){return new n(t,r[0],r[1]||t.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},n.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),r=this.x.redSub(this.z).redSqr(),e=t.redSub(r),i=t.redMul(r),o=e.redMul(r.redAdd(this.curve.a24.redMul(e)));return this.curve.point(i,o)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(t,r){var e=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=t.x.redAdd(t.z),n=t.x.redSub(t.z).redMul(e),d=o.redMul(i),u=r.z.redMul(n.redAdd(d).redSqr()),s=r.x.redMul(n.redISub(d).redSqr());return this.curve.point(u,s)},n.prototype.mul=function(t){for(var r=t.clone(),e=this,i=this.curve.point(null,null),o=[];0!==r.cmpn(0);r.iushrn(1))o.push(r.andln(1));for(var n=o.length-1;n>=0;n--)0===o[n]?(e=e.diffAdd(i,this),i=i.dbl()):(i=e.diffAdd(i,this),e=e.dbl());return i},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()};
},{"bn.js":"XRJY","inherits":"UAgo","./base":"wiYq","../utils":"iSWW"}],"BHVi":[function(require,module,exports) {
"use strict";var t=require("../utils"),e=require("bn.js"),r=require("inherits"),i=require("./base"),d=t.assert;function s(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,i.call(this,"edwards",t),this.a=new e(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),d(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function u(t,r,d,s,u){i.BasePoint.call(this,t,"projective"),null===r&&null===d&&null===s?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(r,16),this.y=new e(d,16),this.z=s?new e(s,16):this.curve.one,this.t=u&&new e(u,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}r(s,i),module.exports=s,s.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},s.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},s.prototype.jpoint=function(t,e,r,i){return this.point(t,e,r,i)},s.prototype.pointFromX=function(t,r){(t=new e(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),d=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),u=d.redMul(s.redInvm()),h=u.redSqrt();if(0!==h.redSqr().redSub(u).cmp(this.zero))throw new Error("invalid point");var n=h.fromRed().isOdd();return(r&&!n||!r&&n)&&(h=h.redNeg()),this.point(t,h)},s.prototype.pointFromY=function(t,r){(t=new e(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),d=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),u=d.redMul(s.redInvm());if(0===u.cmp(this.zero)){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var h=u.redSqrt();if(0!==h.redSqr().redSub(u).cmp(this.zero))throw new Error("invalid point");return h.fromRed().isOdd()!==r&&(h=h.redNeg()),this.point(h,t)},s.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),i=e.redMul(this.a).redAdd(r),d=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===i.cmp(d)},r(u,i.BasePoint),s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},s.prototype.point=function(t,e,r,i){return new u(this,t,e,r,i)},u.fromJSON=function(t,e){return new u(t,e[0],e[1],e[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(t),d=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),s=i.redAdd(e),u=s.redSub(r),h=i.redSub(e),n=d.redMul(u),o=s.redMul(h),c=d.redMul(h),l=u.redMul(s);return this.curve.point(n,o,l,c)},u.prototype._projDbl=function(){var t,e,r,i,d,s,u=this.x.redAdd(this.y).redSqr(),h=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var o=(i=this.curve._mulA(h)).redAdd(n);this.zOne?(t=u.redSub(h).redSub(n).redMul(o.redSub(this.curve.two)),e=o.redMul(i.redSub(n)),r=o.redSqr().redSub(o).redSub(o)):(d=this.z.redSqr(),s=o.redSub(d).redISub(d),t=u.redSub(h).redISub(n).redMul(s),e=o.redMul(i.redSub(n)),r=o.redMul(s))}else i=h.redAdd(n),d=this.curve._mulC(this.z).redSqr(),s=i.redSub(d).redSub(d),t=this.curve._mulC(u.redISub(i)).redMul(s),e=this.curve._mulC(i).redMul(h.redISub(n)),r=i.redMul(s);return this.curve.point(t,e,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),d=this.z.redMul(t.z.redAdd(t.z)),s=r.redSub(e),u=d.redSub(i),h=d.redAdd(i),n=r.redAdd(e),o=s.redMul(u),c=h.redMul(n),l=s.redMul(n),p=u.redMul(h);return this.curve.point(o,c,p,l)},u.prototype._projAdd=function(t){var e,r,i=this.z.redMul(t.z),d=i.redSqr(),s=this.x.redMul(t.x),u=this.y.redMul(t.y),h=this.curve.d.redMul(s).redMul(u),n=d.redSub(h),o=d.redAdd(h),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(u),l=i.redMul(n).redMul(c);return this.curve.twisted?(e=i.redMul(o).redMul(u.redSub(this.curve._mulA(s))),r=n.redMul(o)):(e=i.redMul(o).redMul(u.redSub(s)),r=this.curve._mulC(n).redMul(o)),this.curve.point(l,e,r)},u.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},u.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},u.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},u.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},u.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add;
},{"../utils":"iSWW","bn.js":"XRJY","inherits":"UAgo","./base":"wiYq"}],"NpO4":[function(require,module,exports) {
"use strict";var r=exports;r.base=require("./base"),r.short=require("./short"),r.mont=require("./mont"),r.edwards=require("./edwards");
},{"./base":"wiYq","./short":"xMUM","./mont":"WMDI","./edwards":"BHVi"}],"CycQ":[function(require,module,exports) {
"use strict";var r=require("minimalistic-assert"),t=require("inherits");function n(r,t){return 55296==(64512&r.charCodeAt(t))&&(!(t<0||t+1>=r.length)&&56320==(64512&r.charCodeAt(t+1)))}function e(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var e=[];if("string"==typeof r)if(t){if("hex"===t)for((r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r="0"+r),u=0;u<r.length;u+=2)e.push(parseInt(r[u]+r[u+1],16))}else for(var o=0,u=0;u<r.length;u++){var i=r.charCodeAt(u);i<128?e[o++]=i:i<2048?(e[o++]=i>>6|192,e[o++]=63&i|128):n(r,u)?(i=65536+((1023&i)<<10)+(1023&r.charCodeAt(++u)),e[o++]=i>>18|240,e[o++]=i>>12&63|128,e[o++]=i>>6&63|128,e[o++]=63&i|128):(e[o++]=i>>12|224,e[o++]=i>>6&63|128,e[o++]=63&i|128)}else for(u=0;u<r.length;u++)e[u]=0|r[u];return e}function o(r){for(var t="",n=0;n<r.length;n++)t+=s(r[n].toString(16));return t}function u(r){return(r>>>24|r>>>8&65280|r<<8&16711680|(255&r)<<24)>>>0}function i(r,t){for(var n="",e=0;e<r.length;e++){var o=r[e];"little"===t&&(o=u(o)),n+=f(o.toString(16))}return n}function s(r){return 1===r.length?"0"+r:r}function f(r){return 7===r.length?"0"+r:6===r.length?"00"+r:5===r.length?"000"+r:4===r.length?"0000"+r:3===r.length?"00000"+r:2===r.length?"000000"+r:1===r.length?"0000000"+r:r}function c(t,n,e,o){var u=e-n;r(u%4==0);for(var i=new Array(u/4),s=0,f=n;s<i.length;s++,f+=4){var c;c="big"===o?t[f]<<24|t[f+1]<<16|t[f+2]<<8|t[f+3]:t[f+3]<<24|t[f+2]<<16|t[f+1]<<8|t[f],i[s]=c>>>0}return i}function h(r,t){for(var n=new Array(4*r.length),e=0,o=0;e<r.length;e++,o+=4){var u=r[e];"big"===t?(n[o]=u>>>24,n[o+1]=u>>>16&255,n[o+2]=u>>>8&255,n[o+3]=255&u):(n[o+3]=u>>>24,n[o+2]=u>>>16&255,n[o+1]=u>>>8&255,n[o]=255&u)}return n}function l(r,t){return r>>>t|r<<32-t}function p(r,t){return r<<t|r>>>32-t}function a(r,t){return r+t>>>0}function x(r,t,n){return r+t+n>>>0}function g(r,t,n,e){return r+t+n+e>>>0}function _(r,t,n,e,o){return r+t+n+e+o>>>0}function v(r,t,n,e){var o=r[t],u=e+r[t+1]>>>0,i=(u<e?1:0)+n+o;r[t]=i>>>0,r[t+1]=u}function m(r,t,n,e){return(t+e>>>0<t?1:0)+r+n>>>0}function A(r,t,n,e){return t+e>>>0}function y(r,t,n,e,o,u,i,s){var f=0,c=t;return f+=(c=c+e>>>0)<t?1:0,f+=(c=c+u>>>0)<u?1:0,r+n+o+i+(f+=(c=c+s>>>0)<s?1:0)>>>0}function d(r,t,n,e,o,u,i,s){return t+e+u+s>>>0}function C(r,t,n,e,o,u,i,s,f,c){var h=0,l=t;return h+=(l=l+e>>>0)<t?1:0,h+=(l=l+u>>>0)<u?1:0,h+=(l=l+s>>>0)<s?1:0,r+n+o+i+f+(h+=(l=l+c>>>0)<c?1:0)>>>0}function z(r,t,n,e,o,u,i,s,f,c){return t+e+u+s+c>>>0}function b(r,t,n){return(t<<32-n|r>>>n)>>>0}function q(r,t,n){return(r<<32-n|t>>>n)>>>0}function w(r,t,n){return r>>>n}function H(r,t,n){return(r<<32-n|t>>>n)>>>0}exports.inherits=t,exports.toArray=e,exports.toHex=o,exports.htonl=u,exports.toHex32=i,exports.zero2=s,exports.zero8=f,exports.join32=c,exports.split32=h,exports.rotr32=l,exports.rotl32=p,exports.sum32=a,exports.sum32_3=x,exports.sum32_4=g,exports.sum32_5=_,exports.sum64=v,exports.sum64_hi=m,exports.sum64_lo=A,exports.sum64_4_hi=y,exports.sum64_4_lo=d,exports.sum64_5_hi=C,exports.sum64_5_lo=z,exports.rotr64_hi=b,exports.rotr64_lo=q,exports.shr64_hi=w,exports.shr64_lo=H;
},{"minimalistic-assert":"ITMc","inherits":"UAgo"}],"WWIA":[function(require,module,exports) {
"use strict";var t=require("./utils"),i=require("minimalistic-assert");function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}exports.BlockHash=n,n.prototype.update=function(i,n){if(i=t.toArray(i,n),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){var e=(i=this.pending).length%this._delta8;this.pending=i.slice(i.length-e,i.length),0===this.pending.length&&(this.pending=null),i=t.join32(i,0,i.length-e,this.endian);for(var h=0;h<i.length;h+=this._delta32)this._update(i,h,h+this._delta32)}return this},n.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},n.prototype._pad=function(){var t=this.pendingTotal,i=this._delta8,n=i-(t+this.padLength)%i,e=new Array(n+this.padLength);e[0]=128;for(var h=1;h<n;h++)e[h]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)e[h++]=0;e[h++]=0,e[h++]=0,e[h++]=0,e[h++]=0,e[h++]=t>>>24&255,e[h++]=t>>>16&255,e[h++]=t>>>8&255,e[h++]=255&t}else for(e[h++]=255&t,e[h++]=t>>>8&255,e[h++]=t>>>16&255,e[h++]=t>>>24&255,e[h++]=0,e[h++]=0,e[h++]=0,e[h++]=0,s=8;s<this.padLength;s++)e[h++]=0;return e};
},{"./utils":"CycQ","minimalistic-assert":"ITMc"}],"nYFZ":[function(require,module,exports) {
"use strict";var r=require("../utils"),t=r.rotr32;function n(r,t,n,s){return 0===r?e(t,n,s):1===r||3===r?o(t,n,s):2===r?u(t,n,s):void 0}function e(r,t,n){return r&t^~r&n}function u(r,t,n){return r&t^r&n^t&n}function o(r,t,n){return r^t^n}function s(r){return t(r,2)^t(r,13)^t(r,22)}function i(r){return t(r,6)^t(r,11)^t(r,25)}function c(r){return t(r,7)^t(r,18)^r>>>3}function f(r){return t(r,17)^t(r,19)^r>>>10}exports.ft_1=n,exports.ch32=e,exports.maj32=u,exports.p32=o,exports.s0_256=s,exports.s1_256=i,exports.g0_256=c,exports.g1_256=f;
},{"../utils":"CycQ"}],"thZo":[function(require,module,exports) {
"use strict";var t=require("../utils"),h=require("../common"),i=require("./common"),s=t.rotl32,e=t.sum32,r=t.sum32_5,o=i.ft_1,n=h.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function a(){if(!(this instanceof a))return new a;n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}t.inherits(a,n),module.exports=a,a.blockSize=512,a.outSize=160,a.hmacStrength=80,a.padLength=64,a.prototype._update=function(t,h){for(var i=this.W,n=0;n<16;n++)i[n]=t[h+n];for(;n<i.length;n++)i[n]=s(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var a=this.h[0],c=this.h[1],l=this.h[2],f=this.h[3],m=this.h[4];for(n=0;n<i.length;n++){var p=~~(n/20),g=r(s(a,5),o(p,c,l,f),m,i[n],u[p]);m=f,f=l,l=s(c,30),c=a,a=g}this.h[0]=e(this.h[0],a),this.h[1]=e(this.h[1],c),this.h[2]=e(this.h[2],l),this.h[3]=e(this.h[3],f),this.h[4]=e(this.h[4],m)},a.prototype._digest=function(h){return"hex"===h?t.toHex32(this.h,"big"):t.split32(this.h,"big")};
},{"../utils":"CycQ","../common":"WWIA","./common":"nYFZ"}],"exPG":[function(require,module,exports) {
"use strict";var h=require("../utils"),t=require("../common"),i=require("./common"),s=require("minimalistic-assert"),e=h.sum32,r=h.sum32_4,n=h.sum32_5,o=i.ch32,u=i.maj32,a=i.s0_256,c=i.s1_256,l=i.g0_256,m=i.g1_256,g=t.BlockHash,f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p(){if(!(this instanceof p))return new p;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=f,this.W=new Array(64)}h.inherits(p,g),module.exports=p,p.blockSize=512,p.outSize=256,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(h,t){for(var i=this.W,g=0;g<16;g++)i[g]=h[t+g];for(;g<i.length;g++)i[g]=r(m(i[g-2]),i[g-7],l(i[g-15]),i[g-16]);var f=this.h[0],p=this.h[1],_=this.h[2],k=this.h[3],d=this.h[4],q=this.h[5],v=this.h[6],b=this.h[7];for(s(this.k.length===i.length),g=0;g<i.length;g++){var x=n(b,c(d),o(d,q,v),this.k[g],i[g]),y=e(a(f),u(f,p,_));b=v,v=q,q=d,d=e(k,x),k=_,_=p,p=f,f=e(x,y)}this.h[0]=e(this.h[0],f),this.h[1]=e(this.h[1],p),this.h[2]=e(this.h[2],_),this.h[3]=e(this.h[3],k),this.h[4]=e(this.h[4],d),this.h[5]=e(this.h[5],q),this.h[6]=e(this.h[6],v),this.h[7]=e(this.h[7],b)},p.prototype._digest=function(t){return"hex"===t?h.toHex32(this.h,"big"):h.split32(this.h,"big")};
},{"../utils":"CycQ","../common":"WWIA","./common":"nYFZ","minimalistic-assert":"ITMc"}],"pklH":[function(require,module,exports) {
"use strict";var t=require("../utils"),i=require("./256");function e(){if(!(this instanceof e))return new e;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}t.inherits(e,i),module.exports=e,e.blockSize=512,e.outSize=224,e.hmacStrength=192,e.padLength=64,e.prototype._digest=function(i){return"hex"===i?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")};
},{"../utils":"CycQ","./256":"exPG"}],"OTyr":[function(require,module,exports) {
"use strict";var t=require("../utils"),h=require("../common"),i=require("minimalistic-assert"),r=t.rotr64_hi,n=t.rotr64_lo,s=t.shr64_hi,e=t.shr64_lo,u=t.sum64,o=t.sum64_hi,a=t.sum64_lo,c=t.sum64_4_hi,f=t.sum64_4_lo,l=t.sum64_5_hi,v=t.sum64_5_lo,_=h.BlockHash,p=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function m(){if(!(this instanceof m))return new m;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=p,this.W=new Array(160)}function g(t,h,i,r,n){var s=t&i^~t&n;return s<0&&(s+=4294967296),s}function k(t,h,i,r,n,s){var e=h&r^~h&s;return e<0&&(e+=4294967296),e}function d(t,h,i,r,n){var s=t&i^t&n^i&n;return s<0&&(s+=4294967296),s}function y(t,h,i,r,n,s){var e=h&r^h&s^r&s;return e<0&&(e+=4294967296),e}function b(t,h){var i=r(t,h,28)^r(h,t,2)^r(h,t,7);return i<0&&(i+=4294967296),i}function q(t,h){var i=n(t,h,28)^n(h,t,2)^n(h,t,7);return i<0&&(i+=4294967296),i}function x(t,h){var i=r(t,h,14)^r(t,h,18)^r(h,t,9);return i<0&&(i+=4294967296),i}function B(t,h){var i=n(t,h,14)^n(t,h,18)^n(h,t,9);return i<0&&(i+=4294967296),i}function S(t,h){var i=r(t,h,1)^r(t,h,8)^s(t,h,7);return i<0&&(i+=4294967296),i}function W(t,h){var i=n(t,h,1)^n(t,h,8)^e(t,h,7);return i<0&&(i+=4294967296),i}function w(t,h){var i=r(t,h,19)^r(h,t,29)^s(t,h,6);return i<0&&(i+=4294967296),i}function z(t,h){var i=n(t,h,19)^n(h,t,29)^e(t,h,6);return i<0&&(i+=4294967296),i}t.inherits(m,_),module.exports=m,m.blockSize=1024,m.outSize=512,m.hmacStrength=192,m.padLength=128,m.prototype._prepareBlock=function(t,h){for(var i=this.W,r=0;r<32;r++)i[r]=t[h+r];for(;r<i.length;r+=2){var n=w(i[r-4],i[r-3]),s=z(i[r-4],i[r-3]),e=i[r-14],u=i[r-13],o=S(i[r-30],i[r-29]),a=W(i[r-30],i[r-29]),l=i[r-32],v=i[r-31];i[r]=c(n,s,e,u,o,a,l,v),i[r+1]=f(n,s,e,u,o,a,l,v)}},m.prototype._update=function(t,h){this._prepareBlock(t,h);var r=this.W,n=this.h[0],s=this.h[1],e=this.h[2],c=this.h[3],f=this.h[4],_=this.h[5],p=this.h[6],m=this.h[7],S=this.h[8],W=this.h[9],w=this.h[10],z=this.h[11],H=this.h[12],A=this.h[13],L=this.h[14],j=this.h[15];i(this.k.length===r.length);for(var C=0;C<r.length;C+=2){var D=L,E=j,F=x(S,W),G=B(S,W),I=g(S,W,w,z,H,A),J=k(S,W,w,z,H,A),K=this.k[C],M=this.k[C+1],N=r[C],O=r[C+1],P=l(D,E,F,G,I,J,K,M,N,O),Q=v(D,E,F,G,I,J,K,M,N,O);D=b(n,s),E=q(n,s),F=d(n,s,e,c,f,_),G=y(n,s,e,c,f,_);var R=o(D,E,F,G),T=a(D,E,F,G);L=H,j=A,H=w,A=z,w=S,z=W,S=o(p,m,P,Q),W=a(m,m,P,Q),p=f,m=_,f=e,_=c,e=n,c=s,n=o(P,Q,R,T),s=a(P,Q,R,T)}u(this.h,0,n,s),u(this.h,2,e,c),u(this.h,4,f,_),u(this.h,6,p,m),u(this.h,8,S,W),u(this.h,10,w,z),u(this.h,12,H,A),u(this.h,14,L,j)},m.prototype._digest=function(h){return"hex"===h?t.toHex32(this.h,"big"):t.split32(this.h,"big")};
},{"../utils":"CycQ","../common":"WWIA","minimalistic-assert":"ITMc"}],"yIv9":[function(require,module,exports) {
"use strict";var t=require("../utils"),i=require("./512");function e(){if(!(this instanceof e))return new e;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}t.inherits(e,i),module.exports=e,e.blockSize=1024,e.outSize=384,e.hmacStrength=192,e.padLength=128,e.prototype._digest=function(i){return"hex"===i?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")};
},{"../utils":"CycQ","./512":"OTyr"}],"xJ3K":[function(require,module,exports) {
"use strict";exports.sha1=require("./sha/1"),exports.sha224=require("./sha/224"),exports.sha256=require("./sha/256"),exports.sha384=require("./sha/384"),exports.sha512=require("./sha/512");
},{"./sha/1":"thZo","./sha/224":"pklH","./sha/256":"exPG","./sha/384":"yIv9","./sha/512":"OTyr"}],"awWW":[function(require,module,exports) {
"use strict";var t=require("./utils"),h=require("./common"),i=t.rotl32,s=t.sum32,e=t.sum32_3,r=t.sum32_4,n=h.BlockHash;function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(t,h,i,s){return t<=15?h^i^s:t<=31?h&i|~h&s:t<=47?(h|~i)^s:t<=63?h&s|i&~s:h^(i|~s)}function c(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function l(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}t.inherits(o,n),exports.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(t,h){for(var n=this.h[0],o=this.h[1],d=this.h[2],v=this.h[3],_=this.h[4],g=n,x=o,S=d,k=v,q=_,y=0;y<80;y++){var z=s(i(r(n,u(y,o,d,v),t[a[y]+h],c(y)),p[y]),_);n=_,_=v,v=i(d,10),d=o,o=z,z=s(i(r(g,u(79-y,x,S,k),t[f[y]+h],l(y)),m[y]),q),g=q,q=k,k=i(S,10),S=x,x=z}z=e(this.h[1],d,k),this.h[1]=e(this.h[2],v,q),this.h[2]=e(this.h[3],_,g),this.h[3]=e(this.h[4],n,x),this.h[4]=e(this.h[0],o,S),this.h[0]=z},o.prototype._digest=function(h){return"hex"===h?t.toHex32(this.h,"little"):t.split32(this.h,"little")};var a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];
},{"./utils":"CycQ","./common":"WWIA"}],"St7v":[function(require,module,exports) {
"use strict";var t=require("./utils"),i=require("minimalistic-assert");function e(i,s,n){if(!(this instanceof e))return new e(i,s,n);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(s,n))}module.exports=e,e.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},e.prototype.update=function(t,i){return this.inner.update(t,i),this},e.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};
},{"./utils":"CycQ","minimalistic-assert":"ITMc"}],"LCcS":[function(require,module,exports) {
var h=exports;h.utils=require("./hash/utils"),h.common=require("./hash/common"),h.sha=require("./hash/sha"),h.ripemd=require("./hash/ripemd"),h.hmac=require("./hash/hmac"),h.sha1=h.sha.sha1,h.sha256=h.sha.sha256,h.sha224=h.sha.sha224,h.sha384=h.sha.sha384,h.sha512=h.sha.sha512,h.ripemd160=h.ripemd.ripemd160;
},{"./hash/utils":"CycQ","./hash/common":"WWIA","./hash/sha":"xJ3K","./hash/ripemd":"awWW","./hash/hmac":"St7v"}],"r8c7":[function(require,module,exports) {
module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};
},{}],"TjNs":[function(require,module,exports) {
"use strict";var f,e=exports,a=require("hash.js"),b=require("./curve"),c=require("./utils"),d=c.assert;function r(f){"short"===f.type?this.curve=new b.short(f):"edwards"===f.type?this.curve=new b.edwards(f):this.curve=new b.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,d(this.g.validate(),"Invalid curve"),d(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(f,a){Object.defineProperty(e,f,{configurable:!0,enumerable:!0,get:function(){var b=new r(a);return Object.defineProperty(e,f,{configurable:!0,enumerable:!0,value:b}),b}})}e.PresetCurve=r,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{f=require("./precomputed/secp256k1")}catch(t){f=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]});
},{"hash.js":"LCcS","./curve":"NpO4","./utils":"iSWW","./precomputed/secp256k1":"r8c7"}],"EJKg":[function(require,module,exports) {
"use strict";var t=require("hash.js"),e=require("minimalistic-crypto-utils"),i=require("minimalistic-assert");function s(t){if(!(this instanceof s))return new s(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var h=e.toArray(t.entropy,t.entropyEnc||"hex"),r=e.toArray(t.nonce,t.nonceEnc||"hex"),n=e.toArray(t.pers,t.persEnc||"hex");i(h.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(h,r,n)}module.exports=s,s.prototype._init=function(t,e,i){var s=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},s.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(t,s,h,r){"string"!=typeof s&&(r=h,h=s,s=null),t=e.toArray(t,s),h=e.toArray(h,r),i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(h||[])),this._reseed=1},s.prototype.generate=function(t,i,s,h){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof i&&(h=s,s=i,i=null),s&&(s=e.toArray(s,h||"hex"),this._update(s));for(var r=[];r.length<t;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var n=r.slice(0,t);return this._update(s),this._reseed++,e.encode(n,i)};
},{"hash.js":"LCcS","minimalistic-crypto-utils":"vCVL","minimalistic-assert":"ITMc"}],"bL9c":[function(require,module,exports) {
"use strict";var t=require("bn.js"),i=require("../utils"),e=i.assert;function r(t,i){this.ec=t,this.priv=null,this.pub=null,i.priv&&this._importPrivate(i.priv,i.privEnc),i.pub&&this._importPublic(i.pub,i.pubEnc)}module.exports=r,r.fromPublic=function(t,i,e){return i instanceof r?i:new r(t,{pub:i,pubEnc:e})},r.fromPrivate=function(t,i,e){return i instanceof r?i:new r(t,{priv:i,privEnc:e})},r.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(t,i){return"string"==typeof t&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub},r.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(i,e){this.priv=new t(i,e||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(t,i){if(t.x||t.y)return"mont"===this.ec.curve.type?e(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||e(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,i)},r.prototype.derive=function(t){return t.validate()||e(t.validate(),"public point not validated"),t.mul(this.priv).getX()},r.prototype.sign=function(t,i,e){return this.ec.sign(t,this,i,e)},r.prototype.verify=function(t,i){return this.ec.verify(t,i,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};
},{"bn.js":"XRJY","../utils":"iSWW"}],"UQ1d":[function(require,module,exports) {
"use strict";var r=require("bn.js"),e=require("../utils"),t=e.assert;function n(e,a){if(e instanceof n)return e;this._importDER(e,a)||(t(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function i(r,e){var t=r[e.place++];if(!(128&t))return t;var n=15&t;if(0===n||n>4)return!1;for(var a=0,i=0,c=e.place;i<n;i++,c++)a<<=8,a|=r[c],a>>>=0;return!(a<=127)&&(e.place=c,a)}function c(r){for(var e=0,t=r.length-1;!r[e]&&!(128&r[e+1])&&e<t;)e++;return 0===e?r:r.slice(e)}function o(r,e){if(e<128)r.push(e);else{var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(128|t);--t;)r.push(e>>>(t<<3)&255);r.push(e)}}module.exports=n,n.prototype._importDER=function(t,n){t=e.toArray(t,n);var c=new a;if(48!==t[c.place++])return!1;var o=i(t,c);if(!1===o)return!1;if(o+c.place!==t.length)return!1;if(2!==t[c.place++])return!1;var u=i(t,c);if(!1===u)return!1;var s=t.slice(c.place,u+c.place);if(c.place+=u,2!==t[c.place++])return!1;var l=i(t,c);if(!1===l)return!1;if(t.length!==l+c.place)return!1;var f=t.slice(c.place,l+c.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===f[0]){if(!(128&f[1]))return!1;f=f.slice(1)}return this.r=new r(s),this.s=new r(f),this.recoveryParam=null,!0},n.prototype.toDER=function(r){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=c(t),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var a=[2];o(a,t.length),(a=a.concat(t)).push(2),o(a,n.length);var i=a.concat(n),u=[48];return o(u,i.length),u=u.concat(i),e.encode(u,r)};
},{"bn.js":"XRJY","../utils":"iSWW"}],"y3oE":[function(require,module,exports) {
"use strict";var e=require("bn.js"),r=require("hmac-drbg"),t=require("../utils"),n=require("../curves"),i=require("brorand"),s=t.assert,o=require("./key"),u=require("./signature");function h(e){if(!(this instanceof h))return new h(e);"string"==typeof e&&(s(Object.prototype.hasOwnProperty.call(n,e),"Unknown curve "+e),e=n[e]),e instanceof n.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}module.exports=h,h.prototype.keyPair=function(e){return new o(this,e)},h.prototype.keyFromPrivate=function(e,r){return o.fromPrivate(this,e,r)},h.prototype.keyFromPublic=function(e,r){return o.fromPublic(this,e,r)},h.prototype.genKeyPair=function(t){t||(t={});for(var n=new r({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||i(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),s=this.n.byteLength(),o=this.n.sub(new e(2));;){var u=new e(n.generate(s));if(!(u.cmp(o)>0))return u.iaddn(1),this.keyFromPrivate(u)}},h.prototype._truncateToN=function(e,r){var t=8*e.byteLength()-this.n.bitLength();return t>0&&(e=e.ushrn(t)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(t,n,i,s){"object"==typeof i&&(s=i,i=null),s||(s={}),n=this.keyFromPrivate(n,i),t=this._truncateToN(new e(t,16));for(var o=this.n.byteLength(),h=n.getPrivate().toArray("be",o),c=t.toArray("be",o),a=new r({hash:this.hash,entropy:h,nonce:c,pers:s.pers,persEnc:s.persEnc||"utf8"}),p=this.n.sub(new e(1)),m=0;;m++){var v=s.k?s.k(m):new e(a.generate(this.n.byteLength()));if(!((v=this._truncateToN(v,!0)).cmpn(1)<=0||v.cmp(p)>=0)){var y=this.g.mul(v);if(!y.isInfinity()){var f=y.getX(),g=f.umod(this.n);if(0!==g.cmpn(0)){var d=v.invm(this.n).mul(g.mul(n.getPrivate()).iadd(t));if(0!==(d=d.umod(this.n)).cmpn(0)){var l=(y.getY().isOdd()?1:0)|(0!==f.cmp(g)?2:0);return s.canonical&&d.cmp(this.nh)>0&&(d=this.n.sub(d),l^=1),new u({r:g,s:d,recoveryParam:l})}}}}}},h.prototype.verify=function(r,t,n,i){r=this._truncateToN(new e(r,16)),n=this.keyFromPublic(n,i);var s=(t=new u(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var h,c=o.invm(this.n),a=c.mul(r).umod(this.n),p=c.mul(s).umod(this.n);return this.curve._maxwellTrick?!(h=this.g.jmulAdd(a,n.getPublic(),p)).isInfinity()&&h.eqXToP(s):!(h=this.g.mulAdd(a,n.getPublic(),p)).isInfinity()&&0===h.getX().umod(this.n).cmp(s)},h.prototype.recoverPubKey=function(r,t,n,i){s((3&n)===n,"The recovery param is more than two bits"),t=new u(t,i);var o=this.n,h=new e(r),c=t.r,a=t.s,p=1&n,m=n>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");c=m?this.curve.pointFromX(c.add(this.curve.n),p):this.curve.pointFromX(c,p);var v=t.r.invm(o),y=o.sub(h).mul(v).umod(o),f=a.mul(v).umod(o);return this.g.mulAdd(y,c,f)},h.prototype.getKeyRecoveryParam=function(e,r,t,n){if(null!==(r=new u(r,n)).recoveryParam)return r.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,r,i)}catch(e){continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};
},{"bn.js":"XRJY","hmac-drbg":"EJKg","../utils":"iSWW","../curves":"TjNs","brorand":"FKeL","./key":"bL9c","./signature":"UQ1d"}],"R05D":[function(require,module,exports) {
"use strict";var t=require("../utils"),e=t.assert,s=t.parseBytes,i=t.cachedProperty;function n(t,e){this.eddsa=t,this._secret=s(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=s(e.pub)}n.fromPublic=function(t,e){return e instanceof n?e:new n(t,{pub:e})},n.fromSecret=function(t,e){return e instanceof n?e:new n(t,{secret:e})},n.prototype.secret=function(){return this._secret},i(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(n,"privBytes",function(){var t=this.eddsa,e=this.hash(),s=t.encodingLength-1,i=e.slice(0,t.encodingLength);return i[0]&=248,i[s]&=127,i[s]|=64,i}),i(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(t){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},n.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},n.prototype.getSecret=function(s){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),s)},n.prototype.getPublic=function(e){return t.encode(this.pubBytes(),e)},module.exports=n;
},{"../utils":"iSWW"}],"P3vj":[function(require,module,exports) {
"use strict";var e=require("bn.js"),t=require("../utils"),n=t.assert,o=t.cachedProperty,d=t.parseBytes;function i(t,o){this.eddsa=t,"object"!=typeof o&&(o=d(o)),Array.isArray(o)&&(o={R:o.slice(0,t.encodingLength),S:o.slice(t.encodingLength)}),n(o.R&&o.S,"Signature without R or S"),t.isPoint(o.R)&&(this._R=o.R),o.S instanceof e&&(this._S=o.S),this._Rencoded=Array.isArray(o.R)?o.R:o.Rencoded,this._Sencoded=Array.isArray(o.S)?o.S:o.Sencoded}o(i,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(i,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(i,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(i,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),i.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},i.prototype.toHex=function(){return t.encode(this.toBytes(),"hex").toUpperCase()},module.exports=i;
},{"bn.js":"XRJY","../utils":"iSWW"}],"plny":[function(require,module,exports) {
"use strict";var t=require("hash.js"),e=require("../curves"),n=require("../utils"),r=n.assert,i=n.parseBytes,o=require("./key"),s=require("./signature");function u(n){if(r("ed25519"===n,"only tested with ed25519 so far"),!(this instanceof u))return new u(n);n=e[n].curve,this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=t.sha512}module.exports=u,u.prototype.sign=function(t,e){t=i(t);var n=this.keyFromSecret(e),r=this.hashInt(n.messagePrefix(),t),o=this.g.mul(r),s=this.encodePoint(o),u=this.hashInt(s,n.pubBytes(),t).mul(n.priv()),h=r.add(u).umod(this.curve.n);return this.makeSignature({R:o,S:h,Rencoded:s})},u.prototype.verify=function(t,e,n){t=i(t),e=this.makeSignature(e);var r=this.keyFromPublic(n),o=this.hashInt(e.Rencoded(),r.pubBytes(),t),s=this.g.mul(e.S());return e.R().add(r.pub().mul(o)).eq(s)},u.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return n.intFromLE(t.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(t){return o.fromPublic(this,t)},u.prototype.keyFromSecret=function(t){return o.fromSecret(this,t)},u.prototype.makeSignature=function(t){return t instanceof s?t:new s(this,t)},u.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},u.prototype.decodePoint=function(t){var e=(t=n.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),i=0!=(128&t[e]),o=n.intFromLE(r);return this.curve.pointFromY(o,i)},u.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(t){return n.intFromLE(t)},u.prototype.isPoint=function(t){return t instanceof this.pointClass};
},{"hash.js":"LCcS","../curves":"TjNs","../utils":"iSWW","./key":"R05D","./signature":"P3vj"}],"sRna":[function(require,module,exports) {
"use strict";var e=exports;e.version=require("../package.json").version,e.utils=require("./elliptic/utils"),e.rand=require("brorand"),e.curve=require("./elliptic/curve"),e.curves=require("./elliptic/curves"),e.ec=require("./elliptic/ec"),e.eddsa=require("./elliptic/eddsa");
},{"../package.json":"ZtFN","./elliptic/utils":"iSWW","brorand":"FKeL","./elliptic/curve":"NpO4","./elliptic/curves":"TjNs","./elliptic/ec":"y3oE","./elliptic/eddsa":"plny"}],"o7gO":[function(require,module,exports) {

var process = require("process");
var e,r=require("process"),t=require("buffer"),n=t.Buffer,o={};for(e in t)t.hasOwnProperty(e)&&"SlowBuffer"!==e&&"Buffer"!==e&&(o[e]=t[e]);var f=o.Buffer={};for(e in n)n.hasOwnProperty(e)&&"allocUnsafe"!==e&&"allocUnsafeSlow"!==e&&(f[e]=n[e]);if(o.Buffer.prototype=n.prototype,f.from&&f.from!==Uint8Array.from||(f.from=function(e,r,t){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return n(e,r,t)}),f.alloc||(f.alloc=function(e,r,t){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var o=n(e);return r&&0!==r.length?"string"==typeof t?o.fill(r,t):o.fill(r):o.fill(0),o}),!o.kStringMaxLength)try{o.kStringMaxLength=r.binding("buffer").kStringMaxLength}catch(i){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),module.exports=o;
},{"buffer":"VjIL","process":"rH1J"}],"CHqz":[function(require,module,exports) {
"use strict";const t=require("inherits");function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function e(t,r){this.path=t,this.rethrow(r)}exports.Reporter=r,r.prototype.isError=function(t){return t instanceof e},r.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},r.prototype.restore=function(t){const r=this._reporterState;r.obj=t.obj,r.path=r.path.slice(0,t.pathLen)},r.prototype.enterKey=function(t){return this._reporterState.path.push(t)},r.prototype.exitKey=function(t){const r=this._reporterState;r.path=r.path.slice(0,t-1)},r.prototype.leaveKey=function(t,r,e){const o=this._reporterState;this.exitKey(t),null!==o.obj&&(o.obj[r]=e)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){const t=this._reporterState,r=t.obj;return t.obj={},r},r.prototype.leaveObject=function(t){const r=this._reporterState,e=r.obj;return r.obj=t,e},r.prototype.error=function(t){let r;const o=this._reporterState,n=t instanceof e;if(r=n?t:new e(o.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!o.options.partial)throw r;return n||o.errors.push(r),r},r.prototype.wrapResult=function(t){const r=this._reporterState;return r.options.partial?{result:this.isError(t)?null:t,errors:r.errors}:t},t(e,Error),e.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,e),!this.stack)try{throw new Error(this.message)}catch(r){this.stack=r.stack}return this};
},{"inherits":"UAgo"}],"yldK":[function(require,module,exports) {

"use strict";const e=require("inherits"),t=require("../base/reporter").Reporter,r=require("safer-buffer").Buffer;function o(e,o){t.call(this,o),r.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function f(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return f.isEncoderBuffer(e)||(e=new f(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=r.byteLength(e);else{if(!r.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}e(o,t),exports.DecoderBuffer=o,o.isDecoderBuffer=function(e){if(e instanceof o)return!0;return"object"==typeof e&&r.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},o.prototype.save=function(){return{offset:this.offset,reporter:t.prototype.save.call(this)}},o.prototype.restore=function(e){const r=new o(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,t.prototype.restore.call(this,e.reporter),r},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},o.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const r=new o(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},o.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},exports.EncoderBuffer=f,f.isEncoderBuffer=function(e){if(e instanceof f)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},f.prototype.join=function(e,t){return e||(e=r.alloc(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):r.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)};
},{"inherits":"UAgo","../base/reporter":"CHqz","safer-buffer":"o7gO"}],"wXzP":[function(require,module,exports) {
"use strict";const e=require("../base/reporter").Reporter,t=require("../base/buffer").EncoderBuffer,n=require("../base/buffer").DecoderBuffer,i=require("minimalistic-assert"),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],r=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o),s=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function c(e,t,n){const i={};this._baseState=i,i.name=n,i.enc=e,i.parent=t||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}module.exports=c;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const e=this._baseState,t={};l.forEach(function(n){t[n]=e[n]});const n=new this.constructor(t.parent);return n._baseState=t,n},c.prototype._wrap=function(){const e=this._baseState;r.forEach(function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}},this)},c.prototype._init=function(e){const t=this._baseState;i(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),i.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){const t=this._baseState,n=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==n.length&&(i(null===t.children),t.children=n,n.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(i(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach(function(n){n==(0|n)&&(n|=0);const i=e[n];t[i]=n}),t}))},s.forEach(function(e){c.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),o.forEach(function(e){c.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return i(null===t.tag),t.tag=e,this._useArgs(n),this}}),c.prototype.use=function(e){i(e);const t=this._baseState;return i(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){const t=this._baseState;return i(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){const t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){const t=this._baseState;return i(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){const t=this._baseState;return i(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){const t=this._baseState;return i(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},c.prototype.contains=function(e){const t=this._baseState;return i(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){const i=this._baseState;if(null===i.parent)return e.wrapResult(i.children[0]._decode(e,t));let o,r=i.default,s=!0,c=null;if(null!==i.key&&(c=e.enterKey(i.key)),i.optional){let n=null;if(null!==i.explicit?n=i.explicit:null!==i.implicit?n=i.implicit:null!==i.tag&&(n=i.tag),null!==n||i.any){if(s=this._peekTag(e,n,i.any),e.isError(s))return s}else{const n=e.save();try{null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t),s=!0}catch(l){s=!1}e.restore(n)}}if(i.obj&&s&&(o=e.enterObject()),s){if(null!==i.explicit){const t=this._decodeTag(e,i.explicit);if(e.isError(t))return t;e=t}const o=e.offset;if(null===i.use&&null===i.choice){let t;i.any&&(t=e.save());const n=this._decodeTag(e,null!==i.implicit?i.implicit:i.tag,i.any);if(e.isError(n))return n;i.any?r=e.raw(t):e=n}if(t&&t.track&&null!==i.tag&&t.track(e.path(),o,e.length,"tagged"),t&&t.track&&null!==i.tag&&t.track(e.path(),e.offset,e.length,"content"),i.any||(r=null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t)),e.isError(r))return r;if(i.any||null!==i.choice||null===i.children||i.children.forEach(function(n){n._decode(e,t)}),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){const o=new n(r);r=this._getUse(i.contains,e._reporterState.obj)._decode(o,t)}}return i.obj&&s&&(r=e.leaveObject(o)),null===i.key||null===r&&!0!==s?null!==c&&e.exitKey(c):e.leaveKey(c,i.key,r),r},c.prototype._decodeGeneric=function(e,t,n){const i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],n):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),i(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(e,t){const n=this._baseState;let i=null,o=!1;return Object.keys(n.choice).some(function(r){const s=e.save(),c=n.choice[r];try{const n=c._decode(e,t);if(e.isError(n))return!1;i={type:r,value:n},o=!0}catch(l){return e.restore(s),!1}return!0},this),o?i:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new t(e,this.reporter)},c.prototype._encode=function(e,t,n){const i=this._baseState;if(null!==i.default&&i.default===e)return;const o=this._encodeValue(e,t,n);return void 0===o||this._skipDefault(o,t,n)?void 0:o},c.prototype._encodeValue=function(t,n,i){const o=this._baseState;if(null===o.parent)return o.children[0]._encode(t,n||new e);let r=null;if(this.reporter=n,o.optional&&void 0===t){if(null===o.default)return;t=o.default}let s=null,c=!1;if(o.any)r=this._createEncoderBuffer(t);else if(o.choice)r=this._encodeChoice(t,n);else if(o.contains)s=this._getUse(o.contains,i)._encode(t,n),c=!0;else if(o.children)s=o.children.map(function(e){if("null_"===e._baseState.tag)return e._encode(null,n,t);if(null===e._baseState.key)return n.error("Child should have a key");const i=n.enterKey(e._baseState.key);if("object"!=typeof t)return n.error("Child expected, but input is not object");const o=e._encode(t[e._baseState.key],n,t);return n.leaveKey(i),o},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===o.tag||"setof"===o.tag){if(!o.args||1!==o.args.length)return n.error("Too many args for : "+o.tag);if(!Array.isArray(t))return n.error("seqof/setof, but data is not Array");const e=this.clone();e._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(e){const i=this._baseState;return this._getUse(i.args[0],t)._encode(e,n)},e))}else null!==o.use?r=this._getUse(o.use,i)._encode(t,n):(s=this._encodePrimitive(o.tag,t),c=!0);if(!o.any&&null===o.choice){const e=null!==o.implicit?o.implicit:o.tag,t=null===o.implicit?"universal":"context";null===e?null===o.use&&n.error("Tag could be omitted only for .use()"):null===o.use&&(r=this._encodeComposite(e,c,t,s))}return null!==o.explicit&&(r=this._encodeComposite(o.explicit,!1,"context",r)),r},c.prototype._encodeChoice=function(e,t){const n=this._baseState,o=n.choice[e.type];return o||i(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),o._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};
},{"../base/reporter":"CHqz","../base/buffer":"yldK","minimalistic-assert":"ITMc"}],"H07E":[function(require,module,exports) {
"use strict";function t(t){const s={};return Object.keys(t).forEach(function(e){(0|e)==e&&(e|=0);const r=t[e];s[r]=e}),s}exports.tagClass={0:"universal",1:"application",2:"context",3:"private"},exports.tagClassByName=t(exports.tagClass),exports.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},exports.tagByName=t(exports.tag);
},{}],"HCUw":[function(require,module,exports) {

"use strict";const e=require("inherits"),t=require("safer-buffer").Buffer,r=require("../base/node"),n=require("../constants/der");function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){r.call(this,"der",e)}function s(e){return e<10?"0"+e:e}function f(e,t,r,o){let i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),n.tagByName.hasOwnProperty(e))i=n.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return o.error("Unknown tag: "+e);i=e}return i>=31?o.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=n.tagClassByName[r||"universal"]<<6)}module.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},e(i,r),i.prototype._encodeComposite=function(e,r,n,o){const i=f(e,r,n,this.reporter);if(o.length<128){const e=t.alloc(2);return e[0]=i,e[1]=o.length,this._createEncoderBuffer([e,o])}let s=1;for(let t=o.length;t>=256;t>>=8)s++;const u=t.alloc(2+s);u[0]=i,u[1]=128|s;for(let t=1+s,f=o.length;f>0;t--,f>>=8)u[t]=255&f;return this._createEncoderBuffer([u,o])},i.prototype._encodeStr=function(e,r){if("bitstr"===r)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===r){const r=t.alloc(2*e.length);for(let t=0;t<e.length;t++)r.writeUInt16BE(e.charCodeAt(t),2*t);return this._createEncoderBuffer(r)}return"numstr"===r?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===r?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)?this._createEncoderBuffer(e):"objDesc"===r?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")},i.prototype._encodeObjid=function(e,r,n){if("string"==typeof e){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let o=0;for(let t=0;t<e.length;t++){let r=e[t];for(o++;r>=128;r>>=7)o++}const i=t.alloc(o);let s=i.length-1;for(let t=e.length-1;t>=0;t--){let r=e[t];for(i[s--]=127&r;(r>>=7)>0;)i[s--]=128|127&r}return this._createEncoderBuffer(i)},i.prototype._encodeTime=function(e,t){let r;const n=new Date(e);return"gentime"===t?r=[s(n.getUTCFullYear()),s(n.getUTCMonth()+1),s(n.getUTCDate()),s(n.getUTCHours()),s(n.getUTCMinutes()),s(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[s(n.getUTCFullYear()%100),s(n.getUTCMonth()+1),s(n.getUTCDate()),s(n.getUTCHours()),s(n.getUTCMinutes()),s(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},i.prototype._encodeNull=function(){return this._createEncoderBuffer("")},i.prototype._encodeInt=function(e,r){if("string"==typeof e){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if("number"!=typeof e&&!t.isBuffer(e)){const r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=t.from(r)}if(t.isBuffer(e)){let r=e.length;0===e.length&&r++;const n=t.alloc(r);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let t=e;t>=256;t>>=8)n++;const o=new Array(n);for(let t=o.length-1;t>=0;t--)o[t]=255&e,e>>=8;return 128&o[0]&&o.unshift(0),this._createEncoderBuffer(t.from(o))},i.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},i.prototype._skipDefault=function(e,t,r){const n=this._baseState;let o;if(null===n.default)return!1;const i=e.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,t,r).join()),i.length!==n.defaultBuffer.length)return!1;for(o=0;o<i.length;o++)if(i[o]!==n.defaultBuffer[o])return!1;return!0};
},{"inherits":"UAgo","safer-buffer":"o7gO","../base/node":"wXzP","../constants/der":"H07E"}],"O5Aj":[function(require,module,exports) {
"use strict";const e=require("inherits"),t=require("./der");function n(e){t.call(this,e),this.enc="pem"}e(n,t),module.exports=n,n.prototype.encode=function(e,n){const o=t.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+n.label+"-----"];for(let t=0;t<o.length;t+=64)r.push(o.slice(t,t+64));return r.push("-----END "+n.label+"-----"),r.join("\n")};
},{"inherits":"UAgo","./der":"HCUw"}],"FFCi":[function(require,module,exports) {
"use strict";const e=exports;e.der=require("./der"),e.pem=require("./pem");
},{"./der":"HCUw","./pem":"O5Aj"}],"tmM5":[function(require,module,exports) {
"use strict";const t=require("inherits"),r=require("bn.js"),e=require("../base/buffer").DecoderBuffer,i=require("../base/node"),o=require("../constants/der");function n(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new s,this.tree._init(t.body)}function s(t){i.call(this,"der",t)}function c(t,r){let e=t.readUInt8(r);if(t.isError(e))return e;const i=o.tagClass[e>>6],n=0==(32&e);if(31==(31&e)){let i=e;for(e=0;128==(128&i);){if(i=t.readUInt8(r),t.isError(i))return i;e<<=7,e|=127&i}}else e&=31;return{cls:i,primitive:n,tag:e,tagStr:o.tag[e]}}function u(t,r,e){let i=t.readUInt8(e);if(t.isError(i))return i;if(!r&&128===i)return null;if(0==(128&i))return i;const o=127&i;if(o>4)return t.error("length octect is too long");i=0;for(let n=0;n<o;n++){i<<=8;const r=t.readUInt8(e);if(t.isError(r))return r;i|=r}return i}module.exports=n,n.prototype.decode=function(t,r){return e.isDecoderBuffer(t)||(t=new e(t,r)),this.tree._decode(t,r)},t(s,i),s.prototype._peekTag=function(t,r,e){if(t.isEmpty())return!1;const i=t.save(),o=c(t,'Failed to peek tag: "'+r+'"');return t.isError(o)?o:(t.restore(i),o.tag===r||o.tagStr===r||o.tagStr+"of"===r||e)},s.prototype._decodeTag=function(t,r,e){const i=c(t,'Failed to decode tag of "'+r+'"');if(t.isError(i))return i;let o=u(t,i.primitive,'Failed to get length of "'+r+'"');if(t.isError(o))return o;if(!e&&i.tag!==r&&i.tagStr!==r&&i.tagStr+"of"!==r)return t.error('Failed to match tag: "'+r+'"');if(i.primitive||null!==o)return t.skip(o,'Failed to match body of: "'+r+'"');const n=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(o=t.offset-n.offset,t.restore(n),t.skip(o,'Failed to match body of: "'+r+'"'))},s.prototype._skipUntilEnd=function(t,r){for(;;){const e=c(t,r);if(t.isError(e))return e;const i=u(t,e.primitive,r);if(t.isError(i))return i;let o;if(o=e.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,r),t.isError(o))return o;if("end"===e.tagStr)break}},s.prototype._decodeList=function(t,r,e,i){const o=[];for(;!t.isEmpty();){const r=this._peekTag(t,"end");if(t.isError(r))return r;const n=e.decode(t,"der",i);if(t.isError(n)&&r)break;o.push(n)}return o},s.prototype._decodeStr=function(t,r){if("bitstr"===r){const r=t.readUInt8();return t.isError(r)?r:{unused:r,data:t.raw()}}if("bmpstr"===r){const r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let e="";for(let t=0;t<r.length/2;t++)e+=String.fromCharCode(r.readUInt16BE(2*t));return e}if("numstr"===r){const r=t.raw().toString("ascii");return this._isNumstr(r)?r:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===r)return t.raw();if("objDesc"===r)return t.raw();if("printstr"===r){const r=t.raw().toString("ascii");return this._isPrintstr(r)?r:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(r)?t.raw().toString():t.error("Decoding of string type: "+r+" unsupported")},s.prototype._decodeObjid=function(t,r,e){let i;const o=[];let n=0,s=0;for(;!t.isEmpty();)n<<=7,n|=127&(s=t.readUInt8()),0==(128&s)&&(o.push(n),n=0);128&s&&o.push(n);const c=o[0]/40|0,u=o[0]%40;if(i=e?o:[c,u].concat(o.slice(1)),r){let t=r[i.join(" ")];void 0===t&&(t=r[i.join(".")]),void 0!==t&&(i=t)}return i},s.prototype._decodeTime=function(t,r){const e=t.raw().toString();let i,o,n,s,c,u;if("gentime"===r)i=0|e.slice(0,4),o=0|e.slice(4,6),n=0|e.slice(6,8),s=0|e.slice(8,10),c=0|e.slice(10,12),u=0|e.slice(12,14);else{if("utctime"!==r)return t.error("Decoding "+r+" time is not supported yet");i=0|e.slice(0,2),o=0|e.slice(2,4),n=0|e.slice(4,6),s=0|e.slice(6,8),c=0|e.slice(8,10),u=0|e.slice(10,12),i=i<70?2e3+i:1900+i}return Date.UTC(i,o-1,n,s,c,u,0)},s.prototype._decodeNull=function(){return null},s.prototype._decodeBool=function(t){const r=t.readUInt8();return t.isError(r)?r:0!==r},s.prototype._decodeInt=function(t,e){const i=t.raw();let o=new r(i);return e&&(o=e[o.toString(10)]||o),o},s.prototype._use=function(t,r){return"function"==typeof t&&(t=t(r)),t._getDecoder("der").tree};
},{"inherits":"UAgo","bn.js":"XRJY","../base/buffer":"yldK","../base/node":"wXzP","../constants/der":"H07E"}],"rkp4":[function(require,module,exports) {

"use strict";const e=require("inherits"),r=require("safer-buffer").Buffer,t=require("./der");function o(e){t.call(this,e),this.enc="pem"}e(o,t),module.exports=o,o.prototype.decode=function(e,o){const i=e.toString().split(/[\r\n]+/g),n=o.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let c=-1,f=-1;for(let r=0;r<i.length;r++){const e=i[r].match(s);if(null!==e&&e[2]===n){if(-1!==c){if("END"!==e[1])break;f=r;break}if("BEGIN"!==e[1])break;c=r}}if(-1===c||-1===f)throw new Error("PEM section not found for: "+n);const l=i.slice(c+1,f).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const a=r.from(l,"base64");return t.prototype.decode.call(this,a,o)};
},{"inherits":"UAgo","safer-buffer":"o7gO","./der":"tmM5"}],"kqeB":[function(require,module,exports) {
"use strict";const e=exports;e.der=require("./der"),e.pem=require("./pem");
},{"./der":"tmM5","./pem":"rkp4"}],"cJl0":[function(require,module,exports) {
"use strict";const e=require("./encoders"),t=require("./decoders"),r=require("inherits"),n=exports;function o(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}n.define=function(e,t){return new o(e,t)},o.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return r(n,e),n.prototype._initNamed=function(t,r){e.call(this,t,r)},new n(this)},o.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(t[e])),this.decoders[e]},o.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},o.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(e[t])),this.encoders[t]},o.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)};
},{"./encoders":"FFCi","./decoders":"kqeB","inherits":"UAgo"}],"Z8TC":[function(require,module,exports) {
"use strict";const e=exports;e.Reporter=require("./reporter").Reporter,e.DecoderBuffer=require("./buffer").DecoderBuffer,e.EncoderBuffer=require("./buffer").EncoderBuffer,e.Node=require("./node");
},{"./reporter":"CHqz","./buffer":"yldK","./node":"wXzP"}],"lwx1":[function(require,module,exports) {
"use strict";const e=exports;e._reverse=function(e){const r={};return Object.keys(e).forEach(function(t){(0|t)==t&&(t|=0);const c=e[t];r[c]=t}),r},e.der=require("./der");
},{"./der":"H07E"}],"yTDE":[function(require,module,exports) {
"use strict";const e=exports;e.bignum=require("bn.js"),e.define=require("./asn1/api").define,e.base=require("./asn1/base"),e.constants=require("./asn1/constants"),e.decoders=require("./asn1/decoders"),e.encoders=require("./asn1/encoders");
},{"bn.js":"XRJY","./asn1/api":"cJl0","./asn1/base":"Z8TC","./asn1/constants":"lwx1","./asn1/decoders":"kqeB","./asn1/encoders":"FFCi"}],"Tzhf":[function(require,module,exports) {
"use strict";var e=require("asn1.js"),i=e.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),t=e.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),s=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),n=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}),o=e.define("RelativeDistinguishedName",function(){this.setof(t)}),u=e.define("RDNSequence",function(){this.seqof(o)}),h=e.define("Name",function(){this.choice({rdnSequence:this.use(u)})}),c=e.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),r=e.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=e.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(h),this.key("validity").use(c),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(n),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(r).optional())}),y=e.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())});module.exports=y;
},{"asn1.js":"yTDE"}],"j6sC":[function(require,module,exports) {
"use strict";var e=require("asn1.js");exports.certificate=require("./certificate");var i=e.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});exports.RSAPrivateKey=i;var t=e.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});exports.RSAPublicKey=t;var s=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())});exports.PublicKey=s;var n=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),o=e.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())});exports.PrivateKey=o;var r=e.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});exports.EncryptedPrivateKey=r;var y=e.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});exports.DSAPrivateKey=y,exports.DSAparam=e.define("DSAparam",function(){this.int()});var h=e.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(a),this.key("publicKey").optional().explicit(1).bitstr())});exports.ECPrivateKey=h;var a=e.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});exports.signature=e.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});
},{"asn1.js":"yTDE","./certificate":"Tzhf"}],"rwGH":[function(require,module,exports) {
module.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};
},{}],"rW1N":[function(require,module,exports) {

var e=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,t=require("evp_bytestokey"),n=require("browserify-aes"),f=require("safe-buffer").Buffer;module.exports=function(s,E){var c,o=s.toString(),i=o.match(e);if(i){var u="aes"+i[1],m=f.from(i[2],"hex"),p=f.from(i[3].replace(/[\r\n]/g,""),"base64"),I=t(E,m.slice(0,8),parseInt(i[1],10)).key,h=[],C=n.createDecipheriv(u,I,m);h.push(C.update(p)),h.push(C.final()),c=f.concat(h)}else{var l=o.match(a);c=f.from(l[2].replace(/[\r\n]/g,""),"base64")}return{tag:o.match(r)[1],data:c}};
},{"evp_bytestokey":"vnlH","browserify-aes":"nysh","safe-buffer":"udfh"}],"DVcf":[function(require,module,exports) {

var e=require("./asn1"),r=require("./aesid.json"),a=require("./fixProc"),t=require("browserify-aes"),i=require("pbkdf2"),c=require("safe-buffer").Buffer;function d(r){var t;"object"!=typeof r||c.isBuffer(r)||(t=r.passphrase,r=r.key),"string"==typeof r&&(r=c.from(r));var i,d,u=a(r,t),o=u.tag,n=u.data;switch(o){case"CERTIFICATE":d=e.certificate.decode(n,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(d||(d=e.PublicKey.decode(n,"der")),i=d.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case"1.2.840.10040.4.1":return d.algorithm.params.pub_key=e.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":n=s(n=e.EncryptedPrivateKey.decode(n,"der"),t);case"PRIVATE KEY":switch(i=(d=e.PrivateKey.decode(n,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPrivateKey.decode(d.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:e.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return d.algorithm.params.priv_key=e.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return e.RSAPublicKey.decode(n,"der");case"RSA PRIVATE KEY":return e.RSAPrivateKey.decode(n,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:e.DSAPrivateKey.decode(n,"der")};case"EC PRIVATE KEY":return{curve:(n=e.ECPrivateKey.decode(n,"der")).parameters.value,privateKey:n.privateKey};default:throw new Error("unknown key type "+o)}}function s(e,a){var d=e.algorithm.decrypt.kde.kdeparams.salt,s=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),u=r[e.algorithm.decrypt.cipher.algo.join(".")],o=e.algorithm.decrypt.cipher.iv,n=e.subjectPrivateKey,p=parseInt(u.split("-")[1],10)/8,y=i.pbkdf2Sync(a,d,s,p,"sha1"),K=t.createDecipheriv(u,y,o),l=[];return l.push(K.update(n)),l.push(K.final()),c.concat(l)}module.exports=d,d.signature=e.signature;
},{"./asn1":"j6sC","./aesid.json":"rwGH","./fixProc":"rW1N","browserify-aes":"nysh","pbkdf2":"zhze","safe-buffer":"udfh"}],"a7iK":[function(require,module,exports) {
module.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};
},{}],"TSmT":[function(require,module,exports) {

var e=require("safe-buffer").Buffer,r=require("create-hmac"),t=require("browserify-rsa"),n=require("elliptic").ec,a=require("bn.js"),o=require("parse-asn1"),u=require("./curves.json");function i(r,n,a,u,i){var p=o(n);if(p.curve){if("ecdsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong private key type");return c(r,p)}if("dsa"===p.type){if("dsa"!==u)throw new Error("wrong private key type");return d(r,p,a)}if("rsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong private key type");r=e.concat([i,r]);for(var f=p.modulus.byteLength(),s=[0,1];r.length+s.length+1<f;)s.push(255);s.push(0);for(var l=-1;++l<r.length;)s.push(r[l]);return t(s,p)}function c(r,t){var a=u[t.curve.join(".")];if(!a)throw new Error("unknown curve "+t.curve.join("."));var o=new n(a).keyFromPrivate(t.privateKey).sign(r);return e.from(o.toDER())}function d(e,r,t){for(var n,o=r.params.priv_key,u=r.params.p,i=r.params.q,c=r.params.g,d=new a(0),l=s(e,i).mod(i),h=!1,m=f(o,i,e,t);!1===h;)d=v(c,n=g(i,m,t),u,i),0===(h=n.invm(i).imul(l.add(o.mul(d))).mod(i)).cmpn(0)&&(h=!1,d=new a(0));return p(d,h)}function p(r,t){r=r.toArray(),t=t.toArray(),128&r[0]&&(r=[0].concat(r)),128&t[0]&&(t=[0].concat(t));var n=[48,r.length+t.length+4,2,r.length];return n=n.concat(r,[2,t.length],t),e.from(n)}function f(t,n,a,o){if((t=e.from(t.toArray())).length<n.byteLength()){var u=e.alloc(n.byteLength()-t.length);t=e.concat([u,t])}var i=a.length,c=l(a,n),d=e.alloc(i);d.fill(1);var p=e.alloc(i);return p=r(o,p).update(d).update(e.from([0])).update(t).update(c).digest(),d=r(o,p).update(d).digest(),{k:p=r(o,p).update(d).update(e.from([1])).update(t).update(c).digest(),v:d=r(o,p).update(d).digest()}}function s(e,r){var t=new a(e),n=(e.length<<3)-r.bitLength();return n>0&&t.ishrn(n),t}function l(r,t){r=(r=s(r,t)).mod(t);var n=e.from(r.toArray());if(n.length<t.byteLength()){var a=e.alloc(t.byteLength()-n.length);n=e.concat([a,n])}return n}function g(t,n,a){var o,u;do{for(o=e.alloc(0);8*o.length<t.bitLength();)n.v=r(a,n.k).update(n.v).digest(),o=e.concat([o,n.v]);u=s(o,t),n.k=r(a,n.k).update(n.v).update(e.from([0])).digest(),n.v=r(a,n.k).update(n.v).digest()}while(-1!==u.cmp(t));return u}function v(e,r,t,n){return e.toRed(a.mont(t)).redPow(r).fromRed().mod(n)}module.exports=i,module.exports.getKey=f,module.exports.makeKey=g;
},{"safe-buffer":"udfh","create-hmac":"LZdq","browserify-rsa":"yANG","elliptic":"sRna","bn.js":"ur6d","parse-asn1":"DVcf","./curves.json":"a7iK"}],"p3DA":[function(require,module,exports) {

var r=require("safe-buffer").Buffer,e=require("bn.js"),n=require("elliptic").ec,o=require("parse-asn1"),t=require("./curves.json");function a(n,t,a,d,f){var c=o(a);if("ec"===c.type){if("ecdsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong public key type");return u(n,t,c)}if("dsa"===c.type){if("dsa"!==d)throw new Error("wrong public key type");return i(n,t,c)}if("rsa"!==d&&"ecdsa/rsa"!==d)throw new Error("wrong public key type");t=r.concat([f,t]);for(var s=c.modulus.byteLength(),m=[1],l=0;t.length+m.length+2<s;)m.push(255),l++;m.push(0);for(var w=-1;++w<t.length;)m.push(t[w]);m=r.from(m);var p=e.mont(c.modulus);n=(n=new e(n).toRed(p)).redPow(new e(c.publicExponent)),n=r.from(n.fromRed().toArray());var h=l<8?1:0;for(s=Math.min(n.length,m.length),n.length!==m.length&&(h=1),w=-1;++w<s;)h|=n[w]^m[w];return 0===h}function u(r,e,o){var a=t[o.data.algorithm.curve.join(".")];if(!a)throw new Error("unknown curve "+o.data.algorithm.curve.join("."));var u=new n(a),i=o.data.subjectPrivateKey.data;return u.verify(e,r,i)}function i(r,n,t){var a=t.data.p,u=t.data.q,i=t.data.g,f=t.data.pub_key,c=o.signature.decode(r,"der"),s=c.s,m=c.r;d(s,u),d(m,u);var l=e.mont(a),w=s.invm(u);return 0===i.toRed(l).redPow(new e(n).mul(w).mod(u)).fromRed().mul(f.toRed(l).redPow(m.mul(w).mod(u)).fromRed()).mod(a).mod(u).cmp(m)}function d(r,e){if(r.cmpn(0)<=0)throw new Error("invalid sig");if(r.cmp(e)>=e)throw new Error("invalid sig")}module.exports=a;
},{"safe-buffer":"udfh","bn.js":"ur6d","elliptic":"sRna","parse-asn1":"DVcf","./curves.json":"a7iK"}],"Uozs":[function(require,module,exports) {

var t=require("safe-buffer").Buffer,e=require("create-hash"),i=require("readable-stream"),r=require("inherits"),s=require("./sign"),h=require("./verify"),n=require("./algorithms.json");function a(t){i.Writable.call(this);var r=n[t];if(!r)throw new Error("Unknown message digest");this._hashType=r.hash,this._hash=e(r.hash),this._tag=r.id,this._signType=r.sign}function o(t){i.Writable.call(this);var r=n[t];if(!r)throw new Error("Unknown message digest");this._hash=e(r.hash),this._tag=r.id,this._signType=r.sign}function u(t){return new a(t)}function f(t){return new o(t)}Object.keys(n).forEach(function(e){n[e].id=t.from(n[e].id,"hex"),n[e.toLowerCase()]=n[e]}),r(a,i.Writable),a.prototype._write=function(t,e,i){this._hash.update(t),i()},a.prototype.update=function(e,i){return"string"==typeof e&&(e=t.from(e,i)),this._hash.update(e),this},a.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=s(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},r(o,i.Writable),o.prototype._write=function(t,e,i){this._hash.update(t),i()},o.prototype.update=function(e,i){return"string"==typeof e&&(e=t.from(e,i)),this._hash.update(e),this},o.prototype.verify=function(e,i,r){"string"==typeof i&&(i=t.from(i,r)),this.end();var s=this._hash.digest();return h(i,s,e,this._signType,this._tag)},module.exports={Sign:u,Verify:f,createSign:u,createVerify:f};
},{"safe-buffer":"udfh","create-hash":"QR3Y","readable-stream":"mI0B","inherits":"UAgo","./sign":"TSmT","./verify":"p3DA","./algorithms.json":"Z1R8"}],"Sxaw":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("elliptic"),r=require("bn.js");module.exports=function(e){return new n(e)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function n(e){this.curveType=i[e],this.curveType||(this.curveType={name:e}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}function s(t,r,i){Array.isArray(t)||(t=t.toArray());var n=new e(t);if(i&&n.length<i){var s=new e(i-n.length);s.fill(0),n=e.concat([s,n])}return r?n.toString(r):n}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,n.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},n.prototype.computeSecret=function(t,r,i){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},n.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,e)},n.prototype.getPrivateKey=function(e){return s(this.keys.getPrivate(),e)},n.prototype.setPublicKey=function(t,r){return r=r||"utf8",e.isBuffer(t)||(t=new e(t,r)),this.keys._importPublic(t),this},n.prototype.setPrivateKey=function(t,i){i=i||"utf8",e.isBuffer(t)||(t=new e(t,i));var n=new r(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this};
},{"elliptic":"sRna","bn.js":"XRJY","buffer":"VjIL"}],"i8cF":[function(require,module,exports) {

var e=require("create-hash"),r=require("safe-buffer").Buffer;function a(e){var a=r.allocUnsafe(4);return a.writeUInt32BE(e,0),a}module.exports=function(t,u){for(var n,f=r.alloc(0),c=0;f.length<u;)n=a(c++),f=r.concat([f,e("sha1").update(t).update(n).digest()]);return f.slice(0,u)};
},{"create-hash":"QR3Y","safe-buffer":"udfh"}],"ergK":[function(require,module,exports) {
module.exports=function(r,e){for(var n=r.length,o=-1;++o<n;)r[o]^=e[o];return r};
},{}],"ILP2":[function(require,module,exports) {

var e=require("bn.js"),r=require("safe-buffer").Buffer;function o(o,u){return r.from(o.toRed(e.mont(u.modulus)).redPow(new e(u.publicExponent)).fromRed().toArray())}module.exports=o;
},{"bn.js":"XRJY","safe-buffer":"udfh"}],"sRre":[function(require,module,exports) {

var r=require("parse-asn1"),e=require("randombytes"),o=require("create-hash"),n=require("./mgf"),a=require("./xor"),t=require("bn.js"),u=require("./withPublic"),l=require("browserify-rsa"),i=require("safe-buffer").Buffer;function s(r,u){var l=r.modulus.byteLength(),s=u.length,f=o("sha1").update(i.alloc(0)).digest(),c=f.length,g=2*c;if(s>l-g-2)throw new Error("message too long");var d=i.alloc(l-s-g-2),h=l-c-1,w=e(c),m=a(i.concat([f,d,i.alloc(1,1),u],h),n(w,h)),q=a(w,n(m,c));return new t(i.concat([i.alloc(1),q,m],l))}function f(r,e,o){var n,a=e.length,u=r.modulus.byteLength();if(a>u-11)throw new Error("message too long");return n=o?i.alloc(u-a-3,255):c(u-a-3),new t(i.concat([i.from([0,o?1:2]),n,i.alloc(1),e],u))}function c(r){for(var o,n=i.allocUnsafe(r),a=0,t=e(2*r),u=0;a<r;)u===t.length&&(t=e(2*r),u=0),(o=t[u++])&&(n[a++]=o);return n}module.exports=function(e,o,n){var a;a=e.padding?e.padding:n?1:4;var i,c=r(e);if(4===a)i=s(c,o);else if(1===a)i=f(c,o,n);else{if(3!==a)throw new Error("unknown padding");if((i=new t(o)).cmp(c.modulus)>=0)throw new Error("data too long for modulus")}return n?l(i,c):u(i,c)};
},{"parse-asn1":"DVcf","randombytes":"V4U6","create-hash":"QR3Y","./mgf":"i8cF","./xor":"ergK","bn.js":"XRJY","./withPublic":"ILP2","browserify-rsa":"yANG","safe-buffer":"udfh"}],"r6Uq":[function(require,module,exports) {

var r=require("parse-asn1"),e=require("./mgf"),n=require("./xor"),t=require("bn.js"),o=require("browserify-rsa"),i=require("create-hash"),u=require("./withPublic"),a=require("safe-buffer").Buffer;function l(r,t){var o=r.modulus.byteLength(),u=i("sha1").update(a.alloc(0)).digest(),l=u.length;if(0!==t[0])throw new Error("decryption error");var f=t.slice(1,l+1),c=t.slice(l+1),s=n(f,e(c,l)),g=n(c,e(s,o-l-1));if(h(u,g.slice(0,l)))throw new Error("decryption error");for(var d=l;0===g[d];)d++;if(1!==g[d++])throw new Error("decryption error");return g.slice(d)}function f(r,e,n){for(var t=e.slice(0,2),o=2,i=0;0!==e[o++];)if(o>=e.length){i++;break}var u=e.slice(2,o-1);if(("0002"!==t.toString("hex")&&!n||"0001"!==t.toString("hex")&&n)&&i++,u.length<8&&i++,i)throw new Error("decryption error");return e.slice(o)}function h(r,e){r=a.from(r),e=a.from(e);var n=0,t=r.length;r.length!==e.length&&(n++,t=Math.min(r.length,e.length));for(var o=-1;++o<t;)n+=r[o]^e[o];return n}module.exports=function(e,n,i){var h;h=e.padding?e.padding:i?1:4;var c,s=r(e),g=s.modulus.byteLength();if(n.length>g||new t(n).cmp(s.modulus)>=0)throw new Error("decryption error");c=i?u(new t(n),s):o(n,s);var d=a.alloc(g-c.length);if(c=a.concat([d,c],g),4===h)return l(s,c);if(1===h)return f(s,c,i);if(3===h)return c;throw new Error("unknown padding")};
},{"parse-asn1":"DVcf","./mgf":"i8cF","./xor":"ergK","bn.js":"XRJY","browserify-rsa":"yANG","create-hash":"QR3Y","./withPublic":"ILP2","safe-buffer":"udfh"}],"Qm3X":[function(require,module,exports) {
exports.publicEncrypt=require("./publicEncrypt"),exports.privateDecrypt=require("./privateDecrypt"),exports.privateEncrypt=function(r,p){return exports.publicEncrypt(r,p,!0)},exports.publicDecrypt=function(r,p){return exports.privateDecrypt(r,p,!0)};
},{"./publicEncrypt":"sRre","./privateDecrypt":"r6Uq"}],"LVHm":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var r=arguments[3],e=require("process");function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var t=require("safe-buffer"),o=require("randombytes"),f=t.Buffer,u=t.kMaxLength,i=r.crypto||r.msCrypto,a=Math.pow(2,32)-1;function s(r,e){if("number"!=typeof r||r!=r)throw new TypeError("offset must be a number");if(r>a||r<0)throw new TypeError("offset must be a uint32");if(r>u||r>e)throw new RangeError("offset out of range")}function m(r,e,n){if("number"!=typeof r||r!=r)throw new TypeError("size must be a number");if(r>a||r<0)throw new TypeError("size must be a uint32");if(r+e>n||r>u)throw new RangeError("buffer too small")}function l(e,n,t,o){if(!(f.isBuffer(e)||e instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)o=n,n=0,t=e.length;else if("function"==typeof t)o=t,t=e.length-n;else if("function"!=typeof o)throw new TypeError('"cb" argument must be a function');return s(n,e.length),m(t,n,e.length),p(e,n,t,o)}function p(r,n,t,o){var f=r.buffer,u=new Uint8Array(f,n,t);return i.getRandomValues(u),o?void e.nextTick(function(){o(null,r)}):r}function w(e,n,t){if(void 0===n&&(n=0),!(f.isBuffer(e)||e instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return s(n,e.length),void 0===t&&(t=e.length-n),m(t,n,e.length),p(e,n,t)}i&&i.getRandomValues?(exports.randomFill=l,exports.randomFillSync=w):(exports.randomFill=n,exports.randomFillSync=n);
},{"safe-buffer":"udfh","randombytes":"V4U6","process":"rH1J"}],"Sy8s":[function(require,module,exports) {
"use strict";exports.randomBytes=exports.rng=exports.pseudoRandomBytes=exports.prng=require("randombytes"),exports.createHash=exports.Hash=require("create-hash"),exports.createHmac=exports.Hmac=require("create-hmac");var e=require("browserify-sign/algos"),r=Object.keys(e),t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);exports.getHashes=function(){return t};var i=require("pbkdf2");exports.pbkdf2=i.pbkdf2,exports.pbkdf2Sync=i.pbkdf2Sync;var p=require("browserify-cipher");exports.Cipher=p.Cipher,exports.createCipher=p.createCipher,exports.Cipheriv=p.Cipheriv,exports.createCipheriv=p.createCipheriv,exports.Decipher=p.Decipher,exports.createDecipher=p.createDecipher,exports.Decipheriv=p.Decipheriv,exports.createDecipheriv=p.createDecipheriv,exports.getCiphers=p.getCiphers,exports.listCiphers=p.listCiphers;var s=require("diffie-hellman");exports.DiffieHellmanGroup=s.DiffieHellmanGroup,exports.createDiffieHellmanGroup=s.createDiffieHellmanGroup,exports.getDiffieHellman=s.getDiffieHellman,exports.createDiffieHellman=s.createDiffieHellman,exports.DiffieHellman=s.DiffieHellman;var a=require("browserify-sign");exports.createSign=a.createSign,exports.Sign=a.Sign,exports.createVerify=a.createVerify,exports.Verify=a.Verify,exports.createECDH=require("create-ecdh");var o=require("public-encrypt");exports.publicEncrypt=o.publicEncrypt,exports.privateEncrypt=o.privateEncrypt,exports.publicDecrypt=o.publicDecrypt,exports.privateDecrypt=o.privateDecrypt;var c=require("randomfill");exports.randomFill=c.randomFill,exports.randomFillSync=c.randomFillSync,exports.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},exports.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};
},{"randombytes":"V4U6","create-hash":"QR3Y","create-hmac":"LZdq","browserify-sign/algos":"lS9h","pbkdf2":"zhze","browserify-cipher":"YaJT","diffie-hellman":"f96k","browserify-sign":"Uozs","create-ecdh":"Sxaw","public-encrypt":"Qm3X","randomfill":"LVHm"}],"Hm67":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sha1=exports.secretKey=exports.md5=void 0;var e=t(require("crypto"));function t(e){return e&&e.__esModule?e:{default:e}}var r=exports.md5=function(t){return e.default.createHash("md5").update(t).digest("hex")},s=exports.secretKey="processon-edit",o=exports.sha1=function(t){return e.default.createHmac("sha1",s).update(t).digest("hex")};
},{"crypto":"Sy8s"}],"ZtG2":[function(require,module,exports) {
"use strict";function t(t){return t.startsWith("#")||!t.startsWith("rgb")?t:"#"+t.replace(/rgba?\(|\)/g,"").split(",").slice(0,3).map(function(t){return(+t).toString(16).padStart(2,"0")}).join("")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2hex=t;
},{}],"RKzI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./blob");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./img");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./env");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./element");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./md5");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./color");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});
},{"./blob":"NJiq","./img":"KUPG","./env":"GNJQ","./element":"l40E","./md5":"Hm67","./color":"ZtG2"}],"G1Mn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.brower=exports.ClipboardItem=void 0,exports.clearClipboardFail=g,exports.dataTransfer2json=D,exports.getCliboardFail=y,exports.permission=m,exports.read=F,exports.readText=I,exports.write=T,exports.writeText=E;var t=r(require("./clipboardItemPonyfill")),e=require("../utils/index");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){var e=i(t,"string");return"symbol"===n(e)?e:String(e)}function i(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function u(){u=function(){return e};var t,e={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),u=new D(n||[]);return o(i,"_invoke",{value:_(t,r,u)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",b={};function m(){}function w(){}function x(){}var k={};f(k,c,function(){return this});var E=Object.getPrototypeOf,L=E&&E(E(C([])));L&&L!==r&&a.call(L,c)&&(k=L);var S=x.prototype=m.prototype=Object.create(k);function O(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function T(t,e){function r(o,i,u,c){var s=h(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,u,c)},function(t){r("throw",t,u,c)}):e.resolve(f).then(function(t){l.value=t,u(l)},function(t){return r("throw",t,u,c)})}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function a(){return new e(function(e,a){r(t,n,e,a)})}return i=i?i.then(a,a):a()}})}function _(e,r,n){var a=d;return function(o,i){if(a===y)throw new Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=j(u,n);if(c){if(c===b)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=y;var s=h(e,r,n);if("normal"===s.type){if(a=n.done?g:v,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=g,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=h(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},O(T.prototype),f(T.prototype,s,function(){return this}),e.AsyncIterator=T,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new T(p(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},O(S),f(S,l,"Generator"),f(S,c,function(){return this}),f(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,a){return u.type="throw",u.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;P(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function c(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){c(o,n,a,i,u,"next",t)}function u(t){c(o,n,a,i,u,"throw",t)}i(void 0)})}}var l=exports.ClipboardItem=window.ClipboardItem||t.default,f="text",p="text/plain",h="text/html",d="image/png",v="CLIPBOARD_FAIL";function y(){var t=window.localStorage.getItem(v),e={write:0,writeText:0};if(!t)return e;try{e=JSON.parse(t)}catch(r){}return e}function g(){var t=y();return window.localStorage.removeItem(v),0!=t.write||0!=t.writeText}var b=exports.brower=function(){var t=navigator.userAgent,e={};return t.includes("MSIE")?e={isIE:!0,target:"ie"}:t.includes("Firefox")?e={isFirefox:!0,target:"firefox"}:t.includes("SE 2.X")?e={isSougou:!0,target:"sougou"}:t.includes("Chrome")?e={isChrome:!0,target:"chrome"}:t.includes("Safari")?e={isSafari:!0,target:"safari"}:t.includes("Opera")?e={isOpera:!0,target:"opera"}:t.includes("app/tencent_wemeet")&&(e={isWemeet:!0,target:"wemeet"}),e}();function m(t){return w.apply(this,arguments)}function w(){return(w=s(u().mark(function t(e){var r;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={state:"denied"},t.prev=1,t.next=4,navigator.permissions.query({name:e});case 4:r=t.sent,t.next=12;break;case 7:if(t.prev=7,t.t0=t.catch(1),"https:"==window.location.protocol){t.next=11;break}return t.abrupt("return",r.state);case 11:return t.abrupt("return","prompt");case 12:return t.abrupt("return",r.state);case 13:case"end":return t.stop()}},t,null,[[1,7]])}))).apply(this,arguments)}function x(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select();var r=document.execCommand("Copy");return document.body.removeChild(e),r}function k(t,e){var r=e&&e.clipboardData;r&&r.setData(b.isIE?f:p,t)}function E(t,e){return L.apply(this,arguments)}function L(){return(L=s(u().mark(function t(e,r){var n,a;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k(e,r),t.next=3,m("clipboard-write");case 3:if("denied"!=t.sent){t.next=6;break}return t.abrupt("return",x(e));case 6:return t.prev=6,t.next=9,navigator.clipboard.writeText(e);case 9:n=t.sent,a=0,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),a=1,n=x(e);case 17:return window.localStorage.setItem(v,JSON.stringify({writeText:a})),t.abrupt("return",n);case 19:case"end":return t.stop()}},t,null,[[6,13]])}))).apply(this,arguments)}function S(t,e){return O.apply(this,arguments)}function O(){return(O=s(u().mark(function t(r,n){var a,o,i,c,s,l,h;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=null==n?void 0:n.clipboardData)){t.next=22;break}o=0;case 3:if(!(o<r.length)){t.next=21;break}i=0;case 5:if(!(i<r[o].types.length)){t.next=18;break}return c=r[o].types[i],t.next=9,r[o].getType(c);case 9:return s=t.sent,t.next=12,(0,e.readBlob)(s,c);case 12:l=t.sent,c==p&&(x(l),b.isIE&&(c=f)),a.setData(c,l);case 15:i++,t.next=5;break;case 18:o++,t.next=3;break;case 21:return t.abrupt("return",!0);case 22:if(h=r.find(function(t){return t.types.includes(p)})){t.next=25;break}return t.abrupt("return",!1);case 25:return t.t0=x,t.t1=e.readBlob,t.next=29,h.getType(p);case 29:return t.t2=t.sent,t.t3=p,t.next=33,(0,t.t1)(t.t2,t.t3);case 33:return t.t4=t.sent,t.abrupt("return",(0,t.t0)(t.t4));case 35:case"end":return t.stop()}},t)}))).apply(this,arguments)}function T(t,e){return _.apply(this,arguments)}function _(){return(_=s(u().mark(function e(r,n){var a,o,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length){e.next=2;break}return e.abrupt("return",Promise.resolve(!1));case 2:return a=r[0]instanceof t.default,e.next=5,m("clipboard-write");case 5:if("denied"!=e.sent&&!a){e.next=8;break}return e.abrupt("return",S(r,n));case 8:return e.prev=8,e.next=11,navigator.clipboard.write(r);case 11:o=e.sent,i=0,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),i=1,o=S(r,n);case 19:return window.localStorage.setItem(v,JSON.stringify({write:i})),e.abrupt("return",o);case 21:case"end":return e.stop()}},e,null,[[8,15]])}))).apply(this,arguments)}function j(t){var e=null==t?void 0:t.clipboardData;return e?e.getData(b.isIE?f:p):""}function I(t){return P.apply(this,arguments)}function P(){return(P=s(u().mark(function t(e){var r,n;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=j(e),t.next=3,m("clipboard-read");case 3:if("denied"!=t.sent){t.next=6;break}return t.abrupt("return",r);case 6:if(n=r,t.prev=7,!b.isSougou){t.next=10;break}return t.abrupt("return",n);case 10:return t.next=12,navigator.clipboard.readText();case 12:n=t.sent,t.next=17;break;case 15:t.prev=15,t.t0=t.catch(7);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}},t,null,[[7,15]])}))).apply(this,arguments)}function D(t){var r=t.items,n=t.types,a={images:[]};if(n.includes("Files")&&!b.isIE)for(var o=0;o<r.length;o++){"file"==r[o].kind&&r[o].type.startsWith("image/")&&a.images.push(r[o].getAsFile())}return n.includes(p)&&(a[p]=(0,e.strToBlob)(t.getData(b.isIE?f:p),p),n.includes(h)&&(a[h]=(0,e.strToBlob)(t.getData(h),h))),n.includes(d)&&(a[d]=(0,e.dataURLToBlob)(t.getData(d))),a}function C(t){return null!=t&&t.clipboardData?D(t.clipboardData):Object.create(null)}function F(t){return N.apply(this,arguments)}function N(){return(N=s(u().mark(function t(e){var r,n,o,i,c,s,f,p,h;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=C(e),o=null!==(r=n.images)&&void 0!==r?r:[],delete n.images,t.next=5,m("clipboard-read");case 5:if(i=t.sent,c=b.isSafari&&null==e,s=b.isWemeet&&null==e,f="wpsclient_mac"==window.deviceType&&null==e,p=Object.keys(n).length?[new l(n)]:[],!("denied"==i||c||s||f)){t.next=12;break}return t.abrupt("return",p);case 12:if(t.prev=12,!b.isSougou){t.next=15;break}return t.abrupt("return",p);case 15:return t.next=17,navigator.clipboard.read();case 17:(p=t.sent)instanceof DataTransfer&&(delete(h=D(p)).images,p=Object.keys(h).length?[new l(h)]:[]),t.next=23;break;case 21:t.prev=21,t.t0=t.catch(12);case 23:return p.some(function(t){return t.types.includes(d)})||o.forEach(function(t){p.push(new l(a({},d,t)))}),t.abrupt("return",p);case 26:case"end":return t.stop()}},t,null,[[12,21]])}))).apply(this,arguments)}
},{"./clipboardItemPonyfill":"g5N4","../utils/index":"RKzI"}],"JaSQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=h,exports.getStorage=f,exports.read=m,exports.save=l;var t=n(require("./util")),e=require("../utils");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var c=a?Object.getOwnPropertyDescriptor(t,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=t[i]}return o.default=t,n&&n.set(t,o),o}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:_(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var y="suspendedStart",d="suspendedYield",g="executing",v="completed",x={};function b(){}function m(){}function w(){}var k={};f(k,u,function(){return this});var S=Object.getPrototypeOf,L=S&&S(S(I([])));L&&L!==r&&n.call(L,u)&&(k=L);var O=w.prototype=b.prototype=Object.create(k);function E(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function T(t,e){function r(a,i,c,u){var l=h(t[a],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==o(f)&&n.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,c,u)},function(t){r("throw",t,c,u)}):e.resolve(f).then(function(t){s.value=t,c(s)},function(t){return r("throw",t,c,u)})}u(l.arg)}var a;i(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return a=a?a.then(o,o):o()}})}function _(e,r,n){var o=y;return function(a,i){if(o===g)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===x)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var l=h(e,r,n);if("normal"===l.type){if(o=n.done?v:d,l.arg===x)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),x;var a=h(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,x;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,x):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,x)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return m.prototype=w,i(O,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:m,configurable:!0}),m.displayName=f(w,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(T.prototype),f(T.prototype,l,function(){return this}),e.AsyncIterator=T,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new T(p(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(O),f(O,s,"Generator"),f(O,u,function(){return this}),f(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,x):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),x},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),x}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),x}},e}function i(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(l){return void r(l)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)})}}var u="💔";function l(t,e,r){return s.apply(this,arguments)}function s(){return(s=c(a().mark(function r(n,o,i){var c,l,s,f,p,h,y,d,g,v;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(c=i.value,l=i.str,s=void 0===l?" ":l,f=i.html,p=void 0===f?" ":f,h=i.image,y=i.flag,d=JSON.stringify(c),window.localStorage.setItem(o,d),g='<div data-t="'.concat(y,'" data-processon-v="').concat(d.replace(/&quot;/g,"%26quot;").replace(/"/g,"&quot;").replace(/&lt;/g,"".concat(u,"lt;")).replace(/&gt;/g,"".concat(u,"gt;")),'">').concat(p,"</ul>"),v={"text/plain":(0,e.strToBlob)(s,"text/plain"),"text/html":(0,e.strToBlob)(g,"text/html")},!h){r.next=9;break}return r.next=8,(0,e.imageToBlob)(h);case 8:v["image/png"]=r.sent;case 9:" "!=s&&window.localStorage.setItem(y+"Cache",JSON.stringify({key:(0,e.md5)(u+s.replace(/\r\n/g,"\n")),value:o}));try{t.write([new t.ClipboardItem(v)],n)}catch(n){}return r.abrupt("return",!0);case 12:case"end":return r.stop()}},r)}))).apply(this,arguments)}function f(t){var e;try{e=JSON.parse(window.localStorage.getItem(t)||"{}")}catch(r){window.localStorage.removeItem(t)}return e}function p(t){return{type:"diagram",content:f(t)}}function h(t,e,r){return y.apply(this,arguments)}function y(){return(y=c(a().mark(function e(r,n,o){var i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t.getCliboardFail().write){e.next=2;break}return e.abrupt("return",p(n));case 2:return e.next=4,m(r,o);case 4:return null==(i=e.sent).content&&Object.assign(i,p(n)),e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var d=function(t,e){return"<".concat(e,">").concat(t,"</").concat(e,">")},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return'<span class="equation-text" data-index="0" data-equation="'.concat(t,'"><span></span><span></span></span>')};function v(t,e){return[1,3].includes(t.nodeType)?"mind"==e||3==t.nodeType?t.textContent:x(t,e):""}function x(t,e){var r=t.style;r.color,r.fontWeight,r.fontStyle,r.textDecoration;t.style.cssText="",t.removeAttribute("style");t.nodeName.toLowerCase(),t.outerHTML;return t.innerText}function b(t,r){if(!e.reInlineTag.test(t))return t;var n=document.createElement("div");return n.innerHTML=t,Array.prototype.map.call(n.childNodes,function(t){if(3==t.nodeType)return t.textContent;if(1!=t.nodeType)return"";if("equation-text"==t.className)return g(t.getAttribute("data-equation"));var e=t.querySelector(".equation-text");if(e){for(var n="",o=e;o.previousSibling;)n=v(o=o.previousSibling,r);for(n+=g(e.getAttribute("data-equation")),o=e;o.nextSibling;)n+=1==(o=o.nextSibling).nodeType&&"equation-text"==o.className?g(o.getAttribute("data-equation")):v(o,r);return n}var a=t.querySelector(".katex");if(a){var i,c=null===(i=a.querySelector(".Apple-interchange-newline"))||void 0===i||null===(i=i.nextSibling)||void 0===i?void 0:i.textContent;return g(c)}return x(t,r)}).join("")}function m(t,e){return w.apply(this,arguments)}function w(){return(w=c(a().mark(function r(n,o){var i,c,l,s,f,p,h,y,d,g,v,x,m,w,k,S,L,O,E,T,_;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i={type:"txt",blob:null,imgUrl:null,content:null},r.next=3,t.read(n);case 3:if((c=r.sent).length){r.next=6;break}return r.abrupt("return",i);case 6:if(l=c[0],s=l.types.find(function(t){return t.startsWith("image/")}),f=l.types.includes("text/html"),p=l.types.includes("text/plain"),!f&&!p){r.next=16;break}return r.next=13,l.getType(f?"text/html":"text/plain");case 13:r.t0=r.sent,r.next=17;break;case 16:r.t0=null;case 17:if(!(h=r.t0)){r.next=24;break}return r.next=21,(0,e.readBlob)(h,"text/plain");case 21:r.t1=r.sent,r.next=25;break;case 24:r.t1=null;case 25:if(y=r.t1,!p){r.next=32;break}return r.next=29,l.getType("text/plain");case 29:r.t2=r.sent,r.next=33;break;case 32:r.t2=null;case 33:if(!(d=r.t2)){r.next=40;break}return r.next=37,(0,e.readBlob)(d,"text/plain");case 37:r.t3=r.sent,r.next=41;break;case 40:r.t3=null;case 41:if(g=r.t3,i.txt=g,!g||" "==g){r.next=57;break}if(!(v=window.localStorage.getItem(o+"Cache"))){r.next=57;break}if(r.prev=46,(x=JSON.parse(v)).key!=(0,e.md5)(g.replace(/\r\n/g,"\n"))){r.next=53;break}return i.content=JSON.parse(window.localStorage.getItem(x.value)),i.type="diagram",i.blob=h,r.abrupt("return",i);case 53:r.next=57;break;case 55:r.prev=55,r.t4=r.catch(46);case 57:if(!f||!y){r.next=83;break}if(y=y.replace(/^<\!DOCTYPE html>/,"").replace(/^<meta[^>]+>/,"").replace(/contenteditable=(\?['"])\w*\1/,""),m=-1==(m=y.indexOf("\x3c!--StartFragment--\x3e"))?0:m+20,w=-1==(w=y.lastIndexOf("\x3c!--EndFragment--\x3e"))?y.length:w,y=y.substring(m,w),(k=document.createElement("div")).innerHTML=y,k.children.length){r.next=70;break}f=!1,r.next=83;break;case 70:if(S=k.children[0].dataset,L=S.processonV,O=S.t,!L){r.next=81;break}if(O!=o){r.next=79;break}return i.type="diagram",i.blob=h,E=new RegExp(u+"lt;","g"),T=new RegExp(u+"gt;","g"),i.content=JSON.parse(L.replace(/([\w-]+)?font-family\:[^;]*;/g,"").replace(E,"&lt;").replace(T,"&gt;").replace(/%26quot;/g,"&quot;")),r.abrupt("return",i);case 79:r.next=83;break;case 81:y=b(y,o),e.reInlineTag.test(y)||(k.innerHTML=y,k.querySelector(".equation-text")||(f=!1));case 83:if(!s){r.next=95;break}return i.type="image",null!=g&&g.startsWith("http")&&(i.imgUrl=g),r.next=88,l.getType(s);case 88:return _=r.sent,i.blob=_,r.next=92,(0,e.readBlob)(_,s);case 92:i.content=r.sent,r.next=98;break;case 95:i.type=f?"html":"txt",i.blob=f?h:d,i.content=f?y:g;case 98:return r.abrupt("return",i);case 99:case"end":return r.stop()}},r,null,[[46,55]])}))).apply(this,arguments)}
},{"./util":"G1Mn","../utils":"RKzI"}],"ueWq":[function(require,module,exports) {
module.exports={version:"v0.0.0",basic:{anchors:[{x:"w/2",y:"0"},{x:"w/2",y:"h"},{x:"0",y:"h/2"},{x:"w",y:"h/2"}],attribute:{container:!1,rotatable:!0,visible:!0,collapsable:!1,collapsed:!1,linkable:!0,markerOffset:5},category:"basic",children:[],dataAttributes:[],fillStyle:{},fontStyle:{},group:"",id:"",lineStyle:{},link:"",licked:!1,parent:"",resizeDir:["tl","tr","br","bl","l","t","r","b"],shapeStyle:{alpha:1},theme:{}},text:{name:"text",path:[{actions:[{x:"0",action:"move",y:"0"},{x:"w",action:"line",y:"0"},{x:"w",action:"line",y:"h"},{x:"0",action:"line",y:"h"},{action:"close"}],fillStyle:{type:"none"},lineStyle:{lineWidth:0}}],props:{zindex:1,w:100,x:0,h:40,y:0,angle:0},textBlock:[{position:{w:"w",x:0,h:"h",y:0},text:""}],title:"文本"}};
},{}],"PEFJ":[function(require,module,exports) {
"use strict";function n(n){return o(n)||i(n)||e(n)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(n,t){if(n){if("string"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(n,t):void 0}}function i(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}function o(n){if(Array.isArray(n))return r(n)}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleEvent=void 0;var c=exports.handleEvent={invokingfn:function(){try{var t=Object.assign([],arguments),e=t.splice(0,1)[0];if(c[e])return c[e].apply(c,n(t))}catch(i){}},undo:function(){mind.messageSource.undo(mind)},redo:function(){mind.messageSource.redo(mind)},brash:function(){mind.operation.initBrash(mind)},outline:function(){"view"!=window.initPage?(sessionStorage.setItem("ur_resource_outline","po_mind_left_tool_menu"),location.href="/outline/"+chartId):$("#outline-right").trigger("click")},search:function(){this.invokingfn("showCorner","search","left",function(){loadOutline.init()})},mind_topic_font:function(n){var t=n.target.text().trim();c.invokingfn("dropDownList",{target:n.target,menu:$("#mind-font-list"),size:"normal",selectAc:t,onSelect:function(t){c.invokingfn("setStyle",{"font-family":t}),n.target.button("setText",t),n.target.attr("ac",t)}}),$("#mind-font-list").find(['ac="'.concat(t,'"')]).menuitem("select")},mind_topic_b:function(n){var t="normal";n.target.hasClass("selected")?(n.target.removeClass("selected"),t="normal"):(n.target.addClass("selected"),t="bold"),c.invokingfn("setStyle",{"font-weight":t})},mind_topic_i:function(n){var t="normal";n.target.hasClass("selected")?(n.target.removeClass("selected"),t="normal"):(n.target.addClass("selected"),t="italic"),c.invokingfn("setStyle",{"font-style":t})},mind_topic_align_l:function(n){c.invokingfn("setStyle",{"text-align":"left"}),n.target.addClass("selected"),n.target.siblings("[align]").removeClass("selected")},mind_topic_align_c:function(n){c.invokingfn("setStyle",{"text-align":"center"}),n.target.addClass("selected"),n.target.siblings("[align]").removeClass("selected")},mind_topic_align_r:function(n){c.invokingfn("setStyle",{"text-align":"right"}),n.target.addClass("selected"),n.target.siblings("[align]").removeClass("selected")},mind_insert_child:function(n){n.selectTopic&&n.selectTopic.collapsed?$.toast({type:"secondary",text:"主题折叠时，不能增加子主题"}):mind.operation.appendTopic.call(mind,!0)},mind_insert_brother:function(){mind.operation.appendTopic.call(mind,!1)},mind_insert_parent:function(n){mind.operation.insertParent.call(mind,n.selectTopic)},mind_summary:function(n){mind.summary.addSummary.call(mind,n.selectedIds)},mind_boundary:function(n){c.invokingfn("addBoundary",mind,n.selectedIds)},mind_connection:function(n){mind.connection.render.call(mind,n.event)},mind_img:function(){},mind_link:function(n){c.invokingfn("url",n.selectTopic,n.selectId)},mind_watermark:function(n){},mind_themes:function(n){},saveCustomiseTheme:function(n,t){$.toast({type:"success",text:"保存成功"}),t()},saveThemeParams:function(n,t){return{name:t,id:n}},mind_structure:function(n){var t=mind.model.topic.structure;c.invokingfn("dropDownList",{target:n.target,size:"normal",name:"MIND_STRUCTURE",position:"left",selectAc:t,onSelect:function(n){poCollect("编辑器功能点击",{button:"结构选择_structure_"+n}),c.invokingfn("changeStructure",n,null,null,null)}})},mind_hide_topics:function(n){mindUI.showOrHideChildren(mind,n.target,"hide")},mind_show_topics:function(n){mindUI.showOrHideChildren(mind,n.target,"show")},mind_topic_style:function(n){c.invokingfn("dropDownList",{target:n.target,menu:$(".mind-topics-dlg"),callback:function(){$(".pre-topic").off("click").on("click",function(){var t=$(this),e=t.css("background-color"),i=t.css("color"),o=t.css("border-width"),r=t.css("border-color"),c=t.css("border-style"),l={"background-color":e,color:i,"border-radius":t.css("border-radius"),"text-decoration":t.css("text-decoration")};delete l.border,l["border-style"]=c,l["border-color"]=r,l["border-width"]=o,mind.operation.setStyle.call(mind,l),1==n.selectedIds.length&&mind.util.selectById.call(mind,n.selectedIds[0])})}})},mind_canvas_bgcolor:function(n){},mind_topic_font_color:function(n){var t=n.target,e=t.button("getColor");$.colorpicker({target:t,position:"left",color:e,onSelect:function(n){c.invokingfn("setStyle",{color:"rgb(".concat(n,")")}),t.button("setColor",n)}})},mind_topicline_color:function(n){var t=n.target,e=t.button("getColor");$.colorpicker({target:t,position:"left",color:e,onSelect:function(n){c.invokingfn("setStyle",{"line-color":"rgb(".concat(n,")")}),t.button("setColor",n)}})},mind_topic_bgcolor:function(n){var t=n.target,e=t.button("getColor");$.colorpicker({target:t,position:"left",color:e,onSelect:function(n){null==n&&(n=mind.designer.css("background-color")),c.invokingfn("setStyle",{"background-color":"rgb(".concat(n,")")}),t.button("setColor",n)}})},mind_topic_border_c:function(n){var t=n.target,e=t.button("getColor");$.colorpicker({target:t,position:"left",color:e,onSelect:function(n){c.invokingfn("setStyle",{"border-color":"rgb(".concat(n,")")}),t.button("setColor",n)}})},mind_topicline_width:function(n){var t=$("#line_".concat(n.selectId)),e=0;1==n.selectedIds.length&&(e="".concat(parseInt(t.attr("stroke-width")),"px")),c.invokingfn("dropDownList",{target:n.target,name:"MIND_WIDTH",size:"small",selectAc:e,onSelect:function(t){c.invokingfn("setStyle",{"line-width":t}),n.target.button("setText",t),n.target.attr("ac",t)}})},mind_topic_border_w:function(n){var t=null;if(1==n.selectedIds.length){var e=$("#".concat(n.selectId)),i=e.css("borderWidth")||"0";if(parseInt(i)>0){var o=e.css("borderStyle");t=o&&"double"==o?Math.floor(parseInt(i)/3)+"px":parseInt(i)+"px"}else t="0"}c.invokingfn("dropDownList",{target:n.target,name:"MIND_WIDTH",size:"small",type:["default","nullable"],selectAc:t,onSelect:function(n){c.invokingfn("setStyle",{"border-width":n})}})},mind_topic_border_t:function(n){if(n.selectId){var t=$("#".concat(n.selectId)),e="solid";if(1==n.selectedIds.length){var i=t.css("borderStyle");"none"!=i&&(e=i)}c.invokingfn("dropDownList",{target:n.target,size:"small",name:"MIND_BORDER_STYLE",selectAc:e,onSelect:function(n){c.invokingfn("setStyle",{"border-style":n})}})}},mind_border_radius:function(n){if(n.selectId){var t=$("#".concat(n.selectId)),e="mind-customise-bs1_";if(1==n.selectedIds.length){var i=t.css("borderRadius");"none"!=i&&(e="5px"==i?"mind-customise-bs2_":"30px"==i?"mind-customise-bs3_":"mind-customise-bs1_")}c.invokingfn("dropDownList",{target:n.target,name:"MIND_BORDER_RADIUS",selectAc:e,onSelect:function(n){"mind-customise-bs3_"==n?mind.operation.setStyle.call(mind,{"border-radius":"30px"}):"mind-customise-bs2_"==n?mind.operation.setStyle.call(mind,{"border-radius":"5px"}):mind.operation.setStyle.call(mind,{"border-radius":"0px"})}})}},mind_topic_space:function(n){c.invokingfn("dropDownList",{target:n.target,position:"right",menu:$(".mind_topic_space")})},mind_topic_width:function(n){c.invokingfn("dropDownList",{target:n.target,position:"right",menu:$("#mind-subtopic-w-handle")})},mind_clear_style:function(){mind.operation.clearStyle.call(mind)},mind_tag:function(n){c.invokingfn("showCorner","tag")},mind_task:function(n){c.invokingfn("showCorner","task")},mind_remark:function(n){var t=this;c.invokingfn("showCorner","note",null,function(){$(".remark-dragable").off("mousedown").on("mousedown",function(n){mindUI.dlgDragLine.call(t,n,$(".mind-corner.right"),240,"right")})})},mind_inserttemp:function(n){c.invokingfn("insertTemplateEntry")},mind_equation:function(n){n.selectId&&c.invokingfn("equation",n.selectId)},seticon:function(n){n.target.attr("n");var t=null;null!=n.target.css("color")&&(t=n.target.css("color")),c.invokingfn("setIcon",n.target,null,t)},mind_icon_show:function(n){},focus_mode:function(n){c.invokingfn("focusTopic",mind)},focus_root:function(n){c.invokingfn("moveToCenter",mind)},nav:function(n){$(".po-mind-nav[tit=close]").trigger("mousedown")},mind_ppt:function(){$("#title-tip").hide(),window.cefqueryFn&&cefqueryFn.send("openConvertToPptDlg"),wpsCollect("docer_mindmap2ppt_entry",{template_id:file_id,template_name:chartTitle})},conn:function(){var n;(n=mind.connection.render).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},summary:function(){var n;(n=mind.summary.addSummary).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},appendTopic:function(){var n;(n=mind.operation.appendTopic).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},setNote:function(){var n;(n=mind.note.setNote).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},setTopicWidth:function(){var n;(n=mind.operation.topicCusWidth).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},setStyle:function(){var n;(n=mind.operation.setStyle).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},fontDirection:function(){var n;(n=mindUI).renderDirectionIcon.apply(n,arguments)},showCorner:function(){var n;(n=mindUI).showCorner.apply(n,arguments)},changeStructure:function(n){var t;(t=mind.operation.changeStructure).call.apply(t,[mind].concat(Array.prototype.slice.call(arguments))),mindUI.initStructureIcon(n,mind)},setBackground:function(){var n;(n=mind.operation.setBackground).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},setMargin:function(){var n;(n=mind.operation.setMargin).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},setZoom:function(n,t,e){n.operation.setZoom.call(n,$(".mind-designer"),e)},colla:function(){insert.share.init()},present:function(){mind.opts.readonly=!0,mind.events.push("hideElements"),mind.util.clearSelect(),mind.plugins.presenter.slidersLoading(!0),mindColla.getSliders(function(){setTimeout(function(){mind.plugins.presenter.init(mind)},160)})},mindBook:function(){window.open("/support")},limitDes:function(){var n;(n=vipLimitDlg).initLimitDlg.apply(n,arguments)},feedback:function(){alert("意见反馈")},upLog:function(){window.open("https://kdocs.cn/l/seEiH2mxZ?f=501")},setLink:function(){var n;(n=mind.operation.setLink).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},removeLink:function(){var n;(n=mind.operation.removeLink).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},url:function(){var n=arguments[0],t=arguments[1];mind.topicLink.checkLink(n,"url",function(e){if(e){var i=null;n.link&&"url"==n.link.type&&(i=n.link);var o=$("#"+t),r=o.find(".topic-link");insert.link.render({target:r.length?r:o,link:i,type:"url"},function(n,e){"remove"==e?c.invokingfn("removeLink",e):c.invokingfn("setLink",n,t,e)})}})},equationInit:function(){var n;(n=insert.equation.equationInit).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},equation:function(){if($(".eq-editor").is(":visible"))$(".eq-shade").trigger("click");else{var n=$("#area_"+arguments[0]);if("editpaste"==mind.model.poPasteType)c.invokingfn("equationInit",n);else{if(!mind.events.push("testVip","Latex"))return poCollect("触发会员功能",{function_name:"Latex"}),void mind.events.push("vip-limit","Latex");mind.operation.editTopicDom.call(mind,arguments[0]),mind.model.poPasteType="editpaste",(n=$("#area_"+arguments[0])).find("li").length>0?n.find("li").textMoveToEnd():n.textMoveToEnd(),c.invokingfn("equationInit",n)}}},setTask:function(){var n;(n=mind.task.setTask).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},removeTask:function(){mind.task.removeTask.call(mind)},setIcon:function(){var n;(n=mind.icons.setWPSIcon).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},removeIcon:function(){var n;(n=mind.icons.removeIcon).call.apply(n,[mind].concat(Array.prototype.slice.call(arguments)))},more:function(){var n=$(".mind-toolbar"),t=$(".po-tool-more-list").html("<span class='toolbar-filling'></span>");t.is(":visible")?t.hide():(t.show(),t.children("[tit]").hide(),n.find("[tit]").each(function(n,e){var i=$(e),o=i.clone(!0);i.is(":visible")||t.append(o)}),t.css("display","flex").off().on("mousedown",function(n){n.stopPropagation()}),$(document).off("mousedown.moretool").on("mousedown.moretool",function(n){n.stopPropagation(),"more"!=$(n.target).attr("tit")&&"more"!=$(n.target).parent().attr("tit")&&t.hide()}))},getUpdatedBoundries:function(){return{original:{},updates:{}}},boundsSpace:function(){return 0},getMindInfo:function(n){var t=n.model,e=n.util,i=e.getSelectedId(),o=n.util.selectedIds,r=n.model.getTopicById(i);return{util:e,model:t,root:t.topic,selectId:i,selectedIds:o,selectTopic:r,currentRoot:n.currentRoot,parents:this.getParentTopics(i,t)}},getParentTopics:function(n,t){return n?t.getParentTopics(n):[]},moveToCenter:function(n){n.operation.moveToCenter.call(n)},selectTopicOp:function(n){n.plugins.selectTopicOp.call(n)},focusTopic:function(n){n.operation.focusTopic.call(n)},testTopicCount:function(n){n.model;var t=n.util.getTopicsLen.call(n);if("undefined"!=typeof mindNodeLimit&&2==mindNodeLimit)return"";var e=vipState.test("mindShapeNum");if(e>t)return t>=300?mind.events.push("tempPoCollect",{name:"会员使用会员功能",attr:{limitType:"addtopic_svip"}}):t>=150&&mind.events.push("tempPoCollect",{name:"会员使用会员功能",attr:{limitType:"addtopic"}}),"";var i=e>150?"addtopic_svip":"addtopic";return n.events.push("vip-limit",i),"over"}};
},{}],"YVdD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LAST_SAVE_KEY=exports.LAST_SAVE_IMG=void 0,exports.copy=_,exports.cut=w,exports.get=void 0,exports.paste=O,exports.pasteNodeTo=P,exports.writeImage=L;var t=require("../../common/clipboard/util"),e=o(require("../../common/clipboard")),r=require("../../common/utils"),n=require("./mind.handle.events");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var c=o?Object.getOwnPropertyDescriptor(t,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,r){return(e=u(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=l(t,"string");return"symbol"===a(e)?e:String(e)}function l(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(){s=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new A(n||[]);return i(a,"_invoke",{value:I(t,r,c)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function b(){}function x(){}function w(){}var k={};p(k,c,function(){return this});var E=Object.getPrototypeOf,S=E&&E(E(N([])));S&&S!==r&&n.call(S,c)&&(k=S);var _=w.prototype=b.prototype=Object.create(k);function T(t){["next","throw","return"].forEach(function(e){p(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){function r(i,o,c,u){var l=d(t[i],t,o);if("throw"!==l.type){var s=l.arg,p=s.value;return p&&"object"==a(p)&&n.call(p,"__await")?e.resolve(p.__await).then(function(t){r("next",t,c,u)},function(t){r("throw",t,c,u)}):e.resolve(p).then(function(t){s.value=t,c(s)},function(t){return r("throw",t,c,u)})}u(l.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e(function(e,i){r(t,n,e,i)})}return o=o?o.then(i,i):i()}})}function I(e,r,n){var i=h;return function(o,a){if(i===m)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var l=d(e,r,n);if("normal"===l.type){if(i=n.done?v:y,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=v,n.method="throw",n.arg=l.arg)}}}function O(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=d(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(a(e)+" is not iterable")}return x.prototype=w,i(_,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:x,configurable:!0}),x.displayName=p(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},T(L.prototype),p(L.prototype,u,function(){return this}),e.AsyncIterator=L,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new L(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},T(_),p(_,l,"Generator"),p(_,c,function(){return this}),p(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return c.type="throw",c.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function p(t,e,r,n,i,o,a){try{var c=t[o](a),u=c.value}catch(l){return void r(l)}c.done?e(u):Promise.resolve(u).then(n,i)}function f(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){p(o,n,i,a,c,"next",t)}function c(t){p(o,n,i,a,c,"throw",t)}a(void 0)})}}var d="clipboard_mind",h=exports.LAST_SAVE_KEY="__LAST_SAVE_KEY__",y="diagram",m=exports.LAST_SAVE_IMG="image",v=exports.get=function(){var t=f(s().mark(function t(n){var i,o,a;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get(n,d,"mind");case 2:if("txt"!=(i=t.sent).type){t.next=9;break}if(o=window.localStorage.getItem(h)){t.next=7;break}return t.abrupt("return",i);case 7:a=i.content.replace(/\r\n/g,"\n"),(0,r.md5)(y+a)==o?(i.type=y,i.content=e.getStorage(d)):(0,r.md5)(m+a)==o&&(i.type=m,i.imgUrl=a);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();function g(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText}function b(t){return x.apply(this,arguments)}function x(){return(x=f(s().mark(function t(n){var i,o,a,c,u,l,p,f,m,v,b,x,w,k;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.e,n.that,o=n.type,a=mind.util,c=mind.model,u=mind.currentRoot||c.topic,!c.copying){t.next=4;break}return t.abrupt("return");case 4:if(c.copying=!0,l=a.selectedIds,p=[],f=a.getAvailableSelectedIds(mind,u,l),(m=f.includes(u.id))&&f.unshift(f.splice(f.indexOf(u.id),1)[0]),f.forEach(function(t){var e=$.extend(!0,{},c.getTopicById(t));if(!m||e.free||t==u.id){if(t==u.id){e={children:(e.leftChildren||[]).concat(e.children),id:c.newId(),_id:"root",title:e.title,parent:"root",image:e.image};for(var r=0;r<e.children.length;r++)e.children[r].free&&e.children.splice(r--,1)}e.pos&&delete e.pos,e.parent==u.id?p.unshift(e):p.push(e)}}),p.length){t.next=14;break}return c.copying=!1,t.abrupt("return");case 14:return v={list:p,type:o},b="<ul>",x=[],w=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;x.push(new Array(r).fill(" ").join("")+g(e.title)),b+="<li>"+e.title;var n=e.children||[];n.length&&(b+="<ul>",n.forEach(function(e){t(e,r+1)}),b+="</ul>"),b+="</li>"},b+="</ul>",p.forEach(function(t){w(t)}),k=x.join("\n").replace(/\r\n/g,"\n"),window.localStorage.setItem(h,(0,r.md5)(y+k)),t.next=23,e.save(null,d,{value:v,str:k,html:b,flag:"mind"},i);case 23:return c.copying=!1,t.abrupt("return",p);case 25:case"end":return t.stop()}},t)}))).apply(this,arguments)}function w(t){return k.apply(this,arguments)}function k(){return(k=f(s().mark(function t(e){var r,n,i;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.e,n=e.that,S(),!E(r)){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,b({e:r,that:n,type:"cut"});case 6:null!=(i=t.sent)&&i.length&&(mind.model.removeTopic.call(mind,i,null),mind.util.clearSelect(),$.toast({type:"secondary",text:"主题剪切成功"}));case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function E(t){var e=(0,r.isEditTextElement)(t,!0);if(e){var n=t.target.querySelector(".area_box");if(!n)for(n=t.target;n&&(null===(i=n.classList)||void 0===i||!i.contains("area_box"));){var i;n=n.parentNode}if(!n||n.style.zIndex>0||n.style.opacity>0)return e}return 0}function S(){(0,t.clearClipboardFail)()&&window.localStorage.removeItem(h)}function _(t){return T.apply(this,arguments)}function T(){return(T=f(s().mark(function e(r){var n,i,o,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.e,r.that,S(),!E(n)){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,!(i=document.activeElement==document.body&&document.getSelection().toString())){e.next=10;break}return e.next=9,(0,t.writeText)(i,n);case 9:return e.abrupt("return",e.sent);case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(4);case 14:if(!(o=document.querySelector(".topic-image img.active"))||!mind.util.selectedIds){e.next=20;break}return e.next=18,L(o);case 18:return $.toast({type:"secondary",text:"图片复制成功"}),e.abrupt("return");case 20:return e.next=22,b({e:n,mind:mind,type:"copy"});case 22:null!=(a=e.sent)&&a.length&&$.toast({type:"secondary",text:"主题复制成功"});case 24:case"end":return e.stop()}},e,null,[[4,12]])}))).apply(this,arguments)}function L(t,e){return I.apply(this,arguments)}function I(){return(I=f(s().mark(function e(n,i){var o,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.imgToBlob)(n.src);case 2:return a=e.sent,window.localStorage.setItem(h,(0,r.md5)(m+n.src)),e.abrupt("return",(0,t.write)([new t.ClipboardItem((o={},c(o,a.type,a),c(o,"text/plain",(0,r.strToBlob)(n.src,"text/plain")),o))],i));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(t){return j.apply(this,arguments)}function j(){return(j=f(s().mark(function t(e){var i,o,a,c,u,l,p,f,d,h,y,m,g,b;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.e,e.that,e.insert,o=e.$,a=mind.operation,c=mind.events,u=mind.util,(l=u.getSelectedId())||document.activeElement!=document.body||mind.opts.readonly){t.next=6;break}return o.toast({type:"secondary",text:"请选择主题后，再进行粘贴"}),t.abrupt("return");case 6:return t.next=9,v(i);case 9:if(p=t.sent,f=p.blob,d=p.content,h=p.txt,y=p.type,m=p.imgUrl,null!=d){t.next=17;break}return t.abrupt("return");case 17:if(!["txt","html"].includes(y)){t.next=21;break}if(0==(g=E(i))){t.next=21;break}return t.abrupt("return",1==g?(0,r.pasteString)(h):(0,r.pasteString)(d,"html"==y));case 21:if(!mind.opts.readonly){t.next=23;break}return t.abrupt("return");case 23:if("image"!=y){t.next=37;break}if(m){t.next=32;break}if(!(f.size>2097152)){t.next=28;break}return o.toast({text:"图片大小不能超过2M",type:"warning"}),t.abrupt("return");case 28:return c.push("showuploading"),t.next=31,a.uploadImage(d);case 31:m=t.sent;case 32:return t.next=34,(0,r.loadImg)(m);case 34:return b=t.sent,a.setTopicImage.call(mind,l,m,b),t.abrupt("return");case 37:if("over"!=n.handleEvent.invokingfn("testTopicCount",mind)){t.next=39;break}return t.abrupt("return");case 39:["txt","html"].includes(y)?N({mind:mind,str:d,isHtml:"html"==y,pid:l}):M({id:l,content:d,mind:mind,$:o});case 41:case"end":return t.stop()}},t)}))).apply(this,arguments)}function P(t){return A.apply(this,arguments)}function A(){return(A=f(s().mark(function t(e){var r,i,o,a,c,u,l,p,f,d,h,y,m,v;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.pid,i=e.topics,e.that,o=e.$,a=mind.util,c=mind.model,"over"!=n.handleEvent.invokingfn("testTopicCount",mind)){t.next=4;break}return t.abrupt("return");case 4:if(r){t.next=8;break}return o.toast({type:"secondary",text:"请选择主题后，再进行粘贴"}),t.abrupt("return");case 8:if(u=c.getTopicById(r),null!=i){t.next=11;break}return t.abrupt("return");case 11:if(!mind.opts.readonly){t.next=13;break}return t.abrupt("return");case 13:for(l=a.getSelectedPart(mind,u),p={},f={},d=[],h=0,y=i.length;h<y;h++)m=i[h],v=o.extend(!0,{},m),c.resetTopicId(v,r),m.summary?(delete v.summary,delete v.range,delete v.part):v.free&&(delete v.free,delete v.pos,v.parent=id),d.push(v),p[v.id]=u.children.length,f[v.id]=l,mind.operation.updateNumber.call(mind,u);c.addTopicMulti.call(mind,a.copyArray(d),null,p,f),mind.plugins.showTopicsLen.call(mind);case 19:case"end":return t.stop()}},t)}))).apply(this,arguments)}function N(t){t.that;var e=t.str,r=t.isHtml,n=t.pid,i=t.mult,o=mind.util,a=mind.model,c=a.stringToNodes.call(mind,e,r,n,i);if(!a.copying){a.copying=!0;var u={},l={},s=a.getTopicById(n),p=o.getSelectedPart(mind,s);if(c.forEach(function(t,e){u[t.id]=s.children.length+e,l[t.id]=p}),a.addTopicMulti.call(mind,c,null,u,l),a.copying=!1,r)for(var f,d=/<path[^>]*>/,h=/<path[^\n\r>]*[\n\r][^>]*>/;h.test(e)&&(f=d.exec(e));)e=e.replace(f[0],f[0].replace(/\n|\r/g," "));var y=e.split(/\n|\r|<\/?br[^>]*>/g).filter(function(t){return!!t}).length;!i&&y>1&&1==c.length&&a.switchMultTopicTip.call(mind,n,c,r)}}function M(t){return G.apply(this,arguments)}function G(){return(G=f(s().mark(function t(e){var r,n,i,o,a,c,u,l,p,f,d,h,y,m,v;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.id,n=e.content,e.that,i=e.$,o=mind.model,a=mind.util,(c=n.list||[]).length){t.next=5;break}return t.abrupt("return");case 5:if(c.reverse(),!o.copying){t.next=8;break}return t.abrupt("return");case 8:if(o.copying=!0,!(u=o.getTopicById(r)).collapsed){t.next=14;break}return o.copying=!1,i.toast({type:"secondary",text:"主题折叠时不能粘贴，请展开后粘贴"}),t.abrupt("return");case 14:for(l=a.getSelectedPart(mind,u),p={},f={},d=[],h=0,y=c.length;h<y;h++)m=c[h],v=i.extend(!0,{},m),o.resetTopicId(v,r),m.summary?(delete v.summary,delete v.range,delete v.part):v.free&&(delete v.free,delete v.pos,v.parent=r),d.push(v),p[v.id]=u.children.length,f[v.id]=l,mind.operation.updateNumber.call(mind,u);o.addTopicMulti.call(mind,a.copyArray(d),null,p,f),mind.plugins.selectTopicOp.call(mind),i.toast({type:"secondary",text:"主题粘贴成功"}),o.copying=!1;case 22:case"end":return t.stop()}},t)}))).apply(this,arguments)}
},{"../../common/clipboard/util":"G1Mn","../../common/clipboard":"JaSQ","../../common/utils":"RKzI","./mind.handle.events":"PEFJ"}],"IXVj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=x,exports.cut=m,exports.diagramDis=void 0,exports.duplicate=d,exports.get=void 0,exports.getCopyData=v,exports.paste=k,exports.pasteDiagram=O;var t=a(require("../../common/clipboard")),e=require("../../common/clipboard/util"),r=require("../../common/utils"),n=require("./template.json"),o=require("../../mindmap/js/clipboard");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),u=new B(n||[]);return o(a,"_invoke",{value:j(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var d="suspendedStart",y="suspendedYield",m="executing",g="completed",v={};function x(){}function b(){}function w(){}var S={};p(S,a,function(){return this});var k=Object.getPrototypeOf,L=k&&k(k(D([])));L&&L!==r&&n.call(L,a)&&(S=L);var E=w.prototype=x.prototype=Object.create(S);function _(t){["next","throw","return"].forEach(function(e){p(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==u(p)&&n.call(p,"__await")?e.resolve(p.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(p).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,c)})}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=d;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=I(u,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function I(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(u(e)+" is not iterable")}return b.prototype=w,o(E,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=p(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},_(O.prototype),p(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(f(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(E),p(E,l,"Generator"),p(E,a,function(){return this}),p(E,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=D,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function s(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){s(i,n,o,a,u,"next",t)}function u(t){s(i,n,o,a,u,"throw",t)}a(void 0)})}}var p="clipboard_flow",f=exports.get=function(){var e=l(c().mark(function e(n){var i,a,u;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(n,p,"flow");case 2:if(" "!=(i=e.sent).content){e.next=8;break}i.content=t.getStorage(p),i.type="diagram",e.next=14;break;case 8:if("txt"!=i.type){e.next=14;break}if(a=window.localStorage.getItem(o.LAST_SAVE_KEY)){e.next=12;break}return e.abrupt("return",i);case 12:u=i.content.replace(/\r\n/g,"\n"),(0,r.md5)(o.LAST_SAVE_IMG+u)==a&&(i.type=o.LAST_SAVE_IMG,i.imgUrl=u);case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=exports.diagramDis={x:0,y:0,_step:20,reset:function(){this.x=0,this.y=0},step:function(){this.run(1)},run:function(t){this.x=this.x+this._step*t,this.y=this.y+this._step*t}};function d(t){return y.apply(this,arguments)}function y(){return(y=l(c().mark(function t(e){var r,n,o,i,a,u,s,l,p,f,h;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.e,n=e.Schema,o=e.Designer,i=e.Utils,a=e.Model,u=e.publicCLB,s=e.UI,l=e.memberObj,p=e.insert,f=e.$,t.next=3,x(r,i,u);case 3:if(!(h=t.sent)){t.next=7;break}return delete h.gridSelectObj,t.abrupt("return",O({content:h,Schema:n,Designer:o,Utils:i,Model:a,publicCLB:u}));case 7:return t.next=9,k({e:r,Schema:n,Designer:o,Utils:i,Model:a,publicCLB:u,UI:s,memberObj:l,insert:p,$:f});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},t)}))).apply(this,arguments)}function m(t,e,r,n){return g.apply(this,arguments)}function g(){return(g=l(c().mark(function t(r,n,o,i){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((0,e.clearClipboardFail)(),document.activeElement==document.body){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.copy(r,n,i);case 5:o.op.removeShape(),h.run(-1);case 7:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function v(t,e,r){var n=[],o=e.getSelected(),i=e.getFamilyShapes(o);o=o.concat(i);for(var a=0;a<o.length;a++){var u=e.copy(o[a]);"linker"==u.name&&(u.from.id&&!e.isSelected(u.from.id)&&(u.from.id=null,u.from.angle=null),u.to.id&&!e.isSelected(u.to.id)&&(u.to.id=null,u.to.angle=null)),n.push(u)}if(n.length){n.sort(function(t,e){return t.props.zindex-e.props.zindex});var c={list:n,client:r.client},s=e.gridSelectObj;return 1==n.length&&s.indexs.length&&n[0].id==s.id&&(c.gridSelectObj=s),h.reset(),c}}function x(t,e,r){return b.apply(this,arguments)}function b(){return(b=l(c().mark(function r(n,o,i){var a;return c().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if((0,e.clearClipboardFail)(),document.activeElement==document.body){r.next=3;break}return r.abrupt("return");case 3:return a=v(n,o,i),r.next=6,t.save(n,p,{value:a,flag:"flow"});case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}},r)}))).apply(this,arguments)}function w(t){return S.apply(this,arguments)}function S(){return(S=l(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){window.ExportImage("pnghd",e,function(e){t(e)})}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function k(t){return L.apply(this,arguments)}function L(){return(L=l(c().mark(function t(e){var o,i,a,u,s,l,p,h,d,y,m,g,v,x,b,w,S,k,L,E;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.x,i=e.y,a=e.e,u=e.Schema,s=e.Designer,l=e.Utils,p=e.Model,h=e.publicCLB,d=e.UI,e.memberObj,e.insert,y=e.$,t.next=3,f(a);case 3:if(m=t.sent,g=m.blob,v=m.content,x=m.txt,b=m.type,w=m.imgUrl,null!=v){t.next=11;break}return t.abrupt("return");case 11:if(!["txt","html"].includes(b)){t.next=15;break}if(document.activeElement==document.body){t.next=15;break}return S=["textarea","input"].includes(document.activeElement.tagName.toLowerCase()),t.abrupt("return",S?(0,r.pasteString)(x):(0,r.pasteString)(v,"html"==b));case 15:if("image"!=b){t.next=29;break}if(w){t.next=24;break}if(!(g.size>2097152)){t.next=21;break}return y.toast({text:"图片大小不能超过2M",type:"warning"}),t.abrupt("return");case 21:return t.next=23,s.op.uploadImage(v);case 23:w=t.sent;case 24:return t.next=26,(0,r.loadImg)(w);case 26:return k=t.sent,d.insertImage(w,k.width,k.height),t.abrupt("return");case 29:if(!["txt","html"].includes(b)){t.next=41;break}if(s.events.push("testVip","flowShapeNum")){t.next=33;break}return s.events.push("vipLimit","flowShapeNum"),t.abrupt("return");case 33:L=l.copy(Object.assign({},n.basic,n.text)),"txt"==b&&(v=Util.filterXss(v),l.autoTextHeight(L,v)),L.textBlock[0].text=v,L.id=(0,r.md5)(v),E=_(),L.props.x=E.x-L.props.w/2,L.props.y=E.y-L.props.h/2<0?0:E.y-L.props.h/2,v={list:[L],client:h.client};case 41:return t.abrupt("return",O({x:o,y:i,content:v,Schema:u,Designer:s,Utils:l,Model:p,publicCLB:h}));case 42:case"end":return t.stop()}},t)}))).apply(this,arguments)}function E(t,e){var r={};return t.forEach(function(t){r[t.id]=e.newId(),t.group&&!r[t.group]&&(r[t.group]=e.newId())}),r}function _(){var t=document.getElementById("designer_layout"),e=t.scrollTop,r=t.scrollLeft,n=t.offsetHeight,o=t.offsetWidth;return{x:r-Designer.config.pageMargin+o.restoreScale()/2,y:e-Designer.config.pageMargin+n.restoreScale()/2}}function O(t){return j.apply(this,arguments)}function j(){return(j=l(c().mark(function t(e){var r,n,o,i,a,u,s,l,p,f,d,y,m,g,v,x,b,w,S,k,L,O,j,I,P;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.x,n=e.y,o=e.content,i=e.Schema,a=e.Designer,u=e.Utils,s=e.Model,l=e.publicCLB,a.events.push("testVip","flowShapeNum")){t.next=4;break}return a.events.push("vipLimit","flowShapeNum"),t.abrupt("return");case 4:if(p=o.list,f=void 0===p?[]:p,d=o.gridSelectObj,y=void 0===d?{}:d,m=o.client,f.length){t.next=7;break}return t.abrupt("return");case 7:if(f.forEach(function(t){"linker"!=t.name&&i.initShapeFunctions(t)}),null==r&&l.client!=m&&(g=_(),r=g.x,n=g.y),v=u.gridSelectObj,!y.id||0==v.indexs.length){t.next=19;break}return x="",y.indexs.map(function(t,e){var r="&nbsp;";if(0==e){r="";var n=y.rows[e],o=y.columns[e];b=f[0].path[n][o].fillStyle,w=f[0].textBlock[t].fontStyle}x+=r+(f[0].textBlock[t].text||"")}),S=s.getShapeById(v.id),v.indexs.map(function(t,e){S.textBlock[t].text=x;var r=v.rows[e],n=v.columns[e];b?S.path[r][n].fillStyle=u.copy(b):delete S.path[r][n].fillStyle,w?S.textBlock[t].fontStyle=u.copy(w):delete S.textBlock[t].fontStyle}),i.initShapeFunctions(S),s.update(S),a.painter.renderShape(S),t.abrupt("return");case 19:k=0,L=0,null!=r?(O=u.getShapesBounding(f),k=r-O.x,L=n-O.y):(h.step(),k=h.x,L=h.y),j=E(f,u),I=[],f.forEach(function(t,e){t.props.zindex=s.maxZIndex+e+1,t.props.x+=k,t.props.y+=L,"linker"==t.name&&(t.from.id&&(t.from.id=j[t.from.id]),t.from.x+=k,t.from.y+=L,t.to.id&&(t.to.id=j[t.to.id]),t.to.x+=k,t.to.y+=L,t.points.forEach(function(t){t.x+=k,t.y+=L}),t.textPos&&(t.textPos.x+=k,t.textPos.y+=L)),t.dataAttributes||(t.dataAttributes=[]),t.dataAttributes.forEach(function(t){t.id=u.newId()}),t.children&&(t.children=t.children.map(function(t){return j[t]})),t.parent&&(t.parent=j[t.parent]),t.group&&(t.group=j[t.group]),t.container&&(t.container=j[t.container]);var r=j[t.id];t.id=r,I[e]=r}),s.addMulti(f),f.forEach(function(t){a.painter.renderShape(t)}),P=u.getControlBox(I),a.op.changeCanvas(P),s.build(),u.unselect(),u.selectShape(I),u.shapesCount();case 32:case"end":return t.stop()}},t)}))).apply(this,arguments)}
},{"../../common/clipboard":"JaSQ","../../common/clipboard/util":"G1Mn","../../common/utils":"RKzI","./template.json":"ueWq","../../mindmap/js/clipboard":"YVdD"}],"uKLG":[function(require,module,exports) {
module.exports={changeType:{desc:"每种图表可以切换的图表类型",chart_bar_common:["chart_bar_random","chart_bar_stack","chart_bar_group"],chart_bar_random:["chart_bar_common","chart_bar_stack","chart_bar_group"],chart_bar_stack:["chart_bar_common","chart_bar_random","chart_bar_group"],chart_bar_group:["chart_bar_common","chart_bar_random","chart_bar_stack"],chart_column_common:["chart_column_stack","chart_column_group"],chart_column_stack:["chart_column_common","chart_column_group"],chart_column_group:["chart_column_common","chart_column_stack"],chart_line_zigzag:["chart_line_smooth"],chart_line_smooth:["chart_line_zigzag"],chart_bubble_common:["chart_bubble_3d"],chart_bubble_3d:["chart_bubble_common"],chart_pie_inner:["chart_pie_doughnut"],chart_pie_doughnut:["chart_pie_inner"]},changeOptions:{desc:"图表切换时需要修改的options中的属性,默认切换时都需要根据data修改seriesField",bar_common_2_bar_random:{del:[],change:{seriesField:"xField",groupField:"seriesField"}},bar_common_2_bar_stack:{del:["isGroup"],change:{label:{position:"middle",style:{fill:"#595959"}},isStack:!0}},bar_common_2_bar_group:{del:[],change:{}},bar_random_2_bar_common:{del:["groupField"],change:{seriesField:"seriesField"}},bar_random_2_bar_stack:{del:["isGroup","groupField"],change:{label:{position:"middle",style:{fill:"#595959"}},isStack:!0,seriesField:"seriesField"}},bar_random_2_bar_group:{del:[],change:{seriesField:"seriesField"}},bar_stack_2_bar_common:{del:["isStack"],change:{label:{position:"right",style:{fill:"#595959"}},isGroup:!0}},bar_stack_2_bar_random:{del:["isStack"],change:{seriesField:"xField",isGroup:!0,groupField:"seriesField"}},bar_stack_2_bar_group:{del:["isStack"],change:{label:{position:"right",style:{fill:"#595959"}},isGroup:!0}},bar_group_2_bar_common:{del:[],change:{isStack:!0}},bar_group_2_bar_random:{del:[],change:{seriesField:"xField",label:{position:"right",style:{fill:"#595959"}},groupField:"seriesField"}},bar_group_2_bar_stack:{del:["isGroup"],change:{label:{position:"left",style:{fill:"#595959"}},isStack:!0}},column_common_2_column_stack:{del:["isGroup"],change:{label:{position:"middle",style:{fill:"#595959"}},isStack:!0}},column_common_2_column_group:{del:[],change:{}},column_stack_2_column_group:{del:["isStack"],change:{isGroup:!0,label:{position:"top",style:{fill:"#595959"}}}},column_stack_2_column_common:{del:["isStack"],change:{label:{position:"top",style:{fill:"#595959"}},isGroup:!0}},column_group_2_column_stack:{del:["isGroup"],change:{isStack:!0,label:{position:"middle",style:{fill:"#595959"}}}},column_group_2_column_common:{del:[],change:{}},line_zigzag_2_line_smooth:{del:[],change:{smooth:!0}},line_smooth_2_line_zigzag:{del:["smooth"],change:{}},bubble_common_2_bubble_3d:{del:["pointStyle"],change:{color:["r(0.4, 0.3, 0.7) 0:rgba(255,255,255,0.5) 1:#5B8FF9","r(0.4, 0.3, 0.7) 0:rgba(255,255,255,0.5) 1:#61DDAA"],colorField:"seriesField"}},bubble_3d_2_bubble_common:{del:["color"],change:{}},pie_inner_2_pie_doughnut:{del:[""],change:{innerRadius:.6,statistic:{title:!1,content:{content:""}}}},pie_doughnut_2_pie_inner:{del:["innerRadius"],change:{}}},typeToTitle:{desc:"根据type修改shape.title",bar:"条形图",column:"柱状图",line:"折线图",bubble:"气泡图",scatter:"散点图",pie:"饼图",radar:"雷达图"}};
},{}],"c5ZJ":[function(require,module,exports) {

},{"./../../v5_editor/static/assets/iconfont/font_2726378/iconfont.woff2":[["iconfont.45921365.woff2","PX1x"],"PX1x"],"./../../v5_editor/static/assets/iconfont/font_2726378/iconfont.woff":[["iconfont.031dd84d.woff","kB2G"],"kB2G"],"./../../v5_editor/static/assets/iconfont/font_2726378/iconfont.ttf":[["iconfont.a538425c.ttf","cqu3"],"cqu3"],"./font/Alibaba-PuHuiTi-Regular.woff2":[["Alibaba-PuHuiTi-Regular.28c2bf89.woff2","gBC2"],"gBC2"],"./font/CangErYuMoW02-2.ttf":[["CangErYuMoW02-2.1daf53d7.ttf","nDnY"],"nDnY"],"./font/SourceHanSansCN-Bold-syheiti.woff2":[["SourceHanSansCN-Bold-syheiti.158118ac.woff2","SLra"],"SLra"],"./font/SourceHanSerifCN-Regular-sysongti.woff2":[["SourceHanSerifCN-Regular-sysongti.14b665f8.woff2","Ylgq"],"Ylgq"],"./font/Beau-2.ttf":[["Beau-2.74654909.ttf","yQ8j"],"yQ8j"],"./font/Bertha-Regular.ttf":[["Bertha-Regular.2d6d38a0.ttf","h7Zn"],"h7Zn"],"./font/brelaregular-2.otf":[["brelaregular-2.10874205.otf","ZIKQ"],"ZIKQ"],"./font/RUBIKS-CUBE-1.ttf":[["RUBIKS-CUBE-1.a941bd7e.ttf","jzBo"],"jzBo"]}],"M7Y9":[function(require,module,exports) {

},{"./../image/link.svg":[["link.0b1fccce.svg","ySpN"],"ySpN"],"./../image/rotate.svg":[["rotate.44fbc97b.svg","iw4j"],"iw4j"],"./../image/comment.svg":[["comment.93b510d4.svg","HlR3"],"HlR3"]}],"wKBg":[function(require,module,exports) {

},{"./../image/data-attr-icons.png":[["data-attr-icons.d8c32c35.png","vsvY"],"vsvY"]}],"WhC9":[function(require,module,exports) {

},{}],"fZsY":[function(require,module,exports) {

},{}],"TCx6":[function(require,module,exports) {

},{"./fonts/KaTeX_AMS-Regular.woff2":[["KaTeX_AMS-Regular.4a93647a.woff2","YP9P"],"YP9P"],"./fonts/KaTeX_AMS-Regular.woff":[["KaTeX_AMS-Regular.662be83a.woff","VI1r"],"VI1r"],"./fonts/KaTeX_AMS-Regular.ttf":[["KaTeX_AMS-Regular.305cf4a7.ttf","u3hm"],"u3hm"],"./fonts/KaTeX_Caligraphic-Bold.woff2":[["KaTeX_Caligraphic-Bold.887a873e.woff2","VceN"],"VceN"],"./fonts/KaTeX_Caligraphic-Bold.woff":[["KaTeX_Caligraphic-Bold.e5df4eea.woff","aovA"],"aovA"],"./fonts/KaTeX_Caligraphic-Bold.ttf":[["KaTeX_Caligraphic-Bold.59a741fb.ttf","EQGR"],"EQGR"],"./fonts/KaTeX_Caligraphic-Regular.woff2":[["KaTeX_Caligraphic-Regular.15a2d80b.woff2","Jy6i"],"Jy6i"],"./fonts/KaTeX_Caligraphic-Regular.woff":[["KaTeX_Caligraphic-Regular.b0d369f5.woff","BBX5"],"BBX5"],"./fonts/KaTeX_Caligraphic-Regular.ttf":[["KaTeX_Caligraphic-Regular.5d3f5ed3.ttf","S8os"],"S8os"],"./fonts/KaTeX_Fraktur-Bold.woff2":[["KaTeX_Fraktur-Bold.0d132729.woff2","kkxZ"],"kkxZ"],"./fonts/KaTeX_Fraktur-Bold.woff":[["KaTeX_Fraktur-Bold.81907202.woff","kfwh"],"kfwh"],"./fonts/KaTeX_Fraktur-Bold.ttf":[["KaTeX_Fraktur-Bold.e0770d4d.ttf","BeZo"],"BeZo"],"./fonts/KaTeX_Fraktur-Regular.woff2":[["KaTeX_Fraktur-Regular.adbdfe21.woff2","nfmA"],"nfmA"],"./fonts/KaTeX_Fraktur-Regular.woff":[["KaTeX_Fraktur-Regular.b8874eec.woff","niQJ"],"niQJ"],"./fonts/KaTeX_Fraktur-Regular.ttf":[["KaTeX_Fraktur-Regular.77ad1d51.ttf","vhD6"],"vhD6"],"./fonts/KaTeX_Main-Bold.woff2":[["KaTeX_Main-Bold.ed47481b.woff2","HzMV"],"HzMV"],"./fonts/KaTeX_Main-Bold.woff":[["KaTeX_Main-Bold.67f0a093.woff","RB9b"],"RB9b"],"./fonts/KaTeX_Main-Bold.ttf":[["KaTeX_Main-Bold.bd10393d.ttf","DdyW"],"DdyW"],"./fonts/KaTeX_Main-BoldItalic.woff2":[["KaTeX_Main-BoldItalic.c30353d1.woff2","nX7z"],"nX7z"],"./fonts/KaTeX_Main-BoldItalic.woff":[["KaTeX_Main-BoldItalic.3fa35509.woff","SQDD"],"SQDD"],"./fonts/KaTeX_Main-BoldItalic.ttf":[["KaTeX_Main-BoldItalic.74fd0551.ttf","LMqm"],"LMqm"],"./fonts/KaTeX_Main-Italic.woff2":[["KaTeX_Main-Italic.083109ef.woff2","QfMW"],"QfMW"],"./fonts/KaTeX_Main-Italic.woff":[["KaTeX_Main-Italic.a25f4974.woff","PORl"],"PORl"],"./fonts/KaTeX_Main-Italic.ttf":[["KaTeX_Main-Italic.05bc1eb2.ttf","tvgo"],"tvgo"],"./fonts/KaTeX_Math-BoldItalic.woff2":[["KaTeX_Math-BoldItalic.92414821.woff2","e7dZ"],"e7dZ"],"./fonts/KaTeX_Math-BoldItalic.woff":[["KaTeX_Math-BoldItalic.f223b076.woff","gPk8"],"gPk8"],"./fonts/KaTeX_Math-BoldItalic.ttf":[["KaTeX_Math-BoldItalic.33cb3788.ttf","yBBO"],"yBBO"],"./fonts/KaTeX_Math-Italic.woff2":[["KaTeX_Math-Italic.4107a7cd.woff2","hHhl"],"hHhl"],"./fonts/KaTeX_Math-Italic.woff":[["KaTeX_Math-Italic.9ef7c244.woff","Fnjd"],"Fnjd"],"./fonts/KaTeX_Math-Italic.ttf":[["KaTeX_Math-Italic.b3e67c8a.ttf","OuIn"],"OuIn"],"./fonts/KaTeX_SansSerif-Bold.woff2":[["KaTeX_SansSerif-Bold.33d5ecab.woff2","wL5f"],"wL5f"],"./fonts/KaTeX_SansSerif-Bold.woff":[["KaTeX_SansSerif-Bold.22e5eb34.woff","mXsQ"],"mXsQ"],"./fonts/KaTeX_SansSerif-Bold.ttf":[["KaTeX_SansSerif-Bold.a96f8baa.ttf","kOex"],"kOex"],"./fonts/KaTeX_SansSerif-Italic.woff2":[["KaTeX_SansSerif-Italic.79fd7b97.woff2","XVoN"],"XVoN"],"./fonts/KaTeX_SansSerif-Italic.woff":[["KaTeX_SansSerif-Italic.b15457e7.woff","lpAP"],"lpAP"],"./fonts/KaTeX_SansSerif-Italic.ttf":[["KaTeX_SansSerif-Italic.dde4ac90.ttf","jdXo"],"jdXo"],"./fonts/KaTeX_SansSerif-Regular.woff2":[["KaTeX_SansSerif-Regular.67a28cba.woff2","vft9"],"vft9"],"./fonts/KaTeX_SansSerif-Regular.woff":[["KaTeX_SansSerif-Regular.ab2d90dd.woff","hTxl"],"hTxl"],"./fonts/KaTeX_SansSerif-Regular.ttf":[["KaTeX_SansSerif-Regular.9f7bc209.ttf","ydjb"],"ydjb"],"./fonts/KaTeX_Script-Regular.woff2":[["KaTeX_Script-Regular.36a065ff.woff2","Onwc"],"Onwc"],"./fonts/KaTeX_Script-Regular.woff":[["KaTeX_Script-Regular.41a9237c.woff","BVKs"],"BVKs"],"./fonts/KaTeX_Script-Regular.ttf":[["KaTeX_Script-Regular.1c0af9e0.ttf","vjfZ"],"vjfZ"],"./fonts/KaTeX_Size1-Regular.woff2":[["KaTeX_Size1-Regular.c8541226.woff2","NQ5m"],"NQ5m"],"./fonts/KaTeX_Size1-Regular.woff":[["KaTeX_Size1-Regular.bd24b5b5.woff","qGcr"],"qGcr"],"./fonts/KaTeX_Size1-Regular.ttf":[["KaTeX_Size1-Regular.92957323.ttf","lx93"],"lx93"],"./fonts/KaTeX_Size2-Regular.woff2":[["KaTeX_Size2-Regular.a0450152.woff2","Oqun"],"Oqun"],"./fonts/KaTeX_Size2-Regular.woff":[["KaTeX_Size2-Regular.bcda7645.woff","IfxS"],"IfxS"],"./fonts/KaTeX_Size2-Regular.ttf":[["KaTeX_Size2-Regular.62224b89.ttf","r5l4"],"r5l4"],"./fonts/KaTeX_Size3-Regular.woff2":[["KaTeX_Size3-Regular.812b8150.woff2","XZtk"],"XZtk"],"./fonts/KaTeX_Size3-Regular.woff":[["KaTeX_Size3-Regular.1e55ce46.woff","tQR4"],"tQR4"],"./fonts/KaTeX_Size3-Regular.ttf":[["KaTeX_Size3-Regular.60476f00.ttf","A5KV"],"A5KV"],"./fonts/KaTeX_Size4-Regular.woff2":[["KaTeX_Size4-Regular.5f02ed9c.woff2","OY7R"],"OY7R"],"./fonts/KaTeX_Size4-Regular.woff":[["KaTeX_Size4-Regular.9e025280.woff","XAXT"],"XAXT"],"./fonts/KaTeX_Size4-Regular.ttf":[["KaTeX_Size4-Regular.b5c9aac1.ttf","Ikmm"],"Ikmm"],"./fonts/KaTeX_Typewriter-Regular.woff2":[["KaTeX_Typewriter-Regular.bf8bccc4.woff2","wvMG"],"wvMG"],"./fonts/KaTeX_Typewriter-Regular.woff":[["KaTeX_Typewriter-Regular.d723e424.woff","yiGJ"],"yiGJ"],"./fonts/KaTeX_Typewriter-Regular.ttf":[["KaTeX_Typewriter-Regular.2e42bb58.ttf","ILS7"],"ILS7"]}],"eWbC":[function(require,module,exports) {

},{"./../../common/images/default/loading_on_dark.gif":[["loading_on_dark.6fd95209.gif","is5S"],"is5S"]}],"gPHy":[function(require,module,exports) {
var define;
var e;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n,r){var i,o,a=t(r),s=n.location,u=n.document,l=u.documentElement,c=n.jQuery,f=n.$,p={},d=[],h=d.concat,m=d.push,g=d.slice,y=d.indexOf,v=p.toString,b=p.hasOwnProperty,x="1.10.2".trim,w=function e(t,n){return new e.fn.init(t,n,o)},T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,C=/\S+/g,N=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,A=/(?:^|:|,)(?:\s*\[)+/g,j=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,D=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,L=/^-ms-/,H=/-([\da-z])/gi,q=function(e,t){return t.toUpperCase()},_=function(e){(u.addEventListener||"load"===e.type||"complete"===u.readyState)&&(M(),w.ready())},M=function(){u.addEventListener?(u.removeEventListener("DOMContentLoaded",_,!1),n.removeEventListener("load",_,!1)):(u.detachEvent("onreadystatechange",_),n.detachEvent("onload",_))};function O(e){var t=e.length,n=w.type(e);return!w.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}w.fn=w.prototype={jquery:"1.10.2",constructor:w,init:function(e,t,n){var i,o;if(!e)return this;if("string"==typeof e){if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:k.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),E.test(i[1])&&w.isPlainObject(t))for(i in t)w.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if((o=u.getElementById(i[2]))&&o.parentNode){if(o.id!==i[2])return n.find(e);this.length=1,this[0]=o}return this.context=u,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):w.isFunction(e)?n.ready(e):(e.selector!==r&&(this.selector=e.selector,this.context=e.context),w.makeArray(e,this))},selector:"",length:0,toArray:function(){return g.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return w.each(this,e,t)},ready:function(e){return w.ready.promise().done(e),this},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:m,sort:[].sort,splice:[].splice},w.fn.init.prototype=w.fn,w.extend=w.fn.extend=function(){var e,n,i,o,a,s,u=arguments[0]||{},l=1,c=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},l=2),"object"===t(u)||w.isFunction(u)||(u={}),c===l&&(u=this,--l);l<c;l++)if(null!=(a=arguments[l]))for(o in a)e=u[o],u!==(i=a[o])&&(f&&i&&(w.isPlainObject(i)||(n=w.isArray(i)))?(n?(n=!1,s=e&&w.isArray(e)?e:[]):s=e&&w.isPlainObject(e)?e:{},u[o]=w.extend(f,s,i)):i!==r&&(u[o]=i));return u},w.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(e){return n.$===w&&(n.$=f),e&&n.jQuery===w&&(n.jQuery=c),w},isReady:!1,readyWait:1,holdReady:function(e){e?w.readyWait++:w.ready(!0)},ready:function(e){if(!0===e?!--w.readyWait:!w.isReady){if(!u.body)return setTimeout(w.ready);w.isReady=!0,!0!==e&&--w.readyWait>0||(i.resolveWith(u,[w]),w.fn.trigger&&w(u).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===w.type(e)},isArray:Array.isArray||function(e){return"array"===w.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"===t(e)||"function"==typeof e?p[v.call(e)]||"object":t(e)},isPlainObject:function(e){var t;if(!e||"object"!==w.type(e)||e.nodeType||w.isWindow(e))return!1;try{if(e.constructor&&!b.call(e,"constructor")&&!b.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(w.support.ownLast)for(t in e)return b.call(e,t);for(t in e);return t===r||b.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||u;var r=E.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=w.buildFragment([e],t,i),i&&w(i).remove(),w.merge([],r.childNodes))},parseJSON:function(e){return n.JSON&&n.JSON.parse?n.JSON.parse(e):null===e?e:"string"==typeof e&&(e=w.trim(e))&&S.test(e.replace(j,"@").replace(D,"]").replace(A,""))?new Function("return "+e)():void w.error("Invalid JSON: "+e)},parseXML:function(e){var t;if(!e||"string"!=typeof e)return null;try{n.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(i){t=r}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){e&&w.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(e){return e.replace(L,"ms-").replace(H,q)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r=0,i=e.length,o=O(e);if(n){if(o)for(;r<i&&!1!==t.apply(e[r],n);r++);else for(r in e)if(!1===t.apply(e[r],n))break}else if(o)for(;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:x&&!x.call("\ufeff ")?function(e){return null==e?"":x.call(e)}:function(e){return null==e?"":(e+"").replace(N,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(O(Object(e))?w.merge(n,"string"==typeof e?[e]:e):m.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(y)return y.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=t.length,i=e.length,o=0;if("number"==typeof n)for(;o<n;o++)e[i++]=t[o];else for(;t[o]!==r;)e[i++]=t[o++];return e.length=i,e},grep:function(e,t,n){var r=[],i=0,o=e.length;for(n=!!n;i<o;i++)n!==!!t(e[i],i)&&r.push(e[i]);return r},map:function(e,t,n){var r,i=0,o=e.length,a=[];if(O(e))for(;i<o;i++)null!=(r=t(e[i],i,n))&&(a[a.length]=r);else for(i in e)null!=(r=t(e[i],i,n))&&(a[a.length]=r);return h.apply([],a)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(o=e[t],t=e,e=o),w.isFunction(e)?(n=g.call(arguments,2),i=function(){return e.apply(t||this,n.concat(g.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i):r},access:function(e,t,n,i,o,a,s){var u=0,l=e.length,c=null==n;if("object"===w.type(n))for(u in o=!0,n)w.access(e,t,u,n[u],!0,a,s);else if(i!==r&&(o=!0,w.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(w(e),n)})),t))for(;u<l;u++)t(e[u],n,s?i:i.call(e[u],u,t(e[u],n)));return o?e:c?t.call(e):l?t(e[0],n):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i}}),w.ready.promise=function(e){if(!i)if(i=w.Deferred(),"complete"===u.readyState)setTimeout(w.ready);else if(u.addEventListener)u.addEventListener("DOMContentLoaded",_,!1),n.addEventListener("load",_,!1);else{u.attachEvent("onreadystatechange",_),n.attachEvent("onload",_);var t=!1;try{t=null==n.frameElement&&u.documentElement}catch(r){}t&&t.doScroll&&function e(){if(!w.isReady){try{t.doScroll("left")}catch(r){return setTimeout(e,50)}M(),w.ready()}}()}return i.promise(e)},w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()}),o=w(u),function(e,n){var r,i,o,a,s,u,l,c,f,p,d,h,m,g,y,v,b,x="sizzle"+-new Date,T=e.document,C=0,N=0,k=se(),E=se(),S=se(),A=!1,j=function(e,t){return e===t?(A=!0,0):0},D=t(void 0),L=1<<31,H={}.hasOwnProperty,q=[],_=q.pop,M=q.push,O=q.push,F=q.slice,B=q.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",W="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",$=W.replace("w","w#"),I="\\["+R+"*("+W+")"+R+"*(?:([*^$|!~]?=)"+R+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+$+")|)|)"+R+"*\\]",z=":("+W+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",X=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),U=new RegExp("^"+R+"*,"+R+"*"),V=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),Y=new RegExp(R+"*[+~]"),J=new RegExp("="+R+"*([^\\]'\"]*)"+R+"*\\]","g"),G=new RegExp(z),Q=new RegExp("^"+$+"$"),K={ID:new RegExp("^#("+W+")"),CLASS:new RegExp("^\\.("+W+")"),TAG:new RegExp("^("+W.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Z=/^[^{]+\{\s*\[native \w/,ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/^(?:input|select|textarea|button)$/i,ne=/^h\d$/i,re=/'|\\/g,ie=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),oe=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{O.apply(q=F.call(T.childNodes),T.childNodes),q[T.childNodes.length].nodeType}catch(Ce){O={apply:q.length?function(e,t){M.apply(e,F.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,n,r){var o,s,u,c,f,h,y,v,w,C;if((t?t.ownerDocument||t:T)!==d&&p(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(c=(t=t||d).nodeType)&&9!==c)return[];if(m&&!r){if(o=ee.exec(e))if(u=o[1]){if(9===c){if(!(s=t.getElementById(u))||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&b(t,s)&&s.id===u)return n.push(s),n}else{if(o[2])return O.apply(n,t.getElementsByTagName(e)),n;if((u=o[3])&&i.getElementsByClassName&&t.getElementsByClassName)return O.apply(n,t.getElementsByClassName(u)),n}if(i.qsa&&(!g||!g.test(e))){if(v=y=x,w=t,C=9===c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(h=ge(e),(y=t.getAttribute("id"))?v=y.replace(re,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",f=h.length;f--;)h[f]=v+ye(h[f]);w=Y.test(e)&&t.parentNode||t,C=h.join(",")}if(C)try{return O.apply(n,w.querySelectorAll(C)),n}catch(N){}finally{y||t.removeAttribute("id")}}}return function(e,t,n,r){var o,s,u,c,f,p=ge(e);if(!r&&1===p.length){if((s=p[0]=p[0].slice(0)).length>2&&"ID"===(u=s[0]).type&&i.getById&&9===t.nodeType&&m&&a.relative[s[1].type]){if(!(t=(a.find.ID(u.matches[0].replace(ie,oe),t)||[])[0]))return n;e=e.slice(s.shift().value.length)}for(o=K.needsContext.test(e)?0:s.length;o--&&(u=s[o],!a.relative[c=u.type]);)if((f=a.find[c])&&(r=f(u.matches[0].replace(ie,oe),Y.test(s[0].type)&&t.parentNode||t))){if(s.splice(o,1),!(e=r.length&&ye(s)))return O.apply(n,r),n;break}}return l(e,p)(r,t,!m,n,Y.test(e)),n}(e.replace(X,"$1"),t,n,r)}function se(){var e=[];return function t(n,r){return e.push(n+=" ")>a.cacheLength&&delete t[e.shift()],t[n]=r}}function ue(e){return e[x]=!0,e}function le(e){var t=d.createElement("div");try{return!!e(t)}catch(Ce){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var n=e.split("|"),r=e.length;r--;)a.attrHandle[n[r]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return ue(function(t){return t=+t,ue(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}for(r in u=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},i=ae.support={},p=ae.setDocument=function(e){var n=e?e.ownerDocument||e:T,r=n.defaultView;return n!==d&&9===n.nodeType&&n.documentElement?(d=n,h=n.documentElement,m=!u(n),r&&r.attachEvent&&r!==r.top&&r.attachEvent("onbeforeunload",function(){p()}),i.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=le(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=le(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),i.getById=le(function(e){return h.appendChild(e).id=x,!n.getElementsByName||!n.getElementsByName(x).length}),i.getById?(a.find.ID=function(e,n){if(t(n.getElementById)!==D&&m){var r=n.getElementById(e);return r&&r.parentNode?[r]:[]}},a.filter.ID=function(e){var t=e.replace(ie,oe);return function(e){return e.getAttribute("id")===t}}):(delete a.find.ID,a.filter.ID=function(e){var n=e.replace(ie,oe);return function(e){var r=t(e.getAttributeNode)!==D&&e.getAttributeNode("id");return r&&r.value===n}}),a.find.TAG=i.getElementsByTagName?function(e,n){if(t(n.getElementsByTagName)!==D)return n.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},a.find.CLASS=i.getElementsByClassName&&function(e,n){if(t(n.getElementsByClassName)!==D&&m)return n.getElementsByClassName(e)},y=[],g=[],(i.qsa=Z.test(n.querySelectorAll))&&(le(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+R+"*(?:value|"+P+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),le(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(i.matchesSelector=Z.test(v=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&le(function(e){i.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),y.push("!=",z)}),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),b=Z.test(h.contains)||h.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=h.compareDocumentPosition?function(e,t){if(e===t)return A=!0,0;var r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return r?1&r||!i.sortDetached&&t.compareDocumentPosition(e)===r?e===n||b(T,e)?-1:t===n||b(T,t)?1:f?B.call(f,e)-B.call(f,t):0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],u=[t];if(e===t)return A=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:f?B.call(f,e)-B.call(f,t):0;if(o===a)return fe(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;s[i]===u[i];)i++;return i?fe(s[i],u[i]):s[i]===T?-1:u[i]===T?1:0},n):d},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(J,"='$1']"),i.matchesSelector&&m&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var n=v.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Ce){}return ae(t,d,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var n=a.attrHandle[t.toLowerCase()],r=n&&H.call(a.attrHandle,t.toLowerCase())?n(e,t,!m):void 0;return void 0===r?i.attributes||!m?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null:r},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],r=0,o=0;if(A=!i.detectDuplicates,f=!i.sortStable&&e.slice(0),e.sort(j),A){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return e},s=ae.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},(a=ae.selectors={cacheLength:50,createPseudo:ue,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ie,oe),e[3]=(e[4]||e[5]||"").replace(ie,oe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return K.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&G.test(n)&&(t=ge(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ie,oe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var n=k[e+" "];return n||(n=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&k(e,function(e){return n.test("string"==typeof e.className&&e.className||t(e.getAttribute)!==D&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ae.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(d=(l=(c=g[x]||(g[x]={}))[e]||[])[0]===C&&l[1],p=l[0]===C&&l[2],f=d&&g.childNodes[d];f=++d&&f&&f[m]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[C,d,p];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===C)p=l[1];else for(;(f=++d&&f&&f[m]||(p=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++p||(v&&((f[x]||(f[x]={}))[e]=[C,p]),f!==t)););return(p-=i)===r||p%r==0&&p/r>=0}}},PSEUDO:function(e,t){var n,r=a.pseudos[e]||a.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],a.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=B.call(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ue(function(e){var t=[],n=[],r=l(e.replace(X,"$1"));return r[x]?ue(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ue(function(e){return function(t){return ae(e,t).length>0}}),contains:ue(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:ue(function(e){return Q.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(ie,oe).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!a.pseudos.empty(e)},header:function(e){return ne.test(e.nodeName)},input:function(e){return te.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=a.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[r]=pe(r);for(r in{submit:!0,reset:!0})a.pseudos[r]=de(r);function me(){}function ge(e,t){var n,r,i,o,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=a.preFilter;s;){for(o in n&&!(r=U.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(i=[])),n=!1,(r=V.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(X," ")}),s=s.slice(n.length)),a.filter)!(r=K[o].exec(s))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ae.error(e):E(e,u).slice(0)}function ye(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(e,t,n){var r=t.dir,i=n&&"parentNode"===r,a=N++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var u,l,c,f=C+" "+a;if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if((l=(c=t[x]||(t[x]={}))[r])&&l[0]===f){if(!0===(u=l[1])||u===o)return!0===u}else if((l=c[r]=[f])[1]=e(t,n,s)||o,!0===l[1])return!0}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function we(e,t,n,r,i,o){return r&&!r[x]&&(r=we(r)),i&&!i[x]&&(i=we(i,o)),ue(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ae(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:xe(m,p,e,s,u),y=n?i||(o?e:h||r)?[]:a:g;if(n&&n(g,y,s,u),r)for(l=xe(y,d),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(y[d[c]]=!(g[d[c]]=f));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(f=y[c])&&l.push(g[c]=f);i(null,y=[],l,u)}for(c=y.length;c--;)(f=y[c])&&(l=i?B.call(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else y=xe(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):O.apply(a,y)})}function Te(e){for(var t,n,r,i=e.length,o=a.relative[e[0].type],s=o||a.relative[" "],u=o?1:0,l=ve(function(e){return e===t},s,!0),f=ve(function(e){return B.call(t,e)>-1},s,!0),p=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?l(e,n,r):f(e,n,r))}];u<i;u++)if(n=a.relative[e[u].type])p=[ve(be(p),n)];else{if((n=a.filter[e[u].type].apply(null,e[u].matches))[x]){for(r=++u;r<i&&!a.relative[e[r].type];r++);return we(u>1&&be(p),u>1&&ye(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(X,"$1"),n,u<r&&Te(e.slice(u,r)),r<i&&Te(e=e.slice(r)),r<i&&ye(e))}p.push(n)}return be(p)}me.prototype=a.filters=a.pseudos,a.setFilters=new me,l=ae.compile=function(e,t){var n,r=[],i=[],s=S[e+" "];if(!s){for(t||(t=ge(e)),n=t.length;n--;)(s=Te(t[n]))[x]?r.push(s):i.push(s);s=S(e,function(e,t){var n=0,r=t.length>0,i=e.length>0,s=function(s,u,l,f,p){var h,m,g,y=[],v=0,b="0",x=s&&[],w=null!=p,T=c,N=s||i&&a.find.TAG("*",p&&u.parentNode||u),k=C+=null==T?1:Math.random()||.1;for(w&&(c=u!==d&&u,o=n);null!=(h=N[b]);b++){if(i&&h){for(m=0;g=e[m++];)if(g(h,u,l)){f.push(h);break}w&&(C=k,o=++n)}r&&((h=!g&&h)&&v--,s&&x.push(h))}if(v+=b,r&&b!==v){for(m=0;g=t[m++];)g(x,y,u,l);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=_.call(f));y=xe(y)}O.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&ae.uniqueSort(f)}return w&&(C=k,c=T),x};return r?ue(s):s}(i,r))}return s},i.sortStable=x.split("").sort(j).join("")===x,i.detectDuplicates=A,p(),i.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("div"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||ce(P,function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.specified?r.value:!0===e[t]?t.toLowerCase():null}),w.find=ae,w.expr=ae.selectors,w.expr[":"]=w.expr.pseudos,w.unique=ae.uniqueSort,w.text=ae.getText,w.isXMLDoc=ae.isXML,w.contains=ae.contains}(n);var F={};w.Callbacks=function(e){e="string"==typeof e?F[e]||function(e){var t=F[e]={};return w.each(e.match(C)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,i,o,a,s,u=[],l=!e.once&&[],c=function r(c){for(n=e.memory&&c,i=!0,a=s||0,s=0,o=u.length,t=!0;u&&a<o;a++)if(!1===u[a].apply(c[0],c[1])&&e.stopOnFalse){n=!1;break}t=!1,u&&(l?l.length&&r(l.shift()):n?u=[]:f.disable())},f={add:function(){if(u){var r=u.length;!function t(n){w.each(n,function(n,r){var i=w.type(r);"function"===i?e.unique&&f.has(r)||u.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),t?o=u.length:n&&(s=r,c(n))}return this},remove:function(){return u&&w.each(arguments,function(e,n){for(var r;(r=w.inArray(n,u,r))>-1;)u.splice(r,1),t&&(r<=o&&o--,r<=a&&a--)}),this},has:function(e){return e?w.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],o=0,this},disable:function(){return u=l=n=r,this},disabled:function(){return!u},lock:function(){return l=r,n||f.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!u||i&&!l||(n=[e,(n=n||[]).slice?n.slice():n],t?l.push(n):c(n)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},w.extend({Deferred:function(e){var t=[["resolve","done",w.Callbacks("once memory"),"resolved"],["reject","fail",w.Callbacks("once memory"),"rejected"],["notify","progress",w.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return w.Deferred(function(n){w.each(t,function(t,o){var a=o[0],s=w.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&w.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?w.extend(e,r):r}},i={};return r.pipe=r.then,w.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=g.call(arguments),a=o.length,s=1!==a||e&&w.isFunction(e.promise)?a:0,u=1===s?e:w.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?g.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&w.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--s;return s||u.resolveWith(r,o),u.promise()}}),w.support=function(e){var r,i,o,s,l,c,f,p,d,h=u.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=h.getElementsByTagName("*")||[],!(i=h.getElementsByTagName("a")[0])||!i.style||!r.length)return e;c=(s=u.createElement("select")).appendChild(u.createElement("option")),o=h.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e.getSetAttribute="t"!==h.className,e.leadingWhitespace=3===h.firstChild.nodeType,e.tbody=!h.getElementsByTagName("tbody").length,e.htmlSerialize=!!h.getElementsByTagName("link").length,e.style=/top/.test(i.getAttribute("style")),e.hrefNormalized="/a"===i.getAttribute("href"),e.opacity=/^0.5/.test(i.style.opacity),e.cssFloat=!!i.style.cssFloat,e.checkOn=!!o.value,e.optSelected=c.selected,e.enctype=!!u.createElement("form").enctype,e.html5Clone="<:nav></:nav>"!==u.createElement("nav").cloneNode(!0).outerHTML,e.inlineBlockNeedsLayout=!1,e.shrinkWrapBlocks=!1,e.pixelPosition=!1,e.deleteExpando=!0,e.noCloneEvent=!0,e.reliableMarginRight=!0,e.boxSizingReliable=!0,o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!c.disabled;try{delete h.test}catch(m){e.deleteExpando=!1}for(d in(o=u.createElement("input")).setAttribute("value",""),e.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),(l=u.createDocumentFragment()).appendChild(o),e.appendChecked=o.checked,e.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){e.noCloneEvent=!1}),h.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})h.setAttribute(f="on"+d,"t"),e[d+"Bubbles"]=f in n||!1===h.attributes[f].expando;for(d in h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===h.style.backgroundClip,w(e))break;return e.ownLast="0"!==d,w(function(){var r,i,o,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=u.getElementsByTagName("body")[0];l&&((r=u.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(r).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(o=h.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",e.reliableHiddenOffsets=p&&0===o[0].offsetHeight,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",w.swap(l,null!=l.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===h.offsetWidth}),n.getComputedStyle&&(e.pixelPosition="1%"!==(n.getComputedStyle(h,null)||{}).top,e.boxSizingReliable="4px"===(n.getComputedStyle(h,null)||{width:"4px"}).width,(i=h.appendChild(u.createElement("div"))).style.cssText=h.style.cssText=s,i.style.marginRight=i.style.width="0",h.style.width="1px",e.reliableMarginRight=!parseFloat((n.getComputedStyle(i,null)||{}).marginRight)),t(h.style.zoom)!==a&&(h.innerHTML="",h.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==h.offsetWidth,e.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(r),r=h=o=i=null)}),r=s=l=c=i=o=null,e}({});var B=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;function R(e,n,i,o){if(w.acceptData(e)){var a,s,u=w.expando,l=e.nodeType,c=l?w.cache:e,f=l?e[u]:e[u]&&u;if(f&&c[f]&&(o||c[f].data)||i!==r||"string"!=typeof n)return f||(f=l?e[u]=d.pop()||w.guid++:u),c[f]||(c[f]=l?{}:{toJSON:w.noop}),"object"!==t(n)&&"function"!=typeof n||(o?c[f]=w.extend(c[f],n):c[f].data=w.extend(c[f].data,n)),s=c[f],o||(s.data||(s.data={}),s=s.data),i!==r&&(s[w.camelCase(n)]=i),"string"==typeof n?null==(a=s[n])&&(a=s[w.camelCase(n)]):a=s,a}}function W(e,t,n){if(w.acceptData(e)){var r,i,o=e.nodeType,a=o?w.cache:e,s=o?e[w.expando]:w.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){i=(t=w.isArray(t)?t.concat(w.map(t,w.camelCase)):t in r?[t]:(t=w.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!I(r):!w.isEmptyObject(r))return}(n||(delete a[s].data,I(a[s])))&&(o?w.cleanData([e],!0):w.support.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function $(e,t,n){if(n===r&&1===e.nodeType){var i="data-"+t.replace(P,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:B.test(n)?w.parseJSON(n):n)}catch(o){}w.data(e,t,n)}else n=r}return n}function I(e){var t;for(t in e)if(("data"!==t||!w.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}w.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?w.cache[e[w.expando]]:e[w.expando])&&!I(e)},data:function(e,t,n){return R(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return R(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&w.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),w.fn.extend({data:function(e,n){var i,o,a=null,s=0,u=this[0];if(e===r){if(this.length&&(a=w.data(u),1===u.nodeType&&!w._data(u,"parsedAttrs"))){for(i=u.attributes;s<i.length;s++)0===(o=i[s].name).indexOf("data-")&&$(u,o=w.camelCase(o.slice(5)),a[o]);w._data(u,"parsedAttrs",!0)}return a}return"object"===t(e)?this.each(function(){w.data(this,e)}):arguments.length>1?this.each(function(){w.data(this,e,n)}):u?$(u,e,w.data(u,e)):null},removeData:function(e){return this.each(function(){w.removeData(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=w._data(e,t),n&&(!r||w.isArray(n)?r=w._data(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){w.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return w._data(e,n)||w._data(e,n,{empty:w.Callbacks("once memory").add(function(){w._removeData(e,t+"queue"),w._removeData(e,n)})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):t===r?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},delay:function(e,t){return e=w.fx&&w.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=w.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=r),e=e||"fx";s--;)(n=w._data(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(u));return u(),o.promise(t)}});var z,X,U=/[\t\r\n\f]/g,V=/\r/g,Y=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,G=/^(?:checked|selected)$/i,Q=w.support.getSetAttribute,K=w.support.input;w.fn.extend({attr:function(e,t){return w.access(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})},prop:function(e,t){return w.access(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return e=w.propFix[e]||e,this.each(function(){try{this[e]=r,delete this[e]}catch(t){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(C)||[];a<s;a++)if(r=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(U," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=w.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(w.isFunction(e))return this.each(function(t){w(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(C)||[];a<s;a++)if(r=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(U," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?w.trim(r):""}return this},toggleClass:function(e,n){var r=t(e);return"boolean"==typeof n&&"string"===r?n?this.addClass(e):this.removeClass(e):w.isFunction(e)?this.each(function(t){w(this).toggleClass(e.call(this,t,this.className,n),n)}):this.each(function(){if("string"===r)for(var t,n=0,i=w(this),o=e.match(C)||[];t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else r!==a&&"boolean"!==r||(this.className&&w._data(this,"__className__",this.className),this.className=this.className||!1===e?"":w._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,i,o=this[0];return arguments.length?(i=w.isFunction(e),this.each(function(t){var o;1===this.nodeType&&(null==(o=i?e.call(this,t,w(this).val()):e)?o="":"number"==typeof o?o+="":w.isArray(o)&&(o=w.map(o,function(e){return null==e?"":e+""})),(n=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,o,"value")!==r||(this.value=o))})):o?(n=w.valHooks[o.type]||w.valHooks[o.nodeName.toLowerCase()])&&"get"in n&&(t=n.get(o,"value"))!==r?t:"string"==typeof(t=o.value)?t.replace(V,""):null==t?"":t:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,u=i<0?s:o?i:0;u<s;u++)if(((n=r[u]).selected||u===i)&&(w.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!w.nodeName(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=w.makeArray(t),a=i.length;a--;)((r=i[a]).selected=w.inArray(w(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var o,s,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return t(e.getAttribute)===a?w.prop(e,n,i):(1===u&&w.isXMLDoc(e)||(n=n.toLowerCase(),o=w.attrHooks[n]||(w.expr.match.bool.test(n)?X:z)),i===r?o&&"get"in o&&null!==(s=o.get(e,n))?s:null==(s=w.find.attr(e,n))?r:s:null!==i?o&&"set"in o&&(s=o.set(e,i,n))!==r?s:(e.setAttribute(n,i+""),i):void w.removeAttr(e,n))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(C);if(o&&1===e.nodeType)for(;n=o[i++];)r=w.propFix[n]||n,w.expr.match.bool.test(n)?K&&Q||!G.test(n)?e[r]=!1:e[w.camelCase("default-"+n)]=e[r]=!1:w.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!w.support.radioValue&&"radio"===t&&w.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!w.isXMLDoc(e))&&(t=w.propFix[t]||t,o=w.propHooks[t]),n!==r?o&&"set"in o&&(i=o.set(e,n,t))!==r?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):Y.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:-1}}}}),X={set:function(e,t,n){return!1===t?w.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&w.propFix[n]||n,n):e[w.camelCase("default-"+n)]=e[n]=!0,n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=w.expr.attrHandle[t]||w.find.attr;w.expr.attrHandle[t]=K&&Q||!G.test(t)?function(e,t,i){var o=w.expr.attrHandle[t],a=i?r:(w.expr.attrHandle[t]=r)!=n(e,t,i)?t.toLowerCase():null;return w.expr.attrHandle[t]=o,a}:function(e,t,n){return n?r:e[w.camelCase("default-"+t)]?t.toLowerCase():null}}),K&&Q||(w.attrHooks.value={set:function(e,t,n){if(!w.nodeName(e,"input"))return z&&z.set(e,t,n);e.defaultValue=t}}),Q||(z={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:r}},w.expr.attrHandle.id=w.expr.attrHandle.name=w.expr.attrHandle.coords=function(e,t,n){var i;return n?r:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},w.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:r},set:z.set},w.attrHooks.contenteditable={set:function(e,t,n){z.set(e,""!==t&&t,n)}},w.each(["width","height"],function(e,t){w.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),w.support.hrefNormalized||w.each(["href","src"],function(e,t){w.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),w.support.style||(w.attrHooks.style={get:function(e){return e.style.cssText||r},set:function(e,t){return e.style.cssText=t+""}}),w.support.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.support.enctype||(w.propFix.enctype="encoding"),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(w.isArray(t))return e.checked=w.inArray(w(e).val(),t)>=0}},w.support.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Z=/^(?:input|select|textarea)$/i,ee=/^key/,te=/^(?:mouse|contextmenu)|click/,ne=/^(?:focusinfocus|focusoutblur)$/,re=/^([^.]*)(?:\.(.+)|)$/;function ie(){return!0}function oe(){return!1}function ae(){try{return u.activeElement}catch(e){}}w.event={global:{},add:function(e,n,i,o,s){var u,l,c,f,p,d,h,m,g,y,v,b=w._data(e);if(b){for(i.handler&&(i=(f=i).handler,s=f.selector),i.guid||(i.guid=w.guid++),(l=b.events)||(l=b.events={}),(d=b.handle)||((d=b.handle=function(e){return t(w)===a||e&&w.event.triggered===e.type?r:w.event.dispatch.apply(d.elem,arguments)}).elem=e),c=(n=(n||"").match(C)||[""]).length;c--;)g=v=(u=re.exec(n[c])||[])[1],y=(u[2]||"").split(".").sort(),g&&(p=w.event.special[g]||{},g=(s?p.delegateType:p.bindType)||g,p=w.event.special[g]||{},h=w.extend({type:g,origType:v,data:o,handler:i,guid:i.guid,selector:s,needsContext:s&&w.expr.match.needsContext.test(s),namespace:y.join(".")},f),(m=l[g])||((m=l[g]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,o,y,d)||(e.addEventListener?e.addEventListener(g,d,!1):e.attachEvent&&e.attachEvent("on"+g,d))),p.add&&(p.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),s?m.splice(m.delegateCount++,0,h):m.push(h),w.event.global[g]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,m,g=w.hasData(e)&&w._data(e);if(g&&(c=g.events)){for(l=(t=(t||"").match(C)||[""]).length;l--;)if(d=m=(s=re.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=w.event.special[d]||{},p=c[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;o--;)a=p[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(p.splice(o,1),a.selector&&p.delegateCount--,f.remove&&f.remove.call(e,a));u&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,g.handle)||w.removeEvent(e,d,g.handle),delete c[d])}else for(d in c)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(c)&&(delete g.handle,w._removeData(e,"events"))}},trigger:function(e,i,o,a){var s,l,c,f,p,d,h,m=[o||u],g=b.call(e,"type")?e.type:e,y=b.call(e,"namespace")?e.namespace.split("."):[];if(c=d=o=o||u,3!==o.nodeType&&8!==o.nodeType&&!ne.test(g+w.event.triggered)&&(g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[w.expando]?e:new w.Event(g,"object"===t(e)&&e)).isTrigger=a?2:3,e.namespace=y.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=r,e.target||(e.target=o),i=null==i?[e]:w.makeArray(i,[e]),p=w.event.special[g]||{},a||!p.trigger||!1!==p.trigger.apply(o,i))){if(!a&&!p.noBubble&&!w.isWindow(o)){for(f=p.delegateType||g,ne.test(f+g)||(c=c.parentNode);c;c=c.parentNode)m.push(c),d=c;d===(o.ownerDocument||u)&&m.push(d.defaultView||d.parentWindow||n)}for(h=0;(c=m[h++])&&!e.isPropagationStopped();)e.type=h>1?f:p.bindType||g,(s=(w._data(c,"events")||{})[e.type]&&w._data(c,"handle"))&&s.apply(c,i),(s=l&&c[l])&&w.acceptData(c)&&s.apply&&!1===s.apply(c,i)&&e.preventDefault();if(e.type=g,!a&&!e.isDefaultPrevented()&&(!p._default||!1===p._default.apply(m.pop(),i))&&w.acceptData(o)&&l&&o[g]&&!w.isWindow(o)){(d=o[l])&&(o[l]=null),w.event.triggered=g;try{o[g]()}catch(v){}w.event.triggered=r,d&&(o[l]=d)}return e.result}},dispatch:function(e){e=w.event.fix(e);var t,n,i,o,a,s,u=g.call(arguments),l=(w._data(this,"events")||{})[e.type]||[],c=w.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=w.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(i.namespace)||(e.handleObj=i,e.data=i.data,(n=((w.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u))!==r&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(o=[],a=0;a<u;a++)o[n=(i=t[a]).selector+" "]===r&&(o[n]=i.needsContext?w(n,this).index(l)>=0:w.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return u<t.length&&s.push({elem:this,handlers:t.slice(u)}),s},fix:function(e){if(e[w.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=te.test(i)?this.mouseHooks:ee.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new w.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=o.srcElement||u),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,a=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(o=(i=e.target.ownerDocument||u).documentElement,n=i.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||a===r||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ae()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ae()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(w.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return w.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==r&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?w.event.trigger(i,null,t):w.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},w.removeEvent=u.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,n,r){var i="on"+n;e.detachEvent&&(t(e[i])===a&&(e[i]=null),e.detachEvent(i,r))},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?ie:oe):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||w.now(),this[w.expando]=!0},w.Event.prototype={isDefaultPrevented:oe,isPropagationStopped:oe,isImmediatePropagationStopped:oe,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ie,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ie,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ie,this.stopPropagation()}},w.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),w.support.submitBubbles||(w.event.special.submit={setup:function(){if(w.nodeName(this,"form"))return!1;w.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=w.nodeName(t,"input")||w.nodeName(t,"button")?t.form:r;n&&!w._data(n,"submitBubbles")&&(w.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),w._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&w.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(w.nodeName(this,"form"))return!1;w.event.remove(this,"._submit")}}),w.support.changeBubbles||(w.event.special.change={setup:function(){if(Z.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(w.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),w.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),w.event.simulate("change",this,e,!0)})),!1;w.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!w._data(t,"changeBubbles")&&(w.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||w.event.simulate("change",this.parentNode,e,!0)}),w._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return w.event.remove(this,"._change"),!Z.test(this.nodeName)}}),w.support.focusinBubbles||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){w.event.simulate(t,e.target,w.event.fix(e),!0)};w.event.special[t]={setup:function(){0==n++&&u.addEventListener(e,r,!0)},teardown:function(){0==--n&&u.removeEventListener(e,r,!0)}}}),w.fn.extend({on:function(e,n,i,o,a){var s,u;if("object"===t(e)){for(s in"string"!=typeof n&&(i=i||n,n=r),e)this.on(s,n,i,e[s],a);return this}if(null==i&&null==o?(o=n,i=n=r):null==o&&("string"==typeof n?(o=i,i=r):(o=i,i=n,n=r)),!1===o)o=oe;else if(!o)return this;return 1===a&&(u=o,(o=function(e){return w().off(e),u.apply(this,arguments)}).guid=u.guid||(u.guid=w.guid++)),this.each(function(){w.event.add(this,e,o,i,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,i){var o,a;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,w(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"===t(e)){for(a in e)this.off(a,n,e[a]);return this}return!1!==n&&"function"!=typeof n||(i=n,n=r),!1===i&&(i=oe),this.each(function(){w.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var se=/^.[^:#\[\.,]*$/,ue=/^(?:parents|prev(?:Until|All))/,le=w.expr.match.needsContext,ce={children:!0,contents:!0,next:!0,prev:!0};function fe(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function pe(e,t,n){if(w.isFunction(t))return w.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return w.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return w.filter(t,e,n);t=w.filter(t,e)}return w.grep(e,function(e){return w.inArray(e,t)>=0!==n})}function de(e){var t=he.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}w.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(t=0;t<i;t++)w.find(e,r[t],n);return(n=this.pushStack(i>1?w.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=w(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(w.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(pe(this,e||[],!0))},filter:function(e){return this.pushStack(pe(this,e||[],!1))},is:function(e){return!!pe(this,"string"==typeof e&&le.test(e)?w(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=le.test(e)||"string"!=typeof e?w(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?w.unique(o):o)},index:function(e){return e?"string"==typeof e?w.inArray(this[0],w(e)):w.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?w(e,t):w.makeArray(e&&e.nodeType?[e]:e),r=w.merge(this.get(),n);return this.pushStack(w.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return w.dir(e,"parentNode")},parentsUntil:function(e,t,n){return w.dir(e,"parentNode",n)},next:function(e){return fe(e,"nextSibling")},prev:function(e){return fe(e,"previousSibling")},nextAll:function(e){return w.dir(e,"nextSibling")},prevAll:function(e){return w.dir(e,"previousSibling")},nextUntil:function(e,t,n){return w.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return w.dir(e,"previousSibling",n)},siblings:function(e){return w.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return w.sibling(e.firstChild)},contents:function(e){return w.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:w.merge([],e.childNodes)}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(ce[e]||(i=w.unique(i)),ue.test(e)&&(i=i.reverse())),this.pushStack(i)}}),w.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){for(var i=[],o=e[t];o&&9!==o.nodeType&&(n===r||1!==o.nodeType||!w(o).is(n));)1===o.nodeType&&i.push(o),o=o[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var he="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",me=/ jQuery\d+="(?:null|\d+)"/g,ge=new RegExp("<(?:"+he+")[\\s/>]","i"),ye=/^\s+/,ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,be=/<([\w:]+)/,xe=/<tbody/i,we=/<|&#?\w+;/,Te=/<(?:script|style|link)/i,Ce=/^(?:checkbox|radio)$/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^$|\/(?:java|ecma)script/i,Ee=/^true\/(.*)/,Se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ae={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:w.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},je=de(u).appendChild(u.createElement("div"));function De(e,t){return w.nodeName(e,"table")&&w.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Le(e){return e.type=(null!==w.find.attr(e,"type"))+"/"+e.type,e}function He(e){var t=Ee.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function qe(e,t){for(var n,r=0;null!=(n=e[r]);r++)w._data(n,"globalEval",!t||w._data(t[r],"globalEval"))}function _e(e,t){if(1===t.nodeType&&w.hasData(e)){var n,r,i,o=w._data(e),a=w._data(t,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;r<i;r++)w.event.add(t,n,s[n][r]);a.data&&(a.data=w.extend({},a.data))}}function Me(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!w.support.noCloneEvent&&t[w.expando]){for(r in(i=w._data(t)).events)w.removeEvent(t,r,i.handle);t.removeAttribute(w.expando)}"script"===n&&t.text!==e.text?(Le(t).text=e.text,He(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),w.support.html5Clone&&e.innerHTML&&!w.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ce.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function Oe(e,n){var i,o,s=0,u=t(e.getElementsByTagName)!==a?e.getElementsByTagName(n||"*"):t(e.querySelectorAll)!==a?e.querySelectorAll(n||"*"):r;if(!u)for(u=[],i=e.childNodes||e;null!=(o=i[s]);s++)!n||w.nodeName(o,n)?u.push(o):w.merge(u,Oe(o,n));return n===r||n&&w.nodeName(e,n)?w.merge([e],u):u}function Fe(e){Ce.test(e.type)&&(e.defaultChecked=e.checked)}Ae.optgroup=Ae.option,Ae.tbody=Ae.tfoot=Ae.colgroup=Ae.caption=Ae.thead,Ae.th=Ae.td,w.fn.extend({text:function(e){return w.access(this,function(e){return e===r?w.text(this):this.empty().append((this[0]&&this[0].ownerDocument||u).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||De(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=De(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?w.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||w.cleanData(Oe(n)),n.parentNode&&(t&&w.contains(n.ownerDocument,n)&&qe(Oe(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&w.cleanData(Oe(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&w.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return w.access(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===r)return 1===t.nodeType?t.innerHTML.replace(me,""):r;if("string"==typeof e&&!Te.test(e)&&(w.support.htmlSerialize||!ge.test(e))&&(w.support.leadingWhitespace||!ye.test(e))&&!Ae[(be.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ve,"<$1></$2>");try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(Oe(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=w.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),w(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=h.apply([],e);var r,i,o,a,s,u,l=0,c=this.length,f=this,p=c-1,d=e[0],m=w.isFunction(d);if(m||!(c<=1||"string"!=typeof d||w.support.checkClone)&&Ne.test(d))return this.each(function(r){var i=f.eq(r);m&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=(u=w.buildFragment(e,this[0].ownerDocument,!1,!n&&this)).firstChild,1===u.childNodes.length&&(u=r),r)){for(o=(a=w.map(Oe(u,"script"),Le)).length;l<c;l++)i=u,l!==p&&(i=w.clone(i,!0,!0),o&&w.merge(a,Oe(i,"script"))),t.call(this[l],i,l);if(o)for(s=a[a.length-1].ownerDocument,w.map(a,He),l=0;l<o;l++)i=a[l],ke.test(i.type||"")&&!w._data(i,"globalEval")&&w.contains(s,i)&&(i.src?w._evalUrl(i.src):w.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Se,"")));u=r=null}return this}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=0,i=[],o=w(e),a=o.length-1;r<=a;r++)n=r===a?this:this.clone(!0),w(o[r])[t](n),m.apply(i,n.get());return this.pushStack(i)}}),w.extend({clone:function(e,t,n){var r,i,o,a,s,u=w.contains(e.ownerDocument,e);if(w.support.html5Clone||w.isXMLDoc(e)||!ge.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(je.innerHTML=e.outerHTML,je.removeChild(o=je.firstChild)),!(w.support.noCloneEvent&&w.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(r=Oe(o),s=Oe(e),a=0;null!=(i=s[a]);++a)r[a]&&Me(i,r[a]);if(t)if(n)for(s=s||Oe(e),r=r||Oe(o),a=0;null!=(i=s[a]);a++)_e(i,r[a]);else _e(e,o);return(r=Oe(o,"script")).length>0&&qe(r,!u&&Oe(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,f=e.length,p=de(t),d=[],h=0;h<f;h++)if((o=e[h])||0===o)if("object"===w.type(o))w.merge(d,o.nodeType?[o]:o);else if(we.test(o)){for(s=s||p.appendChild(t.createElement("div")),u=(be.exec(o)||["",""])[1].toLowerCase(),c=Ae[u]||Ae._default,s.innerHTML=c[1]+o.replace(ve,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!w.support.leadingWhitespace&&ye.test(o)&&d.push(t.createTextNode(ye.exec(o)[0])),!w.support.tbody)for(i=(o="table"!==u||xe.test(o)?"<table>"!==c[1]||xe.test(o)?0:s:s.firstChild)&&o.childNodes.length;i--;)w.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(w.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else d.push(t.createTextNode(o));for(s&&p.removeChild(s),w.support.appendChecked||w.grep(Oe(d,"input"),Fe),h=0;o=d[h++];)if((!r||-1===w.inArray(o,r))&&(a=w.contains(o.ownerDocument,o),s=Oe(p.appendChild(o),"script"),a&&qe(s),n))for(i=0;o=s[i++];)ke.test(o.type||"")&&n.push(o);return s=null,p},cleanData:function(e,n){for(var r,i,o,s,u=0,l=w.expando,c=w.cache,f=w.support.deleteExpando,p=w.event.special;null!=(r=e[u]);u++)if((n||w.acceptData(r))&&(s=(o=r[l])&&c[o])){if(s.events)for(i in s.events)p[i]?w.event.remove(r,i):w.removeEvent(r,i,s.handle);c[o]&&(delete c[o],f?delete r[l]:t(r.removeAttribute)!==a?r.removeAttribute(l):r[l]=null,d.push(o))}},_evalUrl:function(e){return w.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),w.fn.extend({wrapAll:function(e){if(w.isFunction(e))return this.each(function(t){w(this).wrapAll(e.call(this,t))});if(this[0]){var t=w(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return w.isFunction(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=w.isFunction(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){w.nodeName(this,"body")||w(this).replaceWith(this.childNodes)}).end()}});var Be,Pe,Re,We=/alpha\([^)]*\)/i,$e=/opacity\s*=\s*([^)]*)/,Ie=/^(top|right|bottom|left)$/,ze=/^(none|table(?!-c[ea]).+)/,Xe=/^margin/,Ue=new RegExp("^("+T+")(.*)$","i"),Ve=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Ye=new RegExp("^([+-])=("+T+")","i"),Je={BODY:"block"},Ge={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:0,fontWeight:400},Ke=["Top","Right","Bottom","Left"],Ze=["Webkit","O","Moz","ms"];function et(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Ze.length;i--;)if((t=Ze[i]+n)in e)return t;return r}function tt(e,t){return e=t||e,"none"===w.css(e,"display")||!w.contains(e.ownerDocument,e)}function nt(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=w._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&tt(r)&&(o[a]=w._data(r,"olddisplay",at(r.nodeName)))):o[a]||(i=tt(r),(n&&"none"!==n||!i)&&w._data(r,"olddisplay",i?n:w.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function rt(e,t,n){var r=Ue.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function it(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=w.css(e,n+Ke[o],!0,i)),r?("content"===n&&(a-=w.css(e,"padding"+Ke[o],!0,i)),"margin"!==n&&(a-=w.css(e,"border"+Ke[o]+"Width",!0,i))):(a+=w.css(e,"padding"+Ke[o],!0,i),"padding"!==n&&(a+=w.css(e,"border"+Ke[o]+"Width",!0,i)));return a}function ot(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Pe(e),a=w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Re(e,t,o))<0||null==i)&&(i=e.style[t]),Ve.test(i))return i;r=a&&(w.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+it(e,t,n||(a?"border":"content"),r,o)+"px"}function at(e){var t=u,n=Je[e];return n||("none"!==(n=st(e,t))&&n||((t=((Be=(Be||w("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement))[0].contentWindow||Be[0].contentDocument).document).write("<!doctype html><html><body>"),t.close(),n=st(e,t),Be.detach()),Je[e]=n),n}function st(e,t){var n=w(t.createElement(e)).appendTo(t.body),r=w.css(n[0],"display");return n.remove(),r}w.fn.extend({css:function(e,t){return w.access(this,function(e,t,n){var i,o,a={},s=0;if(w.isArray(t)){for(o=Pe(e),i=t.length;s<i;s++)a[t[s]]=w.css(e,t[s],!1,o);return a}return n!==r?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)},show:function(){return nt(this,!0)},hide:function(){return nt(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){tt(this)?w(this).show():w(this).hide()})}}),w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Re(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:w.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,u,l=w.camelCase(n),c=e.style;if(n=w.cssProps[l]||(w.cssProps[l]=et(c,l)),u=w.cssHooks[n]||w.cssHooks[l],i===r)return u&&"get"in u&&(a=u.get(e,!1,o))!==r?a:c[n];if(!("string"===(s=t(i))&&(a=Ye.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(w.css(e,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||w.cssNumber[l]||(i+="px"),w.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),u&&"set"in u&&(i=u.set(e,i,o))===r)))try{c[n]=i}catch(f){}}},css:function(e,t,n,i){var o,a,s,u=w.camelCase(t);return t=w.cssProps[u]||(w.cssProps[u]=et(e.style,u)),(s=w.cssHooks[t]||w.cssHooks[u])&&"get"in s&&(a=s.get(e,!0,n)),a===r&&(a=Re(e,t,i)),"normal"===a&&t in Qe&&(a=Qe[t]),""===n||n?(o=parseFloat(a),!0===n||w.isNumeric(o)?o||0:a):a}}),n.getComputedStyle?(Pe=function(e){return n.getComputedStyle(e,null)},Re=function(e,t,n){var i,o,a,s=n||Pe(e),u=s?s.getPropertyValue(t)||s[t]:r,l=e.style;return s&&(""!==u||w.contains(e.ownerDocument,e)||(u=w.style(e,t)),Ve.test(u)&&Xe.test(t)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):u.documentElement.currentStyle&&(Pe=function(e){return e.currentStyle},Re=function(e,t,n){var i,o,a,s=n||Pe(e),u=s?s[t]:r,l=e.style;return null==u&&l&&l[t]&&(u=l[t]),Ve.test(u)&&!Ie.test(t)&&(i=l.left,(a=(o=e.runtimeStyle)&&o.left)&&(o.left=e.currentStyle.left),l.left="fontSize"===t?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return 0===e.offsetWidth&&ze.test(w.css(e,"display"))?w.swap(e,Ge,function(){return ot(e,t,r)}):ot(e,t,r)},set:function(e,n,r){var i=r&&Pe(e);return rt(0,n,r?it(e,t,r,w.support.boxSizing&&"border-box"===w.css(e,"boxSizing",!1,i),i):0)}}}),w.support.opacity||(w.cssHooks.opacity={get:function(e,t){return $e.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=w.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===w.trim(o.replace(We,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=We.test(o)?o.replace(We,i):o+" "+i)}}),w(function(){w.support.reliableMarginRight||(w.cssHooks.marginRight={get:function(e,t){if(t)return w.swap(e,{display:"inline-block"},Re,[e,"marginRight"])}}),!w.support.pixelPosition&&w.fn.position&&w.each(["top","left"],function(e,t){w.cssHooks[t]={get:function(e,n){if(n)return n=Re(e,t),Ve.test(n)?w(e).position()[t]+"px":n}}})}),w.expr&&w.expr.filters&&(w.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!w.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||w.css(e,"display"))},w.expr.filters.visible=function(e){return!w.expr.filters.hidden(e)}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Ke[r]+t]=o[r]||o[r-2]||o[0];return i}},Xe.test(e)||(w.cssHooks[e+t].set=rt)});var ut=/%20/g,lt=/\[\]$/,ct=/\r?\n/g,ft=/^(?:submit|button|image|reset|file)$/i,pt=/^(?:input|select|textarea|keygen)/i;function dt(e,n,r,i){var o;if(w.isArray(n))w.each(n,function(n,o){r||lt.test(e)?i(e,o):dt(e+"["+("object"===t(o)?n:"")+"]",o,r,i)});else if(r||"object"!==w.type(n))i(e,n);else for(o in n)dt(e+"["+o+"]",n[o],r,i)}w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&pt.test(this.nodeName)&&!ft.test(e)&&(this.checked||!Ce.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:w.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(ct,"\r\n")}}):{name:t.name,value:n.replace(ct,"\r\n")}}).get()}}),w.param=function(e,t){var n,i=[],o=function(e,t){t=w.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===r&&(t=w.ajaxSettings&&w.ajaxSettings.traditional),w.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){o(this.name,this.value)});else for(n in e)dt(n,e[n],t,o);return i.join("&").replace(ut,"+")},w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ht,mt,gt=w.now(),yt=/\?/,vt=/#.*$/,bt=/([?&])_=[^&]*/,xt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,wt=/^(?:GET|HEAD)$/,Tt=/^\/\//,Ct=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Nt=w.fn.load,kt={},Et={},St="*/".concat("*");try{mt=s.href}catch(Qt){(mt=u.createElement("a")).href="",mt=mt.href}function At(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(C)||[];if(w.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function jt(e,t,n,r){var i={},o=e===Et;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Dt(e,t){var n,i,o=w.ajaxSettings.flatOptions||{};for(i in t)t[i]!==r&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&w.extend(!0,e,n),e}ht=Ct.exec(mt.toLowerCase())||[],w.fn.load=function(e,n,i){if("string"!=typeof e&&Nt)return Nt.apply(this,arguments);var o,a,s,u=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l,e.length),e=e.slice(0,l)),w.isFunction(n)?(i=n,n=r):n&&"object"===t(n)&&(s="POST"),u.length>0&&w.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){a=arguments,u.html(o?w("<div>").append(w.parseHTML(e)).find(o):e)}).complete(i&&function(e,t){u.each(i,a||[e.responseText,t,e])}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":St,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":w.parseJSON,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Dt(Dt(e,w.ajaxSettings),t):Dt(w.ajaxSettings,e)},ajaxPrefilter:At(kt),ajaxTransport:At(Et),ajax:function(e,n){"object"===t(e)&&(n=e,e=r),n=n||{};var i,o,a,s,u,l,c,f,p=w.ajaxSetup({},n),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?w(d):w.event,m=w.Deferred(),g=w.Callbacks("once memory"),y=p.statusCode||{},v={},b={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!f)for(f={};t=xt.exec(s);)f[t[1].toLowerCase()]=t[2];t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(x<2)for(t in e)y[t]=[y[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return c&&c.abort(t),k(0,t),this}};if(m.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||mt)+"").replace(vt,"").replace(Tt,ht[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=w.trim(p.dataType||"*").toLowerCase().match(C)||[""],null==p.crossDomain&&(i=Ct.exec(p.url.toLowerCase()),p.crossDomain=!(!i||i[1]===ht[1]&&i[2]===ht[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(ht[3]||("http:"===ht[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),jt(kt,p,n,N),2===x)return N;for(o in(l=p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!wt.test(p.type),a=p.url,p.hasContent||(p.data&&(a=p.url+=(yt.test(a)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=bt.test(a)?a.replace(bt,"$1_="+gt++):a+(yt.test(a)?"&":"?")+"_="+gt++)),p.ifModified&&(w.lastModified[a]&&N.setRequestHeader("If-Modified-Since",w.lastModified[a]),w.etag[a]&&N.setRequestHeader("If-None-Match",w.etag[a])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+St+"; q=0.01":""):p.accepts["*"]),p.headers)N.setRequestHeader(o,p.headers[o]);if(p.beforeSend&&(!1===p.beforeSend.call(d,N,p)||2===x))return N.abort();for(o in T="abort",{success:1,error:1,complete:1})N[o](p[o]);if(c=jt(Et,p,n,N)){N.readyState=1,l&&h.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(u=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,c.send(v,k)}catch(Qt){if(!(x<2))throw Qt;k(-1,Qt)}}else k(-1,"No Transport");function k(e,t,n,i){var o,f,v,b,T,C=t;2!==x&&(x=2,u&&clearTimeout(u),c=r,s=i||"",N.readyState=e>0?4:0,o=e>=200&&e<300||304===e,n&&(b=function(e,t,n){var i,o,a,s,u=e.contents,l=e.dataTypes;for(;"*"===l[0];)l.shift(),o===r&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in n)a=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}if(a)return a!==l[0]&&l.unshift(a),n[a]}(p,N,n)),b=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();for(;o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(Qt){return{state:"parsererror",error:a?Qt:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(p,b,N,o),o?(p.ifModified&&((T=N.getResponseHeader("Last-Modified"))&&(w.lastModified[a]=T),(T=N.getResponseHeader("etag"))&&(w.etag[a]=T)),204===e||"HEAD"===p.type?C="nocontent":304===e?C="notmodified":(C=b.state,f=b.data,o=!(v=b.error))):(v=C,!e&&C||(C="error",e<0&&(e=0))),N.status=e,N.statusText=(t||C)+"",o?m.resolveWith(d,[f,C,N]):m.rejectWith(d,[N,C,v]),N.statusCode(y),y=r,l&&h.trigger(o?"ajaxSuccess":"ajaxError",[N,p,o?f:v]),g.fireWith(d,[N,C]),l&&(h.trigger("ajaxComplete",[N,p]),--w.active||w.event.trigger("ajaxStop")))}return N},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,r,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,i,o){return w.isFunction(n)&&(o=o||i,i=n,n=r),w.ajax({url:e,type:t,dataType:o,data:n,success:i})}}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){e.cache===r&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=u.head||w("head")[0]||u.documentElement;return{send:function(r,i){(t=u.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(r,!0)}}}});var Lt=[],Ht=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||w.expando+"_"+gt++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(e,t,i){var o,a,s,u=!1!==e.jsonp&&(Ht.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ht.test(e.data)&&"data");if(u||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=w.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Ht,"$1"+o):!1!==e.jsonp&&(e.url+=(yt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||w.error(o+" was not called"),s[0]},e.dataTypes[0]="json",a=n[o],n[o]=function(){s=arguments},i.always(function(){n[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,Lt.push(o)),s&&w.isFunction(a)&&a(s[0]),s=a=r}),"script"});var qt,_t,Mt=0,Ot=n.ActiveXObject&&function(){var e;for(e in qt)qt[e](r,!0)};function Ft(){try{return new n.XMLHttpRequest}catch(Qt){}}w.ajaxSettings.xhr=n.ActiveXObject?function(){return!this.isLocal&&Ft()||function(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(Qt){}}()}:Ft,_t=w.ajaxSettings.xhr(),w.support.cors=!!_t&&"withCredentials"in _t,(_t=w.support.ajax=!!_t)&&w.ajaxTransport(function(e){var t;if(!e.crossDomain||w.support.cors)return{send:function(i,o){var a,s,u=e.xhr();if(e.username?u.open(e.type,e.url,e.async,e.username,e.password):u.open(e.type,e.url,e.async),e.xhrFields)for(s in e.xhrFields)u[s]=e.xhrFields[s];e.mimeType&&u.overrideMimeType&&u.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(e.hasContent&&e.data||null),t=function(n,i){var s,l,c,f;try{if(t&&(i||4===u.readyState))if(t=r,a&&(u.onreadystatechange=w.noop,Ot&&delete qt[a]),i)4!==u.readyState&&u.abort();else{f={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(f.text=u.responseText);try{c=u.statusText}catch(Qt){c=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=f.text?200:404}}catch(p){i||o(-1,p)}f&&o(s,c,f,l)},e.async?4===u.readyState?setTimeout(t):(a=++Mt,Ot&&(qt||(qt={},w(n).unload(Ot)),qt[a]=t),u.onreadystatechange=t):t()},abort:function(){t&&t(r,!0)}}});var Bt,Pt,Rt=/^(?:toggle|show|hide)$/,Wt=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),$t=/queueHooks$/,It=[function(e,t,n){var r,i,o,a,s,u,l=this,c={},f=e.style,p=e.nodeType&&tt(e),d=w._data(e,"fxshow");n.queue||(null==(s=w._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,w.queue(e,"fx").length||s.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===w.css(e,"display")&&"none"===w.css(e,"float")&&(w.support.inlineBlockNeedsLayout&&"inline"!==at(e.nodeName)?f.zoom=1:f.display="inline-block"));n.overflow&&(f.overflow="hidden",w.support.shrinkWrapBlocks||l.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Rt.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show"))continue;c[r]=d&&d[r]||w.style(e,r)}if(!w.isEmptyObject(c))for(r in d?"hidden"in d&&(p=d.hidden):d=w._data(e,"fxshow",{}),o&&(d.hidden=!p),p?w(e).show():l.done(function(){w(e).hide()}),l.done(function(){var t;for(t in w._removeData(e,"fxshow"),c)w.style(e,t,c[t])}),c)a=Ut(p?d[r]:0,r,l),r in d||(d[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],zt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Wt.exec(t),o=i&&i[3]||(w.cssNumber[e]?"":"px"),a=(w.cssNumber[e]||"px"!==o&&+r)&&Wt.exec(w.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",w.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function Xt(){return setTimeout(function(){Bt=r}),Bt=w.now()}function Ut(e,t,n){for(var r,i=(zt[t]||[]).concat(zt["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function Vt(e,t,n){var r,i,o=0,a=It.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Bt||Xt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Bt||Xt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(r=w.camelCase(n),i=t[r],o=e[n],w.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=It[o].call(l,e,c,l.opts))return r;return w.map(c,Ut,l),w.isFunction(l.opts.start)&&l.opts.start.call(e,l),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function Yt(e,t,n,r,i){return new Yt.prototype.init(e,t,n,r,i)}function Jt(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=Ke[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Gt(e){return w.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}w.Animation=w.extend(Vt,{tweener:function(e,t){w.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],zt[n]=zt[n]||[],zt[n].unshift(t)},prefilter:function(e,t){t?It.unshift(e):It.push(e)}}),w.Tween=Yt,Yt.prototype={constructor:Yt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=Yt.propHooks[this.prop];return e&&e.get?e.get(this):Yt.propHooks._default.get(this)},run:function(e){var t,n=Yt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yt.propHooks._default.set(this),this}},Yt.prototype.init.prototype=Yt.prototype,Yt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[w.cssProps[e.prop]]||w.cssHooks[e.prop])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yt.propHooks.scrollTop=Yt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Jt(t,!0),e,r,i)}}),w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(tt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=Vt(this,w.extend({},e),o);(i||w._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=r),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=w.timers,a=w._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&$t.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=w._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each({slideDown:Jt("show"),slideUp:Jt("hide"),slideToggle:Jt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.speed=function(e,n,r){var i=e&&"object"===t(e)?w.extend({},e):{complete:r||!r&&n||w.isFunction(e)&&e,duration:e,easing:r&&n||n&&!w.isFunction(n)&&n};return i.duration=w.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in w.fx.speeds?w.fx.speeds[i.duration]:w.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){w.isFunction(i.old)&&i.old.call(this),i.queue&&w.dequeue(this,i.queue)},i},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},w.timers=[],w.fx=Yt.prototype.init,w.fx.tick=function(){var e,t=w.timers,n=0;for(Bt=w.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||w.fx.stop(),Bt=r},w.fx.timer=function(e){e()&&w.timers.push(e)&&w.fx.start()},w.fx.interval=13,w.fx.start=function(){Pt||(Pt=setInterval(w.fx.tick,w.fx.interval))},w.fx.stop=function(){clearInterval(Pt),Pt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fx.step={},w.expr&&w.expr.filters&&(w.expr.filters.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length}),w.fn.offset=function(e){if(arguments.length)return e===r?this:this.each(function(t){w.offset.setOffset(this,e,t)});var n,i,o={top:0,left:0},s=this[0],u=s&&s.ownerDocument;return u?(n=u.documentElement,w.contains(n,s)?(t(s.getBoundingClientRect)!==a&&(o=s.getBoundingClientRect()),i=Gt(u),{top:o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},w.offset={setOffset:function(e,t,n){var r=w.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=w(e),s=a.offset(),u=w.css(e,"top"),l=w.css(e,"left"),c={},f={};("absolute"===r||"fixed"===r)&&w.inArray("auto",[u,l])>-1?(i=(f=a.position()).top,o=f.left):(i=parseFloat(u)||0,o=parseFloat(l)||0),w.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(c.top=t.top-s.top+i),null!=t.left&&(c.left=t.left-s.left+o),"using"in t?t.using.call(e,c):a.css(c)}},w.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===w.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),w.nodeName(e[0],"html")||(n=e.offset()),n.top+=w.css(e[0],"borderTopWidth",!0),n.left+=w.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-w.css(r,"marginTop",!0),left:t.left-n.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||l;e&&!w.nodeName(e,"html")&&"static"===w.css(e,"position");)e=e.offsetParent;return e||l})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);w.fn[e]=function(i){return w.access(this,function(e,i,o){var a=Gt(e);if(o===r)return a?t in a?a[t]:a.document.documentElement[i]:e[i];a?a.scrollTo(n?w(a).scrollLeft():o,n?o:w(a).scrollTop()):e[i]=o},e,i,arguments.length,null)}}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){w.fn[i]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return w.access(this,function(t,n,i){var o;return w.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):i===r?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:r,a,null)}})}),w.fn.size=function(){return this.length},w.fn.andSelf=w.fn.addBack,"object"===("undefined"==typeof module?"undefined":t(module))&&module&&"object"===t(module.exports)?module.exports=w:(n.jQuery=n.$=w,"function"==typeof e&&e.amd&&e("jquery",[],function(){return w}))}(window);
},{}],"VED5":[function(require,module,exports) {
!function(){return function t(e,r,i){function n(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};e[a][0].call(u.exports,function(t){return n(e[a][1][t]||t)},u,u.exports,t,e,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}}()({1:[function(t,e,r){var i=t("cssfilter").FilterCSS,n=t("cssfilter").getDefaultWhiteList,o=t("./util");function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var s=new i;function l(t){return t.replace(c,"&lt;").replace(u,"&gt;")}var c=/</g,u=/>/g,f=/"/g,g=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,d=/&colon;?/gim,h=/&newline;?/gim,m=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,b=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,v=/u\s*r\s*l\s*\(.*/gi;function w(t){return t.replace(f,"&quot;")}function y(t){return t.replace(g,'"')}function x(t){return t.replace(p,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})}function k(t){return t.replace(d,":").replace(h," ")}function A(t){for(var e="",r=0,i=t.length;r<i;r++)e+=t.charCodeAt(r)<32?" ":t.charAt(r);return o.trim(e)}function T(t){return t=A(t=k(t=x(t=y(t))))}function I(t){return t=l(t=w(t))}var S=/<!--[\s\S]*?-->/g;r.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},r.getDefaultWhiteList=a,r.onTag=function(t,e,r){},r.onIgnoreTag=function(t,e,r){},r.onTagAttr=function(t,e,r){},r.onIgnoreTagAttr=function(t,e,r){},r.safeAttrValue=function(t,e,r,i){if(r=T(r),"href"===e||"src"===e){if("#"===(r=o.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===e){if(m.lastIndex=0,m.test(r))return""}else if("style"===e){if(b.lastIndex=0,b.test(r))return"";if(v.lastIndex=0,v.test(r)&&(m.lastIndex=0,m.test(r)))return"";!1!==i&&(r=(i=i||s).process(r))}return r=I(r)},r.escapeHtml=l,r.escapeQuote=w,r.unescapeQuote=y,r.escapeHtmlEntities=x,r.escapeDangerHtml5Entities=k,r.clearNonPrintableCharacter=A,r.friendlyAttrValue=T,r.escapeAttrValue=I,r.onIgnoreTagStripAll=function(){return""},r.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var r=!Array.isArray(t),i=[],n=!1;return{onIgnoreTag:function(a,s,l){if(function(e){return!!r||-1!==o.indexOf(t,e)}(a)){if(l.isClosing){var c="[/removed]",u=l.position+c.length;return i.push([!1!==n?n:l.position,u]),n=!1,c}return n||(n=l.position),"[removed]"}return e(a,s,l)},remove:function(t){var e="",r=0;return o.forEach(i,function(i){e+=t.slice(r,i[0]),r=i[1]}),e+=t.slice(r)}}},r.stripCommentTag=function(t){return t.replace(S,"")},r.stripBlankChar=function(t){var e=t.split("");return(e=e.filter(function(t){var e=t.charCodeAt(0);return!(127===e||e<=31&&10!==e&&13!==e)})).join("")},r.cssFilter=s,r.getDefaultCSSWhiteList=n},{"./util":4,cssfilter:8}],2:[function(t,e,r){var i=t("./default"),n=t("./parser"),o=t("./xss");function a(t,e){return new o(e).process(t)}for(var s in(r=e.exports=a).filterXSS=a,r.FilterXSS=o,i)r[s]=i[s];for(var s in n)r[s]=n[s];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},{"./default":1,"./parser":3,"./xss":5}],3:[function(t,e,r){var i=t("./util");function n(t){var e=i.spaceIndex(t);if(-1===e)var r=t.slice(1,-1);else r=t.slice(1,e+1);return"/"===(r=i.trim(r).toLowerCase()).slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function o(t){return"</"===t.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function s(t,e){for(;e<t.length;e++){var r=t[e];if(" "!==r)return"="===r?e:-1}}function l(t,e){for(;e>0;e--){var r=t[e];if(" "!==r)return"="===r?e:-1}}function c(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}r.parseTag=function(t,e,r){"use strict";var i="",a=0,s=!1,l=!1,c=0,u=t.length,f="",g="";t:for(c=0;c<u;c++){var p=t.charAt(c);if(!1===s){if("<"===p){s=c;continue}}else if(!1===l){if("<"===p){i+=r(t.slice(a,c)),s=c,a=c;continue}if(">"===p){i+=r(t.slice(a,s)),f=n(g=t.slice(s,c+1)),i+=e(s,i.length,f,g,o(g)),a=c+1,s=!1;continue}if('"'===p||"'"===p)for(var d=1,h=t.charAt(c-d);""===h.trim()||"="===h;){if("="===h){l=p;continue t}h=t.charAt(c-++d)}}else if(p===l){l=!1;continue}}return a<t.length&&(i+=r(t.substr(a))),i},r.parseAttr=function(t,e){"use strict";var r=0,n=[],o=!1,u=t.length;function f(t,r){if(!((t=(t=i.trim(t)).replace(a,"").toLowerCase()).length<1)){var o=e(t,r||"");o&&n.push(o)}}for(var g=0;g<u;g++){var p,d=t.charAt(g);if(!1!==o||"="!==d)if(!1===o||g!==r||'"'!==d&&"'"!==d||"="!==t.charAt(g-1)){if(/\s|\n|\t/.test(d)){if(t=t.replace(/\s|\n|\t/g," "),!1===o){if(-1===(p=s(t,g))){f(i.trim(t.slice(r,g))),o=!1,r=g+1;continue}g=p-1;continue}if(-1===(p=l(t,g-1))){f(o,c(i.trim(t.slice(r,g)))),o=!1,r=g+1;continue}}}else{if(-1===(p=t.indexOf(d,g+1)))break;f(o,i.trim(t.slice(r+1,p))),o=!1,r=(g=p)+1}else o=t.slice(r,g),r=g+1}return r<t.length&&(!1===o?f(t.slice(r)):f(o,c(i.trim(t.slice(r))))),i.trim(n.join(" "))}},{"./util":4}],4:[function(t,e,r){e.exports={indexOf:function(t,e){var r,i;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var i,n;if(Array.prototype.forEach)return t.forEach(e,r);for(i=0,n=t.length;i<n;i++)e.call(r,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}}},{}],5:[function(t,e,r){var i=t("cssfilter").FilterCSS,n=t("./default"),o=t("./parser"),a=o.parseTag,s=o.parseAttr,l=t("./util");function c(t){return null==t}function u(t){(t=function(t){var e={};for(var r in t)e[r]=t[r];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag,t.onIgnoreTag=n.onIgnoreTagStripAll),t.whiteList=t.whiteList||n.whiteList,t.onTag=t.onTag||n.onTag,t.onTagAttr=t.onTagAttr||n.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||n.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||n.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||n.safeAttrValue,t.escapeHtml=t.escapeHtml||n.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new i(t.css))}u.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,r=e.whiteList,i=e.onTag,o=e.onIgnoreTag,u=e.onTagAttr,f=e.onIgnoreTagAttr,g=e.safeAttrValue,p=e.escapeHtml,d=this.cssFilter;e.stripBlankChar&&(t=n.stripBlankChar(t)),e.allowCommentTag||(t=n.stripCommentTag(t));var h=!1;if(e.stripIgnoreTagBody){h=n.StripTagBody(e.stripIgnoreTagBody,o);o=h.onIgnoreTag}var m=a(t,function(t,e,n,a,h){var m,b={sourcePosition:t,position:e,isClosing:h,isWhite:r.hasOwnProperty(n)};if(!c(m=i(n,a,b)))return m;if(b.isWhite){if(b.isClosing)return"</"+n+">";var v=function(t){var e=l.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var r="/"===(t=l.trim(t.slice(e+1,-1)))[t.length-1];return r&&(t=l.trim(t.slice(0,-1))),{html:t,closing:r}}(a),w=r[n],y=s(v.html,function(t,e){var r,i=-1!==l.indexOf(w,t);return c(r=u(n,t,e,i))?i?(e=g(n,t,e,d))?t+'="'+e+'"':t:c(r=f(n,t,e,i))?void 0:r:r});a="<"+n;return y&&(a+=" "+y),v.closing&&(a+=" /"),a+=">"}return c(m=o(n,a,b))?p(a):m},p);return h&&(m=h.remove(m)),m},e.exports=u},{"./default":1,"./parser":3,"./util":4,cssfilter:8}],6:[function(t,e,r){var i=t("./default"),n=t("./parser");t("./util");function o(t){return null==t}function a(t){(t=function(t){var e={};for(var r in t)e[r]=t[r];return e}(t||{})).whiteList=t.whiteList||i.whiteList,t.onAttr=t.onAttr||i.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||i.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||i.safeAttrValue,this.options=t}a.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,r=e.whiteList,i=e.onAttr,a=e.onIgnoreAttr,s=e.safeAttrValue;return n(t,function(t,e,n,l,c){var u=r[n],f=!1;if(!0===u?f=u:"function"==typeof u?f=u(l):u instanceof RegExp&&(f=u.test(l)),!0!==f&&(f=!1),l=s(n,l)){var g,p={position:e,sourcePosition:t,source:c,isWhite:f};return f?o(g=i(n,l,p))?n+":"+l:g:o(g=a(n,l,p))?void 0:g}})},e.exports=a},{"./default":7,"./parser":9,"./util":10}],7:[function(t,e,r){function i(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var n=/javascript\s*\:/gim;r.whiteList=i(),r.getDefaultWhiteList=i,r.onAttr=function(t,e,r){},r.onIgnoreAttr=function(t,e,r){},r.safeAttrValue=function(t,e){return n.test(e)?"":e}},{}],8:[function(t,e,r){var i=t("./default"),n=t("./css");for(var o in(r=e.exports=function(t,e){return new n(e).process(t)}).FilterCSS=n,i)r[o]=i[o];"undefined"!=typeof window&&(window.filterCSS=e.exports)},{"./css":6,"./default":7}],9:[function(t,e,r){var i=t("./util");e.exports=function(t,e){";"!==(t=i.trimRight(t))[t.length-1]&&(t+=";");var r=t.length,n=!1,o=0,a=0,s="";function l(){if(!n){var r=i.trim(t.slice(o,a)),l=r.indexOf(":");if(-1!==l){var c=i.trim(r.slice(0,l)),u=i.trim(r.slice(l+1));if(c){var f=e(o,s.length,c,u,r);f&&(s+=f+"; ")}}}o=a+1}for(;a<r;a++){var c=t[a];if("/"===c&&"*"===t[a+1]){var u=t.indexOf("*/",a+2);if(-1===u)break;o=(a=u+1)+1,n=!1}else"("===c?n=!0:")"===c?n=!1:";"===c?n||l():"\n"===c&&l()}return i.trim(s)}},{"./util":10}],10:[function(t,e,r){e.exports={indexOf:function(t,e){var r,i;if(Array.prototype.indexOf)return t.indexOf(e);for(r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},forEach:function(t,e,r){var i,n;if(Array.prototype.forEach)return t.forEach(e,r);for(i=0,n=t.length;i<n;i++)e.call(r,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},{}]},{},[2]);
},{}],"xvXS":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}require("./xss.min"),function(){var e={whiteList:{a:["class","target","href","title"],b:[],br:[],div:["style"],em:[],font:["color","face"],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src"],li:[],ol:[],p:[],span:["class","style","contenteditable","data-index","data-equation"],strike:[],strong:[],u:[],ul:[],sub:[],sup:[],section:[]}};window.poFilterXSS=function(t){var o=window.filterXSS(t,e);return o},window.defFilterXSS=function(e){if("object"==t(e)&&null!=e)if("number"==typeof e.length)for(var o=0;o<e.length;o++)"string"==typeof e[o]?e[o]=poFilterXSS(e[o]):e[o]=defFilterXSS(e[o]);else for(var n in e)if("string"==typeof e[n])e[n]=poFilterXSS(e[n]);else{if("code"==n)continue;e[n]=defFilterXSS(e[n])}return e}}();
},{"./xss.min":"VED5"}],"n4Rr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.errorFn=exports.codeFn=void 0;var t=3e3,o=null,e=exports.codeFn={200:function(t,o){t.success&&t.success(o.data)},403:function(e){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"无效的的用户授权标识"}),clearTimeout(o),o=setTimeout(function(){injectExtraAsynCall("onnotoken",{code:"403"},function(){Util.loginWindow()})},t)},404:function(e){if(e.noJump)return $.toast({type:"error",text:"找不到该地址"});clearTimeout(o),o=setTimeout(function(){window.location.href="/error/404"},t)},406:function(e){if(e.noJump)return $.toast({type:"error",text:"权限不足"});clearTimeout(o),o=setTimeout(function(){window.location.href="/error/406"},t)},407:function(e){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"无效签名"}),Util.setCookies("token","",-1),clearTimeout(o),o=setTimeout(function(){injectExtraAsynCall("onnotoken",{code:"407"},function(){Util.loginWindow()})},t)},408:function(e){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"鉴权失败"}),clearTimeout(o),o=setTimeout(function(){injectExtraAsynCall("onnotoken",{code:"408"},function(){Util.loginWindow()})},t)},409:function(t,o){$.toast({type:"error",text:"请求异常，请稍后重试"}),t.error&&t.error(o.data)},412:function(t,o){$.toast({type:"error",text:"请求过于频繁"}),t.error&&t.error(o.data)},509:function(t,o){$.toast({type:"error",text:"请求过于频繁"}),t.error&&t.error(o.data)},510:function(t,o){$.toast({type:"error",text:"系统错误，稍后重试"}),t.error&&t.error(o.data)},655:function(t){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"请求腾讯会议异常"})},659:function(t){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"没找到授权信息"})},661:function(t,o){$.toast({type:"error",text:"未检测到登录状态，请登录账号后重试"}),t.error&&t.error(o.data)},662:function(t){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"文件拥有者才能新建会议"})},663:function(t){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"文件拥有者才能结束会议"})},660:function(t){localStorage.po_redirect=window.location.href,$.toast({type:"error",text:"当前浏览器绑定的腾讯会议账号已绑定其他ProcessOn账号，请更换其他腾讯会议账号再次尝试"})},801:function(t){if(t.noJump)return $.toast({type:"error",text:"文件不存在"});window.location.href="/error/801"},810:function(t){$.toast({type:"error",delay:6e3,text:"没有此文件操作权限"}),setTimeout(function(){window.location.reload()},500)},815:function(t){var o="文件";try{o=t.data.category.startsWith("mind")?"思维导图":t.data.category.startsWith("outline")?"思维笔记":CategoryMap[t.data.category]}catch(e){}window.insert.pay.init({title:"升级会员享无限文件数",pointsSource:"新建"+o})},831:function(t,o){t.success&&t.success(o.data)},911:function(t,o){t.error&&t.error(o.data),$.toast({type:"error",text:"该名称已经存在"})},1121:function(t){$.toast({type:"error",text:"企业未开启分享"}),clearTimeout(o),o=setTimeout(function(){window.location.href="/error/801?redirect="+encodeURIComponent("/org")},3e3)},61681:function(t,o){$.toast({type:"error",text:"当前使用次数已达上限，请明日再来"}),t.error&&t.error(o.data)},61680:function(t,o){insert.pay.init({title:"今日使用次数已达上限，升级会员享更多次数"}),t.error&&t.error(o.data)}},r=exports.errorFn={reptile:function(t){"undefined"==typeof TencentCaptcha||new TencentCaptcha("2046103261",function(o){0===o.ret&&setTimeout(function(){Util.ajax(t)},1e3)}).show()},error:function(t){t.error&&t.error(data)}};
},{}],"t80i":[function(require,module,exports) {
module.exports={buildTimestamp:1698378135519};
},{}],"M55k":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}!function(t){var o={globalParams:{"渠道":"","设备":"","版本号":"","版本":"v5","用户属性":{"用户ID":"","用户来源":"","用户状态":"","注册时间":"","注册方式":"","最后登录时间":"","创作者状态":"","会员到期时间":"","文件数量":"","模板数量":""}},visit:{pageName:null,option:{},hash:!1,debug:!1},params:{"进入页面时间":0,"滚屏次数":0},init:function(){var e=navigator.userAgent.toLowerCase(),i=function(t){return t.test(e)},n=function(t){return(e.match(t)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,".")},a="unknown";i(/windows|win32|win64|wow32|wow64/gi)?a="windows":i(/macintosh|macintel/gi)?a="osx":i(/x11/gi)?a="linux":i(/android|adr/gi)&&t.innerWidth>500?a="android_Pad":i(/android|adr/gi)&&t.innerWidth<=500?a="android_Phone":i(/ios|iphone|ipad|ipod|iwatch/gi)&&t.innerWidth>500?a="ios_Pad":i(/ios|iphone|ipad|ipod|iwatch/gi)&&t.innerWidth<=500&&(a="ios_Phone"),o.globalParams["设备"]=a;var s="unknown";"windows"===a?i(/windows nt 5.0|windows 2000/gi)?s="2000":i(/windows nt 5.1|windows xp/gi)?s="xp":i(/windows nt 5.2|windows 2003/gi)?s="2003":i(/windows nt 6.0|windows vista/gi)?s="vista":i(/windows nt 6.1|windows 7/gi)?s="7":i(/windows nt 6.2|windows 8/gi)?s="8":i(/windows nt 6.3|windows 8.1/gi)?s="8.1":i(/windows nt 10.0|windows 10/gi)&&(s="10"):"osx"===a?s=n(/os x [\d._]+/gi):"android"===a?s=n(/android [\d._]+/gi):"ios"===a&&(s=n(/os [\d._]+/gi)),o.globalParams["版本号"]=s;var r="web";"micromessenger"==e.match(/MicroMessenger/i)?"undefined"!=typeof wx&&wx.miniProgram?wx.miniProgram.getEnv(function(e){e.miniprogram&&(r="小程序")}):r="微信浏览器":i(/electron/gi)&&navigator.userAgent.indexOf("TDAppDesktop")<=-1?r="客户端":"ios"==a||"android"==a?r="APP":navigator.userAgent.indexOf("app/tencent_wemeet")>-1?r="wemeet":navigator.userAgent.indexOf("TDAppDesktop")>-1&&(r="腾讯文档客户端"),o.globalParams["渠道"]=r,o.params["进入页面时间"]=(new Date).getTime();o.bindEvent()},bindEvent:function(){var e=t.onbeforeunload||function(){},i=t.onhashchange||function(){},n=function(){var e=t.location.href,i=o.visit.pageName,n=o.visit.option||{};n["停留时长"]=parseInt(((new Date).getTime()-o.params["进入页面时间"])/1e3),i&&""!=i||(i=o.pageName(e)),"官网首页"==i&&(n["滚屏次数"]=o.params["滚屏次数"]),o.page_visit_time(i,n),localStorage.setItem("po_last_page",i)};"onhashchange"in t&&(void 0===document.documentMode||8==document.documentMode)&&t.addEventListener("hashchange",function(){o.visit.hash&&n(),i()},!1),t.addEventListener("beforeunload",function(){n(),e()},!1);var a,s,r,l=function(){++o.params["滚屏次数"]};a=document,s="scroll",r=l,a.removeEventListener?a.removeEventListener(s,r):a.detachEvent("on"+s,r),function(e,t,o){e.addEventListener?e.addEventListener(t,o):e.attachEvent("on"+event,o)}(document,"scroll",l)},pageName:function(e){return e.match(/\/login/gi)?"注册页":null},setTouchPlace:function(e){localStorage.setItem("po_touch_place",e)},getTouchPlace:function(e){var t=localStorage.getItem("po_touch_place");return e||localStorage.removeItem("po_touch_place"),t},setUserInformation:function(){if(t.userObj){"register"==userObj.userSource&&"主动注册";"phone"==userObj.registerType&&"手机",this.globalParams["用户属性"]["用户ID"]=userObj.userId,this.globalParams["用户属性"]["注册时间"]=userObj.registDate,this.globalParams["用户属性"]["最后登录时间"]=userObj.lastLogin,userObj.profile&&(this.globalParams["用户属性"]["地域"]=userObj.profile.country,this.globalParams["用户属性"]["行业"]=userObj.profile.companyIndustry,this.globalParams["用户属性"]["职业"]=userObj.profile.occupation)}t.memberObj&&(this.globalParams["用户属性"]["用户状态"]=memberObj.member?"会员用户":"免费用户",this.globalParams["用户属性"]["会员到期时间"]=memberObj.expireTime,this.globalParams["用户属性"]["文件限制数量"]=memberObj.fileCount,this.globalParams["用户属性"]["文件数量"]=memberObj.usedFileCount,"number"==typeof memberObj.fileCount&&"number"==typeof memberObj.usedFileCount&&(this.globalParams["用户属性"]["剩余文件数量"]=memberObj.fileCount-memberObj.usedFileCount))},page_visit:function(e,t,i,n){this.setUserInformation(),o.visit.pageName=e,o.visit.hash=!!i,o.visit.option=t||{};var a=localStorage.getItem("po_last_page")||"无";(t=t||{})["触发位置"]=t["触发位置"]||o.getTouchPlace(),t["用户类型"]=o.globalParams["用户属性"]["用户状态"],"专题详情页"==e?t["专题ID"]=Util.getUrlParams1("id"):"文件分享页"!=e&&"常规邀请活动_邀请落地页"!=e||t["页面来源"]||(t["页面来源"]="站外",t["来源URL"]=document.referrer);var s={};Object.assign(s,{"页面名称":e,"页面来源":t["页面来源"]||a}),Object.assign(s,o.globalParams),Object.assign(s,t);var r="page_visit";n&&""!=n&&(r=n+"_page_visit"),poCollect(r,s),o.visit.debug},page_visit_time:function(e,t){this.setUserInformation();var i=localStorage.getItem("po_last_page")||"无";t=t||{};var n={};Object.assign(n,{"页面名称":e,"页面来源":i}),Object.assign(n,o.globalParams),Object.assign(n,t),o.visit.debug,poCollect("page_visit_time",n)},show:function(e,t){this.setUserInformation(),(e=e||{})["用户类型"]=o.globalParams["用户属性"]["用户状态"];var i={};Object.assign(i,o.globalParams),Object.assign(i,e);var n="dialog_show";t&&""!=t&&(n=t+"_show"),poCollect(n,i)},click:function(e,t,i){this.setUserInformation(),i=i||{},t=t||localStorage.getItem("po_last_page"),i["触发位置"]=i["触发位置"]||o.getTouchPlace(),i["用户类型"]=o.globalParams["用户属性"]["用户状态"];var n={};Object.assign(n,{"当前页面":t}),Object.assign(n,o.globalParams),Object.assign(n,i),o.visit.debug,poCollect(e,n)},collect:function(t,i){this.setUserInformation(),e(i),i=i||{},o.visit.debug,i["用户类型"]=o.globalParams["用户属性"]["用户状态"];var n={};Object.assign(n,o.globalParams),Object.assign(n,i),poCollect(t,n)}};o.init(),t.buried_point=o,t.poPoint=o,t.buried_point_fn=function(e,t,i,n,a){if(o[e])return o[e](t,i,n,a)},function(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),n=""+t+(o=o<10?"0"+o:o)+(i=i<10?"0"+i:i);if(localStorage.getItem(location.href)!=n)try{poCollect("v5_visit",{}),localStorage.setItem(location.href,n)}catch(a){}}()}(window);
},{}],"Sa63":[function(require,module,exports) {
var process = require("process");
var process=require("process"),_config=require("../../v5_editor/static/config.json");function _toConsumableArray(o){return _arrayWithoutHoles(o)||_iterableToArray(o)||_unsupportedIterableToArray(o)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,e){if(o){if("string"==typeof o)return _arrayLikeToArray(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);return"Object"===t&&o.constructor&&(t=o.constructor.name),"Map"===t||"Set"===t?Array.from(o):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(o,e):void 0}}function _iterableToArray(o){if("undefined"!=typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}function _arrayWithoutHoles(o){if(Array.isArray(o))return _arrayLikeToArray(o)}function _arrayLikeToArray(o,e){(null==e||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var _require=require("./po/codeCallback"),codeFn=_require.codeFn,errorFn=_require.errorFn;window.jQuery=window.$=require("../common/jquery-1.10.2"),window.editorGlobal={},window.injectExtraAsynCall=function(o,e,t){if(window.editorGlobalConfig&&"function"==typeof window.editorGlobalConfig[o])window.editorGlobalConfig[o](e,function(o){t(o)});else{if(window.editorGlobalConfig&&window.editorGlobalConfig[o])return window.editorGlobalConfig[o];t&&t(e)}},require("./buried_point"),function($){$(document).on("mouseover.tip","[title],[original-title]",function(){if("undefined"!=typeof device&&device.indexOf("mobi")>-1)return!1;if($(this).attr("disableTitle"))return!1;if($(this).hasClass("dropdown")&&$(this).hasClass("selected"))return!1;var o=$(this);if(o.attr("title")&&(o.attr("original-title",o.attr("title")),o.removeAttr("title")),o.attr("original-title")){var e=o.attr("original-title"),t=$(".po-hover-tip");0==t.length&&(t=$("<div class='po-hover-tip'><div class='tip-arrow'></div><div class='tip-content radius3'></div></div>").appendTo("body")),Util.isMac()&&(e=e.replace(/Ctrl/,"<span class='po-diagraming-icons' style='font-size: 12px;'>&#xe795;</span>").replace(/Alt/,"<span class='po-diagraming-icons' style='font-size: 12px;'>&#xe9e0;</span>")),$(".tip-content").html(e),$(".po-hover-tip").show(),e.indexOf("）")==e.length-1?$(".tip-content").css("padding-right","0px"):$(".tip-content").css("padding-right","8px");var n=0,i=0;"right"==o.attr("title-pos")?(n=o.offset().left+o.outerWidth()+4+4,i=o.offset().top+o.outerHeight()/2-t.outerHeight()/2,$(".tip-arrow").attr("class","tip-arrow tip-right")):"top"==o.attr("title-pos")?(n=o.offset().left+o.outerWidth()/2-t.outerWidth()/2,i=o.offset().top-t.outerHeight()-4-4,$(".tip-arrow").attr("class","tip-arrow tip-top")):"left"==o.attr("title-pos")?(n=o.offset().left-t.outerWidth()-4-4,i=o.offset().top+o.outerHeight()/2-t.outerHeight()/2,$(".tip-arrow").attr("class","tip-arrow tip-left")):(n=o.offset().left+o.outerWidth()/2-t.outerWidth()/2,i=o.offset().top+o.outerHeight()+4+4,$(".tip-arrow").attr("class","tip-arrow")),$(".tip-arrow").removeAttr("style");var r=0,a=0;n<2?r=2:n+t.outerWidth()>$(window).width()-2&&(r=$(window).width()-t.outerWidth()-2),i<2?a=2:i+t.outerHeight()>$(window).height()-2&&(a=$(window).height()-t.outerHeight()-2),"left"==o.attr("title-pos")||"right"==o.attr("title-pos")?a&&$(".tip-arrow").css({marginTop:i-a-4}):r&&$(".tip-arrow").css({marginLeft:n-r-4}),t.css({left:r||n,top:a||i})}}).on("mouseout.tip","[title],[original-title]",function(){$(".po-hover-tip").hide()}),$("body").on("mouseover.titletip","[title-tip]",function(){var o=$(this),e=$(this).attr("title-tip"),t=$(".po-title-tip");e&&(0==t.length&&(t=$('<div class="po-title-tip">'+e+"</div>").appendTo("body")),t.html(e).css({left:parseInt(o.offset().left+o.outerWidth()/2-t.outerWidth()/2),top:parseInt(o.offset().top+o.outerHeight()+14)}).show())}).on("mouseout.titletip","[title-tip]",function(){$(".po-title-tip").hide()}),$.toast=function(o,e){if("object"==_typeof(o)){o=$.extend({type:"success",text:"操作成功",delay:3e3,name:"name",autoClose:!0,zIndex:9999,target:$("body")},o);var t=$("#po_toast");t.length>0&&t.remove();var n="";if(o.icon?n="<span class='po-diagraming-icons'>"+o.icon+"</span>":"success"==o.type?n="<span class='po-diagraming-icons'>&#xe976;</span>":"error"==o.type?n="<span class='po-diagraming-icons'>&#xe995;</span>":"warning"==o.type?n="<span class='po-diagraming-icons'>&#xe977;</span>":"secondary"==o.type&&(n="<span class='po-diagraming-icons'>&#xe996;</span>"),t=$("<div id='po_toast' style='z-index:"+o.zIndex+"' name="+o.name+" class='po-toast po-toast-"+o.type+"'>"+n+o.text+"</div>").appendTo(o.target),o.marginTop&&t.css("margin-top",o.marginTop+"px"),o.autoClose)var i=setTimeout(function(){t.remove(),clearTimeout(i)},o.delay);if("function"==typeof o.onClose){var r=$("<div class='po-diagraming-icons po-close-btn'>&#xe6b9;</div>").appendTo(t);t.addClass("po-toast-close"),r.off("click").on("click",function(e){t.remove(),o.onClose()})}}else"string"==typeof o&&"close"==o&&(e?"all"==e?$("#po_toast").remove():$("#po_toast[name="+e+"]").remove():$("#po_toast[name=name]").remove())},$.loading=function(o){if("string"!=typeof o){"object"!=_typeof(o)&&(o={});o=$.extend({type:"style1",text:"",target:$("body")},o);var e=$("#po-loading");e.length>0&&e.remove(),e=$("<div id='po-loading' class='po-loading po-loading-"+o.type+"'>"+o.text+"<div class='po-loading-loader po-loading-four'/></div>").appendTo(o.target)}else"close"==o&&$("#po-loading").remove()};var showTiping=null;function setSpinnerValue(o,e,t){if(o.attr("max")){var n=parseInt(o.attr("max"));e>n&&(e=n)}if(o.attr("min")){var i=parseInt(o.attr("min"));e<i&&(e=i)}var r=o.attr("old"),a=e+t.unit;o.spinner("setValue",e+t.unit),r!=a&&t.onChange&&t.onChange(e)}$.showTip=function(o,e,t,n){var i=$("#mind-tip");"close"!=o?(0==i.length&&((i=$("<div id='mind-tip'><div class='mind-tip-text'></div></div>").appendTo("body")).append("<div class='mind-tip-close mind-icons'></div>"),i.children(".mind-tip-close").on("click",function(){$.showTip("close")})),n?i.children(".mind-tip-close").on("click.callback",function(){n()}):i.children(".mind-tip-close").unbind("click.callback"),i.children(".mind-tip-text").html(o),i.css({marginLeft:-i.width()/2-15}),null!=t&&"left_bottom"==t?i.show().css({bottom:100,left:25,marginLeft:"0",top:"initial"}):i.show().css({top:60}),null!=e&&null==showTiping&&(showTiping=setTimeout(function(){$.showTip("close"),showTiping=null},e))):i.remove()},$.fn.checkbox=function(o){if("string"==typeof o)if("check"==o)$(this).addClass("checked");else if("uncheck"==o)$(this).removeClass("checked");else if("isChecked"==o)return $(this).hasClass("checked")},$.fn.checkboxall=function(o){var e=[],t=$(this),n=void 0===o?{}:o;$(this).off().on("click",function(o){var i;(i=$(this)).hasClass("checked")?i.removeClass("checked"):i.addClass("checked"),e=[],t.each(function(){$(this).hasClass("checked")&&e.push($(this).attr("po-data"))}),"function"==typeof n.change&&n.change(e)})},$.fn.radio=function(o){var e="number"==typeof o.index?o.index:0;function t(o){o.addClass("is-checked").siblings("").removeClass("is-checked")}t($(this).eq(e)),$(this).off().on("click",function(e){e.stopPropagation(),e.preventDefault(),t($(this)),"function"==typeof o.change&&o.change($(this).index(),$(this).attr("po-data"))})},$.fn.switch=function(o){var e=void 0!==o.size?o.size:"default",t=void 0!==o.firstColor?o.firstColor:"#dcdfe6",n=void 0!==o.secondColor?o.secondColor:"#62b979",i=void 0!==o.status?o.status:"off";"mini"===e&&$(this).addClass("size-mini"),"on"===i&&$(this).addClass("is-checked"),$(this).off().on("click",function(e){e.stopPropagation(),e.preventDefault();var i=$(this),r=$(this).hasClass("is-checked")?"on":"off";"on"==r?(i.removeClass("is-checked"),i.children(".po-switch-core").css({background:t,borderColor:t})):(i.addClass("is-checked"),i.children(".po-switch-core").css({background:n,borderColor:n})),"function"==typeof o.change&&o.change("on"!==r)})},$.fn.popconfirm=function(o){var e=o.width||260,t=null;function n(){$("#po-popover").remove(),$(document).off("mousewheel.popover")}$(this).off("click").on("click",function(i){return t=$(i.target),function(i,r,a){$("#po-popover").length>0&&n();var s=i.left+r/2-e/2,l=i.top+a+10,c="";c+='<div id="po-popover" class="po-popover po-popper triangle-default turn-up" style="width:'+e+"px;top: "+l+"px; left: "+s+'px;">',c+='<div class="po-popconfirm">',c+='<div class="po-popconfirm__main">',c+='<i class="po-popconfirm__icon po-icon-question" style="color: rgb(255, 153, 0);"></i>',c+=o.title,c+="</div>",c+='<div class="po-popconfirm__action">',c+='<div class="po-button default" _btnevt="cancel" style="margin-right: 16px;">取消</div>',c+='<div class="po-button primary" _btnevt="success">确认</div>',c+="</div>",c+="</div>";var d=$(c+="</div>");$("body").append(d),p=d,$("body").off("click.popover").on("click.popover",function(){n(),"function"==typeof o.cancel&&o.cancel()}),$(document).on("mousewheel.popover",function(e){n(),"function"==typeof o.cancel&&o.cancel()}),p.find(".po-button").off("click.popover").on("click.popover",function(e){var i=$(this).attr("_btnevt");"function"==typeof o[i]&&o[i](t),n()}),function(o,t,n,i){var r=$(window).width(),a=$(window).height();if(o.offset().left+e>r-32){var s=26,l=r-(t.left+n)-s;l<10&&(l=10),o.css({position:"fixed",left:"initial",right:l+"px"}),o.addClass("triangle-right")}if(o.offset().left<32){var s=26,c=t.left-s;c<10&&(c=10),o.css({position:"fixed",left:c+"px"}),o.addClass("triangle-left")}var d=o.height();if(o.offset().top+d>a){var p=a-d;o.css({top:p})}}(d,i,r);var p}($(this).offset(),$(this).outerWidth(),$(this).outerHeight()),"function"==typeof o.onClick&&o.onClick(i),!1})},$.fn.searchInput=function(o){if(o){var e=$(this),t="";o.maxLength&&(t='maxlength="'+o.maxLength+'"'),e.append('<span class="search-icon po-diagraming-icons">&#xe6c9;</span> <input class="po-input" type="text" placeholder="请输入搜索内容" '+t+">"),"function"==typeof o.search&&e.children(".po-input").off("blur keydown input").on("blur",function(){Util.filterXss($.trim($(this).val()))}).on("keydown",function(e){if(e.stopPropagation(),"13"==e.keyCode){var t=Util.filterXss($.trim($(this).val()));o.search(t)}}).on("input",function(){Util.filterXss($.trim($(this).val())).length>0?0==e.children(".search-clear-icon").length&&e.append('<span class="search-clear-icon po-diagraming-icons">&#xe6c8;</span>'):(e.children(".search-clear-icon").remove(),o.empty())}),e.on("mousedown",function(t){if($(t.target).hasClass("search-clear-icon"))e.children(".po-input").val(""),e.children(".search-clear-icon").remove(),"function"==typeof o.empty&&(o.empty(),e.children(".po-input").focus());else if($(t.target).hasClass("search-icon")){var n=Util.filterXss($.trim(e.children(".po-input").val()));o.search(n)}})}},$.fn.spinner=function(o){var e=$(this);if("string"==typeof o){if("getValue"==o){var t=e.find("input").val();return t=parseInt(t)}if("setValue"==o)e.find("input").val(arguments[1]),e.attr("old",arguments[1]);else if("setOptions"==o){var n=arguments[1];void 0!==n.min&&e.attr("min",n.min),void 0!==n.max&&e.attr("max",n.max)}else"disable"==o?(e.addClass("disabled"),e.parent(".po-spinner-group-inside").addClass("disabled")):"enable"==o&&(e.removeClass("disabled"),e.parent(".po-spinner-group-inside").removeClass("disabled"));return $(this)}e.addClass("po-spinner"),e.html("<div class='po-spinner-input'><input/></div><div class='po-spinner-buttons'><div class='po-spinner-up'></div><div class='po-spinner-down'></div></div>");void 0!==(o=$.extend({step:1,unit:"",min:0,max:2e4},o)).min&&e.attr("min",o.min),void 0!==o.max&&e.attr("max",o.max),e.css("width",o.width);var i=e.children(".po-spinner-input").find("input");e.spinner("setValue",o.min+o.unit),e.find(".po-spinner-up").bind("click",function(){if(!e.button("isDisabled")){var t=e.spinner("getValue")+o.step;setSpinnerValue(e,t,o)}}),e.find(".po-spinner-down").bind("click",function(){if(!e.button("isDisabled")){var t=e.spinner("getValue")-o.step;setSpinnerValue(e,t,o)}}),i.bind("keydown",function(t){if(t.stopPropagation(),13==t.keyCode){var n=parseInt($(this).val());if(isNaN(n))return o.min;setSpinnerValue(e,n,o)}else 38==t.keyCode?(e.find(".po-spinner-up").trigger("click"),i.focus()):40==t.keyCode&&(e.find(".po-spinner-down").trigger("click"),i.focus())}).bind("focus",function(o){$(this).select(),$(this).bind("mouseup",function(o){o.preventDefault(),$(this).unbind("mouseup")});var e=$(this).parent().parent(),t=e.parent(".po-spinner-group-inside");e.hasClass("active")||(e.addClass("active inset"),t.addClass("active inset"))}).bind("blur",function(t){var n=$(this).parent().parent(),i=n.parent(".po-spinner-group-inside");n.hasClass("inset")&&(n.removeClass("active inset"),i.removeClass("active inset"));var r=parseInt($(this).val());if(isNaN(r))return o.min;setSpinnerValue(e,r,o)})},$.fn.button=function(o){if("string"==typeof o){if("disable"==o)$(this).addClass("disabled"),$(this).find("input").attr("disabled",!0),$(this).prev(".label").addClass("disabled"),$(this).parent(".po-tool-group").length>0&&$(this).parent(".po-tool-group").prev(".label").addClass("disabled");else if("enable"==o)$(this).removeClass("disabled"),$(this).find("input").attr("disabled",!1),$(this).prev(".label").removeClass("disabled"),$(this).parent(".po-tool-group").length>0&&$(this).parent(".po-tool-group").prev(".label").removeClass("disabled");else{if("isDisabled"==o)return $(this).hasClass("disabled");if("isSelected"==o)return $(this).hasClass("selected");if("unselect"==o)$(this).removeClass("selected");else if("select"==o)$(this).addClass("selected");else if("show"==o)$(this).removeClass("hide");else if("hide"==o)$(this).addClass("hide");else if("setText"==o)$(this).children(".text-content").html(arguments[1]);else if("setColor"==o){var e="none";"transparent"==arguments[1]?(e="0 0 0 1px #e3e6e9",$(this).find(".po-tool-button-color,.color_line").css({"background-color":arguments[1]})):arguments[1]&&0==arguments[1].indexOf("#")?($(this).find(".po-tool-button-color,.color_line").css("background-color",arguments[1]),"#fff"!=arguments[1].toLowerCase()&&"#ffffff"!=arguments[1].toLowerCase()||(e="0 0 0 1px #e3e6e9")):($(this).find(".po-tool-button-color,.color_line").css("background-color","rgb("+arguments[1]+")"),"255,255,255"==arguments[1]&&(e="0 0 0 1px #e3e6e9")),$(this).children(".po-tool-button-color").css({"box-shadow":e})}else if("getColor"==o){return $(this).find(".po-tool-button-color,.color_line").css("background-color").replace(/\s/g,"").replace(/[^\d,\.]/g,"")}}return $(this)}var t=$(this);t.off("click"),t.off("mousedown"),o.onClick&&t.on("click",function(e){$(this).button("isDisabled")||o.onClick(e,$(this))}),o.onMousedown&&t.on("mousedown",function(e){t.button("isDisabled")||(o.onMousedown(e,t),e.stopPropagation())})},$.fn.colorButton=function(o){var e=$(this);if("string"!=typeof o)e.unbind("click").bind("click",function(t){if(!e.button("isDisabled")){t.stopPropagation();var n=$.extend({},o);n.target=e,n.onSelect=function(t){e.colorButton("setColor",t),o.onSelect&&o.onSelect(t)};var i=$(this).css("background-color");i=i.replace(/[^\d,\.]/g,""),n.color=i,n.trans=!(void 0!==o.trans&&!o.trans),$.colorpicker(n)}});else if("setColor"==o)"transparent"==arguments[1]?e.css({"background-color":"transparent","background-image":"url("+staticBasePath+"/assets/images/transparent.png)","background-size":"100% 100%"}):!arguments[1]||0!=arguments[1].indexOf("#")&&0!=arguments[1].indexOf("rgb")?(e.css("background-color","rgb("+arguments[1]+")"),e.css("background-image","")):(e.css("background-color",arguments[1]),e.css("background-image",""));else{if("getRgbColor"==o)return Util.getHexColor(e.css("background-color")).rgb;if("getHexColor"==o)return Util.getHexColor(e.css("background-color")).hex}},$.fn.colorInput=function(o){var e=$(this);"string"!=typeof o?(e.before("<span style='padding-left: 4px; color: #A6B9CD'>#</span>").css("padding-left","4px"),e.off().on("blur.colorInput",function(t){t.stopPropagation();var n=$.extend({},o);if("function"==typeof n.onChange)if("hex"==n.type)n.onChange("#"+e.val());else{var i=Util.getRgbFromHex(e.val());$.isEmptyObject(i)||n.onChange(i.r+","+i.g+","+i.b)}}).on("keydown",function(o){o.stopPropagation(),13==o.keyCode&&e.blur()})):"setColor"==o&&("transparent"==arguments[1]?e.val("无填充"):0==arguments[1].indexOf("#")?e.val(arguments[1].substring(1,arguments[1].length)):e.val(Util.getHexColor("rgb("+arguments[1]+")").hex))};var currentMenu=null;$.fn.dropdown=function(o){var e=$(this);if(e.find(".po-selected-icon").remove(),"string"!=typeof o)if(null==currentMenu){Util.isMac()&&e.find(".po-menu-hotkey").each(function(o,e){$(e).html($(e).html().replace(/Ctrl/,"<span class='po-diagraming-icons' style='font-size: 12px;'>&#xe795;</span>").replace(/Alt/,"<span class='po-diagraming-icons' style='font-size: 12px;'>&#xe9e0;</span>"))});var t=o.target;currentMenu={target:t,menu:e,zoom:o.zoom?o.zoom:1};var n,i=t.offset();t.addClass("selected"),t.attr("dropdown",!0),e.find("li").each(function(o,e){t.find(".text-content").text().trim().length>0&&t.find(".text-content").text().trim()==$(e).find(".text").text().trim()&&$(e).menuitem("select")}),e.hasClass("auto-target")&&e.width(t.outerWidth()),e.show(),$(".po-hover-tip").hide(),n="center"==o.position?i.left+t.outerWidth()*currentMenu.zoom/2-e.outerWidth()/2:"right"==o.position?i.left+t.outerWidth()*currentMenu.zoom-e.outerWidth():i.left;var r=i.top+t.outerHeight()*currentMenu.zoom,a=e.find(".po-menu").length;a||e.hasClass("color_picker")||e.css({maxHeight:$(window).height()<500?"376px":"450px",overflowY:"auto"}),n<2?n=2:n+e.outerWidth()>$(window).width()-2&&(n=$(window).width()-e.outerWidth()-2),!a&&e.outerHeight()+10>$(window).height()?(r=5,e.css({maxHeight:$(window).height()-10-(e.outerHeight()-e.height())+"px",overflowY:"auto"})):r+e.outerHeight()>$(window).height()&&(r=$(window).height()-e.outerHeight()-5),e.css({top:r,left:n,zIndex:11}),void 0!==o.zindex&&e.css("z-index",o.zindex);var s=e.find(".extend-menu"),l=e.offset();s.css("left",e.outerWidth()),l.left+e.outerWidth()+s.outerWidth()>$(window).width()-2&&s.css("left",-1*s.outerWidth()),e.unbind("mousedown").bind("mousedown",function(o){o.stopPropagation()});var c=o.isSelect;void 0!==o.bind&&1!=o.bind||e.find("li:not(.devider,.menu_text)").off("click").on("click",function(){var n=$(this);n.menuitem("isDisabled")||n.hasClass("extend")||n.menuitem("isSelected")||o.onSelect&&(c&&t.find(".text-content").text(n.find(".text").text()),o.onSelect(n),e.dropdown("close"))}),e.off("mousedown touchend").on("mousedown touchend",function(o){o.stopPropagation()}).off("mouseup touchstar").on("mouseup touchstar",function(o){o.stopPropagation()}),$(document).off("mousedown.ui_dropdown touchend.ui_dropdown").on("mousedown.ui_dropdown touchend.ui_dropdown",function(t){$(t.target).parents(".color_picker").length||$(t.target).hasClass("color_picker")||$(t.target).parents("[dropdown=true]").length>0||$(t.target).attr("dropdown")||(e.dropdown("close"),o.onClose&&o.onClose())}),$(document).off("mouseup.ui_dropdown touchstar.mind-dropdown").on("mouseup.ui_dropdown touchstar.mind-dropdown",function(t){$(t.target).parents(".color_picker").length||$(t.target).hasClass("color_picker")||$(t.target).parents("[dropdown=true]").length>0||$(t.target).attr("dropdown")||(e.dropdown("close"),o.onClose&&o.onClose())})}else currentMenu.menu.dropdown("close");else"close"==o?(e.hide(),null!=currentMenu&&(currentMenu.target.removeClass("selected"),currentMenu.target.removeAttr("dropdown")),$(document).unbind("mousedown.ui_dropdown"),currentMenu=null):"select"==o&&arguments[1].children(".po-menu-item-box").prepend("<div class='po-selected-icon po-diagraming-icons'>&#xe6ba;</div>")},$.fn.menuitem=function(o){var e=$(this);if("string"==typeof o)if("disable"==o)e.addClass("disabled");else if("enable"==o)e.removeClass("disabled");else{if("isDisabled"==o)return e.hasClass("disabled");if("isSelected"==o)return e.children(".po-menu-item-box").children(".po-selected-icon").length>0;if("unselect"==o)return e.children(".po-menu-item-box").children(".po-selected-icon").remove();if("select"==o&&!e.menuitem("isSelected"))return e.children(".po-menu-item-box").prepend("<div class='po-selected-icon po-diagraming-icons'>&#xe6ba;</div>")}},$.colorpicker=function(o){var e=$(".color_picker"),t={config:{colorData:{"系统色":[{color:"rgba(239,236,235,1)"},{color:"rgba(242,242,242,1)"},{color:"rgba(231,235,237,1)"},{color:"rgba(250,220,219,1)"},{color:"rgba(251,234,218,1)"},{color:"rgba(252,249,234,1)"},{color:"rgba(229,246,218,1)"},{color:"rgba(219,245,245,1)"},{color:"rgba(210,214,249,1)"},{color:"rgba(250,221,237,1)"},{color:"rgba(222,217,215,1)"},{color:"rgba(217,217,217,1)"},{color:"rgba(224,224,224,1)"},{color:"rgba(245,185,183,1)"},{color:"rgba(248,213,181,1)"},{color:"rgba(246,237,193,1)"},{color:"rgba(202,237,180,1)"},{color:"rgba(183,234,235,1)"},{color:"rgba(166,174,243,1)"},{color:"rgba(246,187,219,1)"},{color:"rgba(190,179,175,1)"},{color:"rgba(191,191,191,1)"},{color:"rgba(158,158,158,1)"},{color:"rgba(241,149,148,1)"},{color:"rgba(244,193,143,1)"},{color:"rgba(241,228,162,1)"},{color:"rgba(176,227,143,1)"},{color:"rgba(148,224,225,1)"},{color:"rgba(121,133,236,1)"},{color:"rgba(241,153,200,1)"},{color:"rgba(157,140,136,1)"},{color:"rgba(166,166,166,1)"},{color:"rgba(97,97,97,1)"},{color:"rgba(236,114,112,1)"},{color:"rgba(241,172,106,1)"},{color:"rgba(233,214,111,1)"},{color:"rgba(149,218,105,1)"},{color:"rgba(112,213,215,1)"},{color:"rgba(91,121,232,1)"},{color:"rgba(237,119,182,1)"},{color:"rgba(92,64,56,1)"},{color:"rgba(127,127,127,1)"},{color:"rgba(38,38,38,1)"},{color:"rgba(162,55,53,1)"},{color:"rgba(166,106,48,1)"},{color:"rgba(167,147,44,1)"},{color:"rgba(86,146,48,1)"},{color:"rgba(53,142,144,1)"},{color:"rgba(49,74,164,1)"},{color:"rgba(162,60,115,1)"}],"莫兰迪":[{color:"rgba(241,241,232,1)"},{color:"rgba(236,236,237,1)"},{color:"rgba(243,250,249,1)"},{color:"rgba(244,240,234,1)"},{color:"rgba(249,250,238,1)"},{color:"rgba(248,249,245,1)"},{color:"rgba(245,233,237,1)"},{color:"rgba(252,231,235,1)"},{color:"rgba(249,238,225,1)"},{color:"rgba(254,245,239,1)"},{color:"rgba(227,226,209,1)"},{color:"rgba(217,218,219,1)"},{color:"rgba(232,245,244,1)"},{color:"rgba(233,225,213,1)"},{color:"rgba(243,246,221,1)"},{color:"rgba(240,243,236,1)"},{color:"rgba(235,210,220,1)"},{color:"rgba(249,207,215,1)"},{color:"rgba(243,221,195,1)"},{color:"rgba(253,235,223,1)"},{color:"rgba(214,212,186,1)"},{color:"rgba(197,199,202,1)"},{color:"rgba(220,239,238,1)"},{color:"rgba(221,209,193,1)"},{color:"rgba(238,241,203,1)"},{color:"rgba(233,236,226,1)"},{color:"rgba(224,188,202,1)"},{color:"rgba(246,182,196,1)"},{color:"rgba(237,204,165,1)"},{color:"rgba(252,226,207,1)"},{color:"rgba(200,197,163,1)"},{color:"rgba(178,181,184,1)"},{color:"rgba(209,234,233,1)"},{color:"rgba(210,194,172,1)"},{color:"rgba(232,237,186,1)"},{color:"rgba(225,230,217,1)"},{color:"rgba(214,165,185,1)"},{color:"rgba(243,158,176,1)"},{color:"rgba(231,187,135,1)"},{color:"rgba(251,216,191,1)"},{color:"rgba(149,146,112,1)"},{color:"rgba(127,130,133,1)"},{color:"rgba(158,183,182,1)"},{color:"rgba(159,143,121,1)"},{color:"rgba(181,186,135,1)"},{color:"rgba(174,179,166,1)"},{color:"rgba(163,114,134,1)"},{color:"rgba(192,107,125,1)"},{color:"rgba(180,136,84,1)"},{color:"rgba(200,165,140,1)"}],"中国风":[{color:"rgba(134,107,80,1)"},{color:"rgba(112,81,56,1)"},{color:"rgba(90,86,69,1)"},{color:"rgba(92,55,25,1)"},{color:"rgba(119,85,80,1)"},{color:"rgba(90,18,22,1)"},{color:"rgba(176,145,62,1)"},{color:"rgba(150,77,34,1)"},{color:"rgba(226,131,66,1)"},{color:"rgba(195,121,64,1)"},{color:"rgba(44,35,5,1)"},{color:"rgba(100,88,34,1)"},{color:"rgba(107,94,76,1)"},{color:"rgba(85,105,128,1)"},{color:"rgba(112,136,125,1)"},{color:"rgba(91,132,131,1)"},{color:"rgba(151,95,66,1)"},{color:"rgba(162,130,94,1)"},{color:"rgba(221,171,76,1)"},{color:"rgba(145,164,90,1)"},{color:"rgba(77,82,85,1)"},{color:"rgba(88,125,140,1)"},{color:"rgba(115,124,123,1)"},{color:"rgba(177,173,148,1)"},{color:"rgba(173,180,169,1)"},{color:"rgba(70,126,125,1)"},{color:"rgba(148,182,142,1)"},{color:"rgba(137,66,118,1)"},{color:"rgba(195,96,119,1)"},{color:"rgba(213,148,130,1)"},{color:"rgba(20,74,116,1)"},{color:"rgba(73,92,105,1)"},{color:"rgba(49,70,86,1)"},{color:"rgba(19,72,87,1)"},{color:"rgba(126,132,137,1)"},{color:"rgba(143,146,127,1)"},{color:"rgba(178,187,190,1)"},{color:"rgba(103,144,124,1)"},{color:"rgba(83,146,113,1)"},{color:"rgba(210,177,22,1)"},{color:"rgba(50,47,59,1)"},{color:"rgba(82,82,136,1)"},{color:"rgba(128,118,163,1)"},{color:"rgba(26,148,188,1)"},{color:"rgba(93,49,49,1)"},{color:"rgba(49,74,67,1)"},{color:"rgba(193,101,26,1)"},{color:"rgba(222,158,68,1)"},{color:"rgba(210,177,22,1)"},{color:"rgba(210,217,122,1)"}],"潘通色":[{color:"rgba(227,240,225,1)"},{color:"rgba(238,231,241,1)"},{color:"rgba(228,213,216,1)"},{color:"rgba(253,248,220,1)"},{color:"rgba(223,227,245,1)"},{color:"rgba(255,241,213,1)"},{color:"rgba(223,229,219,1)"},{color:"rgba(226,239,245,1)"},{color:"rgba(222,230,230,1)"},{color:"rgba(249,221,214,1)"},{color:"rgba(199,225,195,1)"},{color:"rgba(222,208,228,1)"},{color:"rgba(202,170,177,1)"},{color:"rgba(251,241,184,1)"},{color:"rgba(191,199,234,1)"},{color:"rgba(254,226,171,1)"},{color:"rgba(191,202,182,1)"},{color:"rgba(198,223,234,1)"},{color:"rgba(189,206,205,1)"},{color:"rgba(243,187,173,1)"},{color:"rgba(171,209,166,1)"},{color:"rgba(205,184,214,1)"},{color:"rgba(175,128,138,1)"},{color:"rgba(248,235,149,1)"},{color:"rgba(158,170,224,1)"},{color:"rgba(254,212,128,1)"},{color:"rgba(160,176,146,1)"},{color:"rgba(169,206,224,1)"},{color:"rgba(157,181,181,1)"},{color:"rgba(237,153,132,1)"},{color:"rgba(143,194,136,1)"},{color:"rgba(189,161,201,1)"},{color:"rgba(149,85,99,1)"},{color:"rgba(246,228,113,1)"},{color:"rgba(126,142,213,1)"},{color:"rgba(253,197,86,1)"},{color:"rgba(128,149,109,1)"},{color:"rgba(141,190,213,1)"},{color:"rgba(124,157,156,1)"},{color:"rgba(231,119,91,1)"},{color:"rgba(92,143,85,1)"},{color:"rgba(138,110,150,1)"},{color:"rgba(98,34,48,1)"},{color:"rgba(195,177,62,1)"},{color:"rgba(75,91,162,1)"},{color:"rgba(202,146,35,1)"},{color:"rgba(77,98,58,1)"},{color:"rgba(90,139,162,1)"},{color:"rgba(73,106,105,1)"},{color:"rgba(180,68,40,1)"}]},colorBase:[{color:"transparent"},{color:"rgba(255,255,255,1)"},{color:"rgba(127,139,152,1)"},{color:"rgba(0,0,0,1)"},{color:"rgba(231,79,76,1)"},{color:"rgba(237,151,69,1)"},{color:"rgba(224,196,49,1)"},{color:"rgba(123,209,68,1)"},{color:"rgba(rgba(76,203,205,1))"},{color:"rgba(70,105,234,1)"},{color:"rgba(232,85,164,1)"}]},data:{hsb:{h:0,s:100,b:100},rgba:{r:0,g:0,b:0,a:1}},init:function(){0==e.find(".color_change>.select").length&&(this.renderGroupColor("系统色",this.config.colorData["系统色"]),e.find(".color_change div[type=select]").addClass("select")),0==e.find(".color_base>div").length&&this.renderGroupColor("colorBase",this.config.colorBase),this.setHistory();var t=$.extend({type:"rgb"},o,{bind:!1});if(null==t.dropdown||t.dropdown)e.dropdown(t),e.off("mouseup");else{var n=o.target,i=n.offset();e.css({top:i.top,left:i.left+n.outerWidth()+1}).show()}if("transparent"==o.color||"0,0,0,0"==o.color)var r="FFFFFF";else if(o.color){this.data.rgba=this.strToRgba(o.color);r=this.rgbToHex(this.data.rgba)}else r="FFFFFF";e.find(".input_hex").val(r),this.setColorByInput("input_hex",r),1==o.trans?e.removeClass("alpha_disabled"):e.addClass("alpha_disabled"),(!window.EyeDropper||window.deviceType&&deviceType.includes("wpsclient"))&&e.find(".color_options .color_draw").hide(),e.children(".color_extend").remove(),o.extend&&e.append("<div class='color_extend'>"+o.extend+"</div>"),$("body").width()-e.offset().left-e.width()<180?e.find(".more_panel").addClass("left"):e.find(".more_panel").removeClass("left"),$("#color_menu").html("").hide(),Object.keys(this.config.colorData).map(function(o){$("#color_menu").append('<li class="po-menu-item" ac="'+o+'"><div class="po-menu-item-box"><span class="text">'+o+"</span></div></li>")}),this.domEvent()},domEvent:function(){var n=this;e.find(".color_change>div").off("mousedown").on("mousedown",function(o){o.stopPropagation(),o.preventDefault();var e=$(this).children(".text-content").text().trim();$("#color_menu").show().find(".po-selected-icon").remove(),$("#color_menu [ac='"+e+"']").menuitem("select")}),$("#color_menu li").off("mousedown").on("mousedown",function(o){o.stopPropagation(),o.preventDefault();var e=$(this).attr("ac").trim();n.renderGroupColor(e,n.config.colorData[e]),$("#color_menu").siblings(".text-content").text(e)}).off("mouseup").on("mouseup",function(){$("#color_menu").hide()}),e.find(".color_transparent").off("click").on("click",function(){o.onSelect&&o.onSelect("transparent"),t.close()}),e.find(".color_group,.color_base,.history_color").off("click.colorPicker").on("click.colorPicker",".color_item",function(){var e=$(this).css("color"),i=$(this).attr("name")||"";$(this).hasClass("transparent")&&o.onSelect?o.onSelect("transparent"):n.selectColor(e,i),t.close()}),e.find(".color_options .color_draw").off("click").on("click",function(){n.colorDraw.init()}),e.find(".color_edit .input_change").off("click").on("click",function(){$(this).parent().css("display","none").siblings().css("display","flex")});var i=!1;e.find(".color_panel,.hue_horizontal,.alpha_horizontal").off("mousedown.colorPicker").on("mousedown.colorPicker",function(o){i=!0;var e=$(this),t=e.offset().left,r=e.offset().top;n.setPickerPin(e,o.pageX-t,o.pageY-r),$("body").off("mousemove.colorPicker").on("mousemove.colorPicker",function(o){o.preventDefault(),o.stopPropagation(),n.setPickerPin(e,o.pageX-t,o.pageY-r)}),$("body").off("mouseup.colorPicker").on("mouseup.colorPicker",function(o){o.preventDefault(),o.stopPropagation(),n.selectColor(n.data.rgba),$("body").off("mousemove.colorPicker"),$("body").off("mouseup.colorPicker"),i=!1})});var r="";e.find(".input_box input").off("focus.colorPicker").on("focus.colorPicker",function(o){$(this).select(),r=$(this).val()}).off("mousedown.colorPicker").on("mousedown.colorPicker",function(o){o.stopPropagation()}),e.find(".input_box input").off("keydown.colorPicker").on("keydown.colorPicker",function(o){o.stopPropagation(),13==o.keyCode&&t.close()}),e.find(".input_box input").off("paste.colorPicker").on("paste.colorPicker",function(o){o.stopPropagation()}),e.find(".input_box input").off("input.colorPicker").on("input.colorPicker",function(o){o.stopPropagation();var e=$(this).attr("class"),t=$(this).val();if("input_hex"==e)(i=t.replace(/[^\da-fA-F]/g,""))!=t&&(t=i,$(this).val(i));else if("input_a"==e){(i=t.replace(/[^\d]/g,""))-100>0&&(i="100"),i+"%"!=t&&(t=i+"%",$(this).val(i))}else{var i;(i=t.replace(/[^\d]/g,""))-255>0&&(i="255"),i!=t&&(t=i,$(this).val(i))}r!=t&&(r=t,n.setColorByInput(e,t),n.selectColor(n.data.rgba))}),null==o.dropdown||o.dropdown?e.off("mouseenter").off("mouseleave"):(e.off("mouseenter").on("mouseenter",function(e){o.target.addClass("selected")}),e.off("mouseleave").on("mouseleave",function(t){$(".po-hover-tip").is(":visible")||(o.target.removeClass("selected"),e.hide())})),e.off("mousedown").on("mousedown",function(e){o.stopPropagation&&(e.preventDefault(),e.stopPropagation()),$("#color_menu").hide()}).off("mouseup").on("mouseup",function(e){o.stopPropagation&&!i&&(e.preventDefault(),e.stopPropagation())})},close:function(){null==o.dropdown||o.dropdown?e.dropdown("close"):(e.hide(),o.target.removeClass("selected"),o.target.parent().dropdown("close")),$(".po-hover-tip").hide()},setHistory:function(o,e){var t=localStorage.getItem("recent_used_color");try{t=JSON.parse(t)||[]}catch(r){t=[]}if(o){var n={color:o,name:e||"",time:(new Date).getTime()};20==(t=t.filter(function(e){return e.color!=o})).length&&t.pop(),t.unshift(n),localStorage.setItem("recent_used_color",JSON.stringify(t))}if(t.length<10){var i=Array(10-t.length).fill({disabled:!0});t=t.concat(i)}this.renderGroupColor("history",t.slice(0,10))},selectColor:function(e,t){if("string"==typeof e&&(e=this.strToRgba(e)),o.onSelect){var n=this.rgbaToStr(e);this.setHistory(n,t),"hex"==o.type?o.onSelect("#"+this.rgbToHex(e)):o.onSelect(e.r+","+e.g+","+e.b)}},renderGroupColor:function(o,t){var n=this;if(o&&t){var i="";t.map(function(o){var e=o.name||"";if(o.disabled)i+='<div class="color_item disabled" style="color: rgba(255,255,255,1);background: rgba(255,255,255,1);border-color: #E9EDF2;"><span></span></div>';else if("transparent"==o.color)i+='<div class="color_item transparent" name="'+e+'" original-title="'+e+'" style="color: transparent;background: rgba(255,255,255,1);border-color: #E9EDF2;"><span></span></div>';else{var t=n.strToRgba(o.color),r=n.rgbaToStr(t),a="#"+n.rgbToHex(t),s=a,l="",c="";1!=t.a&&(s=Math.round(100*t.a)+"% "+s,l="alpha"),e&&(s=o.name+" "+s),-1!=r.indexOf("255,255,255")&&(c="border-color:#E9EDF2;"),i+='<div class="color_item '+l+'" name="'+e+'" original-title="'+s+'" style="color:'+r+";background:"+a+";"+c+'"><span></span></div>'}}),"history"==o?e.find(".history_color").html(i):"colorBase"==o?e.find(".color_base").html(i):e.find(".color_group").html(i)}},setPickerPin:function(o,e,t){var n=this.data.hsb,i=this.data.rgba,r=o.width(),a=o.height();e=Math.max(0,Math.min(e,r)),o.hasClass("hue_horizontal")?(t="50%",n.h=Math.round(360*e/r),this.setPancelColor(n.h)):o.hasClass("alpha_horizontal")?(t="50%",i.a=Math.round(100*(1-e/r))/100):(t=Math.max(0,Math.min(t,a)),n.s=Math.round(100*e/r),n.b=Math.round(100*(a-t)/a)),o.find(".picker_pin").css({left:e,top:t}),this.setShowColor(),this.setPickerColor(),this.setValue(i)},setPancelColor:function(o){var t=this.hsbToRgb({h:o,s:100,b:100});e.find(".color_panel").css("background","rgba("+t.r+","+t.g+","+t.b+",1)")},setShowColor:function(){var o=this.data.hsb,t=this.data.rgba,n=this.hsbToRgb(o);$.extend(t,n),e.find(".color_show_now").css("color",this.rgbaToStr(t))},setPickerColor:function(){var o=this.data.hsb,t=this.data.rgba,n=this.rgbaToStr(this.hsbToRgb(o)),i=this.rgbaToStr(this.hsbToRgb({h:o.h,s:100,b:100})),r=this.rgbaToStr({r:0,g:0,b:0,a:t.a});e.find(".color_panel .picker_pin").css({color:n}),e.find(".hue_horizontal .picker_pin").css({color:i}),e.find(".alpha_horizontal .picker_pin").css({color:r})},setValue:function(o,t){"hex"!=t&&e.find(".input_hex").val(this.rgbToHex(o)),"rgb"!=t&&(e.find(".input_r").val(o.r),e.find(".input_g").val(o.g),e.find(".input_b").val(o.b)),"a"!=t&&e.find(".input_a").val(100*o.a+"%")},setColorByInput:function(o,t){var n=this.data;switch(o){case"input_hex":3==t.length?(t="#"+t[0]+t[0]+t[1]+t[1]+t[2]+t[2],n.hsb=this.hexToHsb(t)):6==t.length&&(n.hsb=this.hexToHsb(t)),o="hex";break;case"input_a":var i=e.find(".input_a").val();n.rgba.a=""==i?1:parseInt(i)/100,o="a";break;default:var r=e.find(".input_r").val(),a=e.find(".input_g").val(),s=e.find(".input_b").val(),l={r:r?parseInt(r):0,g:a?parseInt(a):0,b:s?parseInt(s):0};n.hsb=this.rgbToHsb(l),o="rgb"}this.setPancelColor(n.hsb.h),this.setShowColor(),this.setPickerColor(),this.setValue(n.rgba,o),this.changeViewByHsb()},changeViewByHsb:function(){var o=this.data.hsb,t=this.data.rgba,n=e.find(".color_panel"),i=e.find(".hue_horizontal"),r=e.find(".alpha_horizontal"),a=i.width(),s=n.width(),l=n.height();n.find(".picker_pin").css({left:Math.round(o.s*s/100),top:Math.round((100-o.b)*l/100)}),i.find(".picker_pin").css({left:Math.round(o.h/360*a)}),r.find(".picker_pin").css({left:Math.round((1-t.a)*a)})},colorDraw:{config:{canvasScale:2,viewScale:8},init:function(){var o=this;($(".po-hover-tip").hide(),window.EyeDropper)?(new EyeDropper).open().then(function(o){var n=o.sRGBHex.replace(/[^\da-fA-F]/g,"").toUpperCase();e.find(".input_box .input_hex").val(n),t.setColorByInput("input_hex",n),t.selectColor(t.data.rgba)}).catch(function(o){}):window.html2canvas?o.canvasGetColor():bigPipe.render({js:[staticBasePath+"/assets/js/html2canvas2.js"]},function(){o.canvasGetColor()})},canvasGetColor:function(){var o=this,e=$('<div id="color_picker_screen" class="color_picker_screen_loading"></div>').appendTo("body");$(document).find("svg").each(function(){var o=$(this).attr("width"),e=$(this).attr("height");o&&$(this).attr("old-width",o),e&&$(this).attr("old-height",e);var t=$(this).width(),n=$(this).height();$(this).attr("width",t).attr("height",n)}),html2canvas(document.body,{useCORS:!0,backgroundColor:"transparent",scale:o.config.canvasScale}).then(function(t){$(document).find("svg").each(function(){var o=$(this).attr("old-width"),e=$(this).attr("old-height");o?$(this).attr("width",o).removeAttr("old-width"):$(this).removeAttr("width"),e?$(this).attr("height",e).removeAttr("old-height"):$(this).removeAttr("height")}),e.append('<div class="magnifier"><canvas></canvas></div><div class="magnifier_tip"></div>'),e.append(t),e.removeClass("color_picker_screen_loading"),o.domEvent()})},domEvent:function(){var o=this.config.viewScale,n=this.config.canvasScale,i={r:255,g:255,b:255,a:1},r=$("#color_picker_screen>canvas")[0].getContext("2d"),a=$("#color_picker_screen .magnifier canvas")[0].getContext("2d"),s=$("#color_picker_screen .magnifier").width(),l=n*s/o;$("#color_picker_screen .magnifier canvas").attr("width",l).attr("height",l);var c=e.find(".color_edit .hex").is(":visible"),d=$("#color_picker_screen").width(),p=$("#color_picker_screen").height(),u=$("#color_picker_screen .magnifier_tip").width(),f=$("#color_picker_screen .magnifier_tip").height();$("#color_picker_screen").off("mousemove").on("mousemove",function(o){var e=r.getImageData(n*o.clientX,n*o.clientY,1,1).data;i.r=e[0],i.g=e[1],i.b=e[2];var s=r.getImageData(n*o.clientX-l/2,n*o.clientY-l/2,l,l);a.putImageData(s,0,0),$(this).find(".magnifier").css({left:o.clientX,top:o.clientY}),c?$(this).find(".magnifier_tip").text(t.rgbToHex(i)):$(this).find(".magnifier_tip").text(i.r+" "+i.g+" "+i.b);var g=o.clientX,h=o.clientY+30;g<u/2+5?g=u/2+5:g>d-u/2-5&&(g=d-u/2-5),h>p-f/2-5&&(h=o.clientY-30),$(this).find(".magnifier_tip").css({left:g,top:h})}).off("mousedown").on("mousedown",function(o){if(o.preventDefault(),o.stopPropagation(),1==o.which){var n=t.rgbToHex(i);e.find(".input_box .input_hex").val(n),t.setColorByInput("input_hex",n),t.selectColor(t.data.rgba)}}).off("contextmenu").on("contextmenu",function(o){o.stopPropagation(),o.preventDefault()}).off("mouseup").on("mouseup",function(o){o.preventDefault(),o.stopPropagation(),$(this).remove()}),$(document).off("keyup.colorDraw").on("keyup.colorDraw",function(o){27==o.keyCode&&($("#color_picker_screen").remove(),$(document).off("keyup.colorDraw"))})}},strToRgba:function(o){var e=o.replace(/[^\d,\.]/g,"").split(",");return 3==e.length&&e.push(1),{r:t(e[0],255),g:t(e[1],255),b:t(e[2],255),a:t(e[3],1)};function t(o,e){return Math.max(0,Math.min(o-0,e))}},rgbaToStr:function(o){return null==o.a&&(o.a=1),"rgba("+o.r+","+o.g+","+o.b+","+o.a+")"},hsbToRgb:function(o){var e={},t=Math.round(o.h),n=Math.round(255*o.s/100),i=Math.round(255*o.b/100);if(0==n)e.r=e.g=e.b=i;else{var r=i,a=(255-n)*i/255,s=t%60*(r-a)/60;360==t&&(t=0),t<60?(e.r=r,e.b=a,e.g=a+s):t<120?(e.g=r,e.b=a,e.r=r-s):t<180?(e.g=r,e.r=a,e.b=a+s):t<240?(e.b=r,e.r=a,e.g=r-s):t<300?(e.b=r,e.g=a,e.r=a+s):t<360?(e.r=r,e.g=a,e.b=r-s):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},rgbToHex:function(o){var e=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return e.map(function(o,t){1==o.length&&(e[t]="0"+o)}),e.join("").toUpperCase()},hexToRgb:function(o){return{r:(o=parseInt(o.indexOf("#")>-1?o.substring(1):o,16))>>16,g:(65280&o)>>8,b:255&o}},hexToHsb:function(o){return this.rgbToHsb(this.hexToRgb(o))},rgbToHsb:function(o){var e={h:0,s:0,b:0},t=Math.min(o.r,o.g,o.b),n=Math.max(o.r,o.g,o.b),i=n-t;return e.b=n,e.s=0!=n?255*i/n:0,0!=e.s?o.r==n?e.h=(o.g-o.b)/i:o.g==n?e.h=2+(o.b-o.r)/i:e.h=4+(o.r-o.g)/i:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}};t.init()},$.mask=function(o){if(void 0===o&&(o="open"),"open"==o){if(0===$("#po-dlg-mask").length){var e=$("<div id='po-dlg-mask' class='po-dlg-mask' style='display:none'></div>").appendTo("body");e.css({width:$(window).width()+"px",height:$(window).height()+"px",filter:"alpha(opacity=60)"}).show(),$(window).on("resize.mask",function(){e.css({width:$(window).width()+"px",height:$(window).height()+"px"})})}var t=1;$(".po-dialog").each(function(){if($(this).is(":visible")&&$(this).css("zIndex")){var o=parseInt($(this).css("zIndex"));o&&o>t&&(t=o)}}),$(".po-dlg-mask").css("zIndex",t-1)}else"close"==o&&setTimeout(function(){var o=!0,e=1;$(".po-dialog").each(function(){if($(this).is(":visible")&&$(this).css("zIndex")){o=!1;var t=parseInt($(this).css("zIndex"));t&&t>e&&(e=t)}}),o?($("#po-dlg-mask").remove(),$(window).off("resize.mask")):$(".po-dlg-mask").css("zIndex",e-1)},30)};var dlgIndex=20;$.fn.dialog=function(o){var e=$(this);if("string"==typeof o)"close"==o&&e.find(".po-dialog-close").trigger("click");else{(o=$.extend({fixed:!0,closable:!0,mask:!0},o))||(o={});var t="";o.title&&(t=o.title),dlgIndex++,e.css("z-index",dlgIndex),e.addClass("po-dialog").show();var n=$("<div class='po-dialog-close po-diagraming-icons'>&#xe6b9;</div>").appendTo(e),i=$("<div class='po-dialog-contmask'></div>").appendTo(e);i.css({position:"absolute",display:"none",top:0,left:0,right:0,bottom:0,zIndex:10});var r=e.children(".po-dialog-content");r.length>0&&r.css({top:e.find(".po-dialog-header").outerHeight()||0,bottom:e.find(".po-dialog-footer").outerHeight()||0}),n.bind("click",function(){$(document).off("keyup.confirm"),o.onClose&&o.onClose(),$.mask("close"),e.hide(),e.removeClass("po-dialog").find(".po-dialog-close").remove(),e.css("height",e.attr("dlg-h")),$(window).unbind("resize.dialog"),e.find(".po-dialog-contmask").remove(),dlgIndex--}),o.closable?n.show():n.hide(),""!=t&&e.prepend("<h2 style='position:absolute; z-index:11;' class='po-dialog-header'>"+t+"</h2>"),o.mask&&$.mask();var a=e.outerHeight();$(window).off("resize.dialog").bind("resize.dialog",function(){var t=e.outerWidth(),n=e.outerHeight(),i="scale(1)";o.fixed?(e.css("position","fixed"),$(window).height()<a+40&&(i="scale("+($(window).height()-40)/a+")")):(e.css("position","absolute"),$(window).height()<a+40&&(i="scale("+($(window).height()-40)/a+")"));$(window).width();e.css({top:"50%",left:"50%",marginTop:"-"+n/2+"px",marginLeft:"-"+t/2+"px",transform:"scale(1)"==i?"translate(0, 0)":i})}),$(window).trigger("resize.dialog"),e.find(".po-dialog-header").draggable({target:e,moveCbk:function(){i.show()},moveUpCbk:function(){i.hide()}})}return e},$.fn.draggable=function(o){var e=$.extend({target:"default",clone:!1,undrag:"",scroll:!0,start:function(){},drag:function(){},end:function(){}},o);return $(this).off("mousedown.drag").on("mousedown.drag",function(o){$(document).on("selectstart.drag dragstart",function(){return!1});var t=$(this),n="string"==typeof e.target&&"default"==e.target?t:e.target,i=o.pageX,r=o.pageY,a=n.offset().left,s=n.offset().top;e.clone&&(n=t.clone().removeAttr("id").css("position","absolute").offset({left:a,top:s}),"function"==typeof e.clone&&(e.clone.call(n,o),a=1*n.css("left").replace("px",""),s=1*n.css("top").replace("px","")),e.opacity&&n.css("opacity",e.opacity)),$(document).on("mousemove.drag",function(o){t.hasClass("ondrag")||(t.addClass("ondrag"),e.clone&&n.appendTo(t.parent()),e.start.call(t[0],o));var l=o.pageX-i+a,c=o.pageY-r+s;if(e.bounding){var d=e.bounding.offset().left,p=e.bounding.offset().top;l>d&&c>p&&l<d+e.bounding.outerWidth()-n.outerWidth()&&c<p+e.bounding.outerHeight()-n.outerHeight()&&n.offset({left:l,top:c})}else n.offset({left:l,top:c});e.drag.call(t[0],o),e.moveCbk&&e.moveCbk(l,c)}),$(document).on("mouseup.drag",function(o){e.end.call(t[0],o),e.clone&&n.remove(),$(document).off("selectstart.drag dragstart"),$(document).off("mousemove.drag"),$(document).off("mouseup.drag"),$(".drop-hover").length||t.removeClass("ondrag"),e.moveUpCbk&&e.moveUpCbk(o)}),$(this).on("mouseup.drag",function(o){$(document).trigger("mouseup.drag"),$(this).off("mouseup.drag")})}),e.undrag&&$(this).find(e.undrag).off("mousemove.drag").on("mousemove.drag",function(o){o.stopPropagation()}).on("dragstart",function(){return!1}),this},$.fn.progress=function(o){var e=$(this);if("string"!=typeof o){e.html('<div class="po-zoom-out po-tool-button"> <span class="po-diagraming-icons">&#xe6ed;</span> </div><div class="po-progress"><div class="po-progress-inner"></div><div class="po-progress-cursor"></div></div><div class="po-zoom-in po-tool-button"> <span class="po-diagraming-icons">&#xe6ee;</span> </div><div title-pos="top" title="重置缩放" class="po-progress-text">100%</div>'),e.addClass("po-progress-container");void 0!==(o=$.extend({min:20,max:200,step:2,unit:"%"},o)).min&&e.attr("min",o.min),void 0!==o.max&&e.attr("max",o.max),e.progress("setValue",o.min+o.unit),e.find(".po-zoom-out").on("click",function(t){t.stopPropagation();var n=e.progress("getValue")-o.step;a(e,n,o)}),e.find(".po-zoom-in").off().on("click",function(t){t.stopPropagation();var n=e.progress("getValue")+o.step;a(e,n,o)}),e.find(".po-progress-text").off().on("click resetSize",function(t){t.stopPropagation();a(e,100,o)}),e.find(".po-progress-cursor").off().on("mousedown touchstart",function(t){t.stopPropagation(),"touchstart"==t.type&&(t=t.originalEvent.touches[0]);var n=t.pageX,i=!0,r=($(this).position().left,Math.floor(100/((o.max-o.min)/o.step))),s=e.progress("getValue");e.find(".po-progress").off("mousemove touchmove").on("mousemove touchmove",function(t){if(i){"touchmove"==t.type&&(t=t.originalEvent.touches[0]);var l=t.pageX-n;a(e,Math.round(l/r)*o.step+s,o,!1)}}),$(document).off("mouseup.progress").on("mouseup touchend.progress",function(o){i=!1})}),e.find(".po-progress").off("mousedown").on("mousedown",function(t){var n=t.pageX-$(this).offset().left,i=Math.floor(100/((o.max-o.min)/o.step));a(e,Math.round(n/i)*o.step,o,!1)})}else{if("getValue"==o){var t=e.attr("progress");return t=parseInt(t)}if("setValue"==o){e.attr("progress",arguments[1]);var n=e.attr("min"),i=e.attr("max"),r=parseInt(arguments[1]);e.find(".po-progress-cursor").css("left",100*(r-n)/(i-n)+"%"),e.find(".po-progress-text").html(arguments[1])}}function a(o,e,t,n){if(o.attr("max")){var i=parseInt(o.attr("max"));e>i&&(e=i)}if(o.attr("min")){var r=parseInt(o.attr("min"));e<r&&(e=r)}o.attr("progress")!=e+t.unit&&t.onChange&&t.onChange(e),o.progress("setValue",e+t.unit)}},$.fn.showPanel=function(o){var e=(o=$.extend({target:null,panel:null,position:"bottom",zoom:1},o)).target,t=e.offset(),n=o.panel,i=o.position,r=$(window).width(),a=$(window).height(),s=n.outerWidth(),l=n.outerHeight(),c="undefined"!=typeof mind?mind.operation.zoomVal/100:"undefined"!=typeof Designer?Designer.config.scale:o.zoom;if("top"==i){var d=t.top-l-22;n.addClass("posT")}else{d=t.top+e.outerHeight()*c+21;n.removeClass("posT")}var p=t.left-s/2+e.outerWidth()*c/2;t.top+l+22>a?d=a-l:d<0&&(d=8),p+s>r?p=r-s:p<0&&(p=8),n.show().css({left:p,top:d,opacity:1}),$(document).off("mousedown.dropbox").on("mousedown.dropbox",function(o){setTimeout(function(){n.remove(),$(document).off("mousedown.dropbox")},50)}),n.on("mousedown",function(o){o.stopPropagation()})},$.fn.submitForm=function(opt){var defaultOpt={json:!0},options=$.extend(defaultOpt,opt),form=$(this);if(!options.onSubmit||0!=options.onSubmit.call(form)){options.url&&form.attr("action",options.url);var frameId="submit_frame_"+(new Date).getTime(),frame=$("<iframe id="+frameId+" name="+frameId+"></iframe>").attr("src",window.ActiveXObject?"javascript:false":"about:blank").css({position:"absolute",top:-1e3,left:-1e3});form.attr("target",frameId),frame.appendTo("body"),frame.bind("load",submitCallback),form.append("<input type='hidden' name='submitFormByHiddenFrame' id='submitFormByHiddenFrameParam' value='hiddenFrame'/>"),form[0].submit(),$("#submitFormByHiddenFrameParam").remove();var checkCount=10}function submitCallback(){frame.unbind();var body=$("#"+frameId).contents().find("body"),data=body.html();if(""==data)return--checkCount?void setTimeout(submitCallback,200):void 0;var ta=body.find(">textarea");if(ta.length)data=ta.val();else{var pre=body.find(">pre");pre.length&&(data=pre.html())}try{eval("data="+data),"error"==data.error||options.success&&options.success(data)}catch(e){options.json?options.error&&options.error(data):options.success&&options.success(data)}setTimeout(function(){frame.unbind(),frame.remove()},100)}},$.fn.selectText=function(){var o=document,e=this[0];if(o.body.createTextRange)(t=document.body.createTextRange()).moveToElementText(e),t.select();else if(window.getSelection){var t,n=window.getSelection();(t=document.createRange()).selectNodeContents(e),n.removeAllRanges(),n.addRange(t)}},$.fn.textMoveToEnd=function(){el=this[0],el.focus();var o=document.createRange();o.selectNodeContents(el),o.collapse(!1);var e=window.getSelection();0==e.anchorOffset&&(e.removeAllRanges(),e.addRange(o))},$.fn.datePicker=function(o){var e={selected:null,minimumDate:null,maximumDate:null,dateFormat:null},t=new Array("一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"),n=new Array("一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月");return this.each(function(){if(this.datePicker)return!1;var i=$.extend({},e,o),r=$(this),a=null,s=null,l=null,c={initialize:function(){$(document).keydown(function(o){27==o.keyCode&&c.hide()}).on("click.show",function(){c.hide()}),r.on("click.show",function(o){return c.show(),!1}).keydown(function(o){if(13==o.keyCode)return c.entered(),!1}),a=c.initializeContainer().append(c.buildMonth(new Date)).delegate("td:not(.m):not(:empty)","click",c.clicked).delegate("td:not(:empty)","hover",c.hover).delegate(".prev","click",c.loadPrevious).delegate(".next","click",c.loadNext).delegate(".month","click",c.pickMonth).delegate(".year","click",c.pickYear).click(function(){return!1}).mousedown(function(o){o.stopPropagation(),o.preventDefault()}),c.show();var o=r.offset().top,e=r.offset().left;e+a.width()>$(window).width()&&(e=$(window).width()-a.outerWidth()),o+a.height()>$(window).height()&&(o=$(window).height()-a.outerHeight()),a.css({top:o,left:e})},parseDate:function(o){return new Date(o)},show:function(){a.show()},hide:function(){a.hide()},loadPrevious:function(){a.empty().append(c.buildMonth(new Date(s.getFullYear(),s.getMonth()-1,1)))},loadNext:function(){a.empty().append(c.buildMonth(new Date(s.getFullYear(),s.getMonth()+1,1)))},hover:function(){$(this).toggleClass("hover")},clicked:function(){var o=$(this);if("month"==l)a.empty().append(c.buildMonth(new Date(s.getFullYear(),4*(o.parent().index()-1)+o.index(),1)));else if("year"==l)s=new Date(o.text(),0,1),c.pickMonth();else{a.find("td.selected").removeClass("selected"),o.addClass("selected");var e=new Date(s.getFullYear(),s.getMonth(),o.text()),t=c.format(e);r.val(t).change(),null!=i.selected&&i.selected(t),c.hide()}},entered:function(){var o=c.parseDate(r.val().replace(/^\s*/,"").replace(/\s*$/,""));null!=o&&a.empty().append(c.buildMonth(o)).find("td:not(.m):not(:empty)").eq(o.getDate()-1).click()},initializeContainer:function(){return $("<div>").addClass("calendar").appendTo("body")},pickYear:function(){l="year";var o=document.createElement("table"),e=s.getFullYear()-6;i.minimumDate&&i.minimumDate>e&&(e=i.minimumDate);for(var t=0;t<3;++t)for(var n=o.insertRow(-1),r=0;r<4;++r){n.insertCell(-1).innerHTML=e+4*t+r}a.empty().append(o)},pickMonth:function(){l="month";var o=document.createElement("table"),e=o.insertRow(-1).insertCell(-1);e.colSpan=4,e.className="m year",e.innerHTML=s.getFullYear();for(var t=0;t<3;++t)for(var i=o.insertRow(-1),r=0;r<4;++r){i.insertCell(-1).innerHTML=n[4*t+r]}a.empty().append(o)},buildMonth:function(o){l="day";var e=new Date(o.getFullYear(),o.getMonth(),1),n=new Date(o.getFullYear(),o.getMonth()+1,0);s=e;for(var r=e.getDay(),a=n.getDate(),d=Math.ceil((a+r)/7),p=document.createElement("table"),u=0,f=1;u<d;++u)for(var g=p.insertRow(-1),h=0;h<7;++h,++f){var m=g.insertCell(-1);f>r&&f<=a+r&&(m.innerHTML=f-r)}var b=p.insertRow(0);c.addHeaderCell(b,'<div class="prev">&laquo;</div>',1),c.addHeaderCell(b,'<div class="month">'+t[o.getMonth()]+" "+o.getFullYear()+"</div>",5),c.addHeaderCell(b,'<div class="next">&raquo;</div>',1);var v=$(p);return i.minimumDate&&i.minimumDate>=e&&v.find(".prev").hide(),i.maximumDate&&i.maximumDate<=n&&v.find(".next").hide(),v},addHeaderCell:function(o,e,t){var n=o.insertCell(-1);n.innerHTML=e,n.className="m ",n.colSpan=t},format:function(o){if(null!=i.dateFormat){var e={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()},n="";for(var r in/(y+)/.test(i.dateFormat)&&(n=i.dateFormat.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+r+")").test(i.dateFormat)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?e[r]:("00"+e[r]).substr((""+e[r]).length)));return n}return t[o.getMonth()]+" "+o.getDate()+" "+o.getFullYear()}};this.datePicker=c,c.initialize()})},$.fn.showCorner=function(o){var e=$(this);if("string"!=typeof o){var t=o.type,n=o.pos;e.children("[tit="+t+"]").show().siblings("div").hide(),e.addClass("active"),e.children(".close").off().on("click",function(e){$(".mind-corner."+n).removeClass("active"),"right"==n&&$(".po-navigation").css("width","100%"),o.onClose&&o.onClose instanceof Function&&o.onClose(t)})}else"close"==o&&e.removeClass("active")},$.fn.multiInput=function(o,e,t){var n=$(this);function i(o,e){var t,i,r=n.find(".user-list"),a="&#xe63e;";if(e instanceof Array)for(var s=0;s<e.length;s++){if(t=e[s].isEmail(),i=/^[1][3,4,5,7,8][0-9]{9}$/.test(e[s]),t)a="&#xe72b;",o=e;else if(i)a="&#xe72a;",o=e;else if(!t&&!i)return;var l='<div class="user-item"><span  class="po-icon po-diagraming-icons">'+a+"</span>"+e[s]+'<span class="close po-diagraming-icons">&#xe6b9;</span></div>';r.append(l)}else{if(null==o)return;l='<div class="user-item"><span  class="po-icon po-diagraming-icons">'+a+"</span>"+e[s]+'<span class="close po-diagraming-icons">&#xe6b9;</span></div>';r.append(l)}}"string"!=typeof o||"setVal"!=o?(o=$.extend({text:"请在此输入对方ProcessOn账号邮箱或手机号，回车添加",autoComplete:!1,url:"",params:{}},o),n.find("input").off("keyup").on("keyup",function(e){var t=$.trim($(this).val());if(""!=t)if(13==e.keyCode&&o.setVal){var n,r;t=t.split(/[,， ]+/);for(var a=0;a<t.length;a++)if(n=t[a].isEmail(),r=/^[1][3,4,5,7,8,9][0-9]{9}$/.test(t[a]),!n&&!r)return void $.toast({type:"error",text:"手机号或邮箱输入格式有误，请重新输入",target:$("#po-share-dlg")});t=t.filter(function(o,e,t){return t.indexOf(o,0)===e}),i(null,o.setVal(t)),$(this).val("")}else o.autoComplete&&(o.params=$.extend(o.params,{value:t}),$.ajax({url:o.url,cache:!1,data:o.params,success:function(e){var t=o.autoCompleteCallback(e);if($(".popWindow").remove(),""!=t){var n=$("<div class='popWindow'></div>").appendTo("body");n.html(t),n.popWindow({target:"#multi-input"})}}}))}),$(document).on("click",".user-list .close",function(){var e=$(this),t=e.prev().text();null!=t&&o.deleteVal&&(e.parent().remove(),o.deleteVal(t))})):i(e,t)},$.fn.suggest=function(o){var e=$(this),t={valueField:"value",offsetX:0,offsetY:0,width:e.outerWidth(),format:function(o){return o.text}},n=$.extend(t,o),i=$(".suggest-menu");i.length<1&&(i=$("<ul class='suggest-menu'></ul>").appendTo("body")),i.width(n.width);var r=-1,a="",s="";e.off("keydown.suggest").on("keydown.suggest",function(o){if(40==o.keyCode)o.preventDefault(),r<i.children().length-1&&(r++,i.find(".active").removeClass("active"),i.find("li[index="+r+"]").addClass("active"));else if(38==o.keyCode)o.preventDefault(),i.find(".active").removeClass("active"),r>=0&&(r--,i.find("li[index="+r+"]").addClass("active"));else if(13==o.keyCode){var t=i.find(".active");t.length&&e.val(t.attr("val")),n.onEnter&&n.onEnter(e),i.hide(),s=""}}).off("keyup.suggest").on("keyup.suggest",function(o){""==(s=e.val())?i.hide():s!=a&&(r=-1,$.get(n.url,{q:s},function(o){i.empty();var t=o.items;if(0==t.length)i.hide(),s="";else{for(var r=0;r<t.length;r++){var l=t[r],c="<li index='"+r+"' class='suggest-item' val='"+l[n.valueField]+"'>";c+=n.format(l),c+="</li>",i.append(c)}i.show(),i.attr("tabindex",0);var d=0;(d="center"==n.position?e.offset().left+e.outerWidth()/2-i.outerWidth()/2:"right"==n.position?e.offset().left+e.outerWidth()-i.outerWidth():e.offset().left)+i.outerWidth()>$(window).width()&&(d=$(window).width()-i.outerWidth());var p=e.offset().top+e.outerHeight();n.autoPosition&&p+n.offsetY+i.outerHeight()>$(window).height()+$(document).scrollTop()?i.css({top:$(window).height()-i.outerHeight()+$(document).scrollTop(),left:d+n.offsetX}):i.css({top:p+n.offsetY,left:d+n.offsetX}),i.find(".suggest-item").off("mousedown").on("mousedown",function(o){o.preventDefault(),e.val($(this).attr("val")),n.onEnter&&n.onEnter(e),i.hide(),a=s=""})}})),a=s}).off("blur.suggest").on("blur.suggest",function(o){i.hide(),a=""})},$.warnTip=function(o,e){var t=$(".warn-tip");if((e||o.data)&&(t=$(".warn-tip[data-info="+(e||o.data)+"]")),"string"!=typeof o){var n={content:"",tipIcon:!1,pos:"top",closable:!0,delay:null,onClose:null,callback:null};$.extend(n,o),t.length>0&&t.remove();var i="";if(n.tipIcon){var r="&#xe996;";"string"==typeof n.tipIcon&&n.tipIcon.indexOf("&#")>-1&&(r=n.tipIcon),i="<span class='warn-icon po-diagraming-icons'>"+r+"</span>"}var a="";if(n.data&&(a="data-info="+n.data),0==(t=$("<div class='warn-tip' "+a+">"+i+"<div class='mind-tip-text'>"+n.content+"</div><div class='mind-tip-close icons'>&#xe622;</div></div>").appendTo("body")).find(".mind-tip-close").length)$("<span class='mind-dlog-close po-diagraming-icons'>&#xe623;</span>").appendTo(dialogTitle);!1===n.closable?(t.find(".mind-tip-close").css("display","none"),n.delay&&("undefined"!=typeof clearWarnTipTimer&&clearTimeout(clearWarnTipTimer),clearWarnTipTimer=setTimeout(function(){t.remove()},n.delay))):t.find(".mind-tip-close").css("display","block"),t.children(".mind-tip-close").off("click").on("click",function(){t.remove(),n.onClose&&n.onClose instanceof Function&&n.onClose()}),setTimeout(function(){t.css({top:"120px",bottom:"auto"})}),n.callback&&n.callback instanceof Function&&n.callback()}else"close"==o&&t.length>0&&t.find(".mind-tip-close").trigger("click")},$.fn.bottomPopup=function(o){var e=$(this);if("string"!=typeof o||"close"!=o){o=$.extend({height:"auto"},o),e.addClass("po-bottom-popup").css("bottom","0px");var t=$("#po-bottom-popup-mark");t.remove(),(t=$("<div id='po-bottom-popup-mark' class='po-bottom-popup-mark'></div>").appendTo("body")).off("click").on("click",function(o){e.bottomPopup("close")})}else{$("#po-bottom-popup-mark").remove();var n=e.outerHeight();e.css({bottom:-n+"px"})}}}($),window.Util={getUrlParams:function(o){var e=new RegExp("(^|&)"+o+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(e);return null!=t?unescape(t[2]):null},saveTokenToLocal:function(o){var e=JSON.stringify(o);localStorage.setItem("user",e)},getTokenFromLocal:function(){return JSON.parse(localStorage.getItem("user"))},getCookies:function(o){if(document.cookie.length>0){var e=document.cookie.indexOf(o+"=");if(-1!=e){e=e+o.length+1;var t=document.cookie.indexOf(";",e);return-1==t&&(t=document.cookie.length),unescape(document.cookie.substring(e,t))}}return""},setCookies:function(o,e,t){var n=new Date;n.setDate(n.getDate()+t),document.cookie=o+"="+escape(e)+(null==t?"":";path=/;expires="+n.toGMTString())},ajax:function(o){var e=Util.getUrlParams("token")||Util.getCookies("token");if(o.noToken||e){if(!o.onSend||0!=o.onSend()){var t=""==location.port?"":"/v5api";o.isExport&&(t=""==location.port?"":"/v5api_export"),o.isTemp&&(t=""==location.port?"http://v3.processon.com":"/v5api_temp");var n={type:"POST",headers:{token:e},contentType:"application/x-www-form-urlencoded",processData:!0};return(o=$.extend(n,o)).headers.token||delete o.headers.token,$.ajax({url:t+o.url,type:o.type,traditional:!0,headers:o.headers,data:o.data,contentType:o.contentType,processData:o.processData,success:function(e){if(o.isErr)return o.success&&o.success(e);var t=errorFn[e.error];if("function"==typeof t)return t(o);var n=codeFn[e.code];if("function"==typeof n)return n(o,e);"success"==e.result||1==o.isTemp?o.success&&o.success(e):o.error&&o.error(e)},error:function(e){o.error&&o.error(e)}})}}else injectExtraAsynCall("onnotoken",{code:null},function(){Util.loginWindow()})},filterXss:function(o){return null==o||""==o?"":o=(o=(o=(o=(o=(o=(o=o.toString()).replace(/</g,"&lt;")).replace(/%3C/g,"&lt;")).replace(/>/g,"&gt;")).replace(/%3E/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")},restoreXss:function(o){return null==o||""==o?"":o=(o=(o=(o=(o=(o=o.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&#39;/g,"'")).replace(/&quot;/g,'"')).replace(/&amp;lt;/g,"<")).replace(/&amp;gt;/g,">")},getHexColor:function(o){var e={};if("transparent"!=o){var t=o.replace(/[^\d,\.]/g,"");function n(o){return("0"+parseInt(o).toString(16)).slice(-2)}return e.rgb=t,o=n((o=o.replace(/[^\d,\.]/g,"").split(","))[0])+n(o[1])+n(o[2]),e.hex=o,e}return null},getRgbFromHex:function(o){if(o.indexOf("rgb")>=0)return o;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},isMac:function(){return/macintosh|mac os x/i.test(navigator.userAgent)},splitDate:function(o){if(""!=o){var e="",t=o.split(" ");if(t[0].indexOf("-")>=0){var n=t[0].split("-");e=(new Date).getFullYear()==n[0]?n[1]+"-"+n[2]:n}if(t[1].indexOf(":")>=0)e+=" "+(n=t[1].split(":"))[0]+":"+n[1];return e}},showUploading:function(){var o=$("<div class='mind-upload-tip'><span class='mind-icons rotate1'>&#xe65b;</span> <span>正在上传中......</span></div>");o.appendTo("body"),o.css({top:60}).show()},hideUploading:function(){$(".mind-upload-tip").remove()},inputTimer:null,doInput:function(o){clearTimeout(this.inputTimer),this.inputTimer=setTimeout(function(){o()},500)},isUrl:function(o){return!!new RegExp("^(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?$","i").test(o)},comData:{loadJs:[]},loadJs:function(o,e){var t=0,n=o.length,i=this.comData;function r(){t>=n&&"function"==typeof e&&e()}!function(o){o.forEach(function(o){i.loadJs[o]?(t++,r()):function(o,e){o=o+="?v="+(new Date).getTime();var t=document.createElement("script"),n=e||function(){};t.type="text/javascript",t.readyState?t.onreadystatechange=function(){"loaded"!=t.readyState&&"complete"!=t.readyState||(t.onreadystatechange=null,n())}:t.onload=function(){n()};t.src=o,document.getElementsByTagName("head")[0].appendChild(t)}(o,function(){i.loadJs[o]=!0,t++,r()})})}(o)},getImgsizeByUrl:function(o,e){var t=new Image;t.src=o,t.onload=function(){e(t)}},localChange:function(o){var e=$.extend({tmp:Math.random()},o);localStorage.setItem("po_local_change_edit",JSON.stringify(e))},getCharLength:function(o){if("string"==typeof o){for(var e=0,t=0;t<o.length;t++)o.charCodeAt(t)<0||o.charCodeAt(t)>255?e+=2:e+=1;return e}return 0},confirm:function(o){var e=$("#global_confirm_window"),t=" ",n=o.okval||"确定",i=o.title||"请确认",r=o.cancelval||"取消";o.tokenClass&&(t=o.tokenClass),e.length?(e.find(".dialog-title").html(i),e.find(".dlg-content").html(o.content),e.find(".close").html(r),e.find(".okbtn").html(n)):e=$("<div id='global_confirm_window' tabindex='-1' class='dialog-box confirm-box "+t+"' > <h2 class='dialog-title'>"+i+"</h2><div class='dlg-content'>"+o.content+"</div><div class='dlg-buttons'><span class='pro-btn basic cancelbtn close' style='margin-right:16px'>"+r+"</span><span class='pro-btn default okbtn'>"+n+"</span></div></div>").appendTo("body"),""==o.cancelval?e.find(".close").hide():e.find(".close").show(),o.width&&e.css("width",o.width),o.height&&e.css("height",o.height),o.hiddenOK?e.find(".okbtn").css("visibility","hidden"):e.find(".okbtn").css("visibility","visible"),o.hiddenCancel?e.find(".cancelbtn").css("display","none"):e.find(".cancelbtn").css("visibility","inline-block"),e.dialog(),$(document).off("keyup.confirm").on("keyup.confirm",function(o){13==o.keyCode&&e.find(".okbtn").trigger("click")}),e.find(".okbtn").off().on("click",function(){e.dialog("close"),o.onConfirm&&o.onConfirm(),$(document).off("keyup.confirm")}),e.find(".cancelbtn").off("click.cancel").on("click.cancel",function(){o.onCancel&&o.onCancel(),e.dialog("close"),$(document).off("keyup.confirm")})},loginWindow:function(o,e,t){var n=navigator.userAgent;if(n.indexOf("MSIE ")>-1||n.indexOf("Trident/")>-1||n.indexOf("Edg/")>-1)"/"==window.location.pathname?window.location.href="/login":window.location.href="/login?redirect="+encodeURIComponent(window.location.href);else if(void 0===o&&(o="open"),"open"==o){$("#loginWindow").length&&$("#loginWindow").remove();var i=$("<div id='loginWindow' style='width:448px;height:560px;padding:0;border-radius: 8px;overflow: hidden;box-sizing: border-box' class='loginWindow' ><img src='"+staticBasePath+"/assets/images/login/loading.gif' style='width:40%;margin:230px auto;display: block'/></div>").appendTo("body");i.append("<iframe id='loginWindow-content' class='loginWindow-content' src='/login_window' style='display:none;width:100%;height:100%;border:0'></iframe>"),$("#loginWindow-content").off().on("load",function(){var o=$(this);$("#loginWindow img").remove(),o.show(),"function"==typeof e&&(window.loginCallback=e),i.dialog({closable:!0,onClose:function(){"function"==typeof e&&t&&e(t),(o.contents().find("#login-form-registerok").is(":visible")||o.contents().find("#login-form-registerteam").is(":visible"))&&location.reload()}}),i.css("zIndex","99999"),$("#po-dlg-mask").css("zIndex","99998")}),i.find(".po-dialog-close").click(function(){i.dialog("close")})}else"close"==o&&$("#loginWindow").dialog("close")}},window.bigPipe={jsVersion:_config.buildTimestamp,cssVersion:_config.buildTimestamp,count:0,jsCounter:0,render:function(o,e){var t=new Object;return(t=Object.assign(t,bigPipe)).renderCore(o,e),t},renderCore:function(o,e){for(var t=document.getElementsByTagName("script"),n=document.getElementsByTagName("link"),i=0;i<t.length;i++){if((r=t[i].getAttribute("src"))&&r.indexOf("/assets/js/")>=0){if(r.indexOf("-")<0)break;r.substring(r.indexOf("-"),r.indexOf(".js"));break}}for(i=0;i<n.length;i++){var r;if((r=n[i].getAttribute("href"))&&r.indexOf("/assets/css/")>=0){if(r.indexOf("-")<0)break;r.substring(r.indexOf("-"),r.indexOf(".css"));break}}var a=o.css||[],s=o.js||[];this.jsCounter=s.length,this.count=0;for(i=0;i<a.length;i++){var l=a[i];this.renderCss(l)}i=0;for(var c=s.length;i<c;i++){var d=s[i];this.renderJs(d,e)}},renderCss:function(o){var e=document,t=(this.cssVersion,e.createElement("link"));t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),o.indexOf("http"),o+=o.indexOf("?")>-1?"&v="+this.jsVersion:"?v="+this.jsVersion,t.setAttribute("href",o);var n=e.getElementsByTagName("head");n.length?n[0].appendChild(t):e.documentElement.appendChild(t)},renderJs:function(o,e){var t=document,n=(this.jsVersion,this),i=t.createElement("script");o.indexOf("http"),i.setAttribute("type","text/javascript"),o+=o.indexOf("?")>-1?"&v="+n.jsVersion:"?v="+n.jsVersion,i.setAttribute("src",o),i.setAttribute("charset","UTF-8"),t.body.appendChild(i),i.onload=function(){n.count++,n.handle(e)}},handle:function(o){this.count==this.jsCounter&&(null!=o&&o(),this.count=0,this.jsCounter=0)},init:function(){var o=!1;$(document).off("mousemove.ck").on("mousemove.ck",function(){o||($.get("/popular/init"),o=!0)})}},String.prototype.isEmpty=function(){return this.replace(/(^\s*)|(\s*$)/g,"").length<=0},String.prototype.notEmpty=function(){return!this.isEmpty()},String.prototype.isEmail=function(){return!this.isEmpty()&&!!/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(this)},String.prototype.isPhoneNumber=function(){return!(this.isEmpty()||!/^0{0,1}(13[0-9]|15[7-9]|153|156|18[7-9])[0-9]{8}$/.test(this))},String.prototype.minLength=function(o){return this.length>=o},String.prototype.maxLength=function(o){return this.length<=o},String.prototype.cut=function(o,e){var t="";if(""==this)return t;void 0===e&&(e="...");for(var n=0,i=0;i<this.length;i++)this.charCodeAt(i)>127||94==this.charCodeAt(i)?n+=2:n++;if(n<=o)return this.toString();n=0,o=o>e.length?o-e.length:o;for(i=0;i<this.length;i++){if(this.charCodeAt(i)>127||94==this.charCodeAt(i)?n+=2:n++,n>o){t+=e;break}t+=this.charAt(i)}return t},String.prototype.byteLength=function(){for(var o=0,e=0;e<this.length;e++)this.charCodeAt(e)>127||94==this.charCodeAt(e)?o+=2:o++;return o},Array.prototype.flat||(Array.prototype.flat=function(){return function o(e,t){for(var n=[],i=0;i<e.length;i++)Array.isArray(e[i])&&t>0?n.push.apply(n,_toConsumableArray(o(e[i],t-1))):void 0!==e[i]&&n.push(e[i]);return n}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}),String.prototype.replaceCanvasFont=function(o){try{return"undefined"!=typeof deviceType&&"wpsclient_mac"==deviceType&&/12\.\d+\.\d+/g.test(systemVersion)?"svg"==o?this.replace(/(font-family=".*?")|(font-family:.*?;)/gi,function(o){return o.replace(/微软雅黑/g,"苹方-简").replace(/宋体/g,"宋体-简").replace(/黑体/g,"黑体-简").replace(/楷体/g,"楷体-简")}):this.replace(/微软雅黑/g,"苹方-简").replace(/宋体/g,"宋体-简").replace(/黑体/g,"黑体-简").replace(/楷体/g,"楷体-简"):this.valueOf()}catch(e){return this.valueOf()}},function(o){window.addEventListener("storage",function(o){if("po_local_change_filelist"===o.key){var e=o.newValue;"paysuccess"==(e=JSON.parse(e)).type?memberObj?memberObj.member=!0:mindUI.member=!0:window.location.reload()}});var e="v5",t="postMessage"in window;function n(o,e){var t="";if(arguments.length<2?t="target error - target and name are both required":"object"!=_typeof(o)?t="target error - target itself must be window object":"string"!=typeof e&&(t="target error - target name must be string type"),t)throw new Error(t);this.target=o,this.name=e}function i(o,t,n,i){this.targets={},this.name=o,this.listenFunc=[],this.version="1.0.1",e=t||e;for(var r=0,a=n.length;r<a;r++)this.addTarget(n[r].target,n[r].targetName);this.initListen(),"function"==typeof i&&this.listen(i)}n.prototype.send=t?function(o){this.target.postMessage(e+o,"*")}:function(o){var t=window.navigator[e+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(e+o,window)},i.prototype.addTarget=function(o,e){var t=new n(o,e);this.targets[e]=t},i.prototype.initListen=function(){var o=this,n=function(t){if("object"==_typeof(t)&&t.data&&(t=t.data),!t||"object"==_typeof(t)||"v5"!==t.substr(0,2))return!1;e||(e="lenovo-messenger"),t=t.slice(e.length);for(var n=0;n<o.listenFunc.length;n++)o.listenFunc[n](t)};t?"addEventListener"in document?window.addEventListener("message",n,!1):"attachEvent"in document&&window.attachEvent("onmessage",n):window.navigator[e+this.name]=n},i.prototype.listen=function(o){this.listenFunc.push(o)},i.prototype.clear=function(){this.listenFunc=[]},i.prototype.send=function(o){var e,t=this.targets;for(e in t)t.hasOwnProperty(e)&&t[e].send(o)},o.Messenger=i}(window),$("img").on("error",function(){}),window.requestAnimationFrame=window.requestAnimationFrame||function(o){return window.setTimeout(o,16.7)},window.cancelAnimationFrame=window.cancelAnimationFrame||function(o){return clearTimeout(o)};
},{"./po/codeCallback":"n4Rr","../../v5_editor/static/config.json":"t80i","../common/jquery-1.10.2":"gPHy","./buried_point":"M55k","process":"rH1J"}],"CYlw":[function(require,module,exports) {
module.exports=function(e){return{getDef:"/diagraming/chart/def",autoSaveVersion:"/hst/ver/auto/add",saveVersion:"/hst/ver/manual/add",getHistorys:"/hst/ver/list",getHistory:"/version/get/history/definition",removeHistory:"/version/delete/history/canvas",revertHistory:"/version/update/history/canvas",addWaterMark:"/diagraming/add_watermark",getWaterMark:"/diagraming/watermarks",delWaterMark:"/diagraming/del/watermark",getPoYunVersion:"/chart/get/canvas/def/version",getAIUseInfo:"/aigc/get/use/power",userImgs:"/user/image/list",removeImg:"/user/image/remove",processCorsImage:"/user/image/cors/image",uploadImageForm:"/user/image/upload",uploadImage64:"/user/image/upload/base64",uploadAtta:"/diagraming/upload/atta",uploadSVGForm:"/user_image/upload_svg",getYunVersion:"/diagrams/version",exportSvg:"/mindmap/pre_export_svg",exportImage:"/mindmap/pre_export_image",export:"/mindmap/pre_export",saveKs3:"/oss/save_ks3",templatesInsert:"/templates/editor/insert/",userConfig:"/user/config",getUserPrivilege:"/user/get_user_privilege",newFunction:"/newFunction/getByCategory",privilege:"/user/privilege",favourite:"/view/favourite_chart",createFile:"/diagraming/create",logOut:"/login/out",payPreOrder:"/order/wechat/pre_order",payWechat:"/order/wechat/pay",payQuery:"/order/wechat/query",suggestTemp:"/search/suggest",historyFiles:"/folder/history_files"}};
},{}],"Zy4b":[function(require,module,exports) {
var e=require("./api.config.com");module.exports=function(a){return Object.assign(e(),{setConfig:"/diagraming/config",setBasicConfig:"/user/save/flow/config",addMyshapes:"/diagraming/shapes/add",getMyshapes:"/diagraming/shapes/page",updateTitle:"/diagraming/shapes/update/title",removeShape:"/diagraming/shapes/remove",updateSort:"/diagraming/shapes/update/sort",schema:"/diagraming/schema",sendMsg:"/diagraming/canvas/msg",saveOnline:"/diagraming/canvas/saveonline",getPages:"/canvas/get/chartdefids",getDefById:"/diagraming/get/chart/def",addPage:"/canvas/create",deletePage:"/canvas/delete/defid",copyPage:"/canvas/copy",sortPage:"/canvas/sort",renamePage:"/canvas/update/title",setMainPage:"/canvas/update/maincanvas",componentList:"/chart/component/item/list",componentSave:"/chart/component/save",componentGet:"/chart/component/get",componentRemove:"/chart/component/remove",componentCopy:"/chart/component/copy",componentMove:"/chart/component/move",componentListSave:"/chart/component/item/save",componentListRemove:"/chart/component/item/remove",componentShapes:"/chart/component/list",doSend:"/diagraming/ks3/msg"})};
},{"./api.config.com":"CYlw"}],"E9eL":[function(require,module,exports) {
var n=require("./api.config.com");module.exports=function(e){return Object.assign(n(),{sendMsg:"/outline/msg",setConfig:"/outline/config",saveOnline:"/mindmap/saveonline",doSend:"/outline/ks3/msg",getConfig:"/outline/config",send:"/outline/msg"})};
},{"./api.config.com":"CYlw"}],"Naud":[function(require,module,exports) {
var e=require("./api.config.com");module.exports=function(m){return Object.assign(e(),{updateDef:"/mindmap/updatedef",setConfig:"/mindmap/config",getTheme:"/mindmap/gettheme",getCustomTheme:"/mindmap/getthemes",saveCustomTheme:"/mindmap/savetheme",delTheme:"/mindmap/deletetheme",themeImage:"/mindmap/theme/image",saveMindMyTags:"/mindmap/add/tag",saveSliders:"/mindmap/savesliders",getSliders:"/mindmap/getsliders",sendMsg:"/mindmap/msg",saveOnline:"/mindmap/saveonline",officialTags:"/templates/official_tags",autoLineColor:"/mindmap/autoLineColor",getConfig:"/user/get_config",doSend:"/mindmap/ks3/msg"})};
},{"./api.config.com":"CYlw"}],"lyWj":[function(require,module,exports) {
"use strict";function e(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){t(r,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function t(e,r,t){return(r=u(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function f(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var r=a(e,"string");return"symbol"===n(r)?r:String(r)}function a(e,r){if("object"!==n(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,r||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.apiConfig=void 0;var c=exports.apiConfig=function(){function e(){o(this,e)}return f(e,[{key:"get",value:function(e,t,o){var i={};if("flow"==e||"designer"==e){var f=require("./api.config.flow");i=Object.assign(f(),i)}else if("outline"==e){var u=require("./api.config.outline");i=Object.assign(u(),i)}else{var a=require("./api.config.mind");i=Object.assign(a(),i)}var c={};for(var l in i)c[l]=t+o+i[l];if("undefined"!=typeof editorGlobalConfig&&"object"==n(editorGlobalConfig.ajaxConfig)){var b={},p=editorGlobalConfig.ajaxConfig;for(var s in p)b[s]=p[s].url;c=r(r({},c),b)}return c}}]),e}();
},{"./api.config.flow":"Zy4b","./api.config.outline":"E9eL","./api.config.mind":"Naud"}],"km7h":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=a(e,"string");return"symbol"===t(r)?r:String(r)}function a(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AjaxDataCorrect=void 0;var i=exports.AjaxDataCorrect=function(){function r(o){e(this,r),this.opts=o;if("undefined"!=typeof editorGlobalConfig&&"object"==t(editorGlobalConfig.ajaxConfig)){var n=editorGlobalConfig.ajaxConfig;for(var a in n)n[a].params&&(this[a]={params:n[a].params||{}})}}return o(r,[{key:"request",value:function(t,e){var r=editorGlobalConfig&&editorGlobalConfig.globalAjaxParams||{},o=this[e],n=Object.assign({},r,{},o&&o.params);if(t.contentType)if("application/json"==t.contentType){t.data||(t.data=JSON.stringify({}));var a=JSON.parse(t.data);a=Object.assign({},a,n),t.data=JSON.stringify(a)}else t.data=Object.assign({},t.data,n);else for(var i in n)t.data.append(i,n[i]);return t}},{key:"response",value:function(t,e){return t}}]),r}();
},{}],"iZIP":[function(require,module,exports) {
"use strict";var e=require("../../server_config/api.config"),r=require("./ajax_data_correct"),n=require("./codeCallback"),o=n.codeFn,t=n.errorFn,a=injectExtraAsynCall("prePathApi")||"/api/personal",i=window.fileType,s=window.domain;window.poApi=(new e.apiConfig).get(i,s,a);var c=new r.AjaxDataCorrect;window.poAjax=function(e,r){var n=Util.getUrlParams("token")||Util.getCookies("token");if(e.noToken||n){if(!e.onSend||0!=e.onSend()){var a={type:"POST",headers:{token:n},contentType:e.contentType?e.contentType:"application/x-www-form-urlencoded",processData:!0};e=$.extend(a,e);var i=(e=c.request(e,r)).url||r&&poApi[r];return e.isExport&&(i=i.replace("/v5api/","/v5api_export/")),e.isTemp&&(i=i.replace("/v5api/","//v5api_temp/")),e.headers&&!e.headers.token&&delete e.headers.token,$.ajax({url:i,type:e.type,traditional:!0,data:e.data,headers:e.headers,contentType:e.contentType,processData:e.processData,success:function(r){if(e.isErr)return e.success&&e.success(r);var n=t[r.error];if("function"==typeof n)return n(e);var a=o[r.code];if("function"==typeof a)return a(e,r);"success"==r.result?e.success&&e.success(r):e.error&&e.error(r)},error:function(r){e.error&&e.error(r)}})}}else injectExtraAsynCall("onnotoken",{code:null},function(){Util.loginWindow()})};
},{"./codeCallback":"n4Rr","../../server_config/api.config":"lyWj","./ajax_data_correct":"km7h"}],"Mibj":[function(require,module,exports) {
"use strict";var e=require("../mindmap/js/mind.handle.events");window.PoEditorApi=function(){this.fileType=window.fileType},PoEditorApi.prototype.exportFile=function(e,i){if("flow"!=this.fileType&&"designer"!=this.fileType||ExportImage(e,function(t){"svg"==e&&(t=t.content),i(t)}),"mind"==this.fileType){if(device&&device.indexOf("mobi")>-1)return void exportFileFn.init(e,function(e){i(e)});exportFileFn.init(e,null,null,function(e){i(e)})}if("outline"==this.fileType)if("undefined"==typeof outlineExport){var t={js:[staticBasePath+"/assets/js/files/outline_export.js",staticBasePath+"/assets/js/files/html2canvas2.js"]};bigPipe.render(t,function(){outlineExport.init(e,null,function(e){i(e)})})}else outlineExport.init(e,null,function(e){i(e)})},PoEditorApi.prototype.setZoomScale=function(e,i){if("flow"!=this.fileType&&"designer"!=this.fileType)if("mind"!=this.fileType)this.fileType;else{var t=$(".mind-designer");mind.operation.setZoom.call(mind,t,100*e)}else Designer.setZoomScale(e)},PoEditorApi.prototype.setNavigatorStatus=function(e,i){if("flow"!=this.fileType&&"designer"!=this.fileType)if("mind"!=this.fileType)this.fileType;else{$(".mind-designer");e?mind.plugins.navigator.showCanvas():mind.plugins.navigator.hideCanvas()}else Navigator.open(e)},PoEditorApi.prototype.openTeamShapes=function(e,i){if("flow"==this.fileType||"designer"==this.fileType)return $("#panel-tab .item[ac=team-shapes]").show(),void window.TeamShape.init(e,i)},PoEditorApi.prototype.openPage=function(e){"flow"!=this.fileType&&"designer"!=this.fileType||(Utils.unselect(),MessageSource.redoStack.stack=[],MessageSource.undoStack.stack=[],Designer.events.push("undoStackChanged",0),Designer.events.push("redoStackChanged",0),Designer.open(e.def,e.pageId),Designer.initialize.initPage("select")),this.fileType,this.fileType},PoEditorApi.prototype.footToolBar=function(i){"flow"!==fileType&&"designer"!==fileType&&("mind"===fileType&&e.handleEvent.invokingfn("poNavigator",mind,i),fileType)},PoEditorApi.prototype.modifyTitle=function(e){("flow"!==fileType&&"designer"!==fileType||($("#header-rename").html(e),UI.rename(e)),"mind"===fileType)&&($("#header-title").text(e),headerUI.saveTitle(e));"outline"===fileType&&($("#header-title").text(e),headerUI.saveTitle(e))},PoEditorApi.prototype.fullScreen=function(e){"flow"!==fileType&&"designer"!==fileType||(e?Navigator.enterFullScreen():Navigator.exitFullScreen()),"mind"===fileType&&(e?mind.plugins.navigator.enterFullScreen():mind.plugins.navigator.exitFullScreen()),fileType},window.PoEditorClient=new PoEditorApi("body",{config:{},data:{},on:{msg:function(e){},openPage:function(e){PoEditorClient.openPage(e)}}}),PoEditorApi.prototype.getDirtyStatus=function(){},PoEditorApi.prototype.clickSaveAll=function(){sendMessage.saveOnline("click")},window.PoEditorClient=new PoEditorApi;
},{"../mindmap/js/mind.handle.events":"PEFJ"}],"d8RM":[function(require,module,exports) {
require("../common"),require("./server"),require("../po_editor_api");
},{"../common":"Sa63","./server":"iZIP","../po_editor_api":"Mibj"}],"Wcrk":[function(require,module,exports) {
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=window.$,Schema={config:{markerSize:14},myShapes:[],pageDefaults:{backgroundColor:"transparent",width:1050,height:1e3,padding:20,showGrid:!0,gridSize:15,orientation:"portrait",lineJumps:!1},shapeDefaults:{id:"",name:"",title:"",category:"",group:"",groupName:null,locked:!1,link:"",children:[],parent:"",resizeDir:["tl","tr","br","bl","l","t","r","b"],attribute:{container:!1,visible:!0,rotatable:!0,linkable:!0,collapsable:!1,collapsed:!1,fixedLink:!1,markerOffset:5},dataAttributes:[],props:{x:0,y:0,w:120,h:80,zindex:0,angle:0},shapeStyle:{alpha:1},lineStyle:{lineWidth:2,lineColor:"33,41,48",lineStyle:"solid"},fillStyle:{type:"solid",color:"255,255,255"},theme:{},path:[{actions:[{action:"move",x:"0",y:"0"},{action:"line",x:"w",y:"0"},{action:"line",x:"w",y:"h"},{action:"line",x:"0",y:"h"},{action:"close"}]}],fontStyle:{fontFamily:"微软雅黑",size:13,lineHeight:1.25,color:"50,50,50",bold:!1,italic:!1,underline:!1,textAlign:"center",vAlign:"middle",orientation:"vertical"},textBlock:[{position:{x:10,y:0,w:"w-20",h:"h"},text:""}],anchors:[{x:"w/2",y:"0"},{x:"w/2",y:"h"},{x:"0",y:"h/2"},{x:"w",y:"h/2"}]},linkerDefaults:{id:"",name:"linker",text:"",group:"",linkerType:"broken",points:[],locked:!1,dataAttributes:[],props:{zindex:0},lineStyle:{lineWidth:2,lineColor:"50,50,50",lineStyle:"solid",beginArrowStyle:"none",endArrowStyle:"solidArrow"},fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50",bold:!1,italic:!1,underline:!1,textAlign:"center"}},categories:[],shapes:{},isDialog:!1,shapes_:{},categories_:[],network:{network:["network"],network_aliyun:["ali_app_service","ali_database","ali_devel_resource","ali_domain_website","ali_elastic_calc","ali_industry_cloud","ali_internet_midd","ali_large_scale_calc","ali_manage_monitor","ali_mobile_service","ali_network","ali_other_products","ali_security","ali_storage_cdn"],network_huaweiyun:["huawei_compute","huawei_storage","huawei_networking","huawei_databases","huawei_containers","huawei_management_governance","huawei_application","huawei_security","huawei_migration","huawei_devcloud","huawei_domain_website","huawei_edge_cloud_service","huawei_communications","huawei_ioT","huawei_enterprise_collaboration","huawei_business_applications","huawei_media_services","huawei_markerplace","huawei_enterprise_network","huawei_dedicated_cloud","huawei_enterprise_intelligence","huawei_extend","huawei_other"],network_tencentcloud:["tencent_cloud_basic","tencent_cloud_database","tencent_cloud_safe","tencent_cloud_bigdata","tencent_cloud_ai","tencent_cloud_ea","tencent_cloud_ia","tencent_cloud_dev"],network_aws2019:["aws2019_groups","aws2019_general","aws2019_compute","aws2019_instance","aws2019_storage","aws2019_database","aws2019_ncd","aws2019_mt","aws2019_dt","aws2019_mg","aws2019_sic","aws2019_analytics","aws2019_ml","aws2019_robotics","aws2019_mobile","aws2019_ai","aws2019_ms","aws2019_ba","aws2019_euc","aws2019_iot","aws2019_gt","aws2019_av","aws2019_acm","aws2019_blockchain","aws2019_ce","aws2019_satellite"],network_aws:["aws_analytics","aws_app_servers","aws_compute","aws_database","aws_devel_tools","aws_enterprise_apps","aws_general","aws_iot","aws_mgmt_tools","aws_mobile_servers","aws_networking","aws_sdk","aws_security_identity","aws_storage","aws_workforce","aws_groups"],network_cisco:["cisco_bulidings","cisco_computers_peripherals","cisco_control_module","cisco_directors","cisco_hubs_gateways","cisco_misc","cisco_modems_phones","cisco_people","cisco_routers","cisco_security","cisco_servers","cisco_storage","cisco_switches","cisco_wireless"],network_azure:["azure"]},flowBasicConfig:["text","note","linker_shape_solid","start","image","round","rectangle","roundRectangle","triangle","rightTriangle","diamond","polygon","hexagon","octagon","pentagon","sector","cloud","sector2","teardrop","comment","apqc","standardText","standardImage","standardRectangle"],markers:{},themes:{},addCategory:function(e){Schema.isDialog?(Schema.categories_.push(e),CategoryMapping_[e.name]=e):(Schema.categories.push(e),CategoryMapping[e.name]=e)},addShape:function(e){if(void 0!==Schema.shapes[e.name])throw"--Duplicated shape name: "+e.name;e.groupName&&SchemaGroup.addGroupShape(e.groupName,e.name),Schema.isDialog?Schema.shapes_[e.name]=this.initShape(e):Schema.shapes[e.name]=this.initShape(e)},addTheme:function(e){Schema.themes[e.name]=e},initShape:function(e){var t={};for(var a in this.shapeDefaults)"attribute"==a?t.attribute=this.extend(e.attribute,this.shapeDefaults.attribute):"props"==a?t.props=this.extend(e.props,this.shapeDefaults.props):"shapeStyle"==a?t.shapeStyle=this.extend(e.shapeStyle,this.shapeDefaults.shapeStyle):"lineStyle"==a?t.lineStyle=this.extend({},e.lineStyle):"fillStyle"==a?t.fillStyle=this.extend({},e.fillStyle):"fontStyle"==a?t.fontStyle=this.extend({},e.fontStyle):"textBlock"==a?void 0!==e[a]?t[a]=e[a]:t[a]=[{position:this.extend({},this.shapeDefaults.textBlock[0].position),text:""}]:"theme"==a?t.theme=this.extend({},e.theme):void 0!==e[a]?t[a]=e[a]:t[a]=this.shapeDefaults[a];return e.onCreated&&(t.onCreated=e.onCreated),e.drawIcon&&(t.drawIcon=e.drawIcon),e.drawChart&&(t.drawChart=e.drawChart),-1!=e.name.indexOf("linker_shape_")&&e.element&&(t.element=e.element),t},extend:function(e,t){e||(e={});var a={};for(var i in t)a[i]=t[i];for(var i in e)a[i]=e[i];return a},addGlobalCommand:function(e,t){GlobalCommand[e]=t},addMarker:function(e,t){if(void 0!==Schema.markers[e])throw"--Duplicated marker name: "+e;Schema.markers[e]=t},empty:function(){Schema.categories=[],Schema.shapes={},CategoryMapping={},SchemaGroup.groups={}},init:function(e){for(var t in Schema.shapes){var a=Schema.shapes[t];this.initShapePath(a),e&&this.initShapeFunctions(a),this.initShapeDataAttribute(a)}},initShapePath:function(e){if(e.path)for(var t=0;t<e.path.length;t++){var a=e.path[t];a.actions&&a.actions.ref&&(e.path[t].actions=GlobalCommand[a.actions.ref])}},initShapeFunctions:function initShapeFunctions(shape){var pathEval="shape.getPath = function(){var color = [255,255,255];var fillStyle = Utils.getShapeFillStyle(this.fillStyle, false);if(fillStyle.color && fillStyle.color.length > 0){color = fillStyle.color.split(',');}var r = color[0]; var g = color[1]; var b = color[2]; var a = color[3] || 1,radial = 'radial',linear = 'linear';var w = this.props.w; var height = this.props.height; var h = this.props.h;var lineStyle = Utils.getShapeLineStyle(this.lineStyle, false); var lineWidth = lineStyle.lineWidth; ";pathEval+=SchemaHelper.constructPathFunBody(shape.path,shape.name)+"}",eval(pathEval);for(var anchorsEval="shape.getAnchors = function(){var w = this.props.w; var h = this.props.h; return [",i=0;i<shape.anchors.length;i++){var anchor=shape.anchors[i];anchorsEval+="{x:"+anchor.x+", y:"+anchor.y+"}",i<shape.anchors.length-1&&(anchorsEval+=",")}anchorsEval+="];}",eval(anchorsEval),shape.getTextBlock=function(){for(var tbs=this.textBlock,w=this.props.w,h=this.props.h,height=this.props.height,result=[],i=0;i<tbs.length;i++){var tb=tbs[i],p=tb.position,newTb={position:{x:eval(p.x),y:eval(p.y),w:eval(p.w),h:eval(p.h)},text:tb.text,fontStyle:tb.fontStyle};result.push(newTb)}return result}},initMarkers:function initMarkers(){for(var name in Schema.markers){var pathEval="Schema.markers['"+name+"'] = function(size){var w = size; var h = size; var lineWidth = this.lineStyle.lineWidth; ";pathEval+=SchemaHelper.constructPathFunBody(Schema.markers[name])+"}",eval(pathEval)}},initShapeDataAttribute:function(e){var t=CategoryMapping[e.category].dataAttributes;e.dataAttributes||(e.dataAttributes=[]),t&&t.length>0&&(e.dataAttributes=t.concat(e.dataAttributes))}};window.CategoryMapping={},window.GlobalCommand={},Schema.addGlobalCommand("rectangle",[{action:"move",x:"0",y:"0"},{action:"line",x:"w",y:"0"},{action:"line",x:"w",y:"h"},{action:"line",x:"0",y:"h"},{action:"close"}]),Schema.addGlobalCommand("round",[{action:"move",x:"0",y:"h/2"},{action:"curve",x1:"0",y1:"-h/6",x2:"w",y2:"-h/6",x:"w",y:"h/2"},{action:"curve",x1:"w",y1:"h+h/6",x2:"0",y2:"h+h/6",x:"0",y:"h/2"},{action:"close"}]),Schema.addGlobalCommand("roundRectangle",[{action:"move",x:"0",y:"4"},{action:"quadraticCurve",x1:"0",y1:"0",x:"4",y:"0"},{action:"line",x:"w-4",y:"0"},{action:"quadraticCurve",x1:"w",y1:"0",x:"w",y:"4"},{action:"line",x:"w",y:"h-4"},{action:"quadraticCurve",x1:"w",y1:"h",x:"w-4",y:"h"},{action:"line",x:"4",y:"h"},{action:"quadraticCurve",x1:"0",y1:"h",x:"0",y:"h-4"},{action:"close"}]),Schema.addMarker("expand",[{lineStyle:{lineWidth:2,lineColor:"50,50,50",lineStyle:"solid"},fillStyle:{type:"none"},actions:[{action:"move",x:"w/2",y:"2"},{action:"line",x:"w/2",y:"h-2"},{action:"move",x:"2",y:"h/2"},{action:"line",x:"w-2",y:"h/2"},{action:"move",x:"0",y:"0"},{action:"line",x:"w",y:"0"},{action:"line",x:"w",y:"h"},{action:"line",x:"0",y:"h"},{action:"close"}]}]),Schema.addMarker("ad_hoc",[{lineStyle:{lineWidth:3,lineColor:"50,50,50",lineStyle:"solid"},fillStyle:{type:"none"},actions:[{action:"move",x:"0",y:"5*h/8"},{action:"curve",x1:"w/8-1",y1:"h/2-h/8",x2:"3*w/8-1",y2:"h/2-h/8",x:"w/2",y:"h/2"},{action:"curve",x1:"5*w/8-1",y1:"h/2+h/8",x2:"7*w/8+1",y2:"h/2+h/8",x:"w",y:"3*w/8"}]}]),Schema.addMarker("compensation",[{lineStyle:{lineWidth:2,lineColor:"50,50,50",lineStyle:"solid"},fillStyle:{type:"none"},actions:[{action:"move",x:"0",y:"h*0.5"},{action:"line",x:"w*0.5",y:"0"},{action:"line",x:"w*0.5",y:"h"},{action:"line",x:"0",y:"h*0.5"},{action:"move",x:"w*0.5",y:"h*0.5"},{action:"line",x:"w",y:"0"},{action:"line",x:"w",y:"h"},{action:"line",x:"w*0.5",y:"h*0.5"}]}]),Schema.addMarker("parallel",[{lineStyle:{lineWidth:4,lineColor:"50,50,50",lineStyle:"solid"},fillStyle:{type:"none"},actions:[{action:"move",x:1,y:"0"},{action:"line",x:1,y:"h"},{action:"move",x:"w/2",y:"0"},{action:"line",x:"w/2",y:"h"},{action:"move",x:"w-1",y:"0"},{action:"line",x:"w-1",y:"h"}]}]),Schema.addMarker("sequential",[{lineStyle:{lineWidth:4,lineColor:"50,50,50",lineStyle:"solid"},fillStyle:{type:"none"},actions:[{action:"move",x:"0",y:1},{action:"line",x:"w",y:1},{action:"move",x:"0",y:"h/2"},{action:"line",x:"w",y:"h/2"},{action:"move",x:"0",y:"h-1"},{action:"line",x:"w",y:"h-1"}]}]),Schema.addMarker("loop",[{lineStyle:{lineWidth:2,lineColor:"50,50,50",lineStyle:"solid"},fillStyle:{type:"none"},actions:[{action:"move",x:"w/2",y:"h"},{action:"curve",x1:"w*7/6",y1:"h",x2:"w*7/6",y2:"0",x:"w/2",y:"0"},{action:"curve",x1:"-w/6",y1:"0",x2:"-w*0.2/6",y2:"h*0.8",x:"w*0.2",y:"h*0.8"},{action:"move",x:"w*0.2",y:"h*0.8"},{action:"line",x:"-w*0.1",y:"h*0.7"},{action:"move",x:"w*0.2",y:"h*0.8"},{action:"line",x:"w*0.25",y:"h*0.6"}]}]),Schema.addCategory({name:"standard",text:"Standard",dataAttributes:[]}),Schema.addShape({name:"standardText",title:"",category:"standard",attribute:{linkable:!1},props:{w:160,h:40},anchors:[],textBlock:[{position:{x:0,y:0,w:"w",h:"h"},text:"文本"}],path:[{lineStyle:{lineWidth:0},fillStyle:{type:"none"},actions:{ref:"rectangle"}}]}),Schema.addShape({name:"standardImage",title:"",attribute:{linkable:!1,visible:!1},category:"standard",props:{w:100,h:70},textBlock:[],path:[{lineStyle:{lineWidth:0},actions:{ref:"rectangle"}}]}),Schema.addShape({name:"standardRectangle",title:"",attribute:{visible:!1},category:"standard",props:{w:100,h:70},textBlock:[{position:{x:0,y:0,w:"w",h:"h"},text:""}],path:[{actions:{ref:"rectangle"}}]});var SchemaHelper={constructPathFunBody:function(e,t){if(t&&0==t.indexOf("grid")){for(var a=[],i=0;i<e.length;i++){var n=e[i];for(d=0;d<n.length;d++)n[d].row=i,n[d].column=d,a.push(n[d])}(e=a).push({fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:0},{action:"line",x:"w",y:0},{action:"line",x:"w",y:"h"},{action:"line",x:"0",y:"h"},{action:"close"}]})}var o="return [";for(i=0;i<e.length;i++){var r=e[i];if(o+="{",r.fillStyle&&0==$.isEmptyObject(r.fillStyle)){var l="fillStyle: {",s=r.fillStyle;if(void 0!==s.type&&(l+="type:'"+s.type+"',"),void 0!==s.color){var c="";(h=s.color.split(","))[0].indexOf("r")>=0?c+="("+h[0]+")+','+":c+="'"+h[0]+",'+",h[1].indexOf("g")>=0?c+="("+h[1]+")+','+":c+="'"+h[1]+",'+",h[2].indexOf("b")>=0?c+="("+h[2]+")":c+="'"+h[2]+"'",h[3]&&(h[3].indexOf("a")>=0?c+="+','+("+h[3]+")":(c=c.substring(0,c.length-1),c+=",'+'"+h[3]+"'")),l+="color:"+c+","}if(void 0!==s.gradientType&&(l+="gradientType:"+s.gradientType+","),void 0!==s.beginColor){c="";(h=s.beginColor.split(","))[0].indexOf("r")>=0?c+="("+h[0]+")+','+":c+="'"+h[0]+",'+",h[1].indexOf("g")>=0?c+="("+h[1]+")+','+":c+="'"+h[1]+",'+",h[2].indexOf("b")>=0?c+="("+h[2]+")":c+="'"+h[2]+"'",l+="beginColor:"+c+","}if(void 0!==s.endColor){var h;c="";(h=s.endColor.split(","))[0].indexOf("r")>=0?c+="("+h[0]+")+','+":c+="'"+h[0]+",'+",h[1].indexOf("g")>=0?c+="("+h[1]+")+','+":c+="'"+h[1]+",'+",h[2].indexOf("b")>=0?c+="("+h[2]+")":c+="'"+h[2]+"'",l+="endColor:"+c+","}void 0!==s.angle&&(l+="angle:"+s.angle+","),void 0!==s.radius&&(l+="radius:"+s.radius+","),void 0!==s.fileId&&(l+="fileId:'"+s.fileId+"',"),void 0!==s.display&&(l+="display:'"+s.display+"',"),void 0!==s.imageW&&(l+="imageW:"+s.imageW+","),void 0!==s.imageH&&(l+="imageH:"+s.imageH+","),void 0!==s.alpha&&(l+="alpha:"+s.alpha+","),void 0!==s.imageX&&(l+="imageX:"+s.imageX+","),void 0!==s.imageY&&(l+="imageY:"+s.imageY+","),l=l.substring(0,l.length-1),o+=l+="},"}if(r.lineStyle){var p="lineStyle: {";void 0!==r.lineStyle.lineWidth&&(p+="lineWidth:"+r.lineStyle.lineWidth+","),void 0!==r.lineStyle.lineStyle&&(p+="lineStyle:'"+r.lineStyle.lineStyle+"',"),void 0!==r.lineStyle.lineColor&&(p+="lineColor:'"+r.lineStyle.lineColor+"',"),p=p.substring(0,p.length-1),o+=p+="},"}if(void 0!==r.row)o+="row: "+r.row+",";if(void 0!==r.column)o+="column: "+r.column+",";o+="actions:[";for(var u=r.actions,d=0;d<u.length;d++){var y=u[d];o+="{action:'"+y.action+"'","move"==y.action||"line"==y.action?o+=",x:"+y.x+",y:"+y.y:"curve"==y.action?o+=",x1:"+y.x1+",y1:"+y.y1+",x2:"+y.x2+",y2:"+y.y2+",x:"+y.x+",y:"+y.y:"quadraticCurve"==y.action?o+=",x1:"+y.x1+",y1:"+y.y1+",x:"+y.x+",y:"+y.y:"rect"==y.action&&(o+=",x:"+y.x+",y:"+y.y+",w:"+y.w+",h:"+y.h),o+="}",d<u.length-1&&(o+=",")}o+="]}",i<e.length-1&&(o+=",")}return o+="];"}},SchemaGroup={groups:{},addGroupShape:function(e,t){this.groupExists(e)?this.groups[e].push(t):this.groups[e]=[t]},groupExists:function(e){return!!this.groups[e]},getGroup:function(e){return this.groups[e]}};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var a,i,n,o,r,l=gap,s=t[e];switch(s&&"object"===_typeof(s)&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),_typeof(s)){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(s)){for(o=s.length,a=0;a<o;a+=1)r[a]=str(a,s)||"null";return n=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+l+"]":"["+r.join(",")+"]",gap=l,n}if(rep&&"object"===_typeof(rep))for(o=rep.length,a=0;a<o;a+=1)"string"==typeof rep[a]&&(n=str(i=rep[a],s))&&r.push(quote(i)+(gap?": ":":")+n);else for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=str(i,s))&&r.push(quote(i)+(gap?": ":":")+n);return n=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+l+"}":"{"+r.join(",")+"}",gap=l,n}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,a){var i;if(gap="",indent="","number"==typeof a)for(i=0;i<a;i+=1)indent+=" ";else"string"==typeof a&&(indent=a);if(rep=t,t&&"function"!=typeof t&&("object"!==_typeof(t)||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var a,i,n=e[t];if(n&&"object"===_typeof(n))for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(void 0!==(i=walk(n,a))?n[a]=i:delete n[a]);return reviver.call(e,t,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),window.Schema=Schema,window.SchemaGroup=SchemaGroup,window.CategoryMapping_={};
},{}],"h4tm":[function(require,module,exports) {
Schema.addTheme({name:"colorful_theme1",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},fillStyle:{type:"solid",color:"255,255,255"},lineStyle:{lineWidth:2,lineColor:"50,50,50"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:2,lineColor:"50,50,50"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme2",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,255,255"},fillStyle:{type:"solid",color:"33,41,48"},lineStyle:{lineWidth:1,lineColor:"173,181,184"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:2,lineColor:"33,41,48"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme3",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},fillStyle:{type:"solid",color:"255,255,238"},lineStyle:{lineWidth:1.5,lineColor:"50,50,50"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:1.5,lineColor:"50,50,50"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme4",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},fillStyle:{type:"solid",color:"214,214,214"},lineStyle:{lineWidth:1.5,lineColor:"50,50,50"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:1.5,lineColor:"50,50,50"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme5",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"127,47,36"},fillStyle:{type:"solid",color:"244,180,157"},lineStyle:{lineWidth:2,lineColor:"198,81,50"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"127,47,36"},lineStyle:{lineWidth:2,lineColor:"127,47,36"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme6",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"246,238,209"},fillStyle:{type:"solid",color:"223,147,113"},lineStyle:{lineWidth:2,lineColor:"198,81,50"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"127,47,36"},lineStyle:{lineWidth:2,lineColor:"127,47,36"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme7",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},fillStyle:{type:"solid",color:"246,238,209"},lineStyle:{lineWidth:2,lineColor:"239,184,27"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:2,lineColor:"50,50,50"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme8",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,252,239"},fillStyle:{type:"solid",color:"234,176,13"},lineStyle:{lineWidth:1,lineColor:"50,50,50"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:1,lineColor:"50,50,50"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme9",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"36,44,25"},fillStyle:{type:"solid",color:"212,221,192"},lineStyle:{lineWidth:1.5}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:2,lineColor:"50,50,50"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme10",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"251,255,241"},fillStyle:{type:"solid",color:"170,190,112"},lineStyle:{lineWidth:2,lineColor:"90,128,31"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"50,50,50"},lineStyle:{lineWidth:2,lineColor:"50,50,50"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme11",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"244,255,249"},fillStyle:{type:"solid",color:"101,181,132"},lineStyle:{lineWidth:1,lineColor:"18,119,49"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"129,194,187"},lineStyle:{lineWidth:1,lineColor:"129,194,187"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme12",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"18,119,49"},fillStyle:{type:"solid",color:"203,237,219"},lineStyle:{lineWidth:2,lineColor:"18,119,49"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"69,175,163"},lineStyle:{lineWidth:2,lineColor:"69,175,163"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme13",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"21,71,91"},fillStyle:{type:"solid",color:"180,216,213"},lineStyle:{lineWidth:1,lineColor:"54,169,204"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"44,118,155"},lineStyle:{lineWidth:1,lineColor:"44,118,155"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme14",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"243,223,255"},fillStyle:{type:"solid",color:"54,169,204"},lineStyle:{lineWidth:1,lineColor:"44,118,155"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"59,66,150"},lineStyle:{lineWidth:1,lineColor:"59,66,150"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme15",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"37,127,216"},fillStyle:{type:"solid",color:"186,221,247"},lineStyle:{lineWidth:2,lineColor:"37,127,216"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"249,157,75"},lineStyle:{lineWidth:2,lineColor:"249,157,75"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme16",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,193,146"},fillStyle:{type:"solid",color:"37,127,216"},lineStyle:{lineWidth:1,lineColor:"0,82,164"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"77,195,247"},lineStyle:{lineWidth:2,lineColor:"77,195,247"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme17",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"7,91,63"},fillStyle:{type:"solid",color:"205,170,242"},lineStyle:{lineWidth:1,lineColor:"7,91,63"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"16,132,96"},lineStyle:{lineWidth:2,lineColor:"16,132,96"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme18",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"223,239,233"},fillStyle:{type:"solid",color:"172,128,229"},lineStyle:{lineWidth:1,lineColor:"102,46,174"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"151,197,211"},lineStyle:{lineWidth:2,lineColor:"151,197,211"}},page:{backgroundColor:"255,255,255"}}),Schema.addTheme({name:"colorful_theme19",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"127,47,36"},fillStyle:{type:"solid",color:"223,147,113"},lineStyle:{lineWidth:1,lineColor:"127,47,36"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"172,56,50"},lineStyle:{lineWidth:2,lineColor:"172,56,50"}},page:{backgroundColor:"54,51,50"}}),Schema.addTheme({name:"colorful_theme20",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,255,255"},fillStyle:{type:"solid",color:"239,184,27"},lineStyle:{lineWidth:1,lineColor:"228,213,153"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"232,213,145"},lineStyle:{lineWidth:2,lineColor:"232,213,145"}},page:{backgroundColor:"65,62,56"}}),Schema.addTheme({name:"colorful_theme21",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,247,225"},fillStyle:{type:"solid",color:"163,178,105"},lineStyle:{lineWidth:2,lineColor:"231,244,193"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,230,140"},lineStyle:{lineWidth:2,lineColor:"255,230,140"}},page:{backgroundColor:"76,77,72"}}),Schema.addTheme({name:"colorful_theme22",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"9,104,52"},fillStyle:{type:"solid",color:"167,211,183"},lineStyle:{lineWidth:2,lineColor:"9,104,52"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"146,174,244"},lineStyle:{lineWidth:2,lineColor:"146,174,244"}},page:{backgroundColor:"39,40,40"}}),Schema.addTheme({name:"colorful_theme23",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"27,100,153"},fillStyle:{type:"solid",color:"122,196,187"},lineStyle:{lineWidth:2,lineColor:"197,249,255"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"177,199,255"},lineStyle:{lineWidth:2,lineColor:"177,199,255"}},page:{backgroundColor:"32,43,54"}}),Schema.addTheme({name:"colorful_theme24",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,255,255"},fillStyle:{type:"solid",color:"37,127,216"},lineStyle:{lineWidth:2,lineColor:"217,226,237"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,147,87"},lineStyle:{lineWidth:2,lineColor:"255,147,87"}},page:{backgroundColor:"13,20,28"}}),Schema.addTheme({name:"colorful_theme25",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,230,174"},fillStyle:{type:"solid",color:"172,128,229"},lineStyle:{lineWidth:2,lineColor:"130,63,188"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,211,102"},lineStyle:{lineWidth:2,lineColor:"255,211,102"}},page:{backgroundColor:"69,59,81"}}),Schema.addTheme({name:"colorful_theme26",shape:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"255,255,255"},fillStyle:{type:"solid",color:"158,158,158"},lineStyle:{lineWidth:1,lineColor:"210,210,210"}},linker:{fontStyle:{fontFamily:"微软雅黑",size:13,color:"158,158,158"},lineStyle:{lineWidth:2,lineColor:"158,158,158"}},page:{backgroundColor:"36,36,36"}});
},{}],"SPLt":[function(require,module,exports) {
var define;
var define,clipboard=_interopRequireWildcard(require("./clipboard")),defClipboard=_interopRequireWildcard(require("../../common/clipboard/util")),_utils=require("../../common/utils");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache=function(e){return e?i:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=_getRequireWildcardCache(t);if(i&&i.has(e))return i.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,i&&i.set(e,n),n}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return t};var e,t={},i=Object.prototype,n=i.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function p(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var a=t&&t.prototype instanceof x?t:x,o=Object.create(a.prototype),s=new L(n||[]);return r(o,"_invoke",{value:D(e,i,s)}),o}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var c="suspendedStart",u="suspendedYield",g="executing",y="completed",f={};function x(){}function v(){}function m(){}var b={};p(b,o,function(){return this});var w=Object.getPrototypeOf,S=w&&w(w(I([])));S&&S!==i&&n.call(S,o)&&(b=S);var k=m.prototype=x.prototype=Object.create(b);function M(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){function i(r,a,o,s){var l=d(e[r],e,a);if("throw"!==l.type){var p=l.arg,h=p.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){i("next",e,o,s)},function(e){i("throw",e,o,s)}):t.resolve(h).then(function(e){p.value=e,o(p)},function(e){return i("throw",e,o,s)})}s(l.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return a=a?a.then(r,r):r()}})}function D(t,i,n){var r=c;return function(a,o){if(r===g)throw new Error("Generator is already running");if(r===y){if("throw"===a)throw o;return{value:e,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var l=U(s,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var p=d(t,i,n);if("normal"===p.type){if(r=n.done?y:u,p.arg===f)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(r=y,n.method="throw",n.arg=p.arg)}}}function U(t,i){var n=i.method,r=t.iterator[n];if(r===e)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=e,U(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=d(r,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,f;var o=a.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function I(t){if(t||""===t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}throw new TypeError(_typeof(t)+" is not iterable")}return v.prototype=m,r(k,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=p(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,p(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},M(_.prototype),p(_.prototype,s,function(){return this}),t.AsyncIterator=_,t.async=function(e,i,n,r,a){void 0===a&&(a=Promise);var o=new _(h(e,i,n,r),a);return t.isGeneratorFunction(i)?o:o.next().then(function(e){return e.done?e.value:o.next()})},M(k),p(k,l,"Generator"),p(k,o,function(){return this}),p(k,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return s.type="throw",s.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),p=n.call(o,"finallyLoc");if(l&&p){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),P(i),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;P(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:I(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}function asyncGeneratorStep(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(p){return void i(p)}s.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,i=arguments;return new Promise(function(n,r){var a=e.apply(t,i);function o(e){asyncGeneratorStep(a,n,r,o,s,"next",e)}function s(e){asyncGeneratorStep(a,n,r,o,s,"throw",e)}o(void 0)})}}var localRuntime=!1,role="",tutorial=localStorage.getItem("po_flow_tutorial"),showToolbar=!1,userName="";window.mouseInChart=!1;var Schema=window.Schema;Schema.init(!0),Schema.initMarkers();var pasteFn=null;window.Designer={defaults:{linkerBeginArrowStyle:null,linkerEndArrowStyle:null,lineWidth:1.5},config:{panelItemWidth:50,panelItemHeight:50,pageMargin:1e3,anchorSize:8,rotaterSize:9,anchorColor:"#067bef",selectorColor:"#067bef",scale:1,pageScale:1},status:"",initialize:{initialized:!1,initLayout:function(){$(window).bind("resize.designer",function(){var e=$(".header").is(":visible")?$(".header").outerHeight():0,t=$("#po-toolbar").is(":visible")?$("#po-toolbar").outerHeight():0,i=$("#po-designer-foot").is(":visible")?$("#po-designer-foot").outerHeight():0,n=$(window).height()-e-t-i;$("#designer_layout").height(n),$("#demo_signup").length&&$("#designer_layout").height(n-$("#demo_signup").outerHeight())}),$(window).trigger("resize.designer")},initModel:function(){Model.define={page:Utils.copy(Schema.pageDefaults),elements:{}},Model.persistence={page:Utils.copy(Schema.pageDefaults),elements:{}}},initCanvas:function(){var e=Model.define.page.width,t=Model.define.page.height;if(e>2e4&&(e=2e4),t>2e4&&(t=2e4),"landscape"==Model.define.page.orientation){var i=e;e=t,t=i}var n=Model.define.page.backgroundColor;"transparent"==n&&(n="255,255,255");var r=Utils.getDarkerColor(n),a=Utils.getDarkestColor(n);$("#canvas_container").css({width:e.toScale(),height:t.toScale(),padding:Designer.config.pageMargin}),$("#designer_canvas").css({width:e,height:t,"background-color":"rgb("+r+")"});var o=$("#designer_grids");if(0==o.length){$("#designer_canvas").prepend('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xlink="http://www.w3.org/1999/xlink" id="designer_grids">\n\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t  <pattern id="flow_canvas_grid_item" width="100" height="100" patternUnits="userSpaceOnUse">\n\t\t\t\t\t\t\t\t\t\t<path id="flow_canvas_grid_path1" stroke-width="1" fill="none"/>\n\t\t\t\t\t\t\t\t\t\t<path id="flow_canvas_grid_path2" stroke-width="1" fill="none"/>\n\t\t\t\t\t\t\t\t\t  </pattern>\n\t\t\t\t\t\t\t\t\t  <pattern xmlns="http://www.w3.org/2000/svg" patternUnits="userSpaceOnUse" id="flow_canvas_watermark_item" width="300" height="300">\n\t\t\t\t\t\t\t\t\t\t<text x="150" y="100" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text>\n\t\t\t\t\t\t\t\t\t  </pattern>\n\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t<rect id="flow_canvas_grids_box" width="1050" height="740" fill="url(#flow_canvas_grid_item)"/>\n\t\t\t\t\t\t\t\t\t<rect id="flow_canvas_watermark_box" width="1050" height="740" fill="url(#flow_canvas_watermark_item)"/>\n\t\t\t\t\t\t\t\t  \t<path id="flow_canvas_print_line" stroke-width="2" stroke-dasharray="5,5" fill="none"/>\n\t\t\t\t\t\t\t\t  </svg>')}o.css({width:e,height:t,display:"block","background-color":"rgb("+n+")"}),$("#flow_canvas_grids_box").attr({width:e,height:t}),$("#flow_canvas_watermark_box").attr({width:e,height:t});var s=Math.round(Model.define.page.gridSize);s<10&&(s=10);var l=$("#flow_canvas_grid_item");l.attr({height:4*s+1,width:4*s+1});var p="",h="";if(Model.define.page.showGrid){for(var d=1;d<4;d++)p+="M0 "+s*d+"L"+4*s+" "+s*d+"M"+s*d+" 0L"+s*d+" "+4*s;h="M0 "+4*s+"L"+4*s+" "+4*s+"M"+4*s+" 0L"+4*s+" "+4*s}l.children("#flow_canvas_grid_path1").attr({d:p,stroke:"rgb("+r+")"}),l.children("#flow_canvas_grid_path2").attr({d:h,stroke:"rgb("+a+")"}),this.initialized||($("#designer_layout").scrollTop(Designer.config.pageMargin-10),$("#designer_layout").scrollLeft(Designer.config.pageMargin-10));var c=Model.define.page.watermark;void 0===Model.define.page.showWatermark&&""==c?Model.define.page.showWatermark=!1:void 0===Model.define.page.showWatermark&&c&&(Model.define.page.showWatermark=!0),Model.define.page.showWatermark?(c=$("<span/>").html(c).text(),$("#flow_canvas_watermark_item text").html(c).attr({fill:"rgb("+a+")"})):$("#flow_canvas_watermark_item text").html("");var u=$("#flow_canvas_print_line");if(Model.define.page.showPrintLine){var g=1485,y=1050;"landscape"==Model.define.page.orientation&&(g=[y,y=g][0]);for(var f=g,x="";f<t;)x+="M0 "+f+"L"+e+" "+f,f+=g;for(f=y;f<e;)x+="M"+f+" 0L"+f+" "+t,f+=y}else x="";u.attr({d:x,stroke:"rgb("+Utils.getDarkerColor(n,40)+")"})},canvasSizeAuto:function(){var e=Model.define.page,t=e.width,i=e.height;if(0==chartObj.version&&0==Object.keys(Model.define.elements).length){var n=$("#designer_layout").width()-30,r=$("#designer_layout").height()-33;r=r<500?500:r,t==(n=n<500?500:n)&&i==r||Designer.setPageStyle({width:n,height:r})}$("#designer_layout").scrollTop(Designer.config.pageMargin-10),$("#designer_layout").scrollLeft(Designer.config.pageMargin-10)},initShapes:function initShapes(){$("#shape_panel").empty(),$("#shape_panel").append("<div id='panel-search' class='po-search-input-small'></div><div id='panel_system_box' class='panel_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>系统图形</h3><div id='panel_system' class='content'></div></div><div id='panel_search_box' class='panel_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>网络图形</h3><div id='panel_search' class='content'></div></div>"),$("#shape_panel").append("<div class='panel_container panel_myshape_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>我的图形<span id='edit-myshapes-icon' class='po-diagraming-icons edit-myshapes-icon' title='编辑'>&#xe6ae;</span></h3><div class='myshapes-content'><div id='myshapes' class='myshapes'>拖到此处<br/>添加到我的图形</div></div><div id='panel_myshape' class='content'></div></div>"),Designer.events.push("isTeam",function(e){if("undefined"==typeof TeamShape){bigPipe.render({js:["/scripts_bin/zh/diagraming/designer.team.js"],css:["/scripts_bin/zh/diagraming/designer.team.css"]},function(){TeamShape.init()})}else TeamShape.init()});for(var i=0;i<Schema.categories.length;i++){var cate=Schema.categories[i];"standard"!=cate.name&&$("#shape_panel").append("<div class='panel_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>"+cate.text+"</h3><div id='panel_"+cate.name+"' class='content'></div></div>")}$("#shape_panel .panel_container").css("width",$("#shape_panel").outerWidth()-16),$(".panel_title").unbind("click.panelTitle").bind("click.panelTitle",function(){$(this).parent().toggleClass("panel_collapsed")});var indexs=0;for(var name in Schema.shapes){var shape=Schema.shapes[name];if(shape.attribute.visible&&"standard"!=shape.category)if(shape.groupName){var groupShapes=SchemaGroup.getGroup(shape.groupName);groupShapes[0]==name&&appendPanelItem(shape,shape.groupName)}else appendPanelItem(shape),indexs++;"basic"==shape.category&&-1==Schema.flowBasicConfig.indexOf(name)&&$("#shape_panel [shapeName="+shape.name+"]").css("display","none")}for(var panelEmptyBox="",_i=0;_i<16;_i++)panelEmptyBox+="<div class='panel-empty-box'></div>";function renderMyshape(page){location.href.includes("iframe")||($("#panel_myshape .myshape-panel-btn").remove(),Server.getMyshapes(page,function(res){1==page&&(Schema.myShapes=[],$("#panel_myshape").html(""));for(var myShapesLen=Schema.myShapes.length,len=20*(page-1),cNun=myShapesLen-len,myShapeData=res.definition||[],i=0;i<myShapeData.length;i++)if(!(i<cNun)){for(var shape=myShapeData[i],els=shape.elements,j=0;j<els.length;j++){var el=els[j];for(key in el){var v=el[key];v.indexOf&&v.indexOf("function")>-1&&(el[key]=eval("(function(){return "+v+" })()"))}}Schema.myShapes.push(shape),appendPanelItem(shape)}0==Schema.myShapes.length?$("#myshapes").css("display","block"):$("#myshapes").css("display","none");for(var panelEmptyBox="",_i2=0;_i2<10;_i2++)panelEmptyBox+="<div class='panel-myshape-empty-box'></div>";if($("#panel_myshape").append(panelEmptyBox),page<res.pageCount){var btn=$("<div class='myshape-panel-btn' style='margin: auto;' >加载更多</div>").appendTo("#panel_myshape");btn.off().on("click",function(){page++,$("#panel_myshape .panel-myshape-empty-box").remove(),renderMyshape(page)})}initPanelShapes()}))}function appendPanelItem(e,t,i){(e=Utils.copy(e)).category=e.category||"";var n=Designer.config.panelItemWidth,r=Designer.config.panelItemHeight;("ui"==e.category||"ui_input"==e.category||e.category.indexOf("ios_")>=0||e.category.indexOf("andriod_")>=0)&&(n=30,r=30);var a="<div class='panel_box' shapeName='"+e.name+"'><canvas class='panel_item' width='"+n+"' height='"+r+"'></canvas></div>";if(i)o=$(a).prependTo("#panel_"+e.category);else var o=$(a).appendTo("#panel_"+e.category);t&&o.append("<div class='group_icon' onmousedown='Designer.op.showPanelGroup(\""+t+"\", event, this)'></div>");var s=o.children()[0];(o.bind("mouseenter",function(){}).bind("mouseleave",function(){$("#shape_thumb").hide()}),"myshape"==e.category)?(s.getContext("2d").clearRect(0,0,n,r),Designer.painter.drawPanelItemByShape(s,e)):e.name.startsWith("chart_")?(o[0].style.height="26px",o[0].style.width="26px",Designer.painter.drawChart(o[0],e,"library")):Designer.painter.drawPanelItem(s,e.name)}function initPanelShapes(){$("#designer").off().on("touchstart",function(e){var t="CANVAS"==(e=e.originalEvent.touches[0]).target.nodeName||$(e.target).hasClass("group_icon")?$(e.target).parent():$(e.target);if(!t.hasClass("readonly")){var i=t.attr("shapeName");if(i&&!t.hasClass("dashboard_box")){var n,r,a=[];Designer.op.changeState("creating_from_panel");var o=null,s=[],l=[],p=$("#designer_canvas"),h=getCreatingCanvas(i);$("#designer").bind("touchmove.creating",function(e){e=e.originalEvent.touches[0];setCreatingCanvas(h,e)});for(var d=[],c=Model.orderList.length-1;c>=0;c--){var u=Model.orderList[c].id,g=Model.getShapeById(u);if((!g.attribute||!g.attribute.collapseBy)&&("linker"!=g.name&&!g.parent)){var y=Utils.getControlBox([u]);y.id=u,d.push(y)}}$(document).on("touchmove.create",function(e){e=e.originalEvent.touches[0];var t=Utils.getRelativePos(e.pageX,e.pageY,p);if(null==o){o=createShape(i,t.x,t.y);for(var h=0;h<o.length;h++){(u=o[h]).pos=Utils.copy(u.props),"linker"==u.name&&(u.to_=Utils.copy(u.to),u.from_=Utils.copy(u.from),u.points_=Utils.copyArray(u.points)),s.push(u.id),$("#"+u.id).attr("class","shape_box_creating"),l.push($("#"+u.id))}}for(var c=0;c<o.length;c++){var u,g=l[c];if((u=o[c]).boxPos?(u.props.x=t.x-u.boxPos.w/2+u.pos.x,u.props.y=t.y-u.boxPos.h/2+u.pos.y):(u.props.x=t.x-u.props.w/2,u.props.y=t.y-u.props.h/2),"linker"==u.name&&(u.from=$.extend(!0,u.from,resetPosByMouse(t,u.from_,u)),u.to=$.extend(!0,u.to,resetPosByMouse(t,u.to_,u)),"broken"==u.linkerType||"curve"==u.linkerType))for(h=0;h<u.points_.length;h++)u.points[h]=resetPosByMouse(t,u.points_[h],u);var y=u.props,f=Designer.op.snapLine(y,[u.id],u,d);f.attach?u.attachTo=f.attach.id:delete u.attachTo,u.container||(f.container?u.container=f.container.id:delete u.container),g.css({left:u.props.x-(g.width()-u.props.w)/2+"px",top:u.props.y-(g.height()-u.props.h)/2+"px","z-index":Model.orderList.length})}a=Utils.getShapeAnchorInLinker(o[0]),Designer.op.hideLinkPoint();for(h=0;h<a.length;h++)for(var x=a[h],v=0;v<x.anchors.length;v++){var m=x.anchors[v];Designer.op.showLinkPoint(m)}"linker"==o[0].name&&(n=Designer.op.moveLinkerFocus(o[0])),1!=o.length||"verticalLane"!=o[0].name&&"horizontalLane"!=o[0].name||(r=Designer.op.showLaneInsertLine(o[0]))});var f=!1;$(document).on("touchend.create",function(e){e=e.originalEvent.changedTouches[0];var p=$("#designer_layout").offset();if(e.pageX>p.left&&e.pageY>p.top&&(f=!0),$(this).unbind("touchend.create"),$("#designer").unbind("touchmove.creating"),$("#creating_shape_container").hide(),Designer.op.hideLinkPoint(),Designer.op.hideSnapLine(),Designer.op.hideLaneInsertLine(),$(document).off("touchend.create").off("touchmove.create"),null!=o)if(0!=f&&Designer.events.push("testVip","flowShapeNum")){MessageSource.beginBatch(),n&&(o[0]=Utils.copy(n)),Utils.shapesToRound(o);for(var h=0;h<o.length;h++){var d=o[h];_=l[h];if(d.onCreated&&i.indexOf("myshape")<0){if(r){var c=d.onCreated(null,null,r);Designer.op.updateShapeByLaneInsert(r)}else c=d.onCreated();if(d.parent&&delete d.container,0==c)return _.remove(),void MessageSource.commit()}for(key in d)key.indexOf("_")>-1&&delete d[key],"boxPos"==key&&delete d[key],"pos"==key&&delete d[key];"linker"==d.name&&(d.props={zindex:d.props.zindex}),_.attr("class","shape_box"),Designer.events.push("created",d)}Model.addMulti(o),Utils.unselect(),Utils.selectShape(s),o.length;for(Utils.getShapeContext(o[0].id),l[0].position(),M=0;M<a.length;M++){var u=a[M],g=u.linker;if("line"==u.type){Utils.copy(g);var y=Utils.copy(g);if(y.id=Utils.newId(),1==u.anchors.length){var x=u.anchors[0],v=Utils.getPointAngle(o[0].id,x.x,x.y,7);g.to={id:o[0].id,x:x.x,y:x.y,angle:v},y.from={id:o[0].id,x:x.x,y:x.y,angle:v}}else if(2==u.anchors.length){var m,b,w=u.anchors[0],S=u.anchors[1];Utils.measureDistance(g.from,w)<Utils.measureDistance(g.from,S)?(m=w,b=S):(m=S,b=w);v=Utils.getPointAngle(o[0].id,m.x,m.y,7);g.to={id:o[0].id,x:m.x,y:m.y,angle:v},v=Utils.getPointAngle(o[0].id,b.x,b.y,7),y.from={id:o[0].id,x:b.x,y:b.y,angle:v}}u.anchors.length<=2&&(g=Designer.op.beautifyLinkerFocus(g,!0),y=Designer.op.beautifyLinkerFocus(y,!0),Designer.painter.renderLinker(g,!0),Model.update(g),Designer.painter.renderLinker(y,!0),y.props.zindex=Model.maxZIndex+1,Model.add(y),Designer.events.push("linkerCreated",y))}else{x=u.anchors[0],v=Utils.getPointAngle(o[0].id,x.x,x.y,7);"from"==u.type?g.from={id:o[0].id,x:x.x,y:x.y,angle:v}:g.to={id:o[0].id,x:x.x,y:x.y,angle:v},g=Designer.op.beautifyLinkerFocus(g,u.type),Designer.painter.renderLinker(g,u.type),Model.update(g)}}MessageSource.commit();o[0].props.w,o[0].props.h;var k=Utils.getControlBox(s);Designer.op.changeCanvas(k),Designer.events.push("resetBrokenLinker")}else for(var M=0;M<l.length;M++){var _;(_=l[M]).remove()}t.css({left:"0px",top:"0px"}),Designer.op.resetState()})}}})}function resetPosByMouse(e,t,i){var n={};return n.x=e.x+t.x-i.boxPos.w/2,n.y=e.y+t.y-i.boxPos.h/2,n}function getCreatingCanvas(e){var t=2*Designer.config.panelItemWidth,i=2*Designer.config.panelItemHeight,n=$("#creating_shape_canvas"),r=$("#creating_shape_container");if(0==n.length?(r=$("<div id='creating_shape_container'></div>").appendTo("#designer"),n=$("<canvas id='creating_shape_canvas' width='"+t+"' height='"+i+"'></canvas>").appendTo(r)):(n.removeAttr("style"),n.attr("width",t).attr("height",i)),Schema.shapes&&Schema.shapes[e]){var a=Schema.shapes[e].category;("ui"==a||"ui_input"==a||a.indexOf("ios_")>=0||a.indexOf("andriod_")>=0)&&(t=30,i=30,n.attr("width",t).attr("height",i),n.css("transform","scale(0.5)"))}if(r.css({left:"0px",top:$("#panel-tab").outerHeight(),width:$("#shape_panel").outerWidth(),height:$("#shape_panel").outerHeight()}),e.indexOf("myshape")>-1){var o=getMyshapeByName(e),s=Designer.config.panelItemWidth,l=Designer.config.panelItemHeight;n[0].getContext("2d").clearRect(0,0,s,l),Designer.painter.drawPanelItemByShape(n[0],o)}else if(e.startsWith("chart_")){var p=Schema.shapes[e];r.children().remove(),Designer.painter.drawChart(r[0],p,"creating"),(n=r.find("canvas")).attr({id:"creating_shape_canvas",width:100,height:100})}else Designer.painter.drawPanelItem(n[0],e,t,i);return n}function setCreatingCanvas(e,t){$("#creating_shape_container").show();var i=Utils.getRelativePos(t.pageX,t.pageY,$("#creating_shape_container"));i=Utils.toScale(i),e.css({left:i.x-Designer.config.panelItemWidth/2,top:i.y-Designer.config.panelItemHeight/2})}function createShape(e,t,i){if(e.indexOf("myshape")>-1){for(var n=getMyshapeByName(e).elements,r=Utils.copyArray(n),a=[],o={},s=0;s<r.length;s++){var l=r[s],p=Utils.newId();o[r[s].id]=p,l.group&&(o[l.group]=Utils.newId()),r[s].id=p}for(s=0;s<r.length;s++){var h=t-(l=r[s]).props.w/2,d=i-l.props.h/2,c=Model.createByShape(l,h,d);if("linker"==l.name&&(null!=l.from.id&&(c.from.id=o[l.from.id]),null!=l.to.id&&(c.to.id=o[l.to.id]),null!=l.textPos&&delete c.textPos),l.group&&(c.group=o[l.group]),l.children)for(var u=0;u<l.children.length;u++){var g=l.children[u];c.children[u]=o[g]}l.parent&&(c.parent=o[l.parent]),l.container&&(c.container=o[l.container]),Designer.painter.renderShape(c),a.push(c)}return a}if(e.indexOf("linker_shape_")>-1){(l=Schema.shapes[e].element).id=Utils.newId();h=t-l.props.w/2,d=i-l.props.h/2;return void 0===(c=Model.createByShape(l,h,d)).lineStyle.lineWidth&&(c.lineStyle.lineWidth=Designer.defaults.lineWidth),Designer.painter.renderShape(c),[c]}h=t-(l=Schema.shapes[e]).props.w/2,d=i-l.props.h/2;return null!=(c=Model.create(e,h,d)).lineStyle&&($.isEmptyObject(c.lineStyle)||!$.isEmptyObject(c.lineStyle)&&void 0===c.lineStyle.lineWidth)&&(c.lineStyle.lineWidth=Designer.defaults.lineWidth),Designer.painter.renderShape(c),[c]}function getMyshapeByName(e){for(var t=null,i=0;i<Schema.myShapes.length;i++)if(Schema.myShapes[i].name==e){t=Schema.myShapes[i];break}return t}function addMyshape(e,t,i){if(Designer.events.push("testVip","myShape")){if(Schema.myShapes.length>=60)return void $.toast({text:"最多支持60个图形",type:"warning"})}else if(Schema.myShapes.length>=9)return void Designer.events.push("vipLimit","myShape");var n=Utils.newId(),r={id:n,name:"myshape_"+n,category:"myshape",title:"custom shape",boxPos:t,elements:e},a=Utils.copy(r);a=JSON.stringify(a,function(e,t){return"function"==typeof t?t+"":t}),appendPanelItem(r,null,!0),Schema.myShapes.unshift(r),Schema.myShapes.length>0&&$("#myshapes").css("display","none"),$("#myshapes .content .panel-empty-box").remove();for(var o="",s=0;s<16;s++)o+="<div class='panel-myshape-empty-box'></div>";$("#panel_myshape").append(o),initPanelShapes(),Server.addMyshapes(a,function(e){"function"==typeof i&&i(),Schema.myShapes.length>0&&$("#myshapes .my_content").css("display","none")})}$("#shape_panel .content").append(panelEmptyBox),"undefined"==typeof isView&&renderMyshape(1),indexs>300&&$.toast({type:"warning",text:"当前加载的图形过多，可能会造成页面卡顿，请取消勾选不需要的图形",delay:9e3}),initPanelShapes(),$(".layout_bar").off("mousedown.resize").on("mousedown.resize",function(e){var t=e.target.className;if(t.includes("left")){var i=$(".po-flow-layout"),n=i.width(),r=e.pageX,a=$("#panel-tab"),o=$("#history-container"),s=$(".po-flow-layout .panel_title"),l=$("#designer_viewport"),p=($("#panel_basic").width(),$("#panel-tab"),$(".bottom_temp_wrap")),h=$("#shape_panel .panel_container");$(document).on("mousemove.panelresize",function(e){var t=e.pageX-r;if(Math.abs(t)>2){var d=n+0+t;if(d<60||d>650)return;i.width(d-0),a.width(d-0-36),s.width(d-0-40),l.css("margin-left",d+1+"px"),p.css("left",d+5+"px"),o.length>0&&o.width(d),h.width(d-12)}})}else if(t.includes("right")){var d=$("#po-flow-dock-layout"),c=$(".po-designer-foot.shrink"),u=$(".bottom_temp_wrap"),g=d.width(),y=e.pageX;$(document).on("mousemove.panelresize",function(e){var t=e.pageX,i=y-t;if(Math.abs(i)>2){var n=g+0+i;if(n<240||n>400)return;d.width(n-0),c.css("right",n+"px"),u.css("right",n-130+"px");var r=$("#po-chartdata-container>table"),a=r.find("colgroup>col").length,o=parseFloat((n-32)/a);o<54&&(o=54),o>72&&a>4&&(o=72),r.css("width",n+"px"),r.find("colgroup>col").attr("width",o+"px")}})}$(document).on("mouseup.panelresize",function(e){$(document).off("mousemove.panelresize"),$(document).off("mouseup.panelresize")})}),$(".layout_bar").off("mouseover").on("mouseover",function(e){var t=$(this).children(".layout_bar_line");window.dragLineTimer&&(clearTimeout(window.dragLineTimer),window.dragLineTimer=null),window.dragLineTimer=setTimeout(function(){t.fadeIn(300)},300)}).on("mouseout",function(e){window.dragLineTimer&&(clearTimeout(window.dragLineTimer),window.dragLineTimer=null),$(this).children(".layout_bar_line").fadeOut(300)}),$("#panel-search").searchInput({search:function(e){var t=e.toLowerCase();if(""!=t.trim()){for(var i in Schema.shapes)i.indexOf("image_search_")>=0&&delete Schema.shapes[i];for(var i in SchemaGroup.groups)i.indexOf("image_search_")>=0&&delete SchemaGroup.groups[i];var n=!1;for(var i in Schema.shapes){var r=Schema.shapes[i];if(r.title&&r.title.toLowerCase().indexOf(t)>=0&&r.attribute.visible&&"standard"!=r.category){n=!0;var a=Utils.copy(r);a.category="system",appendPanelItem(a)}}for(var o="",s=0;s<16;s++)o+="<div class='panel-empty-box'></div>";n&&($("#panel_system_box").css("display","block"),$("#panel_system_box .panel-empty-box").remove(),$("#panel_system").append(o)),$("#panel_search_box").css("display","block");var l=1;!function e(){$(".search-panel-loading").remove(),$("#panel_search").append("<div class='search-panel-loading'>加载中...</div>"),$(".search-panel-btn").remove(),$("#panel_search_box .panel-empty-box").remove(),1==l&&$("#panel_search_box .panel_box").remove();var i=Schema.shapes.standardImage,n=["5eed8a83e4b0b8982239fcab","5f576558e4b0c94f9b1b76a7","64ed8c59e4b0bf419b63e6e2"],r=n[Math.round((n.length-1)*Math.random())];$.getJSON("https://iconsapi.com/api/search?appkey="+r+"&query="+t+"&page="+l+"&size=25",function(t){if((t=t.pages)&&0!=t.elementsCount){$(".search-panel-loading").remove(),1==l&&($("#panel_search .panel_box").each(function(e,t){$(t).attr("shapename").indexOf("image_search_")>-1&&$(t).remove()}),$("#panel_search .search-panel-btn").remove());for(var n=t.elements,r=0;r<n.length;r++){var a=n[r],s="image_search_"+Utils.newId(),p=a.iconName,h=a.url,d=Utils.copy(i);d.props={w:100,h:100},d.fillStyle={type:"image",fileId:h,display:"stretch",imageW:100,imageH:100},d.attribute.visible=!0,d.name="image_search_"+Utils.newId(),d.category="search",d.title=p+"<br/>100x100",d.groupName=s,Schema.shapes[d.name]=d,SchemaGroup.addGroupShape(s,d.name),appendPanelItem(d)}$("#panel_search").append(o),++l<t.elementsCount&&$("<div class='search-panel-btn'>加载更多</div>").appendTo("#panel_search").bind("click",function(){e()}),initPanelShapes()}else $(".search-panel-loading").text("未搜索到图形")})}()}},empty:function(){$("#panel_system_box").css("display","none"),$("#panel_search_box").css("display","none")}}),$(".panel_myshape_container").off("mouseup.myshapes").on("mouseup.myshapes",function(){if("dragging"==Designer.op.state){var e=Utils.getSelectedIds();if(e.length>50)$.toast({type:"error",text:"图形过多，添加失败"});else{var t=Utils.getControlBox(e);if(e.length>0){for(var i=[],n=0,r=e.length;n<r;n++){var a=e[n],o=Utils.copy(Model.getShapeById(a));if(i.push(o),o.children)for(var s=0;s<o.children.length;s++)if(e.indexOf(o.children[s])<0){var l=Utils.copy(Model.getShapeById(o.children[s]));i.push(l)}}var p=Utils.copyArray(Utils.getContainedShapes(i)),h=[];i=i.concat(p);for(n=0;n<p.length;n++)h.push(p[n].id);var d=Model.define.elements;for(key in d)if("linker"==d[key].name){var c=Utils.copy(d[key]);h.indexOf(c.to.id)>-1&&h.indexOf(c.from.id)>-1&&i.push(c)}i.sort(function(e,t){return e.props.zindex-t.props.zindex});for(n=0;n<i.length;n++){var u=i[n];if("linker"==u.name){if(u.from=k(u.from),u.to=k(u.to),"broken"==u.linkerType||"curve"==u.linkerType)for(s=0;s<u.points.length;s++)u.points[s]=k(u.points[s]);var g=u.to,y=u.from,f=u.points,x=g.x,v=g.y,m=y.x,b=y.y;g.x<y.x?(x=g.x,m=y.x):(x=y.x,m=g.x),g.y<y.y?(v=g.y,b=y.y):(v=y.y,b=g.y);for(s=0;s<f.length;s++){var w=f[s];w.x<x?x=w.x:w.x>m&&(m=w.x),w.y<v?v=w.y:w.y>b&&(b=w.y)}var S={x:x,y:v,w:m-x,h:b-v};u.props=$.extend(u.props,S)}else u.props.x=u.props.x-t.x,u.props.y=u.props.y-t.y;u.boxPos=t}function k(e){return e.x=e.x-t.x,e.y=e.y-t.y,e}Schema.myShapes.length>0&&$("#myshapes .my_content").css("display","none"),addMyshape(i,t)}}}}),$(document).off("mousemove.myshape").on("mousemove.myshape",function(e){var t=$(e.target).parents(".panel_myshape_container");if("dragging"==Designer.op.state&&t.length>0){if(0==$("#add_myshape_box").length){t.css("cursor","url("+staticBasePath+"/assets/images/designer/add.svg) 0 0, pointer");var i=$("#panel_myshape").width(),n=$("#panel_myshape").height(),r=$(".team_panel_tab").height()||0;Schema.myShapes.length>0&&(n-=80,$("#panel_myshape").prepend('<div id="add_myshape_box" style="width:'+(i+2)+"px;height:"+(n+80)+"px; top:"+(r+78)+'px;"></div>'))}}else t.css("cursor","auto"),$("#add_myshape_box").remove()}),$("#edit-myshapes-icon").on("click",function(e){e.stopPropagation(),UI.editMyshape&&(UI.editMyshape.init(),$("#myshape-dialog").dialog({onClose:function(){renderMyshape(1)}}))}),$("#import_myshape").off("click").on("click",function(e){e.stopPropagation(),$("#import_myshape_input").trigger("click"),$("#import_myshape_input").off("change").on("change",function(e){var t=this.files[0].type,i=this.files[0].size/1204;if(""!=$.trim($(this).val()))if(t.indexOf("image")<0)$.toast({type:"error",text:"该文件格式不支持"});else if(i>200)$.toast({type:"error",text:"该文件超出200KB，暂不支持"});else{var n=new FormData($("#frm_import_myshape")[0]);poAjax({contentType:!1,processData:!1,data:n,success:function(e){$("#import_myshape_input").val(""),Util.getImgsizeByUrl(e.url,function(t){var i=Utils.copy(Schema.shapes.standardImage);i.fillStyle={display:"stretch",fileId:e.url,imageH:t.width||100,imageW:t.height||100,type:"image"},i.props.w=t.width||100,i.props.h=t.height||100,addMyshape([i],{x:0,y:0,w:i.props.w,h:i.props.h},function(){$("#myshape-dialog").dialog("close")})})},error:function(e){"803"==e.code?$.toast({type:"error",text:"该文件格式不支持"}):e.code}},"uploadImageForm")}})})},initPage:function(e){Designer.events.push("onInitPages"),0!=PageModel.list.length&&PoPagination($("#page_box"),PageModel.list,{pageId:Model.pageId,isView:"undefined"!=typeof isView||Designer.readonly,initType:e,maxPageNum:10,on:{select:function(e){$("#po-global-loading-wrap").css("backgroundColor","rgba(255,255,255,0.3)").show().find(".po-loadingTop p").hide(),injectExtraAsynCall("onDefById",{defId:e,chartId:chartId},function(t){Designer.renderPage(e,t.def)})},add:function(){PageModel.list.length>=Designer.events.push("testVip","canvasNum")?Designer.events.push("vipLimit","canvasNum"):PageModel.addPage()},copy:function(e){PageModel.list.length>=Designer.events.push("testVip","canvasNum")?Designer.events.push("vipLimit","canvasNum"):PageModel.copyPage({pageId:e,def:Model.pageId==e?JSON.stringify(Model.define):null})},delete:function(e){PageModel.delPage({id:e})},rename:function(e,t){PageModel.renamePage({id:e,title:t})},sort:function(e,t){PageModel.sortPage(e,t)},setMain:function(e){PageModel.setMainPage(e)}}})}},hotkey:{init:function(){var e=null;if($(window).unbind("keydown.hotkey").bind("keydown.hotkey",function(t){if((t.ctrlKey||t.metaKey)&&83==t.keyCode)t.preventDefault(),UI.save();else if((t.ctrlKey||t.metaKey)&&65==t.keyCode)Designer.selectAll(),t.preventDefault();else if(46==t.keyCode||8==t.keyCode)Designer.op.removeShape(),$(".shape_dashboard.menu").hide(),t.preventDefault();else if((t.ctrlKey||t.metaKey)&&90==t.keyCode)MessageSource.undo(),t.preventDefault();else if((t.ctrlKey||t.metaKey)&&89==t.keyCode)MessageSource.redo(),t.preventDefault();else if(!t.ctrlKey&&!t.metaKey||t.shiftKey||67!=t.keyCode)if((t.ctrlKey||t.metaKey)&&88==t.keyCode)clipboard.cut(null,Utils,Designer,publicCLB);else if((t.ctrlKey||t.metaKey)&&86==t.keyCode)clipboard.paste({Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI,memberObj:memberObj,insert:insert,$:$});else if((t.ctrlKey||t.metaKey)&&68==t.keyCode)t.preventDefault(),clipboard.duplicate({Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI,memberObj:memberObj,insert:insert,$:$});else if(!t.ctrlKey&&!t.metaKey||!t.shiftKey||66!=t.keyCode&&67!=t.keyCode)if(t.altKey&&76==t.keyCode)Designer.alignShapes("left"),t.preventDefault();else if(t.altKey&&82==t.keyCode)Designer.alignShapes("right"),t.preventDefault();else if(t.altKey&&67==t.keyCode)Designer.alignShapes("center"),t.preventDefault();else if(!(t.altKey||t.metaKey||t.ctrlKey)||187!=t.keyCode&&107!=t.keyCode)if(!(t.altKey||t.metaKey||t.ctrlKey)||189!=t.keyCode&&109!=t.keyCode)if(t.keyCode>=37&&t.keyCode<=40){if($("#po-chartdata-container table td.current").length>0)return;if(null==e||Utils.getSelected().length>0){if("dragging"==Designer.op.state)return void t.preventDefault();var i=Utils.getSelected(),n=Utils.getFamilyShapes(i);i=i.concat(n);var r=Utils.getContainedShapes(i);i=i.concat(r);var a=Utils.getAttachedShapes(i);i=i.concat(a);var o=Utils.getCollapsedShapes(i);i=i.concat(o);var s=Utils.getOutlinkers(i);e=i.concat(s)}if(e.length>0){t.preventDefault();var l=10;(t.ctrlKey||t.shiftKey)&&(l=1),Utils.hideLinkerCursor(),UI.hideShapeOptions(),37==t.keyCode?Designer.op.moveShape(e,{x:-l,y:0}):38==t.keyCode?(Designer.op.moveShape(e,{x:0,y:-l}),t.preventDefault()):39==t.keyCode?Designer.op.moveShape(e,{x:l,y:0}):40==t.keyCode&&(Designer.op.moveShape(e,{x:0,y:l}),t.preventDefault()),$(document).unbind("keyup.moveshape").bind("keyup.moveshape",function(){Utils.shapesToRound(e),Model.updateMulti(e),Designer.events.push("changeLinkers",e);var t=Utils.getShapesBounding(e);Designer.op.changeCanvas(t),e=null,$(document).unbind("keyup.moveshape"),Designer.op.hideTip(),Utils.showLinkerCursor(),UI.showShapeOptions()})}var p=Utils.getSelectedCharts().length;1==Utils.getSelectedShapeIds().length&&1==p&&UI.renderSubMenuPos({top:23})}else if((t.ctrlKey||t.metaKey)&&221==t.keyCode){t.preventDefault();var h="front";t.shiftKey&&(h="forward"),Designer.layerShapes(h)}else if((t.ctrlKey||t.metaKey)&&219==t.keyCode){t.preventDefault();h="back";t.shiftKey&&(h="backward"),Designer.layerShapes(h)}else if((t.ctrlKey||t.metaKey)&&71==t.keyCode)t.preventDefault(),t.shiftKey?Designer.ungroup():Designer.group();else if((t.ctrlKey||t.metaKey)&&76==t.keyCode)t.preventDefault(),t.shiftKey?Designer.unlockShapes():Designer.lockShapes();else if(18==t.keyCode&&t.ctrlKey);else if(18==t.keyCode);else if(27==t.keyCode)Designer.op.state?"creating_free_text"!=Designer.op.state&&"creating_free_linker"!=Designer.op.state||Designer.op.resetState():(Utils.unselect(),$(".options_menu").hide(),$(".color_picker").hide());else if(84!=t.keyCode||t.ctrlKey||t.metaKey)if(73==t.keyCode&&!(t.ctrlKey||t.metaKey||t.shiftKey)||73==t.keyCode&&(t.ctrlKey||t.metaKey)&&t.shiftKey)t.preventDefault(),$(".options_menu").hide(),$(".color_picker").hide(),insert.image.init(function(e,t){UI.insertImage(e,t.width,t.height)}),$("#designer-contextmenu").hide();else if(76!=t.keyCode||t.ctrlKey||t.metaKey)if(66==t.keyCode&&(t.ctrlKey||t.metaKey)){if((g=Utils.getSelectedIds()).length>0){var d=Model.getShapeById(g[0]),c=Utils.getShapeFontStyle(d.fontStyle);Designer.setFontStyle({bold:!c.bold}),UI.update()}t.preventDefault()}else if(73==t.keyCode&&(t.ctrlKey||t.metaKey)){if((g=Utils.getSelectedIds()).length>0){d=Model.getShapeById(g[0]),c=Utils.getShapeFontStyle(d.fontStyle);Designer.setFontStyle({italic:!d.fontStyle.italic}),UI.update()}t.preventDefault()}else if(85==t.keyCode&&(t.ctrlKey||t.metaKey)){if((g=Utils.getSelectedIds()).length>0){d=Model.getShapeById(g[0]),c=Utils.getShapeFontStyle(d.fontStyle);Designer.setFontStyle({underline:!c.underline}),UI.update()}t.preventDefault()}else if(32!=t.keyCode||t.ctrlKey||t.metaKey)if(121==t.keyCode)t.preventDefault(),Dock.enterPresentation();else{if(91==t.keyCode)return Designer.op.isMetaKey=!0,t.preventDefault(),!1;if(68==t.keyCode);else if(!t.ctrlKey&&!t.metaKey||70!=t.keyCode||t.ctrlKey&&t.metaKey){if((t.ctrlKey||t.metaKey)&&80==t.keyCode)t.preventDefault(),UI.print.init();else if((t.ctrlKey||t.metaKey)&&75==t.keyCode)t.preventDefault(),UI.showInsertLink();else if(73==t.keyCode&&t.shiftKey)if(!Dock.isOpen||"shape"!=Dock.openView&&"page"!=Dock.openView){var u=Utils.getSelectedIds().length>0?"shape":"page";Dock.show(u),Dock.update()}else Dock.hide();else if(t.ctrlKey&&69==t.keyCode){if((g=Utils.getSelectedIds()).length>0)(d=Model.getShapeById(g[0])).name.startsWith("chart_")||"standardImage"===d.name||Designer.op.equation.insertLastEquation(d);t.preventDefault()}}else t.preventDefault(),UI.showSearchReplace()}else{var g;if(1==(g=Utils.getSelectedIds()).length){var d=Model.getShapeById(g[0]),y=Utils.gridSelectObj;y.id==d.id?Designer.op.editShapeText(d,!1,y.indexs[0]):Designer.op.editShapeText(d)}else Designer.op.changeState("drag_canvas");t.preventDefault()}else $(".options_menu").hide(),$(".color_picker").hide(),Designer.op.changeState("creating_free_linker");else $(".options_menu").hide(),$(".color_picker").hide(),Designer.op.changeState("creating_free_text");else Designer.zoomOut("center"),t.preventDefault();else Designer.zoomIn("center"),t.preventDefault();else Designer.clipboard.brush(),t.preventDefault();else clipboard.copy(null,Utils,publicCLB)}),$(document).off("keydown.hotkey","input,textarea,select,div[contenteditable]").on("keydown.hotkey","input,textarea,select,div[contenteditable]",function(e){(e.ctrlKey||e.metaKey)&&70==e.keyCode&&e.preventDefault(),e.stopPropagation()}),$(".header, .po-toolbar, .po-extend-toolbar, .po-flow-layout, .po-flow-dock-layout, .po-designer-foot, .po-flow-menu-container, .po-dialog").off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){(e.ctrlKey||e.metaKey)&&e.preventDefault()}),$(window).unbind("keyup.hotkey").bind("keyup.hotkey",function(e){if(91==e.keyCode)return e.preventDefault(),Designer.op.isMetaKey=!1,!1}),$("#designer_layout").off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail,i=Math.max(-1,Math.min(1,t));if(e.ctrlKey||e.metaKey){e.preventDefault();var n={x:e.originalEvent.pageX,y:e.originalEvent.pageY};if($("#shape_text_edit").length&&$("#shape_text_edit").trigger("blur"),null!=Designer.op.state)return;i<0?Designer.zoomOut(n):Designer.zoomIn(n)}clipboard.diagramDis.reset()}),navigator.userAgent.indexOf("Mac OS")>0){if(void 0!==this.isAddGesture&&this.isAddGesture)return;this.isAddGesture=!0;var t=0,i=!1,n={};function r(e){if(!i){var r,a=Math.round(100*e.scale);if(r=a-t,Math.abs(r)>=10){if(i=!0,r<0){var o=100*Designer.config.scale;(l=o-=10)<50&&(l=o=50);var s=l/100;Designer.setZoomScale(s,n)}else if(r>0){var l;o=100*Designer.config.scale;(l=o+=10)>200&&(l=o=200);s=l/100;Designer.setZoomScale(s,n)}setTimeout(function(){i=!1,t=a},10)}e.preventDefault()}}function a(e){e.preventDefault(),$("#shape_text_edit").trigger("keyup"),document.removeEventListener("gesturechange",r,!1),document.removeEventListener("gestureend",a,!1)}$("#designer").length>0&&$("#designer")[0].addEventListener("gesturestart",function(e){n={x:e.pageX,y:e.pageY},t=Math.round(100*e.scale),i=!1,0,e.preventDefault(),document.addEventListener("gesturechange",r,!1),document.addEventListener("gestureend",a,!1)},!1)}},cancel:function(){$(window).unbind("keydown.hotkey")}},contextMenu:{init:function(){$("#designer-contextmenu").unbind("mousedown").bind("mousedown",function(e){e.stopPropagation()}),$("#designer-contextmenu").find("li:not(.devider)").unbind("mousedown").bind("mousedown",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var i,n,r,a,o,s,l,p,h,d,c,u,g,y,f;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),0===t.button){e.next=4;break}return e.abrupt("return");case 4:if(i=$(this),n=i.attr("ac"),!(r=document.getElementById("shape_text_edit")||document.getElementById("linker_text_edit"))){e.next=41;break}a=r.tagName,e.t0=n,e.next="cut_edit"===e.t0?12:"copy_edit"===e.t0?14:"paste_edit"===e.t0?16:"selectall_edit"===e.t0?37:39;break;case 12:return"DIV"==a?window.getSelection&&(o=window.getSelection(),document.execCommand("Copy"),o.rangeCount>0&&(s=o.getRangeAt(0)).deleteContents()):"TEXTAREA"==a&&(l=r.value,p=r.selectionStart,h=r.selectionEnd,d=l.substring(p,h),r.value=l.substring(0,p)+l.substring(h),r.selectionEnd=p,defClipboard.writeText(d)),e.abrupt("break",40);case 14:return"DIV"==a?document.execCommand("Copy"):"TEXTAREA"==a&&(l=r.value,p=r.selectionStart,h=r.selectionEnd,d=l.substring(p,h),defClipboard.writeText(d)),e.abrupt("break",40);case 16:if("DIV"!=a){e.next=25;break}return e.next=19,clipboard.get(t.originalEvent);case 19:c=e.sent,u=c.content,g=c.type,"string"==typeof u&&(0,_utils.pasteString)(u,"html"==g),e.next=36;break;case 25:if("TEXTAREA"!=a){e.next=36;break}return l=r.value,p=r.selectionStart,h=r.selectionEnd,e.next=31,defClipboard.readText(t.originalEvent);case 31:y=e.sent,r.value=l.substring(0,p)+y+l.substring(h),f=p+y.length,r.selectionStart=f,r.selectionEnd=f;case 36:return e.abrupt("break",40);case 37:return"DIV"==a?((s=document.createRange()).selectNodeContents(r),(o=window.getSelection()).removeAllRanges(),o.addRange(s)):"TEXTAREA"==a&&r.select(),e.abrupt("break",40);case 39:return e.abrupt("break",40);case 40:Designer.contextMenu.hide();case 41:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),$("#designer-contextmenu").find("li:not(.devider)").unbind("click").bind("click",function(e){var t=$(this);t.menuitem("isDisabled")||0!=t.children(".extend_menu").length||(Designer.contextMenu.execAction(t),Designer.contextMenu.hide())}),$("#canvas_container").unbind("contextmenu").bind("contextmenu",function(e){if(e.preventDefault(),!e.ctrlKey){var t=$("#designer_canvas"),i=Utils.getRelativePos(e.pageX,e.pageY,t);Designer.contextMenu.show(i.x,i.y),Designer.events.push("useBrush","unbrush")}}),Util.isMac()&&$("#designer-contextmenu").find(".po-menu-hotkey").each(function(e,t){$(t).html($(t).html().replace(/Ctrl/,"<span class='po-diagraming-icons' style='font-size: 12px'>&#xe795;</span>"))})},destroy:function(){$("#canvas_container").unbind("contextmenu"),this.hide()},menuPos:{x:0,y:0,shape:null},show:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,i){var n,r,a,o,s,l,p,h,d,c,u,g,y,f,x,v;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.menuPos.x=t,this.menuPos.y=i,n=$("#designer-contextmenu"),r=Utils.getShapeByPosition(t,i,!1),n.children().hide(),n.children("li[ac=selectall]").show(),n.children(".devi-selectall").show(),n.children("li[ac=drawline]").show(),n.children("li[ac=insertimg]").show(),n.children("li[ac=zoomin]").show(),n.children("li[ac=zoomout]").show(),n.children("li[ac=zoomreset]").show(),n.children(".devi-zoom").show(),n.children("li[ac=insertTemplate]").show(),e.next=16,clipboard.get();case 16:a=e.sent,o=a.content,null==r?null!=o&&(n.children("li[ac=paste]").show(),n.children(".devi-clip").show()):(s=r.shape,this.menuPos.shape=s,n.children("li[ac=drawline]").hide(),n.children("li[ac=insertimg]").hide(),n.children("li[ac=zoomin]").hide(),n.children("li[ac=zoomout]").hide(),n.children("li[ac=zoomreset]").hide(),n.children(".devi-zoom").hide(),n.children(".devi-selectall").hide(),s.locked?(null!=o&&(n.children("li[ac=paste]").show(),n.children(".devi-clip").show()),n.children("li[ac=unlock]").show(),n.children(".devi-group").show()):$("#shape_text_edit").length>0||$("#linker_text_edit").length>0?(Utils.popEditor.close(),n.children("li[ac=cut_edit]").show(),n.children("li[ac=copy_edit]").show(),n.children("li[ac=paste_edit]").show(),n.children("li[ac=selectall_edit]").show(),n.children("li[ac=selectall]").hide(),n.children("li[ac=download_part]").hide(),n.children("li[ac=cut_edit]").menuitem("enable"),n.children("li[ac=copy_edit]").menuitem("enable"),$("#shape_text_edit").length>0?window.getSelection&&(l=window.getSelection()).rangeCount>0&&l.getRangeAt(0).collapsed&&(n.children("li[ac=cut_edit]").menuitem("disable"),n.children("li[ac=copy_edit]").menuitem("disable")):$("#linker_text_edit").length>0&&void 0!==(p=document.getElementById("linker_text_edit")).selectionStart&&p.selectionStart===p.selectionEnd&&(n.children("li[ac=cut_edit]").menuitem("disable"),n.children("li[ac=copy_edit]").menuitem("disable"))):(n.children("li[ac=cut]").show(),n.children("li[ac=copy]").show(),n.children("li[ac=duplicate]").show(),n.children("li[ac=replace]").show(),null!=o&&n.children("li[ac=paste]").show(),n.children(".devi-clip").show(),n.children("li[ac=front]").show(),n.children("li[ac=back]").show(),n.children("li[ac=forward]").show(),n.children("li[ac=backward]").show(),n.children(".devi-index").show(),n.children("li[ac=lock]").show(),n.children(".devi-group").show(),n.children("li[ac=addmyshape]").show(),n.children(".devi-shape").show(),"linker"==s.name&&n.children("li[ac=resetLinker]").show(),Designer.events.push("downloadPartShow"),h=Utils.getSelectedIds(),d=h.length,c=Utils.getSelectedLanes().length,d>=2&&(n.children("li[ac=group]").show(),c<=1&&n.children("li[ac=arrange]").show(),c<=0&&n.children("li[ac=match]").show()),1==d?(n.children("li[ac=defaultStyle]").show(),null==Model.define.defaultStyle&&null==Model.define.defaultLinkerStyle?$("#clear-default-style").hide():$("#clear-default-style").show(),"linker"!=s.name?(n.children(".devi-shape-insert").show(),s.link?n.children("li[ac=link]").find(".text").html("修改链接"):n.children("li[ac=link]").find(".text").html("插入链接"),n.children("li[ac=link]").show()):(n.children(".devi-clip").hide(),n.children(".devi-shape-insert").hide()),"linker"==s.name||"standardImage"==s.name||s.name.startsWith("chart_")||n.children("li[ac=equation]").show(),"standardImage"!=s.name&&"linker"!=s.name||n.children("li[ac=replace]").hide(),"linker"==s.name&&(u="",g="",s.to.id&&(u=Model.getShapeById(s.to.id)),s.from.id&&(g=Model.getShapeById(s.from.id)),(u&&"uml_class"==u.category&&u.attribute.linkable||g&&"uml_class"==g.category&&g.attribute.linkable)&&(Utils.isMultiplicity(s)||n.children("li[ac=multiplicity]").show(),n.children("li[ac=linkerType]").show())),n.children(".devi-shape-insert").show()):n.children("li[ac=defaultStyle]").hide(),Utils.getSelectedGroups().length>=1&&n.children("li[ac=ungroup]").show(),n.children(".devi_shape").show(),("linker"==s.name||s.textBlock&&s.textBlock.length>0)&&n.children("li[ac=edit]").show(),n.children("li[ac=delete]").show(),n.children(".devi_del").show())),y=$("#designer_canvas").position(),f=t.toScale()+n.outerWidth()-($("#designer_layout").width()-y.left),t=f>0?t-(f+10).restoreScale():t,x=i.toScale()+n.outerHeight()-($("#designer_layout").height()-y.top),i=x>0?i-(x+10).restoreScale():i,n.css({display:"block","z-index":Model.maxZIndex+7,left:t,top:i,transform:"scale("+1..restoreScale()+")",transformOrigin:"left top"}),$("#linker_text_edit").length>0&&n.css("z-index",parseInt($("#linker_text_edit").css("z-index"))+1),(v=n.find(".extend-menu")).css("left",v.parents(".po-menu").outerWidth()),$(document).bind("mousedown.ctxmenu",function(){Designer.contextMenu.hide()});case 29:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),hide:function(){$("#designer-contextmenu").hide(),$(document).unbind("mousedown.ctxmenu")},execAction:function(e){var t=e.attr("ac");if("cut"==t)clipboard.cut(null,Utils,Designer,publicCLB);else if("copy"==t)clipboard.copy(null,Utils,publicCLB);else if("paste"==t)clipboard.paste({x:this.menuPos.x,y:this.menuPos.y,Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI});else if("duplicate"==t)clipboard.duplicate({Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI,memberObj:memberObj,insert:insert,$:$});else if("front"==t)Designer.layerShapes("front");else if("back"==t)Designer.layerShapes("back");else if("forward"==t)Designer.layerShapes("forward");else if("backward"==t)Designer.layerShapes("backward");else if("lock"==t)Designer.lockShapes();else if("unlock"==t)Designer.unlockShapes();else if("group"==t)Designer.group();else if("ungroup"==t)Designer.ungroup();else if("w"==t)Designer.matchSize({w:"auto"});else if("h"==t)Designer.matchSize({h:"auto"});else if("wh"==t)Designer.matchSize({w:"auto",h:"auto"});else if("align"==t){var i=e.attr("al");Designer.alignShapes(i)}else if("dist"==t){var n=e.attr("dist");Designer.distributeShapes(n)}else if("edit"==t)Designer.op.editShapeText(this.menuPos.shape,this.menuPos);else if("delete"==t)Designer.op.removeShape();else if("selectall"==t)Designer.selectAll();else if("drawline"==t)Designer.op.changeState("creating_free_linker");else if("insertimg"==t)insert.image.init(function(e,t){UI.insertImage(e,t.width,t.height)});else if("link"==t)UI.showInsertLink();else if("replace"==t){var r=Utils.getSelectedIds();Designer.op.linkDashboard(r[0])}else if("defaultStyle"==t)Designer.events.push("setDefaultStyle",e);else if("equation"==t){var a=this.menuPos.shape;Designer.op.equation.insertLastEquation(a)}else if("zoomin"==t)Designer.zoomIn("center");else if("zoomout"==t)Designer.zoomOut("center");else if("zoomreset"==t)Designer.setZoomScale(1,"center");else if("download_part"==t)Designer.events.push("downloadPart");else if("insertTemplate"==t)window.DesignerInsertTemp&&DesignerInsertTemp.show();else if("multiplicity"==t)Designer.setLinkerMultiplicity(!0);else if("relation"==t){var o=e.attr("rel");Designer.setLinkerRelation(o)}else"resetLinker"==t&&Designer.resetLinker()}},init:function(e){this.initialize.initLayout(),this.initialize.initModel(),0==localRuntime&&this.initialize.initCanvas(),this.hotkey.init(),this.contextMenu.init(),Designer.op.init(),this.initialize.initialized=!0,Designer.events.push("initialized",e),$("#designer_layout").on("scroll",function(){$(document).trigger("mouseup.multiselect")})},op:{isdblclick:!1,init:function(){var e=$("#designer_canvas"),t=$("#canvas_container"),i=0,n=this;t.off("touchstart.operate").on("touchstart.operate",function(r){$("#shape_text_edit,#linker_text_edit,input").blur(),r.preventDefault();if(!(["rotating","resizing","creating_free_text"].indexOf(n.state)>-1)){var a=r.originalEvent.touches;r=a[0];if(2==a.length)return Utils.unselect(),$(document).trigger("touchend"),void Designer.op.canvasDraggable(a);(new Date).getTime()-i<300?(i=0,Designer.op.isdblclick=!0):(i=(new Date).getTime(),Designer.op.isdblclick=!1);var o=Utils.getRelativePos(r.pageX,r.pageY,e),s=Utils.getShapeByPosition(o.x,o.y),l=$(r.target);if(null==s||l.hasClass("shape_create_linker"))l.hasClass("shape_create_linker")?Designer.op.shapeLinkable("shape",r):"creating_linker"==Designer.op.state?Designer.op.shapeLinkable("free",r):(Utils.unselect(),Designer.op.canvasDraggable(a),Designer.op.shapeMultiSelectable());else if("dataAttribute"==s.type)Designer.op.linkClickable(s.attribute.value,o);else if("linker"==s.type){t.css("cursor","pointer"),Designer.op.shapeSelectable(s.shape);var p=s.shape,h=s.pointIndex;if("broken"==p.linkerType&&h>0&&h<=p.points.length+1&&(null!=p.from.id||null!=p.to.id)||h>1&&h<=p.points.length&&null==p.from.id&&null==p.to.id){var d=s.pointPos;Designer.op.brokenLinkerChangable(p,h-1,d,r)}else null==p.from.id&&null==p.to.id&&(t.css("cursor","move"),Designer.op.shapeDraggable(r));Designer.op.linkerEditable(s.shape,r)}else if("linker_point"==s.type)t.css("cursor","move"),Designer.op.shapeSelectable(s.shape),Designer.op.linkerDraggable(s.shape,s.point,r),Designer.op.linkerEditable(s.shape,r);else if("linker_text"==s.type){t.css("cursor","text"),Designer.op.shapeSelectable(s.shape);var c=s.textIndex;Designer.op.linkerEditable(s.shape,r,c)}else"shape"==s.type&&(s.shape.locked?(t.css("cursor","default"),Designer.op.shapeSelectable(s.shape)):(t.css("cursor","move"),Designer.op.shapeSelectable(s.shape),Designer.op.shapeEditable(s.shape,r),Designer.op.shapeDraggable(r),s.shape.link&&Designer.op.linkClickable(s.shape.link,o),"grid"==s.shape.category&&Designer.events.push("gridSelect",s.shape)))}})},cancel:function(){$("#canvas_container").unbind("mousemove.operate").css("cursor","default"),this.destroy()},destroy:function(){$("#designer_canvas").unbind("mousedown.drag").unbind("dblclick.edit").unbind("mousedown.draglinker").unbind("mousedown.select").unbind("mousedown.brokenLinker").unbind("dblclick.edit_linker"),$("#canvas_container").unbind("mousedown.link").unbind("mousedown.create_text").unbind("mousedown.drag_canvas"),$("#designer_layout").unbind("mousedown.multiselect"),$("#designer_layout").unbind("click.unbrush"),Utils.hideAnchors(),$("#link_spot").hide(),Utils.hideLinkerFocusPoint()},state:null,changeState:function(e){this.state=e,"creating_free_text"==e?(this.destroy(),$("#canvas_container").css("cursor","crosshair"),this.textCreatable()):"creating_free_linker"==e?(this.destroy(),$("#canvas_container").css("cursor","crosshair"),this.shapeLinkable()):"drag_canvas"==e?(this.destroy(),this.canvasDraggable()):"changing_curve"==e&&this.destroy()},resetState:function(){this.state=null,$("#canvas_container").css("cursor","default")},shapeUnselectId:"",shapeSelectable:function(e){Designer.op.changeState("seelcting_shapes");var t=e.id;Utils.selectIds.indexOf(t)<0&&(Utils.unselect(),Utils.selectShape(t))},isMetaKey:!1,shapeDraggable:function(e){var t=$("#designer_canvas"),i=$("#canvas_container"),n=!1;Utils.hideLinkerCursor(),Utils.hideLinkerControls(),Designer.op.changeState("dragging");var r=Utils.getSelected(),a=Utils.getRelativePos(e.pageX,e.pageY,t),o=!0;(1==r.length&&"linker"==r[0].name||1==r.length&&"linker"!=r[0].name&&r[0].props.angle)&&(o=!1);var s=null;o&&(s=Utils.getShapesBounding(r));var l=Utils.getFamilyShapes(r);r=r.concat(l);var p=Utils.getContainedShapes(r);r=r.concat(p);var h=Utils.getAttachedShapes(r);r=r.concat(h);var d=Utils.getCollapsedShapes(r);r=r.concat(d);var c=[],u=[];if(o){for(var g=0;g<r.length;g++){"linker"==(w=r[g]).name&&(w.from.id&&c.indexOf(w.from.id)<0&&c.push(w.from.id),w.to.id&&c.indexOf(w.to.id)<0&&c.push(w.to.id)),c.indexOf(w.id)<0&&c.push(w.id)}for(g=Model.orderList.length-1;g>=0;g--){var y=Model.orderList[g].id;if((!(w=Model.getShapeById(y)).attribute||!w.attribute.collapseBy)&&!("linker"==w.name||c.indexOf(y)>=0||w.parent)){var f=Utils.getControlBox([y]);f.id=y,u.push(f)}}}var x=r;if(0!=r.length){var v=Utils.getOutlinkers(r);r=r.concat(v);for(var m=[],b=0;b<r.length;b++){var w=r[b];m.push(w.id)}Model.define.page.width.toScale(),Model.define.page.height.toScale();Designer.op.initScrollPos();var S,k=e.pageX,M=e.pageY,_=0,D=0,U=Utils.copyArray(r),P=[],L=e.metaKey||e.ctrlKey;i.on("touchmove.drag",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(i){var l,p,h,d,g,y,f,v,b,w,U,I,C,B,T,z;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),i=i.originalEvent.touches[0],Designer.op.linkIconHide(),UI.hideShapeOptions(),$("#shape_controls").addClass("hide_shape_controller"),_=i.pageX-k,D=i.pageY-M,l=Utils.getRelativePos(i.pageX,i.pageY,t),p={x:l.x-a.x,y:l.y-a.y},!L||!(Math.abs(p.x)>1||Math.abs(p.y)>1)){e.next=22;break}if(0!=n||0!=Utils.gridSelectObj.indexs.length){e.next=22;break}if(n=!0,!0,(h=that.shapeUnselectId)&&((d=Utils.getSelectedIds()).push(h),Utils.unselect(),Utils.selectShape(d)),g=clipboard.getCopyData(null,Utils,publicCLB),Utils.getShapesBounding(r),e.t0=g,!e.t0){e.next=20;break}return e.next=20,clipboard.pasteDiagram({content:g,Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB});case 20:r=Utils.getSelected(),!1;case 22:if(y=null,o&&((f=Utils.copy(s)).x+=p.x,f.y+=p.y,v=Designer.op.snapLine(f,c,null,u),p={x:f.x-s.x,y:f.y-s.y},l={x:a.x+p.x,y:a.y+p.y},s.x+=p.x,s.y+=p.y,1==x.length&&"boundaryEvent"==x[0].groupName&&(v.attach?x[0].attachTo=v.attach.id:delete r[0].attachTo),v.container&&(y=v.container)),0!=p.x||0!=p.y){e.next=26;break}return e.abrupt("return");case 26:b=0;case 27:if(!(b<r.length)){e.next=41;break}if("linker"!=(w=r[b]).name){e.next=34;break}return 1==r.length?S=Designer.op.moveLinkerFocus(w):r.length>=2&&(U=Utils.getSelectedCharts().length,1==Utils.getSelectedShapeIds().length&&1==U&&UI.renderSubMenuPos({top:23})),e.abrupt("continue",38);case 34:if(!(w.container&&m.indexOf(w.container)>=0||w.parent)){e.next=36;break}return e.abrupt("continue",38);case 36:Utils.showAnchors(w),y?w.container=y.id:delete w.container;case 38:b++,e.next=27;break;case 41:if(Designer.op.moveShape(r,p),Utils.removeCreateLinker(),a=l,Designer.op.isScroll(i.pageX,i.pageY),Designer.events.push("changeLinkers",r),1==Utils.getSelected().length&&"linker"!=Utils.getSelected()[0].name)for(P=Utils.getShapeAnchorInLinker(Utils.getSelected()[0]),Designer.op.hideLinkPoint(),I=0;I<P.length;I++)for(C=P[I],B=0;B<C.anchors.length;B++)T=C.anchors[B],Designer.op.showLinkPoint(T);Utils.hideLinkerEndsPoint(),z=Utils.getSelectedShapeIds(),1==z.length&&w.name.startsWith("chart_")?UI.renderSubMenuPos({top:23}):w&&"linker"!==w.name&&$(".pop-sub-editor").hide();case 51:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),$(document).off("touchend.drop").on("touchend.drop",function(e){if($(document).unbind("touchend.drop"),0!=_||0!=D){var t=$(e.target);if(t.parents(".panel_myshape_container").length>0||"add_myshape_icon"==t.attr("id")||t.parents(".panel_team_container").length>0){for(var i=0;i<U.length;i++){var n=U[i];Model.define.elements[n.id]=n,Designer.painter.renderShape(n)}return Utils.removeCreateLinker(),void setTimeout(function(){Utils.selectShape(m)},0)}if(Utils.shapesToRound(r),S)Utils.shapesToRound([S]),Designer.painter.renderLinker(S),Model.updateMulti([S]);else if(P.length){MessageSource.beginBatch(),Model.updateMulti(r);for(i=0;i<P.length;i++){var a=P[i],o=a.linker;if("line"==a.type){Utils.copy(o);var s=Utils.copy(o);if(s.id=Utils.newId(),1==a.anchors.length){var l=a.anchors[0],p=Utils.getPointAngle(r[0].id,l.x,l.y,7);o.to={id:r[0].id,x:l.x,y:l.y,angle:p},s.from={id:r[0].id,x:l.x,y:l.y,angle:p}}else if(2==a.anchors.length){var h,d,c=a.anchors[0],u=a.anchors[1];Utils.measureDistance(o.from,c)<Utils.measureDistance(o.from,u)?(h=c,d=u):(h=u,d=c);p=Utils.getPointAngle(r[0].id,h.x,h.y,7);o.to={id:r[0].id,x:h.x,y:h.y,angle:p},p=Utils.getPointAngle(r[0].id,d.x,d.y,7),s.from={id:r[0].id,x:d.x,y:d.y,angle:p}}a.anchors.length<=2&&(o=Designer.op.beautifyLinkerFocus(o,!0),s=Designer.op.beautifyLinkerFocus(s,!0),Designer.painter.renderLinker(o,!0),Model.update(o),Designer.painter.renderLinker(s,!0),s.props.zindex=Model.maxZIndex+1,Model.add(s),Designer.events.push("linkerCreated",s))}else{l=a.anchors[0],p=Utils.getPointAngle(r[0].id,l.x,l.y,7);if(r[0].id&&r[0].name.startsWith("chart_")){var g=r[0].props;p=l.x==g.x+g.w?Math.PI:l.y==g.y?.5*Math.PI:l.y==g.y+g.h?1.5*Math.PI:0}"from"==a.type?o.from={id:r[0].id,x:l.x,y:l.y,angle:p}:o.to={id:r[0].id,x:l.x,y:l.y,angle:p},o=Designer.op.beautifyLinkerFocus(o,a.type),Designer.painter.renderLinker(o,a.type),Model.update(o)}}MessageSource.commit()}else{for(var y=0;y<r.length;y++){var f=r[y];"linker"==f.name&&"broken"==f.linkerType&&(f.points=Utils.margeLinker(f))}Model.updateMulti(r)}m=Utils.getSelectedIds();var x=Utils.getControlBox(m);Designer.op.changeCanvas(x)}}),$(document).on("touchend.drag",function(){Designer.op.isMetaKey=!1,n=!1,UI.showShapeOptions(),Designer.op.resetState(),i.off("touchmove.drag"),t.off("touchstart.drag"),$(document).off("touchend.drag"),Designer.op.hideTip(),Designer.op.hideSnapLine(),Utils.showLinkerCursor(),Utils.showLinkerControls(),Utils.showLinkerEndsPoint();var e=Utils.getSelected();1==e.length&&(Utils.removeAnchors(),Utils.showCreateLinkerMulti(e)),Designer.op.stopScroll(),Designer.op.hideLinkPoint(),Utils.isSelected(w.id)&&Utils.selectIds.length,$("#shape_controls").removeClass("hide_shape_controller"),Designer.events.push("changeLinkers",r)})}else t.unbind("touchstart.drag")},changeSpacing:function(e,t){var i=Utils.getSelectedIds(),n=Utils.getSelected();Utils.hideLinkerCursor();var r=$("#canvas_container"),a=$("#designer_canvas"),o=Utils.getControlBox(i),s=e.attr("resizeDir"),l={};function p(e,t){if(null==e.id)return t?{type:"box",x:(e.x-o.x)/o.w,y:(e.y-o.y)/o.h}:{type:"fixed"};if(Utils.isSelected(e.id)){var i=Model.getShapeById(e.id),n={x:i.props.x+i.props.w/2,y:i.props.y+i.props.h/2},r=Utils.getRotated(n,e,-i.props.angle);return{type:"shape",x:(r.x-i.props.x)/i.props.w,y:(r.y-i.props.y)/i.props.h}}return{type:"fixed"}}s.indexOf("l")>=0?l.x=o.x+o.w:s.indexOf("r")>=0?l.x=o.x:l.x=o.x+o.w/2,s.indexOf("t")>=0?l.y=o.y+o.h:s.indexOf("b")>=0?l.y=o.y:l.y=o.y+o.h/2;var h=[],d={},c=[],u=Utils.getAttachedShapes(n);n=n.concat(u);for(var g=[],y={w:20,h:20},f=0;f<n.length;f++){var x=n[f];if(g.push(x.id),x.parent&&g.push(x.parent),"linker"==x.name)-1==c.indexOf(x.id)&&c.push(x.id);else{h.push(x),x.props.w>y.w&&(y.w=x.props.w),x.props.h>y.h&&(y.h=x.props.h),x.attachTo&&!Utils.isSelected(x.id)?d[x.id]={type:"attached",x:(x.props.x+x.props.w/2-o.x)/o.w,y:(x.props.y+x.props.h/2-o.y)/o.h}:d[x.id]={x:(x.props.x-o.x)/o.w,y:(x.props.y-o.y)/o.h};var v=Model.getShapeLinkers(x.id);if(v&&v.length>0)for(var m=0;m<v.length;m++){var b=v[m];-1==c.indexOf(b)&&c.push(b)}}}for(f=0;f<c.length;f++){b=c[f];var w=Model.getShapeById(b);h.push(w);n=Utils.isSelected(b);d[w.id]={from:p(w.from,n),to:p(w.to,n)}}var S=e.css("cursor");r.css("cursor",S);var k=[];Designer.events.push("beforeResize",{minSize:y,shapes:h,dir:s}),r.bind("mousemove.resize",function(e){UI.hideShapeOptions(),k=[];var t=Utils.getRelativePos(e.pageX,e.pageY,a),n=Utils.copy(o);s.indexOf("r")>=0?n.w=t.x-l.x:s.indexOf("l")>=0&&(n.w=l.x-t.x),s.indexOf("b")>=0?n.h=t.y-l.y:s.indexOf("t")>=0&&(n.h=l.y-t.y),n.w<y.w&&(n.w=y.w),n.h<y.h&&(n.h=y.h),s.indexOf("l")>=0&&(n.x=l.x-n.w),s.indexOf("t")>=0&&(n.y=l.y-n.h),Utils.removeAnchors();for(var r=0;r<h.length;r++){var p=h[r],c=d[p.id];if("linker"!=p.name)"attached"==c.type?(p.props.x=n.x+n.w*c.x-p.props.w/2,p.props.y=n.y+n.h*c.y-p.props.h/2):(p.props.x=n.x+n.w*c.x,p.props.y=n.y+n.h*c.y,Designer.painter.renderShape(p),Utils.showAnchors(p));else{if("box"==c.from.type)p.from.x=n.x+n.w*c.from.x,p.from.y=n.y+n.h*c.from.y;else if("shape"==c.from.type){var u={x:(x=Model.getShapeById(p.from.id)).props.x+x.props.w*c.from.x,y:x.props.y+x.props.h*c.from.y},g={x:x.props.x+x.props.w/2,y:x.props.y+x.props.h/2},f=Utils.getRotated(g,u,x.props.angle);p.from.x=f.x,p.from.y=f.y}if("box"==c.to.type)p.to.x=n.x+n.w*c.to.x,p.to.y=n.y+n.h*c.to.y;else if("shape"==c.to.type){var x;u={x:(x=Model.getShapeById(p.to.id)).props.x+x.props.w*c.to.x,y:x.props.y+x.props.h*c.to.y},g={x:x.props.x+x.props.w/2,y:x.props.y+x.props.h/2},f=Utils.getRotated(g,u,x.props.angle);p.to.x=f.x,p.to.y=f.y}Designer.painter.renderLinker(p,!0)}}Designer.painter.drawControls(i);var v="W: "+Math.round(n.w)+"&nbsp;&nbsp;H: "+Math.round(n.h);n.x!=o.x&&(v="X: "+Math.round(n.x)+"&nbsp;&nbsp;Y: "+Math.round(n.y)+"<br/>"+v),Designer.op.showTip(v),$(document).unbind("mouseup.resize_ok").bind("mouseup.resize_ok",function(){if(k.length>0&&(h=h.concat(k)),s.indexOf("t")>=0||s.indexOf("l")>=0){for(var e=0;e<h.length;e++){var t=h[e];if(t.attribute&&t.attribute.collapsed){var n=Utils.getCollapsedShapesById(t.id);if(n.length>0){var r=Utils.getOutlinkers(n);n=n.concat(r);var a=Model.getPersistenceById(t.id),o=t.props.x-a.props.x,l=t.props.y-a.props.y;Designer.op.moveShape(n,{x:o,y:l},!0),h=h.concat(n)}}}Designer.painter.drawControls(i)}Model.updateMulti(h),$(document).unbind("mouseup.resize_ok")})}),$(document).bind("mouseup.resize",function(){UI.showShapeOptions(),r.css("cursor","default"),Designer.op.resetState(),r.unbind("mousemove.resize"),$(document).unbind("mouseup.resize"),Designer.op.hideTip(),Utils.showLinkerCursor(),Designer.op.hideSnapLine()})},shapeResizable:function(){$(".shape_controller").off("touchstart.resize").on("touchstart.resize",function(e){e.preventDefault(),$(this).addClass("checked");e=e.originalEvent.touches[0];Designer.op.changeState("resizing");var t=Utils.getSelectedIds(),i=Utils.getSelected();$("#shape_text_edit").on("blur"),Utils.hideLinkerCursor(),Utils.unselectGrid(),Utils.hideLinkerFocusPoint();var n,r=$("#canvas_container"),a=$("#designer_canvas"),o=$(this);if(1==t.length){var s=Model.getShapeById(t[0]);n=Utils.copy(s.props)}else(n=Utils.getControlBox(t)).angle=0;var l={x:n.x+n.w/2,y:n.y+n.h/2},p=o.attr("resizeDir"),h={};function d(e,t){if(null==e.id)return t?{type:"box",x:(e.x-n.x)/n.w,y:(e.y-n.y)/n.h}:{type:"fixed"};if(Utils.isSelected(e.id)){var i=Model.getShapeById(e.id),r=i.attribute.fixedLinker,a={x:i.props.x+i.props.w/2,y:i.props.y+i.props.h/2},o=Utils.getRotated(a,e,-i.props.angle);return"sequenceActivation"!=i.name&&!r||t||0!=i.props.angle?{type:"shape",x:(o.x-i.props.x)/i.props.w,y:(o.y-i.props.y)/i.props.h}:{type:"fixed_linker",x:(o.x-i.props.x)/i.props.w,y:(o.y-i.props.y)/i.props.h}}return{type:"fixed"}}p.indexOf("l")>=0?h.x=n.x+n.w:p.indexOf("r")>=0?h.x=n.x:h.x=n.x+n.w/2,p.indexOf("t")>=0?h.y=n.y+n.h:p.indexOf("b")>=0?h.y=n.y:h.y=n.y+n.h/2,h=Utils.getRotated(l,h,n.angle);var c=[],u={},g=[],y=Utils.getAttachedShapes(i);i=i.concat(y);for(var f=[],x=0;x<i.length;x++){s=i[x];if(f.push(s.id),s.parent&&f.push(s.parent),"linker"==s.name)-1==g.indexOf(s.id)&&g.push(s.id);else{c.push(s),s.attachTo&&!Utils.isSelected(s.id)?u[s.id]={type:"attached",x:(s.props.x+s.props.w/2-n.x)/n.w,y:(s.props.y+s.props.h/2-n.y)/n.h}:u[s.id]={x:(s.props.x-n.x)/n.w,y:(s.props.y-n.y)/n.h,w:s.props.w/n.w,h:s.props.h/n.h};var v=Model.getShapeLinkers(s.id);if(v&&v.length>0)for(var m=0;m<v.length;m++){var b=v[m];-1==g.indexOf(b)&&g.push(b)}}}for(x=0;x<g.length;x++){b=g[x];var w=Model.getShapeById(b);c.push(w);var S=Utils.isSelected(b),k=d(w.from,S),M=d(w.to,S);u[w.id]={from:k,to:M};var _="shape"==k.type&&Math.round(w.from.angle/(2*Math.PI)*360)%90!=0,D="shape"==M.type&&Math.round(w.to.angle/(2*Math.PI)*360)%90!=0;if(-1===k.type.indexOf("fixed")&&-1===M.type.indexOf("fixed")&&!_&&!D){for(var U=[],P=0;P<w.points.length;P++)U.push(d(w.points[P],!0));u[w.id].points=U}}var L=o.css("cursor");r.css("cursor",L);var I=[],C={w:20,h:20};1==c.length&&c[0].name.indexOf("Separator")>-1&&(C={w:60,h:60}),Designer.events.push("beforeResize",{minSize:C,shapes:i,dir:p}),r.off("touchmove.resize").on("touchmove.resize",function(e){e.preventDefault();e=e.originalEvent.touches[0];if(0!=Utils.getSelectedIds().length){UI.hideShapeOptions(),I=[];var i=Utils.getRelativePos(e.pageX,e.pageY,a),r=Utils.getRotated(h,i,-n.angle),o=Utils.copy(n);p.indexOf("r")>=0?o.w=r.x-h.x:p.indexOf("l")>=0&&(o.w=h.x-r.x),p.indexOf("b")>=0?o.h=r.y-h.y:p.indexOf("t")>=0&&(o.h=h.y-r.y),(e.ctrlKey||e.shiftKey)&&2==p.length?n.w>=n.h?(o.h=n.h/n.w*o.w,o.h<C.h&&(o.h=C.h,o.w=n.w/n.h*o.h)):(o.w=n.w/n.h*o.h,o.w<C.w&&(o.w=C.w,o.h=n.h/n.w*o.w)):(o.w<C.w&&(o.w=C.w),o.h<C.h&&(o.h=C.h));var s={};p.indexOf("r")>=0?s.x=h.x+o.w:p.indexOf("l")>=0?s.x=h.x-o.w:s.x=h.x,p.indexOf("b")>=0?s.y=h.y+o.h:p.indexOf("t")>=0?s.y=h.y-o.h:s.y=h.y;var l=Utils.getRotated(h,s,n.angle),d={x:.5*h.x+.5*l.x,y:.5*h.y+.5*l.y},g=Utils.getRotated(d,h,-n.angle);if(p.indexOf("r")>=0?o.x=g.x:p.indexOf("l")>=0?o.x=g.x-o.w:o.x=g.x-o.w/2,p.indexOf("b")>=0?o.y=g.y:p.indexOf("t")>=0?o.y=g.y-o.h:o.y=g.y-o.h/2,0==o.angle)c[0],Designer.op.snapResizeLine(o,f,p);Utils.removeAnchors(),Utils.removeCreateLinker();for(var y=0;y<c.length;y++){var x=c[y],v=u[x.id],m="";if("linker"==x.name){if("box"==v.from.type)x.from.x=o.x+o.w*v.from.x,x.from.y=o.y+o.h*v.from.y,m="from";else if("shape"==v.from.type){var b={x:(M=Model.getShapeById(x.from.id)).props.x+M.props.w*v.from.x,y:M.props.y+M.props.h*v.from.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2},S=Utils.getRotated(w,b,M.props.angle);x.from.x=S.x,x.from.y=S.y,m="from"}else if("fixed_linker"==v.from.type){b={x:(M=Model.getShapeById(x.from.id)).props.x+M.props.w*v.from.x,y:M.props.y+M.props.h*v.from.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2};var k=Utils.getRotated(w,x.from,-M.props.angle);(v.from.x<.01||v.from.x>.99)&&(k.y>M.props.y+M.props.h?(k.y=M.props.y+M.props.h,m="from"):k.y<M.props.y?(k.y=M.props.y,m="from"):k.x=b.x),(v.from.y<.01||v.from.y>.99)&&(k.x>M.props.x+M.props.w?(k.x=M.props.x+M.props.w,m="from"):k.x<M.props.x?(k.x=M.props.x,m="from"):k.y=b.y);S=Utils.getRotated(w,k,M.props.angle);x.from.x=S.x,x.from.y=S.y}if(v.points||Designer.painter.renderLinker(x,m),"box"==v.to.type)x.to.x=o.x+o.w*v.to.x,x.to.y=o.y+o.h*v.to.y,m="to";else if("shape"==v.to.type){b={x:(M=Model.getShapeById(x.to.id)).props.x+M.props.w*v.to.x,y:M.props.y+M.props.h*v.to.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2},S=Utils.getRotated(w,b,M.props.angle);x.to.x=S.x,x.to.y=S.y,m="to"}else if("fixed_linker"==v.to.type){b={x:(M=Model.getShapeById(x.to.id)).props.x+M.props.w*v.to.x,y:M.props.y+M.props.h*v.to.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2};var M,_=Utils.getRotated(w,x.to,-M.props.angle);(v.to.x<.01||v.to.x>.99)&&(_.y>M.props.y+M.props.h?(_.y=M.props.y+M.props.h,m="to"):_.y<M.props.y?(_.y=M.props.y,m="to"):_.x=b.x),(v.to.y<.01||v.to.y>.99)&&(_.x>M.props.x+M.props.w?(_.x=M.props.x+M.props.w,m="to"):_.x<M.props.x?(_.x=M.props.x,m="to"):_.y=b.y);S=Utils.getRotated(w,_,M.props.angle);x.to.x=S.x,x.to.y=S.y}if(v.points){for(var D=0;D<v.points.length;D++){var U=x.points[D],P=v.points[D];U.x=o.x+o.w*P.x,U.y=o.y+o.h*P.y}Designer.painter.renderLinker(x)}else Designer.painter.renderLinker(x,m)}else{if("attached"==v.type)x.props.x=o.x+o.w*v.x-x.props.w/2,x.props.y=o.y+o.h*v.y-x.props.h/2;else{var L=Utils.copy(x.props);x.props.x=o.x+o.w*v.x,x.props.y=o.y+o.h*v.y,x.props.w=o.w*v.w,x.props.h=o.h*v.h;var B=Model.getShapeById(x.id).props;B.x=o.x+o.w*v.x,B.y=o.y+o.h*v.y,B.w=o.w*v.w,B.h=o.h*v.h;var T={x:x.props.x-L.x,y:x.props.y-L.y,w:x.props.w-L.w,h:x.props.h-L.h},z={shape:x,offset:T,dir:p},O=Designer.events.push("resizing",z);O&&(I=I.concat(O))}Designer.painter.renderShape(x),1==t.length?Utils.showCreateLinker(x):Utils.showAnchors(x)}}Designer.painter.drawControls(t);var A="W: "+Math.round(o.w)+"&nbsp;&nbsp;H: "+Math.round(o.h);o.x!=n.x&&(A="X: "+Math.round(o.x)+"&nbsp;&nbsp;Y: "+Math.round(o.y)+"<br/>"+A),Designer.op.showTip(A),$(document).off("touchend.resize_ok").on("touchend.resize_ok",function(){if(I.length>0&&(c=c.concat(I)),p.indexOf("t")>=0||p.indexOf("l")>=0){for(var e=0;e<c.length;e++){if((s=c[e]).attribute&&s.attribute.collapsed){var i=Utils.getCollapsedShapesById(s.id);if(i.length>0){var n=Utils.getOutlinkers(i);i=i.concat(n);var r=Model.getPersistenceById(s.id),a=s.props.x-r.props.x,o=s.props.y-r.props.y;Designer.op.moveShape(i,{x:a,y:o},!0),c=c.concat(i)}}}Designer.painter.drawControls(t)}for(e=0;e<c.length;e++){var s;"linker"==(s=c[e]).name&&"broken"==s.linkerType&&(s.points=Utils.margeLinker(s))}Utils.shapesToRound(c),!x||"verticalPool"!=x.name&&"horizontalPool"!=x.name||Utils.beautifyLane(c),Model.updateMulti(c),Designer.events.push("changeLinkers",c),$(document).off("touchend.resize_ok");var l=Utils.getControlBox(t);Designer.op.changeCanvas(l)});var R=Utils.getSelectedCharts().length;1!=Utils.getSelectedShapeIds().length||1!=R?$(".pop-sub-editor").hide():UI.renderSubMenuPos({top:23})}}),$(document).on("touchend.resize",function(){UI.showShapeOptions(),r.css("cursor","default"),$(".shape_controller").removeClass("checked"),Designer.op.resetState(),r.off("touchmove.resize"),$(document).off("touchend.resize"),Designer.op.hideTip(),Utils.showLinkerCursor(),Designer.op.hideSnapLine()})})},shapeRotatable:function(){$(".shape_rotater").on("touchstart",function(e){e.preventDefault();var t=$(this);t.removeClass("rotate_enable"),t.addClass("rotate_enable"),$("#canvas_container").addClass("rotate_enable"),Utils.hideLinkerCursor(),Utils.unselectGrid(),Utils.removeCreateLinker(),$("#shape_text_edit").length&&$("#shape_text_edit").trigger("blur"),Utils.removeCreateLinker(),e.stopPropagation(),Designer.op.changeState("rotating");var i,n,r=Utils.getSelectedIds();if(1==r.length){var a=Model.getShapeById(r[0]);i=a.props,n=a.props.angle}else i=Utils.getControlBox(r),n=0;var o={x:i.x+i.w/2,y:i.y+i.h/2},s=$("#designer_canvas"),l=Utils.getSelected(),p=Utils.getAttachedShapes(l);l=l.concat(p);var h=Utils.getContainedShapes(l);l=l.concat(h);var d=Utils.getOutlinkers(l);l=l.concat(d);var c=n;$(document).on("touchmove.rotate",function(e){e=e.originalEvent.touches[0];UI.hideShapeOptions();var t=Utils.getRelativePos(e.pageX,e.pageY,s),a=Math.atan(Math.abs(t.x-o.x)/Math.abs(o.y-t.y));t.x>=o.x&&t.y>=o.y?a=Math.PI-a:t.x<=o.x&&t.y>=o.y?a=Math.PI+a:t.x<=o.x&&t.y<=o.y&&(a=2*Math.PI-a),a+=2*Math.PI-Math.atan(i.w/i.h),a%=2*Math.PI;var p=Math.PI/36,h=Math.round(a/p)%72;if((a=p*h)!=c){c=a,Designer.op.showRotateTip(5*h%360),Designer.painter.rotateControls(i,a),Utils.removeAnchors();for(var d=a-n,u=0;u<l.length;u++){if("linker"!=(m=l[u]).name){var g=Model.getPersistenceById(m.id);m.props.angle=Math.abs((d+g.props.angle)%(2*Math.PI));var y={x:g.props.x+g.props.w/2,y:g.props.y+g.props.h/2},f=Utils.getRotated(o,y,d);if(m.props.x=f.x-m.props.w/2,m.props.y=f.y-m.props.h/2,m.name.startsWith("chart_")){var x=document.getElementById(m.id),v=180*m.props.angle/Math.PI;x.style.transform="rotate("+v+"deg)",x.children().remove(),Designer.painter.drawChart(x,m,"canvas")}else Designer.painter.renderShape(m);r.length>1&&Utils.showAnchors(m)}}for(u=0;u<l.length;u++){var m;if("linker"==(m=l[u]).name){g=Model.getPersistenceById(m.id);if(Utils.isSelected(m.id)&&null==m.from.id||Utils.isSelected(m.from.id)){var b=Utils.getRotated(o,g.from,d);m.from.x=b.x,m.from.y=b.y,null!=m.from.angle&&(Utils.isSelected(m.from.id)?m.from.angle=Utils.getPointAngle(m.from.id,b.x,b.y,7):m.from.angle=Math.abs((g.from.angle+d)%(2*Math.PI))),!0,Designer.painter.renderLinker(m,"from")}if(Utils.isSelected(m.id)&&null==m.to.id||Utils.isSelected(m.to.id)){b=Utils.getRotated(o,g.to,d);m.to.x=b.x,m.to.y=b.y,null!=m.to.angle&&(Utils.isSelected(m.to.id)?m.to.angle=Utils.getPointAngle(m.to.id,b.x,b.y,7):m.to.angle=Math.abs((g.to.angle+d)%(2*Math.PI))),!0,Designer.painter.renderLinker(m,"to")}}}}}).on("touchend.rotate",function(){t.removeClass("rotate_enable"),$("#canvas_container").removeClass("rotate_enable"),UI.showShapeOptions(),$(document).off("touchmove.rotate").off("touchend.rotate"),Designer.op.resetState(),Model.updateMulti(l),Designer.painter.drawControls(r),Designer.op.hideTip(),Utils.showLinkerCursor(),1==l.length&&Utils.showCreateLinkerMulti(l),Designer.events.push("changeLinkers",l)})})},groupShapeChangable:function(){$(".change_shape_icon").off().on("touchstart",function(e){e.stopPropagation();var t=Utils.getSelected()[0],i=t.groupName,n=$(this).parent(),r=n.position(),a=r.left+n.width(),o=r.top+n.height()+10;Designer.op.groupDashboard(i,a,o,function(e){if(t.name!=e){var i=Designer.events.push("shapeChanged",{shape:t,name:e});Model.changeShape(t,e);var n=[t];i&&i.length>0&&(n=n.concat(i)),Model.updateMulti(n)}})})},shapeMultiDragged:!1,shapeMultiSelectable:function(){var e=$("#designer_canvas"),t=$("#designer_layout"),i=$("#canvas_container");t.off("touchstart.multiselect").on("touchstart.multiselect",function(n){if(!(n.originalEvent.touches.length>1)){var r=setTimeout(function(){Designer.op.shapeMultiDragged=!0},300);n=n.originalEvent.touches[0];var a=null,o={};if(n.ctrlKey||Utils.unselect(),!((n.target.classList+"").indexOf("designer-layout")>=0)){var s=Utils.getRelativePos(n.pageX,n.pageY,e);Designer.op.changeState("multi_selecting"),Designer.op.initScrollPos(),i.off("touchmove.multiselect").on("touchmove.multiselect",function(t){if(Designer.op.shapeMultiDragged){t=t.originalEvent.touches[0],null==a&&(a=$("<div id='selecting_box'></div>").appendTo(e));var i=Utils.getRelativePos(t.pageX,t.pageY,e);o={"z-index":Model.orderList.length,left:i.x,top:i.y,transform:"translateZ(0)"},i.x>s.x&&(o.left=s.x),i.y>s.y&&(o.top=s.y),o.width=Math.abs(i.x-s.x),o.height=Math.abs(i.y-s.y),a.css(o),Designer.op.isScroll(t.pageX,t.pageY)}else clearTimeout(r)}),i.off("touchend.multiselect").on("touchend.multiselect",function(e){if(clearTimeout(r),Designer.op.shapeMultiDragged=!1,null!=a){var t={x:o.left,y:o.top,w:o.width,h:o.height},n=window.authObj&&authObj.shapeSelectPart,s=Utils.getShapesByRange(t,n);if(e.ctrlKey){var l=Utils.getSelectedIds();Utils.mergeArray(s,l)}Utils.unselect(),Utils.selectShape(s),Utils.isRangeSelect=!0,a.remove()}Designer.op.resetState(),Designer.op.stopScroll(),i.off("touchend.multiselect")}),t.off("touchstart.multiselect")}}})},shapeEditable:function(e,t){if(Designer.op.isdblclick){var i=$("#designer_canvas");if(e.name.startsWith("chart_"))Designer.painter.createPanel();else{var n=Utils.getRelativePos(t.pageX,t.pageY,i);Utils.unselectGrid(),Designer.op.editShapeText(e,n),Designer.events.push("useBrush","unbrush")}}},editShapeText:function(e,t,i){if("linker"!=e.name){if(e.textBlock&&0!=e.textBlock.length){var n=e.getTextBlock();if("grid"==e.category&&e.merge)for(var r=e.merge||[],a=0;a<r.length;a++){var o=r[a],s=o[0],l=o[o.length-1];n[s].position.w=n[l].position.w+n[l].position.x-n[s].position.x,n[s].position.h=n[l].position.h+n[l].position.y-n[s].position.y;for(var p=1;p<o.length;p++)n[o[p]].jump=!0}var h=0;if(t){if(0!=e.props.angle){var d={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2};t=Utils.getRotated(d,t,-e.props.angle)}var c=t.x-e.props.x,u=t.y-e.props.y;for(a=0;a<n.length;a++){var g=n[a];if(!g.jump&&Utils.pointInRect(c,u,g.position)){h=a;break}}}i&&(h=i),Designer.contextMenu.hide();var y=$("#shape_text_edit");0==y.length&&(y=$("<div contenteditable='true' spellcheck=false id='shape_text_edit'></div>").appendTo("#designer_canvas"));var f=$("#shape_text_ruler");0==f.length&&(f=$("<div contenteditable='true' spellcheck=false id='shape_text_ruler'></div>").appendTo("#designer_canvas")),$(".text_canvas[forshape="+e.id+"][ind="+h+"]").hide();var x=n[h],v=e.textBlock[h],m=Utils.getShapeFontStyle(e.fontStyle);m=$.extend({},m,x.fontStyle);var b=x.position;if("horizontal"==m.orientation){var w={x:b.x+b.w/2,y:b.y+b.h/2};b={x:w.x-b.h/2,y:w.y-b.w/2,w:b.h,h:b.w}}var S={width:b.w+"px","z-index":Model.orderList.length+2,"line-height":100*m.lineHeight+"%","font-size":m.size+"px","font-family":m.fontFamily,"font-weight":m.bold?"bold":"normal","font-style":m.italic?"italic":"normal","text-align":m.textAlign,color:"rgb("+m.color+")","text-decoration":m.underline?"underline":"none","word-wrap":"break-word"};if(y.css(S),f.css(S),y.show(),b.x+=e.props.x,b.y+=e.props.y,Utils.rectCross(b,e.props)||y.attr("placeholder","请输入文本"),null!=x.text){var k=x.text.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;");"undefined"==typeof isNewTextV||isNewTextV||(k=(k=(k=(k=(k=(k=(k=(k=(k=k.replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/&lt;br&gt;/gi,"<br>")).replace(/&lt;b&gt;/gi,"<b>").replace(/&lt;\/b&gt;/gi,"</b>")).replace(/&lt;div&gt;/gi,"<div>").replace(/&lt;\/div&gt;/gi,"</div>")).replace(/&lt;i&gt;/gi,"<i>").replace(/&lt;\/i&gt;/gi,"</i>")).replace(/&lt;u&gt;/gi,"<u>").replace(/&lt;\/u&gt;/gi,"</u>")).replace(/&lt;font/gi,"<font").replace(/\"&gt;/gi,'">').replace(/&lt;\/font&gt;/gi,"</font>")).replace(/&lt;span/gi,"<span").replace(/&lt;\/span&gt;/gi,"</span>")).replace(/&lt;p/gi,"<p").replace(/&lt;\/p&gt;/gi,"</p>")),y.html(k),insert.equation.renderEquation(y)}var M=0,_=0,D=0,U=!1;$("#shape_text_edit").off().on("keyup",function(t){f.html($(this).html()),y.attr("placeholder")&&!$(this).html()?y.addClass("placeholder"):y.removeClass("placeholder"),M=f.height(),y.css({height:M});b.x,b.w;var i=b.y+b.h/2,n=0,r=0,a=b.h;"middle"==m.vAlign?M>a?(n=i-(a=M)/2,r=0):(n=i-b.h/2,r=(b.h-M)/2,a=b.h-r):"bottom"==m.vAlign?M>a?(a=M,n=i+b.h/2-a,r=0):(n=i-b.h/2,r=b.h-M,a=b.h-r):(n=i-b.h/2,r=0,a=M>a?M:b.h);var o=r+a,s={x:b.x+b.w/2,y:n+o/2},l=e.props.angle;if(0!=l){var p={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2};s=Utils.getRotated(p,s,l)}"horizontal"==m.orientation&&(l=(1.5*Math.PI+l)%(2*Math.PI));var h="rotate("+Math.round(l/(2*Math.PI)*360)+"deg)";y.css({width:b.w,height:a,"padding-top":r,left:s.x-b.w/2-2,top:s.y-o/2-2,"-webkit-transform":h,"-ms-transform":h,"-o-transform":h,"-moz-transform":h,transform:h}),t.stopPropagation()}).on("keydown",function(t){t.stopPropagation();var i=$(this);if(13==t.keyCode&&t.ctrlKey)return P(),!1;if(27==t.keyCode)i.unbind().remove(),$(".text_canvas[forshape="+e.id+"][ind="+h+"]").show();else if(66==t.keyCode&&t.ctrlKey){var n=!m.bold;1==e.textBlock.length?e.fontStyle.bold=n:v.fontStyle=$.extend(v.fontStyle,{bold:n}),m.bold=n,Model.update(e);var r=n?"bold":"normal";$(this).css("font-weight",r),f.css("font-weight",r),UI.update(),t.preventDefault()}else if(73==t.keyCode&&t.ctrlKey){n=!m.italic;1==e.textBlock.length?e.fontStyle.italic=n:v.fontStyle=$.extend(v.fontStyle,{italic:n}),m.italic=n,Model.update(e);r=n?"italic":"normal";$(this).css("font-style",r),f.css("font-style",r),UI.update(),t.preventDefault()}else if(85==t.keyCode&&t.ctrlKey){n=!m.underline;1==e.textBlock.length?e.fontStyle.underline=n:v.fontStyle=$.extend(v.fontStyle,{underline:n}),m.underline=n,Model.update(e);r=n?"underline":"none";$(this).css("text-decoration",r),f.css("text-decoration",r),t.preventDefault(),UI.update(),t.preventDefault()}else if(13==t.keyCode)Utils.isIE()&&!t.shiftKey&&t.preventDefault();else if(37==t.keyCode||39==t.keyCode){if(y.find(".equation-text").length>0){var a=window.getSelection().getRangeAt(0),o=document.createElement("span");o.className="equation-temp",a.insertNode(o),a.collapse(!1);var s=a.startContainer;l(1==s.nodeType?s:s.parentNode)}function l(e){for(var i=e.childNodes,n=0;n<i.length;n++)3==i[n].nodeType&&""==i[n].nodeValue&&e.removeChild(i[n]);for(n=0;n<i.length;n++)if("equation-temp"==i[n].className){39==t.keyCode?n==i.length-1?p(e):"equation-text"==i[n+1].className?insert.equation.equationInit(y,$(i[n+1])):1==i[n+1].nodeType&&d(i[n+1]):0==n?p(e):"equation-text"==i[n-1].className?insert.equation.equationInit(y,$(i[n-1])):1==i[n-1].nodeType&&d(i[n-1]),y.find(".equation-temp").remove();break}}function p(e){var i=e.parentNode;1==i.childNodes.length?p(i):"designer_canvas"!=i.id&&(39==t.keyCode?e.after(o):e.before(o),l(i))}function d(e){1==e.childNodes.length&&"equation-text"!=e.childNodes[0].className?d(e.childNodes[0]):1==e.nodeType&&(39==t.keyCode?e.insertBefore(o,e.childNodes[0]):e.appendChild(o),l(e))}}else t.ctrlKey&&69==t.keyCode&&t.preventDefault()}).on("blur",function(e){$(".eq-editor").is(":visible")||P()}).bind("focus",function(e){var t="";if(window.getSelection)t=window.getSelection().toString();else if(document.selection){t=document.selection.createRange().text}""!=$.trim(t)&&U&&Utils.popEditor.init(this),e.stopPropagation()}).on("touchend",function(e){var t=$(".eq-editor"),i=$(e.target).parents(".equation-text");if(t.is(":visible")){var n,r;if(i.length>0)(r=window.getSelection?(n=window.getSelection()).getRangeAt(0):(n=document.selection).createRange()).setStartAfter(i.get(0)),r.collapse(!1),n.removeAllRanges(),n.addRange(r),$(".pop-editor").hide();i=y.find(".equation-text.cur");t.hide(),$(".eq-shade").remove(),""==$(".notranslate").html()&&i.remove(),i.removeClass("cur")}else i.length>0&&insert.equation.equationInit(y,i);Designer.contextMenu.hide(),e.stopPropagation(),e.preventDefault()}).on("touchmove",function(e){e.stopPropagation(),e=e.originalEvent.touches[0],(Math.abs(e.pageX-_)>3||Math.abs(e.pageX-D)>3)&&(U=!0)}).on("touchstart",function(e){e.stopPropagation(),e=e.originalEvent.touches[0],_=e.pageX,D=e.pageY,U=!1}).on("mouseenter",function(e){Designer.op.destroy()}),$("#shape_text_edit").trigger("keyup"),y.focus(),Designer.events.push("usebrush","unbrush")}}else this.editLinkerText(e,t,i);function P(){Utils.popEditor.close();var t=$("#shape_text_edit").html(),i=y.find(".equation-text");if(i.length>0&&(t=Designer.op.equation.equationHtml(i,t)),$("#shape_text_edit").length&&$("#shape_text_edit").is(":visible")){var n=Model.getShapeById(e.id);v.text=void 0===v.text?"":v.text;var r=[n];if(t!=v.text&&!y.hasClass("invalid")){if(n.textBlock[h].text=t,"uml_class"==e.category){r=Designer.op.shapeChangeHeight(n,h,M,t)||[];for(var a=0;a<r.length;a++){var o=r[a];"linker"==o.name&&Designer.painter.renderLinker(o,!0)}}else if("text"==e.name||"standardText"==e.name){var s=n.textBlock[0].text,l={};if(l.x=n.props.x+n.props.w/2,l.y=n.props.y+n.props.h/2,""==s){var p,d,c=null!==(p=null==Schema||null===(d=Schema.shapes)||void 0===d||null===(d=d.text)||void 0===d?void 0:d.props)&&void 0!==p?p:{w:100,h:40};n.props.w=c.w,n.props.h=c.h,n.props.x=l.x-n.props.w/2,n.props.y=l.y-n.props.h/2}else 0==i.length&&(Utils.autoTextHeight(n,s,n.props.w,void 0,!0),n.props.x=l.x-n.props.w/2,n.props.y=l.y-n.props.h/2)}Model.updateMulti(r)}Designer.painter.renderShape(n),Designer.events.push("searchReplace"),$("#shape_text_edit").remove(),e=null,Utils.selectShape(Utils.selectIds)}}},equation:{equationHtml:function(e,t){$("body").append('<div id="html_temp" style="display:none"></div>');var i=$("#html_temp");return i.html(t),e.each(function(e){i.find(".equation-text:eq("+e+")").attr("data-index",e).children(":first").html("")}),t=i.html(),i.remove(),t},insertLastEquation:function(e){if(Designer.events.push("testVip","Latex")){Designer.op.editShapeText(e),(n=document.createRange()).collapse(!1);var t=$("#shape_text_edit");if(t.find("li").length>0)var i=t.find("li");else i=t;var n,r=i[0];r.focus(),(n=document.createRange()).selectNodeContents(r),n.collapse(!1);var a=window.getSelection();0==a.anchorOffset&&(a.removeAllRanges(),a.addRange(n),insert.equation.equationInit(t))}else Designer.events.push("vipLimit","Latex")}},shapeReplace:function(e,t){Schema.shapes[e];var i=Utils.copy(Model.getShapeById(t));Model.changeShape(i,e),Model.update(i)},shapeChangeHeight:function(e){var t=Utils.getShapeFontHeight(e),i=Utils.copy(e.props),n=[e];if("interface"==e.name||"cls_"==e.name||"enumeration"==e.name){var r=t[0]<30?30:t[0]+14,a=t[1]<30?30:t[1]+14;e.props.h=r+a,Math.abs(e.props.h-i.h)<12&&(e.props.h=i.h),e.path[1].actions[0].y=r,e.path[1].actions[1].y=r,e.textBlock[0].position.h=r,e.textBlock[1].position.y=r,e.textBlock[1].position.h="h-"+r,Schema.initShapeFunctions(e)}else if("cls"==e.name){r=t[0]<30?30:t[0]+14,a=t[1]<30?30:t[1]+14;var o=t[2]<30?30:t[2]+14;e.props.h=r+a+o,Math.abs(e.props.h-i.h)<12&&(e.props.h=i.h),e.textBlock[0].position.h=r,e.textBlock[1].position.y=r,e.textBlock[1].position.h="(h-"+r+")*"+a+"/"+(a+o),e.textBlock[2].position.y="(h-"+r+")*"+a+"/"+(a+o)+"+"+r,e.textBlock[2].position.h="(h-"+r+")*"+o+"/"+(a+o),e.path[1].actions[0].y=r,e.path[1].actions[1].y=r,e.path[1].actions[2].y="(h-"+r+")*"+a+"/"+(a+o)+"+"+r,e.path[1].actions[3].y="(h-"+r+")*"+a+"/"+(a+o)+"+"+r,Schema.initShapeFunctions(e)}else["activeClass","simpleInterface","classRelationship","simpleClass","multiplictyClass","constraint"].indexOf(e.name)>-1&&t[0]>e.props.h-10&&(e.props.y=e.props.y-(t[0]+10-e.props.h)/2,e.props.h=t[0]+10);for(var s=Utils.getOutlinkers([e]),l=0;l<s.length;l++){var p=s[l],h=!0;if(p.from.id==e.id&&e.props.h!=i.h){var d=e.props.y+e.props.h*(p.from.y-i.y)/i.h;p.from.y=Math.round(d),n.push(p),h=!1}if(p.to.id==e.id&&e.props.h!=i.h){d=e.props.y+e.props.h*(p.to.y-i.y)/i.h;p.to.y=Math.round(d),h&&n.push(p)}}return n},shapeLinkable:function(e,t){var i=(new Date).getTime();Designer.op.changeState("creating_linker");var n=$("#designer_canvas"),r=$("#canvas_container");if(t)var a=$(t.target)||null,o=a.attr("shape_id")||null;if((null!=o||"free"==e)&&2!=t.button){Designer.op.changeState("linking_from_shape");var s=null,l={},p={};if("free"==e){var h=Utils.getRelativePos(t.pageX,t.pageY,n);l={x:h.x,y:h.y,id:null,angle:null}}else{l.x=parseFloat(a.attr("x1")),l.y=parseFloat(a.attr("y1")),l.angle=parseFloat(a.attr("angle")),l.id=o,p.x=parseFloat(a.attr("x2")),p.y=parseFloat(a.attr("y2"));var d=Model.getShapeById(o);d&&d.name.startsWith("chart_")&&(0==l.angle?l.x+=33:l.angle==.5*Math.PI?l.y+=33:l.angle==Math.PI?l.x-=33:l.angle==1.5*Math.PI&&(l.y-=33))}Designer.op.initScrollPos(),r.on("touchmove.link",function(e){i=0,e.preventDefault();e=e.originalEvent.touches[0];r.css("cursor","default");var t=Utils.getRelativePos(e.pageX,e.pageY,n);null==s&&(s=c(l,t),Designer.events.push("linkerCreating",s)),Designer.op.moveLinker(s,"to",t.x,t.y),$(document).off("touchend.droplinker").on("touchend.droplinker",function(e){2!=e.button&&(Math.abs(t.x-l.x)>20||Math.abs(t.y-l.y)>20?(Model.add(s),Designer.events.push("linkerCreated",s),Utils.unselect(),Utils.selectShape(s.id),null==s.to.id&&null!=s.from.id&&Designer.op.linkDashboard(s),Utils.showLinkerCursor()):$("#"+s.id).remove(),Designer.op.hideSnapLine(),$(document).off("touchend.droplinker"))}),Designer.op.isScroll(e.pageX,e.pageY)}),$(document).on("touchend.link",function(){Designer.op.hideLinkPoint(),Designer.op.resetState(),r.off("touchmove.link"),$(document).off("touchend.link"),Designer.op.stopScroll(),(new Date).getTime()-i<300&&(s=c(l,p),Designer.painter.renderLinker(s,!0),Model.add(s),Designer.events.push("linkerCreated",s),Utils.unselect(),Utils.selectShape(s.id),null==s.to.id&&null!=s.from.id&&Designer.op.linkDashboard(s))})}function c(e,t){var i=Utils.newId(),n=Utils.copy(Schema.linkerDefaults);n.from=e,n.to={id:null,x:t.x,y:t.y,angle:null},n.props={zindex:Model.maxZIndex+1},delete n.fontStyle;var r={};Designer.defaults.linkerBeginArrowStyle&&(r.beginArrowStyle=Designer.defaults.linkerBeginArrowStyle),Designer.defaults.linkerEndArrowStyle&&(r.endArrowStyle=Designer.defaults.linkerEndArrowStyle);var a=Model.define;return null!=a.defaultLinkerStyle&&null!=a.defaultLinkerStyle.linkerStyle&&(r=$.extend(r,a.defaultLinkerStyle.linkerStyle)),n.lineStyle=r,n.lineStyle.lineWidth=Designer.defaults.lineWidth,n.id=i,n}},linkerEditable:function(e,t,i){var n=$("#designer_canvas");if(Designer.op.isdblclick){var r=Utils.getRelativePos(t.pageX,t.pageY,n);Designer.op.editLinkerText(e,r,i)}var a="false",o=t.target.classList+"";if(""==o||o.indexOf("linker_text")<0||void 0===i)return n.off("touchmove.linkerdrag"),n.off("touchend.linkerdrag"),void(a="false");var s=t.pageX,l=t.pageY,p={moving:!1},h=$("#"+e.id);if(0!=h.length){var d=h.children(".linker_text").eq(i);h.attr("id"),d.position().left,d.position().top;d.addClass("active"),n.addClass("moving_status");for(var c=Utils.getLinkerLinesPoints(e),u=[],g=0;g<c.length;g++){var y=c[g],f=Math.floor(y.x),x=Math.floor(y.y);u.push([f,x])}p.points=u,p.plen=c.length,p.tval=-1,p.moving=!1,p.target=d,p.baseH=d.outerHeight(),p.baseW=d.outerWidth(),p.minX=h.position().left.restoreScale()-1,p.minY=h.position().top.restoreScale()-1,p.fromX=e.from.x,p.toX=e.to.x,p.fromY=e.from.y,p.toY=e.to.y,p.side=0,n.off("touchmove.linkerdrag").on("touchmove.linkerdrag",function(t){t.preventDefault();(t=t.originalEvent.touches[0]).target.classList;if(Math.abs(t.pageX-s)<=3&&Math.abs(t.pageY-l)<=3)return a="false",void(p.moving=!1);p.moving=!0;var i=Utils.getRelativePos(t.pageX,t.pageY,n),r=Math.floor(i.x),o=Math.floor(i.y),h=Designer.painter.getLinkerPointLocation(e,{x:r,y:o}),d=h.pos.x,c=h.pos.y,u=Utils.getAngleDir(h.pos.angle);Utils.measureDistance({x:d,y:c},e.from)>p.baseH/2&&Utils.measureDistance({x:d,y:c},e.to)>p.baseH/2&&(p.currentX=d,p.currentY=c,p.locationObj=h),Utils.measureDistance({x:r,y:o},{x:p.currentX,y:p.currentY})<6?(p.side=0,p.pos="in"):o<c-16&&p.fromX!=p.toX?p.pos="top":o>c+16&&p.fromX!=p.toX?p.pos="bottom":r<d-16&&p.fromY!=p.toY?p.pos="top":r>d+16&&p.fromY!=p.toY?p.pos="bottom":p.pos="in";var g=p.currentX-p.minX,y=p.currentY-p.minY,f=Math.floor(g)-p.baseW/2,x=Math.floor(y)-p.baseH/2;"top"==p.pos?"1"==u||"3"==u?f=f-p.baseW/2-6:x=x-p.baseH/2-6:"bottom"==p.pos&&("1"==u||"3"==u?f+=p.baseW/2+6:x+=p.baseH/2+6),p.target.css({top:x,left:f}),a="true"}),n.off("touchend.linkerdrag").on("touchend.linkerdrag",function(){if(n.off("touchend.linkerdrag"),p.target.removeClass("active"),n.removeClass("moving_status"),p.moving&&"true"==a){if(e.textBlock[i].location=p.locationObj.location,e.textBlock[i].pos=p.pos,0==i){for(var t=Utils.getLinkerLinesPoints(e),r=null,o=-1,s=0;s<t.length;s++){var l=t[s].x,h=t[s].y,d=Utils.measureDistance({x:p.currentX,y:p.currentY},{x:l,y:h});null!=r?r>d&&(r=d,o=s):r=d}e.textPos={pos:p.pos,x:p.currentX,y:p.currentY,t:o}}Model.update(e),p={moving:!1},a="false"}})}},editLinkerText:function(e,t,i){Designer.contextMenu.hide();var n=i||0;if(t&&void 0===i){var r=Designer.painter.getLinkerPointLocation(e,t);o=r.pos,e.textBlock.push({location:r.location,side:0,text:""}),n=e.textBlock.length-1}0==e.textBlock.length&&e.textBlock.push({location:.5,side:0,text:""});var a=e.textBlock[n],o=Designer.painter.getLinkerPointByLocation(e,a.location),s=o.x,l=o.y,p=$("#"+e.id),h=p.children(".linker_text").eq(n);if(0==h.length)h=$("<div class='text_canvas linker_text'></div>").appendTo("#"+e.id);else{var d=Utils.restoreScale(h.position()),c=Utils.restoreScale(p.position());s=c.left+d.left+h.width()/2,l=c.top+d.top+h.height()/2}var u=$("#linker_text_edit");0==u.length&&(u=$("<textarea id='linker_text_edit' wrap='off'></textarea>").appendTo("#designer_canvas")),h.hide();var g=Utils.getLinkerFontStyle(e.fontStyle),y=Math.round(1.25*g.size);function f(){var t=$("#linker_text_edit");if(t.length&&t.is(":visible")){var i=t.val();if(i!=a.text&&""!==$.trim(i)){if(e.textBlock[n].text=i,0==n){var r=e.textBlock[0];e.text=r.text;for(var o=Designer.painter.getLinkerPointByLocation(e,r.location),s=Utils.getLinkerLinesPoints(e),l=null,p=-1,d=0;d<s.length;d++){var c=s[d].x,u=s[d].y,g=Utils.measureDistance({x:o.x,y:o.y},{x:c,y:u});null!=l?l>g&&(l=g,p=d):l=g}e.textPos={pos:r.pos,x:o.x,y:o.y,t:p}}Model.update(e)}else if(""==$.trim(i)){if(e.textBlock.splice(n,1),0==n)if(e.textBlock.length>0){r=e.textBlock[0];e.text=r.text;for(o=Designer.painter.getLinkerPointByLocation(e,r.location),s=Utils.getLinkerLinesPoints(e),l=null,p=-1,d=0;d<s.length;d++){c=s[0],u=s[1],g=Utils.measureDistance({x:o.x,y:o.y},{x:c,y:u});null!=l?l>g&&(l=g,p=d):l=g}e.textPos={pos:r.pos,x:o.x,y:o.y,t:p}}else e.text="";Model.update(e),h.remove()}Model.intersection[e.id]?Designer.painter.renderLinker(e,null,null,Model.intersection[e.id]):Designer.painter.renderLinker(e),t.remove(),Designer.events.push("searchReplace")}}u.css({"z-index":Model.orderList.length+99999,"line-height":y+"px","font-size":g.size+"px","font-family":g.fontFamily,"font-weight":g.bold?"bold":"normal","font-style":g.italic?"italic":"normal","text-align":g.textAlign,color:"rgb("+g.color+")","text-decoration":g.underline?"underline":"none"}),u.val(a.text).show().select(),u.off().on("keyup",function(){var e=$(this).val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>");h.html(e+"<br/>");var t=h.width();t<50&&(t=50);var i=h.height();i<y&&(i=y),u.css({left:s-(t+20)/2,top:l-i/2,width:t+20,height:i})}).bind("touchstart",function(e){Designer.contextMenu.hide(),e.stopPropagation()}).bind("keydown",function(t){if(13==t.keyCode&&t.ctrlKey)return f(),!1;if(27==t.keyCode)u.unbind().remove(),Designer.painter.renderLinkerText(e);else if(66==t.keyCode&&t.ctrlKey){var i=!Utils.getLinkerFontStyle(e.fontStyle).bold;e.fontStyle.bold=i,Model.update(e);var n=i?"bold":"normal";$(this).css("font-weight",n),h.css("font-weight",n),UI.update()}else if(73==t.keyCode&&t.ctrlKey){i=!Utils.getLinkerFontStyle(e.fontStyle).italic;e.fontStyle.italic=i,Model.update(e);n=i?"italic":"normal";$(this).css("font-style",n),h.css("font-style",n),UI.update()}else if(85==t.keyCode&&t.ctrlKey){i=!Utils.getLinkerFontStyle(e.fontStyle).underline;e.fontStyle.underline=i,Model.update(e);n=i?"underline":"none";$(this).css("text-decoration",n),h.css("text-decoration",n),t.preventDefault(),UI.update()}}).bind("blur",function(){f()}),u.trigger("keyup")},linkerDraggable:function(e,t){if(!e.locked){var i=$("#designer_canvas"),n=$("#canvas_container");Utils.hideLinkerControls(),Designer.op.changeState("dragging_linker");var r=Utils.getSelectedIds(),a=!1;r.length>1&&(a=!0),Designer.op.initScrollPos(),n.on("touchmove.draglinker",function(o){o.preventDefault();o=o.originalEvent.touches[0];n.css("cursor","default");var s=Utils.getRelativePos(o.pageX,o.pageY,i);Designer.op.moveLinker(e,t,s.x,s.y),a&&Designer.painter.drawControls(r),$(document).off("touchend.droplinker").on("touchend.droplinker",function(){$(document).unbind("touchend.droplinker"),e.points=Utils.margeLinker(e),Model.update(e),Utils.showLinkerControls(),Designer.op.hideSnapLine(),Designer.events.push("linkerCreated",e)}),Designer.op.isScroll(o.pageX,o.pageY),Utils.hideLinkerEndsPoint()}),$(document).on("touchend.draglinker",function(){Designer.op.hideLinkPoint(),Designer.op.resetState(),i.off("touchstart.draglinker"),n.off("touchmove.draglinker"),$(document).off("touchend.draglinker"),Utils.showLinkerControls(),Utils.showLinkerEndsPoint(),Designer.op.stopScroll()})}},linkClickable:function(e,t){var i=$("#link_spot");0==i.length&&(i=$("<a id='link_spot' target='_blank' style='cursor: pointer'></a>").appendTo("#designer_canvas")).bind("dragstart",function(){return!1}),-1==e.trim().toLowerCase().indexOf("http")&&(e="http://"+e),i.attr("href",e),i.show().css({left:t.x-50,top:t.y-50,"z-index":Model.orderList.length+3})},linkIconShow:function(e){var t=e.id;if(t&&(!$("#link_icon_spot").length||$("#link_icon_spot").attr("data-shape-id")!=t)){var i=Utils.getRotated({x:0,y:0},{x:8,y:8},e.props.angle),n=Math.max(Math.abs(i.x),Math.abs(i.y));$("#link_icon_spot").remove();var r=$("#"+t),a=r.children(".shape_link"),o=Model.orderList.length>e.props.zindex?Model.orderList.length:e.props.zindex,s=Utils.restoreScale(r.position()),l=Utils.restoreScale(a.position());$(a.prop("outerHTML")).css({left:s.left+l.left+n,top:s.top+l.top+n,"z-index":o+3}).attr("id","link_icon_spot").appendTo("#designer_canvas"),$(".shape_link").show(),a.hide()}},linkIconHide:function(){$("#link_icon_spot").remove(),$(".shape_link").show()},textCreatable:function(){var e=$("#designer_canvas"),t=$("#canvas_container");t.unbind("touchstart.create_text").bind("touchstart.create_text",function(i){i.preventDefault();var n=null;i.ctrlKey||Utils.unselect();i=i.originalEvent.touches[0];var r=Utils.getRelativePos(i.pageX,i.pageY,e),a=null;Designer.events.push("testVip","flowShapeNum")&&(t.bind("touchmove.create_text",function(t){t.preventDefault();t=t.originalEvent.touches[0];null==n&&(n=$("<div id='texting_box'></div>").appendTo(e));var i=Utils.getRelativePos(t.pageX,t.pageY,e);a={"z-index":Model.orderList.length,left:i.x-1,top:i.y-1},i.x>r.x&&(a.left=r.x-1),i.y>r.y&&(a.top=r.y-1),a.width=Math.abs(i.x-r.x-2),a.height=Math.abs(i.y-r.y-2),n.css(a)}),$(document).unbind("touchend.create_text").bind("touchend.create_text",function(i){if(null!=a&&a.width>=20&&a.height>=20){(r=Model.create("standardText",a.left,a.top)).props.w=a.width,r.props.h=a.height}else{i=i.originalEvent.changedTouches[0];var r,o=Utils.getRelativePos(i.pageX,i.pageY,e),s={left:o.x-1,top:o.y-1};(r=Model.create("standardText",s.left,s.top)).props.w=100,r.props.h=40}n&&n.remove(),Model.add(r),Designer.painter.renderShape(r),Designer.op.editShapeText(r),Utils.unselect(),Utils.selectShape(r.id),Designer.op.resetState(),$(document).unbind("touchend.create_text"),t.unbind("touchmove.create_text")}),t.unbind("touchstart.create_text"))})},canvasDragTimeout:null,canvasDragged:!1,canvasDraggable:function(e){var t=this,i=$("#canvas_container");i.css("cursor","url("+staticBasePath+"/assets/images/designer/cursor_hand.png) 8 8, auto");var n=$("#designer_layout").scrollTop(),r=$("#designer_layout").scrollLeft();t.canvasDragged=!1;var a={disabled:!0,scale:1,distance:0,centerX:0,centerY:0};function o(e){var t=e[0],i=e[1],n=t.pageX-0,r=t.pageY-0,a=i.pageX-0,o=i.pageY-0;return{disabled:!1,scale:Designer.config.scale,distance:Math.sqrt(Math.pow(a-n,2)+Math.pow(o-r,2)),centerX:(a+n)/2,centerY:(o+r)/2}}e&&2==e.length&&(a=o(e)),i.off("touchmove.drag_canvas").on("touchmove.drag_canvas",function(i){var s=i.originalEvent.touches;if(!t.shapeMultiDragged)if(a.disabled){var l=e[0],p=(i=s[0]).pageX-l.pageX,h=i.pageY-l.pageY;(Math.abs(p)>2||Math.abs(h)>2)&&(t.canvasDragged=!0,t.shapeMultiDragged=!1),$("#designer_layout").scrollLeft(r-p),$("#designer_layout").scrollTop(n-h)}else{var d=(o(s).distance-a.distance)/150,c=Math.round(100*(a.scale+d))/100;Designer.setZoomScale(c,{x:a.centerX,y:a.centerY}),$(".dock_btn_zoom .zoom_num").html(Math.round(100*Designer.config.scale)+"%")}}),$(document).off("touchend.drag_canvas").on("touchend.drag_canvas",function(e){i.off("touchmove.drag_canvas"),$(document).off("touchend.drag_canvas"),a.disabled=!0,Designer.op.resetState()})},canvasFreeDraggable:function(){var e=$("#canvas_container");e.css("cursor","url(/themes/default/images/diagraming/cursor_hand.png) 8 8, auto"),e.unbind("mousedown.drag_canvas").bind("mousedown.drag_canvas",function(t){var i=$("#designer_layout").scrollTop(),n=$("#designer_layout").scrollLeft();e.on("mousemove.drag_canvas",function(e){var r=e.pageX-t.pageX,a=e.pageY-t.pageY;$("#designer_layout").scrollLeft(n-r),$("#designer_layout").scrollTop(i-a)}),$(document).off("mouseup.drag_canvas").on("mouseup.drag_canvas",function(t){e.off("mousemove.drag_canvas"),$(document).off("mouseup.drag_canvas")})})},canvasScalePoint:function(e,t,i){var n="undefined"!=typeof isView&&isView;if("center"==i&&(n?i={x:$("#viewport").width()/2+$("#viewport").offset().left,y:$("#viewport").height()/2+$("#viewport").offset().top}:$("#designer_layout").length&&(i={x:$("#designer_layout").width()/2+$("#designer_layout").offset().left,y:$("#designer_layout").height()/2+$("#designer_layout").offset().top})),"object"==_typeof(i))if(n){var r=$("#designer_canvas"),a=(i.x-r.offset().left)/e,o=(i.y-r.offset().top)/e,s=Math.round(r.position().left-(t-e)*a),l=Math.round(r.position().top-(t-e)*o);r.css({left:s,top:l})}else if($("#designer_layout").length){var p=$("#designer_layout"),h=(a=(i.x-p.offset().left+p.scrollLeft()-Designer.config.pageMargin)/e,o=(i.y-p.offset().top+p.scrollTop()-Designer.config.pageMargin)/e,Math.round(p.scrollLeft()+(t-e)*a)),d=Math.round(p.scrollTop()+(t-e)*o);p.scrollLeft(h),p.scrollTop(d)}},moveShape:function(e,t,i){for(var n=[],r=0;r<e.length;r++){var a=e[r];n.push(a.id)}var o=Utils.getControlBox(n);o.x+t.x<-1e3||(o.y,t.y),Utils.removeCreateLinker();var s=t;for(r=0;r<e.length;r++){if("linker"==(a=e[r]).name){var l=a,p=l.from,h=l.to,d=!1,c=!1;if(Utils.isSelected(l.id)?((null==p.id||n.indexOf(p.id)>=0)&&(l.from.x+=s.x,l.from.y+=s.y,d=!0),(null==h.id||n.indexOf(h.id)>=0)&&(l.to.x+=s.x,l.to.y+=s.y,c=!0)):(null!=p.id&&n.indexOf(p.id)>=0&&(l.from.x+=s.x,l.from.y+=s.y,d=!0),null!=h.id&&n.indexOf(h.id)>=0&&(l.to.x+=s.x,l.to.y+=s.y,c=!0)),d&&c){for(var u=0;u<l.points.length;u++){var g=l.points[u];g.x+=s.x,g.y+=s.y}var y=$("#"+a.id);if(y.length>0){var f=Utils.restoreScale(y.position());y.css({left:f.left+=t.x,top:f.top+=t.y})}}else(d||c)&&Designer.painter.renderLinker(l,d?"from":"to");null!=l.textPos&&(l.textPos.x+=s.x,l.textPos.y+=s.y)}else D(a),$("#shape_contour_"+a.id).css({left:a.props.x,top:a.props.y})}var x=Utils.getSelectedLinkerIds();if((1!=e.length||1!=x.length)&&void 0===i){if(x.length>0){var v=Utils.getSelectedIds();Designer.painter.drawControls(v)}else{var m=$("#shape_controls");m.css({left:parseFloat(m.css("left"))+s.x,top:parseFloat(m.css("top"))+s.y});var b=parseFloat(m.css("left")),w=parseFloat(m.css("top")),S=(parseFloat(m.width()),$("#grid_dom")),k=$("#grid_selects"),M=$("#lane_dom");if(S.length&&-1!=n.indexOf(S.attr("shape-id"))&&S.css({left:parseFloat(S.css("left"))+s.x,top:parseFloat(S.css("top"))+s.y}),k.length&&k.css({left:parseFloat(k.css("left"))+t.x,top:parseFloat(k.css("top"))+t.y}),M.length&&-1!=n.indexOf(M.attr("shape-id"))&&M.css({left:parseFloat(M.css("left"))+s.x,top:parseFloat(M.css("top"))+s.y}),a.name.indexOf("grid")>-1)$("#po-grid-toolbar").css({left:b,top:w-45});else if("lane"==a.category){$("#po-lane-toolbar").css({left:b,top:w-45})}else if("uiTab"==a.name){$("#po-uitab-toolbar").css({left:b,top:w-45})}else if("uiGrid"==a.name){$("#po-uigrid-toolbar").css({left:b,top:w-45})}}var _=$("#shape_controls").position();Designer.op.showTip("X: "+Math.round(_.left.restoreScale())+"&nbsp;&nbsp;Y: "+Math.round(_.top.restoreScale()))}function D(e){e.props.x+=s.x,e.props.y+=s.y;var t=$("#"+e.id);t.css({left:parseFloat(t.css("left"))+s.x,top:parseFloat(t.css("top"))+s.y})}},moveLinkerFocus:function(e){var t=Utils.copy(e),i=Utils.getShapeByPosition(e.to.x,e.to.y,!0),n=Utils.getShapeByPosition(e.from.x,e.from.y,!0);return Designer.op.hideLinkPoint(),Utils.hideAnchors(),i&&"bounding"==i.type?(Designer.op.showLinkPoint(i.linkPoint),Utils.showAnchors(i.shape),t.to.x=i.linkPoint.x,t.to.y=i.linkPoint.y,t.to.angle=i.linkPoint.angle,t.to.id=i.shape.id,Designer.painter.renderLinker(t,!0,null,null,!0)):Designer.painter.renderLinker(t),n&&"bounding"==n.type?(Designer.op.showLinkPoint(n.linkPoint),Utils.showAnchors(n.shape),t.from.x=n.linkPoint.x,t.from.y=n.linkPoint.y,t.from.angle=n.linkPoint.angle,t.from.id=n.shape.id,Designer.painter.renderLinker(t,!0,null,null,!0)):Designer.painter.renderLinker(t),t=Designer.op.beautifyLinkerFocus(t)},beautifyLinkerFocus:function(e,t){var i=Utils.copy(e),n=e.to.id,r=e.to.x,a=e.to.y,o=e.from.id,s=e.from.x,l=e.from.y,p=e.linkerType,h=e.points,d=Utils.margeLinker(e);if("broken"==p&&t){if(!0===t)n&&!o?Math.abs(a-l)<Math.abs(r-s)?Math.abs(a-l)<8&&(i.from.y=a):Math.abs(r-s)<8&&(i.from.x=r):!n&&o&&(Math.abs(a-l)<Math.abs(r-s)?Math.abs(a-l)<8&&(i.to.y=l):Math.abs(r-s)<8&&(i.to.x=s));else if("to"===t){var c=d[d.length-1]||e.from;Math.abs(a-c.y)<Math.abs(r-c.x)?Math.abs(a-c.y)<8&&(d.length>1?i.points[h.length-1].y=a:o||(i.from.y=a)):Math.abs(r-c.x)<8&&(d.length>1?i.points[h.length-1].x=r:o||(i.from.x=r))}else if("from"===t){var u=d[0]||e.to;Math.abs(l-u.y)<Math.abs(s-u.x)?Math.abs(l-u.y)<8&&(d.length>1?i.points[0].y=l:n||(i.to.y=l)):Math.abs(s-u.x)<8&&(d.length>1?i.points[0].x=s:n||(i.to.x=s))}}else"broken"==p&&2==h.length&&(n&&!o?h[0].x==h[1].x?Math.abs(h[0].y-h[1].y)<8&&h[0].y!=h[1].y&&(i.points[0].y=a,i.points[1].y=a,i.from.y=a):Math.abs(h[0].x-h[1].x)<8&&h[0].x!=h[1].x&&(i.x=r,i.x=r,i.from.x=r):!n&&o&&(h[0].x==h[1].x?Math.abs(h[0].y-h[1].y)<8&&h[0].y!=h[1].y&&(i.points[0].y=l,i.points[1].y=l,i.to.y=l):Math.abs(h[0].x-h[1].x)<8&&h[0].x!=h[1].x&&(i.x=s,i.x=s,i.to.x=s)));return i},moveLinker:function(e,t,i,n){var r=null,a=null,o=Utils.getShapeByPosition(i,n,!0);if(Designer.op.hideLinkPoint(),null!=o){var s=o.shape;if(Utils.showAnchors(s),a=s.id,"bounding"==o.type)r=o.linkPoint,Designer.op.showLinkPoint(r);else if("shape"==o.type){var l,p;if("from"==t?(l={x:e.to.x,y:e.to.y},p=e.to.id):(l={x:e.from.x,y:e.from.y},p=e.from.id),s.id==p)Designer.op.hideLinkPoint(),(r={x:i,y:n}).angle=null,a=null;else{for(var h,d=s.getAnchors(),c=-1,u={x:s.props.x+s.props.w/2,y:s.props.y+s.props.h/2},g=0;g<d.length;g++){var y=d[g],f=Utils.getRotated(u,{x:s.props.x+y.x,y:s.props.y+y.y},s.props.angle),x=Utils.measureDistance(f,l);(-1==c||x<c)&&(c=x,h=f)}var v=Utils.getPointAngle(s.id,h.x,h.y,4);s.name.startsWith("chart_")&&(h.x==s.props.x+s.props.w&&(v=Math.PI),h.x==s.props.x&&(v=0),h.y==s.props.y&&(v=.5*Math.PI),h.y==s.props.y+s.props.h&&(v=1.5*Math.PI)),r={x:h.x,y:h.y,angle:v},Designer.op.showLinkPoint(r)}}}else{Designer.op.hideLinkPoint(),Utils.hideAnchors();var m=Designer.op.snapLinkerLine(i,n);(r={x:m.x,y:m.y}).angle=null,a=null}var b=2;if(null==a&&(b=6),"from"==t){e.from.id=a,e.from.x=r.x,e.from.y=r.y,e.from.angle=r.angle;var w=[];"broken"==e.type&&(w=Utils.getLinkerLinePoints(e));var S=w[2]||e.to;if(r.x>=S.x-b&&r.x<=S.x+b&&(e.from.x=S.x),r.y>=S.y-b&&r.y<=S.y+b&&(e.from.y=S.y),e.from.x==e.to.x&&e.from.y==e.to.y)return}else{e.to.x=r.x,e.to.y=r.y,e.to.id=a,e.to.angle=r.angle;w=[];"broken"==e.type&&(w=Utils.getLinkerLinePoints(e));var k=w[w.length-3]||e.from;if(r.x>=k.x-b&&r.x<=k.x+b&&(e.to.x=k.x),r.y>=k.y-b&&r.y<=k.y+b&&(e.to.y=k.y),e.from.x==e.to.x&&e.from.y==e.to.y)return}Designer.painter.renderLinker(e,t)},showLinkPoint:function(e){var t=$("<canvas class='link_point_canvas' width=8 height=8></canvas>").appendTo($("#designer_canvas")),i=t[0].getContext("2d");i.strokeStyle=Designer.config.anchorColor,i.fillStyle=Designer.config.anchorColor,i.arc(4,4,4,0,2*Math.PI),i.fill(),t.css({left:e.x-4,top:e.y-4,"z-index":Model.orderList.length+4,transform:"scale("+1..restoreScale()+")"}).show()},hideLinkPoint:function(){$(".link_point_canvas").remove()},createBrokenPoints:function(e,t,i){var n,r,a=Utils.getLinkerVector(e),o=e.points,s=o.length+1,l=0,p=a[t],h=a[t+1];if(-1==i||0==i)if(0==t&&e.from.id){n={x:p.x+20*p.h,y:p.y+20*p.v,fixed:!0};var d={x:p.x+20*p.h,y:p.y+20*p.v,fixed:!0};o.splice(t,0,n,d),l+=2}else 0==t&&null==e.from.id&&(n={x:e.from.x,y:e.from.y,fixed:!0},o.splice(t,0,n),l+=1);else if(1==i){(n=Utils.getCenterPoint(p,h)).fixed=!0,(d=Utils.getCenterPoint(p,h)).fixed=!0,o.splice(t,0,n,d),l+=2}if(-1==i||1==i)if(t==s-1&&e.to.id){r={x:h.x-20*h.h,y:h.y-20*h.v,fixed:!0};var c={x:h.x-20*h.h,y:h.y-20*h.v,fixed:!0};o.splice(t+=l,0,r,c)}else t==s-1&&null==e.to.id&&(r={x:e.to.x,y:e.to.y,fixed:!0},o.splice(t+=l,0,r));else if(0==i){(r=Utils.getCenterPoint(p,h)).fixed=!0,(c=Utils.getCenterPoint(p,h)).fixed=!0,o.splice(t+=l,0,r,c)}return l},hideLinkCenterPoint:function(){$("#linker_broken_control_conter_point").remove()},brokenLinkerChangable1:function(e,t,i){var n=$("#canvas_container"),r=$("#designer_canvas"),a=e.points[t-1],o=e.points[t];a.x==o.x?n.css("cursor","e-resize"):n.css("cursor","n-resize"),Designer.op.changeState("changing_broken_linker");var s=Utils.getRelativePos(i.pageX,i.pageY,r),l=Utils.getSelectedIds();n.on("touchmove.brokenLinker",function(t){t.preventDefault();t=t.originalEvent.touches[0];var i=Utils.getRelativePos(t.pageX,t.pageY,r),n={x:i.x-s.x,y:i.y-s.y};n=Utils.restoreScale(n),a.x==o.x?(a.x+=n.x,o.x+=n.x):(a.y+=n.y,o.y+=n.y),Designer.painter.renderLinker(e),Designer.op.resetLinkerText(e),Designer.events.push("linkerCreated",e),l.length>1&&Designer.painter.drawControls(l),s=i,$(document).unbind("touchend.changed").bind("touchend.changed",function(){Model.update(e),$(document).unbind("touchend.changed")})}),$(document).bind("touchend.brokenLinker",function(){Designer.op.resetState(),n.unbind("touchmove.brokenLinker"),$(document).unbind("touchend.brokenLinker")})},brokenLinkerChangable:function(e,t,i,n){var r=$("#canvas_container"),a=$("#designer_canvas");Designer.op.changeState("changing_broken_linker"),Designer.op.hideLinkCenterPoint();var o=Utils.getRelativePos(n.pageX,n.pageY,a),s=Utils.getSelectedIds();if(2==e.points.length&&e.points[0].x==e.points[1].x&&e.points[0].y==e.points[1].y&&(e.points=[],t=0),"linker_broken_control_conter_point"==$(n.target).attr("id")){var l=Designer.op.createBrokenPoints(e,t,i);t+=l}else{l=Designer.op.createBrokenPoints(e,t,-1);t+=l}var p=[];p.push(e.from),(p=p.concat(e.points)).push(e.to);var h=p[t],d=p[t+1],c=Utils.copy(p[t-1]),u=Utils.copy(p[t+2]),g=!1;r.bind("touchmove.brokenLinker",function(i){i.preventDefault();i=i.originalEvent.touches[0];var n=Utils.getRelativePos(i.pageX,i.pageY,a),r=n.x-o.x,l=n.y-o.y,p=0,y=0;if(Math.abs(h.x-d.x)<1){var f=Designer.op.brokenLinkerChangableDisabled(e,t,h.x+r,null);p=f-h.x,h.x=f,d.x=f,Math.abs(c.x-h.x)<6?(h.x=c.x,d.x=c.x,p=0):Math.abs(u.x-h.x)<6?(h.x=u.x,d.x=u.x,p=0):(h.fixed=!0,d.fixed=!0)}else{var x=Designer.op.brokenLinkerChangableDisabled(e,t,null,h.y+l);y=x-h.y,h.y=x,d.y=x,Math.abs(c.y-h.y)<6?(h.y=c.y,d.y=c.y,y=0):Math.abs(u.y-h.y)<6?(h.y=u.y,d.y=u.y,y=0):(h.fixed=!0,d.fixed=!0)}Designer.painter.renderLinker(e),Designer.op.resetLinkerText(e),Designer.events.push("linkerCreated",e),s.length>1&&Designer.painter.drawControls(s),o={x:o.x+p,y:o.y+y},g=!0,$(document).unbind("touchend.changed").bind("touchend.changed",function(){e.points=Utils.margeLinker(e),Model.update(e),Designer.painter.renderLinker(e),$(document).unbind("touchend.changed")})}),$(document).bind("touchend.brokenLinker",function(){Designer.op.resetState(),g||(e.points=Utils.margeLinker(e),Designer.painter.renderLinker(e)),r.unbind("touchmove.brokenLinker"),$(document).unbind("touchend.brokenLinker")})},brokenLinkerChangableDisabled:function(e,t,i,n){var r=e.points,a=e.from,o=e.to,s=e.lineStyle.beginArrowStyle||"none",l=e.lineStyle.endArrowStyle||"solidArrow",p=[],h=[],d=[],c=[];return 1==t&&"none"!=s&&o.from&&(a.x==r[0].x?h.push(a.y-15,a.y+15):p.push(a.x-15,a.x+15)),t==r.length-1&&"none"!=l&&o.id&&(o.x==r[r.length-1].x?c.push(o.y-15,o.y+15):d.push(o.x-15,o.x+15)),null!=i?(p.length&&d.length?p[0]>d[0]&&p[0]<d[1]&&i>d[0]&&i<p[1]?i=Math.abs(i-d[0])<Math.abs(i-p[1])?d[0]:p[1]:p[1]>d[0]&&p[1]<d[1]&&i>p[0]&&i<d[1]?i=Math.abs(i-p[0])<Math.abs(i-d[1])?p[0]:d[1]:i>p[0]&&i<p[1]?i=Math.abs(i-p[0])<Math.abs(i-p[1])?p[0]:p[1]:i>d[0]&&i<d[1]&&(i=Math.abs(i-d[0])<Math.abs(i-d[1])?d[0]:d[1]):p.length?i>p[0]&&i<p[1]&&(i=Math.abs(i-p[0])<Math.abs(i-p[1])?p[0]:p[1]):d.length&&i>d[0]&&i<d[1]&&(i=Math.abs(i-d[0])<Math.abs(i-d[1])?d[0]:d[1]),i):null!=n?(h.length&&c.length?h[0]>c[0]&&h[0]<c[1]&&n>c[0]&&n<h[1]?n=Math.abs(n-c[0])<Math.abs(n-h[1])?c[0]:h[1]:h[1]>c[0]&&h[1]<c[1]&&n>h[0]&&n<c[1]?n=Math.abs(n-h[0])<Math.abs(n-c[1])?h[0]:c[1]:n>h[0]&&n<h[1]?n=Math.abs(n-h[0])<Math.abs(n-h[1])?h[0]:h[1]:n>c[0]&&n<c[1]&&(n=Math.abs(n-c[0])<Math.abs(n-c[1])?c[0]:c[1]):h.length?n>h[0]&&n<h[1]&&(n=Math.abs(n-h[0])<Math.abs(n-h[1])?h[0]:h[1]):c.length&&n>c[0]&&n<c[1]&&(n=Math.abs(n-c[0])<Math.abs(n-c[1])?c[0]:c[1]),n):void 0},resetLinkerText:function(e){var t=null;if(null!=e.textPos){var i=Utils.getLinkerLinesPoints(e);e.textPos.t>i.length&&(e.textPos.t=i.length-1),null!=(t=i[e.textPos.t])&&(e.textPos.x=t.x,e.textPos.y=t.y)}},removeShape:function(){var e=Utils.getSelected();if(e.length>0){Utils.unselect(),Designer.op.linkIconHide();var t=Utils.getAttachedShapes(e);e=e.concat(t);for(var i=[],n=0;n<e.length;n++){var r=Utils.getChildrenShapes(e[n]);i=i.concat(r)}e=e.concat(i);var a=Utils.getCollapsedShapes(e);e=e.concat(a),Model.remove(e),Model.define.page.showPrintLine&&Designer.op.changeCanvas(),$("#po-flow-dock-layout-chartdata").hasClass("hide")||(Dock.hide(),$(".pop-sub-editor>div[data-key='editData']").removeClass("active"),$("#po-flow-dock-layout-chartdata").addClass("hide"))}},setDefaultStyle:function(){var e=Utils.getSelected();if(1==e.length){var t=e[0];if("standardImage"==t.name||"note"==t.name||"uiNote"==t.name)return"error";if(null!=t.category&&(t.category.indexOf("ios_")>=0||t.category.indexOf("andriod_")>=0))return"error";if(null!=t.category&&t.category.indexOf("network")>=0)return"error";if(null!=t.category&&(t.category.indexOf("aws_")>=0||t.category.indexOf("azure")>=0||t.category.indexOf("aws2019")>=0))return"error";if(null!=t.category&&(t.category.indexOf("ali_")>=0||t.category.indexOf("cisco_")>=0))return"error";var i={},n="shape";"linker"==t.name?(n="linker",i={linkerStyle:Utils.copy(t.lineStyle)}):"horizontal"==(i={lineStyle:Utils.copy(t.lineStyle),fontStyle:Utils.copy(t.fontStyle),fillStyle:Utils.copy(t.fillStyle)}).fontStyle.orientation&&delete i.fontStyle.orientation,Model.setDefaultStyle(n,i)}},showTip:function(e){var t=$("#designer_op_tip");0==t.length&&(t=$("<div id='designer_op_tip'></div>").appendTo("#designer_canvas")),t.stop().html(e);var i=$("#shape_controls"),n=Utils.restoreScale(i.position());t.css({top:n.top+i.height()+5,left:n.left+i.width()/2-t.outerWidth()/2,"z-index":Model.orderList.length+3,transform:"scale("+1..restoreScale()+")",transformOrigin:"center top"}).show()},showRotateTip:function(e){var t=$("#shape_rotate_tip");0==t.length&&(t=$("<div id='shape_rotate_tip'></div>").appendTo(".shape_rotater")),t.stop().html(e+"°");$("#shape_controls").position();t.css({"z-index":Model.orderList.length,transform:"rotate("+-e+"deg)"}).show()},hideTip:function(){$("#designer_op_tip").fadeOut(100),$("#shape_rotate_tip").fadeOut(100)},snapLine:function(e,t,i,n){var r=e.y,a=e.y+e.h/2,o=e.y+e.h,s=e.x,l=e.x+e.w/2,p=e.x+e.w,h={v:null,h:null,attach:null,container:null,hLinePosS:[],vLinePosS:[]},d=null;if(d=i||Model.getShapeById(t[0]),1==t.length&&"boundaryEvent"==d.groupName)for(var c=Model.orderList.length-1;c>=0;c--){var u=Model.orderList[c].id;if((!(_=Model.getShapeById(u)).attribute||!_.attribute.collapseBy)&&("linker"!=_.name&&_.id!=d.id)){var g=_.props;if(null==h.attach&&0==g.angle&&("task"==_.groupName||"callActivity"==_.groupName||"subProcess"==_.groupName)){var y={x:g.x-2,y:g.y-2,w:g.w+4,h:g.h+4};if(Utils.pointInRect(l,a,y)){var f=g.y,x=g.y+g.h,v=g.x,m=g.x+g.w,b=!1,w=!1;f>=a-2&&f<=a+2?(e.y=f-e.h/2,w=!0):x>=a-2&&x<=a+2&&(e.y=x-e.h/2,w=!0),v>=l-2&&v<=l+2?(e.x=v-e.w/2,b=!0):m>=l-2&&m<=l+2&&(e.x=m-e.w/2,b=!0),(b||w)&&(h.attach=_)}}}}this.hideSnapLine();var S=$("#designer_canvas");if(null==h.attach){var k=[],M=[];for(c=n.length-1;c>=0;c--){var _,D=n[c],U={top:D.y,middle:D.y+D.h/2,bottom:D.y+D.h,left:D.x,center:D.x+D.w/2,right:D.x+D.w,id:D.id};if(Utils.rectInRect(D,e)||Utils.rectInRect(e,D)||Utils.rectCross(D,e)||(U.top>o+6||U.bottom<r-6?U.left>p+6||U.right<s-6||M.push(U):k.push(U)),null==h.container)if((_=Model.getShapeById(D.id)).attribute&&_.attribute.container){var P=Utils.copy(e);Utils.rectInRect(P,_.props)&&(h.container=_)}}Utils.getShapeRuleLine(e,k,M)}if(null!=h.attach||null!=h.container){var L=$("#designer_op_snapline_attach");0==L.length&&(L=$("<div id='designer_op_snapline_attach'></div>").appendTo(S));var I=h.attach||h.container,C=Utils.getShapeLineStyle(I.lineStyle).lineWidth;L.css({width:I.props.w+C,height:I.props.h+C,left:I.props.x-C/2-2,top:I.props.y-C/2-2,"z-index":$("#"+I.id).css("z-index")}).show()}return h},snapLinkerLine:function(e,t){for(var i={v:null,h:null},n=Model.orderList.length-1;n>=0;n--){var r=Model.orderList[n].id,a=Model.getShapeById(r);if((!a.attribute||!a.attribute.collapseBy)&&("linker"!=a.name&&!a.parent)){var o=a.props;if(null==i.h){var s=o.y,l=o.y+o.h;s>=t-2&&s<=t+2?i.h=s:l>=t-2&&l<=t+2&&(i.h=l)}if(null==i.v){var p=o.x,h=o.x+o.w;p>=e-2&&p<=e+2?i.v=p:h>=e-2&&h<=e+2&&(i.v=h)}if(null!=i.h&&null!=i.v)break}}this.hideSnapLine();var d=$("#designer_canvas");if(null!=i.h){var c=$(".designer_op_snapline_h");0==c.length&&(c=$("<div class='designer_op_snapline_h'></div>").appendTo(d)),c.css({width:d.width()+2*Designer.config.pageMargin,left:-Designer.config.pageMargin,top:Math.round(i.h),"z-index":Model.orderList.length+1}).show()}if(null!=i.v){var u=$(".designer_op_snapline_v");0==u.length&&(u=$("<div class='designer_op_snapline_v'></div>").appendTo(d)),u.css({height:d.height()+2*Designer.config.pageMargin,top:-Designer.config.pageMargin,left:Math.round(i.v),"z-index":Model.orderList.length+1}).show()}var g={x:e,y:t};return null!=i.h&&(g.y=i.h),null!=i.v&&(g.x=i.v),g},snapResizeLine:function(e,t,i){for(var n=e.y,r=e.y+e.h/2,a=e.y+e.h,o=e.x,s=e.x+e.w/2,l=e.x+e.w,p={v:null,h:null},h=Model.orderList.length-1;h>=0;h--){var d=Model.orderList[h].id,c=Model.getShapeById(d);if((!c.attribute||!c.attribute.collapseBy)&&!("linker"==c.name||t.indexOf(d)>=0||c.parent)){var u=c.props;if(null==p.h&&(i.indexOf("t")>=0||i.indexOf("b")>=0)){var g=u.y,y=u.y+u.h/2,f=u.y+u.h;y>=r-2&&y<=r+2?(p.h={type:"middle",y:y},i.indexOf("t")>=0?(e.h=2*(a-y),e.y=a-e.h):e.h=2*(y-e.y)):i.indexOf("t")>=0&&g>=n-2&&g<=n+2?(p.h={type:"top",y:g},e.y=g,e.h=a-g):i.indexOf("b")>=0&&f>=a-2&&f<=a+2?(p.h={type:"bottom",y:f},e.h=f-n):i.indexOf("t")>=0&&f>=n-2&&f<=n+2?(p.h={type:"top",y:f},e.y=f,e.h=a-f):i.indexOf("b")>=0&&g>=a-2&&g<=a+2&&(p.h={type:"bottom",y:g},e.h=g-e.y)}if(null==p.v&&(i.indexOf("l")>=0||i.indexOf("r")>=0)){var x=u.x,v=u.x+u.w/2,m=u.x+u.w;v>=s-2&&v<=s+2?(p.v={type:"center",x:v},i.indexOf("l")>=0?(e.w=2*(l-v),e.x=l-e.w):e.w=2*(v-e.x)):i.indexOf("l")>=0&&x>=o-2&&x<=o+2?(p.v={type:"left",x:x},e.x=x,e.w=l-x):i.indexOf("r")>=0&&m>=l-2&&m<=l+2?(p.v={type:"right",x:m},e.w=m-e.x):i.indexOf("l")>=0&&m>=o-2&&m<=o+2?(p.v={type:"left",x:m},e.x=m,e.w=l-m):i.indexOf("r")>=0&&x>=l-2&&x<=l+2&&(p.v={type:"right",x:x},e.w=x-e.x)}if(null!=p.h&&null!=p.v)break}}this.hideSnapLine();var b=$("#designer_canvas");if(null!=p.h){var w=$(".designer_op_snapline_h");0==w.length&&(w=$("<div class='designer_op_snapline_h'></div>").appendTo(b)),w.css({width:b.width()+2*Designer.config.pageMargin,left:-Designer.config.pageMargin,top:Math.round(p.h.y),"z-index":Model.orderList.length+1}).show()}if(null!=p.v){var S=$(".designer_op_snapline_v");0==S.length&&(S=$("<div class='designer_op_snapline_v'></div>").appendTo(b)),S.css({height:b.height()+2*Designer.config.pageMargin,top:-Designer.config.pageMargin,left:Math.round(p.v.x),"z-index":Model.orderList.length+1}).show()}return p},drawSnpLine:function(e,t,i){i=i||"";var n,r,a=$("#designer_canvas");if(void 0!==e&&void 0!==e)if(n=Utils.copy(e),r=Utils.copy(t),Math.abs(n.x-r.x)<2){var o="";o="line"==i?"<span class='text' style='top:"+Math.round(r.y-n.y)/2+"px;'>"+Math.round(r.y-n.y)+"px</span>":"<span class='top'><span class='po-diagraming-icons'>&#xe869;</span></span><span class='bottom'><span class='po-diagraming-icons'>&#xe86b;</span></span><span class='text' style='top:"+Math.round(r.y-n.y)/2+"px;'>"+Math.round(r.y-n.y)+"px</span>",$("<div class='designer_op_snapline_v "+i+"'>"+o+"</div>").appendTo(a).css({height:Math.round(r.y-n.y),left:Math.round(n.x),top:Math.round(n.y),"z-index":Model.orderList.length+1})}else if(Math.abs(n.y-r.y)<2){o="line"==i?"<span class='text'>"+Math.round(r.x-n.x)+"px</span>":"<span class='left'><span class='po-diagraming-icons'>&#xe690;</span></span><span class='right'><span class='po-diagraming-icons'>&#xe86a;</span></span><span class='text'>"+Math.round(r.x-n.x)+"px</span>",$("<div class='designer_op_snapline_h "+i+"'>"+o+"</div>").appendTo(a).css({width:Math.round(r.x-n.x),left:Math.round(n.x),top:Math.round(n.y),"z-index":Model.orderList.length+1})}},hideSnapLine:function(){$(".designer_op_snapline_h").remove(),$(".designer_op_snapline_v").remove(),$("#designer_op_snapline_attach").remove()},showLaneInsertLine:function(e){for(var t,i="verticalLane"==e.name?"verticalPool":"horizontalPool",n=Model.orderList.length-1;n>=0;n--){var r=Model.orderList[n].id,a=Model.getShapeById(r);if(a.name==i&&Utils.rectCross(a.props,e.props)){t=a;break}}if(t){var o,s;for(n=0;n<t.children.length;n++){var l=t.children[n],p=Model.getShapeById(l);p?"verticalLane"==e.name&&"verticalLane"==p.name?(p.props.x+p.props.w/2<e.props.x+e.props.w/2&&(!o||o.props.x<p.props.x)&&(o=p),(!s||s.props.x>p.props.x)&&(s=p)):"horizontalLane"==e.name&&p&&"horizontalLane"==p.name&&(p.props.y+p.props.h/2<e.props.y+e.props.h/2&&(!o||o.props.y<p.props.y)&&(o=p),(!s||s.props.y>p.props.y)&&(s=p)):(t.children.splice(n,1),n--)}if(o||s){var h=0,d=0,c=0,u=0;"verticalLane"==e.name?o?(h=o.props.x+o.props.w,d=o.props.y,u=o.props.h):(h=s.props.x,d=s.props.y,u=s.props.h):"horizontalLane"==e.name&&(o?(h=o.props.x,d=o.props.y+o.props.h,c=o.props.w):(h=s.props.x,d=s.props.y,c=s.props.w));var g=$(".designer_op_lane_insert");return g.length||(g=$('<div class="designer_op_lane_insert"></div>').appendTo("#designer_canvas")),g.css({width:c+4,height:u+4,position:"absolute",left:h-2,top:d-2,background:"#067bef","z-index":Model.orderList.length+1}),o?(Utils.shapesToRound([o]),{beforeLane:Utils.copy(o)}):s?(Utils.shapesToRound([s]),{afterLane:Utils.copy(s)}):void 0}this.hideLaneInsertLine()}else this.hideLaneInsertLine()},hideLaneInsertLine:function(){$(".designer_op_lane_insert").remove()},updateShapeByLaneInsert:function(e){var t=e&&e.beforeLane||null,i=e&&e.afterLane||null,n=t?t.parent:i.parent,r=Model.getShapeById(n),a=0,o=0,s=0,l=0;"verticalPool"==r.name?(a=t?t.props.x+t.props.w:i.props.x,s=t?t.props.w:i.props.w):"horizontalPool"==r.name&&(o=t?t.props.y+t.props.h:i.props.y,l=t?t.props.h:i.props.h),Utils.unselect();for(var p=Utils.getContainedShapes([r]),h=[],d=0,c=p.length;d<c;d++){var u=p[d],g=$("#"+u.id),y={x:u.props.x+u.props.w/2,y:u.props.y+u.props.h/2};s&&a<y.x?(u.props.x+=s,h.push(u),g.css({left:parseFloat(g.css("left"))+s})):l&&o<y.y&&(u.props.y+=l,h.push(u),g.css({top:parseFloat(g.css("top"))+l}))}var f=h.map(function(e){return e.id}),x=Utils.getOutlinkers(h);for(d=0,c=x.length;d<c;d++){var v=x[d],m=v.from.id,b=v.to.id;m&&-1!=f.indexOf(m)&&(v.from.x+=s,v.from.y+=l),b&&-1!=f.indexOf(b)&&(v.to.x+=s,v.to.y+=l),Designer.painter.renderLinker(v,!0)}h=h.concat(x),Model.updateMulti(h)},linkDashboard:function(e){var t=0,i=0,n=null,r="string"!=typeof e;if(r){n=Model.getShapeById(e.from.id),t=e.to.x,i=e.to.y;var a=Utils.getEndpointAngle(e,"to"),o=Math.round(a/(Math.PI/2));if(1==o||3==o?t+=7:i+=7,!n.attribute.linkable)return}else t=(n=Model.getShapeById(e)).props.x+n.props.w,i=n.props.y;var s=n.category;if(0!=$("#panel_"+s).length){var l=$("#shape_dashboard_"+s);if(0==l.length){function p(e,t){var i="<div class='dashboard_box' shapeName='"+e.name+"'><canvas original-title='"+e.title+"' title-pos='right' class='panel_item' width='"+Designer.config.panelItemWidth+"' height='"+Designer.config.panelItemHeight+"'></canvas></div>",n=$(i).appendTo(l);t&&n.append("<div class='group_icon link_shape_icon' group='"+t+"'></div>");var r=n.children()[0];Designer.painter.drawPanelItem(r,e.name)}for(var h in l=$("<div id='shape_dashboard_"+s+"' class='shape_dashboard menu' style='display:none;'></div>").appendTo("#designer_canvas"),Schema.shapes){var d=Schema.shapes[h];if(d.category==s){var c=d.attribute,u=d.anchors||[];if(c.visible&&c.linkable&&u.length>0&&!d.name.startsWith("chart_"))if(d.groupName)SchemaGroup.getGroup(d.groupName)[0]==d.name&&p(d,d.groupName);else p(d)}}}if(l.children().length){l.css({left:t,top:i,"z-index":Model.maxZIndex+2,transform:"scale("+1..restoreScale()+")",transformOrigin:"0 0"}).show();var g=$("#designer_layout").width()-10,y=$("#designer_layout").height()-10,f=$("#designer_layout").offset(),x=l.innerWidth(),v=l.innerHeight(),m=l.offset();m.left<f.left?t+=f.left-m.left:m.left+x>f.left+g&&(t-=m.left+x-(f.left+g)),m.top<f.top?i+=f.top-m.top:m.top+v>f.top+y&&(i-=m.top+v-(f.top+y)),l.css({left:t,top:i})}l.find(".link_shape_icon").off().on("click",function(e){e.stopPropagation()}),l.children(".dashboard_box").off().on("touchstart",function(){l.hide(),$(document).unbind("touchend.dashboard");var t=$(this).attr("shapeName");r?function(t){if(!Designer.events.push("testVip","flowShapeNum"))return;var i,n=Schema.shapes[t],r=Utils.getEndpointAngle(e,"to"),a=Utils.getAngleDir(r),o=n.getAnchors(),s=n.props.w/2,l=n.props.h/2;if(1==a)for(var p=null,h=0;h<o.length;h++){var d=o[h];null==p||d.y<p?(p=d.y,i=d):d.y==p&&Math.abs(d.x-s)<Math.abs(i.x-s)&&(i=d)}else if(2==a)for(var c=null,h=0;h<o.length;h++){var d=o[h];null==c||d.x>c?(c=d.x,i=d):d.x==c&&Math.abs(d.y-l)<Math.abs(i.y-l)&&(i=d)}else if(3==a)for(var u=null,h=0;h<o.length;h++){var d=o[h];null==u||d.y>u?(u=d.y,i=d):d.y==u&&Math.abs(d.x-s)<Math.abs(i.x-s)&&(i=d)}else if(4==a)for(var g=null,h=0;h<o.length;h++){var d=o[h];null==g||d.x<g?(g=d.x,i=d):d.x==g&&Math.abs(d.y-l)<Math.abs(i.y-l)&&(i=d)}var y=Model.create(t,e.to.x-i.x,e.to.y-i.y);void 0===y.lineStyle.lineWidth&&(y.lineStyle.lineWidth=Designer.defaults.lineWidth);Designer.painter.renderShape(y),MessageSource.beginBatch(),y.onCreated&&y.onCreated();for(var f=[],x=Model.orderList.length-1;x>=0;x--){var v=Model.orderList[x].id,n=Model.getShapeById(v);if((!n.attribute||!n.attribute.collapseBy)&&("linker"!=n.name&&!n.parent)){var m=Utils.getControlBox([v]);m.id=v,f.push(m)}}var b=y.props,w=Designer.op.snapLine(b,[y.id],y,f);w.container&&(y.container=w.container.id);Designer.events.push("created",y),Model.add(y);var S=Utils.getPointAngle(y.id,e.to.x,e.to.y,7);e.to.id=y.id,e.to.angle=S,Designer.painter.renderLinker(e,!0),Model.update(e),MessageSource.commit(),Utils.unselect(),Utils.selectShape(y.id),Designer.op.editShapeText(y),Designer.op.hideSnapLine(),Designer.op.changeCanvas(y.props),Designer.events.push("linkerCreated",e)}(t):Designer.op.shapeReplace(t,e),$("#hover_tip").length>0&&$("#hover_tip").remove()}),$(document).off("touchend.dashboard").on("touchend.dashboard",function(){Designer.op.canvasDragged||l.hide(),Designer.op.canvasDragged=!1})}},groupDashboard:function(e,t,i,n){$(".group_dashboard").hide();var r=$("#shape_group_dashboard_"+e);if(0==r.length){r=$("<div id='shape_group_dashboard_"+e+"' class='shape_group_dashboard menu'></div>").appendTo("#designer_canvas");for(var a=SchemaGroup.getGroup(e),o=0;o<a.length;o++){var s=a[o],l=Schema.shapes[s];if(l.attribute.visible){var p=$("<div class='dashboard_box' shapeName='"+s+"'><canvas title='"+l.title+"' title_pos='right' width='"+Designer.config.panelItemWidth+"' height='"+Designer.config.panelItemHeight+"'></canvas></div>").appendTo(r).children("canvas")[0];Designer.painter.drawPanelItem(p,l.name)}}r.on("touchstart",function(e){e.stopPropagation()})}r.css({left:t,top:i,"z-index":Model.maxZIndex+3}).show();var h=$("#designer_layout").width()-10,d=$("#designer_layout").height()-10,c=$("#designer_layout").offset(),u=r.innerWidth(),g=r.innerHeight(),y=r.offset();return y.left<c.left?t+=c.left-y.left:y.left+u>c.left+h&&(t-=y.left+u-(c.left+h)),y.top<c.top?i+=c.top-y.top:y.top+g>c.top+d&&(i-=y.top+g-(c.top+d)),r.css({left:t,top:i}),$(".dashboard_box").off().on("click",function(){var e=$(this).attr("shapeName");n(e),r.hide(),$(document).off("touchstart.group_dashboard")}),$(document).on("touchstart.group_dashboard",function(){r.hide(),$(document).off("touchstart.group_dashboard")}),r},showPanelGroup:function(e,t,i){t.preventDefault(),t.stopPropagation();var n=$("#group_dashboard_"+e);if($(".group_dashboard").hide(),0==n.length){n=$("<div id='group_dashboard_"+e+"' class='group_dashboard menu'></div>").appendTo("#designer");for(var r=SchemaGroup.getGroup(e),a=0;a<r.length;a++){var o=r[a],s=Schema.shapes[o];if(s.attribute.visible){var l=$("<div class='panel_box' shapeName='"+o+"'><canvas title='"+s.title+"' title_pos='right' width='"+Designer.config.panelItemWidth+"' height='"+Designer.config.panelItemHeight+"'></canvas></div>").appendTo(n).children("canvas")[0];Designer.painter.drawPanelItem(l,s.name)}}n.css("position","fixed")}var p=$(i).parent(),h=p.offset();n.show();var d=h.top+p.outerHeight()-2;d+n.outerHeight()>$(window).height()&&(d=$(window).height()-n.outerHeight()),n.css({left:h.left-5,top:d}),$(document).bind("touchend.group_board",function(e){e.preventDefault(),n.hide(),$(document).unbind("touchend.group_board")})},changeShapeProps:function(e,t,i){function n(i){if(void 0!==t.x&&(i.x+=t.x-e.props.x),void 0!==t.y&&(i.y+=t.y-e.props.y),void 0!==t.w||void 0!==t.h||void 0!==t.angle){var n=$.extend({},e.props,t),r={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2},a=Utils.getRotated(r,i,-e.props.angle),o=e.props.w,s=e.props.h;void 0!==t.w?(i.x=e.props.x+(a.x-e.props.x)/e.props.w*t.w,o=t.w):i.x=a.x,void 0!==t.h?(i.y=e.props.y+(a.y-e.props.y)/e.props.h*t.h,s=t.h):i.y=a.y;var l={x:e.props.x+o/2,y:e.props.y+s/2},p=Utils.getRotated(l,i,n.angle);i.x=p.x,i.y=p.y}void 0!==t.angle&&(i.angle+=t.angle-e.props.angle)}var r=[],a=(i=i||[],Model.getShapeLinkers(e.id));if(a&&a.length>0)for(var o=0;o<a.length;o++){var s=a[o],l=Model.getShapeById(s);e.id==l.from.id&&i.indexOf(l.id)<0&&n(l.from),e.id==l.to.id&&i.indexOf(l.id)<0&&n(l.to),i.indexOf(l.id)<0&&r.push(l.id)}return $.extend(e.props,t),Designer.painter.renderShape(e),Utils.showLinkerCursor(),UI.showShapeOptions(),r},googleImgCallback:function(e){for(var t=e.responseData.results,i=0;i<t.length;i++){var n=t[i];UI.appendGoogleImage(n)}$("#google_image_items").append("<div style='clear: both'></div>"),$(".img_gg_loading_tip").remove(),$(".gg_img_more").remove(),this.searchIndex<=3&&$("#google_image_items").append("<div onclick='UI.loadGoogleImg()' class='gg_img_more toolbar_button active'></div>")},scrollStv:null,scrollIsOver:!1,scrollLayout:null,scrollPos:{},initScrollPos:function(){var e=$("#designer");this.scrollLayout=$("#designer_layout"),this.scrollPos.b=e.height()+e.offset().top-30,this.scrollPos.t=e.offset().top+20,this.scrollPos.l=e.find("#shape_panel").width()+20,this.scrollPos.r=e.width()-20},isScroll:function(e,t){e<this.scrollPos.l?this.startScroll("l"):e>this.scrollPos.r?this.startScroll("r"):t<this.scrollPos.t?this.startScroll("t"):t>this.scrollPos.b?this.startScroll("b"):this.scrollIsOver&&this.stopScroll()},stopScroll:function(){window.clearInterval(this.scrollStv),this.scrollStv=null,this.scrollIsOver=!1},startScroll:function(e){var t=this;t.scrollIsOver||(t.scrollIsOver=!0,t.scrollStv=setInterval(function(){t.scrolling(e)},20))},scrolling:function(e){var t=this.scrollLayout;switch(e){case"t":t.scrollTop(t.scrollTop()-5);break;case"b":t.scrollTop(t.scrollTop()+5);break;case"l":break;case"r":t.scrollLeft(t.scrollLeft()+5)}},uploading:!1,uploadImage:function(e){return new Promise(function(t,i){poAjax({data:{img:e},success:function(e){t(e.url)},error:function(e){t(null)}},"uploadImage64")})},changeCanvas:function(e){if(Model.define.page.showPrintLine){var t=Utils.getPrintPageSize(),i=Model.define.page.width,n=Model.define.page.height;t.width==i&&t.height==n||Designer.setPageStyle({width:t.width,height:t.height})}else{i=Model.define.page.width,n=Model.define.page.height;var r=e.x,a=e.y,o=e.w,s=e.h,l={};"landscape"==Model.define.page.orientation?(r+o>n&&(l.height=Math.floor(r+o)+30),a+s>i&&(l.width=Math.floor(a+s)+30)):(r+o>i&&(l.width=Math.floor(r+o)+30),a+s>n&&(l.height=Math.floor(a+s)+30)),(l.width||l.height)&&Designer.setPageStyle(l)}}},events:{push:function(e,t){var i=this.listeners[e];if(i){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.apply(void 0,[t].concat(r))}return null},listeners:{},addEventListener:function(e,t){this.listeners[e]=t}},clipboard:{brush:function(){var e=Utils.getSelected();if(0!=e.length){for(var t={fontStyle:{},lineStyle:{},fillStyle:null,shapeStyle:null},i=0;i<e.length;i++){var n=e[i];if("linker"==n.name)$.extend(t.lineStyle,n.lineStyle),$.extend(t.fontStyle,n.fontStyle);else{null==t.fillStyle&&(t.fillStyle={}),null==t.shapeStyle&&(t.shapeStyle={});var r=Utils.getGridSelectedCells();if(r.length>0)for(var a=0;a<r.length;a++){var o=r[a].textBlock,s=r[a].path;$.extend(t.fontStyle,o.fontStyle),$.extend(t.fillStyle,s.fillStyle)}else $.extend(t.lineStyle,n.lineStyle),$.extend(t.fontStyle,n.fontStyle),$.extend(t.shapeStyle,n.shapeStyle),$.extend(t.fillStyle,n.fillStyle)}}delete t.fontStyle.orientation,$("#po-flow-brush").button("select").attr("title","格式刷生效中  ESC取消"),$(document).off("keydown.cancelbrush").on("keydown.cancelbrush",function(e){27==e.keyCode&&Designer.events.push("useBrush","unbrush")}),Utils.selectCallback=function(){for(var e=Utils.getSelected(),i=0;i<e.length;i++){var n=e[i];if("grid"==n.category){var r=Utils.getGridSelectedCells();if(r.length>0)for(var a=0;a<r.length;a++){var o=r[a].textBlock,s=r[a].path;o.fontStyle=t.fontStyle,s.fillStyle=t.fillStyle}}else $.extend(n.lineStyle,t.lineStyle),$.extend(n.fontStyle,t.fontStyle),"linker"!=n.name?(n.lineStyle=t.lineStyle,delete n.lineStyle.beginArrowStyle,delete n.lineStyle.endArrowStyle,null!=t.fillStyle&&(n.fillStyle=t.fillStyle),null!=t.shapeStyle&&(n.shapeStyle=t.shapeStyle)):(n.fontStyle&&delete n.fontStyle.vAlign,n.lineStyle&&0==n.lineStyle.lineWidth&&(n.lineStyle.lineWidth=.5));"linker"!=n.name&&Schema.initShapeFunctions(n),Designer.painter.renderShape(n)}Model.updateMulti(e)}}}},addFunction:function(e,t){if(Designer[e])throw"Duplicate function name!";this[e]=t},painter:{actions:{move:function(e){this.moveTo(e.x,e.y),this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},line:function(e){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth){for(var t=this.webkitLineDash,i=this.prePoint,n=0,r=1/Utils.measureDistance(i,e),a=i,o=0,s=!0;n<1;){(n+=r)>1&&(n=1);var l={x:(1-n)*i.x+n*e.x,y:(1-n)*i.y+n*e.y};(Utils.measureDistance(a,l)>=t[o]||n>=1)&&(s?this.lineTo(l.x,l.y):this.moveTo(l.x,l.y),s=!s,a=l,++o>=t.length&&(o=0))}this.moveTo(e.x,e.y)}else this.lineTo(e.x,e.y);this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},curve:function(e){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth){for(var t=this.webkitLineDash,i=this.prePoint,n=0,r=1/Utils.measureDistance(i,e),a=i,o=0,s=!0,l=0;n<1;){(n+=r)>1&&(n=1);var p={x:i.x*Math.pow(1-n,3)+e.x1*n*Math.pow(1-n,2)*3+e.x2*Math.pow(n,2)*(1-n)*3+e.x*Math.pow(n,3),y:i.y*Math.pow(1-n,3)+e.y1*n*Math.pow(1-n,2)*3+e.y2*Math.pow(n,2)*(1-n)*3+e.y*Math.pow(n,3)};if(Utils.measureDistance(a,p)>=t[o]||n>=1){if(s){var h=l+(n-l)/2,d={x:i.x*Math.pow(1-h,3)+e.x1*h*Math.pow(1-h,2)*3+e.x2*Math.pow(h,2)*(1-h)*3+e.x*Math.pow(h,3),y:i.y*Math.pow(1-h,3)+e.y1*h*Math.pow(1-h,2)*3+e.y2*Math.pow(h,2)*(1-h)*3+e.y*Math.pow(h,3)};this.lineTo(d.x,d.y),this.lineTo(p.x,p.y)}else this.moveTo(p.x,p.y);s=!s,a=p,l=n,++o>=t.length&&(o=0)}}this.moveTo(e.x,e.y)}else this.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y);this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},quadraticCurve:function(e){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth){for(var t=this.webkitLineDash,i=this.prePoint,n=0,r=1/Utils.measureDistance(i,e),a=i,o=0,s=!0,l=0;n<1;){(n+=r)>1&&(n=1);var p={x:i.x*Math.pow(1-n,2)+e.x1*n*(1-n)*2+e.x*Math.pow(n,2),y:i.y*Math.pow(1-n,2)+e.y1*n*(1-n)*2+e.y*Math.pow(n,2)};if(Utils.measureDistance(a,p)>=t[o]||n>=1){if(s){var h=l+(n-l)/2,d={x:i.x*Math.pow(1-h,2)+e.x1*h*(1-h)*2+e.x*Math.pow(h,2),y:i.y*Math.pow(1-h,2)+e.y1*h*(1-h)*2+e.y*Math.pow(h,2)};this.lineTo(d.x,d.y),this.lineTo(p.x,p.y)}else this.moveTo(p.x,p.y);s=!s,a=p,l=n,++o>=t.length&&(o=0)}}this.moveTo(e.x,e.y)}else this.quadraticCurveTo(e.x1,e.y1,e.x,e.y);this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},close:function(){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth)for(var e=this.webkitLineDash,t=this.prePoint,i=this.beginPoint,n=0,r=1/Utils.measureDistance(t,i),a=t,o=0,s=!0;n<1;){(n+=r)>1&&(n=1);var l={x:(1-n)*t.x+n*i.x,y:(1-n)*t.y+n*i.y};(Utils.measureDistance(a,l)>=e[o]||n>=1)&&(s?this.lineTo(l.x,l.y):this.moveTo(l.x,l.y),s=!s,a=l,++o>=e.length&&(o=0))}this.closePath()},rect:function(e,t,i){t&&"none"==t.type?(t={color:"transparent"},this.fillStyle="transparent"):(t=t||{color:"255,255,255"},this.fillStyle="rgb("+t.color+")"),i=i||{},this.fillRect(e.x,e.y,e.w,e.h),this.strokeStyle="rgb("+i.lineColor+")",this.lineWidth=i.lineWidth,this.strokeRect(e.x,e.y,e.w,e.h)}},setLineDash:function(e,t){e.setLineDash||(e.setLineDash=function(){}),e.setLineDash(t),e.mozDash=t,e.webkitLineDash=t},renderShapePath:function(e,t,i,n,r){var a;a=i&&t.drawIcon?t.drawIcon(t.props.w,t.props.h):t.getPath(),r&&(i=r),this.renderPath(e,t,a,i,n)},renderPath:function(e,t,i,n,r){var a=Utils.getShapeFillStyle(t.fillStyle,!n),o=Utils.getShapeLineStyle(t.lineStyle,!n);if("grid"==t.category&&t.merge&&i.length>1)for(var s=t.merge||[],l=0;l<s.length;l++){var p=s[l],h=p[0],d=p[p.length-1];i[h].actions[0].w=i[d].actions[0].w+i[d].actions[0].x-i[h].actions[0].x,i[h].actions[0].h=i[d].actions[0].h+i[d].actions[0].y-i[h].actions[0].y;for(var c=1;c<p.length;c++)i[p[c]].jump=!0}for(l=0;l<i.length;l++){var u=i[l];e.save();var g=$.extend({},o,u.lineStyle),y=$.extend({},a,u.fillStyle);if("grid"!=t.category){var f=!1;if("solid"!=g.lineStyle&&void 0===e.lineDashOffset&&"none"!=y.type&&(f=!0),f){e.save(),e.beginPath(),e.lineWidth=0,delete e.webkitLineDash;for(c=0;c<u.actions.length;c++){v=u.actions[c];this.actions[v.action].call(e,v)}this.fillShape(t,e,y,r),e.restore()}e.beginPath(),e.beginPoint=null,g.lineWidth?(e.lineWidth=g.lineWidth,"dashed"==g.lineStyle?n?this.setLineDash(e,[3*g.lineWidth,1*g.lineWidth]):this.setLineDash(e,[5*g.lineWidth,2*g.lineWidth]):"dot"==g.lineStyle?this.setLineDash(e,[g.lineWidth,1.5*g.lineWidth]):"dashdot"==g.lineStyle?this.setLineDash(e,[5*g.lineWidth,2*g.lineWidth,g.lineWidth,2*g.lineWidth]):delete e.webkitLineDash):(e.lineWidth=0,delete e.webkitLineDash);for(c=0;c<u.actions.length;c++){v=u.actions[c];1==g.lineWidth&&(v.x+=.5,v.y+=.5),this.actions[v.action].call(e,v)}0==f&&this.fillShape(t,e,y,r),g.lineWidth&&(e.lineWidth=g.lineWidth,e.strokeStyle="rgb("+g.lineColor+")",e.stroke()),e.restore()}else{if(u.jump)continue;for(var c=0,x=u.actions.length;c<x;c++){var v=u.actions[c];n||"rect"!=v.action||(t.theme=t.theme||{},"header"==t.theme.name?y=0==u.row?"255,255,255"==a.color?$.extend({},{type:"solid",color:"240, 240, 240"},t.theme.row[0].fillStyle,u.fillStyle):$.extend({},a,t.theme.row[0].fillStyle,u.fillStyle):$.extend({},a,t.theme.row[1].fillStyle,u.fillStyle):"striping"==t.theme.name&&(t.theme.row&&(y="255,255,255"==a.color?$.extend({},{type:"solid",color:"240, 240, 240"},t.theme.row[u.row%2].fillStyle,u.fillStyle):$.extend({},a,t.theme.row[u.row%2].fillStyle,u.fillStyle)),t.theme.column&&(y="255,255,255"==a.color?$.extend({},{type:"solid",color:"240, 240, 240"},t.theme.column[u.column%2].fillStyle,u.fillStyle):$.extend({},a,t.theme.column[u.column%2].fillStyle,u.fillStyle)))),this.actions[v.action].call(e,v,y,g)}e.restore()}}},drawImage:function(e,t){var i=$(".shape_img[src='"+t.image+"']");0==i.length?((i=$("<img class='shape_img' loaded='0' src=''/>").appendTo("#shape_img_container")).bind("load.drawshape",function(){e.drawImage(i[0],t.x,t.y,t.w,t.h),$(this).attr("loaded","1")}),i.attr("src",t.image)):"0"==i.attr("loaded")?i.bind("load.drawshape",function(){e.drawImage(i[0],t.x,t.y,t.w,t.h)}):e.drawImage(i[0],t.x,t.y,t.w,t.h)},drawPanelItem:function(e,t,i,n){var r,a,o=e.getContext("2d"),s=Utils.copy(Schema.shapes[t]||Schema.shapes_[t]),l=i||Designer.config.panelItemWidth,p=n||Designer.config.panelItemHeight;("ui"==s.category||"ui_input"==s.category||s.category.indexOf("ios_")>=0||s.category.indexOf("andriod_")>=0)&&(l=30,p=30);var h={x:0,y:0,w:s.props.w,h:s.props.h,height:s.props.height,angle:s.props.angle};if(o.clearRect(0,0,l,p),null!==(a=(r=s.lineStyle).lineWidth)&&void 0!==a||(r.lineWidth=3),h.w>=l||h.h>=l){var d=Utils.getShapeLineStyle(s.lineStyle,!1);s.props.w>=s.props.h?(h.w=l-2*d.lineWidth,h.h=parseInt(s.props.h/s.props.w*h.w)):(h.h=p-2*d.lineWidth,h.w=parseInt(s.props.w/s.props.h*h.h))}s.props=h,o.save(),o.lineJoin="round",o.globalAlpha=s.shapeStyle.alpha;var c=(l-h.w)/2,u=(p-h.h)/2;o.translate(c,u),o.translate(h.w/2,h.h/2),o.rotate(h.angle),o.translate(-h.w/2,-h.h/2),this.renderShapePath(o,s,!0,function(){Designer.painter.drawPanelItem(e,t)}),this.renderMarkers(o,s,!0),o.restore()},drawPanelItemByShape:function drawPanelItemByShape(canvas,myshape,config){var myshape=Utils.copy(myshape),ctx=canvas.getContext("2d"),itemW=Designer.config.panelItemWidth-2,itemH=Designer.config.panelItemHeight-2,padding=1,isPanel=!0;config&&(itemW=config.width-2,itemH=config.height-2,padding=config.padding,isPanel=0!=config.isPanel);var boxPos={x:0,y:0,w:myshape.boxPos.w,h:myshape.boxPos.h,height:myshape.boxPos.height},scale=1;myshape.boxPos.w>=myshape.boxPos.h?myshape.boxPos.w>itemW&&(scale=itemW/myshape.boxPos.w,boxPos.w=itemW,boxPos.h=parseInt(myshape.boxPos.h/myshape.boxPos.w*boxPos.w)):myshape.boxPos.h>itemH&&(scale=itemH/myshape.boxPos.h,boxPos.h=itemH,boxPos.w=parseInt(myshape.boxPos.w/myshape.boxPos.h*boxPos.h)),myshape.boxPos=boxPos;for(var i=0;i<myshape.elements.length;i++){var shape=myshape.elements[i];if("linker"==shape.name){if(shape.from=resetPos(shape.from),shape.to=resetPos(shape.to),"broken"==shape.linkerType||"curve"==shape.linkerType)for(var j=0;j<shape.points.length;j++)shape.points[j]=resetPos(shape.points[j]);ctx.save(),ctx.lineJoin="round",shape.lineStyle.lineWidth=isPanel&&shape.lineStyle.lineWidth>.5?shape.lineStyle.lineWidth:.5,shape.lineStyle.lineColor||(shape.lineStyle.lineColor="50,50,50"),Designer.painter.renderPanelLinker(ctx,shape),ctx.restore()}else{var heightArr=[];shape.props.height&&heightArr.push(shape.props.height[0]*scale);var props={x:shape.props.x*scale,y:shape.props.y*scale,w:shape.props.w*scale,h:shape.props.h*scale,height:heightArr,angle:shape.props.angle};shape.props=props,ctx.save(),ctx.lineJoin="round",ctx.globalAlpha=shape.shapeStyle.alpha;var translateX=(itemW-boxPos.w)/2+shape.props.x,translateY=(itemH-boxPos.h)/2+shape.props.y;ctx.translate(translateX+padding,translateY+padding),ctx.translate(props.w/2,props.h/2),ctx.rotate(props.angle),ctx.translate(-props.w/2,-props.h/2),shape.lineStyle.lineWidth=isPanel&&shape.lineStyle.lineWidth>1?shape.lineStyle.lineWidth:1,"verticalPool"==shape.name&&(shape.drawIcon=function(e,t){var i=-4;return[{fillStyle:{type:"none"},actions:[{action:"move",x:i,y:0},{action:"line",x:e+=8,y:0},{action:"line",x:e,y:t},{action:"line",x:i,y:t},{action:"close"}]},{actions:[{action:"move",x:i,y:0},{action:"line",x:e,y:0},{action:"line",x:e,y:4},{action:"line",x:i,y:4},{action:"close"}]},{actions:[{action:"move",x:(i+e)/2,y:4},{action:"line",x:(i+e)/2,y:t}]}]}),shape.name.indexOf("Lane")>-1&&(shape.getPath=eval("(function(){return "+shape.getPath+" })()")),shape.name.indexOf("Separator")>-1&&(shape.getPath=eval("(function(){return "+shape.getPath+" })()")),shape.name.indexOf("note")>-1&&(shape.getPath=shape.getPath.toString().replace(/16/g,16*scale),shape.getPath=eval("(function(){return "+shape.getPath+" })()")),"text"==shape.name&&(shape.path[0].lineStyle.lineWidth=1,Schema.initShapeFunctions(shape)),shape.name.indexOf("Pool")>-1&&shape.children.length>0||this.renderShapePath(ctx,shape,!1,function(){Designer.painter.drawPanelItemByShape(canvas,myshape,config)},isPanel),this.renderMarkers(ctx,shape,!0),ctx.restore()}}function resetPos(e){return e.x=(e.x*scale+(itemW-boxPos.w)/2+padding)/2,e.y=(e.y*scale+(itemH-boxPos.h)/2+padding)/2,Utils.copy(e)}},drawChart:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("undefined"!=typeof components){var r,a=t.category,o=Utils.copy(t.drawChart);if(""!==i&&o[i])$.extend(!0,o.options,o[i],n),o.options.data=null!==(r=o[i].data)&&void 0!==r?r:o.options.data;var s=Object.assign({},o.info,{cdom:e})||{},l=o.options;Designer.painter.bindNewChart(a,s,l).init()}},bindNewChart:function(e,t,i){var n={chart_line:"ChartLine",chart_column:"ChartColumn",chart_bar:"ChartBar",chart_scatter:"ChartScatter",chart_bubble:"ChartScatter",chart_pie:"ChartPie"}[e];if(!n)throw new Error("未定义的图表类型：".concat(e));var r=components[n];if(!r)throw new Error("未定义的类：".concat(n));return new r(t,i)},toDataURL:function(e,t){var i=e.renderer,n="";if("svg"===i){var r=t.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),o=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a);o.replaceChild(r,o.documentElement);var s=(new XMLSerializer).serializeToString(o);n="data:image/svg+xml;charset=utf8,"+encodeURIComponent(s)}else"canvas"===i&&(n=t.toDataURL("image/png"));return n},createPanel:function(){var e=Utils.getSelectedShapeIds()[0],t=Model.getShapeById(e),i=t.category,n=$("#po-flow-dock-layout-chartdata .add-chartdata-container");n.removeClass("tableDataBase"),n.html("");var r=$("#"+e)[0],a=t.drawChart;a.canvas&&$.extend(!0,a.options,a.canvas,{autoFit:!1}),Designer.painter.bindNewChart(i,{cdom:r,tdom:n[0]},a.options).createTableContainer(function(i){var n=Model.getShapeById(e);$("#"+e).children("div").length>1&&$("#"+e).children("div:first").remove(),$.extend(!0,a.options,i),$.extend(!0,a.canvas,i),i.data&&(a.options.data=i.data,a.canvas.data=i.data),t.props=n.props,Model.update(t)}),!$("#po-flow-dock-layout-chartdata").hasClass("hide")&&$("#po-flow-dock-layout").hasClass("show")?(Dock.hide(),$("#po-flow-dock-layout-chartdata").addClass("hide")):(Dock.show("chartdata"),$("#po-flow-dock-layout-chartdata").removeClass("hide")),$(".pop-sub-editor>div[data-key!='editData']").removeClass("active"),$(".pop-sub-editor>div[data-key='editData']").toggleClass("active"),$("#pop-sub-editor-menu").removeClass("show")},renderPanelLinker:function(e,t){"curve"!=t.linkerType&&"broken"!=t.linkerType||t.points&&0!=t.points.length||(t.points=Utils.getLinkerPoints(t));var i=t.points,n=Utils.copy(t.from),r=Utils.copy(t.to),a=Utils.isMac();a&&e.scale(2,2);var o=Utils.getLinkerLineStyle(t.lineStyle);e.lineWidth=o.lineWidth,e.strokeStyle="rgb("+o.lineColor+")",e.fillStyle="rgb("+o.lineColor+")",e.save();var s={x:n.x,y:n.y},l={x:r.x,y:r.y};1==o.lineWidth&&(s.x+=.5,s.y+=.5,l.x+=.5,l.y+=.5),e.save(),"dashed"==o.lineStyle?this.setLineDash(e,[5*o.lineWidth,2*o.lineWidth]):"dot"==o.lineStyle?this.setLineDash(e,[o.lineWidth,1.5*o.lineWidth]):"dashdot"==o.lineStyle&&this.setLineDash(e,[5*o.lineWidth,2*o.lineWidth,o.lineWidth,2*o.lineWidth]);Model.define.page.lineJumps;e.lineJoin="round",e.beginPath(),this.actions.move.call(e,s);if("curve"==t.linkerType){var p=i[0],h=i[1],d={x1:p.x,y1:p.y,x2:h.x,y2:h.y,x:l.x,y:l.y};this.actions.curve.call(e,d)}else{var c=n;c.y=Math.round(c.y);var u=0,g=0;1==o.lineWidth&&(u=.5,g=.5,8);var y=Utils.copyArray(i);2==i.length&&i[0].x==i[1].x&&i[0].y==i[1].y&&(y=[]),y.push(r);for(var f=0;f<y.length;f++){var x=y[f];if(x.y=Math.round(x.y),x.x!=c.x||x.y!=c.y){var v=x.x+u,m=x.y+g;this.actions.line.call(e,{x:v,y:m}),c=x}}}e.stroke(),e.restore(),delete e.webkitLineDash,e.restore()},renderShape:function(e){if("linker"!=e.name){Utils.formattedShape(e);var t=$("#"+e.id);if(0==t.length){var i=$("#designer_canvas");if(e.name.startsWith("chart_")){t=$("<div id='"+e.id+"' class='shape_box'></div>").appendTo(i);var n=180*e.props.angle/Math.PI;t.css("transform","rotate("+n+"deg)"),Designer.painter.drawChart(t[0],e,"canvas",{autoFit:!1})}else t=$("<div id='"+e.id+"' class='shape_box'><canvas class='shape_canvas'></canvas></div>").appendTo(i)}e.attribute&&e.attribute.collapseBy?t.hide():t.show();var r=Utils.isMac(),a=1;r&&(a=2);var o=Utils.getShapeBox(e);if(e.category.includes("chart_")&&(o=e.props),e.category.includes("chart_"))var s=o.w,l=o.h,p=o.x+"px",h=o.y+"px";else s=o.w+20,l=o.h+20,p=o.x-10+"px",h=o.y-10+"px";var d=t.find(".shape_canvas")[0].getContext("2d");t.find(".shape_canvas").attr({width:s*a,height:l*a}),t.css({left:p,top:h,width:s,height:l});var c=e.props;r&&d.scale(a,a),d.clearRect(0,0,c.w+20,c.h+20),d.translate(10,10),d.translate(c.x-o.x,c.y-o.y),d.translate(c.w/2,c.h/2),d.rotate(c.angle),d.translate(-c.w/2,-c.h/2),d.globalAlpha=e.shapeStyle.alpha,d.lineJoin="round",e.name.startsWith("chart_")?(t.children().remove(),Designer.painter.drawChart(t[0],e,"canvas")):this.renderShapePath(d,e,!1,function(){Designer.painter.renderShape(e)}),r&&t.find(".shape_canvas").css({width:s+"px",height:l+"px"}),this.renderMarkers(d,e);var u=e.getPath(),g=Utils.copy(u[u.length-1]);g.fillStyle={type:"none"},g.lineStyle={lineWidth:0};var y=[g];if(this.renderPath(d,e,y,null,null,!0),this.renderText(e,o),this.renderDataAttributes(e,o),this.renderShapeLink(e,o),t.children(".shape_comment_ico").remove(),showCommentIco){var f=!1;if(Model.comments&&Model.comments.length>0)for(var x=0;x<Model.comments.length;x++){if(Model.comments[x].shapeId==e.id){f=!0;break}}if(f)$("<div class='shape_comment_ico'></div>").appendTo(t).bind("mousedown",function(t){t.stopPropagation(),Dock.show("comment"),Utils.selectShape(e.id)})}Designer.updateShapeToImg(e)}else this.renderLinker(e)},fillShape:function(e,t,i,n){if(t.save(),"none"!=i.type&&void 0!==i.alpha&&(t.globalAlpha=i.alpha),"solid"==i.type)t.fillStyle="rgb("+i.color+")",t.fill();else if("gradient"==i.type){var r;r="linear"==i.gradientType?GradientHelper.createLinearGradient(e,t,i):GradientHelper.createRadialGradient(e,t,i),t.fillStyle=r,t.fill()}else if("image"==i.type){var a;"standardImage"==e.name&&!1===e.attribute.linkable&&(e.attribute.linkable=!0),i.fileId.startsWith("data:image/")?a=i.fileId:i.fileId.indexOf("qiniu/")>=0?a=i.fileId.replace(/^qiniu/,"http://7xpicf.com1.z0.glb.clouddn.com"):0==i.fileId.indexOf("http")?(a=i.fileId).indexOf("orgu2a928.bkt.clouddn.com")>=0?a=a.replace("orgu2a928.bkt.clouddn.com","cdn2.processon.com"):a.indexOf("7xt9nt.com1.z0.glb.clouddn.com")>=0?a=a.replace("7xt9nt.com1.z0.glb.clouddn.com","cdn.processon.com"):a.indexOf("p7o7ul1nf.bkt.clouddn.com")>=0&&(a=a.replace("p7o7ul1nf.bkt.clouddn.com","cdn1.processon.com")):i.fileId.indexOf("/images/")>=0?(a=-1==i.fileId.indexOf("/assets")?staticBasePath+"/assets"+i.fileId:staticBasePath+i.fileId,localRuntime&&(a="http://localhost:8080"+a)):(a="https://cdn.processon.com/"+i.fileId,localRuntime&&(a="http://localhost:8080"+a)),Utils.isFirefox()&&(a+="?s=100_100");var o=$(".shape_img[src='"+a+"']");0==o.length?((o=$("<img class='shape_img' loaded='0' src=''/>").appendTo("#shape_img_container")).bind("load.drawshape",function(){$(this).attr("loaded","1"),n&&n()}),o.attr("src",a)):"0"==o.attr("loaded")?o.bind("load.drawshape",function(){n&&n()}):function(n){if(t.save(),t.clip(),"fit"==i.display){var r=n.width(),a=n.height(),o=r/a,s=e.props.w/e.props.h;if(o>s){var l=e.props.w,p=0,h=l/o,d=e.props.h/2-h/2;t.drawImage(n[0],p,d,l,h)}else{var h=e.props.h,d=0,l=h*o,p=e.props.w/2-l/2;t.drawImage(n[0],p,d,l,h)}}else if("stretch"==i.display)t.drawImage(n[0],0,0,e.props.w,e.props.h);else if("original"==i.display){var r=n.width(),a=n.height(),p=e.props.w/2-r/2,d=e.props.h/2-a/2;t.drawImage(n[0],p,d,r,a)}else if("tile"==i.display)for(var p=0,r=n.width(),a=n.height();p<e.props.w;){for(var d=0;d<e.props.h;)t.drawImage(n[0],p,d,r,a),d+=a;p+=r}else if("static"==i.display){var p=0,r=n.width(),a=n.height();t.drawImage(n[0],i.imageX,i.imageY,r,a)}else{var r=n.width(),a=n.height(),o=r/a,s=e.props.w/e.props.h;if(o>s){var h=e.props.h,d=0,l=h*o,p=e.props.w/2-l/2;t.drawImage(n[0],p,d,l,h)}else{var l=e.props.w,p=0,h=l/o,d=e.props.h/2-h/2;t.drawImage(n[0],p,d,l,h)}}t.restore()}(o)}t.restore()},renderText:function(e,t){var i=$("#"+e.id),n=e.getTextBlock();if("grid"==e.category&&e.merge)for(var r=e.merge||[],a=0;a<r.length;a++){var o=r[a],s=o[0],l=o[o.length-1];n[s].position.w=n[l].position.w+n[l].position.x-n[s].position.x,n[s].position.h=n[l].position.h+n[l].position.y-n[s].position.y;for(var p=1;p<o.length;p++)n[o[p]].jump=!0}i.find(".text_canvas").remove();for(a=0;a<n.length;a++){var h=n[a];if(!h.jump){var d=$("#text_"+e.id+"_"+a);if(0==d.length&&(d=$("<div contenteditable=true id='text_"+e.id+"_"+a+"' spellcheck=false class='text_canvas' forshape='"+e.id+"' ind='"+a+"'></div>").appendTo(i)).bind("focus",function(){$(this).blur()}),d.attr("readonly","readonly"),h.text&&""!=h.text.trim()){var c=Utils.getShapeFontStyle(e.fontStyle),u=(c=$.extend({},c,h.fontStyle)).fontFamily;localRuntime&&Utils.containsChinese(h.text)&&!Utils.containsChinese(u)&&(u="宋体");var g={"line-height":100*c.lineHeight+"%","font-size":c.size+"px","font-family":u,"font-weight":c.bold?"bold":"normal","font-style":c.italic?"italic":"normal","text-align":c.textAlign,color:"rgb("+c.color+")","text-decoration":c.underline?"underline":c.middleline?"line-through":"none",opacity:e.shapeStyle.alpha,"word-wrap":"break-word"};d.css(g),d.show();var y=h.position;if("horizontal"==c.orientation){var f={x:y.x+y.w/2,y:y.y+y.h/2};y={x:f.x-y.h/2,y:f.y-y.w/2,w:y.h,h:y.w}}d.css({width:y.w});var x=h.text.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;");"undefined"==typeof isNewTextV||isNewTextV||(x=(x=(x=(x=(x=(x=(x=(x=(x=x.replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/&lt;br&gt;/gi,"<br>")).replace(/&lt;b&gt;/gi,"<b>").replace(/&lt;\/b&gt;/gi,"</b>")).replace(/&lt;div&gt;/gi,"<div>").replace(/&lt;\/div&gt;/gi,"</div>")).replace(/&lt;i&gt;/gi,"<i>").replace(/&lt;\/i&gt;/gi,"</i>")).replace(/&lt;u&gt;/gi,"<u>").replace(/&lt;\/u&gt;/gi,"</u>")).replace(/&lt;font/gi,"<font").replace(/\"&gt;/gi,'">').replace(/&lt;\/font&gt;/gi,"</font>")).replace(/&lt;span/gi,"<span").replace(/&lt;\/span&gt;/gi,"</span>")).replace(/&lt;p/gi,"<p").replace(/&lt;\/p&gt;/gi,"</p>")),d.html(x),insert.equation.renderEquation(d);var v=d.height(),m=0;m="middle"==c.vAlign?y.y+y.h/2-v/2:"bottom"==c.vAlign?y.y+y.h-v:y.y;var b={x:y.x+y.w/2,y:m+v/2},w=e.props.angle;if(0!=w){var S={x:e.props.w/2,y:e.props.h/2};b=Utils.getRotated(S,b,w)}"horizontal"==c.orientation&&(w=(1.5*Math.PI+w)%(2*Math.PI));var k=Math.round(w/(2*Math.PI)*360);e.category.includes("chart_")&&(k=0);var M="rotate("+k+"deg)",_=y.w,D=v;d.css({width:_,height:Utils.isFirefox()?D+1:D,left:b.x+(e.props.x-t.x)+10-y.w/2,top:b.y+(e.props.y-t.y)+10-v/2,"-webkit-transform":M,"-ms-transform":M,"-o-transform":M,"-moz-transform":M,transform:M})}else d.css({height:"0px",width:"0px"}).hide()}}},calculateTextLines:function(e,t,i){for(var n=t.w,r=(t.h,[]),a=e.split(/\n/),o=0;o<a.length;o++){var s=a[o];if(i.measureText(s).width<=n)r.push(s);else{for(var l=s.split(/\s/),p="",h=0;h<l.length;h++){var d=l[h];if(h!=l.length-1&&(d+=" "),i.measureText(d).width>n)for(var c=0;c<d.length;c++){var u=p+d[c];i.measureText(u).width>n?(r.push(p),p=d[c]):p=u}else{u=p+d;i.measureText(u).width>n?(r.push(p),p=d):p=u}}""!=p&&r.push(p)}}return r},renderMarkers:function(e,t,i){if(t.attribute&&t.attribute.markers&&t.attribute.markers.length>0){var n=t.attribute.markers,r=Schema.config.markerSize;i&&(r=10);var a=t.attribute.markerOffset;i&&(a=5);for(var o=n.length*r+4*(n.length-1),s=t.props.w/2-o/2,l=0;l<n.length;l++){var p=n[l];e.save(),e.translate(s,t.props.h-r-a);var h=Schema.markers[p].call(t,r);this.renderPath(e,t,h),e.restore(),s+=r+4}}},renderDataAttributes:function(e,t){if($("#"+e.id).children(".attr_canvas").remove(),$("#"+e.id).children(".attr_link").remove(),e.dataAttributes&&0!=e.dataAttributes.length)for(var i={x:e.props.w/2,y:e.props.h/2},n=Utils.getShapeFontStyle(e),r=0;r<e.dataAttributes.length;r++){var a=e.dataAttributes[r];if("none"!=a.showType){var o="",s="";a.showName&&(o=a.name+": "),"text"==a.showType?o+=a.value:"icon"==a.showType&&(s=a.icon),""==o&&""==s||l(a,o,s)}}function l(r,a,o){var s=r.horizontal,l=r.vertical,p=$("<canvas id='attr_canvas_"+r.id+"' class='attr_canvas'></canvas>").appendTo($("#"+e.id)),h=p[0].getContext("2d"),d="12px ",c=n.fontFamily;localRuntime&&Utils.containsChinese(a)&&!Utils.containsChinese(c)&&(c="宋体"),d+=c,h.font=d;var u=h.measureText(a).width,g=20;""!=o&&(u+=20);var y={x:"mostleft"==s?-u-2:"leftedge"==s?-u/2:"left"==s?2:"center"==s?(e.props.w-u)/2:"right"==s?e.props.w-u-2:"rightedge"==s?e.props.w-u/2:e.props.w+2,y:"mosttop"==l?-g:"topedge"==l?-10:"top"==l?0:"middle"==l?(e.props.h-g)/2:"bottom"==l?e.props.h-g:"bottomedge"==l?e.props.h-10:e.props.h,w:u,h:g},f=Utils.getRotatedBox(y,e.props.angle,i);p.attr({width:2*f.w,height:2*f.h}),p.css({width:f.w,height:f.h}),h.font=d;var x=f.x+(e.props.x-t.x)+10,v=f.y+(e.props.y-t.y)+10;if(p.css({left:x,top:v}),h.scale(2,2),h.translate(f.w/2,f.h/2),h.rotate(e.props.angle),h.translate(-f.w/2,-f.h/2),h.translate((f.w-y.w)/2,(f.h-y.h)/2),h.globalAlpha=e.shapeStyle.alpha,"link"==r.type?h.fillStyle="#4183C4":h.fillStyle="#333",h.textBaseline="middle",h.fillText(a,0,10),""!=o){var m=staticBasePath+"/assets/images/data_attr/"+o+".png";localRuntime&&(m="http://localhost:8080"+m),isNaN(parseInt(o))&&(m=o);var b=$(".shape_img[src='"+m+"']");0==b.length&&(b=$("<img class='shape_img' loaded='false' src='"+m+"'/>").appendTo("#shape_img_container")),"true"==b.attr("loaded")?h.drawImage(b[0],y.w-20,0,20,20):b.bind("load.drawshape",function(){$(this).attr("loaded","true"),h.drawImage(b[0],y.w-20,0,20,20)})}(h.beginPath(),h.rect(0,0,u,g),h.closePath(),"link"==r.type)&&$("<a href='"+r.value+"' target='_blank' class='attr_link'></canvas>").appendTo($("#"+e.id)).css({left:x,top:v,width:f.w,height:f.h,position:"absolute"})}},renderShapeLink:function(e,t){if(Designer.op.linkIconHide(),$("#"+e.id).children(".shape_link").remove(),e.link){var i=Math.round(e.props.angle/Math.PI*180),n=e.props,r={x:n.x+n.w/2,y:n.y+n.h/2},a=n.x+n.w-8-2,o=n.y+n.h-8-2,s=Utils.getRotated(r,{x:a,y:o},e.props.angle),l=$("<a target='_blank' data-shape-id='"+e.id+"' href='"+e.link+"' class='shape_link'></a>"),p=s.x-(t.x-10),h=s.y-(t.y-10);e.name.startsWith("chart_")&&(p-=10,h-=10),l.css({width:16,height:16,position:"absolute",left:p,top:h,transform:"translate(-50%,-50%) rotate("+i+"deg)"}).appendTo($("#"+e.id)),l.off().on("mousedown",function(e){e.stopPropagation()})}},renderLinker:function(e,t,i,n,r){t&&(e.points=Utils.getLinkerPoints(e,r,t)),"curve"!=e.linkerType&&"broken"!=e.linkerType||e.points&&0!=e.points.length||(e.points=Utils.getLinkerPoints(e,r));var a=e.points,o=Utils.copy(e.from),s=Utils.copy(e.to);if(e.attribute&&e.attribute.collapseBy)$("#"+e.id).hide();else{$("#"+e.id).show();var l=Utils.getEndpointAngle(e,"from");isNaN(l)&&(l=0);var p=Utils.getEndpointAngle(e,"to"),h=Utils.getLinkerLineStyle(e.lineStyle);G(o,e,h.beginArrowStyle,l),G(s,e,h.endArrowStyle,p);var d=s.x,c=s.y,u=o.x,g=o.y;s.x<o.x?(d=s.x,u=o.x):(d=o.x,u=s.x),s.y<o.y?(c=s.y,g=o.y):(c=o.y,g=s.y);for(var y=0;y<a.length;y++){var f=a[y];f.x<d?d=f.x:f.x>u&&(u=f.x),f.y<c?c=f.y:f.y>g&&(g=f.y)}var x={x:d,y:c,w:u-d,h:g-c},v=$("#"+e.id);if(0==v.length){var m=$("#designer_canvas");v=$("<div id='"+e.id+"' class='shape_box linker_box'><canvas class='shape_canvas'></canvas></div>").appendTo(m)}Model.getShapeById(e.id)||v.css("z-index",Model.orderList.length+1);var b=Utils.isMac(),w=1;b&&(w=2);var S=v.find(".shape_canvas");S.attr({width:(x.w+20)*w,height:(x.h+20)*w}),v.css({left:x.x-10,top:x.y-10,width:x.w+20,height:x.h+20});var k=S[0].getContext("2d");b&&k.scale(w,w),k.translate(10,10);var M=Utils.getLinkerLineStyle(e.lineStyle);k.lineWidth=M.lineWidth,k.strokeStyle="rgb("+M.lineColor+")",k.fillStyle="rgb("+M.lineColor+")",k.save();var _={x:o.x-x.x,y:o.y-x.y},D={x:s.x-x.x,y:s.y-x.y};1==M.lineWidth&&(_.x+=.5,_.y+=.5,D.x+=.5,D.y+=.5),k.save(),b&&S.css({width:x.w+20+"px",height:x.h+20+"px"}),"dashed"==M.lineStyle?this.setLineDash(k,[5*M.lineWidth,2*M.lineWidth]):"dot"==M.lineStyle?this.setLineDash(k,[M.lineWidth,1.5*M.lineWidth]):"dashdot"==M.lineStyle&&this.setLineDash(k,[5*M.lineWidth,2*M.lineWidth,M.lineWidth,2*M.lineWidth]);Model.define.page.lineJumps;k.lineJoin="round",k.beginPath(),this.actions.move.call(k,_);var U=null;if("curve"==e.linkerType){var P=a[0],L=a[1],I={x1:P.x-x.x,y1:P.y-x.y,x2:L.x-x.x,y2:L.y-x.y,x:D.x,y:D.y};this.actions.curve.call(k,I)}else{var C=o;C.y=Math.round(C.y);var B=0,T=0;1==M.lineWidth&&(B=.5,T=.5,U=8),a=Utils.margeLinker(e);var z=Utils.copyArray(a);2==a.length&&a[0].x==a[1].x&&a[0].y==a[1].y&&(z=[]),z.push(s);for(y=0;y<z.length;y++){var O=z[y];if(O.y=Math.round(O.y),O.x!=C.x||O.y!=C.y){if(n&&O.y==C.y&&O.x!=C.x&&M.lineWidth<6){for(var A=n.points,R=!1,W=0;W<A.length;W++){(F=A[W]).y==O.y&&Math.abs(F.x-O.x)<=6&&(R=!0)}if(R)continue;if(O.x<C.x)for(W=A.length-1;W>=0;W--){if((F=A[W]).y==O.y&&F.x>=O.x&&F.x<=C.x){var E=F.x-x.x+B,N=F.y-x.y+T;k.arc(E,N,6,0,Math.PI,!0)}}else for(W=0;W<A.length;W++){var F;if((F=A[W]).y==O.y&&F.x<O.x&&F.x>C.x){E=F.x-x.x+B,N=F.y-x.y+T;k.arc(E,N,6,Math.PI,0)}}}var K=O.x-x.x+B,j=O.y-x.y+T;this.actions.line.call(k,{x:K,y:j}),C=O}}}if(v.find(".linker_ends_point").remove(),this.hideLinkerControls(),Utils.isSelected(e.id))k.shadowBlur=4,k.shadowColor=Designer.config.selectorColor,"curve"==e.linkerType&&Utils.getSelectedIds().length,Utils.selectIds.length,v.css("z-index",Model.maxZIndex+1);else for(y=0;y<Model.orderList.length;y++)if(Model.orderList[y].id==e.id){v.css("z-index",y);break}k.stroke(),k.restore(),delete k.webkitLineDash,X(_,l,o.id,M.beginArrowStyle,e,o.angle,U),X(D,p,s.id,M.endArrowStyle,e,s.angle,U),k.restore(),this.renderLinkerText(e,t,i),Designer.updateShapeToImg(e)}function G(e,t,i,n){if(e.id){var r=Model.getShapeById(e.id);if(r){var a={x:0,y:0},o=Utils.getShapeLineStyle(r.lineStyle),s=Utils.getLinkerLineStyle(t.lineStyle);a.x="none"==i||"cross"==i?-o.lineWidth/2:"solidArrow"==i||"dashedArrow"==i?-o.lineWidth/2-1.3*s.lineWidth:"solidDiamond"==i||"dashedDiamond"==i?-o.lineWidth/2-s.lineWidth:-o.lineWidth/2-s.lineWidth/2;var l=Utils.getRotated({x:0,y:0},a,n);e.x+=l.x,e.y+=l.y}}}function X(e,t,i,n,r,a,o){if("normal"==n){var s=12,l=Math.PI/5,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);k.beginPath(),k.moveTo(h,d),k.lineTo(e.x,e.y),k.lineTo(c,u),k.stroke()}else if("solidArrow"==n){s=o||10,l=Math.PI/10,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fill(),k.stroke()}else if("dashedArrow"==n){k.save();s=o||12,l=Math.PI/10,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("solidCircle"==n){k.save();var g=4,y=e.x-g*Math.cos(t),f=e.y-g*Math.sin(t);k.beginPath(),k.arc(y,f,g,0,2*Math.PI,!1),k.closePath(),k.fill(),k.stroke(),k.restore()}else if("dashedCircle"==n){k.save();g=4,y=e.x-g*Math.cos(t),f=e.y-g*Math.sin(t);k.beginPath(),k.arc(y,f,g,0,2*Math.PI,!1),k.closePath(),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("solidDiamond"==n){k.save();s=8,l=Math.PI/7,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);var x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(x,v),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fill(),k.stroke(),k.restore()}else if("dashedDiamond"==n){k.save();s=8,l=Math.PI/7,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l),x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(x,v),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("cross"==n){var m=6*Math.cos(Math.PI/2-t),b=6*Math.sin(Math.PI/2-t),w=e.x+m,S=e.y-b,M=(x=e.x-14*Math.cos(t))-m,_=(v=e.y-14*Math.sin(t))+b;k.beginPath(),k.moveTo(w,S),k.lineTo(M,_),k.stroke()}else if("asynch1"==n){k.save();s=14,l=Math.PI/6.5,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("asynch2"==n){k.save();s=14,l=Math.PI/6.5,p=s/Math.cos(l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l),x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(c,u),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}}},renderLinkerText:function(e,t,i){var n=$("#"+e.id),r=e.textBlock||[];if(null!=e.text&&""!==e.text){var a=null;if(r[0]&&e.text==r[0].text){if(a=r[0],e.textPos&&(t||i)){var o=Utils.getLinkerLinesPoints(e);e.textPos.t>o.length&&(e.textPos.t=o.length-1);var s=o[e.textPos.t];null!=s&&(e.textPos.x=s.x,e.textPos.y=s.y)}}else{var l=null!=e.textPos?e.textPos:this.getLinkerMidpoint(e);a=this.getLinkerPointLocation(e,l)}var p={text:e.text,location:a.location};e.textPos&&(p.pos=e.textPos.pos),r[0]=p}e.textBlock=r;var h=Utils.getLinkerFontStyle(e.fontStyle),d=(Designer.config.scale,h.fontFamily);localRuntime&&Utils.containsChinese(e.text)&&!Utils.containsChinese(d)&&(d="宋体");var c={"line-height":Math.round(1.25*h.size)+"px","font-size":h.size+"px","font-family":d,"font-weight":h.bold?"bold":"normal","font-style":h.italic?"italic":"normal","text-align":h.textAlign,color:"rgb("+h.color+")","text-decoration":h.underline?"underline":h.middleline?"line-through":"none","z-index":1};n.children(".linker_text").remove();for(var u=0;u<r.length;u++){var g=$("<div class='text_canvas linker_text'></div>").appendTo(n);g.css(c);p=r[u];g.show();var y=p.text.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>");g.html(y+"<br/>");var f=this.getLinkerPointByLocation(e,p.location);if(null!=f&&null!=f.x){var x=Utils.restoreScale(n.position()),v=f.y-x.top-g.height()/2,m=f.x-x.left-g.width()/2,b=Utils.getAngleDir(f.angle);"top"==p.pos?"1"==b||"3"==b?m=m-g.width()/2-6:(v=v-g.height()/2-6,g.css({"transform-origin":"bottom"})):"bottom"==p.pos&&("1"==b||"3"==b?m+=g.width()/2+6:(v+=g.height()/2+6,g.css({"transform-origin":"top"})));1==b||3==b?v<10?v=10+(g.height()-g.height())/2:v+g.height()>n.height()-10&&(v=n.height()-10-g.height()-(g.height()-g.height())/2):2!=b&&4!=b||(m<10?m=10+(g.width()-g.width())/2:m+g.width()>n.width()-10&&(m=n.width()-10-g.width()-(g.width()-g.width())/2)),g.css({left:m,top:v})}}},getLinkerMidpoint:function(e){var t={};if("normal"==e.linkerType)t={x:.5*e.from.x+.5*e.to.x,y:.5*e.from.y+.5*e.to.y};else if("curve"==e.linkerType){var i=e.from,n=e.points[0],r=e.points[1],a=e.to;t={x:.125*i.x+.375*n.x+.375*r.x+.125*a.x,y:.125*i.y+.375*n.y+.375*r.y+.125*a.y}}else{var o=[];o.push(e.from),(o=o.concat(e.points)).push(e.to);for(var s=0,l=1;l<o.length;l++){n=o[l-1],r=o[l];s+=d=Utils.measureDistance(n,r)}var p=s/2,h=0;for(l=1;l<o.length;l++){n=o[l-1],r=o[l];var d,c=h+(d=Utils.measureDistance(n,r));if(c>=p){var u=(p-h)/d;t={x:(1-u)*n.x+u*r.x,y:(1-u)*n.y+u*r.y};break}h=c}}return t},getLinkerPointLocation:function(e,t){var i=0,n=t,r={};if("normal"==e.linkerType){var a=Utils.getPointInlineProject(e.from,e.to,t),o=Utils.measureDistance(e.from,e.to);i=(u=Utils.measureDistance(e.from,a))/o,n=a,r=e.from}else if("curve"==e.linkerType){for(var s=0,l=e.from,p=e.points[0],h=e.points[1],d=e.to,c=(o=null,0);s<1;){a={x:(1-s)*(1-s)*(1-s)*l.x+3*(1-s)*(1-s)*s*p.x+3*(1-s)*s*s*h.x+s*s*s*d.x,y:(1-s)*(1-s)*(1-s)*l.y+3*(1-s)*(1-s)*s*p.y+3*(1-s)*s*s*h.y+s*s*s*d.y};var u=Utils.measureDistance(a,t);null==o&&(o=u,c=s,n=a),o>u&&(c=s,o=u,n=a),s+=.02}i=c,r={x:(1-(s=c-.01))*(1-s)*(1-s)*l.x+3*(1-s)*(1-s)*s*p.x+3*(1-s)*s*s*h.x+s*s*s*d.x,y:(1-s)*(1-s)*(1-s)*l.y+3*(1-s)*(1-s)*s*p.y+3*(1-s)*s*s*h.y+s*s*s*d.y}}else{var g=[];g.push(e.from),(g=g.concat(Utils.margeLinker(e))).push(e.to);for(var y=0,f=null,x=0,v={},m=1,b=1;b<g.length;b++){p=g[b-1],h=g[b],a=Utils.getPointInlineProject(p,h,t);var w=Utils.measureDistance(t,a);null==f&&(f=w,m=b,v=a),f>w&&(f=w,m=b,v=a),y+=u=Utils.measureDistance(p,h)}for(b=1;b<m;b++){p=g[b-1],h=g[b];x+=u=Utils.measureDistance(p,h)}i=(x+=Utils.measureDistance(g[m-1],v))/y,n=v,r=g[m-1]}return n.angle=Utils.getAngle(n,r),{location:i,pos:n}},getLinkerPointByLocation:function(e,t){var i={},n={};if("normal"==e.linkerType)i={x:(1-t)*e.from.x+t*e.to.x,y:(1-t)*e.from.y+t*e.to.y},n=e.from;else if("curve"==e.linkerType){var r=e.from,a=e.points[0],o=e.points[1],s=e.to;i={x:(1-(y=t))*(1-y)*(1-y)*r.x+3*(1-y)*(1-y)*y*a.x+3*(1-y)*y*y*o.x+y*y*y*s.x,y:(1-y)*(1-y)*(1-y)*r.y+3*(1-y)*(1-y)*y*a.y+3*(1-y)*y*y*o.y+y*y*y*s.y},n={x:(1-(y=t-.01))*(1-y)*(1-y)*r.x+3*(1-y)*(1-y)*y*a.x+3*(1-y)*y*y*o.x+y*y*y*s.x,y:(1-y)*(1-y)*(1-y)*r.y+3*(1-y)*(1-y)*y*a.y+3*(1-y)*y*y*o.y+y*y*y*s.y}}else{var l=[];l.push(e.from),(l=l.concat(Utils.margeLinker(e))).push(e.to);for(var p=0,h=1;h<l.length;h++){a=l[h-1],o=l[h];p+=u=Utils.measureDistance(a,o)}var d=p*t,c=0;for(h=1;h<l.length;h++){a=l[h-1],o=l[h];var u,g=c+(u=Utils.measureDistance(a,o));if(g>=d){var y;i={x:(1-(y=(d-c)/u))*a.x+y*o.x,y:(1-y)*a.y+y*o.y},n=a;break}c=g}}return i.angle=Utils.getAngle(i,n),i},controlStatus:{resizeDir:[],rotatable:!0},drawControls:function(e){var t=$("#shape_controls");if(0==t.length){var i=$("#designer_canvas");(t=$("<div id='shape_controls'></div>").appendTo(i)).append("<canvas id='controls_bounding'></canvas>"),t.append("<div class='shape_controller' index='0' resizeDir='tl'></div>"),t.append("<div class='shape_controller' index='1' resizeDir='tr'></div>"),t.append("<div class='shape_controller' index='2' resizeDir='br'></div>"),t.append("<div class='shape_controller' index='3' resizeDir='bl'></div>"),t.append("<div class='shape_controller' resizeDir='l'></div>"),t.append("<div class='shape_controller' resizeDir='t'></div>"),t.append("<div class='shape_controller' resizeDir='r'></div>"),t.append("<div class='shape_controller' resizeDir='b'></div>"),Designer.op.shapeResizable(),t.append("<div class='shape_rotater po-diagraming-icons'>&#xe7fa;</div>"),Designer.op.shapeRotatable(),t.append("<div class='group_icon change_shape_icon'></div>"),Designer.op.groupShapeChangable(),$(".shape_controller").css({"border-color":Designer.config.anchorColor,width:Designer.config.anchorSize-2,height:Designer.config.anchorSize-2})}$(".shape_controller").css({"z-index":Model.orderList.length}),$(".change_shape_icon").hide(),t.show();var n,r,a=0;1==e.length?(n=(l=Model.getShapeById(e[0])).props,a=l.props.angle,4==(r=l.resizeDir).length&&8==r.concat(["l","t","r","b"]).length&&"grid"!=l.category&&(r=["tl","tr","br","bl","l","t","r","b"]),l.groupName&&SchemaGroup.groupExists(l.groupName)&&$(".change_shape_icon").show()):(n=Utils.getControlBox(e),r=["tl","tr","br","bl","l","t","r","b"]);for(var o=!0,s=0;s<e.length;s++){var l,p=e[s];(l=Model.getShapeById(p)).attribute&&0==l.attribute.rotatable&&(o=!1),(l.resizeDir&&0==l.resizeDir.length||l.parent&&e.length>1||l.children&&l.children.length&&e.length>1)&&(r=[])}return this.controlStatus.rotatable=o,this.controlStatus.resizeDir=r,this.rotateControls(n,a),t},rotateControls:function(e,t){var i=$("#shape_controls"),n=Utils.getRotatedBox(e,t),r=n.w,a=n.h;i.css({left:n.x,top:n.y,width:r,height:a,"z-index":Model.orderList.length+2});var o=r+20,s=a+20;$("#controls_bounding").attr({width:2*o,height:2*s}).css({width:o,height:s});var l={x:Math.round(e.x-n.x),y:Math.round(e.y-n.y),w:Math.floor(e.w+1),h:Math.floor(e.h+1)};this.drawControlLineTimeIdx&&clearTimeout(this.drawControlLineTimeIdx),this.drawControlLine(o,s,l,t);var p=0-Designer.config.anchorSize/2,h={x:e.x+e.w/2,y:e.y+e.h/2};i.children(".shape_controller").hide();for(var d=0;d<this.controlStatus.resizeDir.length;d++){var c,u,g=this.controlStatus.resizeDir[d],y=$(".shape_controller[resizeDir="+g+"]");y.show(),c=g.indexOf("l")>=0?e.x:g.indexOf("r")>=0?e.x+e.w:e.x+e.w/2,u=g.indexOf("t")>=0?e.y:g.indexOf("b")>=0?e.y+e.h:e.y+e.h/2;var f=Utils.getRotated(h,{x:c,y:u},t);y.css({left:f.x-n.x+p,top:f.y-n.y+p})}var x=Math.round(t/Math.PI*180);$(".shape_controller").css({transform:"rotate("+x+"deg) scale("+1/Designer.config.scale+")"});var v=Math.PI/8;if(i.children(".shape_controller").removeClass("s n e w"),t>v&&t<=3*v?(i.children("div[resizeDir=tl]").addClass("n"),i.children("div[resizeDir=tr]").addClass("e"),i.children("div[resizeDir=br]").addClass("s"),i.children("div[resizeDir=bl]").addClass("w"),i.children("div[resizeDir=l]").addClass("n w"),i.children("div[resizeDir=r]").addClass("s e"),i.children("div[resizeDir=b]").addClass("s w"),i.children("div[resizeDir=t]").addClass("n e")):t>3*v&&t<=5*v?(i.children("div[resizeDir=tl]").addClass("n e"),i.children("div[resizeDir=tr]").addClass("s e"),i.children("div[resizeDir=br]").addClass("s w"),i.children("div[resizeDir=bl]").addClass("n w"),i.children("div[resizeDir=l]").addClass("n"),i.children("div[resizeDir=r]").addClass("s"),i.children("div[resizeDir=b]").addClass("w"),i.children("div[resizeDir=t]").addClass("e")):t>5*v&&t<=7*v?(i.children("div[resizeDir=tl]").addClass("e"),i.children("div[resizeDir=tr]").addClass("s"),i.children("div[resizeDir=br]").addClass("w"),i.children("div[resizeDir=bl]").addClass("n"),i.children("div[resizeDir=l]").addClass("n e"),i.children("div[resizeDir=r]").addClass("s w"),i.children("div[resizeDir=b]").addClass("n w"),i.children("div[resizeDir=t]").addClass("s e")):t>7*v&&t<=9*v?(i.children("div[resizeDir=tl]").addClass("s e"),i.children("div[resizeDir=tr]").addClass("s w"),i.children("div[resizeDir=br]").addClass("n w"),i.children("div[resizeDir=bl]").addClass("n e"),i.children("div[resizeDir=l]").addClass("e"),i.children("div[resizeDir=r]").addClass("w"),i.children("div[resizeDir=b]").addClass("n"),i.children("div[resizeDir=t]").addClass("s")):t>9*v&&t<=11*v?(i.children("div[resizeDir=tl]").addClass("s"),i.children("div[resizeDir=tr]").addClass("w"),i.children("div[resizeDir=br]").addClass("n"),i.children("div[resizeDir=bl]").addClass("e"),i.children("div[resizeDir=l]").addClass("s e"),i.children("div[resizeDir=r]").addClass("n w"),i.children("div[resizeDir=b]").addClass("n e"),i.children("div[resizeDir=t]").addClass("s w")):t>11*v&&t<=13*v?(i.children("div[resizeDir=tl]").addClass("s w"),i.children("div[resizeDir=tr]").addClass("n w"),i.children("div[resizeDir=br]").addClass("n e"),i.children("div[resizeDir=bl]").addClass("s e"),i.children("div[resizeDir=l]").addClass("s"),i.children("div[resizeDir=r]").addClass("n"),i.children("div[resizeDir=b]").addClass("e"),i.children("div[resizeDir=t]").addClass("w")):t>13*v&&t<=15*v?(i.children("div[resizeDir=tl]").addClass("w"),i.children("div[resizeDir=tr]").addClass("n"),i.children("div[resizeDir=br]").addClass("e"),i.children("div[resizeDir=bl]").addClass("s"),i.children("div[resizeDir=l]").addClass("s w"),i.children("div[resizeDir=r]").addClass("n e"),i.children("div[resizeDir=b]").addClass("s e"),i.children("div[resizeDir=t]").addClass("n w")):(i.children("div[resizeDir=tl]").addClass("n w"),i.children("div[resizeDir=tr]").addClass("n e"),i.children("div[resizeDir=br]").addClass("s e"),i.children("div[resizeDir=bl]").addClass("s w"),i.children("div[resizeDir=l]").addClass("w"),i.children("div[resizeDir=r]").addClass("e"),i.children("div[resizeDir=b]").addClass("s"),i.children("div[resizeDir=t]").addClass("n")),this.controlStatus.rotatable){var m=i.find(".shape_rotater");m.show();var b={x:e.x+e.w+10..restoreScale(),y:e.y-10..restoreScale()},w=Utils.getRotated(h,b,t);x=Math.round(t/Math.PI*180);m.css({top:w.y-10-n.y,left:w.x-10-n.x,transform:"rotate("+x+"deg) scale("+1/Designer.config.scale+")"})}else i.find(".shape_rotater").hide()},drawControlLineTimeIdx:null,drawControlLine:function(e,t,i,n,r){var a=this;r=r&&r>-8..restoreScale()?r:0;var o=$("#controls_bounding")[0].getContext("2d");o.lineJoin="round",o.strokeStyle=Designer.config.selectorColor,0==this.controlStatus.resizeDir.length?o.lineWidth=2..restoreScale():o.lineWidth=1..restoreScale(),o.save(),o.scale(2,2),o.clearRect(0,0,e,t),o.translate(e/2,t/2),o.rotate(n),o.translate(-e/2,-t/2),o.translate(9.5,9.5),o.setLineDash([4..restoreScale(),4..restoreScale()]),o.lineDashOffset=r,o.strokeRect(i.x,i.y,i.w,i.h),o.restore(),this.drawControlLineTimeIdx=setTimeout(function(){a.drawControlLine(e,t,i,n,r-1..restoreScale())},80)},drawLinkerControls:function(e,t,i){this.hideLinkerControls(e.id);var n=Utils.copy(e);n.points=Utils.margeLinker(n);var r,a=Utils.getLinkerVector(n);4==a.length&&a[1].x==a[2].x&&a[1].y==a[2].y&&a.splice(1,2);for(var o=1;o<a.length;o++){var s=a[o-1],l=a[o];if(Utils.measureDistance(s,l)>40&&o>0&&o<=e.points.length+1&&(null!=e.from.id||null!=e.to.id)||o>1&&o<=e.points.length&&null==e.from.id&&null==e.to.id){var p=Utils.getCenterPoint(s,l);r=p,void 0,$('<div class="linker_broken_control_c_point"></div>').css({left:r.x-t.x+10,top:r.y-t.y+10,transform:"scale("+1..restoreScale()+")"}).appendTo(i)}}},hideLinkerControls:function(e){$("#"+e).children(".linker_broken_control_point").remove(),$(".linker_broken_control_c_point").remove()}}};var Model={define:{},persistence:{},orderList:[],orderListGroup:{},maxZIndex:0,linkerMap:{map:{},add:function(e,t){this.map[e]||(this.map[e]=[]),this.map[e].indexOf(t)<0&&this.map[e].push(t)},remove:function(e,t){this.map[e]&&Utils.removeFromArray(this.map[e],t)},empty:function(){this.map={}}},intersection:{},groupMap:{map:{},add:function(e,t){this.map[e]=t},push:function(e,t){this.map[e]||(this.map[e]=[]),this.map[e].indexOf(t)<0&&this.map[e].push(t)},remove:function(e){delete this.map[e]},empty:function(){this.map={}}},create:function(e,t,i){var n=Utils.newId(),r=Utils.copy(Schema.shapes[e]);r.id=n,r.props.x=t,r.props.y=i,r.attribute.container?r.props.zindex=-1:r.props.zindex=Model.maxZIndex+1,r.props=$.extend(!0,{},Schema.shapeDefaults.props,r.props);for(var a=0;a<r.dataAttributes.length;a++){r.dataAttributes[a].id=Utils.newId()}var o=Model.define;return null!=o.defaultStyle&&null!=o.defaultStyle.fillStyle&&$.isEmptyObject(r.fillStyle)&&(r.fillStyle=o.defaultStyle.fillStyle),null!=o.defaultStyle&&null!=o.defaultStyle.lineStyle&&$.isEmptyObject(r.lineStyle)&&(r.lineStyle=o.defaultStyle.lineStyle),null!=o.defaultStyle&&null!=o.defaultStyle.fontStyle&&$.isEmptyObject(r.fontStyle)&&(r.fontStyle=o.defaultStyle.fontStyle),Designer.events.push("create",r),r},createByShape:function(e,t,i){var n=Utils.copy(e);if("linker"==n.name){n.props.zindex=Model.maxZIndex+1,null!=(a=Model.define).defaultLinkerStyle&&null!=a.defaultLinkerStyle.linkerStyle&&(n.lineStyle=a.defaultLinkerStyle.linkerStyle)}else{n.attribute.container?n.props.zindex=-1:(Model.maxZIndex=Model.maxZIndex+1,n.props.zindex=Model.maxZIndex),e.name.indexOf("SeparatorBar")>-1&&(n.props.zindex=0),n.props=$.extend(!0,{},Schema.shapeDefaults.props,n.props);for(var r=0;r<n.dataAttributes.length;r++){n.dataAttributes[r].id=Utils.newId()}var a;null!=(a=Model.define).defaultStyle&&null!=a.defaultStyle.fillStyle&&$.isEmptyObject(n.fillStyle)&&(n.fillStyle=a.defaultStyle.fillStyle),null!=a.defaultStyle&&null!=a.defaultStyle.lineStyle&&$.isEmptyObject(n.lineStyle)&&(n.lineStyle=a.defaultStyle.lineStyle),null!=a.defaultStyle&&null!=a.defaultStyle.fontStyle&&$.isEmptyObject(n.fontStyle)&&(n.fontStyle=a.defaultStyle.fontStyle)}return Designer.events.push("create",n),n},add:function(e,t,i){this.addMulti([e],t,i)},addMulti:function(e,t,i){void 0===t&&(t=!0);for(var n=[],r=0;r<e.length;r++){var a=e[r];n.push(Utils.copy(a)),this.define.elements[a.id]=Utils.copy(a),this.persistence.elements[a.id]=Utils.copy(a)}this.build(),t&&(Designer.events.push("created",n),MessageSource.send("create",n,i))},update:function(e){this.updateMulti([e])},updateMulti:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];this.define.elements[r.id]&&(this.define.elements[r.id]=Utils.copy(r),i.push(Utils.copy(this.getPersistenceById(r.id))),t.push(Utils.copy(r)),this.persistence.elements[r.id]=Utils.copy(r))}this.build();var a={shapes:i,updates:t};MessageSource.send("update",a),Designer.events.push("update",e)},remove:function(e,t){void 0===t&&(t=!0),t&&(e=Designer.events.push("beforeRemove",e));var i=[],n=[],r=[],a=[],o=[];if(0==e.length)return!1;for(var s=0;s<e.length;s++){"linker"==(l=e[s]).name?o.push(l.id):a.push(l.id)}for(s=0;s<e.length;s++){var l=e[s];if(i.push(Utils.copy(l)),$("#"+l.id).remove(),delete this.define.elements[l.id],delete this.persistence.elements[l.id],this.groupMap.remove(l.group),"linker"==l.name)null!=l.from.id&&this.linkerMap.remove(l.from.id,l.id),null!=l.to.id&&this.linkerMap.remove(l.to.id,l.id);else{if(l.parent&&a.indexOf(l.parent)<0){var p=Model.getShapeById(l.parent);p&&(Utils.removeFromArray(p.children,l.id),n.indexOf(l.parent)<0&&(n.push(l.parent),r.push(p)))}var h=this.getShapeLinkers(l.id);if(h&&h.length>0)for(var d=0;d<h.length;d++){var c=h[d];if(o.indexOf(c)<0){var u=this.getShapeById(c);null!=u.from.id&&u.from.id==l.id&&(u.from.id=null,u.from.angle=null),null!=u.to.id&&u.to.id==l.id&&(u.to.id=null,u.to.angle=null),n.indexOf(c)<0&&(n.push(c),r.push(u))}}delete this.linkerMap.map[l.id]}}if(this.build(),MessageSource.beginBatch(),MessageSource.send("remove",i),t){var g=Designer.events.push("removed",{shapes:e,changedIds:n,range:a});g&&g.length&&(r=r.concat(g))}return r.length>0&&this.updateMulti(r),MessageSource.commit(),Designer.events.push("changeLinkers",i),!0},updatePage:function(e,t){var i=$.extend(Model.define.page,e),n={page:Utils.copy(Model.persistence.page),update:Utils.copy(i)};Model.persistence.page=Utils.copy(i),MessageSource.send("updatePage",n),Designer.initialize.initCanvas()},setTheme:function(e){Model.define.theme=e,Model.define.page.backgroundColor,void 0!==e&&(Model.define.page.backgroundColor=e.page.backgroundColor);var t={theme:Utils.copy(Model.persistence.theme),update:Utils.copy(e)};for(var i in Model.persistence.theme=Utils.copy(e),MessageSource.send("setTheme",t),Model.define.elements){var n=Model.getShapeById(i);Designer.painter.renderShape(n)}Designer.initialize.initCanvas()},updateWithBeautify:function(e,t,i){var n={content:t,updates:e};null!=i&&"{}"!=JSON.stringify(i)&&(n.theme=i,n.oldTheme=Model.define.theme);var r=Model.define.elements;MessageSource.send("update_with_beautify",n),null!=i&&(Model.define.theme=i);for(var a=0,o=e.length;a<o;a++){var s=e[a].id;$.extend(r[s],e[a])}for(var s in Model.define.elements){var l=Model.getShapeById(s);Designer.painter.renderShape(l)}Designer.events.push("resetBrokenLinker")},setDefaultStyle:function(e,t){var i=null;"linker"==e?(i=Utils.copy(Model.define.defaultLinkerStyle),Model.define.defaultLinkerStyle=t):"all"==e?(i={linkerStyle:Utils.copy(Model.define.defaultLinkerStyle),shapeStyle:Utils.copy(Model.define.defaultStyle)},Model.define.defaultStyle=t.shapeStyle,Model.define.defaultLinkerStyle=t.linkerStyle):(i=Utils.copy(Model.define.defaultStyle),Model.define.defaultStyle=t);var n={style:i,type:e,update:Utils.copy(t)};MessageSource.send("setDefaultStyle",n)},clearDefaultStyle:function(){var e={linkerStyle:Utils.copy(Model.define.defaultLinkerStyle),shapeStyle:Utils.copy(Model.define.defaultStyle)};if(null!=Model.define.defaultStyle||null!=Model.define.defaultLinkerStyle){delete Model.define.defaultStyle,delete Model.define.defaultLinkerStyle;var t={style:e,update:{}};MessageSource.send("clearDefaultStyle",t)}},getShapeById:function(e){return this.define.elements[e]},getPersistenceById:function(e){return this.persistence.elements[e]},getLinkers:function(e){var t=[];for(var i in Model.define.elements){var n=Model.getShapeById(i);"linker"==n.name&&n.linkerType==e&&t.push(n)}return t},build:function(){for(var e in this.orderList=[],this.orderListGroup={},this.linkerMap.empty(),Model.define.elements){var t=Model.getShapeById(e);this.orderList.push({id:t.id,zindex:t.props.zindex}),this.buildOrderListGroup(t),"linker"==t.name&&(null!=t.from.id&&this.linkerMap.add(t.from.id,t.id),null!=t.to.id&&this.linkerMap.add(t.to.id,t.id)),t.group&&this.groupMap.push(t.group,t.id)}for(var i in this.orderList.sort(function(e,t){return e.zindex-t.zindex}),this.orderListGroup)this.orderListGroup[i].sort(function(e,t){return e.zindex-t.zindex});for(var n=0;n<Model.orderList.length;n++){e=Model.orderList[n].id;$("#"+e).css("z-index",n)}var r=0;this.orderList.length>0&&(r=this.orderList[this.orderList.length-1].zindex),this.maxZIndex=r<this.orderList.length?this.orderList.length:r,Designer.events.push("searchReplace")},buildOrderListGroup:function(e){if("linker"!=e.name)var t=Utils.getShapeBox(e),i=Math.ceil((t.x-10)/500),n=Math.ceil((t.x+t.w+10)/500),r=Math.ceil((t.y-10)/500),a=Math.ceil((t.y+t.h+10)/500);else if("linker"==e.name){var o=Utils.getLinkerBox(e);i=Math.ceil((o.x-10)/500),n=Math.ceil((o.x+o.w+10)/500),r=Math.ceil((o.y-10)/500),a=Math.ceil((o.y+o.h+10)/500)}for(var s=i;s<=n;s++)for(var l=r;l<=a;l++)null==this.orderListGroup[s+"_"+l]&&(this.orderListGroup[s+"_"+l]=[]),this.orderListGroup[s+"_"+l].push({id:e.id,zindex:e.props.zindex})},getOrderListGroup:function(e,t){return this.orderListGroup[Math.ceil(e/500)+"_"+Math.ceil(t/500)]||[]},getShapeLinkers:function(e){return this.linkerMap.map[e]},getGroupShapes:function(e){return this.groupMap.map[e]},changeShape:function(e,t){var i=Utils.copy(Schema.shapes[t]);e.name=t,e.title=i.shapeName;var n=i.attribute;if(e.attribute&&void 0!==e.attribute.collapsed&&(n.collapsed=e.attribute.collapsed),e.attribute&&void 0!==e.attribute.collapseW&&(n.collapseW=e.attribute.collapseW),e.attribute&&void 0!==e.attribute.collapseH&&(n.collapseH=e.attribute.collapseH),e.attribute&&e.attribute.markers&&e.attribute.markers.indexOf("expand")>=0&&(n.markers||(n.markers=[]),n.markers.push("expand")),e.attribute=n,e.dataAttributes=i.dataAttributes,e.dataAttributes)for(var r=0;r<e.dataAttributes.length;r++){(n=e.dataAttributes[r]).id=Utils.newId()}var a="";e.textBlock.length>0&&(a=e.textBlock[0].text),"grid"!=i.category&&(e.path=i.path,e.textBlock=i.textBlock,e.textBlock.length>0&&(e.textBlock[0].text=a)),e.anchors=i.anchors,e.fillStyle&&"image"==e.fillStyle.type&&i.fillStyle&&"image"==i.fillStyle.type&&(e.fillStyle=i.fillStyle),$.isEmptyObject(i.theme)||(e.theme=i.theme),Schema.initShapeFunctions(e),Designer.painter.renderShape(e)}},PageModel={data:{},list:[],mainId:"",build:function(){this.data={};for(var e=0;e<this.list.length;e++){var t=this.list[e];t.sort=e,this.data[t.definitionId]=t}},getPageById:function(e){for(var t=0;t<this.list.length;t++){var i=this.list[t];if(i.definitionId===e){i.sort=t,i;break}}return this.data[e]},addPage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.addPage(e,function(e,t,i){PageModel.list=e,PageModel.build();i=JSON.parse(i);Designer.renderPage(t,i,!0)})},copyPage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.copyPage(e,function(e,t,i){PageModel.list=e,PageModel.build();i=JSON.parse(i);Designer.renderPage(t,i,!0)})},delPage:function(e,t){var i=e.id,n=PageModel.getPageById(i);function r(){if(PageModel.list.splice(n.sort,1),PageModel.build(),i==Model.pageId){if(t&&$.toast({text:"您所在画布已被他人删除，为您跳转到新画布",type:"warning"}),PageModel.list.length==n.sort)var e=PageModel.list[n.sort-1].definitionId;else e=PageModel.list[n.sort].definitionId;$("#po-global-loading-wrap").css("backgroundColor","rgba(255,255,255,0.3)").show().find(".po-loadingTop p").hide(),injectExtraAsynCall("onDefById",{defId:e,chartId:chartId},function(t){Designer.renderPage(e,t.def,!0)})}else Designer.initialize.initPage()}t?r():window.publicCLB.deletePage(i,function(){r()})},renamePage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.renamePage(e,function(e){e&&(PageModel.list=e,PageModel.build()),Designer.initialize.initPage()})},sortPage:function(e,t,i){i?Designer.initialize.initPage():window.publicCLB.sortPage(e,t,function(e){PageModel.list=e,PageModel.build(),Designer.initialize.initPage()})},setMainPage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.setMainPage(e,function(e){PageModel.mainId=e,Designer.initialize.initPage()})}},Utils={getDomById:function(e){return document.getElementById(e)},newId:function(){return Utils.randomString(10)+Utils.randomNumber(6)},getBaseDef:function(e){var t=encodeURIComponent(JSON.stringify(Model.define));try{t=window.Base64?Base64.btoa(t):btoa(t),e(t)}catch(i){bigPipe.render({js:[staticBasePath+"/assets/js/import/plugins/base64.js?v=1"]},function(){t=Base64.btoa(t),e(t)})}},randomNumber:function(e){for(var t="";e>0;)t+=Math.floor(10*Math.random()),e--;return t},randomString:function(e,t){t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var i="",n=0;n<e;n++){var r=Math.floor(Math.random()*t.length);i+=t.substring(r,r+1)}return i},isChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")>=0},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>=0},isSafari:function(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")},isIE:function(){var e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1||e.indexOf("Edge/")>-1},isMac:function(){return!0},beautifyLane:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=n.props.height&&n.props.height[0]?n.props.height[0]:40;if(n.children&&n.children.length)if("verticalPool"==n.name){for(var a=[],o=[],s=0,l=function(i){t.push(n.children[i]);var l=e.map(function(e,t){if(e.id==n.children[i])return t});if(l>-1){var p=beautifyObj[l];"verticalLane"==p.name?a.push(p):"horizontalSeparator"==p.name?o.push(p):"verticalSeparatorBar"==p.name&&(p.props.x=n.props.x,p.props.y=n.props.y+r,p.props.h=n.props.h-r,s=p.props.w)}},p=0,h=n.children.length;p<h;p++)l(p);a.sort(function(e,t){return e.props.x-t.props.x}),o.sort(function(e,t){return e.props.y-t.props.y});for(var d=0;d<a.length;d++){var c=a[d];c.props.y=n.props.y+r,c.props.h=n.props.h-r,c.props.x=0==d?n.props.x+s:a[d-1].props.x+a[d-1].props.w,d==a.length-1&&(c.props.w=n.props.x+n.props.w-c.props.x)}for(var u=0;u<o.length;u++){var g=o[u];g.props.x=n.props.x,g.props.w=n.props.w,g.props.y=0==u?n.props.y+r:o[u-1].props.y+o[u-1].props.h,u==o.length-1&&(g.props.h=n.props.y+n.props.h-g.props.y)}}else if("horizontalPool"==n.name){for(var y=[],f=[],x=0,v=function(i){t.push(n.children[i]);var a=e.map(function(e,t){if(e.id==n.children[i])return t});if(a>-1){var o=beautifyObj[a];"horizontalLane"==o.name?y.push(o):"verticalSeparator"==o.name?f.push(o):"horizontalSeparatorBar"==o.name&&(o.props.x=n.props.x+r,o.props.y=n.props.y,o.props.w=n.props.w-r,x=o.props.h)}},m=0;m<n.children.length;m++)v(m);y.sort(function(e,t){return e.props.y-t.props.y}),f.sort(function(e,t){return e.props.x-t.props.x});for(var b=0;b<y.length;b++){var w=y[b];w.props.x=n.props.x+r,w.props.w=n.props.w-r,w.props.y=0==b?n.props.y+x:y[b-1].props.y+y[b-1].props.h,b==y.length-1&&(w.props.h=n.props.y+n.props.h-w.props.y)}for(var S=0;S<f.length;S++){var k=f[S];k.props.y=n.props.y,k.props.h=n.props.h,k.props.x=0==S?n.props.x+r:f[S-1].props.x+f[S-1].props.w,S==f.length-1&&(k.props.w=n.props.x+n.props.w-k.props.x)}}}},getShapeByPosition:function(e,t,i){for(var n=[],r=Utils.isMac(),a=Model.getOrderListGroup(e,t),o=a.length-1;o>=0;o--){var s=a[o].id,l=$("#"+s),p=Model.getShapeById(s);if(!p.attribute||!p.attribute.collapseBy){var h=1;r&&(h=2);var d=Utils.restoreScale(l.position()),c=l.width(),u=l.height(),g=e-d.left,y=t-d.top,f={x:d.left,y:d.top,w:c,h:u},x=l.find(".shape_canvas")[0].getContext("2d");if("linker"==p.name){if(p.textBlock&&p.textBlock.length>0){var v=f.x,m=f.x+f.w,b=f.y,w=f.y+f.h;l.children(".linker_text").each(function(e,t){var i=Utils.restoreScale($(t).position()),n=i.left,r=i.top,a=$(t).width(),o=$(t).outerHeight();f.x+n<v&&(v=f.x+n),f.x+n+a>m&&(m=f.x+n+a),f.y+r<b&&(b=f.y+r),f.y+r+o>w&&(w=f.y+r+o)}),f.x=v,f.w=m-v,f.y=b,f.h=w-b}if(!(C=this.pointInRect(e,t,f)))continue;if(i)continue;var S={x:e-(z=15),y:t-z,w:2*z,h:2*z};if(this.pointInRect(p.to.x,p.to.y,S)){var k={type:"linker_point",point:"to",shape:p};n.push(k);continue}if(this.pointInRect(p.from.x,p.from.y,S)){k={type:"linker_point",point:"from",shape:p};n.push(k);continue}var M=l.children(".text_canvas"),_=this,D=0,U=!1;if(M.each(function(e,t){var i=Utils.restoreScale($(t).position()),n={x:i.left,y:i.top,w:$(t).outerWidth(),h:$(t).outerHeight()};if(_.pointInRect(g,y,n))return D=e,void(U=!0)}),U){k={type:"linker_text",shape:p,textIndex:D};n.push(k);continue}if(z=(z=7).restoreScale(),(ie=this.pointInLinker({x:e,y:t},p,z))>-1){var P=this.getLinkerLinePoints(p),L=P[ie-1],I=P[ie];2==p.points.length&&p.points[0].x==p.points[1].x&&p.points[0].y==p.points[1].y&&(L=p.from,I=p.to);k={type:"linker",shape:p,pointIndex:ie,pointPos:this.getPointInLinePos({x:e,y:t},L,I,z)};n.push(k);continue}}else{var C=this.pointInRect(e,t,f),B=!1;if(p.name.startsWith("chart_")){var T={x:d.left-0+1,y:d.top-0+1,w:c-0-2,h:u-0-2};B=this.pointInRect(e,t,T)}if(C&&p.locked&&!i){if(x.isPointInPath(g*h,y*h)||B){k={type:"shape",shape:p};n.push(k)}continue}var z=7;if(C){S={x:e-z,y:t-z,w:2*z,h:2*z};for(var O={x:p.props.x+p.props.w/2,y:p.props.y+p.props.h/2},A=p.getAnchors(),R=(k=null,0);R<A.length;R++){var W=A[R];if(W=this.getRotated(O,{x:p.props.x+W.x,y:p.props.y+W.y},p.props.angle),Utils.pointInRect(W.x,W.y,S)){if(p.name.startsWith("chart_"))W.x==p.props.x+p.props.w?W.angle=Math.PI:W.x==p.props.x?W.angle=0:W.y==p.props.y+p.props.h?W.angle=1.5*Math.PI:W.y==p.props.y&&(W.angle=.5*Math.PI);else{var E=Utils.getPointAngle(s,W.x,W.y,z);W.angle=E}k={type:"bounding",shape:p,linkPoint:W},x.isPointInPath(g*h,y*h)&&(k.inPath=!0);break}}if(null!=k){n.push(k);continue}}if(p.dataAttributes){k=null;for(var N=0;N<p.dataAttributes.length;N++){var F=p.dataAttributes[N];if("link"==F.type&&F.showType&&"none"!=F.showType){var K=l.children("#attr_canvas_"+F.id);if(K.length>0){var j=Utils.restoreScale(K.position()),G=g-j.left,X=y-j.top;if(K[0].getContext("2d").isPointInPath(G*h,X*h)){k={type:"dataAttribute",shape:p,attribute:F};break}}}}if(null!=k){n.push(k);continue}}if(!C)continue;var H=g,Y=y;if(r&&(H=g*h,Y=y*h),x.isPointInPath(H,Y)||B){if(i){if((A=p.getAnchors())&&A.length){for(var q=!1,V=o+1;V<a.length;V++){var Z=a[V].id,J=Model.getShapeById(Z);Utils.rectInRect(J.props,p.props)&&(q=!0)}if(q)continue;k={type:"shape",shape:p};n.push(k);continue}continue}k={type:"shape",shape:p};n.push(k);continue}if(!p.attribute||void 0===p.attribute.linkable||p.attribute.linkable){E=null;if(p.name.startsWith("chart_")?Math.abs(e-p.props.x)<=10?E=0:Math.abs(t-p.props.y)<=10?E=Math.PI/2:Math.abs(e-(p.props.x+p.props.w))<=10?E=Math.PI:Math.abs(t-(p.props.y+p.props.h))<=10&&(E=1.5*Math.PI):E=Utils.getPointAngle(s,e,t,z),null!=E){k=null;for(var Q={angle:E},ee=1;ee<=z;ee++)if(0==E?(Q.x=g+ee,Q.y=y):E<Math.PI/2?(Q.x=g+ee*Math.cos(E),Q.y=y+ee*Math.sin(E)):E==Math.PI/2?(Q.x=g,Q.y=y+ee):E<Math.PI?(Q.x=g-ee*Math.sin(E-Math.PI/2),Q.y=y+ee*Math.cos(E-Math.PI/2)):E==Math.PI?(Q.x=g-ee,Q.y=y):E<Math.PI/2*3?(Q.x=g-ee*Math.cos(E-Math.PI),Q.y=y-ee*Math.sin(E-Math.PI)):E==Math.PI/2*3?(Q.x=g,Q.y=y-ee):(Q.x=g+ee*Math.sin(E-Math.PI/2*3),Q.y=y-ee*Math.cos(E-Math.PI/2*3)),x.isPointInPath(Q.x*h,Q.y*h)||p.name.startsWith("chart_")){Q.x+=d.left,Q.y+=d.top,k={type:"bounding",shape:p,linkPoint:Q};break}if(null!=k){n.push(k);continue}}}}}}k=null;if(1==n.length&&(k=n[0]),n.length>1&&i)k=n[0];else if(n.length>1){var te=n[0];if("bounding"==te.type&&"linker_point"!=te.type&&"linker"!=te.type)return te;var ie=[],ne=[],re=[];for(o=0;o<n.length;o++){"bounding"==(ae=n[o]).type?re.push(ae):"linker"==ae.type?ie.push(ae):"linker_point"==ae.type&&ne.push(ae)}if(re.length>0&&ne.length>0)for(o=0;o<re.length;o++){var ae;if((ae=re[o]).inPath){k=ae;break}}null==k&&ne.length>0&&(ne.sort(function(e,t){return Utils.isSelected(e.shape.id)&&!Utils.isSelected(t.shape.id)?-1:!Utils.isSelected(e.shape.id)&&Utils.isSelected(t.shape.id)?1:t.shape.props.zindex-e.shape.props.zindex}),k=ne[0]),null==k&&ie.length>0&&(ie.sort(function(e,t){return Utils.isSelected(e.shape.id)&&!Utils.isSelected(t.shape.id)?-1:!Utils.isSelected(e.shape.id)&&Utils.isSelected(t.shape.id)?1:t.shape.props.zindex-e.shape.props.zindex}),k=ie[0]),null==k&&(k=n[0])}return k},checkCross:function(e,t,i,n){var r=!1,a=(t.x-e.x)*(n.y-i.y)-(t.y-e.y)*(n.x-i.x);if(0!=a){var o=((e.y-i.y)*(n.x-i.x)-(e.x-i.x)*(n.y-i.y))/a,s=((e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y))/a;o>=0&&o<=1&&s>=0&&s<=1&&(r=!0)}return r},rectCross:function(e,t){var i=e.x,n=e.x+e.w,r=e.y,a=e.y+e.h,o=t.x,s=t.x+t.w,l=t.y,p=t.y+t.h;return i<s&&o<n&&r<p&&l<a},rectInRect:function(e,t){var i={x:e.x,y:e.y},n={x:e.x+e.w,y:e.y},r={x:e.x+e.w,y:e.y+e.h},a={x:e.x,y:e.y+e.h};return!!(this.pointInRect(i.x,i.y,t)&&this.pointInRect(n.x,n.y,t)&&this.pointInRect(r.x,r.y,t)&&this.pointInRect(a.x,a.y,t))},pointInPolygon:function(e,t){var i,n,r,a;i=e,n={x:-1e6,y:e.y};for(var o=0,s=0;s<t.length-1;s++)r=t[s],a=t[s+1],1==Utils.checkCross(i,n,r,a)&&o++;return r=t[t.length-1],a=t[0],1==Utils.checkCross(i,n,r,a)&&o++,o%2!=0},pointInRect:function(e,t,i){return e>=i.x&&e<=i.x+i.w&&t>=i.y&&t<=i.y+i.h},pointInLinker:function(e,t,i){for(var n=this.getLinkerLinePoints(t),r={x:e.x-i,y:e.y},a={x:e.x+i,y:e.y},o={x:e.x,y:e.y-i},s={x:e.x,y:e.y+i},l=1;l<n.length;l++){var p=n[l-1],h=n[l],d=this.checkCross(r,a,p,h);if(d)return l;if(d=this.checkCross(o,s,p,h))return l}return-1},getCenterPoint:function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},getPointInLinePos:function(e,t,i,n){var r={x:e.x-n,y:e.y},a={x:e.x+n,y:e.y},o={x:e.x,y:e.y-n},s={x:e.x,y:e.y+n},l=this.getCenterPoint(t,i),p=this.checkCross(r,a,t,l);return p?0:(p=this.checkCross(r,a,l,i))?1:(p=this.checkCross(o,s,t,l))?0:(p=this.checkCross(o,s,l,i))?1:-1},getLinkerVector:function(e){for(var t=Utils.copyArray(this.getLinkerLinePoints(e)),i=1;i<t.length;i++){var n=t[i-1],r=t[i];Math.abs(r.y-n.y)<1&&r.x>n.x?(r.v=0,r.h=1):Math.abs(r.y-n.y)<1&&r.x<n.x?(r.v=0,r.h=-1):r.y>n.y&&Math.abs(r.x-n.x)<1?(r.v=1,r.h=0):r.y<n.y&&Math.abs(r.x-n.x)<1?(r.v=-1,r.h=0):(r.v=t[i-1].v,r.h=t[i-1].h)}return t[0].v=t[1].v,t[0].h=t[1].h,t},getPointInlineProject:function(e,t,i){var n={},r=e.x,a=e.y,o=t.x,s=t.y,l=i.x,p=i.y;if(r==o&&(n.x=r,n.y=p),a==s&&(n.x=l,n.y=a),r!=o&&a!=s){var h=(s-a)/(o-r),d=-1/h,c=a-h*r,u=p-d*l;n.x=(u-c)/(h-d),n.y=(d*c-h*u)/(d-h)}return r<o?(n.x=n.x<r?r:n.x,n.x=n.x>o?o:n.x):(n.x=n.x>r?r:n.x,n.x=n.x<o?o:n.x),a<s?(n.y=n.y<a?a:n.y,n.y=n.y>s?s:n.y):(n.y=n.y>a?a:n.y,n.y=n.y<s?s:n.y),n},intersection:function(e,t,i,n){var r,a=e.x,o=e.y,s=t.x,l=t.y,p=i.x,h=i.y,d=n.x,c=n.y;return{x:((a*l-o*s)*(p-d)-(a-s)*(p*c-h*d))/(r=(a-s)*(h-c)-(o-l)*(p-d)),y:((a*l-o*s)*(h-c)-(o-l)*(p*c-h*d))/r}},getLinesFromLinker:function(e){var t=e.from,i=e.to,n=[],r=e.points;if(2==r.length&&r[0].x==r[1].x&&r[0].y==r[1].y)n.push({x1:t.x,y1:t.y,x2:i.x,y2:i.y});else{for(var a=t,o=0;o<r.length;o++){var s=r[o];if(s.x!=a.x||s.y!=a.y){var l={x1:a.x,y1:a.y,x2:s.x,y2:s.y};n.push(l),a=s}}n.push({x1:a.x,y1:a.y,x2:i.x,y2:i.y})}return n},getLinkerLength:function(e){for(var t=this.getLinkerLinePoints(e),i=0,n=1;n<t.length;n++){var r=t[n-1],a=t[n];i+=Utils.measureDistance(r,a)}return i},margeLinker:function(e,t){if("broken"!=e.linkerType)return Utils.copyArray(e.points);for(var i=Utils.copy(e),n=this.getLinkerLinePoints(i),r=t||1,a=1;a<n.length-1&&!(n.length<3);a++){a<1&&(a=1);var o=n[a-1],s=n[a],l=n[a+1];Math.abs(o.x-s.x)<r&&Math.abs(s.x-l.x)<r?(n.splice(a,1),a-=2):Math.abs(o.y-s.y)<r&&Math.abs(s.y-l.y)<r&&(n.splice(a,1),a-=2)}return n.splice(1,n.length-2)},getShapesByRange:function(e,t){var i=[];for(var n in Model.define.elements){var r=Model.getShapeById(n),a=r.props;if(a="linker"==r.name?this.getLinkerBox(r):this.getShapeBox(r),this.rectInRect(a,e))i.push(n);else if(t){var o=!1,s=!1,l={x:e.x,y:e.y},p={x:e.x+e.w,y:e.y},h={x:e.x+e.w,y:e.y+e.h},d={x:e.x,y:e.y+e.h},c=this.getShapeBox(r);r.name.startsWith("chart_")&&(o=this.pointInRect(l.x,l.y,c)||this.pointInRect(p.x,p.y,c)||this.pointInRect(h.x,h.y,c)||this.pointInRect(d.x,d.y,c),s=l.x-0<=c.x&&p.x-0>=c.x+r.props.w&&c.y<=l.y-0&&l.y-0<=c.y+r.props.h||d.x-0<=c.x&&h.x-0>=c.x+r.props.w&&c.y<=d.y-0&&d.y-0<=c.y+r.props.h||l.y-0<=c.y&&d.y-0>=c.y+r.props.h&&c.x<=l.x-0&&l.x-0<=c.left+r.props.w||p.y-0<=c.y&&h.y-0>=c.y+r.props.h&&c.x<=p.x-0&&p.x-0<=c.x+r.props.w),(this.getLineToShapePoints(r,l,p).length||this.getLineToShapePoints(r,p,h).length||this.getLineToShapePoints(r,h,d).length||this.getLineToShapePoints(r,d,l).length||o||s)&&i.push(r.id)}}return i},getControlBox:function(e){for(var t={x1:null,y1:null,x2:null,y2:null},i=0;i<e.length;i++){var n,r=e[i],a=Model.getShapeById(r);n="linker"==a.name?this.getLinkerBox(a):this.getShapeBox(a),(null==t.x1||n.x<t.x1)&&(t.x1=n.x),(null==t.y1||n.y<t.y1)&&(t.y1=n.y),(null==t.x2||n.x+n.w>t.x2)&&(t.x2=n.x+n.w),(null==t.y2||n.y+n.h>t.y2)&&(t.y2=n.y+n.h)}return{x:t.x1,y:t.y1,w:t.x2-t.x1,h:t.y2-t.y1}},getShapesBounding:function(e){for(var t={x1:null,y1:null,x2:null,y2:null},i=0;i<e.length;i++){var n,r=e[i];n="linker"==r.name?this.getLinkerBox(r):r.props,(null==t.x1||n.x<t.x1)&&(t.x1=n.x),(null==t.y1||n.y<t.y1)&&(t.y1=n.y),(null==t.x2||n.x+n.w>t.x2)&&(t.x2=n.x+n.w),(null==t.y2||n.y+n.h>t.y2)&&(t.y2=n.y+n.h)}return{x:t.x1,y:t.y1,w:t.x2-t.x1,h:t.y2-t.y1}},getShapeContext:function(e){return Utils.getDomById(e).getElementsByTagName("canvas")[0].getContext("2d")},selectIds:[],isRangeSelect:!1,selectShape:function(e,t,i){if("string"==typeof e){var n=e;(e=[]).push(n)}if(!(e.length<=0)){for(var r=[],a=0;a<e.length;a++){var o=e[a];if((!(h=Model.getShapeById(o)).attribute||!h.attribute.collapseBy)&&(r.push(o),h.group)){var s=Model.getGroupShapes(h.group);Utils.mergeArray(r,s)}}var l=[];for(a=0;a<r.length;a++){o=r[a];(h=Model.getShapeById(o)).parent&&0==h.resizeDir.length&&l.indexOf(h.parent)<0?l.push(h.parent):l.indexOf(o)<0&&l.push(o)}e=l,Utils.removeAnchors(),Utils.selectIds=[];for(var p=0;p<e.length;p++){n=e[p];var h=Model.getShapeById(n);Utils.selectIds.push(n),"linker"==h.name?this.isLocked(h.id)?Utils.showLockers(h):0!=i&&(Model.intersection[h.id]?Designer.painter.renderLinker(h,null,null,Model.intersection[h.id]):Designer.painter.renderLinker(h)):this.isLocked(h.id)?Utils.showLockers(h):1==e.length?Utils.showCreateLinker(h):Utils.showAnchors(h)}var d=!1;if(1==(l=Utils.getSelectedIds()).length)"linker"==Model.getShapeById(l[0]).name&&(d=!0,Utils.showLinkerControls());if(l.length>0&&!d)Designer.painter.drawControls(l);void 0===t&&(t=!0),this.selectCallback&&t&&this.selectCallback(),0!=i&&Designer.events.push("selectChanged"),this.showLinkerCursor(),Designer.events.push("renderSvgCharts","select")}},selectCallback:null,unselect:function(e){var t=this.selectIds;this.selectIds=[],0==t.length&&(this.isRangeSelect=!1),this.unselectGrid();for(var i=0;i<t.length;i++){var n=t[i],r=Model.getShapeById(n);"linker"==r.name&&0!=e&&(Model.intersection[r.id]?Designer.painter.renderLinker(r,null,null,Model.intersection[r.id]):Designer.painter.renderLinker(r))}$("#shape_controls").hide(),$(".pop-sub-editor").hide(),$("#pop-sub-editor-menu").removeClass("show"),Utils.removeLockers(),Utils.removeAnchors(),Utils.removeCreateLinker(),0!=e&&Designer.events.push("selectChanged"),this.hideLinkerCursor(),this.hideLinkerControls()},getSelected:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i)){var n=Model.getShapeById(i);e.push(n)}}return e},getSelectedIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];Utils.isLocked(i)||e.push(i)}return e},getSelectedLinkers:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i)){var n=Model.getShapeById(i);"linker"==n.name&&e.push(n)}}return e},getSelectedLinkerIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i))"linker"==Model.getShapeById(i).name&&e.push(i)}return e},getSelectedShapeIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i))"linker"!=Model.getShapeById(i).name&&e.push(i)}return e},getSelectedLockedIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];Utils.isLocked(i)&&e.push(i)}return e},getSelectedGroups:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);n.group&&e.indexOf(n.group)<0&&e.push(n.group)}return e},getSelectedGroupsAndShapes:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);n.group&&e.indexOf(n.group)<0&&e.push(n.group),n.group||("linker"!=n.name?e.push(n.id):null==n.from.id&&null==n.to.id&&e.push(n.id))}return e},getSelectedLanes:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);"lane"==n.category&&e.push(n)}return e},getSelectedCharts:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);n.name.startsWith("chart_")&&e.push(n)}return e},isSelected:function(e){return this.selectIds.indexOf(e)>=0&&!this.isLocked(e)},selectText:function(e){if(document.body.createTextRange)(t=document.body.createTextRange()).moveToElementText(e),t.select();else if(window.getSelection){var t,i=window.getSelection();(t=document.createRange()).selectNodeContents(e),i.removeAllRanges(),i.addRange(t)}},getShapeTextNumber:function(){var e=Model.define.elements,t=this.selectIds,i="",n="";for(var r in e){var a=e[r];"linker"==a.name?a.textBlock&&a.textBlock.length?a.textBlock.map(function(e){i+=e.text||"",-1!==t.indexOf(r)&&(n+=e.text||"")}):a.text&&(i+=a.text||"",-1!==t.indexOf(r)&&(n+=a.text||"")):a.textBlock&&a.textBlock.length&&a.textBlock.map(function(e){i+=e.text||"",-1!==t.indexOf(r)&&(n+=e.text||"")})}var o=$("<div style='display:none;'>"+i+"</div>").appendTo("body");o.find(".equation-text").remove();var s=o.text().length;o.html(n).find(".equation-text").remove();var l=o.text().length;return o.remove(),{all:s,select:l}},isLocked:function(e){return!!Model.getShapeById(e).locked},linkerCursorTimer:null,showLinkerCursor:function(){this.hideLinkerCursor();var e=Utils.getSelectedIds();if(1==e.length){var t=Model.getShapeById(e[0]);if("linker"!=t.name){var i=Model.linkerMap.map[t.id];if(i&&i.length){for(var n=[],r=0;r<i.length;r++){var a=i[r],o=Model.getShapeById(a);if(t.id==o.from.id&&o.to.id){var s=this.getLinkerLength(o),l=[];if("broken"==o.linkerType){l.push({x:o.from.x,y:o.from.y,t:0});for(var p=0;p<o.points.length;p++){var h=o.points[p];l.push({x:h.x,y:h.y})}l.push({x:o.to.x,y:o.to.y});var d=0;for(p=1;p<l.length;p++){var c=l[p-1],u=l[p];d+=Utils.measureDistance(c,u),u.t=d/s}}Math.floor(s/120);for(var g=3/s,y=120*Math.ceil(s/120)/s,f=0;f<s;){var x={t:f/s,step:g,linker:o,points:l,maxT:y};n.push(x),f+=120}}}this.playLinkerCursor(n)}}}},playLinkerCursor:function(e){for(var t=0;t<e.length;t++){var i=e[t],n=$("<div class='linker_cursor'></div>").appendTo("#designer_canvas"),r=i.linker,a=Utils.getLinkerLineStyle(r.lineStyle).lineWidth+2;a<5&&(a=5);var o=a/2;i.half=o,i.dom=n,n.css({width:a,height:a,"-webkit-border-radius":o,"-moz-border-radius":o,"-ms-border-radius":o,"-o-border-radius":o,"border-radius":o,"z-index":$("#"+r.id).css("z-index")})}this.linkerCursorTimer=setInterval(function(){for(var t=0;t<e.length;t++){var i=e[t],n=i.linker;i.t>=i.maxT&&(i.t=0,i.dom.show());var r=i.t;if("broken"==n.linkerType)for(var a=1;a<i.points.length;a++){var o=i.points[a-1],s=i.points[a];if(r>=o.t&&r<s.t){var l=(r-o.t)/(s.t-o.t),p=(1-l)*o.x+l*s.x,h=(1-l)*o.y+l*s.y;i.dom.css({left:p-i.half,top:h-i.half});break}}else if("curve"==n.linkerType){var d=n.from,c=(o=n.points[0],s=n.points[1],n.to);p=d.x*Math.pow(1-r,3)+o.x*r*Math.pow(1-r,2)*3+s.x*Math.pow(r,2)*(1-r)*3+c.x*Math.pow(r,3),h=d.y*Math.pow(1-r,3)+o.y*r*Math.pow(1-r,2)*3+s.y*Math.pow(r,2)*(1-r)*3+c.y*Math.pow(r,3);i.dom.css({left:p-i.half,top:h-i.half})}else{p=(1-r)*n.from.x+r*n.to.x,h=(1-r)*n.from.y+r*n.to.y;i.dom.css({left:p-i.half,top:h-i.half})}i.t+=i.step,i.t>=1&&i.dom.hide()}},30)},hideLinkerCursor:function(){this.linkerCursorTimer&&clearInterval(this.linkerCursorTimer),$(".linker_cursor").remove()},showLinkerControls:function(){var e=Utils.getSelectedIds(),t=null;if(1==e.length){var i=Model.getShapeById(e[0]);"linker"==i.name&&"curve"==i.linkerType&&(t=i)}function n(e,t){var i=null,n=null;"from"==t?(i=e.from,n=e.points[0]):(i=e.to,n=e.points[1]);var r=Utils.measureDistance(i,n)-6,a={x:.5*i.x+.5*n.x,y:.5*i.y+.5*n.y},o=Utils.getAngle(i,n)+Math.PI/2,s=$("#linker_control_line_"+t),l=$("#linker_control_point_"+t);0==s.length&&(s=$("<div id='linker_control_line_"+t+"' class='linker_control_line'></div>").appendTo("#designer_canvas")),0==l.length&&(l=$("<div  id='linker_control_point_"+t+"' class='linker_control_point'></div>").appendTo("#designer_canvas"));var p="rotate("+Math.round(o/(2*Math.PI)*360)+"deg)";return s.css({left:a.x,top:a.y-r/2,height:r,width:1..restoreScale(),"z-index":Model.orderList.length,"-webkit-transform":p,"-ms-transform":p,"-o-transform":p,"-moz-transform":p,transform:p}),l.css({left:n.x-6,top:n.y-6,transform:"scale("+1..restoreScale()+")","z-index":999999,width:"12px",height:"12px"}),l.attr("ty",t),l.unbind().bind("touchstart",function(i){i.preventDefault(),i.stopPropagation(),i=i.originalEvent.touches[0],e=Model.getShapeById(e.id);var n=null;n="from"==t?e.points[0]:e.points[1],l.addClass("moving"),Designer.op.changeState("changing_curve");var r=i.pageX,a=i.pageY,o=0,s=0;null!=e.textPos&&(o=e.textPos.x,s=e.textPos.y);var p=$("#designer_canvas");$(document).bind("touchmove.change_curve",function(t){t=t.originalEvent.touches[0];var i=Utils.getRelativePos(t.pageX,t.pageY,p);if(n.x=i.x,n.y=i.y,null!=e.textPos){var h=Utils.restoreScale({x:t.pageX-r,y:t.pageY-a});e.textPos.x=o+h.x,e.textPos.y=s+h.y}Designer.painter.renderLinker(e,null,!0),Model.define.elements[e.id]=e,Utils.showLinkerControls(),$(".linker_control_point[ty="+l.attr("ty")+"]").addClass("moving"),$(document).unbind("touchend.changed_curve").bind("touchend.changed_curve",function(t){Model.update(e),$(document).unbind("touchend.changed_curve")})}),$(document).unbind("touchend.change_curve").bind("touchend.change_curve",function(e){$(document).unbind("touchend.change_curve"),$(document).unbind("touchmove.change_curve"),$(".linker_control_point").removeClass("moving"),Designer.op.resetState()})}),l}null!=t&&(n(t,"from"),n(t,"to"))},hideLinkerControls:function(){$(".linker_control_line").remove(),$(".linker_control_point").remove()},showLinkerEndsPoint:function(){$(".linker_ends_point").show()},hideLinkerEndsPoint:function(){$(".linker_ends_point").hide()},showAnchors:function(e){if(!($("#shape_contour_"+e.id).length>0||$("#shape_create_linkers_"+e.id).length>0)){var t=$("<div class='shape_contour' id='shape_contour_"+e.id+"'></div>").appendTo($("#designer_canvas"));t.css({left:e.props.x,top:e.props.y,"z-index":Model.orderList.length+1}),Utils.isSelected(e.id)||t.addClass("hovered_contour");for(var i=Designer.config.anchorSize-2,n={"border-color":Designer.config.anchorColor,"border-radius":Designer.config.anchorSize/2,width:i,height:i,transform:"scale( "+1/Designer.config.scale+")"},r=e.getAnchors(),a={x:e.props.w/2,y:e.props.h/2},o=e.props.angle,s=0;s<r.length;s++){var l=r[s],p=$("<div class='shape_anchor'></div>").appendTo(t),h=this.getRotated(a,l,o);n.left=h.x-Designer.config.anchorSize/2,n.top=h.y-Designer.config.anchorSize/2,p.css(n)}}},hideAnchors:function(){$(".hovered_contour").remove()},removeAnchors:function(){$(".shape_contour").remove()},showLinkerFocusPoint:function(e){var t=$(".linker_focus_point");0==t.length&&(t=$("<div class='linker_focus_point'></div>").appendTo("#designer_canvas")).css({width:"6px",height:"6px",border:"1px solid #fff",borderRadius:"50%",backgroundColor:"#EB5555",position:"absolute",transform:"translate(-50%,-50%) scale("+1..restoreScale()+")",zIndex:Model.orderList.length+1}),t.css({left:e.x,top:e.y})},hideLinkerFocusPoint:function(){$(".linker_focus_point").remove()},showLockers:function(e){var t=$("#"+e.id),i=this.getShapeBox(e);function n(e){(function(){var e=$("<canvas class='shape_locker' width='10px' height='10px'></canvas>").appendTo(t),i=e[0].getContext("2d");return i.strokeStyle="#777",i.lineWidth=1,i.beginPath(),i.moveTo(2,2),i.lineTo(9,9),i.moveTo(2,9),i.lineTo(9,2),i.stroke(),e})().css({left:e.x-i.x+5,top:e.y-i.y+5})}if("linker"!=e.name){var r=e.props,a={x:r.x+r.w/2,y:r.y+r.h/2};n(this.getRotated(a,{x:r.x,y:r.y},e.props.angle)),n(this.getRotated(a,{x:r.x+r.w,y:r.y},e.props.angle)),n(this.getRotated(a,{x:r.x+r.w,y:r.y+r.h},e.props.angle)),n(this.getRotated(a,{x:r.x,y:r.y+r.h},e.props.angle))}else n(e.from),n(e.to)},removeLockers:function(){$(".shape_locker").remove()},showCreateLinkerMulti:function(e){for(var t=0;t<e.length;t++){var i=e[t];"linker"==i.name||this.isLocked(i.id)||this.showCreateLinker(i)}},showCreateLinker:function(e){if(!($("#shape_create_linkers_"+e.id).length>0))for(var t=30..restoreScale(),i=$("<div class='shape_create_linkers' id='shape_create_linkers_"+e.id+"'></div>").appendTo($("#designer_canvas")),n={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2},r=e.getAnchors(),a=0;a<r.length;a++){var o,s,l,p,h=r[a],d=h.x,c=h.y,u=e.props.w-h.x,g=e.props.h-h.y,y=Math.min(d,c,u,g);d==y?(o=e.props.x-t,s=e.props.y+e.props.h/2,l=e.props.x-80,p=s):c==y?(o=e.props.x+e.props.w/2,s=e.props.y-t,l=o,p=e.props.y-80):u==y?(o=e.props.x+e.props.w+t,s=e.props.y+e.props.h/2,l=e.props.x+e.props.w+80,p=s):g==y&&(o=e.props.x+e.props.w/2,s=e.props.y+e.props.h+t,l=o,p=e.props.y+e.props.h+80),h=this.getRotated(n,{x:o,y:s},e.props.angle);var f=this.getRotated(n,{x:l,y:p},e.props.angle),x=this.getLineToShapePoints(e,h,n);if(x=x.length?x[0]:h,e.name.startsWith("chart_")){if(0==a)var v=.5*Math.PI;else if(1==a)v=1.5*Math.PI;else if(2==a)v=0;else if(3==a)v=Math.PI}else v=this.getPointAngle(e.id,x.x,x.y,7);$("<div class='shape_create_linker po-diagraming-icons' shape_id='"+e.id+"' angle="+v+" x1="+x.x+" y1="+x.y+" x2="+f.x+" y2="+f.y+">&#xe7fb;</div>").appendTo(i).css({width:"20px",height:"20px",margin:"-10px","line-height":"20px","font-size":"20px",left:h.x,top:h.y,"z-index":Model.orderList.length+2,transform:"scale("+1..restoreScale()+")"})}},removeCreateLinker:function(){$(".shape_create_linkers").remove()},measureDistance:function(e,t){var i=t.y-e.y,n=t.x-e.x;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},removeFromArray:function(e,t){var i=e.indexOf(t);return i>=0&&e.splice(i,1),e},addToArray:function(e,t){return e.indexOf(t)<0&&e.push(t),e},mergeArray:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];e.indexOf(n)<0&&e.push(n)}return e},getCirclePoints:function(e,t,i){for(var n=Math.PI/90,r=[],a=0;a<180;a++){var o=n*a,s={x:e-Math.cos(o)*i,y:t-Math.sin(o)*i,angle:o};r.push(s)}return r},getLineToShapePoints:function(e,t,i){var n=[];if("linker"==e.name)return n;for(var r=this.getShapeBox(e),a=this.getShapeContext(e.id),o=Utils.isMac(),s=t.x,l=t.y,p=i.x,h=i.y,d=this.measureDistance(t,i),c=Math.atan2(h-l,p-s),u=-1;u<=d;u++){var g=t.x+Math.cos(c)*u,y=t.y+Math.sin(c)*u,f=g-(r.x-10),x=y-(r.y-10);o&&(f*=2,x*=2),a.isPointInPath(f,x)?n.push({x:g,y:y,inPath:!0}):n.push({x:g,y:y,inPath:!1})}var v=n.length;return n.filter(function(e,t){return!(!(t>0&&e.inPath)||n[t-1].inPath)||!(!(t<v-1&&e.inPath)||n[t+1].inPath)})},getPointAngle:function(e,t,i,n){var r=Utils.restoreScale($("#"+e).position()),a=Utils.getShapeContext(e),o=Utils.isMac();t-=r.left,i-=r.top;for(var s=this.getCirclePoints(t,i,n),l=s.length,p=!1,h=0;h<l;h++){var d=(y=s[h]).x,c=y.y;o&&(d=2*y.x+4,c=2*y.y+6),a.isPointInPath(d,c)?(y.inPath=!0,p=!0):y.inPath=!1}if(0==p)return null;var u=null,g=null;for(h=0;h<l;h++){var y;if(!(y=s[h]).inPath){if(null==u)s[(h-1+l)%l].inPath&&(u=y.angle);if(null==g)s[(h+1+l)%l].inPath&&(g=y.angle);if(null!=u&&null!=g)break}}return(u+(2*Math.PI+g-u)%(2*Math.PI)/2)%(2*Math.PI)},getAngleDir:function(e){var t=Math.PI;return e>=t/4&&e<t/4*3?1:e>=t/4*3&&e<t/4*5?2:e>=t/4*5&&e<t/4*7?3:4},getLinkerPoints:function(e,t,i){for(var n=Utils.copyArray(e.points),r=-1,a=-1,o=0;o<n.length;o++){(_=n[o].fixed)&&-1==r&&(r=o),_&&(a=o)}if(r>-1&&!0!==i)return n=this.getLinkerFixedPoints(e,r,a,t,i);if(n=[],"broken"==e.linkerType){var s=Math.PI,l=e.from,p=e.to,h=Math.abs(p.x-l.x),d=Math.abs(p.y-l.y);t=t?20:0;var c=null!=l.id&&Model.getShapeById(l.id),u=null!=p.id&&Model.getShapeById(p.id);if(c&&u){var g=this.getAngleDir(l.angle),y=this.getAngleDir(p.angle);if(1==g&&1==y){l.y<p.y?(_=l,D=p,U=!1):(_=p,D=l,U=!0);var f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>=f.x-30&&D.x<=f.x+f.w+30){m=D.x<f.x+f.w/2?f.x-30:f.x+f.w+30;var v=_.y-30;n.push({x:_.x,y:v}),_.id!==D.id&&n.push({x:m,y:v}),v=D.y-30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{v=_.y-30;n.push({x:_.x,y:v}),n.push({x:D.x,y:v})}}else if(3==g&&3==y){l.y>p.y?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>=f.x-30&&D.x<=f.x+f.w+30){v=_.y+30;m=D.x<f.x+f.w/2?f.x-30:f.x+f.w+30,n.push({x:_.x,y:v}),_.id!==D.id&&n.push({x:m,y:v}),v=D.y+30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{v=_.y+30;n.push({x:_.x,y:v}),n.push({x:D.x,y:v})}}else if(2==g&&2==y){l.x>p.x?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.y>=f.y-30&&D.y<=f.y+f.h+30){var m=_.x+30;v=D.y<f.y+f.h/2?f.y-30:f.y+f.h+30,n.push({x:m,y:_.y}),_.id!==D.id&&n.push({x:m,y:v}),m=D.x+30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:m,y:D.y})}else{m=_.x+30;n.push({x:m,y:_.y}),n.push({x:m,y:D.y})}}else if(4==g&&4==y){l.x<p.x?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.y>=f.y-30&&D.y<=f.y+f.h+30){m=_.x-30;v=D.y<f.y+f.h/2?f.y-30:f.y+f.h+30,n.push({x:m,y:_.y}),_.id!==D.id&&n.push({x:m,y:v}),m=D.x-30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:m,y:D.y})}else{m=_.x-30;n.push({x:m,y:_.y}),n.push({x:m,y:D.y})}}else if(1==g&&3==y||3==g&&1==y){1==g?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.y<=_.y){v=_.y-d/2;n.push({x:_.x,y:v}),n.push({x:D.x,y:v})}else{var b=f.x+f.w,w=x.x+x.w;v=_.y-30;if(w>=f.x&&x.x<=b){var S=f.x+f.w/2;m=D.x<S?f.x<x.x?f.x-30:x.x-30:b>w?b+30:w+30,x.y<_.y&&(v=x.y-30)}else m=D.x<_.x?w+(f.x-w)/2:b+(x.x-b)/2;n.push({x:_.x,y:v}),n.push({x:m,y:v}),v=D.y+30,n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(2==g&&4==y||4==g&&2==y){2==g?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>_.x){m=_.x+h/2;n.push({x:m,y:_.y}),n.push({x:m,y:D.y})}else{var k=f.y+f.h,M=x.y+x.h;m=_.x+30;if(M>=f.y&&x.y<=k){S=f.y+f.h/2;v=D.y<S?f.y<x.y?f.y-30:x.y-30:k>M?k+30:M+30,x.x+x.w>_.x&&(m=x.x+x.w+30)}else v=D.y<_.y?M+(f.y-M)/2:k+(x.y-k)/2;n.push({x:m,y:_.y}),n.push({x:m,y:v}),m=D.x-30,n.push({x:m,y:v}),n.push({x:m,y:D.y})}}else if(1==g&&2==y||2==g&&1==y){2==g?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>_.x&&D.y>_.y)n.push({x:D.x,y:_.y});else if(D.x>_.x&&x.x>_.x){m=x.x-_.x<60?_.x+(x.x-_.x)/2:_.x+30;v=D.y-30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x<=_.x&&D.y>f.y+f.h){k=f.y+f.h,m=_.x+30;v=D.y-k<60?k+(D.y-k)/2:D.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=(w=x.x+x.w)>_.x?w+30:_.x+30,v=D.y<f.y?D.y-30:f.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(1==g&&4==y||4==g&&1==y){4==g?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,w=(x=Model.getShapeById(D.id).props).x+x.w;if(D.x<_.x&&D.y>_.y)n.push({x:D.x,y:_.y});else if(D.x<_.x&&w<_.x){m=_.x-w<60?w+(_.x-w)/2:_.x-30;v=D.y-30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x>=_.x&&D.y>f.y+f.h){k=f.y+f.h,m=_.x-30;v=D.y-k<60?k+(D.y-k)/2:D.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=x.x<_.x?x.x-30:_.x-30,v=D.y<f.y?D.y-30:f.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(2==g&&3==y||3==g&&2==y){2==g?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>_.x&&D.y<_.y)n.push({x:D.x,y:_.y});else if(D.x>_.x&&x.x>_.x){m=x.x-_.x<60?_.x+(x.x-_.x)/2:_.x+30;v=D.y+30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x<=_.x&&D.y<f.y){m=_.x+30;v=f.y-D.y<60?D.y+(f.y-D.y)/2:D.y+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=(w=x.x+x.w)>_.x?w+30:_.x+30,v=D.y>f.y+f.h?D.y+30:f.y+f.h+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(3==g&&4==y||4==g&&3==y){4==g?(_=l,D=p,U=!1):(_=p,D=l,U=!0);f=Model.getShapeById(_.id).props,w=(x=Model.getShapeById(D.id).props).x+x.w;if(D.x<_.x&&D.y<_.y)n.push({x:D.x,y:_.y});else if(D.x<_.x&&w<_.x){m=_.x-w<60?w+(_.x-w)/2:_.x-30;v=D.y+30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x>=_.x&&D.y<f.y){m=_.x-30;v=f.y-D.y<60?D.y+(f.y-D.y)/2:D.y+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=x.x<_.x?x.x-30:_.x-30,v=D.y>f.y+f.h?D.y+30:f.y+f.h+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}U&&n.reverse()}else if(c||u){var _,D,U,$;c?(_=l,D=p,U=!1,$=l.angle):(_=p,D=l,U=!0,$=p.angle);var P=Model.getShapeById(_.id).props;if($>=s/4&&$<s/4*3)if(D.y<_.y-t)if(h>=d)n.push({x:_.x,y:D.y});else{S=d/2;n.push({x:_.x,y:_.y-S}),n.push({x:D.x,y:_.y-S})}else if(n.push({x:_.x,y:_.y-30}),h>=d)if(D.x>=P.x-30&&D.x<=P.x+P.w+30){var L=P.x+P.w/2;D.x<L?(n.push({x:P.x-30,y:_.y-30}),n.push({x:P.x-30,y:D.y})):(n.push({x:P.x+P.w+30,y:_.y-30}),n.push({x:P.x+P.w+30,y:D.y}))}else D.x<P.x?(n.push({x:D.x+30,y:_.y-30}),n.push({x:D.x+30,y:D.y})):(n.push({x:D.x-30,y:_.y-30}),n.push({x:D.x-30,y:D.y}));else if(D.x>=P.x-30&&D.x<=P.x+P.w+30){L=P.x+P.w/2;D.x<L?(n.push({x:P.x-30,y:_.y-30}),n.push({x:P.x-30,y:D.y-30}),n.push({x:D.x,y:D.y-30})):(n.push({x:P.x+P.w+30,y:_.y-30}),n.push({x:P.x+P.w+30,y:D.y-30}),n.push({x:D.x,y:D.y-30}))}else n.push({x:D.x,y:_.y-30});else if($>=s/4*3&&$<s/4*5)if(D.x>_.x+t)if(h>=d){S=h/2;n.push({x:_.x+S,y:_.y}),n.push({x:_.x+S,y:D.y})}else n.push({x:D.x,y:_.y});else if(n.push({x:_.x+30,y:_.y}),h>=d)if(D.y>=P.y-30&&D.y<=P.y+P.h+30){L=P.y+P.h/2;D.y<L?(n.push({x:_.x+30,y:P.y-30}),n.push({x:D.x+30,y:P.y-30}),n.push({x:D.x+30,y:D.y})):(n.push({x:_.x+30,y:P.y+P.h+30}),n.push({x:D.x+30,y:P.y+P.h+30}),n.push({x:D.x+30,y:D.y}))}else n.push({x:_.x+30,y:D.y});else if(D.y>=P.y-30&&D.y<=P.y+P.h+30){L=P.y+P.h/2;D.y<L?(n.push({x:_.x+30,y:P.y-30}),n.push({x:D.x,y:P.y-30})):(n.push({x:_.x+30,y:P.y+P.h+30}),n.push({x:D.x,y:P.y+P.h+30}))}else D.y<_.y?(n.push({x:_.x+30,y:D.y+30}),n.push({x:D.x,y:D.y+30})):(n.push({x:_.x+30,y:D.y-30}),n.push({x:D.x,y:D.y-30}));else if($>=s/4*5&&$<s/4*7)if(D.y>_.y+t)if(h>=d)n.push({x:_.x,y:D.y});else{S=d/2;n.push({x:_.x,y:_.y+S}),n.push({x:D.x,y:_.y+S})}else if(n.push({x:_.x,y:_.y+30}),h>=d)if(D.x>=P.x-30&&D.x<=P.x+P.w+30){L=P.x+P.w/2;D.x<L?(n.push({x:P.x-30,y:_.y+30}),n.push({x:P.x-30,y:D.y})):(n.push({x:P.x+P.w+30,y:_.y+30}),n.push({x:P.x+P.w+30,y:D.y}))}else D.x<P.x?(n.push({x:D.x+30,y:_.y+30}),n.push({x:D.x+30,y:D.y})):(n.push({x:D.x-30,y:_.y+30}),n.push({x:D.x-30,y:D.y}));else if(D.x>=P.x-30&&D.x<=P.x+P.w+30){L=P.x+P.w/2;D.x<L?(n.push({x:P.x-30,y:_.y+30}),n.push({x:P.x-30,y:D.y+30}),n.push({x:D.x,y:D.y+30})):(n.push({x:P.x+P.w+30,y:_.y+30}),n.push({x:P.x+P.w+30,y:D.y+30}),n.push({x:D.x,y:D.y+30}))}else n.push({x:D.x,y:_.y+30});else if(D.x<_.x-t)if(h>=d){S=h/2;n.push({x:_.x-S,y:_.y}),n.push({x:_.x-S,y:D.y})}else n.push({x:D.x,y:_.y});else if(n.push({x:_.x-30,y:_.y}),h>=d)if(D.y>=P.y-30&&D.y<=P.y+P.h+30){L=P.y+P.h/2;D.y<L?(n.push({x:_.x-30,y:P.y-30}),n.push({x:D.x-30,y:P.y-30}),n.push({x:D.x-30,y:D.y})):(n.push({x:_.x-30,y:P.y+P.h+30}),n.push({x:D.x-30,y:P.y+P.h+30}),n.push({x:D.x-30,y:D.y}))}else n.push({x:_.x-30,y:D.y});else if(D.y>=P.y-30&&D.y<=P.y+P.h+30){L=P.y+P.h/2;D.y<L?(n.push({x:_.x-30,y:P.y-30}),n.push({x:D.x,y:P.y-30})):(n.push({x:_.x-30,y:P.y+P.h+30}),n.push({x:D.x,y:P.y+P.h+30}))}else D.y<_.y?(n.push({x:_.x-30,y:D.y+30}),n.push({x:D.x,y:D.y+30})):(n.push({x:_.x-30,y:D.y-30}),n.push({x:D.x,y:D.y-30}));U&&n.reverse()}else if(h>=d){S=(p.x-l.x)/2;n.push({x:l.x+S,y:l.y}),n.push({x:l.x+S,y:p.y})}else{S=(p.y-l.y)/2;n.push({x:l.x,y:l.y+S}),n.push({x:p.x,y:l.y+S})}}else if("curve"==e.linkerType){l=e.from,p=e.to;var I=.4*this.measureDistance(l,p);function C(e,t){if(null!=e.id)return{x:e.x-I*Math.cos(e.angle),y:e.y-I*Math.sin(e.angle)};var i=Math.abs(e.y-t.y),n=Math.abs(e.x-t.x),r=Math.atan(i/n),a={};return e.x<=t.x?a.x=e.x+I*Math.cos(r):a.x=e.x-I*Math.cos(r),e.y<=t.y?a.y=e.y+I*Math.sin(r):a.y=e.y-I*Math.sin(r),a}n.push(C(l,p)),n.push(C(p,l))}return n},getLinkerFixedPoints:function(e,t,i,n,r){var a=e.points,o=Math.PI,s=e.from,l=e.to;n=n?20:0;var p,h,d,c,u,g=null!=s.id&&Model.getShapeById(s.id),y=null!=l.id&&Model.getShapeById(l.id),f=[];if(g&&"from"==r||y&&"to"==r){g&&"from"==r?(p=s,h=(u=a.slice(t))[0],c=s.angle,u[1]||l,d=!1):(p=l,h=(u=a.slice(0,i+1))[i],c=l.angle,u[i-1]||s,d=!0);var x=Math.abs(h.x-p.x),v=Math.abs(h.y-p.y),m=Model.getShapeById(p.id).props;if(c>=o/4&&c<o/4*3)if(h.y<p.y-n)if(x>=v)f.push({x:p.x,y:h.y});else{var b=v/2;f.push({x:p.x,y:p.y-b}),f.push({x:h.x,y:p.y-b})}else if(f.push({x:p.x,y:p.y-30}),x>=v)if(h.x>=m.x-30&&h.x<=m.x+m.w+30){var w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y-30}),f.push({x:m.x-30,y:h.y})):(f.push({x:m.x+m.w+30,y:p.y-30}),f.push({x:m.x+m.w+30,y:h.y}))}else h.x<m.x?(f.push({x:h.x+30,y:p.y-30}),f.push({x:h.x+30,y:h.y})):(f.push({x:h.x-30,y:p.y-30}),f.push({x:h.x-30,y:h.y}));else if(h.x>=m.x-30&&h.x<=m.x+m.w+30){w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y-30}),f.push({x:m.x-30,y:h.y-30}),f.push({x:h.x,y:h.y-30})):(f.push({x:m.x+m.w+30,y:p.y-30}),f.push({x:m.x+m.w+30,y:h.y-30}),f.push({x:h.x,y:h.y-30}))}else f.push({x:h.x,y:p.y-30});else if(c>=o/4*3&&c<o/4*5)if(h.x>p.x+n)if(x>=v){b=x/2;f.push({x:p.x+b,y:p.y}),f.push({x:p.x+b,y:h.y})}else f.push({x:h.x,y:p.y});else if(f.push({x:p.x+30,y:p.y}),x>=v)if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x+30,y:m.y-30}),f.push({x:h.x+30,y:m.y-30}),f.push({x:h.x+30,y:h.y})):(f.push({x:p.x+30,y:m.y+m.h+30}),f.push({x:h.x+30,y:m.y+m.h+30}),f.push({x:h.x+30,y:h.y}))}else f.push({x:p.x+30,y:h.y});else if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x+30,y:m.y-30}),f.push({x:h.x,y:m.y-30})):(f.push({x:p.x+30,y:m.y+m.h+30}),f.push({x:h.x,y:m.y+m.h+30}))}else h.y<p.y?(f.push({x:p.x+30,y:h.y+30}),f.push({x:h.x,y:h.y+30})):(f.push({x:p.x+30,y:h.y-30}),f.push({x:h.x,y:h.y-30}));else if(c>=o/4*5&&c<o/4*7)if(h.y>p.y+n)if(x>=v)f.push({x:p.x,y:h.y});else{b=v/2;f.push({x:p.x,y:p.y+b}),f.push({x:h.x,y:p.y+b})}else if(f.push({x:p.x,y:p.y+30}),x>=v)if(h.x>=m.x-30&&h.x<=m.x+m.w+30){w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y+30}),f.push({x:m.x-30,y:h.y})):(f.push({x:m.x+m.w+30,y:p.y+30}),f.push({x:m.x+m.w+30,y:h.y}))}else h.x<m.x?(f.push({x:h.x+30,y:p.y+30}),f.push({x:h.x+30,y:h.y})):(f.push({x:h.x-30,y:p.y+30}),f.push({x:h.x-30,y:h.y}));else if(h.x>=m.x-30&&h.x<=m.x+m.w+30){w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y+30}),f.push({x:m.x-30,y:h.y+30}),f.push({x:h.x,y:h.y+30})):(f.push({x:m.x+m.w+30,y:p.y+30}),f.push({x:m.x+m.w+30,y:h.y+30}),f.push({x:h.x,y:h.y+30}))}else f.push({x:h.x,y:p.y+30});else if(h.x<p.x-n)if(x>=v){b=x/2;f.push({x:p.x-b,y:p.y}),f.push({x:p.x-b,y:h.y})}else f.push({x:h.x,y:p.y});else if(f.push({x:p.x-30,y:p.y}),x>=v)if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x-30,y:m.y-30}),f.push({x:h.x-30,y:m.y-30}),f.push({x:h.x-30,y:h.y})):(f.push({x:p.x-30,y:m.y+m.h+30}),f.push({x:h.x-30,y:m.y+m.h+30}),f.push({x:h.x-30,y:h.y}))}else f.push({x:p.x-30,y:h.y});else if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x-30,y:m.y-30}),f.push({x:h.x,y:m.y-30})):(f.push({x:p.x-30,y:m.y+m.h+30}),f.push({x:h.x,y:m.y+m.h+30}))}else h.y<p.y?(f.push({x:p.x-30,y:h.y+30}),f.push({x:h.x,y:h.y+30})):(f.push({x:p.x-30,y:h.y-30}),f.push({x:h.x,y:h.y-30}))}else{if("from"==r?(p=s,h=(u=a.slice(t))[0],c=s.angle,u[1]||l,d=!1):(p=l,h=(u=a.slice(0,i+1))[i],c=l.angle,u[i-1]||s,d=!0),(x=Math.abs(h.x-p.x))>=(v=Math.abs(h.y-p.y))){b=(h.x-p.x)/2;f.push({x:p.x+b,y:p.y}),f.push({x:p.x+b,y:h.y})}else{b=(h.y-p.y)/2;f.push({x:p.x,y:p.y+b}),f.push({x:h.x,y:p.y+b})}}return d?(f.reverse(),u.concat(f)):f.concat(u)},getLinkerLinePoints:function(e){var t=[];if("curve"!=e.linkerType)t.push(e.from),t=t.concat(e.points);else for(var i=0;i<=1;){var n={x:(1-i)*(1-i)*(1-i)*e.from.x+3*(1-i)*(1-i)*i*e.points[0].x+3*(1-i)*i*i*e.points[1].x+i*i*i*e.to.x,y:(1-i)*(1-i)*(1-i)*e.from.y+3*(1-i)*(1-i)*i*e.points[0].y+3*(1-i)*i*i*e.points[1].y+i*i*i*e.to.y};t.push(n),i+=.05}return t.push(e.to),t},getLinkerLinesPoints:function(e){var t=[],i=0;if("broken"==e.linkerType){var n=[];n.push(e.from),(n=n.concat(e.points)).push(e.to);for(var r=1;r<n.length;r++){var a=n[r],o=n[r-1];for(i=0;i<=1;){var s={x:o.x*(1-i)+a.x*i,y:o.y*(1-i)+a.y*i};t.push(s),i+=.05}}}if("normal"==e.linkerType)for(;i<1;){s={x:e.from.x*(1-i)+e.to.x*i,y:e.from.y*(1-i)+e.to.y*i};t.push(s),i+=.05}else for(;i<1;){s={x:(1-i)*(1-i)*(1-i)*e.from.x+3*(1-i)*(1-i)*i*e.points[0].x+3*(1-i)*i*i*e.points[1].x+i*i*i*e.to.x,y:(1-i)*(1-i)*(1-i)*e.from.y+3*(1-i)*(1-i)*i*e.points[0].y+3*(1-i)*i*i*e.points[1].y+i*i*i*e.to.y};t.push(s),i+=.05}return t},getLinkerBox:function(e){for(var t=this.getLinkerLinePoints(e),i=t[0].x,n=t[0].y,r=t[0].x,a=t[0].y,o=0;o<t.length;o++){var s=t[o];s.x<i?i=s.x:s.x>r&&(r=s.x),s.y<n?n=s.y:s.y>a&&(a=s.y)}return{x:i,y:n,w:r-i,h:a-n}},getShapeBox:function(e){var t=e.props,i=e.props.angle;return this.getRotatedBox(t,i)},getRotatedBox:function(e,t,i){if(0==t)return e;i||(i={x:e.x+e.w/2,y:e.y+e.h/2});var n=this.getRotated(i,{x:e.x,y:e.y},t),r=this.getRotated(i,{x:e.x+e.w,y:e.y},t),a=this.getRotated(i,{x:e.x+e.w,y:e.y+e.h},t),o=this.getRotated(i,{x:e.x,y:e.y+e.h},t),s=Math.min(n.x,r.x,a.x,o.x),l=Math.max(n.x,r.x,a.x,o.x),p=Math.min(n.y,r.y,a.y,o.y);return{x:s,y:p,w:l-s,h:Math.max(n.y,r.y,a.y,o.y)-p}},getRotated:function(e,t,i){var n=this.measureDistance(e,t);if(0==n||0==i)return t;var r=Math.atan(Math.abs(t.x-e.x)/Math.abs(e.y-t.y));t.x>=e.x&&t.y>=e.y?r=Math.PI-r:t.x<=e.x&&t.y>=e.y?r=Math.PI+r:t.x<=e.x&&t.y<=e.y&&(r=2*Math.PI-r);var a=((r%=2*Math.PI)+i)%(2*Math.PI);return{x:e.x+Math.sin(a)*n,y:e.y-Math.cos(a)*n}},getShapeAnchorInLinker:function(e){if("linker"==e.name)return[];for(var t=e.getAnchors(),i=[],n={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2},r=0;r<t.length;r++){var a=t[r],o={x:a.x+e.props.x,y:a.y+e.props.y},s=this.getRotated(n,o,e.props.angle);i.push(s)}for(var l=[],p=Model.orderList.length-1;p>=0;p--){var h=Model.orderList[p].id,d=Model.getShapeById(h);if(!("linker"!=d.name||d.attribute&&d.attribute.collapseBy)){var c=d,u=null;for(r=0;r<i.length;r++){var g={x:(y=i[r]).x-10,y:y.y-10,w:20,h:20};if(null==c.from.id&&this.pointInRect(c.from.x,c.from.y,g)){u={linker:c,anchors:[y],type:"from"};break}if(null==c.to.id&&this.pointInRect(c.to.x,c.to.y,g)){u={linker:c,anchors:[y],type:"to"};break}}if(null==u)for(r=0;r<i.length;r++){var y=i[r],f=Utils.pointInLinker(y,c,10),x=Utils.pointInRect(c.to.x,c.to.y,e.props),v=Utils.pointInRect(c.from.x,c.from.y,e.props);f>-1&&(v||x?x&&null==c.to.id?u={linker:c,anchors:[y],type:"to"}:v&&null==c.from.id&&(u={linker:c,anchors:[y],type:"from"}):(null!=u&&"line"==u.type||(u={linker:c,anchors:[],type:"line"}),u.anchors.push(y)))}if(null!=u){if("line"==u.type&&1==u.anchors.length)continue;l.push(u)}}}return l},getEndpointAngle:function(e,t){var i,n;if(i="from"==t?e.from:e.to,"normal"==e.linkerType)n="from"==t?e.to:e.from;else if("broken"==e.linkerType)"from"==t?(n=e.points[0]||e.to).x==i.x&&n.y==i.y&&(n=e.points[1]||e.to):(n=e.points[e.points.length-1]||e.from).x==i.x&&n.y==i.y&&(n=e.points[e.points.length-2]||e.from);else{var r,a=Utils.measureDistance(e.from,e.to);n={x:(1-(r="from"==t?12/a:1-12/a))*(1-r)*(1-r)*e.from.x+3*(1-r)*(1-r)*r*e.points[0].x+3*(1-r)*r*r*e.points[1].x+r*r*r*e.to.x,y:(1-r)*(1-r)*(1-r)*e.from.y+3*(1-r)*(1-r)*r*e.points[0].y+3*(1-r)*r*r*e.points[1].y+r*r*r*e.to.y}}return this.getAngle(n,i)},getAngle:function(e,t){var i=Math.atan(Math.abs(e.y-t.y)/Math.abs(e.x-t.x));return i=isNaN(i)?1.5707963267948966:i,t.x<=e.x&&t.y>e.y?i=Math.PI-i:t.x<e.x&&t.y<=e.y?i=Math.PI+i:t.x>=e.x&&t.y<e.y&&(i=2*Math.PI-i),i},getDarkerColor:function(e,t){t||(t=13);var i=e.split(","),n=parseInt(i[0]),r=parseInt(i[1]),a=parseInt(i[2]),o=Math.round(n-n/255*t);o<0&&(o=0);var s=Math.round(r-r/255*t);s<0&&(s=0);var l=Math.round(a-a/255*t);return l<0&&(l=0),o+","+s+","+l},getDarkestColor:function(e){return this.getDarkerColor(e,26)},toScale:function(e){var t={};for(var i in e)t[i]=e[i],"number"==typeof e[i]&&(t[i]=t[i].toScale());return t},restoreScale:function(e){var t={};for(var i in e)t[i]=e[i],"number"==typeof e[i]&&(t[i]=t[i].restoreScale());return t},shapesToRound:function(e){if(e&&e.length)for(var t=0,i=e.length;t<i;t++){var n=e[t];"lane"==n.category&&n.props&&(n.props.x=Math.round(n.props.x),n.props.y=Math.round(n.props.y),n.props.w=Math.round(n.props.w),n.props.h=Math.round(n.props.h))}},getOutlinkers:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push(n.id)}var r=[],a=[];for(i=0;i<e.length;i++){if("linker"!=(n=e[i]).name){var o=Model.getShapeLinkers(n.id);if(o&&o.length>0)for(var s=0;s<o.length;s++){var l=o[s];!this.isSelected(l)&&a.indexOf(l)<0&&t.indexOf(l)<0&&(r.push(Model.getShapeById(l)),a.push(l))}}}return r},getFamilyShapes:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];if("linker"!=r.name){if(r.parent&&Model.getShapeById(r.parent)){var a=Model.getShapeById(r.parent);Utils.isSelected(r.parent)||t.push(a);var o=this.getChildrenShapes(a);t=t.concat(o)}var s=this.getChildrenShapes(r);t=t.concat(s)}}for(n=0;n<t.length;n++)i.indexOf(t[n].id)>-1?(t.splice(n,1),n--):i.push(t[n].id);return t},getChildrenShapes:function(e){var t=[];if(e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++){var n=e.children[i],r=Model.getShapeById(n);r?!Utils.isSelected(n)&&r&&t.push(Model.getShapeById(n)):(e.children.splice(i,1),i--)}return t},isFamilyShape:function(e,t){return e.parent==t.id||(e.id==t.parent||!(!e.parent||e.parent!=t.parent))},getContainedShapes:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];if("linker"!=r.name&&r.attribute&&r.attribute.container){var a=o(r);t=t.concat(a)}}function o(e){for(var t=[],n=Model.orderList.length-1;n>=0;n--){var r=Model.orderList[n].id;if(e.id!=r&&!Utils.isSelected(r)&&i.indexOf(r)<0){var a=Model.getShapeById(r);if(!(a.attribute&&void 0!==a.attribute.container&&0!=a.attribute.container||Utils.isFamilyShape(a,e))){var o=Utils.getShapeBox(a);Utils.rectInRect(o,e.props)&&a.container==e.id&&(t.push(a),i.push(r))}}}return t}return t},getAttachedShapes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].id);var n=[];for(i=0;i<e.length;i++){var r=e[i];if("task"==r.groupName||"callActivity"==r.groupName||"subProcess"==r.groupName){for(var a=[],o=Model.orderList.length-1;o>=0;o--){var s=Model.orderList[o].id,l=Model.getShapeById(s);l.attachTo==r.id&&!Utils.isSelected(s)&&t.indexOf(s)<0&&a.push(l)}n=n.concat(a)}}return n},copy:function(e){return $.extend(!0,{},e)},copyArray:function(e){return $.extend(!0,[],e)},rangeChildren:function(e){var t=[];if(e.children&&e.children.length>0)if("verticalPool"==e.name){for(var i=[],n=[],r=0;r<e.children.length;r++){var a=e.children[r];"horizontalSeparator"==(h=Model.getShapeById(a)).name?n.push(h):i.push(h)}i.sort(function(e,t){return e.props.x-t.props.x});var o=e.props.x;for(r=0;r<i.length;r++){(h=i[r]).props.x=o,Designer.painter.renderShape(h),t.push(h),o+=h.props.w}n.sort(function(e,t){return e.props.y-t.props.y});var s=e.props.y+e.props.height[0];for(r=0;r<n.length;r++){var l=(h=n[r]).props.y+h.props.h;h.props.w=e.props.w,h.props.y=s;var p=l-s;r==n.length-1&&(p=e.props.y+e.props.h-s),h.props.h=p,Designer.painter.renderShape(h),t.push(h),s+=p}}else if("horizontalPool"==e.name){for(i=[],n=[],r=0;r<e.children.length;r++){a=e.children[r];"verticalSeparator"==(h=Model.getShapeById(a)).name?n.push(h):i.push(h)}i.sort(function(e,t){return e.props.y-t.props.y});for(s=e.props.y,r=0;r<i.length;r++){(h=i[r]).props.y=s,Designer.painter.renderShape(h),t.push(h),s+=h.props.h}n.sort(function(e,t){return e.props.x-t.props.x});for(o=e.props.x+e.props.height[0],r=0;r<n.length;r++){var h,d=(h=n[r]).props.x+h.props.w;h.props.h=e.props.h,h.props.x=o;var c=d-o;r==n.length-1&&(c=e.props.x+e.props.w-o),h.props.w=c,Designer.painter.renderShape(h),t.push(h),o+=c}}return t},getRelativePos:function(e,t,i){var n=i.offset();return null==n&&(n={left:0,top:0}),{x:(e-n.left+i.scrollLeft()).restoreScale(),y:(t-n.top+i.scrollTop()).restoreScale()}},getCollapsedShapes:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];if(r.attribute&&r.attribute.collapsed){for(var a=[],o=Model.orderList.length-1;o>=0;o--){var s=Model.orderList[o].id,l=Model.getShapeById(s);l.attribute&&l.attribute.collapseBy==r.id&&i.indexOf(s)<0&&a.push(l)}t=t.concat(a)}}return t},getCollapsedShapesById:function(e){for(var t=[],i=Model.orderList.length-1;i>=0;i--){var n=Model.orderList[i].id,r=Model.getShapeById(n);r.attribute&&r.attribute.collapseBy==e&&t.push(r)}return t},getShapeLineStyle:function(e,t){return 0!=t&&Model.define.theme&&Model.define.theme.shape?$.extend({},Schema.shapeDefaults.lineStyle,Model.define.theme.shape.lineStyle,e):$.extend({},Schema.shapeDefaults.lineStyle,e)},getLinkerLineStyle:function(e,t){return 0!=t&&Model.define.theme&&Model.define.theme.linker?$.extend({},Schema.linkerDefaults.lineStyle,Model.define.theme.linker.lineStyle,e):$.extend({},Schema.linkerDefaults.lineStyle,e)},getShapeFontStyle:function(e,t){Model.define;return 0!=t&&Model.define.theme&&Model.define.theme.shape?$.extend({},Schema.shapeDefaults.fontStyle,Model.define.theme.shape.fontStyle,e):$.extend({},Schema.shapeDefaults.fontStyle,e)},getShapeFontStyleByEditor:function(e){var t=e.textBlock,i=Utils.getGridSelectedCells(),n=t.map(function(e){return e.text||""}).join("");if(""==n)return this.getShapeFontStyle(e.fontStyle);var r=$("<div>"+n+"</div>").css({display:"none"}).appendTo("body");r.find(".equation-text").remove(),r.find("span").each(function(){""==$(this).text()&&$(this).remove()}),r.find("font").each(function(){$(this).attr("color")&&$(this).css("fill",$(this).attr("color"))}),r.find("strong").css("font-weight","bold"),r.find("b").css("font-weight","bold"),r.find("em").css("font-style","italic"),r.find("i").css("font-style","italic"),r.find("u").css("text-decoration","underline"),r.find("strike").css("text-decoration","line-through");var a=[];!function e(t){for(var i=0,n=t.length;i<n;i++){if("#text"==t[i].nodeName)for(var r=0;r<t[i].data.length;r++){if("DIV"==t[i].parentNode.nodeName)var o="";else o=t[i].parentNode.getAttribute("style")||"";-1===a.indexOf(o)&&a.push(o)}else-1==["BR","DIV","LI","P"].indexOf(t[i].nodeName)&&-1==t[i].nodeName.indexOf("H")&&("DIV"==t[i].parentNode.nodeName?"function"==typeof t[i].getAttribute&&t[i].setAttribute("style",t[i].getAttribute("style")):null==t[i].parentNode.getAttribute("style")?t[i].setAttribute("style",t[i].getAttribute("style")):t[i].setAttribute("style",t[i].parentNode.getAttribute("style")+t[i].getAttribute("style")));e(t[i].childNodes)}}(r[0].childNodes),r.remove();for(var o=[{type:"bold",style:"font-weight:bold;"},{type:"italic",style:"font-style:italic;"},{type:"underline",style:"text-decoration:underline;"},{type:"middleline",style:"text-decoration:line-through;"}],s={},l=0,p=a.length;l<p;l++){var h=a[l].replace(/\s/g,"");if(0==l&&-1!==h.indexOf("fill:")){var d=h.match(/fill:rgb\(.*?\);/);if(d&&d.length){var c=d[0].replace("fill:rgb(","").replace(");","");s.color=c}}-1!=h.indexOf("font-weight:normal;")&&(s.bold=!1),-1!=h.indexOf("font-style:normal;")&&(s.italic=!1);for(var u=0;u<o.length;u++){var g=o[u].style;-1==h.indexOf(g)&&(o.splice(u,1),u--)}}for(u=0;u<o.length;u++){s[o[u].type]=!0}var y=e.fontStyle;return i.length&&(y=i[0].textBlock.fontStyle),$.extend({},this.getShapeFontStyle(y),s)},getShapeFontHeight:function(e){var t=e.getTextBlock(),i=Utils.getShapeFontStyle(e.fontStyle),n=$("#shape_text_ruler");return 0==n.length&&(n=$("<div contenteditable='true' spellcheck=false id='shape_text_ruler'></div>").appendTo("#designer_canvas")),t.map(function(e){return function(e){var t=$.extend({},i,e.fontStyle),r=e.position;if("horizontal"==t.orientation){var a={x:r.x+r.w/2,y:r.y+r.h/2};r={x:a.x-r.h/2,y:a.y-r.w/2,w:r.h,h:r.w}}var o={width:r.w+"px","z-index":Model.orderList.length+9999,"line-height":100*t.lineHeight+"%","font-size":t.size+"px","font-family":t.fontFamily,"font-weight":t.bold?"bold":"normal","font-style":t.italic?"italic":"normal","text-align":t.textAlign,color:"rgb("+t.color+")","text-decoration":t.underline?"underline":"none","word-wrap":"break-word"};n.css(o);var s=e.text.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;");return n.html(s).height()}(e)})},getLinkerFontStyle:function(e,t){return 0!=t&&Model.define.theme&&Model.define.theme.linker?$.extend({},Schema.linkerDefaults.fontStyle,Model.define.theme.linker.fontStyle,e):$.extend({},Schema.linkerDefaults.fontStyle,e)},getShapeFillStyle:function(e,t){Model.define;return 0!=t&&Model.define.theme&&Model.define.theme.shape?$.extend({},Schema.shapeDefaults.fillStyle,Model.define.theme.shape.fillStyle,e):$.extend({},Schema.shapeDefaults.fillStyle,e)},getLanesByPool:function(e){for(var t=(e=Utils.copy(e)).children,i=t.length,n=[],r=0;r<i;r++){var a=Utils.copy(Model.getShapeById(t[r]));a.name&&a.name.indexOf("Lane")>-1&&n.push(a)}return n=n.sort(function(e,t){return e.props.x-t.props.x||e.props.y-t.props.y})},getSeparatorsByPool:function(e){for(var t=(e=Utils.copy(e)).children,i=t.length,n=[],r=0;r<i;r++){var a=Utils.copy(Model.getShapeById(t[r]));a.name&&a.name.indexOf("Separator")>-1&&a.name.indexOf("SeparatorBar")<0&&n.push(a)}return n},getSeparatorBarsByPool:function(e){for(var t=(e=Utils.copy(e)).children,i=t.length,n=[],r=0;r<i;r++){var a=Utils.copy(Model.getShapeById(t[r]));a.name&&a.name.indexOf("SeparatorBar")>-1&&n.push(a)}return n},getLinkersByShapes:function(e){for(var t=[],i=Model.define.elements,n=[],r=0;r<e.length;r++)n.push(e[r].id);for(key in i)if("linker"==i[key].name){var a=i[key];(n.indexOf(a.to.id)>-1||n.indexOf(a.from.id)>-1)&&t.push(a)}return t},containsChinese:function(e){return escape(e).indexOf("%u")>=0},filterXss:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toString()).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/%3C/g,"&lt;")).replace(/>/g,"&gt;")).replace(/%3E/g,"&gt;")).replace(/'/g,"&#39;")).replace(/"/g,"&quot;")).replace(/&lt;div&gt;/g,"<div>").replace(/&lt;\/div&gt;/g,"</div>")).replace(/&lt;u&gt;/g,"<u>").replace(/&lt;\/u&gt;/g,"</u>")).replace(/&lt;br&gt;/g,"<br>")).replace(/&lt;b&gt;/g,"<b>").replace(/&lt;\/b&gt;/g,"</b>")).replace(/&lt;i&gt;/g,"<i>").replace(/&lt;\/i&gt;/g,"</i>")).replace(/&lt;font&gt;/g,"<font").replace(/&lt;\/font&gt;/g,"</font>")},showError:function(){var e=$("#canvas-error");e.length&&(e=$("<div id='canvas-error'><span>保存出现了异常，为了防止内容丢失，请及时刷新页面或者反馈问题</span></div>").appendTo("body")).show()},RGB2Hex:function(e){if("#"==e.charAt(0))return e;var t=e.split(/\D+/),i=65536*Number(t[1])+256*Number(t[2])+Number(t[3]);return""+Utils.toHex(i,6)},toHex:function(e,t){for(var i=e.toString(16);i.length<t;)i="0"+i;return i},popEditor:{params:{span:null,range:null,selection:null},close:function(){$(".pop-editor").hide()},init:function(e){e=$(e);var t=this.getSelection();null!=t&&(this.params.range=t.range,this.params.selection=t.selection,this.renderMenu(),this.renderMenuPos(e),this.initEvent(e))},getSelection:function(){var e=document.getSelection();return e.isCollapsed?null:{selection:e,range:e.getRangeAt(0)}},initEvent:function(e){var t=this,i=$(".pop-editor");i.children("div").off("mousedown").on("mousedown",function(n){var r=$(this),a=r.data("key");if("down"==a)i.find(".pop-editor-items").hide(),r.find(".pop-editor-items").show();else{if("color"==a)return n.stopPropagation(),n.preventDefault(),void $.colorpicker({target:r,stopPropagation:!0,setColor:"red",onSelect:function(e){(e=null==e||"transparent"==e?"transparent":"rgb("+e+")").indexOf("rgb")>=0&&(e=Utils.RGB2Hex(e)),t.setStyle("ForeColor",e)}});if("equation"==a){if(!Designer.events.push("testVip","Latex"))return Designer.events.push("vipLimit","Latex"),n.stopPropagation(),void n.preventDefault();insert.equation.equationInit(e)}else t.setStyle(a)}n.preventDefault(),n.stopPropagation()}),i.children("div").off("mouseup").on("mouseup",function(e){e.stopPropagation(),e.preventDefault()}),i.find(".pop-editor-items > div").off("mousedown").on("mousedown",function(e){var i=$(this),n=i.parent().data("key"),r=i.text();t.setStyle(n,r);return e.stopPropagation(),!1})},renderMenu:function(){var e=$(".pop-editor");if(0==e.length){var t=window.source&&"wps"==source?staticBasePath+"/wps/images/svip_icon_no_border.svg":staticBasePath+"/images/vip-tip.svg";e=$("<div class='pop-editor'><div data-key='bold'><div class='po-diagraming-icons bold'>&#xe6bf;</div></div><div data-key='italic'><div class='po-diagraming-icons italic'>&#xe6da;</div></div><div data-key='underline'><div class='po-diagraming-icons underline'>&#xe6d6;</div></div><div data-key='strikeThrough'><span class='po-diagraming-icons middleline'>&#xe732;</span></div><div data-key='color'><svg class='po-icon-svg' aria-hidden='true' style='font-size:16px'><use xlink:href='#icon-zitiyanse-fuwenbenbianjiqi'></use></svg></div><div data-key='equation'><div class='po-diagraming-icons equation'><img class='eq-tip-vip' src='"+t+"'>&#xe651;</div></div>").appendTo("#designer_canvas")}return e},renderMenuPos:function(e){var t=e,i=$(".pop-editor"),n=parseFloat(t.css("left")),r=parseFloat(t.css("top"));i.css({left:n+(t.outerWidth()/2-i.outerWidth()/2),top:r+t.outerHeight(),transform:"scale("+1..restoreScale()+")",transformOrigin:"center top"}).show()},setStyle:function(e,t){if(document.getSelection().isCollapsed){var i=document.createRange(),n=$("#shape_text_edit")[0];i.selectNodeContents(n);var r=window.getSelection();r.removeAllRanges(),r.addRange(i)}this.params;switch(e){case"h":document.execCommand("formatBlock",!1,"<"+t+">");break;case"f":document.execCommand("FontName",!1,t);break;default:document.execCommand(e,!1,t)}return""}},toast:function(e,t,i){var n=$(".toast-con");0==n.length&&(n=$('<div class="toast-con moving"><span>'+e+"</span></div>").appendTo("#ui_container"));var r=(t=$(t)).offset();n.css({left:r.left-(n.outerWidth()-t.outerWidth())/2,top:r.top-n.outerHeight()-15}).show(),setTimeout(function(){$(".toast-con").fadeOut().remove()},i)},gridSelectObj:{id:null,indexs:[],rows:[],columns:[]},selectGrid:function(e,t,i){var n=this.gridSelectObj,r=n.indexs,a=[],o=[],s=n.id,l=e.textBlock.length;if(s==e.id&&i||(n.id=e.id,r=[]),e.merge){for(var p=[],h=0;h<t.length;h++)for(var d=0;d<e.merge.length;d++)if(e.merge[d].indexOf(t[h])>-1){p=p.concat(e.merge[d]);break}t=t.concat(p);var c=[];for(h=0;h<t.length;h++)-1===c.indexOf(t[h])&&c.push(t[h]);t=c}for(h=0;h<t.length;h++){var u=t[h];if(-1==r.indexOf(u)){if(u>=l)continue;var g=Math.floor(u/e.path[0].length),y=u%e.path[0].length;r.push(u)}else{var f=r.indexOf(u);r.splice(f,1)}}this.gridSelectObj.indexs=r.sort(function(e,t){return e-t});for(h=0;h<this.gridSelectObj.indexs.length;h++){var x=this.gridSelectObj.indexs[h];g=Math.floor(x/e.path[0].length);a.push(g);y=x%e.path[0].length;o.push(y)}this.gridSelectObj.rows=a,this.gridSelectObj.columns=o,Designer.events.push("renderGridSelect",e),this.selectCallback&&this.selectCallback()},isMergeGrid:function(){if(!this.gridSelectObj.id)return!1;var e=this.gridSelectObj.columns,t=this.gridSelectObj.rows,i=Math.min.apply(Math,_toConsumableArray(e)),n=Math.max.apply(Math,_toConsumableArray(e)),r=Math.min.apply(Math,_toConsumableArray(t)),a=(n-i+1)*(Math.max.apply(Math,_toConsumableArray(t))-r+1),o=Model.getShapeById(this.gridSelectObj.id).merge,s=!0;if(o)for(var l=this.gridSelectObj.indexs.join(","),p=0;p<o.length;p++){if(l==o[p].join(",")){s=!1;break}}return a==this.gridSelectObj.indexs.length&&a>1&&s},isSplitGrid:function(){var e=!1;if(!this.gridSelectObj.id)return e;var t=Model.getShapeById(this.gridSelectObj.id).merge;if(t)for(var i=this.gridSelectObj.indexs,n=0;n<t.length;n++){var r=t[n][0];if(i.indexOf(r)>-1){e=!0;break}}return e},unselectGrid:function(){this.gridSelectObj={id:null,indexs:[],rows:[],columns:[]},$("#grid_selects").remove(),$("#grid_dom").remove(),$("#lane_dom").remove()},getGridSelectedCells:function(){var e=this.gridSelectObj,t=[];if(e.id)for(var i=Model.getShapeById(e.id),n=0;n<e.indexs.length;n++){var r=e.rows[n],a=e.columns[n],o=e.indexs[n],s=i.path[r][a],l=i.textBlock[o];t.push({id:e.id,path:s,textBlock:l})}return t},formattedShape:function(e){if(["verticalPool","verticalLane","verticalSeparatorBar","horizontalSeparator","horizontalSeparatorBar","verticalSeparator","horizontalPool","horizontalLane"].indexOf(e.name)>-1&&!e.props.height)switch(e.name){case"verticalPool":e.props.height=[40],e.textBlock[0].position.h="height[0]",e.path[1].actions[2].y="height[0]",e.path[1].actions[3].y="height[0]";break;case"verticalLane":e.props.height=[30],e.textBlock[0].position.h="height[0]",e.path[1].actions[2].y="height[0]",e.path[1].actions[3].y="height[0]";break;case"horizontalSeparator":e.props.height=[20],e.textBlock[0].position.w="height[0]",e.path[1].actions[1].x="height[0]",e.path[1].actions[2].x="height[0]";break;case"verticalSeparator":e.props.height=[20],e.textBlock[0].position.h="height[0]",e.path[1].actions[2].y="height[0]",e.path[1].actions[3].y="height[0]";break;case"horizontalPool":e.props.height=[40],e.textBlock[0].position.w="height[0]",e.path[1].actions[1].x="height[0]",e.path[1].actions[2].x="height[0]";break;case"horizontalLane":e.props.height=[30],e.textBlock[0].position.w="height[0]",e.path[1].actions[1].x="height[0]",e.path[1].actions[2].x="height[0]";break;case"horizontalSeparatorBar":case"verticalSeparatorBar":e.props.height=[20]}},getShapeRuleLine:function(e,t,i){for(var n=e.x,r=e.y+e.h/2,a=e.x+e.w,o=e.y,s=e.x+e.w/2,l=e.y+e.h,p=null,h=null,d=null,c=null,u={d:null,pos:null},g={d:null,pos:null},y={d:null,pos:null},f={d:null,pos:null},x=null,v=0,m=null,b=null,w=0,S=t.length;w<S;w++){var k=(W=t[w]).left,M=W.right,_=W.top,D=W.bottom,U=W.middle;if(W.right<n){if(x="left",v=n-W.right,Math.abs(r-U)<4){if(null==m||v<m){m=v;var $=U-r;h={target:W.id,s:$,targetPos:{x:M,y:r+$},ac:"left"}}}else if(Math.abs(_-o)<4||Math.abs(D-o)<4){if(null==m||v<m){m=v;$=Math.abs(o-_)<4?_-o:D-o;h={target:W.id,s:$,targetPos:{x:M,y:o+$},ac:"left"}}}else if((Math.abs(_-l)<4||Math.abs(D-l)<4)&&(null==m||v<m)){m=v;$=Math.abs(l-_)<4?_-l:D-l;h={target:W.id,s:$,targetPos:{x:M,y:l+$},ac:"left"}}(null==u.d||u.d>v)&&(u.d=v,u.pos=W)}else if(W.left>a){if(x="right",v=W.left-a,Math.abs(r-U)<4){if(null==m||v<m){m=v;$=U-r;h={target:W.id,s:$,targetPos:{x:k,y:r+$},ac:"right"}}}else if(Math.abs(_-o)<4||Math.abs(D-o)<4){if(null==m||v<m){m=v;$=Math.abs(o-_)<4?_-o:D-o;h={target:W.id,s:$,targetPos:{x:k,y:o+$},ac:"right"}}}else if((Math.abs(_-l)<4||Math.abs(D-l)<4)&&(null==m||v<m)){m=v;$=Math.abs(l-_)<4?_-l:D-l;h={target:W.id,s:$,targetPos:{x:k,y:l+$},ac:"right"}}(null==g.d||g.d>v)&&(g.d=v,g.pos=W)}var P=0;for(S=t.length;P<S;P++){var L=(N=t[P]).left,I=N.right,C=N.top,B=N.bottom;if("left"==x){if(I<k&&Math.abs(k-I-v)<4&&!(B<_||C>D)&&(null==b||k-I<b)){b=k-I;U=(Math.max(o,_)+Math.min(D,l))/2;var T=(Math.max(C,_)+Math.min(B,D))/2;p={target:W.id,d:b,s:b-v,targetPos:W,ruleLine:{start:{x:I,y:T},end:{x:k,y:T}},ac:"left"}}}else if("right"==x&&L>M&&Math.abs(L-M-v)<4&&!(B<_||C>D)&&(null==b||L-M<b)){b=L-M;U=(Math.max(o,_)+Math.min(D,l))/2,T=(Math.max(C,_)+Math.min(D,B))/2,p={target:W.id,d:b,s:v-b,targetPos:W,ruleLine:{start:{x:M,y:T},end:{x:L,y:T}},ac:"right"};break}}}var z=null,O=0,A=null,R=null;for(w=0,S=i.length;w<S;w++){k=(W=i[w]).left,M=W.right,_=W.top,D=W.bottom,U=W.middle;var W,E=W.center;if(D<o){if(z="top",O=o-D,Math.abs(s-E)<4){if(null==A||O<A){A=O;$=E-s;c={target:W.id,s:$,targetPos:{x:s+$,y:D},ac:"top"}}}else if(Math.abs(n-k)<4||Math.abs(n-M)<4){if(null==A||O<A){A=O;$=Math.abs(n-k)<4?k-n:M-n;c={target:W.id,s:$,targetPos:{x:n+$,y:D},ac:"top"}}}else if((Math.abs(a-k)<4||Math.abs(a-M)<4)&&(null==A||O<A)){A=O;$=Math.abs(k-a)<4?k-a:M-a;c={target:W.id,s:$,targetPos:{x:a+$,y:D},ac:"top"}}(y.d>O||null==y.d)&&(y.d=O,y.pos=W)}else if(_>l){if(z="bottom",O=_-l,Math.abs(s-E)<4){if(null==A||O<A){A=O;$=E-s;c={target:W.id,s:$,targetPos:{x:s+$,y:_},ac:"bottom"}}}else if(Math.abs(n-k)<4||Math.abs(n-M)<4){if(null==A||O<A){A=O;$=Math.abs(n-k)<4?k-n:M-n;c={target:W.id,s:$,targetPos:{x:n+$,y:_},ac:"bottom"}}}else if((Math.abs(a-k)<4||Math.abs(a-M)<4)&&(null==A||O<A)){A=O;$=Math.abs(k-a)<4?k-a:M-a;c={target:W.id,s:$,targetPos:{x:a+$,y:_},ac:"bottom"}}(null==f.d||f.d>O)&&(f.d=O,f.pos=W)}for(P=0,S=i.length;P<S;P++){var N;L=(N=i[P]).left,I=N.right,C=N.top,B=N.bottom;if("top"==z){if(B<_&&Math.abs(_-B-O)<4&&!(I<k||L>M)&&(null==R||_-B<R)){R=_-B;T=(Math.max(L,k)+Math.min(M,I))/2,d={target:W.id,d:R,s:R-O,targetPos:W,ruleLine:{start:{x:T,y:B},end:{x:T,y:_}},ac:"top"};break}}else if("bottom"==z&&C>D&&Math.abs(C-D-O)<4&&!(I<k||L>M)&&(null==R||C-D<R)){R=C-D;T=(Math.max(L,k)+Math.min(M,I))/2,d={target:W.id,d:R,s:O-R,targetPos:W,ruleLine:{start:{x:T,y:D},end:{x:T,y:C}},ac:"bottom"};break}}}var F=null;Math.abs(g.d-u.d)<8&&null!=g.d&&null!=u.d&&(F={s:(g.d-u.d)/2,d:(g.d+u.d)/2,leftPos:u.pos,rightPos:g.pos});var K=null;Math.abs(y.d-f.d)<8&&null!=f.d&&null!=y.d&&(K={s:(f.d-y.d)/2,d:(f.d+y.d)/2,topPos:y.pos,bottomPos:f.pos});var j=h?h.s:K?K.s:d?d.s:0;e.y=e.y+j;var G=c?c.s:F?F.s:p?p.s:0;if(e.x=e.x+G,h){var X=null,H=null;"left"==h.ac?(X=h.targetPos,H={x:e.x,y:X.y}):(H=h.targetPos,X={x:e.x+e.w,y:H.y}),Designer.op.drawSnpLine(X,H,"line")}else if(K){var Y=K.topPos,q=K.bottomPos,V=(H={x:(X={x:(Math.max(e.x,Y.left)+Math.min(Y.right,e.x+e.w))/2,y:Y.bottom}).x,y:e.y},{x:(te={x:(Math.max(e.x,q.left)+Math.min(q.right,e.x+e.w))/2,y:e.y+e.h}).x,y:q.top});Designer.op.drawSnpLine(X,H),Designer.op.drawSnpLine(te,V)}else if(d){var Z=d.targetPos,J=d.ruleLine;X=null,H=null;"top"==(ie=d.ac)?H={x:(X={x:(Math.max(Z.left,e.x)+Math.min(Z.right,e.x+e.w))/2,y:Z.bottom}).x,y:e.y}:"bottom"==ie&&(X={x:(H={x:(Math.max(Z.left,e.x)+Math.min(Z.right,e.x+e.w))/2,y:Z.top}).x,y:e.y+e.h}),Designer.op.drawSnpLine(X,H),Designer.op.drawSnpLine(J.start,J.end)}if(c){X=null,H=null;"top"==c.ac?H={x:(X=c.targetPos).x,y:e.y}:X={x:(H=c.targetPos).x,y:e.y+e.h},Designer.op.drawSnpLine(X,H,"line")}else if(F){var Q=F.leftPos,ee=F.rightPos,te=(X={x:Q.right,y:(Math.max(e.y,Q.top)+Math.min(Q.bottom,e.y+e.h))/2},H={x:e.x,y:X.y},{x:e.x+e.w,y:(Math.max(e.y,ee.top)+Math.min(ee.bottom,e.y+e.h))/2});V={x:ee.left,y:te.y},Designer.op.drawSnpLine(X,H),Designer.op.drawSnpLine(te,V)}else if(p){var ie;Z=p.targetPos,J=p.ruleLine,X=null,H=null;"left"==(ie=p.ac)?(X={x:Z.right,y:(Math.max(Z.top,e.y)+Math.min(Z.bottom,e.y+e.h))/2},H={x:e.x,y:X.y}):"right"==ie&&(H={x:Z.left,y:(Math.max(Z.top,e.y)+Math.min(Z.bottom,e.y+e.h))/2},X={x:e.x+e.w,y:H.y}),Designer.op.drawSnpLine(X,H),Designer.op.drawSnpLine(J.start,J.end)}},shapesCount:function(){},getPrintPageSize:function(){var e=flow2svg.calcCanvasSize(),t=e.minX+e.w-10,i=e.minY+e.h-10;return"landscape"==Model.define.page.orientation&&(t=[i,i=t][0]),{width:t=Math.max(1050,1050*Math.ceil(t/1050)),height:i=Math.max(1485,1485*Math.ceil(i/1485))}},isMultiplicity:function(e){var t=!1;if("linker"!=e.name)return t;for(var i=0;i<e.textBlock.length;i++){if("multiplicity"==e.textBlock[i].type){t=!0;break}}return t},autoTextHeight:function(e,t){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal 13px 微软雅黑",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=t.split(/\n|<br>/),l=0;if(o)e.props.w=r||e.props.w;else{var p=e.props.w;s.forEach(function(e){var t=document.createElement("canvas").getContext("2d");t.font=a,p=Math.max(p,t.measureText(e).width)}),e.props.w=p>r?r:p}for(var h=0;h<s.length;h++){l+=c(e,s[h],a).height}var d=null!==(i=null===(n=Schema.shapes)||void 0===n?void 0:n.text)&&void 0!==i?i:e;function c(e,t,i){var n;t=0==(n=t).length?"":n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&#39;/g,"'")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')).replace(/<br>/g,"\n")).replace(/&nbsp;/g," ")).replace(/\t/g,"  ");var r=1.25*/(\d+)px/.exec(i)[1],a=Utils.copy(e),o=document.createElement("div");return o.innerText=""==t.trim()?"-":t,o.style="\n        width: ".concat(a.props.w,"px;\n        height: auto;\n        visibility: hidden; \n        position: absolute;\n        font-size: 13px;\n        font-weight: normal;\n        font-family: April;\n        font-style: normal;\n        text-align: center;\n        overflow-wrap: break-word;\n        line-height: 125%;\n        white-space: pre-wrap;\n      "),document.body.appendChild(o),a.props.h=parseFloat(getComputedStyle(o,null).height||r),document.body.removeChild(o),{width:a.props.w,height:a.props.h}}return e.props.h=Math.max(d.props.h,l),{width:e.props.w,height:e.props.h}}};window.GradientHelper={createLinearGradient:function(e,t,i){var n,r,a,o=e.props;if(o.w>o.h?(n={x:0,y:o.h/2},r={x:o.w,y:o.h/2},a=(i.angle+Math.PI/2)%(2*Math.PI)):(n={x:o.w/2,y:0},r={x:o.w/2,y:o.h},a=i.angle),0!=a){var s={x:o.w/2,y:o.h/2};n=Utils.getRotated(s,n,a),r=Utils.getRotated(s,r,a),n.x<0&&(n.x=0),n.x>e.props.w&&(n.x=e.props.w),n.y<0&&(n.y=0),n.y>e.props.h&&(n.y=e.props.h),r.x<0&&(r.x=0),r.x>e.props.w&&(r.x=e.props.w),r.y<0&&(r.y=0),r.y>e.props.h&&(r.y=e.props.h)}var l=t.createLinearGradient(n.x,n.y,r.x,r.y),p="transparent"==i.beginColor?i.beginColor:"rgb("+i.beginColor+")",h="transparent"==i.endColor?i.endColor:"rgb("+i.endColor+")";return l.addColorStop(0,p),l.addColorStop(1,h),l},createRadialGradient:function(e,t,i){var n=e.props,r=n.h;n.w<n.h&&(r=n.w);var a=t.createRadialGradient(n.w/2,n.h/2,10,n.w/2,n.h/2,r*i.radius),o="transparent"==i.beginColor?i.beginColor:"rgb("+i.beginColor+")",s="transparent"==i.endColor?i.endColor:"rgb("+i.endColor+")";return a.addColorStop(0,o),a.addColorStop(1,s),a},getLighterColor:function(e){var t=e.split(","),i=parseInt(t[0]),n=parseInt(t[1]),r=parseInt(t[2]),a=Math.round(i+(255-i)/255*60);a>255&&(a=255);var o=Math.round(n+(255-n)/255*60);o>255&&(o=255);var s=Math.round(r+(255-r)/255*60);return s>255&&(s=255),a+","+o+","+s},getDarkerColor:function(e){var t=e.split(","),i=parseInt(t[0]),n=parseInt(t[1]),r=parseInt(t[2]),a=Math.round(i-i/255*60);a<0&&(a=0);var o=Math.round(n-n/255*60);o<0&&(o=0);var s=Math.round(r-r/255*60);return s<0&&(s=0),a+","+o+","+s}};var MessageSource={batchSize:0,messages:[],withUndo:!0,withMessage:!0,withDock:!0,undoStack:{stack:[],push:function(e,t){this.stack.push(e),void 0===t&&(t=!0),t&&(MessageSource.redoStack.stack=[]),Designer.events.push("undoStackChanged",this.stack.length)},pop:function(){var e=this.stack.length;if(0==e)return null;var t=this.stack[e-1];return this.stack.splice(e-1,1),MessageSource.redoStack.push(t),Designer.events.push("undoStackChanged",this.stack.length),t}},redoStack:{stack:[],push:function(e){this.stack.push(e),Designer.events.push("redoStackChanged",this.stack.length)},pop:function(){var e=this.stack.length;if(0==e)return null;var t=this.stack[e-1];return this.stack.splice(e-1,1),MessageSource.undoStack.push(t,!1),Designer.events.push("redoStackChanged",this.stack.length),t}},beginBatch:function(){this.batchSize++},commit:function(){this.batchSize--,this.submit()},submit:function(){if(0==this.batchSize&&0!=this.messages.length){if(this.withDock&&Dock.update(!0),Designer.events.push("shapeCount"),0==this.withMessage)return void(this.messages=[]);if(this.withUndo&&this.undoStack.push(this.messages),""!=chartId){for(var e=Utils.copyArray(this.messages),t=0;t<e.length;t++){var i=e[t];"update"==i.action&&(i.content.shapes=[])}var n={action:"command",messages:e,name:userName,pageId:Model.pageId};sendMessage.send(n)}this.messages=[]}},send:function(e,t,i){this.messages.push({action:e,content:t,tempId:i,pageId:Model.pageId}),this.submit()},receive:function(e){this.doWithoutMessage(function(){MessageSource.executeMessages(e,!0),Utils.showLinkerControls(),Utils.showLinkerCursor()})},undo:function(){var e=this.undoStack.pop();null!=e&&this.doWithoutUndo(function(){MessageSource.beginBatch();for(var t=0;t<e.length;t++){var i=e[t];if("create"==i.action)Utils.unselect(),Model.remove(i.content,!1),$(".shape_dashboard.menu").hide(),Designer.events.push("changeLinkers");else if("update"==i.action){var n=i.content.shapes;Model.updateMulti(n);for(var r=0;r<n.length;r++){var a=n[r];Designer.painter.renderShape(a)}var o=Utils.getSelectedIds();Utils.unselect(),Utils.selectShape(o,!1),Designer.events.push("changeLinkers")}else if("remove"==i.action){n=i.content;Model.addMulti(n);for(r=0;r<n.length;r++){a=n[r];Designer.painter.renderShape(a)}Designer.events.push("changeLinkers")}else if("updatePage"==i.action){var s=Model.define.page.lineJumps;Model.updatePage(i.content.page),Designer.events.push("resetBrokenLinker",s)}else"setTheme"==i.action?(Model.setTheme(i.content.theme),Designer.events.push("changeLinkers")):"setDefaultStyle"==i.action?Model.setDefaultStyle(i.content.type,i.content.style):"update_with_beautify"==i.action&&Model.updateWithBeautify(i.content.content,i.content.updates,i.content.oldTheme)}MessageSource.commit()})},redo:function(){var e=this.redoStack.pop();null!=e&&this.doWithoutUndo(function(){MessageSource.executeMessages(e,!1)})},executeMessages:function(e,t){MessageSource.beginBatch();for(var i=0;i<e.length;i++){var n=e[i];if("create"==n.action){var r=n.content;if(t)for(var a=0;a<r.length;a++){"linker"!=(o=r[a]).name&&Schema.initShapeFunctions(o)}Model.addMulti(r);for(a=0;a<r.length;a++){var o=r[a];Designer.painter.renderShape(o)}Model.build(),Designer.events.push("changeLinkers")}else if("update"==n.action){var s=n.content.updates;for(a=0;a<s.length;a++){var l=s[a];t&&"linker"!=l.name&&Schema.initShapeFunctions(l),Designer.painter.renderShape(l)}Model.updateMulti(s),Designer.events.push("changeLinkers");var p=Utils.getSelectedIds();Utils.unselect(),Utils.selectShape(p)}else if("remove"==n.action)Utils.unselect(),Model.remove(n.content),Designer.events.push("changeLinkers");else if("updatePage"==n.action){var h=Model.define.page.lineJumps;Model.updatePage(n.content.update),Designer.events.push("resetBrokenLinker",h)}else"setTheme"==n.action?(Model.setTheme(n.content.update),Designer.events.push("changeLinkers")):"setDefaultStyle"==n.action?Model.setDefaultStyle(n.content.type,n.content.update):"clearDefaultStyle"==n.action?Model.clearDefaultStyle():"update_with_beautify"==n.action&&Model.updateWithBeautify(n.content.updates,n.content.content,n.content.theme)}MessageSource.commit()},doWithoutUndo:function(e){this.withUndo=!1,e(),this.withUndo=!0},doWithoutMessage:function(e){this.withMessage=!1,e(),this.withMessage=!0},doWithoutUpdateDock:function(e){this.withDock=!1,e(),this.withDock=!0}};Number.prototype.toScale=function(){return this*Designer.config.scale},Number.prototype.restoreScale=function(){return this/Designer.config.scale},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},window.Model=Model,window.PageModel=PageModel,window.Utils=Utils,window.MessageSource=MessageSource;
},{"./clipboard":"IXVj","../../common/clipboard/util":"G1Mn","../../common/utils":"RKzI"}],"P4BJ":[function(require,module,exports) {
var define;
var define,clipboard=_interopRequireWildcard(require("./clipboard")),defClipboard=_interopRequireWildcard(require("../../common/clipboard/util")),_utils=require("../../common/utils");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache=function(e){return e?i:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=_getRequireWildcardCache(t);if(i&&i.has(e))return i.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,i&&i.set(e,n),n}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return t};var e,t={},i=Object.prototype,n=i.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function p(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var o=t&&t.prototype instanceof x?t:x,a=Object.create(o.prototype),s=new L(n||[]);return r(a,"_invoke",{value:D(e,i,s)}),a}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var c="suspendedStart",u="suspendedYield",g="executing",y="completed",f={};function x(){}function v(){}function m(){}var b={};p(b,a,function(){return this});var w=Object.getPrototypeOf,S=w&&w(w(I([])));S&&S!==i&&n.call(S,a)&&(b=S);var k=m.prototype=x.prototype=Object.create(b);function M(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){function i(r,o,a,s){var l=d(e[r],e,o);if("throw"!==l.type){var p=l.arg,h=p.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){i("next",e,a,s)},function(e){i("throw",e,a,s)}):t.resolve(h).then(function(e){p.value=e,a(p)},function(e){return i("throw",e,a,s)})}s(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t(function(t,r){i(e,n,t,r)})}return o=o?o.then(r,r):r()}})}function D(t,i,n){var r=c;return function(o,a){if(r===g)throw new Error("Generator is already running");if(r===y){if("throw"===o)throw a;return{value:e,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=P(s,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var p=d(t,i,n);if("normal"===p.type){if(r=n.done?y:u,p.arg===f)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(r=y,n.method="throw",n.arg=p.arg)}}}function P(t,i){var n=i.method,r=t.iterator[n];if(r===e)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=e,P(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=d(r,t.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,f;var a=o.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function I(t){if(t||""===t){var i=t[a];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}throw new TypeError(_typeof(t)+" is not iterable")}return v.prototype=m,r(k,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=p(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,p(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},M(_.prototype),p(_.prototype,s,function(){return this}),t.AsyncIterator=_,t.async=function(e,i,n,r,o){void 0===o&&(o=Promise);var a=new _(h(e,i,n,r),o);return t.isGeneratorFunction(i)?a:a.next().then(function(e){return e.done?e.value:a.next()})},M(k),p(k,l,"Generator"),p(k,a,function(){return this}),p(k,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return s.type="throw",s.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),p=n.call(a,"finallyLoc");if(l&&p){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),$(i),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;$(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:I(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}function asyncGeneratorStep(e,t,i,n,r,o,a){try{var s=e[o](a),l=s.value}catch(p){return void i(p)}s.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var t=this,i=arguments;return new Promise(function(n,r){var o=e.apply(t,i);function a(e){asyncGeneratorStep(o,n,r,a,s,"next",e)}function s(e){asyncGeneratorStep(o,n,r,a,s,"throw",e)}a(void 0)})}}var localRuntime=!1,role="",tutorial=localStorage.getItem("po_flow_tutorial"),showToolbar=!1,userName="";window.mouseInChart=!1;var Schema=window.Schema;Schema.init(!0),Schema.initMarkers();var pasteFn=null;window.Designer={defaults:{linkerBeginArrowStyle:null,linkerEndArrowStyle:null,lineWidth:1.5},config:{panelItemWidth:50,panelItemHeight:50,pageMargin:1e3,anchorSize:8,rotaterSize:9,anchorColor:"#067bef",selectorColor:"#067bef",scale:1,pageScale:1},status:"",initialize:{initialized:!1,initLayout:function(){$(window).bind("resize.designer",function(){var e=$(".header").is(":visible")?$(".header").outerHeight():0,t=$("#po-toolbar").is(":visible")?$("#po-toolbar").outerHeight():0,i=$("#po-designer-foot").is(":visible")?$("#po-designer-foot").outerHeight():0,n=$(window).height()-e-t-i;$("#designer_layout").height(n),$("#demo_signup").length&&$("#designer_layout").height(n-$("#demo_signup").outerHeight())}),$(window).trigger("resize.designer")},initModel:function(){Model.define={page:Utils.copy(Schema.pageDefaults),elements:{}},Model.persistence={page:Utils.copy(Schema.pageDefaults),elements:{}}},initCanvas:function(){var e=Model.define.page.width,t=Model.define.page.height;if(e>2e4&&(e=2e4),t>2e4&&(t=2e4),"landscape"==Model.define.page.orientation){var i=e;e=t,t=i}var n=Model.define.page.backgroundColor;"transparent"==n&&(n="255,255,255");var r=Utils.getDarkerColor(n),o=Utils.getDarkestColor(n);$("#canvas_container").css({width:e.toScale(),height:t.toScale(),padding:Designer.config.pageMargin}),$("#designer_canvas").css({width:e,height:t,"background-color":"rgb("+r+")"});var a=$("#designer_grids");if(0==a.length){$("#designer_canvas").prepend('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xlink="http://www.w3.org/1999/xlink" id="designer_grids">\n\t\t\t\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t\t\t  <pattern id="flow_canvas_grid_item" width="100" height="100" patternUnits="userSpaceOnUse">\n\t\t\t\t\t\t\t\t\t\t<path id="flow_canvas_grid_path1" stroke-width="1" fill="none"/>\n\t\t\t\t\t\t\t\t\t\t<path id="flow_canvas_grid_path2" stroke-width="1" fill="none"/>\n\t\t\t\t\t\t\t\t\t  </pattern>\n\t\t\t\t\t\t\t\t\t  <pattern xmlns="http://www.w3.org/2000/svg" patternUnits="userSpaceOnUse" id="flow_canvas_watermark_item" width="300" height="300">\n\t\t\t\t\t\t\t\t\t\t<text x="150" y="100" font-size="18" transform="rotate(-45, 150, 150)" style="dominant-baseline: middle; text-anchor: middle;"></text>\n\t\t\t\t\t\t\t\t\t  </pattern>\n\t\t\t\t\t\t\t\t\t</defs>\n\t\t\t\t\t\t\t\t\t<rect id="flow_canvas_grids_box" width="1050" height="740" fill="url(#flow_canvas_grid_item)"/>\n\t\t\t\t\t\t\t\t\t<rect id="flow_canvas_watermark_box" width="1050" height="740" fill="url(#flow_canvas_watermark_item)"/>\n\t\t\t\t\t\t\t\t  \t<path id="flow_canvas_print_line" stroke-width="2" stroke-dasharray="5,5" fill="none"/>\n\t\t\t\t\t\t\t\t  </svg>')}a.css({width:e,height:t,display:"block","background-color":"rgb("+n+")"}),$("#flow_canvas_grids_box").attr({width:e,height:t}),$("#flow_canvas_watermark_box").attr({width:e,height:t});var s=Math.round(Model.define.page.gridSize);s<10&&(s=10);var l=$("#flow_canvas_grid_item");l.attr({height:4*s+1,width:4*s+1});var p="",h="";if(Model.define.page.showGrid){for(var d=1;d<4;d++)p+="M0 "+s*d+"L"+4*s+" "+s*d+"M"+s*d+" 0L"+s*d+" "+4*s;h="M0 "+4*s+"L"+4*s+" "+4*s+"M"+4*s+" 0L"+4*s+" "+4*s}l.children("#flow_canvas_grid_path1").attr({d:p,stroke:"rgb("+r+")"}),l.children("#flow_canvas_grid_path2").attr({d:h,stroke:"rgb("+o+")"}),this.initialized||($("#designer_layout").scrollTop(Designer.config.pageMargin-10),$("#designer_layout").scrollLeft(Designer.config.pageMargin-10));var c=Model.define.page.watermark;void 0===Model.define.page.showWatermark&&""==c?Model.define.page.showWatermark=!1:void 0===Model.define.page.showWatermark&&c&&(Model.define.page.showWatermark=!0),Model.define.page.showWatermark?(c=$("<span/>").html(c).text(),$("#flow_canvas_watermark_item text").html(c).attr({fill:"rgb("+o+")"})):$("#flow_canvas_watermark_item text").html("");var u=$("#flow_canvas_print_line");if(Model.define.page.showPrintLine){var g=1485,y=1050;"landscape"==Model.define.page.orientation&&(g=[y,y=g][0]);for(var f=g,x="";f<t;)x+="M0 "+f+"L"+e+" "+f,f+=g;for(f=y;f<e;)x+="M"+f+" 0L"+f+" "+t,f+=y}else x="";u.attr({d:x,stroke:"rgb("+Utils.getDarkerColor(n,40)+")"})},canvasSizeAuto:function(){var e=Model.define.page,t=e.width,i=e.height;if(0==chartObj.version&&0==Object.keys(Model.define.elements).length){var n=$("#designer_layout").width()-30,r=$("#designer_layout").height()-33;r=r<500?500:r,t==(n=n<500?500:n)&&i==r||Designer.setPageStyle({width:n,height:r})}$("#designer_layout").scrollTop(Designer.config.pageMargin-10),$("#designer_layout").scrollLeft(Designer.config.pageMargin-10)},initShapes:function initShapes(){$("#shape_panel").empty(),$("#shape_panel").append("<div id='panel-search' class='po-search-input-small'></div><div id='panel_system_box' class='panel_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>系统图形</h3><div id='panel_system' class='content'></div></div><div id='panel_search_box' class='panel_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>网络图形</h3><div id='panel_search' class='content'></div></div>"),$("#shape_panel").append("<div class='panel_container panel_myshape_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>我的图形<span id='edit-myshapes-icon' class='po-diagraming-icons edit-myshapes-icon' title='编辑'>&#xe6ae;</span></h3><div class='myshapes-content'><div id='myshapes' class='myshapes'>拖到此处<br/>添加到我的图形</div></div><div id='panel_myshape' class='content'></div></div>"),Designer.events.push("isTeam",function(e){if("undefined"==typeof TeamShape){bigPipe.render({js:["/scripts_bin/zh/diagraming/designer.team.js"],css:["/scripts_bin/zh/diagraming/designer.team.css"]},function(){TeamShape.init()})}else TeamShape.init()});for(var i=0;i<Schema.categories.length;i++){var cate=Schema.categories[i];"standard"!=cate.name&&$("#shape_panel").append("<div class='panel_container'><h3 class='panel_title'><div class='ico ico_accordion'></div>"+cate.text+"</h3><div id='panel_"+cate.name+"' class='content'></div></div>")}$("#shape_panel .panel_container").css("width",$("#shape_panel").outerWidth()-16),$(".panel_title").unbind("click.panelTitle").bind("click.panelTitle",function(){$(this).parent().toggleClass("panel_collapsed")});var indexs=0;for(var name in Schema.shapes){var shape=Schema.shapes[name];if(shape.attribute.visible&&"standard"!=shape.category)if(shape.groupName){var groupShapes=SchemaGroup.getGroup(shape.groupName);groupShapes[0]==name&&appendPanelItem(shape,shape.groupName)}else appendPanelItem(shape),indexs++;"basic"==shape.category&&-1==Schema.flowBasicConfig.indexOf(name)&&$("#shape_panel [shapeName="+shape.name+"]").css("display","none")}for(var panelEmptyBox="",_i=0;_i<16;_i++)panelEmptyBox+="<div class='panel-empty-box'></div>";function renderMyshape(page){location.href.includes("iframe")||($("#panel_myshape .myshape-panel-btn").remove(),Server.getMyshapes(page,function(res){1==page&&(Schema.myShapes=[],$("#panel_myshape").html(""));for(var myShapesLen=Schema.myShapes.length,len=20*(page-1),cNun=myShapesLen-len,myShapeData=res.definition||[],i=0;i<myShapeData.length;i++)if(!(i<cNun)){for(var shape=myShapeData[i],els=shape.elements,j=0;j<els.length;j++){var el=els[j];for(key in el){var v=el[key];v.indexOf&&v.indexOf("function")>-1&&(el[key]=eval("(function(){return "+v+" })()"))}}Schema.myShapes.push(shape),appendPanelItem(shape)}0==Schema.myShapes.length?$("#myshapes").css("display","block"):$("#myshapes").css("display","none");for(var panelEmptyBox="",_i2=0;_i2<10;_i2++)panelEmptyBox+="<div class='panel-myshape-empty-box'></div>";if($("#panel_myshape").append(panelEmptyBox),page<res.pageCount){var btn=$("<div class='myshape-panel-btn' style='margin: auto;' >加载更多</div>").appendTo("#panel_myshape");btn.off().on("click",function(){page++,$("#panel_myshape .panel-myshape-empty-box").remove(),renderMyshape(page)})}initPanelShapes()}))}function appendPanelItem(e,t,i){(e=Utils.copy(e)).category=e.category||"";var n=Designer.config.panelItemWidth,r=Designer.config.panelItemHeight;("ui"==e.category||"ui_input"==e.category||e.category.indexOf("ios_")>=0||e.category.indexOf("andriod_")>=0)&&(n=30,r=30);var o="<div class='panel_box' shapeName='"+e.name+"'><canvas class='panel_item' width='"+n+"' height='"+r+"'></canvas></div>";if(i)a=$(o).prependTo("#panel_"+e.category);else var a=$(o).appendTo("#panel_"+e.category);t&&a.append("<div class='group_icon' onmousedown='Designer.op.showPanelGroup(\""+t+"\", event, this)'></div>");var s=a.children()[0];(a.bind("mouseenter",function(){if(!$(this).hasClass("readonly")&&"dragging"!=Designer.op.state){var t=$("#shape_thumb");t.children("div:last-child").html(e.title);var i=(s=t.children("canvas")[0]).getContext("2d");t.attr("current",e.name);if(i.clearRect(0,0,160,160),t.show(),"myshape"==e.category){var n={x:0,y:0,w:e.boxPos.w,h:e.boxPos.h,height:e.boxPos.height},r=1;e.boxPos.w>=e.boxPos.h?e.boxPos.w>160&&(r=160/e.boxPos.w,n.w=160,n.h=parseInt(e.boxPos.h/e.boxPos.w*n.w)):e.boxPos.h>160&&(r=160/e.boxPos.h,n.h=160,n.w=parseInt(e.boxPos.w/e.boxPos.h*n.h)),t.children("canvas").attr({width:180,height:n.h+20}),t.children("canvas").css({width:180,height:n.h+20}),i.clearRect(0,0,160,160);for(var o=Utils.copy(e),l=0;l<o.elements.length;l++){var p=o.elements[l];if("linker"==p.name){var h=Utils.getLinkerLineStyle(p.lineStyle);p.lineStyle.lineWidth=h.lineWidth*r/2}else{var d=Utils.getShapeLineStyle(p.lineStyle);p.lineStyle.lineWidth=d.lineWidth*r}}var c={width:160,height:n.h,padding:10,isPanel:!1};Designer.painter.drawPanelItemByShape(s,o,c)}else if(e.name.startsWith("chart_")){Designer.painter.drawChart(t[0],e,"thumb");var u=t.find("canvas"),g=$("<div>"+e.title+"</div>");t.children().remove(),$(u).appendTo(t),g.appendTo(t)}else{var y={x:0,y:0,w:e.props.w,h:e.props.h,height:e.props.height,angle:e.props.angle};e.props.w>=e.props.h?e.props.w>160&&(y.w=160,y.h=parseInt(e.props.h/e.props.w*y.w)):e.props.h>160&&(y.h=160,y.w=parseInt(e.props.w/e.props.h*y.h));var f=Utils.isMac(),x=1;f&&(x=2);var v=y.h+20;t.children("canvas").attr({width:180*x,height:v*x}),t.children("canvas").css({width:180,height:v}),e.props=y,i.save(),f&&i.scale(x,x),i.lineJoin="round",i.globalAlpha=e.shapeStyle.alpha;var m=(180-y.w)/2;i.translate(m,10),i.translate(y.w/2,y.h/2),i.rotate(y.angle),i.translate(-y.w/2,-y.h/2),Designer.painter.renderShapePath(i,e,!1,function(){$("#shape_thumb[current="+e.name+"]:visible").length>0&&a.trigger("mouseenter")}),Designer.painter.renderMarkers(i,e,!1),i.restore(),i.translate(m,10)}var b=a.offset().top-$("#po-toolbar").outerHeight()-$(".po-flow-header").outerHeight()+a.height()/2-t.outerHeight()/2;b<5?b=5:b+t.outerHeight()>$("#designer_viewport").height()-5&&(b=$("#designer_viewport").height()-5-t.outerHeight()),t.css("top",b)}}).bind("mouseleave",function(){$("#shape_thumb").hide()}),"myshape"==e.category)?(s.getContext("2d").clearRect(0,0,n,r),Designer.painter.drawPanelItemByShape(s,e)):e.name.startsWith("chart_")?(a[0].style.height="26px",a[0].style.width="26px",Designer.painter.drawChart(a[0],e,"library")):Designer.painter.drawPanelItem(s,e.name)}function initPanelShapes(){$(document).off("mousedown.creat").on("mousedown.creat",".panel_box",function(e){var t=$(this);if(!t.hasClass("readonly")){var i,n,r=t.attr("shapeName"),o=[];Designer.op.changeState("creating_from_panel");var a=null,s=[],l=[],p=$("#designer_canvas"),h=getCreatingCanvas(r);$("#designer").bind("mousemove.creating",function(e){setCreatingCanvas(h,e)});for(var d=[],c=Model.orderList.length-1;c>=0;c--){var u=Model.orderList[c].id,g=Model.getShapeById(u);if((!g.attribute||!g.attribute.collapseBy)&&("linker"!=g.name&&!g.parent)){var y=Utils.getControlBox([u]);y.id=u,d.push(y)}}$("#canvas_container").off("mousemove.create").on("mousemove.create",function(e){var t=Utils.getRelativePos(e.pageX,e.pageY,p);if(null==a){a=createShape(r,t.x,t.y);for(var h=0;h<a.length;h++){(u=a[h]).pos=Utils.copy(u.props),"linker"==u.name&&(u.to_=Utils.copy(u.to),u.from_=Utils.copy(u.from),u.points_=Utils.copyArray(u.points)),s.push(u.id),$("#"+u.id).attr("class","shape_box_creating"),l.push($("#"+u.id))}}for(var c=0;c<a.length;c++){var u,g=l[c];if((u=a[c]).boxPos?(u.props.x=t.x-u.boxPos.w/2+u.pos.x,u.props.y=t.y-u.boxPos.h/2+u.pos.y):(u.props.x=t.x-u.props.w/2,u.props.y=t.y-u.props.h/2),"linker"==u.name&&(u.from=$.extend(!0,u.from,resetPosByMouse(t,u.from_,u)),u.to=$.extend(!0,u.to,resetPosByMouse(t,u.to_,u)),"broken"==u.linkerType||"curve"==u.linkerType))for(h=0;h<u.points_.length;h++)u.points[h]=resetPosByMouse(t,u.points_[h],u);var y=u.props,f=Designer.op.snapLine(y,[u.id],u,d);f.attach?u.attachTo=f.attach.id:delete u.attachTo,u.container||(f.container?u.container=f.container.id:delete u.container),g.css({left:u.props.x-(g.width()-u.props.w)/2+"px",top:u.props.y-(g.height()-u.props.h)/2+"px","z-index":Model.orderList.length})}o=Utils.getShapeAnchorInLinker(a[0]),Designer.op.hideLinkPoint();for(h=0;h<o.length;h++)for(var x=o[h],v=0;v<x.anchors.length;v++){var m=x.anchors[v];Designer.op.showLinkPoint(m)}"linker"==a[0].name&&(i=Designer.op.moveLinkerFocus(a[0])),1!=a.length||"verticalLane"!=a[0].name&&"horizontalLane"!=a[0].name||(n=Designer.op.showLaneInsertLine(a[0]))});var f=!1;$("#canvas_container").off("mouseup.create").on("mouseup.create",function(e){f=!0}),$(document).off("mouseup.create").on("mouseup.create",function(){if($(this).off("mouseup.create"),$("#designer").off("mousemove.creating"),$("#creating_shape_container").hide(),Designer.op.hideLinkPoint(),Designer.op.hideSnapLine(),Designer.op.hideLaneInsertLine(),$("#canvas_container").off("mouseup.create").off("mousemove.create"),null!=a)if(0!=f&&Designer.events.push("testVip","flowShapeNum")){MessageSource.beginBatch(),i&&(a[0]=Utils.copy(i)),Utils.shapesToRound(a);for(var e=0;e<a.length;e++){var p=a[e];k=l[e];if(p.onCreated&&r.indexOf("myshape")<0){if(n){var h=p.onCreated(null,null,n);Designer.op.updateShapeByLaneInsert(n)}else h=p.onCreated();if(p.parent&&delete p.container,0==h)return k.remove(),void MessageSource.commit()}for(key in p)key.indexOf("_")>-1&&delete p[key],"boxPos"==key&&delete p[key],"pos"==key&&delete p[key];"linker"==p.name&&(p.props={zindex:p.props.zindex}),k.attr("class","shape_box"),Designer.events.push("created",p)}Model.addMulti(a),Utils.unselect(),Utils.selectShape(s),1==a.length&&Designer.op.editShapeText(a[0]);for(Utils.getShapeContext(a[0].id),l[0].position(),S=0;S<o.length;S++){var d=o[S],c=d.linker;if("line"==d.type){Utils.copy(c);var u=Utils.copy(c);if(u.id=Utils.newId(),1==d.anchors.length){var g=d.anchors[0],y=Utils.getPointAngle(a[0].id,g.x,g.y,7);c.to={id:a[0].id,x:g.x,y:g.y,angle:y},u.from={id:a[0].id,x:g.x,y:g.y,angle:y}}else if(2==d.anchors.length){var x,v,m=d.anchors[0],b=d.anchors[1];Utils.measureDistance(c.from,m)<Utils.measureDistance(c.from,b)?(x=m,v=b):(x=b,v=m);y=Utils.getPointAngle(a[0].id,x.x,x.y,7);c.to={id:a[0].id,x:x.x,y:x.y,angle:y},y=Utils.getPointAngle(a[0].id,v.x,v.y,7),u.from={id:a[0].id,x:v.x,y:v.y,angle:y}}d.anchors.length<=2&&(c=Designer.op.beautifyLinkerFocus(c,!0),u=Designer.op.beautifyLinkerFocus(u,!0),Designer.painter.renderLinker(c,!0),Model.update(c),Designer.painter.renderLinker(u,!0),u.props.zindex=Model.maxZIndex+1,Model.add(u),Designer.events.push("linkerCreated",u))}else{g=d.anchors[0],y=Utils.getPointAngle(a[0].id,g.x,g.y,7);"from"==d.type?c.from={id:a[0].id,x:g.x,y:g.y,angle:y}:c.to={id:a[0].id,x:g.x,y:g.y,angle:y},c=Designer.op.beautifyLinkerFocus(c,d.type),Designer.painter.renderLinker(c,d.type),Model.update(c)}}MessageSource.commit();a[0].props.w,a[0].props.h;var w=Utils.getControlBox(s);Designer.op.changeCanvas(w),Designer.events.push("resetBrokenLinker")}else for(var S=0;S<l.length;S++){var k;(k=l[S]).remove()}t.css({left:"0px",top:"0px"}),Designer.op.resetState()})}})}function resetPosByMouse(e,t,i){var n={};return n.x=e.x+t.x-i.boxPos.w/2,n.y=e.y+t.y-i.boxPos.h/2,n}function getCreatingCanvas(e){var t=2*Designer.config.panelItemWidth,i=2*Designer.config.panelItemHeight,n=$("#creating_shape_canvas"),r=$("#creating_shape_container");if(0==n.length?(r=$("<div id='creating_shape_container'></div>").appendTo("#designer"),n=$("<canvas id='creating_shape_canvas' width='"+t+"' height='"+i+"'></canvas>").appendTo(r)):(n.removeAttr("style"),n.attr("width",t).attr("height",i)),Schema.shapes&&Schema.shapes[e]){var o=Schema.shapes[e].category;("ui"==o||"ui_input"==o||o.indexOf("ios_")>=0||o.indexOf("andriod_")>=0)&&(t=30,i=30,n.attr("width",t).attr("height",i),n.css("transform","scale(0.5)"))}if(r.css({left:"0px",top:$("#panel-tab").outerHeight(),width:$("#shape_panel").outerWidth(),height:$("#shape_panel").outerHeight()}),e.indexOf("myshape")>-1){var a=getMyshapeByName(e),s=Designer.config.panelItemWidth,l=Designer.config.panelItemHeight;n[0].getContext("2d").clearRect(0,0,s,l),Designer.painter.drawPanelItemByShape(n[0],a)}else if(e.startsWith("chart_")){var p=Schema.shapes[e];r.children().remove(),Designer.painter.drawChart(r[0],p,"creating"),(n=r.find("canvas")).attr({id:"creating_shape_canvas",width:100,height:100})}else Designer.painter.drawPanelItem(n[0],e,t,i);return n}function setCreatingCanvas(e,t){$("#creating_shape_container").show();var i=Utils.getRelativePos(t.pageX,t.pageY,$("#creating_shape_container"));i=Utils.toScale(i),e.css({left:i.x-Designer.config.panelItemWidth/2,top:i.y-Designer.config.panelItemHeight/2})}function createShape(e,t,i){if(e.indexOf("myshape")>-1){for(var n=getMyshapeByName(e).elements,r=Utils.copyArray(n),o=[],a={},s=0;s<r.length;s++){var l=r[s],p=Utils.newId();a[r[s].id]=p,l.group&&(a[l.group]=Utils.newId()),r[s].id=p}for(s=0;s<r.length;s++){var h=t-(l=r[s]).props.w/2,d=i-l.props.h/2,c=Model.createByShape(l,h,d);if("linker"==l.name&&(null!=l.from.id&&(c.from.id=a[l.from.id]),null!=l.to.id&&(c.to.id=a[l.to.id]),null!=l.textPos&&delete c.textPos),l.group&&(c.group=a[l.group]),l.children)for(var u=0;u<l.children.length;u++){var g=l.children[u];c.children[u]=a[g]}l.parent&&(c.parent=a[l.parent]),l.container&&(c.container=a[l.container]),Designer.painter.renderShape(c),o.push(c)}return o}if(e.indexOf("linker_shape_")>-1){(l=Schema.shapes[e].element).id=Utils.newId();h=t-l.props.w/2,d=i-l.props.h/2;return void 0===(c=Model.createByShape(l,h,d)).lineStyle.lineWidth&&(c.lineStyle.lineWidth=Designer.defaults.lineWidth),Designer.painter.renderShape(c),[c]}h=t-(l=Schema.shapes[e]).props.w/2,d=i-l.props.h/2;return null!=(c=Model.create(e,h,d)).lineStyle&&($.isEmptyObject(c.lineStyle)||!$.isEmptyObject(c.lineStyle)&&void 0===c.lineStyle.lineWidth)&&(c.lineStyle.lineWidth=Designer.defaults.lineWidth),Designer.painter.renderShape(c),[c]}function getMyshapeByName(e){for(var t=null,i=0;i<Schema.myShapes.length;i++)if(Schema.myShapes[i].name==e){t=Schema.myShapes[i];break}return t}function addMyshape(e,t,i){if(Designer.events.push("testVip","myShape")){if(Schema.myShapes.length>=60)return void $.toast({text:"最多支持60个图形",type:"warning"})}else if(Schema.myShapes.length>=9)return void Designer.events.push("vipLimit","myShape");var n=Utils.newId(),r={id:n,name:"myshape_"+n,category:"myshape",title:"custom shape",boxPos:t,elements:e},o=Utils.copy(r);o=JSON.stringify(o,function(e,t){return"function"==typeof t?t+"":t}),appendPanelItem(r,null,!0),Schema.myShapes.unshift(r),Schema.myShapes.length>0&&$("#myshapes").css("display","none"),$("#myshapes .content .panel-empty-box").remove();for(var a="",s=0;s<16;s++)a+="<div class='panel-myshape-empty-box'></div>";$("#panel_myshape").append(a),initPanelShapes(),Server.addMyshapes(o,function(e){"function"==typeof i&&i(),Schema.myShapes.length>0&&$("#myshapes .my_content").css("display","none")})}$("#shape_panel .content").append(panelEmptyBox),"undefined"==typeof isView&&renderMyshape(1),indexs>300&&$.toast({type:"warning",text:"当前加载的图形过多，可能会造成页面卡顿，请取消勾选不需要的图形",delay:9e3}),initPanelShapes(),$(".layout_bar").off("mousedown.resize").on("mousedown.resize",function(e){var t=e.target.className;if(t.includes("left")){var i=$(".po-flow-layout"),n=i.width(),r=e.pageX,o=$("#panel-tab"),a=$("#history-container"),s=$(".po-flow-layout .panel_title"),l=$("#designer_viewport"),p=($("#panel_basic").width(),$("#panel-tab"),$(".bottom_temp_wrap")),h=$("#shape_panel .panel_container");$(document).on("mousemove.panelresize",function(e){var t=e.pageX-r;if(Math.abs(t)>2){var d=n+0+t;if(d<60||d>650)return;i.width(d-0),o.width(d-0-36),s.width(d-0-40),l.css("margin-left",d+1+"px"),p.css("left",d+5+"px"),a.length>0&&a.width(d),h.width(d-12)}})}else if(t.includes("right")){var d=$("#po-flow-dock-layout"),c=$(".po-designer-foot.shrink"),u=$(".bottom_temp_wrap"),g=d.width(),y=e.pageX;$(document).on("mousemove.panelresize",function(e){var t=e.pageX,i=y-t;if(Math.abs(i)>2){var n=g+0+i;if(n<240||n>400)return;d.width(n-0),c.css("right",n+"px"),u.css("right",n-130+"px");var r=$("#po-chartdata-container>table"),o=r.find("colgroup>col").length,a=parseFloat((n-32)/o);a<54&&(a=54),a>72&&o>4&&(a=72),r.css("width",n+"px"),r.find("colgroup>col").attr("width",a+"px")}})}$(document).on("mouseup.panelresize",function(e){$(document).off("mousemove.panelresize"),$(document).off("mouseup.panelresize")})}),$(".layout_bar").off("mouseover").on("mouseover",function(e){var t=$(this).children(".layout_bar_line");window.dragLineTimer&&(clearTimeout(window.dragLineTimer),window.dragLineTimer=null),window.dragLineTimer=setTimeout(function(){t.fadeIn(300)},300)}).on("mouseout",function(e){window.dragLineTimer&&(clearTimeout(window.dragLineTimer),window.dragLineTimer=null),$(this).children(".layout_bar_line").fadeOut(300)}),$("#panel-search").searchInput({search:function(e){var t=e.toLowerCase();if(""!=t.trim()){for(var i in Schema.shapes)i.indexOf("image_search_")>=0&&delete Schema.shapes[i];for(var i in SchemaGroup.groups)i.indexOf("image_search_")>=0&&delete SchemaGroup.groups[i];var n=!1;for(var i in Schema.shapes){var r=Schema.shapes[i];if(r.title&&r.title.toLowerCase().indexOf(t)>=0&&r.attribute.visible&&"standard"!=r.category){n=!0;var o=Utils.copy(r);o.category="system",appendPanelItem(o)}}for(var a="",s=0;s<16;s++)a+="<div class='panel-empty-box'></div>";n&&($("#panel_system_box").css("display","block"),$("#panel_system_box .panel-empty-box").remove(),$("#panel_system").append(a)),$("#panel_search_box").css("display","block");var l=1;!function e(){$(".search-panel-loading").remove(),$("#panel_search").append("<div class='search-panel-loading'>加载中...</div>"),$(".search-panel-btn").remove(),$("#panel_search_box .panel-empty-box").remove(),1==l&&$("#panel_search_box .panel_box").remove();var i=Schema.shapes.standardImage,n=["5eed8a83e4b0b8982239fcab","5f576558e4b0c94f9b1b76a7","64ed8c59e4b0bf419b63e6e2"],r=n[Math.round((n.length-1)*Math.random())];$.getJSON("https://iconsapi.com/api/search?appkey="+r+"&query="+t+"&page="+l+"&size=25",function(t){if((t=t.pages)&&0!=t.elementsCount){$(".search-panel-loading").remove(),1==l&&($("#panel_search .panel_box").each(function(e,t){$(t).attr("shapename").indexOf("image_search_")>-1&&$(t).remove()}),$("#panel_search .search-panel-btn").remove());for(var n=t.elements,r=0;r<n.length;r++){var o=n[r],s="image_search_"+Utils.newId(),p=o.iconName,h=o.url,d=Utils.copy(i);d.props={w:100,h:100},d.fillStyle={type:"image",fileId:h,display:"stretch",imageW:100,imageH:100},d.attribute.visible=!0,d.name="image_search_"+Utils.newId(),d.category="search",d.title=p+"<br/>100x100",d.groupName=s,Schema.shapes[d.name]=d,SchemaGroup.addGroupShape(s,d.name),appendPanelItem(d)}$("#panel_search").append(a),++l<t.elementsCount&&$("<div class='search-panel-btn'>加载更多</div>").appendTo("#panel_search").bind("click",function(){e()}),initPanelShapes()}else $(".search-panel-loading").text("未搜索到图形")})}()}},empty:function(){$("#panel_system_box").css("display","none"),$("#panel_search_box").css("display","none")}}),$(".panel_myshape_container").off("mouseup.myshapes").on("mouseup.myshapes",function(){if("dragging"==Designer.op.state){var e=Utils.getSelectedIds();if(e.length>50)$.toast({type:"error",text:"图形过多，添加失败"});else{var t=Utils.getControlBox(e);if(e.length>0){for(var i=[],n=0,r=e.length;n<r;n++){var o=e[n],a=Utils.copy(Model.getShapeById(o));if(i.push(a),a.children)for(var s=0;s<a.children.length;s++)if(e.indexOf(a.children[s])<0){var l=Utils.copy(Model.getShapeById(a.children[s]));i.push(l)}}var p=Utils.copyArray(Utils.getContainedShapes(i)),h=[];i=i.concat(p);for(n=0;n<p.length;n++)h.push(p[n].id);var d=Model.define.elements;for(key in d)if("linker"==d[key].name){var c=Utils.copy(d[key]);h.indexOf(c.to.id)>-1&&h.indexOf(c.from.id)>-1&&i.push(c)}i.sort(function(e,t){return e.props.zindex-t.props.zindex});for(n=0;n<i.length;n++){var u=i[n];if("linker"==u.name){if(u.from=k(u.from),u.to=k(u.to),"broken"==u.linkerType||"curve"==u.linkerType)for(s=0;s<u.points.length;s++)u.points[s]=k(u.points[s]);var g=u.to,y=u.from,f=u.points,x=g.x,v=g.y,m=y.x,b=y.y;g.x<y.x?(x=g.x,m=y.x):(x=y.x,m=g.x),g.y<y.y?(v=g.y,b=y.y):(v=y.y,b=g.y);for(s=0;s<f.length;s++){var w=f[s];w.x<x?x=w.x:w.x>m&&(m=w.x),w.y<v?v=w.y:w.y>b&&(b=w.y)}var S={x:x,y:v,w:m-x,h:b-v};u.props=$.extend(u.props,S)}else u.props.x=u.props.x-t.x,u.props.y=u.props.y-t.y;u.boxPos=t}function k(e){return e.x=e.x-t.x,e.y=e.y-t.y,e}Schema.myShapes.length>0&&$("#myshapes .my_content").css("display","none"),addMyshape(i,t)}}}}),$(document).off("mousemove.myshape").on("mousemove.myshape",function(e){var t=$(e.target).parents(".panel_myshape_container");if("dragging"==Designer.op.state&&t.length>0){if(0==$("#add_myshape_box").length){t.css("cursor","url("+staticBasePath+"/assets/images/designer/add.svg) 0 0, pointer");var i=$("#panel_myshape").width(),n=$("#panel_myshape").height(),r=$(".team_panel_tab").height()||0;Schema.myShapes.length>0&&(n-=80,$("#panel_myshape").prepend('<div id="add_myshape_box" style="width:'+(i+2)+"px;height:"+(n+80)+"px; top:"+(r+78)+'px;"></div>'))}}else t.css("cursor","auto"),$("#add_myshape_box").remove()}),$("#edit-myshapes-icon").on("click",function(e){e.stopPropagation(),UI.editMyshape&&(UI.editMyshape.init(),$("#myshape-dialog").dialog({onClose:function(){renderMyshape(1)}}))}),$("#import_myshape").off("click").on("click",function(e){e.stopPropagation(),$("#import_myshape_input").trigger("click"),$("#import_myshape_input").off("change").on("change",function(e){var t=this.files[0].type,i=this.files[0].size/1204;if(""!=$.trim($(this).val()))if(t.indexOf("image")<0)$.toast({type:"error",text:"该文件格式不支持"});else if(i>200)$.toast({type:"error",text:"该文件超出200KB，暂不支持"});else{var n=new FormData($("#frm_import_myshape")[0]);poAjax({contentType:!1,processData:!1,data:n,success:function(e){$("#import_myshape_input").val(""),Util.getImgsizeByUrl(e.url,function(t){var i=Utils.copy(Schema.shapes.standardImage);i.fillStyle={display:"stretch",fileId:e.url,imageH:t.width||100,imageW:t.height||100,type:"image"},i.props.w=t.width||100,i.props.h=t.height||100,addMyshape([i],{x:0,y:0,w:i.props.w,h:i.props.h},function(){$("#myshape-dialog").dialog("close")})})},error:function(e){"803"==e.code?$.toast({type:"error",text:"该文件格式不支持"}):e.code}},"uploadImageForm")}})})},initPage:function(e){Designer.events.push("onInitPages"),0!=PageModel.list.length&&PoPagination($("#page_box"),PageModel.list,{pageId:Model.pageId,isView:"undefined"!=typeof isView||Designer.readonly,initType:e,maxPageNum:10,on:{select:function(e){$("#po-global-loading-wrap").css("backgroundColor","rgba(255,255,255,0.3)").show().find(".po-loadingTop p").hide(),injectExtraAsynCall("onDefById",{defId:e,chartId:chartId},function(t){Designer.renderPage(e,t.def)})},add:function(){PageModel.list.length>=Designer.events.push("testVip","canvasNum")?Designer.events.push("vipLimit","canvasNum"):PageModel.addPage()},copy:function(e){PageModel.list.length>=Designer.events.push("testVip","canvasNum")?Designer.events.push("vipLimit","canvasNum"):PageModel.copyPage({pageId:e,def:Model.pageId==e?JSON.stringify(Model.define):null})},delete:function(e){PageModel.delPage({id:e})},rename:function(e,t){PageModel.renamePage({id:e,title:t})},sort:function(e,t){PageModel.sortPage(e,t)},setMain:function(e){PageModel.setMainPage(e)}}})}},hotkey:{init:function(){var e=null;if($(window).unbind("keydown.hotkey").bind("keydown.hotkey",function(t){if((t.ctrlKey||t.metaKey)&&83==t.keyCode)t.preventDefault(),UI.save();else if((t.ctrlKey||t.metaKey)&&65==t.keyCode)Designer.selectAll(),t.preventDefault();else if(46==t.keyCode||8==t.keyCode)Designer.op.removeShape(),$(".shape_dashboard.menu").hide(),t.preventDefault();else if((t.ctrlKey||t.metaKey)&&90==t.keyCode)MessageSource.undo(),t.preventDefault();else if((t.ctrlKey||t.metaKey)&&89==t.keyCode)MessageSource.redo(),t.preventDefault();else if(!t.ctrlKey&&!t.metaKey||t.shiftKey||67!=t.keyCode)if((t.ctrlKey||t.metaKey)&&68==t.keyCode)t.preventDefault(),clipboard.duplicate({Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI,memberObj:memberObj,insert:insert,$:$});else if(!t.ctrlKey&&!t.metaKey||!t.shiftKey||66!=t.keyCode&&67!=t.keyCode)if(t.altKey&&76==t.keyCode)Designer.alignShapes("left"),t.preventDefault();else if(t.altKey&&82==t.keyCode)Designer.alignShapes("right"),t.preventDefault();else if(t.altKey&&67==t.keyCode)Designer.alignShapes("center"),t.preventDefault();else if(!(t.altKey||t.metaKey||t.ctrlKey)||187!=t.keyCode&&107!=t.keyCode)if(!(t.altKey||t.metaKey||t.ctrlKey)||189!=t.keyCode&&109!=t.keyCode)if(t.keyCode>=37&&t.keyCode<=40){if($("#po-chartdata-container table td.current").length>0)return;if(null==e||Utils.getSelected().length>0){if("dragging"==Designer.op.state)return void t.preventDefault();var i=Utils.getSelected(),n=Utils.getFamilyShapes(i);i=i.concat(n);var r=Utils.getContainedShapes(i);i=i.concat(r);var o=Utils.getAttachedShapes(i);i=i.concat(o);var a=Utils.getCollapsedShapes(i);i=i.concat(a);var s=Utils.getOutlinkers(i);e=i.concat(s)}if(e.length>0){t.preventDefault();var l=10;(t.ctrlKey||t.shiftKey)&&(l=1),Utils.hideLinkerCursor(),UI.hideShapeOptions(),37==t.keyCode?Designer.op.moveShape(e,{x:-l,y:0}):38==t.keyCode?(Designer.op.moveShape(e,{x:0,y:-l}),t.preventDefault()):39==t.keyCode?Designer.op.moveShape(e,{x:l,y:0}):40==t.keyCode&&(Designer.op.moveShape(e,{x:0,y:l}),t.preventDefault()),$(document).unbind("keyup.moveshape").bind("keyup.moveshape",function(){Utils.shapesToRound(e),Model.updateMulti(e),Designer.events.push("changeLinkers",e);var t=Utils.getShapesBounding(e);Designer.op.changeCanvas(t),e=null,$(document).unbind("keyup.moveshape"),Designer.op.hideTip(),Utils.showLinkerCursor(),UI.showShapeOptions()})}var p=Utils.getSelectedCharts().length;1==Utils.getSelectedShapeIds().length&&1==p&&UI.renderSubMenuPos({top:23})}else if((t.ctrlKey||t.metaKey)&&221==t.keyCode){t.preventDefault();var h="front";t.shiftKey&&(h="forward"),Designer.layerShapes(h)}else if((t.ctrlKey||t.metaKey)&&219==t.keyCode){t.preventDefault();h="back";t.shiftKey&&(h="backward"),Designer.layerShapes(h)}else if((t.ctrlKey||t.metaKey)&&71==t.keyCode)t.preventDefault(),t.shiftKey?Designer.ungroup():Designer.group();else if((t.ctrlKey||t.metaKey)&&76==t.keyCode)t.preventDefault(),t.shiftKey?Designer.unlockShapes():Designer.lockShapes();else if(18==t.keyCode&&t.ctrlKey);else if(18==t.keyCode);else if(27==t.keyCode)Designer.op.state?"creating_free_text"!=Designer.op.state&&"creating_free_linker"!=Designer.op.state||Designer.op.resetState():(Utils.unselect(),$(".options_menu").hide(),$(".color_picker").hide());else if(84!=t.keyCode||t.ctrlKey||t.metaKey)if(73==t.keyCode&&!(t.ctrlKey||t.metaKey||t.shiftKey)||73==t.keyCode&&(t.ctrlKey||t.metaKey)&&t.shiftKey)t.preventDefault(),$(".options_menu").hide(),$(".color_picker").hide(),insert.image.init(function(e,t){UI.insertImage(e,t.width,t.height)}),$("#designer-contextmenu").hide();else if(76!=t.keyCode||t.ctrlKey||t.metaKey)if(66==t.keyCode&&(t.ctrlKey||t.metaKey)){if((g=Utils.getSelectedIds()).length>0){var d=Model.getShapeById(g[0]),c=Utils.getShapeFontStyle(d.fontStyle);Designer.setFontStyle({bold:!c.bold}),UI.update()}t.preventDefault()}else if(73==t.keyCode&&(t.ctrlKey||t.metaKey)){if((g=Utils.getSelectedIds()).length>0){d=Model.getShapeById(g[0]),c=Utils.getShapeFontStyle(d.fontStyle);Designer.setFontStyle({italic:!d.fontStyle.italic}),UI.update()}t.preventDefault()}else if(85==t.keyCode&&(t.ctrlKey||t.metaKey)){if((g=Utils.getSelectedIds()).length>0){d=Model.getShapeById(g[0]),c=Utils.getShapeFontStyle(d.fontStyle);Designer.setFontStyle({underline:!c.underline}),UI.update()}t.preventDefault()}else if(32!=t.keyCode||t.ctrlKey||t.metaKey)if(121==t.keyCode)t.preventDefault(),Dock.enterPresentation();else{if(91==t.keyCode)return Designer.op.isMetaKey=!0,t.preventDefault(),!1;if(68==t.keyCode);else if(!t.ctrlKey&&!t.metaKey||70!=t.keyCode||t.ctrlKey&&t.metaKey){if((t.ctrlKey||t.metaKey)&&80==t.keyCode)t.preventDefault(),UI.print.init();else if((t.ctrlKey||t.metaKey)&&75==t.keyCode)t.preventDefault(),UI.showInsertLink();else if(73==t.keyCode&&t.shiftKey)if(!Dock.isOpen||"shape"!=Dock.openView&&"page"!=Dock.openView){var u=Utils.getSelectedIds().length>0?"shape":"page";Dock.show(u),Dock.update()}else Dock.hide();else if(t.ctrlKey&&69==t.keyCode){if((g=Utils.getSelectedIds()).length>0)(d=Model.getShapeById(g[0])).name.startsWith("chart_")||"standardImage"===d.name||Designer.op.equation.insertLastEquation(d);t.preventDefault()}}else t.preventDefault(),UI.showSearchReplace()}else{var g;if(1==(g=Utils.getSelectedIds()).length){var d=Model.getShapeById(g[0]),y=Utils.gridSelectObj;y.id==d.id?Designer.op.editShapeText(d,!1,y.indexs[0]):Designer.op.editShapeText(d)}else Designer.op.changeState("drag_canvas");t.preventDefault()}else $(".options_menu").hide(),$(".color_picker").hide(),Designer.op.changeState("creating_free_linker");else $(".options_menu").hide(),$(".color_picker").hide(),Designer.op.changeState("creating_free_text");else Designer.zoomOut("center"),t.preventDefault();else Designer.zoomIn("center"),t.preventDefault();else Designer.clipboard.brush(),t.preventDefault();else;}),$(document).off("keydown.hotkey","input,textarea,select,div[contenteditable]").on("keydown.hotkey","input,textarea,select,div[contenteditable]",function(e){(e.ctrlKey||e.metaKey)&&70==e.keyCode&&e.preventDefault(),e.stopPropagation()}),$(".header, .po-toolbar, .po-extend-toolbar, .po-flow-layout, .po-flow-dock-layout, .po-designer-foot, .po-flow-menu-container, .po-dialog").off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){(e.ctrlKey||e.metaKey)&&e.preventDefault()}),$(window).unbind("keyup.hotkey").bind("keyup.hotkey",function(e){if(91==e.keyCode)return e.preventDefault(),Designer.op.isMetaKey=!1,!1}),document.oncut=function(e){clipboard.cut(e,Utils,Designer,publicCLB)},document.oncopy=function(e){clipboard.copy(e,Utils,publicCLB)},pasteFn&&document.removeEventListener("paste",pasteFn,!0),pasteFn=function(e){e.preventDefault(),e.stopImmediatePropagation(),clipboard.paste({e:e,Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI,memberObj:memberObj,insert:insert,$:$})},document.addEventListener("paste",pasteFn,!0),$("#designer_layout").off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail,i=Math.max(-1,Math.min(1,t));if(e.ctrlKey||e.metaKey){e.preventDefault();var n={x:e.originalEvent.pageX,y:e.originalEvent.pageY};if($("#shape_text_edit").length&&$("#shape_text_edit").trigger("blur"),null!=Designer.op.state)return;i<0?Designer.zoomOut(n):Designer.zoomIn(n)}clipboard.diagramDis.reset()}),navigator.userAgent.indexOf("Mac OS")>0){if(void 0!==this.isAddGesture&&this.isAddGesture)return;this.isAddGesture=!0;var t=0,i=!1,n={};function r(e){if(!i){var r,o=Math.round(100*e.scale);if(r=o-t,Math.abs(r)>=10){if(i=!0,r<0){var a=100*Designer.config.scale;(l=a-=10)<50&&(l=a=50);var s=l/100;Designer.setZoomScale(s,n)}else if(r>0){var l;a=100*Designer.config.scale;(l=a+=10)>200&&(l=a=200);s=l/100;Designer.setZoomScale(s,n)}setTimeout(function(){i=!1,t=o},10)}e.preventDefault()}}function o(e){e.preventDefault(),$("#shape_text_edit").trigger("keyup"),document.removeEventListener("gesturechange",r,!1),document.removeEventListener("gestureend",o,!1)}$("#designer").length>0&&$("#designer")[0].addEventListener("gesturestart",function(e){n={x:e.pageX,y:e.pageY},t=Math.round(100*e.scale),i=!1,0,e.preventDefault(),document.addEventListener("gesturechange",r,!1),document.addEventListener("gestureend",o,!1)},!1)}},cancel:function(){$(window).unbind("keydown.hotkey")}},contextMenu:{init:function(){$("#designer-contextmenu").unbind("mousedown").bind("mousedown",function(e){e.stopPropagation()}),$("#designer-contextmenu").find("li:not(.devider)").unbind("mousedown").bind("mousedown",function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var i,n,r,o,a,s,l,p,h,d,c,u,g,y,f;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),0===t.button){e.next=4;break}return e.abrupt("return");case 4:if(i=$(this),n=i.attr("ac"),!(r=document.getElementById("shape_text_edit")||document.getElementById("linker_text_edit"))){e.next=41;break}o=r.tagName,e.t0=n,e.next="cut_edit"===e.t0?12:"copy_edit"===e.t0?14:"paste_edit"===e.t0?16:"selectall_edit"===e.t0?37:39;break;case 12:return"DIV"==o?window.getSelection&&(a=window.getSelection(),document.execCommand("Copy"),a.rangeCount>0&&(s=a.getRangeAt(0)).deleteContents()):"TEXTAREA"==o&&(l=r.value,p=r.selectionStart,h=r.selectionEnd,d=l.substring(p,h),r.value=l.substring(0,p)+l.substring(h),r.selectionEnd=p,defClipboard.writeText(d)),e.abrupt("break",40);case 14:return"DIV"==o?document.execCommand("Copy"):"TEXTAREA"==o&&(l=r.value,p=r.selectionStart,h=r.selectionEnd,d=l.substring(p,h),defClipboard.writeText(d)),e.abrupt("break",40);case 16:if("DIV"!=o){e.next=25;break}return e.next=19,clipboard.get(t.originalEvent);case 19:c=e.sent,u=c.content,g=c.type,"string"==typeof u&&(0,_utils.pasteString)(u,"html"==g),e.next=36;break;case 25:if("TEXTAREA"!=o){e.next=36;break}return l=r.value,p=r.selectionStart,h=r.selectionEnd,e.next=31,defClipboard.readText(t.originalEvent);case 31:y=e.sent,r.value=l.substring(0,p)+y+l.substring(h),f=p+y.length,r.selectionStart=f,r.selectionEnd=f;case 36:return e.abrupt("break",40);case 37:return"DIV"==o?((s=document.createRange()).selectNodeContents(r),(a=window.getSelection()).removeAllRanges(),a.addRange(s)):"TEXTAREA"==o&&r.select(),e.abrupt("break",40);case 39:return e.abrupt("break",40);case 40:Designer.contextMenu.hide();case 41:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),$("#designer-contextmenu").find("li:not(.devider)").unbind("click").bind("click",function(e){var t=$(this);t.menuitem("isDisabled")||0!=t.children(".extend_menu").length||(Designer.contextMenu.execAction(t),Designer.contextMenu.hide())}),$("#canvas_container").unbind("contextmenu").bind("contextmenu",function(e){if(e.preventDefault(),!e.ctrlKey){var t=$("#designer_canvas"),i=Utils.getRelativePos(e.pageX,e.pageY,t);Designer.contextMenu.show(i.x,i.y),Designer.events.push("useBrush","unbrush")}}),Util.isMac()&&$("#designer-contextmenu").find(".po-menu-hotkey").each(function(e,t){$(t).html($(t).html().replace(/Ctrl/,"<span class='po-diagraming-icons' style='font-size: 12px'>&#xe795;</span>"))})},destroy:function(){$("#canvas_container").unbind("contextmenu"),this.hide()},menuPos:{x:0,y:0,shape:null},show:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,i){var n,r,o,a,s,l,p,h,d,c,u,g,y,f,x,v;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.menuPos.x=t,this.menuPos.y=i,n=$("#designer-contextmenu"),r=Utils.getShapeByPosition(t,i,!1),n.children().hide(),n.children("li[ac=selectall]").show(),n.children(".devi-selectall").show(),n.children("li[ac=drawline]").show(),n.children("li[ac=insertimg]").show(),n.children("li[ac=zoomin]").show(),n.children("li[ac=zoomout]").show(),n.children("li[ac=zoomreset]").show(),n.children(".devi-zoom").show(),n.children("li[ac=insertTemplate]").show(),e.next=16,clipboard.get();case 16:o=e.sent,a=o.content,null==r?null!=a&&(n.children("li[ac=paste]").show(),n.children(".devi-clip").show()):(s=r.shape,this.menuPos.shape=s,n.children("li[ac=drawline]").hide(),n.children("li[ac=insertimg]").hide(),n.children("li[ac=zoomin]").hide(),n.children("li[ac=zoomout]").hide(),n.children("li[ac=zoomreset]").hide(),n.children(".devi-zoom").hide(),n.children(".devi-selectall").hide(),s.locked?(null!=a&&(n.children("li[ac=paste]").show(),n.children(".devi-clip").show()),n.children("li[ac=unlock]").show(),n.children(".devi-group").show()):$("#shape_text_edit").length>0||$("#linker_text_edit").length>0?(Utils.popEditor.close(),n.children("li[ac=cut_edit]").show(),n.children("li[ac=copy_edit]").show(),n.children("li[ac=paste_edit]").show(),n.children("li[ac=selectall_edit]").show(),n.children("li[ac=selectall]").hide(),n.children("li[ac=download_part]").hide(),n.children("li[ac=cut_edit]").menuitem("enable"),n.children("li[ac=copy_edit]").menuitem("enable"),$("#shape_text_edit").length>0?window.getSelection&&(l=window.getSelection()).rangeCount>0&&l.getRangeAt(0).collapsed&&(n.children("li[ac=cut_edit]").menuitem("disable"),n.children("li[ac=copy_edit]").menuitem("disable")):$("#linker_text_edit").length>0&&void 0!==(p=document.getElementById("linker_text_edit")).selectionStart&&p.selectionStart===p.selectionEnd&&(n.children("li[ac=cut_edit]").menuitem("disable"),n.children("li[ac=copy_edit]").menuitem("disable"))):(n.children("li[ac=cut]").show(),n.children("li[ac=copy]").show(),n.children("li[ac=duplicate]").show(),n.children("li[ac=replace]").show(),null!=a&&n.children("li[ac=paste]").show(),n.children(".devi-clip").show(),n.children("li[ac=front]").show(),n.children("li[ac=back]").show(),n.children("li[ac=forward]").show(),n.children("li[ac=backward]").show(),n.children(".devi-index").show(),n.children("li[ac=lock]").show(),n.children(".devi-group").show(),n.children("li[ac=addmyshape]").show(),n.children(".devi-shape").show(),"linker"==s.name&&n.children("li[ac=resetLinker]").show(),Designer.events.push("downloadPartShow"),h=Utils.getSelectedIds(),d=h.length,c=Utils.getSelectedLanes().length,d>=2&&(n.children("li[ac=group]").show(),c<=1&&n.children("li[ac=arrange]").show(),c<=0&&n.children("li[ac=match]").show()),1==d?(n.children("li[ac=defaultStyle]").show(),null==Model.define.defaultStyle&&null==Model.define.defaultLinkerStyle?$("#clear-default-style").hide():$("#clear-default-style").show(),"linker"!=s.name?(n.children(".devi-shape-insert").show(),s.link?n.children("li[ac=link]").find(".text").html("修改链接"):n.children("li[ac=link]").find(".text").html("插入链接"),n.children("li[ac=link]").show()):(n.children(".devi-clip").hide(),n.children(".devi-shape-insert").hide()),"linker"==s.name||"standardImage"==s.name||s.name.startsWith("chart_")||n.children("li[ac=equation]").show(),"standardImage"!=s.name&&"linker"!=s.name||n.children("li[ac=replace]").hide(),"linker"==s.name&&(u="",g="",s.to.id&&(u=Model.getShapeById(s.to.id)),s.from.id&&(g=Model.getShapeById(s.from.id)),(u&&"uml_class"==u.category&&u.attribute.linkable||g&&"uml_class"==g.category&&g.attribute.linkable)&&(Utils.isMultiplicity(s)||n.children("li[ac=multiplicity]").show(),n.children("li[ac=linkerType]").show())),n.children(".devi-shape-insert").show()):n.children("li[ac=defaultStyle]").hide(),Utils.getSelectedGroups().length>=1&&n.children("li[ac=ungroup]").show(),n.children(".devi_shape").show(),("linker"==s.name||s.textBlock&&s.textBlock.length>0)&&n.children("li[ac=edit]").show(),n.children("li[ac=delete]").show(),n.children(".devi_del").show())),y=$("#designer_canvas").position(),f=t.toScale()+n.outerWidth()-($("#designer_layout").width()-y.left),t=f>0?t-(f+10).restoreScale():t,x=i.toScale()+n.outerHeight()-($("#designer_layout").height()-y.top),i=x>0?i-(x+10).restoreScale():i,n.css({display:"block","z-index":Model.maxZIndex+7,left:t,top:i,transform:"scale("+1..restoreScale()+")",transformOrigin:"left top"}),$("#linker_text_edit").length>0&&n.css("z-index",parseInt($("#linker_text_edit").css("z-index"))+1),(v=n.find(".extend-menu")).css("left",v.parents(".po-menu").outerWidth()),$(document).bind("mousedown.ctxmenu",function(){Designer.contextMenu.hide()});case 29:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),hide:function(){$("#designer-contextmenu").hide(),$(document).unbind("mousedown.ctxmenu")},execAction:function(e){var t=e.attr("ac");if("cut"==t)clipboard.cut(null,Utils,Designer,publicCLB);else if("copy"==t)clipboard.copy(null,Utils,publicCLB);else if("paste"==t)clipboard.paste({x:this.menuPos.x,y:this.menuPos.y,Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI});else if("duplicate"==t)clipboard.duplicate({Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI,memberObj:memberObj,insert:insert,$:$});else if("front"==t)Designer.layerShapes("front");else if("back"==t)Designer.layerShapes("back");else if("forward"==t)Designer.layerShapes("forward");else if("backward"==t)Designer.layerShapes("backward");else if("lock"==t)Designer.lockShapes();else if("unlock"==t)Designer.unlockShapes();else if("group"==t)Designer.group();else if("ungroup"==t)Designer.ungroup();else if("w"==t)Designer.matchSize({w:"auto"});else if("h"==t)Designer.matchSize({h:"auto"});else if("wh"==t)Designer.matchSize({w:"auto",h:"auto"});else if("align"==t){var i=e.attr("al");Designer.alignShapes(i)}else if("dist"==t){var n=e.attr("dist");Designer.distributeShapes(n)}else if("edit"==t)Designer.op.editShapeText(this.menuPos.shape,this.menuPos);else if("delete"==t)Designer.op.removeShape();else if("selectall"==t)Designer.selectAll();else if("drawline"==t)Designer.op.changeState("creating_free_linker");else if("insertimg"==t)insert.image.init(function(e,t){UI.insertImage(e,t.width,t.height)});else if("link"==t)UI.showInsertLink();else if("replace"==t){var r=Utils.getSelectedIds();Designer.op.linkDashboard(r[0])}else if("defaultStyle"==t)Designer.events.push("setDefaultStyle",e);else if("equation"==t){var o=this.menuPos.shape;Designer.op.equation.insertLastEquation(o)}else if("zoomin"==t)Designer.zoomIn("center");else if("zoomout"==t)Designer.zoomOut("center");else if("zoomreset"==t)Designer.setZoomScale(1,"center");else if("download_part"==t)Designer.events.push("downloadPart");else if("insertTemplate"==t)window.DesignerInsertTemp&&DesignerInsertTemp.show();else if("multiplicity"==t)Designer.setLinkerMultiplicity(!0);else if("relation"==t){var a=e.attr("rel");Designer.setLinkerRelation(a)}else"resetLinker"==t&&Designer.resetLinker()}},init:function(e){this.initialize.initLayout(),this.initialize.initModel(),0==localRuntime&&this.initialize.initCanvas(),this.hotkey.init(),this.contextMenu.init(),Designer.op.init(),this.initialize.initialized=!0,Designer.events.push("initialized",e),$("#designer_layout").on("scroll",function(){$(document).trigger("mouseup.multiselect")})},op:{init:function(){var e=$("#designer_canvas"),t=$("#canvas_container");t.unbind("mousemove.operate").bind("mousemove.operate",function(i){if(null==Designer.op.state){Designer.op.destroy();var n=Utils.getRelativePos(i.pageX,i.pageY,e),r=Utils.getShapeByPosition(n.x,n.y);if($(i.target).hasClass("shape_create_linker"))Designer.op.shapeLinkable(null,null,i.target);else if(null!=r){if("dataAttribute"==r.type)Designer.op.linkClickable(r.attribute.value,n);else if("linker"==r.type){t.css("cursor","pointer"),Designer.op.shapeSelectable(r.shape);var o=r.shape,a=r.pointIndex;if("broken"==o.linkerType&&a>0&&a<=o.points.length+1&&(null!=o.from.id||null!=o.to.id)||a>1&&a<=o.points.length&&null==o.from.id&&null==o.to.id){var s=r.pointPos;Designer.op.brokenLinkerChangable(o,a-1,s)}else null==o.from.id&&null==o.to.id?(t.css("cursor","move"),Designer.op.shapeDraggable()):o.group&&(t.css("cursor","move"),Designer.op.shapeDraggable());Designer.op.linkerEditable(o)}else if("linker_point"==r.type)t.css("cursor","move"),Designer.op.shapeSelectable(r.shape),r.shape.group?Designer.op.shapeDraggable():Designer.op.linkerDraggable(r.shape,r.point),Designer.op.linkerEditable(r.shape);else if("linker_text"==r.type){t.css("cursor","text"),Designer.op.shapeSelectable(r.shape);var l=r.textIndex;Designer.op.linkerEditable(r.shape,l)}else"shape"==r.type?r.shape.locked?(t.css("cursor","default"),Designer.op.shapeSelectable(r.shape)):(Utils.selectCallback?t.css("cursor","url("+staticBasePath+"/assets/images/designer/brush.svg) 6 6,auto"):t.css("cursor","move"),Designer.op.shapeSelectable(r.shape),Designer.op.shapeEditable(r.shape),Designer.op.shapeDraggable(),r.shape.link&&Designer.op.linkIconShow(r.shape),"grid"==r.shape.category&&Designer.events.push("gridSelect",r.shape),Designer.events.push("renderShapeDom",r)):(t.css("cursor","crosshair"),Designer.op.shapeLinkable(r.shape,r.linkPoint),Utils.showLinkerFocusPoint(r.linkPoint)),r.shape.parent?Utils.showAnchors(Model.getShapeById(r.shape.parent)):Utils.showAnchors(r.shape);"linker"!=r.type&&Designer.op.hideLinkCenterPoint()}else Utils.selectCallback?t.css("cursor","url("+staticBasePath+"/assets/images/designer/brush.svg) 6 6,auto"):t.css("cursor","default"),Designer.op.shapeMultiSelectable(),Designer.op.hideLinkCenterPoint()}})},cancel:function(){$("#canvas_container").unbind("mousemove.operate").css("cursor","default"),this.destroy()},destroy:function(){$("#designer_canvas").unbind("mousedown.drag").unbind("dblclick.edit").unbind("mousedown.draglinker").unbind("mousedown.select").unbind("mousedown.brokenLinker").unbind("dblclick.edit_linker"),$("#canvas_container").unbind("mousedown.link").unbind("mousedown.create_text").unbind("mousedown.drag_canvas"),$("#designer_layout").unbind("mousedown.multiselect"),$("#designer_layout").unbind("click.unbrush"),Utils.hideAnchors(),$("#link_spot").hide(),Utils.hideLinkerFocusPoint()},state:null,changeState:function(e){this.state=e,"creating_free_text"==e?(this.destroy(),$("#canvas_container").css("cursor","crosshair"),this.textCreatable()):"creating_free_linker"==e?(this.destroy(),$("#canvas_container").css("cursor","crosshair"),this.shapeLinkable()):"drag_canvas"==e?(this.destroy(),this.canvasDraggable()):"changing_curve"==e&&this.destroy()},resetState:function(){this.state=null,$("#canvas_container").css("cursor","default")},shapeUnselectId:"",shapeSelectable:function(e){var t=this,i=$("#designer_canvas");i.bind("mousedown.select",function(n){Designer.op.changeState("seelcting_shapes");var r=e.id;if(t.shapeUnselectId="",n.ctrlKey||n.metaKey){var o=Utils.getSelectedIds();Utils.isSelected(r)?(o.length>1||"grid"!=e.category)&&(Utils.removeFromArray(o,r),Utils.unselect(),t.shapeUnselectId=r):(o.push(r),Utils.unselect()),o.length>0&&Utils.selectShape(o)}else Utils.selectIds.indexOf(r)<0&&(Utils.unselect(),Utils.selectShape(r));$(document).bind("mouseup.select",function(){Designer.op.resetState(),i.unbind("mousedown.select"),$(document).unbind("mouseup.select")})})},isMetaKey:!1,shapeDraggable:function(){var e=$("#designer_canvas"),t=$("#canvas_container"),i=!1,n=this;e.bind("mousedown.drag",function(r){Utils.hideLinkerCursor(),Utils.hideLinkerControls(),Designer.op.changeState("dragging");var o=Utils.getSelected(),a=Utils.getRelativePos(r.pageX,r.pageY,e),s=!0;(1==o.length&&"linker"==o[0].name||1==o.length&&"linker"!=o[0].name&&o[0].props.angle)&&(s=!1);var l=null;s&&(l=Utils.getShapesBounding(o));var p=Utils.getFamilyShapes(o);o=o.concat(p);var h=Utils.getContainedShapes(o);o=o.concat(h);var d=Utils.getAttachedShapes(o);o=o.concat(d);var c=Utils.getCollapsedShapes(o);o=o.concat(c);var u=[],g=[];if(s){for(var y=0;y<o.length;y++){"linker"==(S=o[y]).name&&(S.from.id&&u.indexOf(S.from.id)<0&&u.push(S.from.id),S.to.id&&u.indexOf(S.to.id)<0&&u.push(S.to.id)),u.indexOf(S.id)<0&&u.push(S.id)}for(y=Model.orderList.length-1;y>=0;y--){var f=Model.orderList[y].id;if((!(S=Model.getShapeById(f)).attribute||!S.attribute.collapseBy)&&!("linker"==S.name||u.indexOf(f)>=0||S.parent)){var x=Utils.getControlBox([f]);x.id=f,g.push(x)}}}var v=o;0==o.length&&e.unbind("mousedown.drag");var m=Utils.getOutlinkers(o);o=o.concat(m);for(var b=[],w=0;w<o.length;w++){var S=o[w];b.push(S.id)}Model.define.page.width.toScale(),Model.define.page.height.toScale();Designer.op.initScrollPos();var k,M=r.pageX,_=r.pageY,D=0,P=0,U=Utils.copyArray(o),L=[],I=r.metaKey||r.ctrlKey,C=!1;t.bind("mousemove.drag",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function t(r){var p,h,d,c,y,f,x,m,w,S,U,B,T,z,O,A;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!C&&0!=Utils.getSelectedIds().length){t.next=2;break}return t.abrupt("return");case 2:if(Designer.op.linkIconHide(),UI.hideShapeOptions(),$("#shape_controls").addClass("hide_shape_controller"),D=r.pageX-M,P=r.pageY-_,p=Utils.getRelativePos(r.pageX,r.pageY,e),h={x:p.x-a.x,y:p.y-a.y},!I||!(Math.abs(h.x)>1||Math.abs(h.y)>1)){t.next=22;break}if(0!=i||0!=Utils.gridSelectObj.indexs.length){t.next=22;break}if(i=!0,C=!0,(d=n.shapeUnselectId)&&((c=Utils.getSelectedIds()).push(d),Utils.unselect(),Utils.selectShape(c)),y=clipboard.getCopyData(null,Utils,publicCLB),Utils.getShapesBounding(o),t.t0=y,!t.t0){t.next=20;break}return t.next=20,clipboard.pasteDiagram({content:y,Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB});case 20:o=Utils.getSelected(),C=!1;case 22:if(f=null,s&&((x=Utils.copy(l)).x+=h.x,x.y+=h.y,m=Designer.op.snapLine(x,u,null,g),h={x:x.x-l.x,y:x.y-l.y},p={x:a.x+h.x,y:a.y+h.y},l.x+=h.x,l.y+=h.y,1==v.length&&"boundaryEvent"==v[0].groupName&&(m.attach?v[0].attachTo=m.attach.id:delete o[0].attachTo),m.container&&(f=m.container)),0!=h.x||0!=h.y){t.next=26;break}return t.abrupt("return");case 26:w=0;case 27:if(!(w<o.length)){t.next=41;break}if("linker"!=(S=o[w]).name){t.next=34;break}return 1==o.length?k=Designer.op.moveLinkerFocus(S):o.length>=2&&(U=Utils.getSelectedCharts().length,1==Utils.getSelectedShapeIds().length&&1==U&&UI.renderSubMenuPos({top:23})),t.abrupt("continue",38);case 34:if(!(S.container&&b.indexOf(S.container)>=0||S.parent)){t.next=36;break}return t.abrupt("continue",38);case 36:Utils.showAnchors(S),f?S.container=f.id:delete S.container;case 38:w++,t.next=27;break;case 41:if(Designer.op.moveShape(o,h),Utils.removeCreateLinker(),a=p,Designer.op.isScroll(r.pageX,r.pageY),Designer.events.push("changeLinkers",o),1==Utils.getSelected().length&&"linker"!=Utils.getSelected()[0].name)for(L=Utils.getShapeAnchorInLinker(Utils.getSelected()[0]),Designer.op.hideLinkPoint(),B=0;B<L.length;B++)for(T=L[B],z=0;z<T.anchors.length;z++)O=T.anchors[z],Designer.op.showLinkPoint(O);Utils.hideLinkerEndsPoint(),A=Utils.getSelectedShapeIds(),1==A.length&&S.name.startsWith("chart_")?UI.renderSubMenuPos({top:23}):S&&"linker"!==S.name&&$(".pop-sub-editor").hide();case 51:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),$(document).unbind("mouseup.drop").bind("mouseup.drop",function(e){if($(document).unbind("mouseup.drop"),0!=D||0!=P){var t=$(e.target);if(t.parents(".panel_myshape_container").length>0||"add_myshape_icon"==t.attr("id")||t.parents(".panel_team_container").length>0){for(var i=0;i<U.length;i++){var n=U[i];Model.define.elements[n.id]=n,Designer.painter.renderShape(n)}return Utils.removeCreateLinker(),void setTimeout(function(){Utils.selectShape(b)},0)}if(Utils.shapesToRound(o),k)Utils.shapesToRound([k]),Designer.painter.renderLinker(k),Model.updateMulti([k]);else if(L.length){MessageSource.beginBatch(),Model.updateMulti(o);for(i=0;i<L.length;i++){var r=L[i],a=r.linker;if("line"==r.type){Utils.copy(a);var s=Utils.copy(a);if(s.id=Utils.newId(),1==r.anchors.length){var l=r.anchors[0],p=Utils.getPointAngle(o[0].id,l.x,l.y,7);a.to={id:o[0].id,x:l.x,y:l.y,angle:p},s.from={id:o[0].id,x:l.x,y:l.y,angle:p}}else if(2==r.anchors.length){var h,d,c=r.anchors[0],u=r.anchors[1];Utils.measureDistance(a.from,c)<Utils.measureDistance(a.from,u)?(h=c,d=u):(h=u,d=c);p=Utils.getPointAngle(o[0].id,h.x,h.y,7);a.to={id:o[0].id,x:h.x,y:h.y,angle:p},p=Utils.getPointAngle(o[0].id,d.x,d.y,7),s.from={id:o[0].id,x:d.x,y:d.y,angle:p}}r.anchors.length<=2&&(a=Designer.op.beautifyLinkerFocus(a,!0),s=Designer.op.beautifyLinkerFocus(s,!0),Designer.painter.renderLinker(a,!0),Model.update(a),Designer.painter.renderLinker(s,!0),s.props.zindex=Model.maxZIndex+1,Model.add(s),Designer.events.push("linkerCreated",s))}else{l=r.anchors[0],p=Utils.getPointAngle(o[0].id,l.x,l.y,7);if(o[0].id&&o[0].name.startsWith("chart_")){var g=o[0].props;p=l.x==g.x+g.w?Math.PI:l.y==g.y?.5*Math.PI:l.y==g.y+g.h?1.5*Math.PI:0}"from"==r.type?a.from={id:o[0].id,x:l.x,y:l.y,angle:p}:a.to={id:o[0].id,x:l.x,y:l.y,angle:p},a=Designer.op.beautifyLinkerFocus(a,r.type),Designer.painter.renderLinker(a,r.type),Model.update(a)}}MessageSource.commit()}else{for(var y=0;y<o.length;y++){var f=o[y];"linker"==f.name&&"broken"==f.linkerType&&(f.points=Utils.margeLinker(f))}Model.updateMulti(o)}b=Utils.getSelectedIds();var x=Utils.getControlBox(b);Designer.op.changeCanvas(x)}}),$(document).bind("mouseup.drag",function(){Designer.op.isMetaKey=!1,i=!1,UI.showShapeOptions(),Designer.op.resetState(),t.unbind("mousemove.drag"),e.unbind("mousedown.drag"),$(document).unbind("mouseup.drag"),Designer.op.hideTip(),Designer.op.hideSnapLine(),Utils.showLinkerCursor(),Utils.showLinkerControls(),Utils.showLinkerEndsPoint();var n=Utils.getSelected();1==n.length&&(Utils.removeAnchors(),Utils.showCreateLinkerMulti(n)),Designer.op.stopScroll(),Designer.op.hideLinkPoint(),Utils.isSelected(S.id)&&Utils.selectIds.length,$("#shape_controls").removeClass("hide_shape_controller"),Designer.events.push("changeLinkers",o)})})},changeSpacing:function(e,t){var i=Utils.getSelectedIds(),n=Utils.getSelected();Utils.hideLinkerCursor();var r=$("#canvas_container"),o=$("#designer_canvas"),a=Utils.getControlBox(i),s=e.attr("resizeDir"),l={};function p(e,t){if(null==e.id)return t?{type:"box",x:(e.x-a.x)/a.w,y:(e.y-a.y)/a.h}:{type:"fixed"};if(Utils.isSelected(e.id)){var i=Model.getShapeById(e.id),n={x:i.props.x+i.props.w/2,y:i.props.y+i.props.h/2},r=Utils.getRotated(n,e,-i.props.angle);return{type:"shape",x:(r.x-i.props.x)/i.props.w,y:(r.y-i.props.y)/i.props.h}}return{type:"fixed"}}s.indexOf("l")>=0?l.x=a.x+a.w:s.indexOf("r")>=0?l.x=a.x:l.x=a.x+a.w/2,s.indexOf("t")>=0?l.y=a.y+a.h:s.indexOf("b")>=0?l.y=a.y:l.y=a.y+a.h/2;var h=[],d={},c=[],u=Utils.getAttachedShapes(n);n=n.concat(u);for(var g=[],y={w:20,h:20},f=0;f<n.length;f++){var x=n[f];if(g.push(x.id),x.parent&&g.push(x.parent),"linker"==x.name)-1==c.indexOf(x.id)&&c.push(x.id);else{h.push(x),x.props.w>y.w&&(y.w=x.props.w),x.props.h>y.h&&(y.h=x.props.h),x.attachTo&&!Utils.isSelected(x.id)?d[x.id]={type:"attached",x:(x.props.x+x.props.w/2-a.x)/a.w,y:(x.props.y+x.props.h/2-a.y)/a.h}:d[x.id]={x:(x.props.x-a.x)/a.w,y:(x.props.y-a.y)/a.h};var v=Model.getShapeLinkers(x.id);if(v&&v.length>0)for(var m=0;m<v.length;m++){var b=v[m];-1==c.indexOf(b)&&c.push(b)}}}for(f=0;f<c.length;f++){b=c[f];var w=Model.getShapeById(b);h.push(w);n=Utils.isSelected(b);d[w.id]={from:p(w.from,n),to:p(w.to,n)}}var S=e.css("cursor");r.css("cursor",S);var k=[];Designer.events.push("beforeResize",{minSize:y,shapes:h,dir:s}),r.bind("mousemove.resize",function(e){UI.hideShapeOptions(),k=[];var t=Utils.getRelativePos(e.pageX,e.pageY,o),n=Utils.copy(a);s.indexOf("r")>=0?n.w=t.x-l.x:s.indexOf("l")>=0&&(n.w=l.x-t.x),s.indexOf("b")>=0?n.h=t.y-l.y:s.indexOf("t")>=0&&(n.h=l.y-t.y),n.w<y.w&&(n.w=y.w),n.h<y.h&&(n.h=y.h),s.indexOf("l")>=0&&(n.x=l.x-n.w),s.indexOf("t")>=0&&(n.y=l.y-n.h),Utils.removeAnchors();for(var r=0;r<h.length;r++){var p=h[r],c=d[p.id];if("linker"!=p.name)"attached"==c.type?(p.props.x=n.x+n.w*c.x-p.props.w/2,p.props.y=n.y+n.h*c.y-p.props.h/2):(p.props.x=n.x+n.w*c.x,p.props.y=n.y+n.h*c.y,Designer.painter.renderShape(p),Utils.showAnchors(p));else{if("box"==c.from.type)p.from.x=n.x+n.w*c.from.x,p.from.y=n.y+n.h*c.from.y;else if("shape"==c.from.type){var u={x:(x=Model.getShapeById(p.from.id)).props.x+x.props.w*c.from.x,y:x.props.y+x.props.h*c.from.y},g={x:x.props.x+x.props.w/2,y:x.props.y+x.props.h/2},f=Utils.getRotated(g,u,x.props.angle);p.from.x=f.x,p.from.y=f.y}if("box"==c.to.type)p.to.x=n.x+n.w*c.to.x,p.to.y=n.y+n.h*c.to.y;else if("shape"==c.to.type){var x;u={x:(x=Model.getShapeById(p.to.id)).props.x+x.props.w*c.to.x,y:x.props.y+x.props.h*c.to.y},g={x:x.props.x+x.props.w/2,y:x.props.y+x.props.h/2},f=Utils.getRotated(g,u,x.props.angle);p.to.x=f.x,p.to.y=f.y}Designer.painter.renderLinker(p,!0)}}Designer.painter.drawControls(i);var v="W: "+Math.round(n.w)+"&nbsp;&nbsp;H: "+Math.round(n.h);n.x!=a.x&&(v="X: "+Math.round(n.x)+"&nbsp;&nbsp;Y: "+Math.round(n.y)+"<br/>"+v),Designer.op.showTip(v),$(document).unbind("mouseup.resize_ok").bind("mouseup.resize_ok",function(){if(k.length>0&&(h=h.concat(k)),s.indexOf("t")>=0||s.indexOf("l")>=0){for(var e=0;e<h.length;e++){var t=h[e];if(t.attribute&&t.attribute.collapsed){var n=Utils.getCollapsedShapesById(t.id);if(n.length>0){var r=Utils.getOutlinkers(n);n=n.concat(r);var o=Model.getPersistenceById(t.id),a=t.props.x-o.props.x,l=t.props.y-o.props.y;Designer.op.moveShape(n,{x:a,y:l},!0),h=h.concat(n)}}}Designer.painter.drawControls(i)}Model.updateMulti(h),$(document).unbind("mouseup.resize_ok")})}),$(document).bind("mouseup.resize",function(){UI.showShapeOptions(),r.css("cursor","default"),Designer.op.resetState(),r.unbind("mousemove.resize"),$(document).unbind("mouseup.resize"),Designer.op.hideTip(),Utils.showLinkerCursor(),Designer.op.hideSnapLine()})},shapeResizable:function(){$(".shape_controller").bind("mousedown",function(e){e.stopPropagation(),$(this).addClass("checked"),Designer.op.changeState("resizing");var t=Utils.getSelectedIds(),i=Utils.getSelected();$("#shape_text_edit").on("blur"),Utils.hideLinkerCursor(),Utils.unselectGrid(),Utils.hideLinkerFocusPoint();var n,r=$("#canvas_container"),o=$("#designer_canvas"),a=$(this);if(1==t.length){var s=Model.getShapeById(t[0]);n=Utils.copy(s.props)}else(n=Utils.getControlBox(t)).angle=0;var l={x:n.x+n.w/2,y:n.y+n.h/2},p=a.attr("resizeDir"),h={};function d(e,t){if(null==e.id)return t?{type:"box",x:(e.x-n.x)/n.w,y:(e.y-n.y)/n.h}:{type:"fixed"};if(Utils.isSelected(e.id)){var i=Model.getShapeById(e.id),r=i.attribute.fixedLinker,o={x:i.props.x+i.props.w/2,y:i.props.y+i.props.h/2},a=Utils.getRotated(o,e,-i.props.angle);return"sequenceActivation"!=i.name&&!r||t||0!=i.props.angle?{type:"shape",x:(a.x-i.props.x)/i.props.w,y:(a.y-i.props.y)/i.props.h}:{type:"fixed_linker",x:(a.x-i.props.x)/i.props.w,y:(a.y-i.props.y)/i.props.h}}return{type:"fixed"}}p.indexOf("l")>=0?h.x=n.x+n.w:p.indexOf("r")>=0?h.x=n.x:h.x=n.x+n.w/2,p.indexOf("t")>=0?h.y=n.y+n.h:p.indexOf("b")>=0?h.y=n.y:h.y=n.y+n.h/2,h=Utils.getRotated(l,h,n.angle);var c=[],u={},g=[],y=Utils.getAttachedShapes(i);i=i.concat(y);for(var f=[],x=0;x<i.length;x++){s=i[x];if(f.push(s.id),s.parent&&f.push(s.parent),"linker"==s.name)-1==g.indexOf(s.id)&&g.push(s.id);else{c.push(s),s.attachTo&&!Utils.isSelected(s.id)?u[s.id]={type:"attached",x:(s.props.x+s.props.w/2-n.x)/n.w,y:(s.props.y+s.props.h/2-n.y)/n.h}:u[s.id]={x:(s.props.x-n.x)/n.w,y:(s.props.y-n.y)/n.h,w:s.props.w/n.w,h:s.props.h/n.h};var v=Model.getShapeLinkers(s.id);if(v&&v.length>0)for(var m=0;m<v.length;m++){var b=v[m];-1==g.indexOf(b)&&g.push(b)}}}for(x=0;x<g.length;x++){b=g[x];var w=Model.getShapeById(b);c.push(w);var S=Utils.isSelected(b),k=d(w.from,S),M=d(w.to,S);u[w.id]={from:k,to:M};var _="shape"==k.type&&Math.round(w.from.angle/(2*Math.PI)*360)%90!=0,D="shape"==M.type&&Math.round(w.to.angle/(2*Math.PI)*360)%90!=0;if(-1===k.type.indexOf("fixed")&&-1===M.type.indexOf("fixed")&&!_&&!D){for(var P=[],U=0;U<w.points.length;U++)P.push(d(w.points[U],!0));u[w.id].points=P}}var L=a.css("cursor");r.css("cursor",L);var I=[],C={w:20,h:20};1==c.length&&c[0].name.indexOf("Separator")>-1&&(C={w:60,h:60}),Designer.events.push("beforeResize",{minSize:C,shapes:i,dir:p}),r.bind("mousemove.resize",function(e){if(0!=Utils.getSelectedIds().length){UI.hideShapeOptions(),I=[];var i=Utils.getRelativePos(e.pageX,e.pageY,o),r=Utils.getRotated(h,i,-n.angle),a=Utils.copy(n);p.indexOf("r")>=0?a.w=r.x-h.x:p.indexOf("l")>=0&&(a.w=h.x-r.x),p.indexOf("b")>=0?a.h=r.y-h.y:p.indexOf("t")>=0&&(a.h=h.y-r.y),(e.ctrlKey||e.shiftKey)&&2==p.length?n.w>=n.h?(a.h=n.h/n.w*a.w,a.h<C.h&&(a.h=C.h,a.w=n.w/n.h*a.h)):(a.w=n.w/n.h*a.h,a.w<C.w&&(a.w=C.w,a.h=n.h/n.w*a.w)):(a.w<C.w&&(a.w=C.w),a.h<C.h&&(a.h=C.h));var s={};p.indexOf("r")>=0?s.x=h.x+a.w:p.indexOf("l")>=0?s.x=h.x-a.w:s.x=h.x,p.indexOf("b")>=0?s.y=h.y+a.h:p.indexOf("t")>=0?s.y=h.y-a.h:s.y=h.y;var l=Utils.getRotated(h,s,n.angle),d={x:.5*h.x+.5*l.x,y:.5*h.y+.5*l.y},g=Utils.getRotated(d,h,-n.angle);if(p.indexOf("r")>=0?a.x=g.x:p.indexOf("l")>=0?a.x=g.x-a.w:a.x=g.x-a.w/2,p.indexOf("b")>=0?a.y=g.y:p.indexOf("t")>=0?a.y=g.y-a.h:a.y=g.y-a.h/2,0==a.angle)c[0],Designer.op.snapResizeLine(a,f,p);Utils.removeAnchors(),Utils.removeCreateLinker();for(var y=0;y<c.length;y++){var x=c[y],v=u[x.id],m="";if("linker"==x.name){if("box"==v.from.type)x.from.x=a.x+a.w*v.from.x,x.from.y=a.y+a.h*v.from.y,m="from";else if("shape"==v.from.type){var b={x:(M=Model.getShapeById(x.from.id)).props.x+M.props.w*v.from.x,y:M.props.y+M.props.h*v.from.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2},S=Utils.getRotated(w,b,M.props.angle);x.from.x=S.x,x.from.y=S.y,m="from"}else if("fixed_linker"==v.from.type){b={x:(M=Model.getShapeById(x.from.id)).props.x+M.props.w*v.from.x,y:M.props.y+M.props.h*v.from.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2};var k=Utils.getRotated(w,x.from,-M.props.angle);(v.from.x<.01||v.from.x>.99)&&(k.y>M.props.y+M.props.h?(k.y=M.props.y+M.props.h,m="from"):k.y<M.props.y?(k.y=M.props.y,m="from"):k.x=b.x),(v.from.y<.01||v.from.y>.99)&&(k.x>M.props.x+M.props.w?(k.x=M.props.x+M.props.w,m="from"):k.x<M.props.x?(k.x=M.props.x,m="from"):k.y=b.y);S=Utils.getRotated(w,k,M.props.angle);x.from.x=S.x,x.from.y=S.y}if(v.points||Designer.painter.renderLinker(x,m),"box"==v.to.type)x.to.x=a.x+a.w*v.to.x,x.to.y=a.y+a.h*v.to.y,m="to";else if("shape"==v.to.type){b={x:(M=Model.getShapeById(x.to.id)).props.x+M.props.w*v.to.x,y:M.props.y+M.props.h*v.to.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2},S=Utils.getRotated(w,b,M.props.angle);x.to.x=S.x,x.to.y=S.y,m="to"}else if("fixed_linker"==v.to.type){b={x:(M=Model.getShapeById(x.to.id)).props.x+M.props.w*v.to.x,y:M.props.y+M.props.h*v.to.y},w={x:M.props.x+M.props.w/2,y:M.props.y+M.props.h/2};var M,_=Utils.getRotated(w,x.to,-M.props.angle);(v.to.x<.01||v.to.x>.99)&&(_.y>M.props.y+M.props.h?(_.y=M.props.y+M.props.h,m="to"):_.y<M.props.y?(_.y=M.props.y,m="to"):_.x=b.x),(v.to.y<.01||v.to.y>.99)&&(_.x>M.props.x+M.props.w?(_.x=M.props.x+M.props.w,m="to"):_.x<M.props.x?(_.x=M.props.x,m="to"):_.y=b.y);S=Utils.getRotated(w,_,M.props.angle);x.to.x=S.x,x.to.y=S.y}if(v.points){for(var D=0;D<v.points.length;D++){var P=x.points[D],U=v.points[D];P.x=a.x+a.w*U.x,P.y=a.y+a.h*U.y}Designer.painter.renderLinker(x)}else Designer.painter.renderLinker(x,m)}else{if("attached"==v.type)x.props.x=a.x+a.w*v.x-x.props.w/2,x.props.y=a.y+a.h*v.y-x.props.h/2;else{var L=Utils.copy(x.props);x.props.x=a.x+a.w*v.x,x.props.y=a.y+a.h*v.y,x.props.w=a.w*v.w,x.props.h=a.h*v.h;var B=Model.getShapeById(x.id).props;B.x=a.x+a.w*v.x,B.y=a.y+a.h*v.y,B.w=a.w*v.w,B.h=a.h*v.h;var T={x:x.props.x-L.x,y:x.props.y-L.y,w:x.props.w-L.w,h:x.props.h-L.h},z={shape:x,offset:T,dir:p},O=Designer.events.push("resizing",z);O&&(I=I.concat(O))}Designer.painter.renderShape(x),1==t.length?Utils.showCreateLinker(x):Utils.showAnchors(x)}}Designer.painter.drawControls(t);var A="W: "+Math.round(a.w)+"&nbsp;&nbsp;H: "+Math.round(a.h);a.x!=n.x&&(A="X: "+Math.round(a.x)+"&nbsp;&nbsp;Y: "+Math.round(a.y)+"<br/>"+A),Designer.op.showTip(A),$(document).unbind("mouseup.resize_ok").bind("mouseup.resize_ok",function(){if(I.length>0&&(c=c.concat(I)),p.indexOf("t")>=0||p.indexOf("l")>=0){for(var e=0;e<c.length;e++){if((s=c[e]).attribute&&s.attribute.collapsed){var i=Utils.getCollapsedShapesById(s.id);if(i.length>0){var n=Utils.getOutlinkers(i);i=i.concat(n);var r=Model.getPersistenceById(s.id),o=s.props.x-r.props.x,a=s.props.y-r.props.y;Designer.op.moveShape(i,{x:o,y:a},!0),c=c.concat(i)}}}Designer.painter.drawControls(t)}for(e=0;e<c.length;e++){var s;"linker"==(s=c[e]).name&&"broken"==s.linkerType&&(s.points=Utils.margeLinker(s))}Utils.shapesToRound(c),!x||"verticalPool"!=x.name&&"horizontalPool"!=x.name||Utils.beautifyLane(c),Model.updateMulti(c),Designer.events.push("changeLinkers",c),$(document).unbind("mouseup.resize_ok");var l=Utils.getControlBox(t);Designer.op.changeCanvas(l)});var R=Utils.getSelectedCharts().length;1!=Utils.getSelectedShapeIds().length||1!=R?$(".pop-sub-editor").hide():UI.renderSubMenuPos({top:23})}}),$(document).bind("mouseup.resize",function(){UI.showShapeOptions(),r.css("cursor","default"),$(".shape_controller").removeClass("checked"),Designer.op.resetState(),r.unbind("mousemove.resize"),$(document).unbind("mouseup.resize"),Designer.op.hideTip(),Utils.showLinkerCursor(),Designer.op.hideSnapLine()})})},shapeRotatable:function(){$(".shape_rotater").bind("mousemove",function(e){var t=$(this);e.pageX,t.offset().left,e.pageY,t.offset().top;t.unbind("mousedown"),t.bind("mousedown",function(e){t.addClass("rotate_enable"),$("#canvas_container").addClass("rotate_enable"),Utils.hideLinkerCursor(),Utils.unselectGrid(),$("#shape_text_edit").length&&$("#shape_text_edit").trigger("blur"),Utils.removeCreateLinker(),e.stopPropagation(),Designer.op.changeState("rotating");var i,n,r=Utils.getSelectedIds();if(1==r.length){var o=Model.getShapeById(r[0]);i=o.props,n=o.props.angle}else i=Utils.getControlBox(r),n=0;var a={x:i.x+i.w/2,y:i.y+i.h/2},s=$("#designer_canvas"),l=Utils.getSelected(),p=Utils.getAttachedShapes(l);l=l.concat(p);var h=Utils.getContainedShapes(l);l=l.concat(h);var d=Utils.getOutlinkers(l);l=l.concat(d);var c=n;$(document).bind("mousemove.rotate",function(e){UI.hideShapeOptions();var t=Utils.getRelativePos(e.pageX,e.pageY,s),o=Math.atan(Math.abs(t.x-a.x)/Math.abs(a.y-t.y));t.x>=a.x&&t.y>=a.y?o=Math.PI-o:t.x<=a.x&&t.y>=a.y?o=Math.PI+o:t.x<=a.x&&t.y<=a.y&&(o=2*Math.PI-o),o+=2*Math.PI-Math.atan(i.w/i.h),o%=2*Math.PI;var p=Math.PI/36,h=Math.round(o/p)%72;if((o=p*h)!=c){c=o,Designer.op.showRotateTip(5*h%360),Designer.painter.rotateControls(i,o),Utils.removeAnchors();for(var d=o-n,u=0;u<l.length;u++){if("linker"!=(m=l[u]).name){var g=Model.getPersistenceById(m.id);m.props.angle=Math.abs((d+g.props.angle)%(2*Math.PI));var y={x:g.props.x+g.props.w/2,y:g.props.y+g.props.h/2},f=Utils.getRotated(a,y,d);if(m.props.x=f.x-m.props.w/2,m.props.y=f.y-m.props.h/2,m.name.startsWith("chart_")){var x=document.getElementById(m.id),v=180*m.props.angle/Math.PI;x.style.transform="rotate("+v+"deg)",x.children().remove(),Designer.painter.drawChart(x,m,"canvas")}else Designer.painter.renderShape(m);r.length>1&&Utils.showAnchors(m)}}for(u=0;u<l.length;u++){var m;if("linker"==(m=l[u]).name){g=Model.getPersistenceById(m.id);if(Utils.isSelected(m.id)&&null==m.from.id||Utils.isSelected(m.from.id)){var b=Utils.getRotated(a,g.from,d);m.from.x=b.x,m.from.y=b.y,null!=m.from.angle&&(Utils.isSelected(m.from.id)?m.from.angle=Utils.getPointAngle(m.from.id,b.x,b.y,7):m.from.angle=Math.abs((g.from.angle+d)%(2*Math.PI))),!0,Designer.painter.renderLinker(m,"from")}if(Utils.isSelected(m.id)&&null==m.to.id||Utils.isSelected(m.to.id)){b=Utils.getRotated(a,g.to,d);m.to.x=b.x,m.to.y=b.y,null!=m.to.angle&&(Utils.isSelected(m.to.id)?m.to.angle=Utils.getPointAngle(m.to.id,b.x,b.y,7):m.to.angle=Math.abs((g.to.angle+d)%(2*Math.PI))),!0,Designer.painter.renderLinker(m,"to")}}}}}).bind("mouseup.rotate",function(){t.removeClass("rotate_enable"),$("#canvas_container").removeClass("rotate_enable"),UI.showShapeOptions(),$(document).unbind("mousemove.rotate").unbind("mouseup.rotate"),Designer.op.resetState(),Model.updateMulti(l),Designer.painter.drawControls(r),Designer.op.hideTip(),Utils.showLinkerCursor(),1==l.length&&Utils.showCreateLinkerMulti(l),Designer.events.push("changeLinkers",l)})})})},groupShapeChangable:function(){$(".change_shape_icon").bind("mousedown",function(e){e.stopPropagation();var t=Utils.getSelected()[0],i=t.groupName,n=$(this).parent(),r=n.position(),o=r.left+n.width(),a=r.top+n.height()+10;Designer.op.groupDashboard(i,o,a,function(e){if(t.name!=e){var i=Designer.events.push("shapeChanged",{shape:t,name:e});Model.changeShape(t,e);var n=[t];i&&i.length>0&&(n=n.concat(i)),Model.updateMulti(n)}})})},shapeMultiSelectable:function(){var e=$("#designer_canvas"),t=$("#designer_layout"),i=$("#canvas_container");t.off("click.unbrush").on("click.unbrush",function(e){Designer.events.push("useBrush","unbrush")}),t.off("mousedown.multiselect").on("mousedown.multiselect",function(n){(new Date).getTime();var r=null,o={};if(n.ctrlKey||Utils.unselect(),!((n.target.classList+"").indexOf("designer-layout")>=0)){var a=Utils.getRelativePos(n.pageX,n.pageY,e);Designer.op.changeState("multi_selecting"),Designer.op.initScrollPos(),i.off("mousemove.multiselect").on("mousemove.multiselect",function(t){null==r&&(r=$("<div id='selecting_box'></div>").appendTo(e));var i=Utils.getRelativePos(t.pageX,t.pageY,e);o={"z-index":Model.orderList.length,left:i.x,top:i.y,transform:"translateZ(0)"},i.x>a.x&&(o.left=a.x),i.y>a.y&&(o.top=a.y),o.width=Math.abs(i.x-a.x),o.height=Math.abs(i.y-a.y),r.css(o),Designer.op.isScroll(t.pageX,t.pageY)}),$(document).off("mouseup.multiselected").on("mouseup.multiselected",function(e){if(null!=r){var t={x:o.left,y:o.top,w:o.width,h:o.height},n=window.authObj&&authObj.shapeSelectPart,a=Utils.getShapesByRange(t,n);if(e.ctrlKey){var s=Utils.getSelectedIds();Utils.mergeArray(a,s)}Utils.unselect(),Utils.selectShape(a),Utils.isRangeSelect=!0,r.remove()}Designer.op.resetState(),$(document).off("mouseup.multiselected"),i.off("mousemove.multiselect"),Designer.op.stopScroll()}),t.off("mousedown.multiselect")}})},shapeEditable:function(e){var t=$("#designer_canvas");t.unbind("dblclick.edit").bind("dblclick.edit",function(i){if(t.unbind("dblclick.edit"),e.name.startsWith("chart_"))Designer.painter.createPanel();else{var n=Utils.getRelativePos(i.pageX,i.pageY,t);Utils.unselectGrid(),Designer.op.editShapeText(e,n),Designer.events.push("useBrush","unbrush")}})},editShapeText:function(e,t,i){if("linker"!=e.name){if(e.textBlock&&0!=e.textBlock.length){var n=e.getTextBlock();if("grid"==e.category&&e.merge)for(var r=e.merge||[],o=0;o<r.length;o++){var a=r[o],s=a[0],l=a[a.length-1];n[s].position.w=n[l].position.w+n[l].position.x-n[s].position.x,n[s].position.h=n[l].position.h+n[l].position.y-n[s].position.y;for(var p=1;p<a.length;p++)n[a[p]].jump=!0}var h=0;if(t){if(0!=e.props.angle){var d={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2};t=Utils.getRotated(d,t,-e.props.angle)}var c=t.x-e.props.x,u=t.y-e.props.y;for(o=0;o<n.length;o++){var g=n[o];if(!g.jump&&Utils.pointInRect(c,u,g.position)){h=o;break}}}i&&(h=i),Designer.contextMenu.hide();var y=$("#shape_text_edit");0==y.length&&(y=$("<div contenteditable='true' spellcheck=false id='shape_text_edit'></div>").appendTo("#designer_canvas"));var f=$("#shape_text_ruler");0==f.length&&(f=$("<div contenteditable='true' spellcheck=false id='shape_text_ruler'></div>").appendTo("#designer_canvas")),$(".text_canvas[forshape="+e.id+"][ind="+h+"]").hide();var x=n[h],v=e.textBlock[h],m=Utils.getShapeFontStyle(e.fontStyle);m=$.extend({},m,x.fontStyle);var b=x.position;if("horizontal"==m.orientation){var w={x:b.x+b.w/2,y:b.y+b.h/2};b={x:w.x-b.h/2,y:w.y-b.w/2,w:b.h,h:b.w}}"微软雅黑"==m.fontFamily&&(m.fontFamily='"Microsoft YaHei",微软雅黑,Arial');var S={width:b.w+"px","z-index":Model.orderList.length+2,"line-height":100*m.lineHeight+"%","font-size":m.size+"px","font-family":m.fontFamily,"font-weight":m.bold?"bold":"normal","font-style":m.italic?"italic":"normal","text-align":m.textAlign,color:"rgb("+m.color+")","text-decoration":m.underline?"underline":"none","word-wrap":"break-word"};if(y.css(S),f.css(S),y.show(),b.x+=e.props.x,b.y+=e.props.y,Utils.rectCross(b,e.props)||y.attr("placeholder","请输入文本"),null!=x.text){var k=x.text.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;");"undefined"==typeof isNewTextV||isNewTextV||(k=(k=(k=(k=(k=(k=(k=(k=(k=k.replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/&lt;br&gt;/gi,"<br>")).replace(/&lt;b&gt;/gi,"<b>").replace(/&lt;\/b&gt;/gi,"</b>")).replace(/&lt;div&gt;/gi,"<div>").replace(/&lt;\/div&gt;/gi,"</div>")).replace(/&lt;i&gt;/gi,"<i>").replace(/&lt;\/i&gt;/gi,"</i>")).replace(/&lt;u&gt;/gi,"<u>").replace(/&lt;\/u&gt;/gi,"</u>")).replace(/&lt;font/gi,"<font").replace(/\"&gt;/gi,'">').replace(/&lt;\/font&gt;/gi,"</font>")).replace(/&lt;span/gi,"<span").replace(/&lt;\/span&gt;/gi,"</span>")).replace(/&lt;p/gi,"<p").replace(/&lt;\/p&gt;/gi,"</p>")),y.html(k),insert.equation.renderEquation(y)}var M=0,_=!1,D=!1;$("#shape_text_edit").off().on("keyup",function(t){f.html($(this).html()),y.attr("placeholder")&&!$(this).html()?y.addClass("placeholder"):y.removeClass("placeholder"),M=f.height(),y.css({height:M});b.x,b.w;var i=b.y+b.h/2,n=0,r=0,o=b.h;"middle"==m.vAlign?M>o?(n=i-(o=M)/2,r=0):(n=i-b.h/2,r=(b.h-M)/2,o=b.h-r):"bottom"==m.vAlign?M>o?(o=M,n=i+b.h/2-o,r=0):(n=i-b.h/2,r=b.h-M,o=b.h-r):(n=i-b.h/2,r=0,o=M>o?M:b.h);var a=r+o,s={x:b.x+b.w/2,y:n+a/2},l=e.props.angle;if(0!=l){var p={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2};s=Utils.getRotated(p,s,l)}"horizontal"==m.orientation&&(l=(1.5*Math.PI+l)%(2*Math.PI));var h="rotate("+Math.round(l/(2*Math.PI)*360)+"deg)";y.css({width:b.w,height:o,"padding-top":r,left:s.x-b.w/2-2,top:s.y-a/2-2,"-webkit-transform":h,"-ms-transform":h,"-o-transform":h,"-moz-transform":h,transform:h}),_&&D&&Utils.popEditor.renderMenuPos($(this)),t.stopPropagation()}).on("keydown",function(t){t.stopPropagation();var i=$(this);if(13==t.keyCode&&t.ctrlKey)return P(),!1;if(27==t.keyCode)i.unbind().remove(),$(".text_canvas[forshape="+e.id+"][ind="+h+"]").show();else if(66==t.keyCode&&t.ctrlKey){var n=!m.bold;1==e.textBlock.length?e.fontStyle.bold=n:v.fontStyle=$.extend(v.fontStyle,{bold:n}),m.bold=n,Model.update(e);var r=n?"bold":"normal";$(this).css("font-weight",r),f.css("font-weight",r),UI.update(),t.preventDefault()}else if(73==t.keyCode&&t.ctrlKey){n=!m.italic;1==e.textBlock.length?e.fontStyle.italic=n:v.fontStyle=$.extend(v.fontStyle,{italic:n}),m.italic=n,Model.update(e);r=n?"italic":"normal";$(this).css("font-style",r),f.css("font-style",r),UI.update(),t.preventDefault()}else if(85==t.keyCode&&t.ctrlKey){n=!m.underline;1==e.textBlock.length?e.fontStyle.underline=n:v.fontStyle=$.extend(v.fontStyle,{underline:n}),m.underline=n,Model.update(e);r=n?"underline":"none";$(this).css("text-decoration",r),f.css("text-decoration",r),t.preventDefault(),UI.update(),t.preventDefault()}else if(13==t.keyCode)Utils.isIE()&&!t.shiftKey&&t.preventDefault();else if(37==t.keyCode||39==t.keyCode){if(y.find(".equation-text").length>0){var o=window.getSelection().getRangeAt(0),a=document.createElement("span");a.className="equation-temp",o.insertNode(a),o.collapse(!1);var s=o.startContainer;l(1==s.nodeType?s:s.parentNode)}function l(e){for(var i=e.childNodes,n=0;n<i.length;n++)3==i[n].nodeType&&""==i[n].nodeValue&&e.removeChild(i[n]);for(n=0;n<i.length;n++)if("equation-temp"==i[n].className){39==t.keyCode?n==i.length-1?p(e):"equation-text"==i[n+1].className?insert.equation.equationInit(y,$(i[n+1])):1==i[n+1].nodeType&&d(i[n+1]):0==n?p(e):"equation-text"==i[n-1].className?insert.equation.equationInit(y,$(i[n-1])):1==i[n-1].nodeType&&d(i[n-1]),y.find(".equation-temp").remove();break}}function p(e){var i=e.parentNode;1==i.childNodes.length?p(i):"designer_canvas"!=i.id&&(39==t.keyCode?e.after(a):e.before(a),l(i))}function d(e){1==e.childNodes.length&&"equation-text"!=e.childNodes[0].className?d(e.childNodes[0]):1==e.nodeType&&(39==t.keyCode?e.insertBefore(a,e.childNodes[0]):e.appendChild(a),l(e))}}else t.ctrlKey&&69==t.keyCode&&t.preventDefault()}).on("blur",function(e){$(".eq-editor").is(":visible")||P()}).bind("focus",function(e){var t="";if(window.getSelection)t=window.getSelection().toString();else if(document.selection){t=document.selection.createRange().text}""!=$.trim(t)&&Utils.popEditor.init(this),e.stopPropagation()}).on("mouseup",function(e){_&&D&&Utils.popEditor.init(this);var t=$(".eq-editor"),i=$(e.target).parents(".equation-text");if(t.is(":visible")){var n,r;if(i.length>0)(r=window.getSelection?(n=window.getSelection()).getRangeAt(0):(n=document.selection).createRange()).setStartAfter(i.get(0)),r.collapse(!1),n.removeAllRanges(),n.addRange(r),$(".pop-editor").hide();i=y.find(".equation-text.cur");t.hide(),$(".eq-shade").remove(),""==$(".notranslate").html()&&i.remove(),i.removeClass("cur")}else i.length>0&&insert.equation.equationInit(y,i);Designer.contextMenu.hide(),e.stopPropagation()}).on("mousemove",function(e){e.stopPropagation(),_=!0}).on("mousedown",function(e){e.pageX,e.pageY,D=!0,e.stopPropagation()}).on("mouseenter",function(e){Designer.op.destroy()}),$("#shape_text_edit").trigger("keyup"),Utils.selectText(y[0]),Designer.events.push("usebrush","unbrush")}}else this.editLinkerText(e,t,i);function P(){Utils.popEditor.close();var t=$("#shape_text_edit").html(),i=y.find(".equation-text");if(i.length>0&&(t=Designer.op.equation.equationHtml(i,t)),$("#shape_text_edit").length&&$("#shape_text_edit").is(":visible")){var n=Model.getShapeById(e.id);v.text=void 0===v.text?"":v.text;var r=[n];if(t!=v.text&&!y.hasClass("invalid")){if(n.textBlock[h].text=t,"uml_class"==e.category){r=Designer.op.shapeChangeHeight(n,h,M,t)||[];for(var o=0;o<r.length;o++){var a=r[o];"linker"==a.name&&Designer.painter.renderLinker(a,!0)}}else if("text"==e.name||"standardText"==e.name){var s=n.textBlock[0].text,l={};if(l.x=n.props.x+n.props.w/2,l.y=n.props.y+n.props.h/2,""==s){var p,d,c=null!==(p=null==Schema||null===(d=Schema.shapes)||void 0===d||null===(d=d.text)||void 0===d?void 0:d.props)&&void 0!==p?p:{w:100,h:40};n.props.w=c.w,n.props.h=c.h,n.props.x=l.x-n.props.w/2,n.props.y=l.y-n.props.h/2}else 0==i.length&&(Utils.autoTextHeight(n,s,n.props.w,void 0,!0),n.props.x=l.x-n.props.w/2,n.props.y=l.y-n.props.h/2)}Model.updateMulti(r)}Designer.painter.renderShape(n),Designer.events.push("searchReplace"),$("#shape_text_edit").remove(),e=null,Utils.selectShape(Utils.selectIds)}}},equation:{equationHtml:function(e,t){$("body").append('<div id="html_temp" style="display:none"></div>');var i=$("#html_temp");return i.html(t),e.each(function(e){i.find(".equation-text:eq("+e+")").attr("data-index",e).children(":first").html("")}),t=i.html(),i.remove(),t},insertLastEquation:function(e){if(Designer.events.push("testVip","Latex")){Designer.op.editShapeText(e),(n=document.createRange()).collapse(!1);var t=$("#shape_text_edit");if(t.find("li").length>0)var i=t.find("li");else i=t;var n,r=i[0];r.focus(),(n=document.createRange()).selectNodeContents(r),n.collapse(!1);var o=window.getSelection();0==o.anchorOffset&&(o.removeAllRanges(),o.addRange(n),insert.equation.equationInit(t))}else Designer.events.push("vipLimit","Latex")}},shapeReplace:function(e,t){Schema.shapes[e];var i=Utils.copy(Model.getShapeById(t));Model.changeShape(i,e),Model.update(i)},shapeChangeHeight:function(e){var t=Utils.getShapeFontHeight(e),i=Utils.copy(e.props),n=[e];if("interface"==e.name||"cls_"==e.name||"enumeration"==e.name){var r=t[0]<30?30:t[0]+14,o=t[1]<30?30:t[1]+14;e.props.h=r+o,Math.abs(e.props.h-i.h)<12&&(e.props.h=i.h),e.path[1].actions[0].y=r,e.path[1].actions[1].y=r,e.textBlock[0].position.h=r,e.textBlock[1].position.y=r,e.textBlock[1].position.h="h-"+r,Schema.initShapeFunctions(e)}else if("cls"==e.name){r=t[0]<30?30:t[0]+14,o=t[1]<30?30:t[1]+14;var a=t[2]<30?30:t[2]+14;e.props.h=r+o+a,Math.abs(e.props.h-i.h)<12&&(e.props.h=i.h),e.textBlock[0].position.h=r,e.textBlock[1].position.y=r,e.textBlock[1].position.h="(h-"+r+")*"+o+"/"+(o+a),e.textBlock[2].position.y="(h-"+r+")*"+o+"/"+(o+a)+"+"+r,e.textBlock[2].position.h="(h-"+r+")*"+a+"/"+(o+a),e.path[1].actions[0].y=r,e.path[1].actions[1].y=r,e.path[1].actions[2].y="(h-"+r+")*"+o+"/"+(o+a)+"+"+r,e.path[1].actions[3].y="(h-"+r+")*"+o+"/"+(o+a)+"+"+r,Schema.initShapeFunctions(e)}else["activeClass","simpleInterface","classRelationship","simpleClass","multiplictyClass","constraint"].indexOf(e.name)>-1&&t[0]>e.props.h-10&&(e.props.y=e.props.y-(t[0]+10-e.props.h)/2,e.props.h=t[0]+10);for(var s=Utils.getOutlinkers([e]),l=0;l<s.length;l++){var p=s[l],h=!0;if(p.from.id==e.id&&e.props.h!=i.h){var d=e.props.y+e.props.h*(p.from.y-i.y)/i.h;p.from.y=Math.round(d),n.push(p),h=!1}if(p.to.id==e.id&&e.props.h!=i.h){d=e.props.y+e.props.h*(p.to.y-i.y)/i.h;p.to.y=Math.round(d),h&&n.push(p)}}return n},shapeLinkable:function(e,t,i){var n=i?$(i):"",r=$("#designer_canvas"),o=$("#canvas_container");function a(e,t){var i=Utils.newId(),n=Utils.copy(Schema.linkerDefaults);n.from=e,n.to={id:null,x:t.x,y:t.y,angle:null},n.props={zindex:Model.maxZIndex+1},delete n.fontStyle;var r={};r.lineWidth=Designer.defaults.lineWidth,Designer.defaults.linkerBeginArrowStyle&&(r.beginArrowStyle=Designer.defaults.linkerBeginArrowStyle),Designer.defaults.linkerEndArrowStyle&&(r.endArrowStyle=Designer.defaults.linkerEndArrowStyle);var o=Model.define;return null!=o.defaultLinkerStyle&&null!=o.defaultLinkerStyle.linkerStyle&&(r=$.extend(r,o.defaultLinkerStyle.linkerStyle)),n.lineStyle=r,n.id=i,n}o.unbind("mousedown.link").bind("mousedown.link",function(s){if(2!=s.button&&Designer.events.push("testVip","flowShapeNum")){Designer.op.changeState("linking_from_shape");var l=!1,p=null,h={};if(e||i)if(i){h.x=n.attr("x1")-0,h.y=n.attr("y1")-0,h.id=n.attr("shape_id"),h.angle=n.attr("angle")-0;var d=Model.getShapeById(n.attr("shape_id"));d&&d.name.startsWith("chart_")&&(0==h.angle?h.x+=16:h.angle==.5*Math.PI?h.y+=16:h.angle==Math.PI?h.x-=16:h.angle==1.5*Math.PI&&(h.y-=16))}else(h=t).id=e.id;else{var c=Utils.getRelativePos(s.pageX,s.pageY,r);h={x:c.x,y:c.y,id:null,angle:null}}Designer.op.initScrollPos(),o.bind("mousemove.link",function(e){o.css("cursor","default");var t=Utils.getRelativePos(e.pageX,e.pageY,r);null==p&&(p=a(h,t),Designer.events.push("linkerCreating",p)),Designer.op.moveLinker(p,"to",t.x,t.y);var n=Utils.measureDistance({x:s.pageX,y:s.pageY},{x:e.pageX,y:e.pageY});l=n>=5&&(Math.abs(t.x-h.x)>20||Math.abs(t.y-h.y)>20),$(document).unbind("mouseup.droplinker").bind("mouseup.droplinker",function(e){2!=e.button&&(l?(Model.add(p),Designer.events.push("linkerCreated",p),Utils.unselect(),Utils.selectShape(p.id),null==p.to.id&&null!=p.from.id&&Designer.op.linkDashboard(p),Utils.showLinkerCursor()):i||($("#"+p.id).remove(),p=null),Designer.op.hideSnapLine(),$(document).unbind("mouseup.droplinker"))}),Designer.op.isScroll(e.pageX,e.pageY)}),$(document).bind("mouseup.link",function(){if((!p||!l)&&i){p&&($("#"+p.id).remove(),p=null);var e={x:n.attr("x2")-0,y:n.attr("y2")-0};p=a(h,e),Designer.painter.renderLinker(p,!0),Model.add(p),Designer.events.push("linkerCreated",p),Utils.unselect(),Utils.selectShape(p.id),null==p.to.id&&null!=p.from.id&&Designer.op.linkDashboard(p),$(document).unbind("mouseup.droplinker")}Designer.op.hideLinkPoint(),Designer.op.resetState(),o.unbind("mousedown.link"),o.unbind("mousemove.link"),$(document).unbind("mouseup.link"),Designer.op.stopScroll()})}})},linkerEditable:function(e,t){var i=$("#designer_canvas");i.off("dblclick.edit_linker").on("dblclick.edit_linker",function(n){var r=Utils.getRelativePos(n.pageX,n.pageY,i);Designer.op.editLinkerText(e,r,t),i.off("dblclick.edit_linker"),Designer.events.push("useBrush","unbrush")});var n="false";i.off("mousedown.linkerdrag").on("mousedown.linkerdrag",function(r){var o=r.target.classList+"";if(""==o||o.indexOf("linker_text")<0||void 0===t)return i.off("mousemove.linkerdrag"),i.off("mouseup.linkerdrag"),i.off("mousedown.linkerdrag"),void(n="false");var a=r.pageX,s=r.pageY,l={moving:!1},p=$("#"+e.id);if(0!=p.length){var h=p.children(".linker_text").eq(t);p.attr("id"),h.position().left,h.position().top;h.addClass("active"),i.addClass("moving_status");for(var d=Utils.getLinkerLinesPoints(e),c=[],u=0;u<d.length;u++){var g=d[u],y=Math.floor(g.x),f=Math.floor(g.y);c.push([y,f])}l.points=c,l.plen=d.length,l.tval=-1,l.moving=!1,l.target=h,l.baseH=h.outerHeight(),l.baseW=h.outerWidth(),l.minX=p.position().left.restoreScale()-1,l.minY=p.position().top.restoreScale()-1,l.fromX=e.from.x,l.toX=e.to.x,l.fromY=e.from.y,l.toY=e.to.y,l.side=0,r.stopPropagation(),i.off("mousemove.linkerdrag").on("mousemove.linkerdrag",function(t){t.target.classList;if(Math.abs(t.pageX-a)<=3&&Math.abs(t.pageY-s)<=3)return n="false",void(l.moving=!1);l.moving=!0;var r=Utils.getRelativePos(t.pageX,t.pageY,i),o=Math.floor(r.x),p=Math.floor(r.y),h=Designer.painter.getLinkerPointLocation(e,{x:o,y:p}),d=h.pos.x,c=h.pos.y,u=Utils.getAngleDir(h.pos.angle);Utils.measureDistance({x:d,y:c},e.from)>l.baseH/2&&Utils.measureDistance({x:d,y:c},e.to)>l.baseH/2&&(l.currentX=d,l.currentY=c,l.locationObj=h),Utils.measureDistance({x:o,y:p},{x:l.currentX,y:l.currentY})<6?(l.side=0,l.pos="in"):p<c-16&&l.fromX!=l.toX?l.pos="top":p>c+16&&l.fromX!=l.toX?l.pos="bottom":o<d-16&&l.fromY!=l.toY?l.pos="top":o>d+16&&l.fromY!=l.toY?l.pos="bottom":l.pos="in";var g=l.currentX-l.minX,y=l.currentY-l.minY,f=Math.floor(g)-l.baseW/2,x=Math.floor(y)-l.baseH/2;"top"==l.pos?"1"==u||"3"==u?f=f-l.baseW/2-6:x=x-l.baseH/2-6:"bottom"==l.pos&&("1"==u||"3"==u?f+=l.baseW/2+6:x+=l.baseH/2+6),l.target.css({top:x,left:f}),n="true"}),i.off("mouseup.linkerdrag").on("mouseup.linkerdrag",function(){if(i.off("mousemove.linkerdrag"),i.off("mouseup.linkerdrag"),i.off("mousedown.linkerdrag"),l.target.removeClass("active"),i.removeClass("moving_status"),l.moving&&"true"==n){if(e.textBlock[t].location=l.locationObj.location,e.textBlock[t].pos=l.pos,0==t){for(var r=Utils.getLinkerLinesPoints(e),o=null,a=-1,s=0;s<r.length;s++){var p=r[s].x,h=r[s].y,d=Utils.measureDistance({x:l.currentX,y:l.currentY},{x:p,y:h});null!=o?o>d&&(o=d,a=s):o=d}e.textPos={pos:l.pos,x:l.currentX,y:l.currentY,t:a}}Model.update(e),l={moving:!1},n="false"}})}})},editLinkerText:function(e,t,i){Designer.contextMenu.hide();var n=i||0;if(t&&void 0===i){var r=Designer.painter.getLinkerPointLocation(e,t);a=r.pos,e.textBlock.push({location:r.location,side:0,text:""}),n=e.textBlock.length-1}0==e.textBlock.length&&e.textBlock.push({location:.5,side:0,text:""});var o=e.textBlock[n],a=Designer.painter.getLinkerPointByLocation(e,o.location),s=a.x,l=a.y,p=$("#"+e.id),h=p.children(".linker_text").eq(n);if(0==h.length)h=$("<div class='text_canvas linker_text'></div>").appendTo("#"+e.id);else{var d=Utils.restoreScale(h.position()),c=Utils.restoreScale(p.position());s=c.left+d.left+h.width()/2,l=c.top+d.top+h.height()/2}var u=$("#linker_text_edit");0==u.length&&(u=$("<textarea id='linker_text_edit' wrap='off'></textarea>").appendTo("#designer_canvas")),h.hide();var g=Utils.getLinkerFontStyle(e.fontStyle),y=Math.round(1.25*g.size);function f(){var t=$("#linker_text_edit");if(t.length&&t.is(":visible")){var i=t.val();if(i!=o.text&&""!==$.trim(i)){if(e.textBlock[n].text=i,0==n){var r=e.textBlock[0];e.text=r.text;for(var a=Designer.painter.getLinkerPointByLocation(e,r.location),s=Utils.getLinkerLinesPoints(e),l=null,p=-1,d=0;d<s.length;d++){var c=s[d].x,u=s[d].y,g=Utils.measureDistance({x:a.x,y:a.y},{x:c,y:u});null!=l?l>g&&(l=g,p=d):l=g}e.textPos={pos:r.pos,x:a.x,y:a.y,t:p}}Model.update(e)}else if(""==$.trim(i)){if(e.textBlock.splice(n,1),0==n)if(e.textBlock.length>0){r=e.textBlock[0];e.text=r.text;for(a=Designer.painter.getLinkerPointByLocation(e,r.location),s=Utils.getLinkerLinesPoints(e),l=null,p=-1,d=0;d<s.length;d++){c=s[0],u=s[1],g=Utils.measureDistance({x:a.x,y:a.y},{x:c,y:u});null!=l?l>g&&(l=g,p=d):l=g}e.textPos={pos:r.pos,x:a.x,y:a.y,t:p}}else e.text="";Model.update(e),h.remove()}Model.intersection[e.id]?Designer.painter.renderLinker(e,null,null,Model.intersection[e.id]):Designer.painter.renderLinker(e),t.remove(),Designer.events.push("searchReplace")}}"微软雅黑"==g.fontFamily&&(g.fontFamily='"Microsoft YaHei",微软雅黑,Arial'),u.css({"z-index":Model.orderList.length+99999,"line-height":y+"px","font-size":g.size+"px","font-family":g.fontFamily,"font-weight":g.bold?"bold":"normal","font-style":g.italic?"italic":"normal","text-align":g.textAlign,color:"rgb("+g.color+")","text-decoration":g.underline?"underline":"none"}),u.val(o.text).show().select(),u.unbind().bind("keyup",function(){var e=$(this).val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>");h.html(e+"<br/>");var t=h.width();t<50&&(t=50);var i=h.height();i<y&&(i=y),u.css({left:s-(t+20)/2,top:l-i/2,width:t+20,height:i})}).bind("mousedown",function(e){Designer.contextMenu.hide(),e.stopPropagation()}).bind("keydown",function(t){if(13==t.keyCode&&t.ctrlKey)return f(),!1;if(27==t.keyCode)u.unbind().remove(),Designer.painter.renderLinkerText(e);else if(66==t.keyCode&&t.ctrlKey){var i=!Utils.getLinkerFontStyle(e.fontStyle).bold;e.fontStyle.bold=i,Model.update(e);var n=i?"bold":"normal";$(this).css("font-weight",n),h.css("font-weight",n),UI.update()}else if(73==t.keyCode&&t.ctrlKey){i=!Utils.getLinkerFontStyle(e.fontStyle).italic;e.fontStyle.italic=i,Model.update(e);n=i?"italic":"normal";$(this).css("font-style",n),h.css("font-style",n),UI.update()}else if(85==t.keyCode&&t.ctrlKey){i=!Utils.getLinkerFontStyle(e.fontStyle).underline;e.fontStyle.underline=i,Model.update(e);n=i?"underline":"none";$(this).css("text-decoration",n),h.css("text-decoration",n),t.preventDefault(),UI.update()}}).bind("blur",function(){f()}),u.trigger("keyup")},linkerDraggable:function(e,t){if(!e.locked){var i=$("#designer_canvas"),n=$("#canvas_container");i.bind("mousedown.draglinker",function(r){Utils.hideLinkerControls(),Designer.op.changeState("dragging_linker");var o=Utils.getSelectedIds(),a=!1;o.length>1&&(a=!0),Designer.op.initScrollPos(),n.bind("mousemove.draglinker",function(r){n.css("cursor","default");var s=Utils.getRelativePos(r.pageX,r.pageY,i);Designer.op.moveLinker(e,t,s.x,s.y),a&&Designer.painter.drawControls(o),$(document).unbind("mouseup.droplinker").bind("mouseup.droplinker",function(){$(document).unbind("mouseup.droplinker"),e.points=Utils.margeLinker(e),Model.update(e),Utils.showLinkerControls(),Designer.op.hideSnapLine(),Designer.events.push("linkerCreated",e)}),Designer.op.isScroll(r.pageX,r.pageY),Utils.hideLinkerEndsPoint()}),$(document).bind("mouseup.draglinker",function(){Designer.op.hideLinkPoint(),Designer.op.resetState(),i.unbind("mousedown.draglinker"),n.unbind("mousemove.draglinker"),$(document).unbind("mouseup.draglinker"),Utils.showLinkerControls(),Utils.showLinkerEndsPoint(),Designer.op.stopScroll()})})}},linkClickable:function(e,t){var i=$("#link_spot");0==i.length&&(i=$("<a id='link_spot' target='_blank' style='cursor: pointer'></a>").appendTo("#designer_canvas")).bind("dragstart",function(){return!1}),-1==e.trim().toLowerCase().indexOf("http")&&(e="http://"+e),i.attr("href",e),i.show().css({left:t.x-50,top:t.y-50,"z-index":Model.orderList.length+3})},linkIconShow:function(e){var t=e.id;if(t&&(!$("#link_icon_spot").length||$("#link_icon_spot").attr("data-shape-id")!=t)){var i=Utils.getRotated({x:0,y:0},{x:8,y:8},e.props.angle),n=Math.max(Math.abs(i.x),Math.abs(i.y));$("#link_icon_spot").remove();var r=$("#"+t),o=r.children(".shape_link"),a=Model.orderList.length>e.props.zindex?Model.orderList.length:e.props.zindex,s=Utils.restoreScale(r.position()),l=Utils.restoreScale(o.position());$(o.prop("outerHTML")).css({left:s.left+l.left+n,top:s.top+l.top+n,"z-index":a+3}).attr("id","link_icon_spot").appendTo("#designer_canvas"),$(".shape_link").show(),o.hide()}},linkIconHide:function(){$("#link_icon_spot").remove(),$(".shape_link").show()},textCreatable:function(){var e=$("#designer_canvas"),t=$("#canvas_container");t.unbind("mousedown.create_text").bind("mousedown.create_text",function(i){var n=null;i.ctrlKey||Utils.unselect();var r=Utils.getRelativePos(i.pageX,i.pageY,e),o=null;Designer.events.push("testVip","flowShapeNum")&&(t.bind("mousemove.create_text",function(t){null==n&&(n=$("<div id='texting_box'></div>").appendTo(e));var i=Utils.getRelativePos(t.pageX,t.pageY,e);o={"z-index":Model.orderList.length,left:i.x-1,top:i.y-1},i.x>r.x&&(o.left=r.x-1),i.y>r.y&&(o.top=r.y-1),o.width=Math.abs(i.x-r.x-2),o.height=Math.abs(i.y-r.y-2),n.css(o)}),$(document).unbind("mouseup.create_text").bind("mouseup.create_text",function(i){if(null!=o&&o.width>=20&&o.height>=20){(r=Model.create("standardText",o.left,o.top)).props.w=o.width,r.props.h=o.height}else{var r,a=Utils.getRelativePos(i.pageX,i.pageY,e),s={left:a.x-1,top:a.y-1};(r=Model.create("standardText",s.left,s.top)).props.w=100,r.props.h=40}n&&n.remove(),Model.add(r),Designer.painter.renderShape(r),Designer.op.editShapeText(r),Utils.unselect(),Utils.selectShape(r.id),Designer.op.resetState(),$(document).unbind("mouseup.create_text"),t.unbind("mousemove.create_text")}),t.unbind("mousedown.create_text"))})},canvasDragTimeout:null,canvasDraggable:function(){var e=$("#canvas_container");e.css("cursor","url("+staticBasePath+"/assets/images/designer/cursor_hand.png) 8 8, auto"),e.off("mousedown.drag_canvas").on("mousedown.drag_canvas",function(t){var i=$("#designer_layout").scrollTop(),n=$("#designer_layout").scrollLeft();e.on("mousemove.drag_canvas",function(e){var r=e.pageX-t.pageX,o=e.pageY-t.pageY;$("#designer_layout").scrollLeft(n-r),$("#designer_layout").scrollTop(i-o)}),$(document).off("mouseup.drag_canvas").on("mouseup.drag_canvas",function(t){e.off("mousemove.drag_canvas"),$(document).off("mouseup.drag_canvas")})}),$(document).off("keyup.drag_canvas").on("keyup.drag_canvas",function(t){e.off("mousedown.drag_canvas"),Designer.op.resetState(),$(document).off("mouseup.drag_canvas"),t.preventDefault(),e.off("mousemove.drag_canvas")})},canvasFreeDraggable:function(){var e=$("#canvas_container");e.css("cursor","url(/themes/default/images/diagraming/cursor_hand.png) 8 8, auto"),e.unbind("mousedown.drag_canvas").bind("mousedown.drag_canvas",function(t){var i=$("#designer_layout").scrollTop(),n=$("#designer_layout").scrollLeft();e.bind("mousemove.drag_canvas",function(e){var r=e.pageX-t.pageX,o=e.pageY-t.pageY;$("#designer_layout").scrollLeft(n-r),$("#designer_layout").scrollTop(i-o)}),$(document).unbind("mouseup.drag_canvas").bind("mouseup.drag_canvas",function(t){e.unbind("mousemove.drag_canvas"),$(document).unbind("mouseup.drag_canvas")})})},canvasScalePoint:function(e,t,i){var n="undefined"!=typeof isView&&isView;if("center"==i&&(n?i={x:$("#viewport").width()/2+$("#viewport").offset().left,y:$("#viewport").height()/2+$("#viewport").offset().top}:$("#designer_layout").length&&(i={x:$("#designer_layout").width()/2+$("#designer_layout").offset().left,y:$("#designer_layout").height()/2+$("#designer_layout").offset().top})),"object"==_typeof(i))if(n){var r=$("#designer_canvas"),o=(i.x-r.offset().left)/e,a=(i.y-r.offset().top)/e,s=Math.round(r.position().left-(t-e)*o),l=Math.round(r.position().top-(t-e)*a);r.css({left:s,top:l})}else if($("#designer_layout").length){var p=$("#designer_layout"),h=(o=(i.x-p.offset().left+p.scrollLeft()-Designer.config.pageMargin)/e,a=(i.y-p.offset().top+p.scrollTop()-Designer.config.pageMargin)/e,Math.round(p.scrollLeft()+(t-e)*o)),d=Math.round(p.scrollTop()+(t-e)*a);p.scrollLeft(h),p.scrollTop(d)}},moveShape:function(e,t,i){for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(o.id)}var a=Utils.getControlBox(n);a.x+t.x<-1e3||(a.y,t.y),Utils.removeCreateLinker();var s=t;for(r=0;r<e.length;r++){if("linker"==(o=e[r]).name){var l=o,p=l.from,h=l.to,d=!1,c=!1;if(Utils.isSelected(l.id)?((null==p.id||n.indexOf(p.id)>=0)&&(l.from.x+=s.x,l.from.y+=s.y,d=!0),(null==h.id||n.indexOf(h.id)>=0)&&(l.to.x+=s.x,l.to.y+=s.y,c=!0)):(null!=p.id&&n.indexOf(p.id)>=0&&(l.from.x+=s.x,l.from.y+=s.y,d=!0),null!=h.id&&n.indexOf(h.id)>=0&&(l.to.x+=s.x,l.to.y+=s.y,c=!0)),d&&c){for(var u=0;u<l.points.length;u++){var g=l.points[u];g.x+=s.x,g.y+=s.y}var y=$("#"+o.id);if(y.length>0){var f=Utils.restoreScale(y.position());y.css({left:f.left+=t.x,top:f.top+=t.y})}}else(d||c)&&Designer.painter.renderLinker(l,d?"from":"to");null!=l.textPos&&(l.textPos.x+=s.x,l.textPos.y+=s.y)}else D(o),$("#shape_contour_"+o.id).css({left:o.props.x,top:o.props.y})}var x=Utils.getSelectedLinkerIds();if((1!=e.length||1!=x.length)&&void 0===i){if(x.length>0){var v=Utils.getSelectedIds();Designer.painter.drawControls(v)}else{var m=$("#shape_controls");m.css({left:parseFloat(m.css("left"))+s.x,top:parseFloat(m.css("top"))+s.y});var b=parseFloat(m.css("left")),w=parseFloat(m.css("top")),S=(parseFloat(m.width()),$("#grid_dom")),k=$("#grid_selects"),M=$("#lane_dom");if(S.length&&-1!=n.indexOf(S.attr("shape-id"))&&S.css({left:parseFloat(S.css("left"))+s.x,top:parseFloat(S.css("top"))+s.y}),k.length&&k.css({left:parseFloat(k.css("left"))+t.x,top:parseFloat(k.css("top"))+t.y}),M.length&&-1!=n.indexOf(M.attr("shape-id"))&&M.css({left:parseFloat(M.css("left"))+s.x,top:parseFloat(M.css("top"))+s.y}),o.name.indexOf("grid")>-1)$("#po-grid-toolbar").css({left:b,top:w-45});else if("lane"==o.category){$("#po-lane-toolbar").css({left:b,top:w-45})}else if("uiTab"==o.name){$("#po-uitab-toolbar").css({left:b,top:w-45})}else if("uiGrid"==o.name){$("#po-uigrid-toolbar").css({left:b,top:w-45})}}var _=$("#shape_controls").position();Designer.op.showTip("X: "+Math.round(_.left.restoreScale())+"&nbsp;&nbsp;Y: "+Math.round(_.top.restoreScale()))}function D(e){e.props.x+=s.x,e.props.y+=s.y;var t=$("#"+e.id);t.css({left:parseFloat(t.css("left"))+s.x,top:parseFloat(t.css("top"))+s.y})}},moveLinkerFocus:function(e){var t=Utils.copy(e),i=Utils.getShapeByPosition(e.to.x,e.to.y,!0),n=Utils.getShapeByPosition(e.from.x,e.from.y,!0);return Designer.op.hideLinkPoint(),Utils.hideAnchors(),i&&"bounding"==i.type?(Designer.op.showLinkPoint(i.linkPoint),Utils.showAnchors(i.shape),t.to.x=i.linkPoint.x,t.to.y=i.linkPoint.y,t.to.angle=i.linkPoint.angle,t.to.id=i.shape.id,Designer.painter.renderLinker(t,!0,null,null,!0)):Designer.painter.renderLinker(t),n&&"bounding"==n.type?(Designer.op.showLinkPoint(n.linkPoint),Utils.showAnchors(n.shape),t.from.x=n.linkPoint.x,t.from.y=n.linkPoint.y,t.from.angle=n.linkPoint.angle,t.from.id=n.shape.id,Designer.painter.renderLinker(t,!0,null,null,!0)):Designer.painter.renderLinker(t),t=Designer.op.beautifyLinkerFocus(t)},beautifyLinkerFocus:function(e,t){var i=Utils.copy(e),n=e.to.id,r=e.to.x,o=e.to.y,a=e.from.id,s=e.from.x,l=e.from.y,p=e.linkerType,h=e.points,d=Utils.margeLinker(e);if("broken"==p&&t){if(!0===t)n&&!a?Math.abs(o-l)<Math.abs(r-s)?Math.abs(o-l)<8&&(i.from.y=o):Math.abs(r-s)<8&&(i.from.x=r):!n&&a&&(Math.abs(o-l)<Math.abs(r-s)?Math.abs(o-l)<8&&(i.to.y=l):Math.abs(r-s)<8&&(i.to.x=s));else if("to"===t){var c=d[d.length-1]||e.from;Math.abs(o-c.y)<Math.abs(r-c.x)?Math.abs(o-c.y)<8&&(d.length>1?i.points[h.length-1].y=o:a||(i.from.y=o)):Math.abs(r-c.x)<8&&(d.length>1?i.points[h.length-1].x=r:a||(i.from.x=r))}else if("from"===t){var u=d[0]||e.to;Math.abs(l-u.y)<Math.abs(s-u.x)?Math.abs(l-u.y)<8&&(d.length>1?i.points[0].y=l:n||(i.to.y=l)):Math.abs(s-u.x)<8&&(d.length>1?i.points[0].x=s:n||(i.to.x=s))}}else"broken"==p&&2==h.length&&(n&&!a?h[0].x==h[1].x?Math.abs(h[0].y-h[1].y)<8&&h[0].y!=h[1].y&&(i.points[0].y=o,i.points[1].y=o,i.from.y=o):Math.abs(h[0].x-h[1].x)<8&&h[0].x!=h[1].x&&(i.x=r,i.x=r,i.from.x=r):!n&&a&&(h[0].x==h[1].x?Math.abs(h[0].y-h[1].y)<8&&h[0].y!=h[1].y&&(i.points[0].y=l,i.points[1].y=l,i.to.y=l):Math.abs(h[0].x-h[1].x)<8&&h[0].x!=h[1].x&&(i.x=s,i.x=s,i.to.x=s)));return i},moveLinker:function(e,t,i,n){var r=null,o=null,a=Utils.getShapeByPosition(i,n,!0);if(Designer.op.hideLinkPoint(),null!=a){var s=a.shape;if(Utils.showAnchors(s),o=s.id,"bounding"==a.type)r=a.linkPoint,Designer.op.showLinkPoint(r);else if("shape"==a.type){var l,p;if("from"==t?(l={x:e.to.x,y:e.to.y},p=e.to.id):(l={x:e.from.x,y:e.from.y},p=e.from.id),s.id==p)Designer.op.hideLinkPoint(),(r={x:i,y:n}).angle=null,o=null;else{for(var h,d=s.getAnchors(),c=-1,u={x:s.props.x+s.props.w/2,y:s.props.y+s.props.h/2},g=0;g<d.length;g++){var y=d[g],f=Utils.getRotated(u,{x:s.props.x+y.x,y:s.props.y+y.y},s.props.angle),x=Utils.measureDistance(f,l);(-1==c||x<c)&&(c=x,h=f)}var v=Utils.getPointAngle(s.id,h.x,h.y,4);s.name.startsWith("chart_")&&(h.x==s.props.x+s.props.w&&(v=Math.PI),h.x==s.props.x&&(v=0),h.y==s.props.y&&(v=.5*Math.PI),h.y==s.props.y+s.props.h&&(v=1.5*Math.PI)),r={x:h.x,y:h.y,angle:v},Designer.op.showLinkPoint(r)}}}else{Designer.op.hideLinkPoint(),Utils.hideAnchors();var m=Designer.op.snapLinkerLine(i,n);(r={x:m.x,y:m.y}).angle=null,o=null}var b=2;if(null==o&&(b=6),"from"==t){e.from.id=o,e.from.x=r.x,e.from.y=r.y,e.from.angle=r.angle;var w=[];"broken"==e.type&&(w=Utils.getLinkerLinePoints(e));var S=w[2]||e.to;if(r.x>=S.x-b&&r.x<=S.x+b&&(e.from.x=S.x),r.y>=S.y-b&&r.y<=S.y+b&&(e.from.y=S.y),e.from.x==e.to.x&&e.from.y==e.to.y)return}else{e.to.x=r.x,e.to.y=r.y,e.to.id=o,e.to.angle=r.angle;w=[];"broken"==e.type&&(w=Utils.getLinkerLinePoints(e));var k=w[w.length-3]||e.from;if(r.x>=k.x-b&&r.x<=k.x+b&&(e.to.x=k.x),r.y>=k.y-b&&r.y<=k.y+b&&(e.to.y=k.y),e.from.x==e.to.x&&e.from.y==e.to.y)return}Designer.painter.renderLinker(e,t)},showLinkPoint:function(e){var t=$("<canvas class='link_point_canvas' width=8 height=8></canvas>").appendTo($("#designer_canvas")),i=t[0].getContext("2d");i.strokeStyle=Designer.config.anchorColor,i.fillStyle=Designer.config.anchorColor,i.arc(4,4,4,0,2*Math.PI),i.fill(),t.css({left:e.x-4,top:e.y-4,"z-index":Model.orderList.length+4,transform:"scale("+1..restoreScale()+")"}).show()},hideLinkPoint:function(){$(".link_point_canvas").remove()},createBrokenPoints:function(e,t,i){var n,r,o=Utils.getLinkerVector(e),a=e.points,s=a.length+1,l=0,p=o[t],h=o[t+1];if(-1==i||0==i)if(0==t&&e.from.id){n={x:p.x+20*p.h,y:p.y+20*p.v,fixed:!0};var d={x:p.x+20*p.h,y:p.y+20*p.v,fixed:!0};a.splice(t,0,n,d),l+=2}else 0==t&&null==e.from.id&&(n={x:e.from.x,y:e.from.y,fixed:!0},a.splice(t,0,n),l+=1);else if(1==i){(n=Utils.getCenterPoint(p,h)).fixed=!0,(d=Utils.getCenterPoint(p,h)).fixed=!0,a.splice(t,0,n,d),l+=2}if(-1==i||1==i)if(t==s-1&&e.to.id){r={x:h.x-20*h.h,y:h.y-20*h.v,fixed:!0};var c={x:h.x-20*h.h,y:h.y-20*h.v,fixed:!0};a.splice(t+=l,0,r,c)}else t==s-1&&null==e.to.id&&(r={x:e.to.x,y:e.to.y,fixed:!0},a.splice(t+=l,0,r));else if(0==i){(r=Utils.getCenterPoint(p,h)).fixed=!0,(c=Utils.getCenterPoint(p,h)).fixed=!0,a.splice(t+=l,0,r,c)}return l},hideLinkCenterPoint:function(){$("#linker_broken_control_conter_point").remove()},brokenLinkerChangable:function(e,t,i){var n=$("#canvas_container"),r=$("#designer_canvas"),o=Utils.getLinkerVector(e);4==o.length&&o[1].x==o[2].x&&o[1].y==o[2].y&&(o.splice(1,2),t=0),0!=o[t+1].v?n.css("cursor","ew-resize"):n.css("cursor","ns-resize"),Designer.op.hideLinkCenterPoint(),Utils.isSelected(e.id)&&1==Utils.getSelectedIds().length&&function(){var n=o[t],r=o[t+1];if(Utils.measureDistance(n,r)<80)return;var a=Utils.getCenterPoint(n,r);if(0==i)var s=Utils.getCenterPoint(n,a);else var s=Utils.getCenterPoint(a,r);var l=$("#"+e.id),p=l.position(),h={x:p.left,y:p.top};$('<div id="linker_broken_control_conter_point"></div>').css({left:s.x-h.x.restoreScale(),top:s.y-h.y.restoreScale(),transform:"scale("+1..restoreScale()+")"}).appendTo(l)}(),r.bind("mousedown.brokenLinker",function(o){Designer.op.changeState("changing_broken_linker"),Designer.op.hideLinkCenterPoint();var a=Utils.getRelativePos(o.pageX,o.pageY,r),s=Utils.getSelectedIds();if(2==e.points.length&&e.points[0].x==e.points[1].x&&e.points[0].y==e.points[1].y&&(e.points=[],t=0),"linker_broken_control_conter_point"==$(o.target).attr("id")){var l=Designer.op.createBrokenPoints(e,t,i);t+=l}else{l=Designer.op.createBrokenPoints(e,t,-1);t+=l}var p=[];p.push(e.from),(p=p.concat(e.points)).push(e.to);var h=p[t],d=p[t+1],c=Utils.copy(p[t-1]),u=Utils.copy(p[t+2]),g=!1;n.bind("mousemove.brokenLinker",function(i){var n=Utils.getRelativePos(i.pageX,i.pageY,r),o=n.x-a.x,l=n.y-a.y,p=0,y=0;if(Math.abs(h.x-d.x)<1){var f=Designer.op.brokenLinkerChangableDisabled(e,t,h.x+o,null);p=f-h.x,h.x=f,d.x=f,Math.abs(c.x-h.x)<6?(h.x=c.x,d.x=c.x,p=0):Math.abs(u.x-h.x)<6?(h.x=u.x,d.x=u.x,p=0):(h.fixed=!0,d.fixed=!0)}else{var x=Designer.op.brokenLinkerChangableDisabled(e,t,null,h.y+l);y=x-h.y,h.y=x,d.y=x,Math.abs(c.y-h.y)<6?(h.y=c.y,d.y=c.y,y=0):Math.abs(u.y-h.y)<6?(h.y=u.y,d.y=u.y,y=0):(h.fixed=!0,d.fixed=!0)}Designer.painter.renderLinker(e),Designer.op.resetLinkerText(e),Designer.events.push("linkerCreated",e),s.length>1&&Designer.painter.drawControls(s),a={x:a.x+p,y:a.y+y},g=!0,$(document).unbind("mouseup.changed").bind("mouseup.changed",function(){e.points=Utils.margeLinker(e),Model.update(e),Designer.painter.renderLinker(e),$(document).unbind("mouseup.changed")})}),$(document).bind("mouseup.brokenLinker",function(){Designer.op.resetState(),g||(e.points=Utils.margeLinker(e),Designer.painter.renderLinker(e)),n.unbind("mousemove.brokenLinker"),r.unbind("mousedown.brokenLinker"),$(document).unbind("mouseup.brokenLinker")})})},brokenLinkerChangableDisabled:function(e,t,i,n){var r=e.points,o=e.from,a=e.to,s=e.lineStyle.beginArrowStyle||"none",l=e.lineStyle.endArrowStyle||"solidArrow",p=[],h=[],d=[],c=[];return 1==t&&"none"!=s&&a.from&&(o.x==r[0].x?h.push(o.y-15,o.y+15):p.push(o.x-15,o.x+15)),t==r.length-1&&"none"!=l&&a.id&&(a.x==r[r.length-1].x?c.push(a.y-15,a.y+15):d.push(a.x-15,a.x+15)),null!=i?(p.length&&d.length?p[0]>d[0]&&p[0]<d[1]&&i>d[0]&&i<p[1]?i=Math.abs(i-d[0])<Math.abs(i-p[1])?d[0]:p[1]:p[1]>d[0]&&p[1]<d[1]&&i>p[0]&&i<d[1]?i=Math.abs(i-p[0])<Math.abs(i-d[1])?p[0]:d[1]:i>p[0]&&i<p[1]?i=Math.abs(i-p[0])<Math.abs(i-p[1])?p[0]:p[1]:i>d[0]&&i<d[1]&&(i=Math.abs(i-d[0])<Math.abs(i-d[1])?d[0]:d[1]):p.length?i>p[0]&&i<p[1]&&(i=Math.abs(i-p[0])<Math.abs(i-p[1])?p[0]:p[1]):d.length&&i>d[0]&&i<d[1]&&(i=Math.abs(i-d[0])<Math.abs(i-d[1])?d[0]:d[1]),i):null!=n?(h.length&&c.length?h[0]>c[0]&&h[0]<c[1]&&n>c[0]&&n<h[1]?n=Math.abs(n-c[0])<Math.abs(n-h[1])?c[0]:h[1]:h[1]>c[0]&&h[1]<c[1]&&n>h[0]&&n<c[1]?n=Math.abs(n-h[0])<Math.abs(n-c[1])?h[0]:c[1]:n>h[0]&&n<h[1]?n=Math.abs(n-h[0])<Math.abs(n-h[1])?h[0]:h[1]:n>c[0]&&n<c[1]&&(n=Math.abs(n-c[0])<Math.abs(n-c[1])?c[0]:c[1]):h.length?n>h[0]&&n<h[1]&&(n=Math.abs(n-h[0])<Math.abs(n-h[1])?h[0]:h[1]):c.length&&n>c[0]&&n<c[1]&&(n=Math.abs(n-c[0])<Math.abs(n-c[1])?c[0]:c[1]),n):void 0},brokenLinkerChangableByPoint:function(e,t){var i=$("#canvas_container"),n=$("#designer_canvas"),r=e.points;$(".linker_broken_control_point").off("mousedown.brokenLinker").on("mousedown.brokenLinker",function(o){Designer.op.changeState("changing_broken_linker");var a=Utils.getRelativePos(o.pageX,o.pageY,n),s=$(this),l=parseInt(s.attr("i")),p=parseInt(s.attr("j")),h=parseInt(t[l][p].direction),d=t[l][p].v,c=t[l][p].h,u=[],g=t.length;1==g&&(r=[]);var y,f;0==p&&(0==l&&e.from.id?(u.push({x:e.from.x+20*h*c,y:e.from.y+20*h*d}),u.push({x:e.from.x+20*h*c,y:e.from.y+20*h*d})):0==l&&null==e.from.id&&u.push({x:e.from.x,y:e.from.y})),1==p&&(0==l&&e.from.id?(u.push({x:e.from.x+20*h*c,y:e.from.y+20*h*d}),u.push({x:e.from.x+20*h*c,y:e.from.y+20*h*d})):0==l&&null==e.from.id&&u.push({x:e.from.x,y:e.from.y})),2==p&&(u.push({x:t[l][1].x,y:t[l][1].y}),u.push({x:t[l][1].x,y:t[l][1].y})),y=l+(u.length-1),0==p&&(u.push({x:t[l][1].x,y:t[l][1].y}),u.push({x:t[l][1].x,y:t[l][1].y})),1==p&&(l==g-1&&e.to.id?(u.push({x:e.to.x-20*h*c,y:e.to.y-20*h*d}),u.push({x:e.to.x-20*h*c,y:e.to.y-20*h*d})):l==g-1&&null==e.from.id&&u.push({x:e.to.x,y:e.from.y})),2==p&&(l==g-1&&e.to.id?(u.push({x:e.to.x-20*h*c,y:e.to.y-20*h*d}),u.push({x:e.to.x-20*h*c,y:e.to.y-20*h*d})):l==g-1&&null==e.to.id&&u.push({x:e.to.x,y:e.to.y})),f=y+1;for(var x=0;x<u.length;x++)u[x].fixed=!0,r.splice(l+x,0,u[x]);e.points=r;var v=r[y],m=r[f];v.fixed=!0,m.fixed=!0,i.on("mousemove.brokenLinker",function(t){var i=Utils.getRelativePos(t.pageX,t.pageY,n),r=i.x-a.x,o=i.y-a.y,s=0,l=0;if(1==d){var p=Designer.op.brokenLinkerChangableDisabled(e,f,v.x+r,null);s=p-v.x,v.x=p,m.x=p}if(1==c){var h=Designer.op.brokenLinkerChangableDisabled(e,f,null,v.y+o);l=h-v.y,v.y=h,m.y=h}Designer.painter.renderLinker(e),a={x:a.x+s.toScale(),y:a.y+l.toScale()},$(document).off("mouseup.changed").on("mouseup.changed",function(){e.points=Utils.margeLinker(e),Model.update(e),Designer.painter.renderLinker(e),$(document).off("mouseup.changed")})}),$(document).on("mouseup.brokenLinker",function(){Designer.op.resetState(),i.unbind("mousemove.brokenLinker"),$(document).off("mouseup.brokenLinker")})})},resetLinkerText:function(e){var t=null;if(null!=e.textPos){var i=Utils.getLinkerLinesPoints(e);e.textPos.t>i.length&&(e.textPos.t=i.length-1),null!=(t=i[e.textPos.t])&&(e.textPos.x=t.x,e.textPos.y=t.y)}},removeShape:function(){var e=Utils.getSelected();if(e.length>0){Utils.unselect(),Designer.op.linkIconHide();var t=Utils.getAttachedShapes(e);e=e.concat(t);for(var i=[],n=0;n<e.length;n++){var r=Utils.getChildrenShapes(e[n]);i=i.concat(r)}e=e.concat(i);var o=Utils.getCollapsedShapes(e);e=e.concat(o),Model.remove(e),Model.define.page.showPrintLine&&Designer.op.changeCanvas(),$("#po-flow-dock-layout-chartdata").hasClass("hide")||(Dock.hide(),$(".pop-sub-editor>div[data-key='editData']").removeClass("active"),$("#po-flow-dock-layout-chartdata").addClass("hide"))}},setDefaultStyle:function(){var e=Utils.getSelected();if(1==e.length){var t=e[0];if("standardImage"==t.name||"note"==t.name||"uiNote"==t.name)return"error";if(null!=t.category&&(t.category.indexOf("ios_")>=0||t.category.indexOf("andriod_")>=0))return"error";if(null!=t.category&&t.category.indexOf("network")>=0)return"error";if(null!=t.category&&(t.category.indexOf("aws_")>=0||t.category.indexOf("azure")>=0||t.category.indexOf("aws2019")>=0))return"error";if(null!=t.category&&(t.category.indexOf("ali_")>=0||t.category.indexOf("cisco_")>=0))return"error";var i={},n="shape";"linker"==t.name?(n="linker",i={linkerStyle:Utils.copy(t.lineStyle)}):"horizontal"==(i={lineStyle:Utils.copy(t.lineStyle),fontStyle:Utils.copy(t.fontStyle),fillStyle:Utils.copy(t.fillStyle)}).fontStyle.orientation&&delete i.fontStyle.orientation,Model.setDefaultStyle(n,i)}},showTip:function(e){var t=$("#designer_op_tip");0==t.length&&(t=$("<div id='designer_op_tip'></div>").appendTo("#designer_canvas")),t.stop().html(e);var i=$("#shape_controls"),n=Utils.restoreScale(i.position());t.css({top:n.top+i.height()+5,left:n.left+i.width()/2-t.outerWidth()/2,"z-index":Model.orderList.length+3,transform:"scale("+1..restoreScale()+")",transformOrigin:"center top"}).show()},showRotateTip:function(e){var t=$("#shape_rotate_tip");0==t.length&&(t=$("<div id='shape_rotate_tip'></div>").appendTo(".shape_rotater")),t.stop().html(e+"°");$("#shape_controls").position();t.css({"z-index":Model.orderList.length,transform:"rotate("+-e+"deg)"}).show()},hideTip:function(){$("#designer_op_tip").fadeOut(100),$("#shape_rotate_tip").fadeOut(100)},snapLine:function(e,t,i,n){var r=e.y,o=e.y+e.h/2,a=e.y+e.h,s=e.x,l=e.x+e.w/2,p=e.x+e.w,h={v:null,h:null,attach:null,container:null,hLinePosS:[],vLinePosS:[]},d=null;if(d=i||Model.getShapeById(t[0]),1==t.length&&"boundaryEvent"==d.groupName)for(var c=Model.orderList.length-1;c>=0;c--){var u=Model.orderList[c].id;if((!(_=Model.getShapeById(u)).attribute||!_.attribute.collapseBy)&&("linker"!=_.name&&_.id!=d.id)){var g=_.props;if(null==h.attach&&0==g.angle&&("task"==_.groupName||"callActivity"==_.groupName||"subProcess"==_.groupName)){var y={x:g.x-2,y:g.y-2,w:g.w+4,h:g.h+4};if(Utils.pointInRect(l,o,y)){var f=g.y,x=g.y+g.h,v=g.x,m=g.x+g.w,b=!1,w=!1;f>=o-2&&f<=o+2?(e.y=f-e.h/2,w=!0):x>=o-2&&x<=o+2&&(e.y=x-e.h/2,w=!0),v>=l-2&&v<=l+2?(e.x=v-e.w/2,b=!0):m>=l-2&&m<=l+2&&(e.x=m-e.w/2,b=!0),(b||w)&&(h.attach=_)}}}}this.hideSnapLine();var S=$("#designer_canvas");if(null==h.attach){var k=[],M=[];for(c=n.length-1;c>=0;c--){var _,D=n[c],P={top:D.y,middle:D.y+D.h/2,bottom:D.y+D.h,left:D.x,center:D.x+D.w/2,right:D.x+D.w,id:D.id};if(Utils.rectInRect(D,e)||Utils.rectInRect(e,D)||Utils.rectCross(D,e)||(P.top>a+6||P.bottom<r-6?P.left>p+6||P.right<s-6||M.push(P):k.push(P)),null==h.container)if((_=Model.getShapeById(D.id)).attribute&&_.attribute.container){var U=Utils.copy(e);Utils.rectInRect(U,_.props)&&(h.container=_)}}Utils.getShapeRuleLine(e,k,M)}if(null!=h.attach||null!=h.container){var L=$("#designer_op_snapline_attach");0==L.length&&(L=$("<div id='designer_op_snapline_attach'></div>").appendTo(S));var I=h.attach||h.container,C=Utils.getShapeLineStyle(I.lineStyle).lineWidth;L.css({width:I.props.w+C,height:I.props.h+C,left:I.props.x-C/2-2,top:I.props.y-C/2-2,"z-index":$("#"+I.id).css("z-index")}).show()}return h},snapLinkerLine:function(e,t){for(var i={v:null,h:null},n=Model.orderList.length-1;n>=0;n--){var r=Model.orderList[n].id,o=Model.getShapeById(r);if((!o.attribute||!o.attribute.collapseBy)&&("linker"!=o.name&&!o.parent)){var a=o.props;if(null==i.h){var s=a.y,l=a.y+a.h;s>=t-2&&s<=t+2?i.h=s:l>=t-2&&l<=t+2&&(i.h=l)}if(null==i.v){var p=a.x,h=a.x+a.w;p>=e-2&&p<=e+2?i.v=p:h>=e-2&&h<=e+2&&(i.v=h)}if(null!=i.h&&null!=i.v)break}}this.hideSnapLine();var d=$("#designer_canvas");if(null!=i.h){var c=$(".designer_op_snapline_h");0==c.length&&(c=$("<div class='designer_op_snapline_h'></div>").appendTo(d)),c.css({width:d.width()+2*Designer.config.pageMargin,left:-Designer.config.pageMargin,top:Math.round(i.h),"z-index":Model.orderList.length+1}).show()}if(null!=i.v){var u=$(".designer_op_snapline_v");0==u.length&&(u=$("<div class='designer_op_snapline_v'></div>").appendTo(d)),u.css({height:d.height()+2*Designer.config.pageMargin,top:-Designer.config.pageMargin,left:Math.round(i.v),"z-index":Model.orderList.length+1}).show()}var g={x:e,y:t};return null!=i.h&&(g.y=i.h),null!=i.v&&(g.x=i.v),g},snapResizeLine:function(e,t,i){for(var n=e.y,r=e.y+e.h/2,o=e.y+e.h,a=e.x,s=e.x+e.w/2,l=e.x+e.w,p={v:null,h:null},h=Model.orderList.length-1;h>=0;h--){var d=Model.orderList[h].id,c=Model.getShapeById(d);if((!c.attribute||!c.attribute.collapseBy)&&!("linker"==c.name||t.indexOf(d)>=0||c.parent)){var u=c.props;if(null==p.h&&(i.indexOf("t")>=0||i.indexOf("b")>=0)){var g=u.y,y=u.y+u.h/2,f=u.y+u.h;y>=r-2&&y<=r+2?(p.h={type:"middle",y:y},i.indexOf("t")>=0?(e.h=2*(o-y),e.y=o-e.h):e.h=2*(y-e.y)):i.indexOf("t")>=0&&g>=n-2&&g<=n+2?(p.h={type:"top",y:g},e.y=g,e.h=o-g):i.indexOf("b")>=0&&f>=o-2&&f<=o+2?(p.h={type:"bottom",y:f},e.h=f-n):i.indexOf("t")>=0&&f>=n-2&&f<=n+2?(p.h={type:"top",y:f},e.y=f,e.h=o-f):i.indexOf("b")>=0&&g>=o-2&&g<=o+2&&(p.h={type:"bottom",y:g},e.h=g-e.y)}if(null==p.v&&(i.indexOf("l")>=0||i.indexOf("r")>=0)){var x=u.x,v=u.x+u.w/2,m=u.x+u.w;v>=s-2&&v<=s+2?(p.v={type:"center",x:v},i.indexOf("l")>=0?(e.w=2*(l-v),e.x=l-e.w):e.w=2*(v-e.x)):i.indexOf("l")>=0&&x>=a-2&&x<=a+2?(p.v={type:"left",x:x},e.x=x,e.w=l-x):i.indexOf("r")>=0&&m>=l-2&&m<=l+2?(p.v={type:"right",x:m},e.w=m-e.x):i.indexOf("l")>=0&&m>=a-2&&m<=a+2?(p.v={type:"left",x:m},e.x=m,e.w=l-m):i.indexOf("r")>=0&&x>=l-2&&x<=l+2&&(p.v={type:"right",x:x},e.w=x-e.x)}if(null!=p.h&&null!=p.v)break}}this.hideSnapLine();var b=$("#designer_canvas");if(null!=p.h){var w=$(".designer_op_snapline_h");0==w.length&&(w=$("<div class='designer_op_snapline_h'></div>").appendTo(b)),w.css({width:b.width()+2*Designer.config.pageMargin,left:-Designer.config.pageMargin,top:Math.round(p.h.y),"z-index":Model.orderList.length+1}).show()}if(null!=p.v){var S=$(".designer_op_snapline_v");0==S.length&&(S=$("<div class='designer_op_snapline_v'></div>").appendTo(b)),S.css({height:b.height()+2*Designer.config.pageMargin,top:-Designer.config.pageMargin,left:Math.round(p.v.x),"z-index":Model.orderList.length+1}).show()}return p},drawSnpLine:function(e,t,i){i=i||"";var n,r,o=$("#designer_canvas");if(void 0!==e&&void 0!==e)if(n=Utils.copy(e),r=Utils.copy(t),Math.abs(n.x-r.x)<2){var a="";a="line"==i?"<span class='text' style='top:"+Math.round(r.y-n.y)/2+"px;'>"+Math.round(r.y-n.y)+"px</span>":"<span class='top'><span class='po-diagraming-icons'>&#xe869;</span></span><span class='bottom'><span class='po-diagraming-icons'>&#xe86b;</span></span><span class='text' style='top:"+Math.round(r.y-n.y)/2+"px;'>"+Math.round(r.y-n.y)+"px</span>",$("<div class='designer_op_snapline_v "+i+"'>"+a+"</div>").appendTo(o).css({height:Math.round(r.y-n.y),left:Math.round(n.x),top:Math.round(n.y),"z-index":Model.orderList.length+1})}else if(Math.abs(n.y-r.y)<2){a="line"==i?"<span class='text'>"+Math.round(r.x-n.x)+"px</span>":"<span class='left'><span class='po-diagraming-icons'>&#xe690;</span></span><span class='right'><span class='po-diagraming-icons'>&#xe86a;</span></span><span class='text'>"+Math.round(r.x-n.x)+"px</span>",$("<div class='designer_op_snapline_h "+i+"'>"+a+"</div>").appendTo(o).css({width:Math.round(r.x-n.x),left:Math.round(n.x),top:Math.round(n.y),"z-index":Model.orderList.length+1})}},hideSnapLine:function(){$(".designer_op_snapline_h").remove(),$(".designer_op_snapline_v").remove(),$("#designer_op_snapline_attach").remove()},showLaneInsertLine:function(e){for(var t,i="verticalLane"==e.name?"verticalPool":"horizontalPool",n=Model.orderList.length-1;n>=0;n--){var r=Model.orderList[n].id,o=Model.getShapeById(r);if(o.name==i&&Utils.rectCross(o.props,e.props)){t=o;break}}if(t){var a,s;for(n=0;n<t.children.length;n++){var l=t.children[n],p=Model.getShapeById(l);p?"verticalLane"==e.name&&"verticalLane"==p.name?(p.props.x+p.props.w/2<e.props.x+e.props.w/2&&(!a||a.props.x<p.props.x)&&(a=p),(!s||s.props.x>p.props.x)&&(s=p)):"horizontalLane"==e.name&&p&&"horizontalLane"==p.name&&(p.props.y+p.props.h/2<e.props.y+e.props.h/2&&(!a||a.props.y<p.props.y)&&(a=p),(!s||s.props.y>p.props.y)&&(s=p)):(t.children.splice(n,1),n--)}if(a||s){var h=0,d=0,c=0,u=0;"verticalLane"==e.name?a?(h=a.props.x+a.props.w,d=a.props.y,u=a.props.h):(h=s.props.x,d=s.props.y,u=s.props.h):"horizontalLane"==e.name&&(a?(h=a.props.x,d=a.props.y+a.props.h,c=a.props.w):(h=s.props.x,d=s.props.y,c=s.props.w));var g=$(".designer_op_lane_insert");return g.length||(g=$('<div class="designer_op_lane_insert"></div>').appendTo("#designer_canvas")),g.css({width:c+4,height:u+4,position:"absolute",left:h-2,top:d-2,background:"#067bef","z-index":Model.orderList.length+1}),a?(Utils.shapesToRound([a]),{beforeLane:Utils.copy(a)}):s?(Utils.shapesToRound([s]),{afterLane:Utils.copy(s)}):void 0}this.hideLaneInsertLine()}else this.hideLaneInsertLine()},hideLaneInsertLine:function(){$(".designer_op_lane_insert").remove()},updateShapeByLaneInsert:function(e){var t=e&&e.beforeLane||null,i=e&&e.afterLane||null,n=t?t.parent:i.parent,r=Model.getShapeById(n),o=0,a=0,s=0,l=0;"verticalPool"==r.name?(o=t?t.props.x+t.props.w:i.props.x,s=t?t.props.w:i.props.w):"horizontalPool"==r.name&&(a=t?t.props.y+t.props.h:i.props.y,l=t?t.props.h:i.props.h),Utils.unselect();for(var p=Utils.getContainedShapes([r]),h=[],d=0,c=p.length;d<c;d++){var u=p[d],g=$("#"+u.id),y={x:u.props.x+u.props.w/2,y:u.props.y+u.props.h/2};s&&o<y.x?(u.props.x+=s,h.push(u),g.css({left:parseFloat(g.css("left"))+s})):l&&a<y.y&&(u.props.y+=l,h.push(u),g.css({top:parseFloat(g.css("top"))+l}))}var f=h.map(function(e){return e.id}),x=Utils.getOutlinkers(h);for(d=0,c=x.length;d<c;d++){var v=x[d],m=v.from.id,b=v.to.id;m&&-1!=f.indexOf(m)&&(v.from.x+=s,v.from.y+=l),b&&-1!=f.indexOf(b)&&(v.to.x+=s,v.to.y+=l),Designer.painter.renderLinker(v,!0)}h=h.concat(x),Model.updateMulti(h)},linkDashboard:function(e){var t=0,i=0,n=null,r="string"!=typeof e;if(r){n=Model.getShapeById(e.from.id),t=e.to.x,i=e.to.y;var o=Utils.getEndpointAngle(e,"to"),a=Math.round(o/(Math.PI/2));if(1==a||3==a?t+=7:i+=7,!n.attribute.linkable)return}else t=(n=Model.getShapeById(e)).props.x+n.props.w,i=n.props.y;var s=n.category;if(0!=$("#panel_"+s).length){var l=$("#shape_dashboard_"+s);if(0==l.length){function p(e,t){var i="<div class='dashboard_box' shapeName='"+e.name+"'><canvas original-title='"+e.title+"' title-pos='right' class='panel_item' width='"+Designer.config.panelItemWidth+"' height='"+Designer.config.panelItemHeight+"'></canvas></div>",n=$(i).appendTo(l);t&&n.append("<div class='group_icon link_shape_icon' group='"+t+"'></div>");var r=n.children()[0];Designer.painter.drawPanelItem(r,e.name)}for(var h in l=$("<div id='shape_dashboard_"+s+"' class='shape_dashboard menu' style='display:none;'></div>").appendTo("#designer_canvas"),Schema.shapes){var d=Schema.shapes[h];if(d.category==s){var c=d.attribute,u=d.anchors||[];if(c.visible&&c.linkable&&u.length>0&&!d.name.startsWith("chart_"))if(d.groupName)SchemaGroup.getGroup(d.groupName)[0]==d.name&&p(d,d.groupName);else p(d)}}l.bind("mousemove",function(e){e.stopPropagation()}).bind("mousedown",function(e){e.stopPropagation()})}if(l.children().length){l.css({left:t,top:i,"z-index":Model.maxZIndex+2,transform:"scale("+1..restoreScale()+")",transformOrigin:"0 0"}).show();var g=$("#designer_layout").width()-10,y=$("#designer_layout").height()-10,f=$("#designer_layout").offset(),x=l.innerWidth(),v=l.innerHeight(),m=l.offset();m.left<f.left?t+=f.left-m.left:m.left+x>f.left+g&&(t-=m.left+x-(f.left+g)),m.top<f.top?i+=f.top-m.top:m.top+v>f.top+y&&(i-=m.top+v-(f.top+y)),l.css({left:t,top:i})}function b(t){if(Designer.events.push("testVip","flowShapeNum")){var i,n=Schema.shapes[t],r=Utils.getEndpointAngle(e,"to"),o=Utils.getAngleDir(r),a=n.getAnchors(),s=n.props.w/2,l=n.props.h/2;if(1==o)for(var p=null,h=0;h<a.length;h++){var d=a[h];null==p||d.y<p?(p=d.y,i=d):d.y==p&&Math.abs(d.x-s)<Math.abs(i.x-s)&&(i=d)}else if(2==o){var c=null;for(h=0;h<a.length;h++){d=a[h];null==c||d.x>c?(c=d.x,i=d):d.x==c&&Math.abs(d.y-l)<Math.abs(i.y-l)&&(i=d)}}else if(3==o){var u=null;for(h=0;h<a.length;h++){d=a[h];null==u||d.y>u?(u=d.y,i=d):d.y==u&&Math.abs(d.x-s)<Math.abs(i.x-s)&&(i=d)}}else if(4==o){var g=null;for(h=0;h<a.length;h++){d=a[h];null==g||d.x<g?(g=d.x,i=d):d.x==g&&Math.abs(d.y-l)<Math.abs(i.y-l)&&(i=d)}}var y=Model.create(t,e.to.x-i.x,e.to.y-i.y);void 0===y.lineStyle.lineWidth&&(y.lineStyle.lineWidth=Designer.defaults.lineWidth),Designer.painter.renderShape(y),MessageSource.beginBatch(),y.onCreated&&y.onCreated();for(var f=[],x=Model.orderList.length-1;x>=0;x--){var v=Model.orderList[x].id;if((!(n=Model.getShapeById(v)).attribute||!n.attribute.collapseBy)&&("linker"!=n.name&&!n.parent)){var m=Utils.getControlBox([v]);m.id=v,f.push(m)}}var b=y.props,w=Designer.op.snapLine(b,[y.id],y,f);w.container&&(y.container=w.container.id),Designer.events.push("created",y),Model.add(y);var S=Utils.getPointAngle(y.id,e.to.x,e.to.y,7);e.to.id=y.id,e.to.angle=S,Designer.painter.renderLinker(e,!0),Model.update(e),MessageSource.commit(),Utils.unselect(),Utils.selectShape(y.id),Designer.op.editShapeText(y),Designer.op.hideSnapLine(),Designer.op.changeCanvas(y.props),Designer.events.push("linkerCreated",e)}}l.find(".link_shape_icon").unbind().bind("mousedown",function(t){t.stopPropagation();var i=$(this).attr("group"),n=$(this).parent().position(),o=l.position(),a=n.left+o.left+$(this).parent().outerWidth()-10,s=n.top+o.top+$(this).parent().outerHeight();Designer.op.groupDashboard(i,a,s,function(t){r?b(t):Designer.op.shapeReplace(t,e),l.hide(),$(document).unbind("mousedown.dashboard")})}).bind("click",function(e){e.stopPropagation()}),l.children(".dashboard_box").unbind().bind("click",function(){l.hide(),$(document).unbind("mousedown.dashboard");var t=$(this).attr("shapeName");r?b(t):Designer.op.shapeReplace(t,e),$("#hover_tip").length>0&&$("#hover_tip").remove()}),$(document).bind("mousedown.dashboard",function(){l.hide(),$(document).unbind("mousedown.dashboard")})}},groupDashboard:function(e,t,i,n){$(".group_dashboard").hide();var r=$("#shape_group_dashboard_"+e);if(0==r.length){r=$("<div id='shape_group_dashboard_"+e+"' class='shape_group_dashboard menu'></div>").appendTo("#designer_canvas");for(var o=SchemaGroup.getGroup(e),a=0;a<o.length;a++){var s=o[a],l=Schema.shapes[s];if(l.attribute.visible){var p=$("<div class='dashboard_box' shapeName='"+s+"'><canvas title='"+l.title+"' title_pos='right' width='"+Designer.config.panelItemWidth+"' height='"+Designer.config.panelItemHeight+"'></canvas></div>").appendTo(r).children("canvas")[0];Designer.painter.drawPanelItem(p,l.name)}}r.bind("mousedown",function(e){e.stopPropagation()})}r.css({left:t,top:i,"z-index":Model.maxZIndex+3}).show();var h=$("#designer_layout").width()-10,d=$("#designer_layout").height()-10,c=$("#designer_layout").offset(),u=r.innerWidth(),g=r.innerHeight(),y=r.offset();return y.left<c.left?t+=c.left-y.left:y.left+u>c.left+h&&(t-=y.left+u-(c.left+h)),y.top<c.top?i+=c.top-y.top:y.top+g>c.top+d&&(i-=y.top+g-(c.top+d)),r.css({left:t,top:i}),$(".dashboard_box").unbind().bind("click",function(){var e=$(this).attr("shapeName");n(e),r.hide(),$(document).unbind("mousedown.group_dashboard")}),$(document).bind("mousedown.group_dashboard",function(){r.hide(),$(document).unbind("mousedown.group_dashboard")}),r},showPanelGroup:function(e,t,i){t.stopPropagation();var n=$("#group_dashboard_"+e);if($(".group_dashboard").hide(),0==n.length){n=$("<div id='group_dashboard_"+e+"' class='group_dashboard menu'></div>").appendTo("#designer");for(var r=SchemaGroup.getGroup(e),o=0;o<r.length;o++){var a=r[o],s=Schema.shapes[a];if(s.attribute.visible){var l=$("<div class='panel_box' shapeName='"+a+"'><canvas title='"+s.title+"' title_pos='right' width='"+Designer.config.panelItemWidth+"' height='"+Designer.config.panelItemHeight+"'></canvas></div>").appendTo(n).children("canvas")[0];Designer.painter.drawPanelItem(l,s.name)}}n.css("position","fixed")}var p=$(i).parent(),h=p.offset();n.show();var d=h.top+p.outerHeight()-2;d+n.outerHeight()>$(window).height()&&(d=$(window).height()-n.outerHeight()),n.css({left:h.left-5,top:d}),$(document).bind("mousedown.group_board",function(){n.hide(),$(document).unbind("mousedown.group_board")})},changeShapeProps:function(e,t,i){function n(i){if(void 0!==t.x&&(i.x+=t.x-e.props.x),void 0!==t.y&&(i.y+=t.y-e.props.y),void 0!==t.w||void 0!==t.h||void 0!==t.angle){var n=$.extend({},e.props,t),r={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2},o=Utils.getRotated(r,i,-e.props.angle),a=e.props.w,s=e.props.h;void 0!==t.w?(i.x=e.props.x+(o.x-e.props.x)/e.props.w*t.w,a=t.w):i.x=o.x,void 0!==t.h?(i.y=e.props.y+(o.y-e.props.y)/e.props.h*t.h,s=t.h):i.y=o.y;var l={x:e.props.x+a/2,y:e.props.y+s/2},p=Utils.getRotated(l,i,n.angle);i.x=p.x,i.y=p.y}void 0!==t.angle&&(i.angle+=t.angle-e.props.angle)}var r=[],o=(i=i||[],Model.getShapeLinkers(e.id));if(o&&o.length>0)for(var a=0;a<o.length;a++){var s=o[a],l=Model.getShapeById(s);e.id==l.from.id&&i.indexOf(l.id)<0&&n(l.from),e.id==l.to.id&&i.indexOf(l.id)<0&&n(l.to),i.indexOf(l.id)<0&&r.push(l.id)}return $.extend(e.props,t),Designer.painter.renderShape(e),Utils.showLinkerCursor(),UI.showShapeOptions(),r},googleImgCallback:function(e){for(var t=e.responseData.results,i=0;i<t.length;i++){var n=t[i];UI.appendGoogleImage(n)}$("#google_image_items").append("<div style='clear: both'></div>"),$(".img_gg_loading_tip").remove(),$(".gg_img_more").remove(),this.searchIndex<=3&&$("#google_image_items").append("<div onclick='UI.loadGoogleImg()' class='gg_img_more toolbar_button active'></div>")},scrollStv:null,scrollIsOver:!1,scrollLayout:null,scrollPos:{},initScrollPos:function(){var e=$("#designer");this.scrollLayout=$("#designer_layout"),this.scrollPos.b=e.height()+e.offset().top-30,this.scrollPos.t=e.offset().top+20,this.scrollPos.l=e.find("#shape_panel").width()+20,this.scrollPos.r=e.width()-20},isScroll:function(e,t){e<this.scrollPos.l?this.startScroll("l"):e>this.scrollPos.r?this.startScroll("r"):t<this.scrollPos.t?this.startScroll("t"):t>this.scrollPos.b?this.startScroll("b"):this.scrollIsOver&&this.stopScroll()},stopScroll:function(){window.clearInterval(this.scrollStv),this.scrollStv=null,this.scrollIsOver=!1},startScroll:function(e){var t=this;t.scrollIsOver||(t.scrollIsOver=!0,t.scrollStv=setInterval(function(){t.scrolling(e)},20))},scrolling:function(e){var t=this.scrollLayout;switch(e){case"t":t.scrollTop(t.scrollTop()-5);break;case"b":t.scrollTop(t.scrollTop()+5);break;case"l":break;case"r":t.scrollLeft(t.scrollLeft()+5)}},uploading:!1,uploadImage:function(e){return new Promise(function(t,i){poAjax({data:{img:e},success:function(e){t(e.url)},error:function(e){t(null)}},"uploadImage64")})},changeCanvas:function(e){if(Model.define.page.showPrintLine){var t=Utils.getPrintPageSize(),i=Model.define.page.width,n=Model.define.page.height;t.width==i&&t.height==n||Designer.setPageStyle({width:t.width,height:t.height})}else{i=Model.define.page.width,n=Model.define.page.height;var r=e.x,o=e.y,a=e.w,s=e.h,l={};"landscape"==Model.define.page.orientation?(r+a>n&&(l.height=Math.floor(r+a)+30),o+s>i&&(l.width=Math.floor(o+s)+30)):(r+a>i&&(l.width=Math.floor(r+a)+30),o+s>n&&(l.height=Math.floor(o+s)+30)),(l.width||l.height)&&Designer.setPageStyle(l)}}},events:{push:function(e,t){var i=this.listeners[e];if(i){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return i.apply(void 0,[t].concat(r))}return null},listeners:{},addEventListener:function(e,t){this.listeners[e]=t}},clipboard:{brush:function(){var e=Utils.getSelected();if(0!=e.length){for(var t={fontStyle:{},lineStyle:{},fillStyle:null,shapeStyle:null},i=0;i<e.length;i++){var n=e[i];if("linker"==n.name)$.extend(t.lineStyle,n.lineStyle),$.extend(t.fontStyle,n.fontStyle);else{null==t.fillStyle&&(t.fillStyle={}),null==t.shapeStyle&&(t.shapeStyle={});var r=Utils.getGridSelectedCells();if(r.length>0)for(var o=0;o<r.length;o++){var a=r[o].textBlock,s=r[o].path;$.extend(t.fontStyle,a.fontStyle),$.extend(t.fillStyle,s.fillStyle)}else $.extend(t.lineStyle,n.lineStyle),$.extend(t.fontStyle,n.fontStyle),$.extend(t.shapeStyle,n.shapeStyle),$.extend(t.fillStyle,n.fillStyle)}}delete t.fontStyle.orientation,$("#po-flow-brush").button("select").attr("title","格式刷生效中  ESC取消"),$(document).off("keydown.cancelbrush").on("keydown.cancelbrush",function(e){27==e.keyCode&&Designer.events.push("useBrush","unbrush")}),Utils.selectCallback=function(){for(var e=Utils.getSelected(),i=0;i<e.length;i++){var n=e[i];if("grid"==n.category){var r=Utils.getGridSelectedCells();if(r.length>0)for(var o=0;o<r.length;o++){var a=r[o].textBlock,s=r[o].path;a.fontStyle=t.fontStyle,s.fillStyle=t.fillStyle}}else $.extend(n.lineStyle,t.lineStyle),$.extend(n.fontStyle,t.fontStyle),"linker"!=n.name?(n.lineStyle=t.lineStyle,delete n.lineStyle.beginArrowStyle,delete n.lineStyle.endArrowStyle,null!=t.fillStyle&&(n.fillStyle=t.fillStyle),null!=t.shapeStyle&&(n.shapeStyle=t.shapeStyle)):(n.fontStyle&&delete n.fontStyle.vAlign,n.lineStyle&&0==n.lineStyle.lineWidth&&(n.lineStyle.lineWidth=.5));"linker"!=n.name&&Schema.initShapeFunctions(n),Designer.painter.renderShape(n)}Model.updateMulti(e)}}}},addFunction:function(e,t){if(Designer[e])throw"Duplicate function name!";this[e]=t},painter:{actions:{move:function(e){this.moveTo(e.x,e.y),this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},line:function(e){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth){for(var t=this.webkitLineDash,i=this.prePoint,n=0,r=1/Utils.measureDistance(i,e),o=i,a=0,s=!0;n<1;){(n+=r)>1&&(n=1);var l={x:(1-n)*i.x+n*e.x,y:(1-n)*i.y+n*e.y};(Utils.measureDistance(o,l)>=t[a]||n>=1)&&(s?this.lineTo(l.x,l.y):this.moveTo(l.x,l.y),s=!s,o=l,++a>=t.length&&(a=0))}this.moveTo(e.x,e.y)}else this.lineTo(e.x,e.y);this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},curve:function(e){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth){for(var t=this.webkitLineDash,i=this.prePoint,n=0,r=1/Utils.measureDistance(i,e),o=i,a=0,s=!0,l=0;n<1;){(n+=r)>1&&(n=1);var p={x:i.x*Math.pow(1-n,3)+e.x1*n*Math.pow(1-n,2)*3+e.x2*Math.pow(n,2)*(1-n)*3+e.x*Math.pow(n,3),y:i.y*Math.pow(1-n,3)+e.y1*n*Math.pow(1-n,2)*3+e.y2*Math.pow(n,2)*(1-n)*3+e.y*Math.pow(n,3)};if(Utils.measureDistance(o,p)>=t[a]||n>=1){if(s){var h=l+(n-l)/2,d={x:i.x*Math.pow(1-h,3)+e.x1*h*Math.pow(1-h,2)*3+e.x2*Math.pow(h,2)*(1-h)*3+e.x*Math.pow(h,3),y:i.y*Math.pow(1-h,3)+e.y1*h*Math.pow(1-h,2)*3+e.y2*Math.pow(h,2)*(1-h)*3+e.y*Math.pow(h,3)};this.lineTo(d.x,d.y),this.lineTo(p.x,p.y)}else this.moveTo(p.x,p.y);s=!s,o=p,l=n,++a>=t.length&&(a=0)}}this.moveTo(e.x,e.y)}else this.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y);this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},quadraticCurve:function(e){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth){for(var t=this.webkitLineDash,i=this.prePoint,n=0,r=1/Utils.measureDistance(i,e),o=i,a=0,s=!0,l=0;n<1;){(n+=r)>1&&(n=1);var p={x:i.x*Math.pow(1-n,2)+e.x1*n*(1-n)*2+e.x*Math.pow(n,2),y:i.y*Math.pow(1-n,2)+e.y1*n*(1-n)*2+e.y*Math.pow(n,2)};if(Utils.measureDistance(o,p)>=t[a]||n>=1){if(s){var h=l+(n-l)/2,d={x:i.x*Math.pow(1-h,2)+e.x1*h*(1-h)*2+e.x*Math.pow(h,2),y:i.y*Math.pow(1-h,2)+e.y1*h*(1-h)*2+e.y*Math.pow(h,2)};this.lineTo(d.x,d.y),this.lineTo(p.x,p.y)}else this.moveTo(p.x,p.y);s=!s,o=p,l=n,++a>=t.length&&(a=0)}}this.moveTo(e.x,e.y)}else this.quadraticCurveTo(e.x1,e.y1,e.x,e.y);this.prePoint=e,null==this.beginPoint&&(this.beginPoint=e)},close:function(){if(void 0!==this.webkitLineDash&&void 0===this.lineDashOffset&&0!=this.lineWidth)for(var e=this.webkitLineDash,t=this.prePoint,i=this.beginPoint,n=0,r=1/Utils.measureDistance(t,i),o=t,a=0,s=!0;n<1;){(n+=r)>1&&(n=1);var l={x:(1-n)*t.x+n*i.x,y:(1-n)*t.y+n*i.y};(Utils.measureDistance(o,l)>=e[a]||n>=1)&&(s?this.lineTo(l.x,l.y):this.moveTo(l.x,l.y),s=!s,o=l,++a>=e.length&&(a=0))}this.closePath()},rect:function(e,t,i){t&&"none"==t.type?(t={color:"transparent"},this.fillStyle="transparent"):(t=t||{color:"255,255,255"},this.fillStyle="rgb("+t.color+")"),i=i||{},this.fillRect(e.x,e.y,e.w,e.h),this.strokeStyle="rgb("+i.lineColor+")",this.lineWidth=i.lineWidth,this.strokeRect(e.x,e.y,e.w,e.h)}},setLineDash:function(e,t){e.setLineDash||(e.setLineDash=function(){}),e.setLineDash(t),e.mozDash=t,e.webkitLineDash=t},renderShapePath:function(e,t,i,n,r){var o;o=i&&t.drawIcon?t.drawIcon(t.props.w,t.props.h):t.getPath(),r&&(i=r),this.renderPath(e,t,o,i,n)},renderPath:function(e,t,i,n,r){var o=Utils.getShapeFillStyle(t.fillStyle,!n),a=Utils.getShapeLineStyle(t.lineStyle,!n);if("grid"==t.category&&t.merge&&i.length>1)for(var s=t.merge||[],l=0;l<s.length;l++){var p=s[l],h=p[0],d=p[p.length-1];i[h].actions[0].w=i[d].actions[0].w+i[d].actions[0].x-i[h].actions[0].x,i[h].actions[0].h=i[d].actions[0].h+i[d].actions[0].y-i[h].actions[0].y;for(var c=1;c<p.length;c++)i[p[c]].jump=!0}for(l=0;l<i.length;l++){var u=i[l];e.save();var g=$.extend({},a,u.lineStyle),y=$.extend({},o,u.fillStyle);if("grid"!=t.category){var f=!1;if("solid"!=g.lineStyle&&void 0===e.lineDashOffset&&"none"!=y.type&&(f=!0),f){e.save(),e.beginPath(),e.lineWidth=0,delete e.webkitLineDash;for(c=0;c<u.actions.length;c++){v=u.actions[c];this.actions[v.action].call(e,v)}this.fillShape(t,e,y,r),e.restore()}e.beginPath(),e.beginPoint=null,g.lineWidth?(e.lineWidth=g.lineWidth,"dashed"==g.lineStyle?n?this.setLineDash(e,[3*g.lineWidth,1*g.lineWidth]):this.setLineDash(e,[5*g.lineWidth,2*g.lineWidth]):"dot"==g.lineStyle?this.setLineDash(e,[g.lineWidth,1.5*g.lineWidth]):"dashdot"==g.lineStyle?this.setLineDash(e,[5*g.lineWidth,2*g.lineWidth,g.lineWidth,2*g.lineWidth]):delete e.webkitLineDash):(e.lineWidth=0,delete e.webkitLineDash);for(c=0;c<u.actions.length;c++){v=u.actions[c];1==g.lineWidth&&(v.x+=.5,v.y+=.5),this.actions[v.action].call(e,v)}0==f&&this.fillShape(t,e,y,r),g.lineWidth&&(e.lineWidth=g.lineWidth,e.strokeStyle="rgb("+g.lineColor+")",e.stroke()),e.restore()}else{if(u.jump)continue;for(var c=0,x=u.actions.length;c<x;c++){var v=u.actions[c];n||"rect"!=v.action||(t.theme=t.theme||{},"header"==t.theme.name?y=0==u.row?"255,255,255"==o.color?$.extend({},{type:"solid",color:"240, 240, 240"},t.theme.row[0].fillStyle,u.fillStyle):$.extend({},o,t.theme.row[0].fillStyle,u.fillStyle):$.extend({},o,t.theme.row[1].fillStyle,u.fillStyle):"striping"==t.theme.name&&(t.theme.row&&(y="255,255,255"==o.color?$.extend({},{type:"solid",color:"240, 240, 240"},t.theme.row[u.row%2].fillStyle,u.fillStyle):$.extend({},o,t.theme.row[u.row%2].fillStyle,u.fillStyle)),t.theme.column&&(y="255,255,255"==o.color?$.extend({},{type:"solid",color:"240, 240, 240"},t.theme.column[u.column%2].fillStyle,u.fillStyle):$.extend({},o,t.theme.column[u.column%2].fillStyle,u.fillStyle)))),this.actions[v.action].call(e,v,y,g)}e.restore()}}},drawImage:function(e,t){var i=$(".shape_img[src='"+t.image+"']");0==i.length?((i=$("<img class='shape_img' loaded='0' src=''/>").appendTo("#shape_img_container")).bind("load.drawshape",function(){e.drawImage(i[0],t.x,t.y,t.w,t.h),$(this).attr("loaded","1")}),i.attr("src",t.image)):"0"==i.attr("loaded")?i.bind("load.drawshape",function(){e.drawImage(i[0],t.x,t.y,t.w,t.h)}):e.drawImage(i[0],t.x,t.y,t.w,t.h)},drawPanelItem:function(e,t,i,n){var r,o,a=e.getContext("2d"),s=Utils.copy(Schema.shapes[t]||Schema.shapes_[t]),l=i||Designer.config.panelItemWidth,p=n||Designer.config.panelItemHeight;("ui"==s.category||"ui_input"==s.category||s.category.indexOf("ios_")>=0||s.category.indexOf("andriod_")>=0)&&(l=30,p=30);var h={x:0,y:0,w:s.props.w,h:s.props.h,height:s.props.height,angle:s.props.angle};if(a.clearRect(0,0,l,p),null!==(o=(r=s.lineStyle).lineWidth)&&void 0!==o||(r.lineWidth=3),h.w>=l||h.h>=l){var d=Utils.getShapeLineStyle(s.lineStyle,!1);s.props.w>=s.props.h?(h.w=l-2*d.lineWidth,h.h=parseInt(s.props.h/s.props.w*h.w)):(h.h=p-2*d.lineWidth,h.w=parseInt(s.props.w/s.props.h*h.h))}s.props=h,a.save(),a.lineJoin="round",a.globalAlpha=s.shapeStyle.alpha;var c=(l-h.w)/2,u=(p-h.h)/2;a.translate(c,u),a.translate(h.w/2,h.h/2),a.rotate(h.angle),a.translate(-h.w/2,-h.h/2),this.renderShapePath(a,s,!0,function(){Designer.painter.drawPanelItem(e,t)}),this.renderMarkers(a,s,!0),a.restore()},drawPanelItemByShape:function drawPanelItemByShape(canvas,myshape,config){var myshape=Utils.copy(myshape),ctx=canvas.getContext("2d"),itemW=Designer.config.panelItemWidth-2,itemH=Designer.config.panelItemHeight-2,padding=1,isPanel=!0;config&&(itemW=config.width-2,itemH=config.height-2,padding=config.padding,isPanel=0!=config.isPanel);var boxPos={x:0,y:0,w:myshape.boxPos.w,h:myshape.boxPos.h,height:myshape.boxPos.height},scale=1;myshape.boxPos.w>=myshape.boxPos.h?myshape.boxPos.w>itemW&&(scale=itemW/myshape.boxPos.w,boxPos.w=itemW,boxPos.h=parseInt(myshape.boxPos.h/myshape.boxPos.w*boxPos.w)):myshape.boxPos.h>itemH&&(scale=itemH/myshape.boxPos.h,boxPos.h=itemH,boxPos.w=parseInt(myshape.boxPos.w/myshape.boxPos.h*boxPos.h)),myshape.boxPos=boxPos;for(var i=0;i<myshape.elements.length;i++){var shape=myshape.elements[i];if("linker"==shape.name){if(shape.from=resetPos(shape.from),shape.to=resetPos(shape.to),"broken"==shape.linkerType||"curve"==shape.linkerType)for(var j=0;j<shape.points.length;j++)shape.points[j]=resetPos(shape.points[j]);ctx.save(),ctx.lineJoin="round",shape.lineStyle.lineWidth=isPanel&&shape.lineStyle.lineWidth>.5?shape.lineStyle.lineWidth:.5,shape.lineStyle.lineColor||(shape.lineStyle.lineColor="50,50,50"),Designer.painter.renderPanelLinker(ctx,shape),ctx.restore()}else{var heightArr=[];shape.props.height&&heightArr.push(shape.props.height[0]*scale);var props={x:shape.props.x*scale,y:shape.props.y*scale,w:shape.props.w*scale,h:shape.props.h*scale,height:heightArr,angle:shape.props.angle};shape.props=props,ctx.save(),ctx.lineJoin="round",ctx.globalAlpha=shape.shapeStyle.alpha;var translateX=(itemW-boxPos.w)/2+shape.props.x,translateY=(itemH-boxPos.h)/2+shape.props.y;ctx.translate(translateX+padding,translateY+padding),ctx.translate(props.w/2,props.h/2),ctx.rotate(props.angle),ctx.translate(-props.w/2,-props.h/2),shape.lineStyle.lineWidth=isPanel&&shape.lineStyle.lineWidth>1?shape.lineStyle.lineWidth:1,"verticalPool"==shape.name&&(shape.drawIcon=function(e,t){var i=-4;return[{fillStyle:{type:"none"},actions:[{action:"move",x:i,y:0},{action:"line",x:e+=8,y:0},{action:"line",x:e,y:t},{action:"line",x:i,y:t},{action:"close"}]},{actions:[{action:"move",x:i,y:0},{action:"line",x:e,y:0},{action:"line",x:e,y:4},{action:"line",x:i,y:4},{action:"close"}]},{actions:[{action:"move",x:(i+e)/2,y:4},{action:"line",x:(i+e)/2,y:t}]}]}),shape.name.indexOf("Lane")>-1&&(shape.getPath=eval("(function(){return "+shape.getPath+" })()")),shape.name.indexOf("Separator")>-1&&(shape.getPath=eval("(function(){return "+shape.getPath+" })()")),shape.name.indexOf("note")>-1&&(shape.getPath=shape.getPath.toString().replace(/16/g,16*scale),shape.getPath=eval("(function(){return "+shape.getPath+" })()")),"text"==shape.name&&(shape.path[0].lineStyle.lineWidth=1,Schema.initShapeFunctions(shape)),shape.name.indexOf("Pool")>-1&&shape.children.length>0||this.renderShapePath(ctx,shape,!1,function(){Designer.painter.drawPanelItemByShape(canvas,myshape,config)},isPanel),this.renderMarkers(ctx,shape,!0),ctx.restore()}}function resetPos(e){return e.x=(e.x*scale+(itemW-boxPos.w)/2+padding)/2,e.y=(e.y*scale+(itemH-boxPos.h)/2+padding)/2,Utils.copy(e)}},drawChart:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("undefined"!=typeof components){var r,o=t.category,a=Utils.copy(t.drawChart);if(""!==i&&a[i])$.extend(!0,a.options,a[i],n),a.options.data=null!==(r=a[i].data)&&void 0!==r?r:a.options.data;var s=Object.assign({},a.info,{cdom:e})||{},l=a.options;Designer.painter.bindNewChart(o,s,l).init()}},bindNewChart:function(e,t,i){var n={chart_line:"ChartLine",chart_column:"ChartColumn",chart_bar:"ChartBar",chart_scatter:"ChartScatter",chart_bubble:"ChartScatter",chart_pie:"ChartPie"}[e];if(!n)throw new Error("未定义的图表类型：".concat(e));var r=components[n];if(!r)throw new Error("未定义的类：".concat(n));return new r(t,i)},toDataURL:function(e,t){var i=e.renderer,n="";if("svg"===i){var r=t.cloneNode(!0),o=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),a=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",o);a.replaceChild(r,a.documentElement);var s=(new XMLSerializer).serializeToString(a);n="data:image/svg+xml;charset=utf8,"+encodeURIComponent(s)}else"canvas"===i&&(n=t.toDataURL("image/png"));return n},createPanel:function(){var e=Utils.getSelectedShapeIds()[0],t=Model.getShapeById(e),i=t.category,n=$("#po-flow-dock-layout-chartdata .add-chartdata-container");n.removeClass("tableDataBase"),n.html("");var r=$("#"+e)[0],o=t.drawChart;o.canvas&&$.extend(!0,o.options,o.canvas,{autoFit:!1}),Designer.painter.bindNewChart(i,{cdom:r,tdom:n[0]},o.options).createTableContainer(function(i){var n=Model.getShapeById(e);$("#"+e).children("div").length>1&&$("#"+e).children("div:first").remove(),$.extend(!0,o.options,i),$.extend(!0,o.canvas,i),i.data&&(o.options.data=i.data,o.canvas.data=i.data),t.props=n.props,Model.update(t)}),!$("#po-flow-dock-layout-chartdata").hasClass("hide")&&$("#po-flow-dock-layout").hasClass("show")?(Dock.hide(),$("#po-flow-dock-layout-chartdata").addClass("hide")):(Dock.show("chartdata"),$("#po-flow-dock-layout-chartdata").removeClass("hide")),$(".pop-sub-editor>div[data-key!='editData']").removeClass("active"),$(".pop-sub-editor>div[data-key='editData']").toggleClass("active"),$("#pop-sub-editor-menu").removeClass("show")},renderPanelLinker:function(e,t){"curve"!=t.linkerType&&"broken"!=t.linkerType||t.points&&0!=t.points.length||(t.points=Utils.getLinkerPoints(t));var i=t.points,n=Utils.copy(t.from),r=Utils.copy(t.to),o=Utils.isMac();o&&e.scale(2,2);var a=Utils.getLinkerLineStyle(t.lineStyle);e.lineWidth=a.lineWidth,e.strokeStyle="rgb("+a.lineColor+")",e.fillStyle="rgb("+a.lineColor+")",e.save();var s={x:n.x,y:n.y},l={x:r.x,y:r.y};1==a.lineWidth&&(s.x+=.5,s.y+=.5,l.x+=.5,l.y+=.5),e.save(),"dashed"==a.lineStyle?this.setLineDash(e,[5*a.lineWidth,2*a.lineWidth]):"dot"==a.lineStyle?this.setLineDash(e,[a.lineWidth,1.5*a.lineWidth]):"dashdot"==a.lineStyle&&this.setLineDash(e,[5*a.lineWidth,2*a.lineWidth,a.lineWidth,2*a.lineWidth]);Model.define.page.lineJumps;e.lineJoin="round",e.beginPath(),this.actions.move.call(e,s);if("curve"==t.linkerType){var p=i[0],h=i[1],d={x1:p.x,y1:p.y,x2:h.x,y2:h.y,x:l.x,y:l.y};this.actions.curve.call(e,d)}else{var c=n;c.y=Math.round(c.y);var u=0,g=0;1==a.lineWidth&&(u=.5,g=.5,8);var y=Utils.copyArray(i);2==i.length&&i[0].x==i[1].x&&i[0].y==i[1].y&&(y=[]),y.push(r);for(var f=0;f<y.length;f++){var x=y[f];if(x.y=Math.round(x.y),x.x!=c.x||x.y!=c.y){var v=x.x+u,m=x.y+g;this.actions.line.call(e,{x:v,y:m}),c=x}}}e.stroke(),e.restore(),delete e.webkitLineDash,e.restore()},renderShape:function(e){if("linker"!=e.name){Utils.formattedShape(e);var t=$("#"+e.id);if(0==t.length){var i=$("#designer_canvas");if(e.name.startsWith("chart_")){t=$("<div id='"+e.id+"' class='shape_box'></div>").appendTo(i);var n=180*e.props.angle/Math.PI;t.css("transform","rotate("+n+"deg)"),Designer.painter.drawChart(t[0],e,"canvas",{autoFit:!1})}else t=$("<div id='"+e.id+"' class='shape_box'><canvas class='shape_canvas'></canvas></div>").appendTo(i)}e.attribute&&e.attribute.collapseBy?t.hide():t.show();var r=Utils.isMac(),o=1;r&&(o=2);var a=Utils.getShapeBox(e);if(e.category.includes("chart_")&&(a=e.props),e.category.includes("chart_"))var s=a.w,l=a.h,p=a.x+"px",h=a.y+"px";else s=a.w+20,l=a.h+20,p=a.x-10+"px",h=a.y-10+"px";var d=t.find(".shape_canvas")[0].getContext("2d");t.find(".shape_canvas").attr({width:s*o,height:l*o}),t.css({left:p,top:h,width:s,height:l});var c=e.props;r&&d.scale(o,o),d.clearRect(0,0,c.w+20,c.h+20),d.translate(10,10),d.translate(c.x-a.x,c.y-a.y),d.translate(c.w/2,c.h/2),d.rotate(c.angle),d.translate(-c.w/2,-c.h/2),d.globalAlpha=e.shapeStyle.alpha,d.lineJoin="round",e.name.startsWith("chart_")?(t.children().remove(),Designer.painter.drawChart(t[0],e,"canvas")):this.renderShapePath(d,e,!1,function(){Designer.painter.renderShape(e)}),r&&t.find(".shape_canvas").css({width:s+"px",height:l+"px"}),this.renderMarkers(d,e);var u=e.getPath(),g=Utils.copy(u[u.length-1]);g.fillStyle={type:"none"},g.lineStyle={lineWidth:0};var y=[g];if(this.renderPath(d,e,y,null,null,!0),this.renderText(e,a),this.renderDataAttributes(e,a),this.renderShapeLink(e,a),t.children(".shape_comment_ico").remove(),showCommentIco){var f=!1;if(Model.comments&&Model.comments.length>0)for(var x=0;x<Model.comments.length;x++){if(Model.comments[x].shapeId==e.id){f=!0;break}}if(f)$("<div class='shape_comment_ico'></div>").appendTo(t).bind("mousedown",function(t){t.stopPropagation(),Dock.show("comment"),Utils.selectShape(e.id)})}Designer.updateShapeToImg(e)}else this.renderLinker(e)},fillShape:function(e,t,i,n){if(t.save(),"none"!=i.type&&void 0!==i.alpha&&(t.globalAlpha=i.alpha),"solid"==i.type)t.fillStyle="rgb("+i.color+")",t.fill();else if("gradient"==i.type){var r;r="linear"==i.gradientType?GradientHelper.createLinearGradient(e,t,i):GradientHelper.createRadialGradient(e,t,i),t.fillStyle=r,t.fill()}else if("image"==i.type){var o;"standardImage"==e.name&&!1===e.attribute.linkable&&(e.attribute.linkable=!0),i.fileId.startsWith("data:image/")?o=i.fileId:i.fileId.indexOf("qiniu/")>=0?o=i.fileId.replace(/^qiniu/,"http://7xpicf.com1.z0.glb.clouddn.com"):0==i.fileId.indexOf("http")?(o=i.fileId).indexOf("orgu2a928.bkt.clouddn.com")>=0?o=o.replace("orgu2a928.bkt.clouddn.com","cdn2.processon.com"):o.indexOf("7xt9nt.com1.z0.glb.clouddn.com")>=0?o=o.replace("7xt9nt.com1.z0.glb.clouddn.com","cdn.processon.com"):o.indexOf("p7o7ul1nf.bkt.clouddn.com")>=0&&(o=o.replace("p7o7ul1nf.bkt.clouddn.com","cdn1.processon.com")):i.fileId.indexOf("/images/")>=0?(o=-1==i.fileId.indexOf("/assets")?staticBasePath+"/assets"+i.fileId:staticBasePath+i.fileId,localRuntime&&(o="http://localhost:8080"+o)):(o="https://cdn.processon.com/"+i.fileId,localRuntime&&(o="http://localhost:8080"+o)),Utils.isFirefox()&&(o+="?s=100_100");var a=$(".shape_img[src='"+o+"']");0==a.length?((a=$("<img class='shape_img' loaded='0' src=''/>").appendTo("#shape_img_container")).bind("load.drawshape",function(){$(this).attr("loaded","1"),n&&n()}),a.attr("src",o)):"0"==a.attr("loaded")?a.bind("load.drawshape",function(){n&&n()}):function(n){if(t.save(),t.clip(),"fit"==i.display){var r=n.width(),o=n.height(),a=r/o,s=e.props.w/e.props.h;if(a>s){var l=e.props.w,p=0,h=l/a,d=e.props.h/2-h/2;t.drawImage(n[0],p,d,l,h)}else{var h=e.props.h,d=0,l=h*a,p=e.props.w/2-l/2;t.drawImage(n[0],p,d,l,h)}}else if("stretch"==i.display)t.drawImage(n[0],0,0,e.props.w,e.props.h);else if("original"==i.display){var r=n.width(),o=n.height(),p=e.props.w/2-r/2,d=e.props.h/2-o/2;t.drawImage(n[0],p,d,r,o)}else if("tile"==i.display)for(var p=0,r=n.width(),o=n.height();p<e.props.w;){for(var d=0;d<e.props.h;)t.drawImage(n[0],p,d,r,o),d+=o;p+=r}else if("static"==i.display){var p=0,r=n.width(),o=n.height();t.drawImage(n[0],i.imageX,i.imageY,r,o)}else{var r=n.width(),o=n.height(),a=r/o,s=e.props.w/e.props.h;if(a>s){var h=e.props.h,d=0,l=h*a,p=e.props.w/2-l/2;t.drawImage(n[0],p,d,l,h)}else{var l=e.props.w,p=0,h=l/a,d=e.props.h/2-h/2;t.drawImage(n[0],p,d,l,h)}}t.restore()}(a)}t.restore()},renderText:function(e,t){var i=$("#"+e.id),n=e.getTextBlock();if("grid"==e.category&&e.merge)for(var r=e.merge||[],o=0;o<r.length;o++){var a=r[o],s=a[0],l=a[a.length-1];n[s].position.w=n[l].position.w+n[l].position.x-n[s].position.x,n[s].position.h=n[l].position.h+n[l].position.y-n[s].position.y;for(var p=1;p<a.length;p++)n[a[p]].jump=!0}i.find(".text_canvas").remove();for(o=0;o<n.length;o++){var h=n[o];if(!h.jump){var d=$("#text_"+e.id+"_"+o);if(0==d.length&&(d=$("<div contenteditable=true id='text_"+e.id+"_"+o+"' spellcheck=false class='text_canvas' forshape='"+e.id+"' ind='"+o+"'></div>").appendTo(i)).bind("focus",function(){$(this).blur()}),d.attr("readonly","readonly"),h.text&&""!=h.text.trim()){var c=Utils.getShapeFontStyle(e.fontStyle),u=(c=$.extend({},c,h.fontStyle)).fontFamily;localRuntime&&Utils.containsChinese(h.text)&&!Utils.containsChinese(u)&&(u="宋体"),"微软雅黑"==u&&(u='"Microsoft YaHei",微软雅黑,Arial');var g={"line-height":100*c.lineHeight+"%","font-size":c.size+"px","font-family":u,"font-weight":c.bold?"bold":"normal","font-style":c.italic?"italic":"normal","text-align":c.textAlign,color:"rgb("+c.color+")","text-decoration":c.underline?"underline":c.middleline?"line-through":"none",opacity:e.shapeStyle.alpha,"word-wrap":"break-word"};d.css(g),d.show();var y=h.position;if("horizontal"==c.orientation){var f={x:y.x+y.w/2,y:y.y+y.h/2};y={x:f.x-y.h/2,y:f.y-y.w/2,w:y.h,h:y.w}}d.css({width:y.w});var x=h.text.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;");"undefined"==typeof isNewTextV||isNewTextV||(x=(x=(x=(x=(x=(x=(x=(x=(x=x.replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/&lt;br&gt;/gi,"<br>")).replace(/&lt;b&gt;/gi,"<b>").replace(/&lt;\/b&gt;/gi,"</b>")).replace(/&lt;div&gt;/gi,"<div>").replace(/&lt;\/div&gt;/gi,"</div>")).replace(/&lt;i&gt;/gi,"<i>").replace(/&lt;\/i&gt;/gi,"</i>")).replace(/&lt;u&gt;/gi,"<u>").replace(/&lt;\/u&gt;/gi,"</u>")).replace(/&lt;font/gi,"<font").replace(/\"&gt;/gi,'">').replace(/&lt;\/font&gt;/gi,"</font>")).replace(/&lt;span/gi,"<span").replace(/&lt;\/span&gt;/gi,"</span>")).replace(/&lt;p/gi,"<p").replace(/&lt;\/p&gt;/gi,"</p>")),d.html(x),insert.equation.renderEquation(d);var v=d.height(),m=0;m="middle"==c.vAlign?y.y+y.h/2-v/2:"bottom"==c.vAlign?y.y+y.h-v:y.y;var b={x:y.x+y.w/2,y:m+v/2},w=e.props.angle;if(0!=w){var S={x:e.props.w/2,y:e.props.h/2};b=Utils.getRotated(S,b,w)}"horizontal"==c.orientation&&(w=(1.5*Math.PI+w)%(2*Math.PI));var k=Math.round(w/(2*Math.PI)*360);e.category.includes("chart_")&&(k=0);var M="rotate("+k+"deg)",_=y.w,D=v;d.css({width:_,height:Utils.isFirefox()?D+1:D,left:b.x+(e.props.x-t.x)+10-y.w/2,top:b.y+(e.props.y-t.y)+10-v/2,"-webkit-transform":M,"-ms-transform":M,"-o-transform":M,"-moz-transform":M,transform:M})}else d.css({height:"0px",width:"0px"}).hide()}}},calculateTextLines:function(e,t,i){for(var n=t.w,r=(t.h,[]),o=e.split(/\n/),a=0;a<o.length;a++){var s=o[a];if(i.measureText(s).width<=n)r.push(s);else{for(var l=s.split(/\s/),p="",h=0;h<l.length;h++){var d=l[h];if(h!=l.length-1&&(d+=" "),i.measureText(d).width>n)for(var c=0;c<d.length;c++){var u=p+d[c];i.measureText(u).width>n?(r.push(p),p=d[c]):p=u}else{u=p+d;i.measureText(u).width>n?(r.push(p),p=d):p=u}}""!=p&&r.push(p)}}return r},renderMarkers:function(e,t,i){if(t.attribute&&t.attribute.markers&&t.attribute.markers.length>0){var n=t.attribute.markers,r=Schema.config.markerSize;i&&(r=10);var o=t.attribute.markerOffset;i&&(o=5);for(var a=n.length*r+4*(n.length-1),s=t.props.w/2-a/2,l=0;l<n.length;l++){var p=n[l];e.save(),e.translate(s,t.props.h-r-o);var h=Schema.markers[p].call(t,r);this.renderPath(e,t,h),e.restore(),s+=r+4}}},renderDataAttributes:function(e,t){if($("#"+e.id).children(".attr_canvas").remove(),$("#"+e.id).children(".attr_link").remove(),e.dataAttributes&&0!=e.dataAttributes.length)for(var i={x:e.props.w/2,y:e.props.h/2},n=Utils.getShapeFontStyle(e),r=0;r<e.dataAttributes.length;r++){var o=e.dataAttributes[r];if("none"!=o.showType){var a="",s="";o.showName&&(a=o.name+": "),"text"==o.showType?a+=o.value:"icon"==o.showType&&(s=o.icon),""==a&&""==s||l(o,a,s)}}function l(r,o,a){var s=r.horizontal,l=r.vertical,p=$("<canvas id='attr_canvas_"+r.id+"' class='attr_canvas'></canvas>").appendTo($("#"+e.id)),h=p[0].getContext("2d"),d="12px ",c=n.fontFamily;localRuntime&&Utils.containsChinese(o)&&!Utils.containsChinese(c)&&(c="宋体"),d+=c,h.font=d;var u=h.measureText(o).width,g=20;""!=a&&(u+=20);var y={x:"mostleft"==s?-u-2:"leftedge"==s?-u/2:"left"==s?2:"center"==s?(e.props.w-u)/2:"right"==s?e.props.w-u-2:"rightedge"==s?e.props.w-u/2:e.props.w+2,y:"mosttop"==l?-g:"topedge"==l?-10:"top"==l?0:"middle"==l?(e.props.h-g)/2:"bottom"==l?e.props.h-g:"bottomedge"==l?e.props.h-10:e.props.h,w:u,h:g},f=Utils.getRotatedBox(y,e.props.angle,i);p.attr({width:2*f.w,height:2*f.h}),p.css({width:f.w,height:f.h}),h.font=d;var x=f.x+(e.props.x-t.x)+10,v=f.y+(e.props.y-t.y)+10;if(p.css({left:x,top:v}),h.scale(2,2),h.translate(f.w/2,f.h/2),h.rotate(e.props.angle),h.translate(-f.w/2,-f.h/2),h.translate((f.w-y.w)/2,(f.h-y.h)/2),h.globalAlpha=e.shapeStyle.alpha,"link"==r.type?h.fillStyle="#4183C4":h.fillStyle="#333",h.textBaseline="middle",h.fillText(o,0,10),""!=a){var m=staticBasePath+"/assets/images/data_attr/"+a+".png";localRuntime&&(m="http://localhost:8080"+m),isNaN(parseInt(a))&&(m=a);var b=$(".shape_img[src='"+m+"']");0==b.length&&(b=$("<img class='shape_img' loaded='false' src='"+m+"'/>").appendTo("#shape_img_container")),"true"==b.attr("loaded")?h.drawImage(b[0],y.w-20,0,20,20):b.bind("load.drawshape",function(){$(this).attr("loaded","true"),h.drawImage(b[0],y.w-20,0,20,20)})}(h.beginPath(),h.rect(0,0,u,g),h.closePath(),"link"==r.type)&&$("<a href='"+r.value+"' target='_blank' class='attr_link'></canvas>").appendTo($("#"+e.id)).css({left:x,top:v,width:f.w,height:f.h,position:"absolute"})}},renderShapeLink:function(e,t){if(Designer.op.linkIconHide(),$("#"+e.id).children(".shape_link").remove(),e.link){var i=Math.round(e.props.angle/Math.PI*180),n=e.props,r={x:n.x+n.w/2,y:n.y+n.h/2},o=n.x+n.w-8-2,a=n.y+n.h-8-2,s=Utils.getRotated(r,{x:o,y:a},e.props.angle),l=$("<a target='_blank' data-shape-id='"+e.id+"' href='"+e.link+"' class='shape_link'></a>"),p=s.x-(t.x-10),h=s.y-(t.y-10);e.name.startsWith("chart_")&&(p-=10,h-=10),l.css({width:16,height:16,position:"absolute",left:p,top:h,transform:"translate(-50%,-50%) rotate("+i+"deg)"}).appendTo($("#"+e.id)),l.off().on("mousedown",function(e){e.stopPropagation()})}},renderLinker:function(e,t,i,n,r){t&&(e.points=Utils.getLinkerPoints(e,r,t)),"curve"!=e.linkerType&&"broken"!=e.linkerType||e.points&&0!=e.points.length||(e.points=Utils.getLinkerPoints(e,r));var o=e.points,a=Utils.copy(e.from),s=Utils.copy(e.to);if(e.attribute&&e.attribute.collapseBy)$("#"+e.id).hide();else{$("#"+e.id).show();var l=Utils.getEndpointAngle(e,"from");isNaN(l)&&(l=0);var p=Utils.getEndpointAngle(e,"to"),h=Utils.getLinkerLineStyle(e.lineStyle);H(a,e,h.beginArrowStyle,l),H(s,e,h.endArrowStyle,p);var d=s.x,c=s.y,u=a.x,g=a.y;s.x<a.x?(d=s.x,u=a.x):(d=a.x,u=s.x),s.y<a.y?(c=s.y,g=a.y):(c=a.y,g=s.y);for(var y=0;y<o.length;y++){var f=o[y];f.x<d?d=f.x:f.x>u&&(u=f.x),f.y<c?c=f.y:f.y>g&&(g=f.y)}var x={x:d,y:c,w:u-d,h:g-c},v=$("#"+e.id);if(0==v.length){var m=$("#designer_canvas");v=$("<div id='"+e.id+"' class='shape_box linker_box'><canvas class='shape_canvas'></canvas></div>").appendTo(m)}Model.getShapeById(e.id)||v.css("z-index",Model.orderList.length+1);var b=Utils.isMac(),w=1;b&&(w=2);var S=v.find(".shape_canvas");S.attr({width:(x.w+20)*w,height:(x.h+20)*w}),v.css({left:x.x-10,top:x.y-10,width:x.w+20,height:x.h+20});var k=S[0].getContext("2d");b&&k.scale(w,w),k.translate(10,10);var M=Utils.getLinkerLineStyle(e.lineStyle);k.lineWidth=M.lineWidth,k.strokeStyle="rgb("+M.lineColor+")",k.fillStyle="rgb("+M.lineColor+")",k.save();var _={x:a.x-x.x,y:a.y-x.y},D={x:s.x-x.x,y:s.y-x.y};1==M.lineWidth&&(_.x+=.5,_.y+=.5,D.x+=.5,D.y+=.5),k.save(),b&&S.css({width:x.w+20+"px",height:x.h+20+"px"}),"dashed"==M.lineStyle?this.setLineDash(k,[5*M.lineWidth,2*M.lineWidth]):"dot"==M.lineStyle?this.setLineDash(k,[M.lineWidth,1.5*M.lineWidth]):"dashdot"==M.lineStyle&&this.setLineDash(k,[5*M.lineWidth,2*M.lineWidth,M.lineWidth,2*M.lineWidth]);Model.define.page.lineJumps;k.lineJoin="round",k.beginPath(),this.actions.move.call(k,_);var P=null;if("curve"==e.linkerType){var U=o[0],L=o[1],I={x1:U.x-x.x,y1:U.y-x.y,x2:L.x-x.x,y2:L.y-x.y,x:D.x,y:D.y};this.actions.curve.call(k,I)}else{var C=a;C.y=Math.round(C.y);var B=0,T=0;1==M.lineWidth&&(B=.5,T=.5,P=8),o=Utils.margeLinker(e);var z=Utils.copyArray(o);2==o.length&&o[0].x==o[1].x&&o[0].y==o[1].y&&(z=[]),z.push(s);for(y=0;y<z.length;y++){var O=z[y];if(O.y=Math.round(O.y),O.x!=C.x||O.y!=C.y){if(n&&O.y==C.y&&O.x!=C.x&&M.lineWidth<6){for(var A=n.points,R=!1,W=0;W<A.length;W++){(F=A[W]).y==O.y&&Math.abs(F.x-O.x)<=6&&(R=!0)}if(R)continue;if(O.x<C.x)for(W=A.length-1;W>=0;W--){if((F=A[W]).y==O.y&&F.x>=O.x&&F.x<=C.x){var E=F.x-x.x+B,N=F.y-x.y+T;k.arc(E,N,6,0,Math.PI,!0)}}else for(W=0;W<A.length;W++){var F;if((F=A[W]).y==O.y&&F.x<O.x&&F.x>C.x){E=F.x-x.x+B,N=F.y-x.y+T;k.arc(E,N,6,Math.PI,0)}}}var j=O.x-x.x+B,K=O.y-x.y+T;this.actions.line.call(k,{x:j,y:K}),C=O}}}if(v.find(".linker_ends_point").remove(),this.hideLinkerControls(),Utils.isSelected(e.id))k.shadowBlur=4,k.shadowColor=Designer.config.selectorColor,"curve"==e.linkerType&&Utils.getSelectedIds().length,1==Utils.selectIds.length&&($('<div class="linker_ends_point"></div>').css({left:_.x+10,top:_.y+10,transform:"scale("+1..restoreScale()+")"}).appendTo(v),$('<div class="linker_ends_point"></div>').css({left:D.x+10,top:D.y+10,transform:"scale("+1..restoreScale()+")"}).appendTo(v),"broken"==e.linkerType&&this.drawLinkerControls(e,x,v)),v.css("z-index",Model.maxZIndex+1);else for(y=0;y<Model.orderList.length;y++)if(Model.orderList[y].id==e.id){v.css("z-index",y);break}k.stroke(),k.restore(),delete k.webkitLineDash,G(_,l,a.id,M.beginArrowStyle,e,a.angle,P),G(D,p,s.id,M.endArrowStyle,e,s.angle,P),k.restore(),this.renderLinkerText(e,t,i),Designer.updateShapeToImg(e)}function H(e,t,i,n){if(e.id){var r=Model.getShapeById(e.id);if(r){var o={x:0,y:0},a=Utils.getShapeLineStyle(r.lineStyle),s=Utils.getLinkerLineStyle(t.lineStyle);o.x="none"==i||"cross"==i?-a.lineWidth/2:"solidArrow"==i||"dashedArrow"==i?-a.lineWidth/2-1.3*s.lineWidth:"solidDiamond"==i||"dashedDiamond"==i?-a.lineWidth/2-s.lineWidth:-a.lineWidth/2-s.lineWidth/2;var l=Utils.getRotated({x:0,y:0},o,n);e.x+=l.x,e.y+=l.y}}}function G(e,t,i,n,r,o,a){if("normal"==n){var s=12,l=Math.PI/5,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);k.beginPath(),k.moveTo(h,d),k.lineTo(e.x,e.y),k.lineTo(c,u),k.stroke()}else if("solidArrow"==n){s=a||10,l=Math.PI/10,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fill(),k.stroke()}else if("dashedArrow"==n){k.save();s=a||12,l=Math.PI/10,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("solidCircle"==n){k.save();var g=4,y=e.x-g*Math.cos(t),f=e.y-g*Math.sin(t);k.beginPath(),k.arc(y,f,g,0,2*Math.PI,!1),k.closePath(),k.fill(),k.stroke(),k.restore()}else if("dashedCircle"==n){k.save();g=4,y=e.x-g*Math.cos(t),f=e.y-g*Math.sin(t);k.beginPath(),k.arc(y,f,g,0,2*Math.PI,!1),k.closePath(),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("solidDiamond"==n){k.save();s=8,l=Math.PI/7,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l);var x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(x,v),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fill(),k.stroke(),k.restore()}else if("dashedDiamond"==n){k.save();s=8,l=Math.PI/7,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l),x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.lineTo(x,v),k.lineTo(c,u),k.lineTo(e.x,e.y),k.closePath(),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("cross"==n){var m=6*Math.cos(Math.PI/2-t),b=6*Math.sin(Math.PI/2-t),w=e.x+m,S=e.y-b,M=(x=e.x-14*Math.cos(t))-m,_=(v=e.y-14*Math.sin(t))+b;k.beginPath(),k.moveTo(w,S),k.lineTo(M,_),k.stroke()}else if("asynch1"==n){k.save();s=14,l=Math.PI/6.5,p=s/Math.cos(l),h=e.x-p*Math.cos(t-l),d=e.y-p*Math.sin(t-l),x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(h,d),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}else if("asynch2"==n){k.save();s=14,l=Math.PI/6.5,p=s/Math.cos(l),c=e.x-p*Math.sin(Math.PI/2-t-l),u=e.y-p*Math.cos(Math.PI/2-t-l),x=e.x-2*s*Math.cos(t),v=e.y-2*s*Math.sin(t);k.beginPath(),k.moveTo(e.x,e.y),k.lineTo(c,u),k.fillStyle="white",k.fill(),k.stroke(),k.restore()}}},renderLinkerText:function(e,t,i){var n=$("#"+e.id),r=e.textBlock||[];if(null!=e.text&&""!==e.text){var o=null;if(r[0]&&e.text==r[0].text){if(o=r[0],e.textPos&&(t||i)){var a=Utils.getLinkerLinesPoints(e);e.textPos.t>a.length&&(e.textPos.t=a.length-1);var s=a[e.textPos.t];null!=s&&(e.textPos.x=s.x,e.textPos.y=s.y)}}else{var l=null!=e.textPos?e.textPos:this.getLinkerMidpoint(e);o=this.getLinkerPointLocation(e,l)}var p={text:e.text,location:o.location};e.textPos&&(p.pos=e.textPos.pos),r[0]=p}e.textBlock=r;var h=Utils.getLinkerFontStyle(e.fontStyle),d=(Designer.config.scale,h.fontFamily);localRuntime&&Utils.containsChinese(e.text)&&!Utils.containsChinese(d)&&(d="宋体"),"微软雅黑"==d&&(d='"Microsoft YaHei",微软雅黑,Arial');var c={"line-height":Math.round(1.25*h.size)+"px","font-size":h.size+"px","font-family":d,"font-weight":h.bold?"bold":"normal","font-style":h.italic?"italic":"normal","text-align":h.textAlign,color:"rgb("+h.color+")","text-decoration":h.underline?"underline":h.middleline?"line-through":"none","z-index":1};n.children(".linker_text").remove();for(var u=0;u<r.length;u++){var g=$("<div class='text_canvas linker_text'></div>").appendTo(n);g.css(c);p=r[u];g.show();var y=p.text.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>");g.html(y+"<br/>");var f=this.getLinkerPointByLocation(e,p.location);if(null!=f&&null!=f.x){var x=Utils.restoreScale(n.position()),v=f.y-x.top-g.height()/2,m=f.x-x.left-g.width()/2,b=Utils.getAngleDir(f.angle);"top"==p.pos?"1"==b||"3"==b?m=m-g.width()/2-6:(v=v-g.height()/2-6,g.css({"transform-origin":"bottom"})):"bottom"==p.pos&&("1"==b||"3"==b?m+=g.width()/2+6:(v+=g.height()/2+6,g.css({"transform-origin":"top"})));1==b||3==b?v<10?v=10+(g.height()-g.height())/2:v+g.height()>n.height()-10&&(v=n.height()-10-g.height()-(g.height()-g.height())/2):2!=b&&4!=b||(m<10?m=10+(g.width()-g.width())/2:m+g.width()>n.width()-10&&(m=n.width()-10-g.width()-(g.width()-g.width())/2)),g.css({left:m,top:v})}}},getLinkerMidpoint:function(e){var t={};if("normal"==e.linkerType)t={x:.5*e.from.x+.5*e.to.x,y:.5*e.from.y+.5*e.to.y};else if("curve"==e.linkerType){var i=e.from,n=e.points[0],r=e.points[1],o=e.to;t={x:.125*i.x+.375*n.x+.375*r.x+.125*o.x,y:.125*i.y+.375*n.y+.375*r.y+.125*o.y}}else{var a=[];a.push(e.from),(a=a.concat(e.points)).push(e.to);for(var s=0,l=1;l<a.length;l++){n=a[l-1],r=a[l];s+=d=Utils.measureDistance(n,r)}var p=s/2,h=0;for(l=1;l<a.length;l++){n=a[l-1],r=a[l];var d,c=h+(d=Utils.measureDistance(n,r));if(c>=p){var u=(p-h)/d;t={x:(1-u)*n.x+u*r.x,y:(1-u)*n.y+u*r.y};break}h=c}}return t},getLinkerPointLocation:function(e,t){var i=0,n=t,r={};if("normal"==e.linkerType){var o=Utils.getPointInlineProject(e.from,e.to,t),a=Utils.measureDistance(e.from,e.to);i=(u=Utils.measureDistance(e.from,o))/a,n=o,r=e.from}else if("curve"==e.linkerType){for(var s=0,l=e.from,p=e.points[0],h=e.points[1],d=e.to,c=(a=null,0);s<1;){o={x:(1-s)*(1-s)*(1-s)*l.x+3*(1-s)*(1-s)*s*p.x+3*(1-s)*s*s*h.x+s*s*s*d.x,y:(1-s)*(1-s)*(1-s)*l.y+3*(1-s)*(1-s)*s*p.y+3*(1-s)*s*s*h.y+s*s*s*d.y};var u=Utils.measureDistance(o,t);null==a&&(a=u,c=s,n=o),a>u&&(c=s,a=u,n=o),s+=.02}i=c,r={x:(1-(s=c-.01))*(1-s)*(1-s)*l.x+3*(1-s)*(1-s)*s*p.x+3*(1-s)*s*s*h.x+s*s*s*d.x,y:(1-s)*(1-s)*(1-s)*l.y+3*(1-s)*(1-s)*s*p.y+3*(1-s)*s*s*h.y+s*s*s*d.y}}else{var g=[];g.push(e.from),(g=g.concat(Utils.margeLinker(e))).push(e.to);for(var y=0,f=null,x=0,v={},m=1,b=1;b<g.length;b++){p=g[b-1],h=g[b],o=Utils.getPointInlineProject(p,h,t);var w=Utils.measureDistance(t,o);null==f&&(f=w,m=b,v=o),f>w&&(f=w,m=b,v=o),y+=u=Utils.measureDistance(p,h)}for(b=1;b<m;b++){p=g[b-1],h=g[b];x+=u=Utils.measureDistance(p,h)}i=(x+=Utils.measureDistance(g[m-1],v))/y,n=v,r=g[m-1]}return n.angle=Utils.getAngle(n,r),{location:i,pos:n}},getLinkerPointByLocation:function(e,t){var i={},n={};if("normal"==e.linkerType)i={x:(1-t)*e.from.x+t*e.to.x,y:(1-t)*e.from.y+t*e.to.y},n=e.from;else if("curve"==e.linkerType){var r=e.from,o=e.points[0],a=e.points[1],s=e.to;i={x:(1-(y=t))*(1-y)*(1-y)*r.x+3*(1-y)*(1-y)*y*o.x+3*(1-y)*y*y*a.x+y*y*y*s.x,y:(1-y)*(1-y)*(1-y)*r.y+3*(1-y)*(1-y)*y*o.y+3*(1-y)*y*y*a.y+y*y*y*s.y},n={x:(1-(y=t-.01))*(1-y)*(1-y)*r.x+3*(1-y)*(1-y)*y*o.x+3*(1-y)*y*y*a.x+y*y*y*s.x,y:(1-y)*(1-y)*(1-y)*r.y+3*(1-y)*(1-y)*y*o.y+3*(1-y)*y*y*a.y+y*y*y*s.y}}else{var l=[];l.push(e.from),(l=l.concat(Utils.margeLinker(e))).push(e.to);for(var p=0,h=1;h<l.length;h++){o=l[h-1],a=l[h];p+=u=Utils.measureDistance(o,a)}var d=p*t,c=0;for(h=1;h<l.length;h++){o=l[h-1],a=l[h];var u,g=c+(u=Utils.measureDistance(o,a));if(g>=d){var y;i={x:(1-(y=(d-c)/u))*o.x+y*a.x,y:(1-y)*o.y+y*a.y},n=o;break}c=g}}return i.angle=Utils.getAngle(i,n),i},controlStatus:{resizeDir:[],rotatable:!0},drawControls:function(e){var t=$("#shape_controls");if(0==t.length){var i=$("#designer_canvas");(t=$("<div id='shape_controls'></div>").appendTo(i)).append("<canvas id='controls_bounding'></canvas>"),t.append("<div class='shape_controller' index='0' resizeDir='tl'></div>"),t.append("<div class='shape_controller' index='1' resizeDir='tr'></div>"),t.append("<div class='shape_controller' index='2' resizeDir='br'></div>"),t.append("<div class='shape_controller' index='3' resizeDir='bl'></div>"),t.append("<div class='shape_controller' resizeDir='l'></div>"),t.append("<div class='shape_controller' resizeDir='t'></div>"),t.append("<div class='shape_controller' resizeDir='r'></div>"),t.append("<div class='shape_controller' resizeDir='b'></div>"),Designer.op.shapeResizable(),t.append("<div class='shape_rotater po-diagraming-icons'>&#xe7fa;</div>"),Designer.op.shapeRotatable(),t.append("<div class='group_icon change_shape_icon'></div>"),Designer.op.groupShapeChangable(),$(".shape_controller").css({"border-color":Designer.config.anchorColor,width:Designer.config.anchorSize-2,height:Designer.config.anchorSize-2})}$(".shape_controller").css({"z-index":Model.orderList.length}),$(".change_shape_icon").hide(),t.show();var n,r,o=0;1==e.length?(n=(l=Model.getShapeById(e[0])).props,o=l.props.angle,4==(r=l.resizeDir).length&&8==r.concat(["l","t","r","b"]).length&&"grid"!=l.category&&(r=["tl","tr","br","bl","l","t","r","b"]),l.groupName&&SchemaGroup.groupExists(l.groupName)&&$(".change_shape_icon").show()):(n=Utils.getControlBox(e),r=["tl","tr","br","bl","l","t","r","b"]);for(var a=!0,s=0;s<e.length;s++){var l,p=e[s];(l=Model.getShapeById(p)).attribute&&0==l.attribute.rotatable&&(a=!1),(l.resizeDir&&0==l.resizeDir.length||l.parent&&e.length>1||l.children&&l.children.length&&e.length>1)&&(r=[])}return this.controlStatus.rotatable=a,this.controlStatus.resizeDir=r,this.rotateControls(n,o),t},rotateControls:function(e,t){var i=$("#shape_controls"),n=Utils.getRotatedBox(e,t),r=n.w,o=n.h;i.css({left:n.x,top:n.y,width:r,height:o,"z-index":Model.orderList.length+2});var a=r+20,s=o+20;$("#controls_bounding").attr({width:2*a,height:2*s}).css({width:a,height:s});var l={x:Math.round(e.x-n.x),y:Math.round(e.y-n.y),w:Math.floor(e.w+1),h:Math.floor(e.h+1)};this.drawControlLineTimeIdx&&clearTimeout(this.drawControlLineTimeIdx),this.drawControlLine(a,s,l,t);var p=0-Designer.config.anchorSize/2,h={x:e.x+e.w/2,y:e.y+e.h/2};i.children(".shape_controller").hide();for(var d=0;d<this.controlStatus.resizeDir.length;d++){var c,u,g=this.controlStatus.resizeDir[d],y=$(".shape_controller[resizeDir="+g+"]");y.show(),c=g.indexOf("l")>=0?e.x:g.indexOf("r")>=0?e.x+e.w:e.x+e.w/2,u=g.indexOf("t")>=0?e.y:g.indexOf("b")>=0?e.y+e.h:e.y+e.h/2;var f=Utils.getRotated(h,{x:c,y:u},t);y.css({left:f.x-n.x+p,top:f.y-n.y+p})}var x=Math.round(t/Math.PI*180);$(".shape_controller").css({transform:"rotate("+x+"deg) scale("+1/Designer.config.scale+")"});var v=Math.PI/8;if(i.children(".shape_controller").removeClass("s n e w"),t>v&&t<=3*v?(i.children("div[resizeDir=tl]").addClass("n"),i.children("div[resizeDir=tr]").addClass("e"),i.children("div[resizeDir=br]").addClass("s"),i.children("div[resizeDir=bl]").addClass("w"),i.children("div[resizeDir=l]").addClass("n w"),i.children("div[resizeDir=r]").addClass("s e"),i.children("div[resizeDir=b]").addClass("s w"),i.children("div[resizeDir=t]").addClass("n e")):t>3*v&&t<=5*v?(i.children("div[resizeDir=tl]").addClass("n e"),i.children("div[resizeDir=tr]").addClass("s e"),i.children("div[resizeDir=br]").addClass("s w"),i.children("div[resizeDir=bl]").addClass("n w"),i.children("div[resizeDir=l]").addClass("n"),i.children("div[resizeDir=r]").addClass("s"),i.children("div[resizeDir=b]").addClass("w"),i.children("div[resizeDir=t]").addClass("e")):t>5*v&&t<=7*v?(i.children("div[resizeDir=tl]").addClass("e"),i.children("div[resizeDir=tr]").addClass("s"),i.children("div[resizeDir=br]").addClass("w"),i.children("div[resizeDir=bl]").addClass("n"),i.children("div[resizeDir=l]").addClass("n e"),i.children("div[resizeDir=r]").addClass("s w"),i.children("div[resizeDir=b]").addClass("n w"),i.children("div[resizeDir=t]").addClass("s e")):t>7*v&&t<=9*v?(i.children("div[resizeDir=tl]").addClass("s e"),i.children("div[resizeDir=tr]").addClass("s w"),i.children("div[resizeDir=br]").addClass("n w"),i.children("div[resizeDir=bl]").addClass("n e"),i.children("div[resizeDir=l]").addClass("e"),i.children("div[resizeDir=r]").addClass("w"),i.children("div[resizeDir=b]").addClass("n"),i.children("div[resizeDir=t]").addClass("s")):t>9*v&&t<=11*v?(i.children("div[resizeDir=tl]").addClass("s"),i.children("div[resizeDir=tr]").addClass("w"),i.children("div[resizeDir=br]").addClass("n"),i.children("div[resizeDir=bl]").addClass("e"),i.children("div[resizeDir=l]").addClass("s e"),i.children("div[resizeDir=r]").addClass("n w"),i.children("div[resizeDir=b]").addClass("n e"),i.children("div[resizeDir=t]").addClass("s w")):t>11*v&&t<=13*v?(i.children("div[resizeDir=tl]").addClass("s w"),i.children("div[resizeDir=tr]").addClass("n w"),i.children("div[resizeDir=br]").addClass("n e"),i.children("div[resizeDir=bl]").addClass("s e"),i.children("div[resizeDir=l]").addClass("s"),i.children("div[resizeDir=r]").addClass("n"),i.children("div[resizeDir=b]").addClass("e"),i.children("div[resizeDir=t]").addClass("w")):t>13*v&&t<=15*v?(i.children("div[resizeDir=tl]").addClass("w"),i.children("div[resizeDir=tr]").addClass("n"),i.children("div[resizeDir=br]").addClass("e"),i.children("div[resizeDir=bl]").addClass("s"),i.children("div[resizeDir=l]").addClass("s w"),i.children("div[resizeDir=r]").addClass("n e"),i.children("div[resizeDir=b]").addClass("s e"),i.children("div[resizeDir=t]").addClass("n w")):(i.children("div[resizeDir=tl]").addClass("n w"),i.children("div[resizeDir=tr]").addClass("n e"),i.children("div[resizeDir=br]").addClass("s e"),i.children("div[resizeDir=bl]").addClass("s w"),i.children("div[resizeDir=l]").addClass("w"),i.children("div[resizeDir=r]").addClass("e"),i.children("div[resizeDir=b]").addClass("s"),i.children("div[resizeDir=t]").addClass("n")),this.controlStatus.rotatable){var m=i.find(".shape_rotater");m.show();var b={x:e.x+e.w+10..restoreScale(),y:e.y-10..restoreScale()},w=Utils.getRotated(h,b,t);x=Math.round(t/Math.PI*180);m.css({top:w.y-10-n.y,left:w.x-10-n.x,transform:"rotate("+x+"deg) scale("+1/Designer.config.scale+")"})}else i.find(".shape_rotater").hide()},drawControlLineTimeIdx:null,drawControlLine:function(e,t,i,n,r){var o=this;r=r&&r>-8..restoreScale()?r:0;var a=$("#controls_bounding")[0].getContext("2d");a.lineJoin="round",a.strokeStyle=Designer.config.selectorColor,0==this.controlStatus.resizeDir.length?a.lineWidth=2..restoreScale():a.lineWidth=1..restoreScale(),a.save(),a.scale(2,2),a.clearRect(0,0,e,t),a.translate(e/2,t/2),a.rotate(n),a.translate(-e/2,-t/2),a.translate(9.5,9.5),a.setLineDash([4..restoreScale(),4..restoreScale()]),a.lineDashOffset=r,a.strokeRect(i.x,i.y,i.w,i.h),a.restore(),this.drawControlLineTimeIdx=setTimeout(function(){o.drawControlLine(e,t,i,n,r-1..restoreScale())},80)},drawLinkerControls:function(e,t,i){this.hideLinkerControls(e.id);var n=Utils.copy(e);n.points=Utils.margeLinker(n);var r,o=Utils.getLinkerVector(n);4==o.length&&o[1].x==o[2].x&&o[1].y==o[2].y&&o.splice(1,2);for(var a=1;a<o.length;a++){var s=o[a-1],l=o[a];if(Utils.measureDistance(s,l)>40&&a>0&&a<=e.points.length+1&&(null!=e.from.id||null!=e.to.id)||a>1&&a<=e.points.length&&null==e.from.id&&null==e.to.id){var p=Utils.getCenterPoint(s,l);r=p,void 0,$('<div class="linker_broken_control_c_point"></div>').css({left:r.x-t.x+10,top:r.y-t.y+10,transform:"scale("+1..restoreScale()+")"}).appendTo(i)}}},hideLinkerControls:function(e){$("#"+e).children(".linker_broken_control_point").remove(),$(".linker_broken_control_c_point").remove()}}};var Model={define:{},persistence:{},orderList:[],orderListGroup:{},maxZIndex:0,linkerMap:{map:{},add:function(e,t){this.map[e]||(this.map[e]=[]),this.map[e].indexOf(t)<0&&this.map[e].push(t)},remove:function(e,t){this.map[e]&&Utils.removeFromArray(this.map[e],t)},empty:function(){this.map={}}},intersection:{},groupMap:{map:{},add:function(e,t){this.map[e]=t},push:function(e,t){this.map[e]||(this.map[e]=[]),this.map[e].indexOf(t)<0&&this.map[e].push(t)},remove:function(e){delete this.map[e]},empty:function(){this.map={}}},create:function(e,t,i){var n=Utils.newId(),r=Utils.copy(Schema.shapes[e]);r.id=n,r.props.x=t,r.props.y=i,r.attribute.container?r.props.zindex=-1:r.props.zindex=Model.maxZIndex+1,r.props=$.extend(!0,{},Schema.shapeDefaults.props,r.props);for(var o=0;o<r.dataAttributes.length;o++){r.dataAttributes[o].id=Utils.newId()}var a=Model.define;return null!=a.defaultStyle&&null!=a.defaultStyle.fillStyle&&$.isEmptyObject(r.fillStyle)&&(r.fillStyle=a.defaultStyle.fillStyle),null!=a.defaultStyle&&null!=a.defaultStyle.lineStyle&&$.isEmptyObject(r.lineStyle)&&(r.lineStyle=a.defaultStyle.lineStyle),null!=a.defaultStyle&&null!=a.defaultStyle.fontStyle&&$.isEmptyObject(r.fontStyle)&&(r.fontStyle=a.defaultStyle.fontStyle),Designer.events.push("create",r),r},createByShape:function(e,t,i){var n=Utils.copy(e);if("linker"==n.name){n.props.zindex=Model.maxZIndex+1,null!=(o=Model.define).defaultLinkerStyle&&null!=o.defaultLinkerStyle.linkerStyle&&(n.lineStyle=o.defaultLinkerStyle.linkerStyle)}else{n.attribute.container?n.props.zindex=-1:(Model.maxZIndex=Model.maxZIndex+1,n.props.zindex=Model.maxZIndex),e.name.indexOf("SeparatorBar")>-1&&(n.props.zindex=0),n.props=$.extend(!0,{},Schema.shapeDefaults.props,n.props);for(var r=0;r<n.dataAttributes.length;r++){n.dataAttributes[r].id=Utils.newId()}var o;null!=(o=Model.define).defaultStyle&&null!=o.defaultStyle.fillStyle&&$.isEmptyObject(n.fillStyle)&&(n.fillStyle=o.defaultStyle.fillStyle),null!=o.defaultStyle&&null!=o.defaultStyle.lineStyle&&$.isEmptyObject(n.lineStyle)&&(n.lineStyle=o.defaultStyle.lineStyle),null!=o.defaultStyle&&null!=o.defaultStyle.fontStyle&&$.isEmptyObject(n.fontStyle)&&(n.fontStyle=o.defaultStyle.fontStyle)}return Designer.events.push("create",n),n},add:function(e,t,i){this.addMulti([e],t,i)},addMulti:function(e,t,i){void 0===t&&(t=!0);for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(Utils.copy(o)),this.define.elements[o.id]=Utils.copy(o),this.persistence.elements[o.id]=Utils.copy(o)}this.build(),t&&(Designer.events.push("created",n),MessageSource.send("create",n,i))},update:function(e){this.updateMulti([e])},updateMulti:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];this.define.elements[r.id]&&(this.define.elements[r.id]=Utils.copy(r),i.push(Utils.copy(this.getPersistenceById(r.id))),t.push(Utils.copy(r)),this.persistence.elements[r.id]=Utils.copy(r))}this.build();var o={shapes:i,updates:t};MessageSource.send("update",o),Designer.events.push("update",e)},remove:function(e,t){void 0===t&&(t=!0),t&&(e=Designer.events.push("beforeRemove",e));var i=[],n=[],r=[],o=[],a=[];if(0==e.length)return!1;for(var s=0;s<e.length;s++){"linker"==(l=e[s]).name?a.push(l.id):o.push(l.id)}for(s=0;s<e.length;s++){var l=e[s];if(i.push(Utils.copy(l)),$("#"+l.id).remove(),delete this.define.elements[l.id],delete this.persistence.elements[l.id],this.groupMap.remove(l.group),"linker"==l.name)null!=l.from.id&&this.linkerMap.remove(l.from.id,l.id),null!=l.to.id&&this.linkerMap.remove(l.to.id,l.id);else{if(l.parent&&o.indexOf(l.parent)<0){var p=Model.getShapeById(l.parent);p&&(Utils.removeFromArray(p.children,l.id),n.indexOf(l.parent)<0&&(n.push(l.parent),r.push(p)))}var h=this.getShapeLinkers(l.id);if(h&&h.length>0)for(var d=0;d<h.length;d++){var c=h[d];if(a.indexOf(c)<0){var u=this.getShapeById(c);null!=u.from.id&&u.from.id==l.id&&(u.from.id=null,u.from.angle=null),null!=u.to.id&&u.to.id==l.id&&(u.to.id=null,u.to.angle=null),n.indexOf(c)<0&&(n.push(c),r.push(u))}}delete this.linkerMap.map[l.id]}}if(this.build(),MessageSource.beginBatch(),MessageSource.send("remove",i),t){var g=Designer.events.push("removed",{shapes:e,changedIds:n,range:o});g&&g.length&&(r=r.concat(g))}return r.length>0&&this.updateMulti(r),MessageSource.commit(),Designer.events.push("changeLinkers",i),!0},updatePage:function(e,t){var i=$.extend(Model.define.page,e),n={page:Utils.copy(Model.persistence.page),update:Utils.copy(i)};Model.persistence.page=Utils.copy(i),MessageSource.send("updatePage",n),Designer.initialize.initCanvas()},setTheme:function(e){Model.define.theme=e,Model.define.page.backgroundColor,void 0!==e&&(Model.define.page.backgroundColor=e.page.backgroundColor);var t={theme:Utils.copy(Model.persistence.theme),update:Utils.copy(e)};for(var i in Model.persistence.theme=Utils.copy(e),MessageSource.send("setTheme",t),Model.define.elements){var n=Model.getShapeById(i);Designer.painter.renderShape(n)}Designer.initialize.initCanvas()},updateWithBeautify:function(e,t,i){var n={content:t,updates:e};null!=i&&"{}"!=JSON.stringify(i)&&(n.theme=i,n.oldTheme=Model.define.theme);var r=Model.define.elements;MessageSource.send("update_with_beautify",n),null!=i&&(Model.define.theme=i);for(var o=0,a=e.length;o<a;o++){var s=e[o].id;$.extend(r[s],e[o])}for(var s in Model.define.elements){var l=Model.getShapeById(s);Designer.painter.renderShape(l)}Designer.events.push("resetBrokenLinker")},setDefaultStyle:function(e,t){var i=null;"linker"==e?(i=Utils.copy(Model.define.defaultLinkerStyle),Model.define.defaultLinkerStyle=t):"all"==e?(i={linkerStyle:Utils.copy(Model.define.defaultLinkerStyle),shapeStyle:Utils.copy(Model.define.defaultStyle)},Model.define.defaultStyle=t.shapeStyle,Model.define.defaultLinkerStyle=t.linkerStyle):(i=Utils.copy(Model.define.defaultStyle),Model.define.defaultStyle=t);var n={style:i,type:e,update:Utils.copy(t)};MessageSource.send("setDefaultStyle",n)},clearDefaultStyle:function(){var e={linkerStyle:Utils.copy(Model.define.defaultLinkerStyle),shapeStyle:Utils.copy(Model.define.defaultStyle)};if(null!=Model.define.defaultStyle||null!=Model.define.defaultLinkerStyle){delete Model.define.defaultStyle,delete Model.define.defaultLinkerStyle;var t={style:e,update:{}};MessageSource.send("clearDefaultStyle",t)}},getShapeById:function(e){return this.define.elements[e]},getPersistenceById:function(e){return this.persistence.elements[e]},getLinkers:function(e){var t=[];for(var i in Model.define.elements){var n=Model.getShapeById(i);"linker"==n.name&&n.linkerType==e&&t.push(n)}return t},build:function(){for(var e in this.orderList=[],this.orderListGroup={},this.linkerMap.empty(),Model.define.elements){var t=Model.getShapeById(e);this.orderList.push({id:t.id,zindex:t.props.zindex}),this.buildOrderListGroup(t),"linker"==t.name&&(null!=t.from.id&&this.linkerMap.add(t.from.id,t.id),null!=t.to.id&&this.linkerMap.add(t.to.id,t.id)),t.group&&this.groupMap.push(t.group,t.id)}for(var i in this.orderList.sort(function(e,t){return e.zindex-t.zindex}),this.orderListGroup)this.orderListGroup[i].sort(function(e,t){return e.zindex-t.zindex});for(var n=0;n<Model.orderList.length;n++){e=Model.orderList[n].id;$("#"+e).css("z-index",n)}var r=0;this.orderList.length>0&&(r=this.orderList[this.orderList.length-1].zindex),this.maxZIndex=r<this.orderList.length?this.orderList.length:r,Designer.events.push("searchReplace")},buildOrderListGroup:function(e){if("linker"!=e.name)var t=Utils.getShapeBox(e),i=Math.ceil((t.x-10)/500),n=Math.ceil((t.x+t.w+10)/500),r=Math.ceil((t.y-10)/500),o=Math.ceil((t.y+t.h+10)/500);else if("linker"==e.name){var a=Utils.getLinkerBox(e);i=Math.ceil((a.x-10)/500),n=Math.ceil((a.x+a.w+10)/500),r=Math.ceil((a.y-10)/500),o=Math.ceil((a.y+a.h+10)/500)}for(var s=i;s<=n;s++)for(var l=r;l<=o;l++)null==this.orderListGroup[s+"_"+l]&&(this.orderListGroup[s+"_"+l]=[]),this.orderListGroup[s+"_"+l].push({id:e.id,zindex:e.props.zindex})},getOrderListGroup:function(e,t){return this.orderListGroup[Math.ceil(e/500)+"_"+Math.ceil(t/500)]||[]},getShapeLinkers:function(e){return this.linkerMap.map[e]},getGroupShapes:function(e){return this.groupMap.map[e]},changeShape:function(e,t){var i=Utils.copy(Schema.shapes[t]);e.name=t,e.title=i.shapeName;var n=i.attribute;if(e.attribute&&void 0!==e.attribute.collapsed&&(n.collapsed=e.attribute.collapsed),e.attribute&&void 0!==e.attribute.collapseW&&(n.collapseW=e.attribute.collapseW),e.attribute&&void 0!==e.attribute.collapseH&&(n.collapseH=e.attribute.collapseH),e.attribute&&e.attribute.markers&&e.attribute.markers.indexOf("expand")>=0&&(n.markers||(n.markers=[]),n.markers.push("expand")),e.attribute=n,e.dataAttributes=i.dataAttributes,e.dataAttributes)for(var r=0;r<e.dataAttributes.length;r++){(n=e.dataAttributes[r]).id=Utils.newId()}var o="";e.textBlock.length>0&&(o=e.textBlock[0].text),"grid"!=i.category&&(e.path=i.path,e.textBlock=i.textBlock,e.textBlock.length>0&&(e.textBlock[0].text=o)),e.anchors=i.anchors,e.fillStyle&&"image"==e.fillStyle.type&&i.fillStyle&&"image"==i.fillStyle.type&&(e.fillStyle=i.fillStyle),$.isEmptyObject(i.theme)||(e.theme=i.theme),Schema.initShapeFunctions(e),Designer.painter.renderShape(e)}},PageModel={data:{},list:[],mainId:"",build:function(){this.data={};for(var e=0;e<this.list.length;e++){var t=this.list[e];t.sort=e,this.data[t.definitionId]=t}},getPageById:function(e){for(var t=0;t<this.list.length;t++){var i=this.list[t];if(i.definitionId===e){i.sort=t,i;break}}return this.data[e]},addPage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.addPage(e,function(e,t,i){PageModel.list=e,PageModel.build();i=JSON.parse(i);Designer.renderPage(t,i,!0)})},copyPage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.copyPage(e,function(e,t,i){PageModel.list=e,PageModel.build();i=JSON.parse(i);Designer.renderPage(t,i,!0)})},delPage:function(e,t){var i=e.id,n=PageModel.getPageById(i);function r(){if(PageModel.list.splice(n.sort,1),PageModel.build(),i==Model.pageId){if(t&&$.toast({text:"您所在画布已被他人删除，为您跳转到新画布",type:"warning"}),PageModel.list.length==n.sort)var e=PageModel.list[n.sort-1].definitionId;else e=PageModel.list[n.sort].definitionId;$("#po-global-loading-wrap").css("backgroundColor","rgba(255,255,255,0.3)").show().find(".po-loadingTop p").hide(),injectExtraAsynCall("onDefById",{defId:e,chartId:chartId},function(t){Designer.renderPage(e,t.def,!0)})}else Designer.initialize.initPage()}t?r():window.publicCLB.deletePage(i,function(){r()})},renamePage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.renamePage(e,function(e){e&&(PageModel.list=e,PageModel.build()),Designer.initialize.initPage()})},sortPage:function(e,t,i){i?Designer.initialize.initPage():window.publicCLB.sortPage(e,t,function(e){PageModel.list=e,PageModel.build(),Designer.initialize.initPage()})},setMainPage:function(e,t){t?Designer.initialize.initPage():window.publicCLB.setMainPage(e,function(e){PageModel.mainId=e,Designer.initialize.initPage()})}},Utils={getDomById:function(e){return document.getElementById(e)},newId:function(){return Utils.randomString(10)+Utils.randomNumber(6)},getBaseDef:function(e){var t=encodeURIComponent(JSON.stringify(Model.define));try{t=window.Base64?Base64.btoa(t):btoa(t),e(t)}catch(i){bigPipe.render({js:[staticBasePath+"/assets/js/import/plugins/base64.js?v=1"]},function(){t=Base64.btoa(t),e(t)})}},randomNumber:function(e){for(var t="";e>0;)t+=Math.floor(10*Math.random()),e--;return t},randomString:function(e,t){t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var i="",n=0;n<e;n++){var r=Math.floor(Math.random()*t.length);i+=t.substring(r,r+1)}return i},isChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")>=0},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>=0},isSafari:function(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")},isIE:function(){var e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1||e.indexOf("Edge/")>-1},isMac:function(){return!0},beautifyLane:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=n.props.height&&n.props.height[0]?n.props.height[0]:40;if(n.children&&n.children.length)if("verticalPool"==n.name){for(var o=[],a=[],s=0,l=function(i){t.push(n.children[i]);var l=e.map(function(e,t){if(e.id==n.children[i])return t});if(l>-1){var p=beautifyObj[l];"verticalLane"==p.name?o.push(p):"horizontalSeparator"==p.name?a.push(p):"verticalSeparatorBar"==p.name&&(p.props.x=n.props.x,p.props.y=n.props.y+r,p.props.h=n.props.h-r,s=p.props.w)}},p=0,h=n.children.length;p<h;p++)l(p);o.sort(function(e,t){return e.props.x-t.props.x}),a.sort(function(e,t){return e.props.y-t.props.y});for(var d=0;d<o.length;d++){var c=o[d];c.props.y=n.props.y+r,c.props.h=n.props.h-r,c.props.x=0==d?n.props.x+s:o[d-1].props.x+o[d-1].props.w,d==o.length-1&&(c.props.w=n.props.x+n.props.w-c.props.x)}for(var u=0;u<a.length;u++){var g=a[u];g.props.x=n.props.x,g.props.w=n.props.w,g.props.y=0==u?n.props.y+r:a[u-1].props.y+a[u-1].props.h,u==a.length-1&&(g.props.h=n.props.y+n.props.h-g.props.y)}}else if("horizontalPool"==n.name){for(var y=[],f=[],x=0,v=function(i){t.push(n.children[i]);var o=e.map(function(e,t){if(e.id==n.children[i])return t});if(o>-1){var a=beautifyObj[o];"horizontalLane"==a.name?y.push(a):"verticalSeparator"==a.name?f.push(a):"horizontalSeparatorBar"==a.name&&(a.props.x=n.props.x+r,a.props.y=n.props.y,a.props.w=n.props.w-r,x=a.props.h)}},m=0;m<n.children.length;m++)v(m);y.sort(function(e,t){return e.props.y-t.props.y}),f.sort(function(e,t){return e.props.x-t.props.x});for(var b=0;b<y.length;b++){var w=y[b];w.props.x=n.props.x+r,w.props.w=n.props.w-r,w.props.y=0==b?n.props.y+x:y[b-1].props.y+y[b-1].props.h,b==y.length-1&&(w.props.h=n.props.y+n.props.h-w.props.y)}for(var S=0;S<f.length;S++){var k=f[S];k.props.y=n.props.y,k.props.h=n.props.h,k.props.x=0==S?n.props.x+r:f[S-1].props.x+f[S-1].props.w,S==f.length-1&&(k.props.w=n.props.x+n.props.w-k.props.x)}}}},getShapeByPosition:function(e,t,i){for(var n=[],r=Utils.isMac(),o=Model.getOrderListGroup(e,t),a=o.length-1;a>=0;a--){var s=o[a].id,l=$("#"+s),p=Model.getShapeById(s);if(!p.attribute||!p.attribute.collapseBy){var h=1;r&&(h=2);var d=Utils.restoreScale(l.position()),c=l.width(),u=l.height(),g=e-d.left,y=t-d.top,f={x:d.left,y:d.top,w:c,h:u},x=l.find(".shape_canvas")[0].getContext("2d");if("linker"==p.name){if(p.textBlock&&p.textBlock.length>0){var v=f.x,m=f.x+f.w,b=f.y,w=f.y+f.h;l.children(".linker_text").each(function(e,t){var i=Utils.restoreScale($(t).position()),n=i.left,r=i.top,o=$(t).width(),a=$(t).outerHeight();f.x+n<v&&(v=f.x+n),f.x+n+o>m&&(m=f.x+n+o),f.y+r<b&&(b=f.y+r),f.y+r+a>w&&(w=f.y+r+a)}),f.x=v,f.w=m-v,f.y=b,f.h=w-b}if(!(C=this.pointInRect(e,t,f)))continue;if(i)continue;var S={x:e-(z=15),y:t-z,w:2*z,h:2*z};if(this.pointInRect(p.to.x,p.to.y,S)){var k={type:"linker_point",point:"to",shape:p};n.push(k);continue}if(this.pointInRect(p.from.x,p.from.y,S)){k={type:"linker_point",point:"from",shape:p};n.push(k);continue}var M=l.children(".text_canvas"),_=this,D=0,P=!1;if(M.each(function(e,t){var i=Utils.restoreScale($(t).position()),n={x:i.left,y:i.top,w:$(t).outerWidth(),h:$(t).outerHeight()};if(_.pointInRect(g,y,n))return D=e,void(P=!0)}),P){k={type:"linker_text",shape:p,textIndex:D};n.push(k);continue}if(z=(z=7).restoreScale(),(ie=this.pointInLinker({x:e,y:t},p,z))>-1){var U=this.getLinkerLinePoints(p),L=U[ie-1],I=U[ie];2==p.points.length&&p.points[0].x==p.points[1].x&&p.points[0].y==p.points[1].y&&(L=p.from,I=p.to);k={type:"linker",shape:p,pointIndex:ie,pointPos:this.getPointInLinePos({x:e,y:t},L,I,z)};n.push(k);continue}}else{var C=this.pointInRect(e,t,f),B=!1;if(p.name.startsWith("chart_")){var T={x:d.left-0+1,y:d.top-0+1,w:c-0-2,h:u-0-2};B=this.pointInRect(e,t,T)}if(C&&p.locked&&!i){if(x.isPointInPath(g*h,y*h)||B){k={type:"shape",shape:p};n.push(k)}continue}var z=7;if(C){S={x:e-z,y:t-z,w:2*z,h:2*z};for(var O={x:p.props.x+p.props.w/2,y:p.props.y+p.props.h/2},A=p.getAnchors(),R=(k=null,0);R<A.length;R++){var W=A[R];if(W=this.getRotated(O,{x:p.props.x+W.x,y:p.props.y+W.y},p.props.angle),Utils.pointInRect(W.x,W.y,S)){if(p.name.startsWith("chart_"))W.x==p.props.x+p.props.w?W.angle=Math.PI:W.x==p.props.x?W.angle=0:W.y==p.props.y+p.props.h?W.angle=1.5*Math.PI:W.y==p.props.y&&(W.angle=.5*Math.PI);else{var E=Utils.getPointAngle(s,W.x,W.y,z);W.angle=E}k={type:"bounding",shape:p,linkPoint:W},x.isPointInPath(g*h,y*h)&&(k.inPath=!0);break}}if(null!=k){n.push(k);continue}}if(p.dataAttributes){k=null;for(var N=0;N<p.dataAttributes.length;N++){var F=p.dataAttributes[N];if("link"==F.type&&F.showType&&"none"!=F.showType){var j=l.children("#attr_canvas_"+F.id);if(j.length>0){var K=Utils.restoreScale(j.position()),H=g-K.left,G=y-K.top;if(j[0].getContext("2d").isPointInPath(H*h,G*h)){k={type:"dataAttribute",shape:p,attribute:F};break}}}}if(null!=k){n.push(k);continue}}if(!C)continue;var X=g,Y=y;if(r&&(X=g*h,Y=y*h),x.isPointInPath(X,Y)||B){if(i){if((A=p.getAnchors())&&A.length){for(var q=!1,V=a+1;V<o.length;V++){var J=o[V].id,Z=Model.getShapeById(J);Utils.rectInRect(Z.props,p.props)&&(q=!0)}if(q)continue;k={type:"shape",shape:p};n.push(k);continue}continue}k={type:"shape",shape:p};n.push(k);continue}if(!p.attribute||void 0===p.attribute.linkable||p.attribute.linkable){E=null;if(p.name.startsWith("chart_")?Math.abs(e-p.props.x)<=10?E=0:Math.abs(t-p.props.y)<=10?E=Math.PI/2:Math.abs(e-(p.props.x+p.props.w))<=10?E=Math.PI:Math.abs(t-(p.props.y+p.props.h))<=10&&(E=1.5*Math.PI):E=Utils.getPointAngle(s,e,t,z),null!=E){k=null;for(var Q={angle:E},ee=1;ee<=z;ee++)if(0==E?(Q.x=g+ee,Q.y=y):E<Math.PI/2?(Q.x=g+ee*Math.cos(E),Q.y=y+ee*Math.sin(E)):E==Math.PI/2?(Q.x=g,Q.y=y+ee):E<Math.PI?(Q.x=g-ee*Math.sin(E-Math.PI/2),Q.y=y+ee*Math.cos(E-Math.PI/2)):E==Math.PI?(Q.x=g-ee,Q.y=y):E<Math.PI/2*3?(Q.x=g-ee*Math.cos(E-Math.PI),Q.y=y-ee*Math.sin(E-Math.PI)):E==Math.PI/2*3?(Q.x=g,Q.y=y-ee):(Q.x=g+ee*Math.sin(E-Math.PI/2*3),Q.y=y-ee*Math.cos(E-Math.PI/2*3)),x.isPointInPath(Q.x*h,Q.y*h)||p.name.startsWith("chart_")){Q.x+=d.left,Q.y+=d.top,k={type:"bounding",shape:p,linkPoint:Q};break}if(null!=k){n.push(k);continue}}}}}}k=null;if(1==n.length&&(k=n[0]),n.length>1&&i)k=n[0];else if(n.length>1){var te=n[0];if("bounding"==te.type&&"linker_point"!=te.type&&"linker"!=te.type)return te;var ie=[],ne=[],re=[];for(a=0;a<n.length;a++){"bounding"==(oe=n[a]).type?re.push(oe):"linker"==oe.type?ie.push(oe):"linker_point"==oe.type&&ne.push(oe)}if(re.length>0&&ne.length>0)for(a=0;a<re.length;a++){var oe;if((oe=re[a]).inPath){k=oe;break}}null==k&&ne.length>0&&(ne.sort(function(e,t){return Utils.isSelected(e.shape.id)&&!Utils.isSelected(t.shape.id)?-1:!Utils.isSelected(e.shape.id)&&Utils.isSelected(t.shape.id)?1:t.shape.props.zindex-e.shape.props.zindex}),k=ne[0]),null==k&&ie.length>0&&(ie.sort(function(e,t){return Utils.isSelected(e.shape.id)&&!Utils.isSelected(t.shape.id)?-1:!Utils.isSelected(e.shape.id)&&Utils.isSelected(t.shape.id)?1:t.shape.props.zindex-e.shape.props.zindex}),k=ie[0]),null==k&&(k=n[0])}return k},checkCross:function(e,t,i,n){var r=!1,o=(t.x-e.x)*(n.y-i.y)-(t.y-e.y)*(n.x-i.x);if(0!=o){var a=((e.y-i.y)*(n.x-i.x)-(e.x-i.x)*(n.y-i.y))/o,s=((e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y))/o;a>=0&&a<=1&&s>=0&&s<=1&&(r=!0)}return r},rectCross:function(e,t){var i=e.x,n=e.x+e.w,r=e.y,o=e.y+e.h,a=t.x,s=t.x+t.w,l=t.y,p=t.y+t.h;return i<s&&a<n&&r<p&&l<o},rectInRect:function(e,t){var i={x:e.x,y:e.y},n={x:e.x+e.w,y:e.y},r={x:e.x+e.w,y:e.y+e.h},o={x:e.x,y:e.y+e.h};return!!(this.pointInRect(i.x,i.y,t)&&this.pointInRect(n.x,n.y,t)&&this.pointInRect(r.x,r.y,t)&&this.pointInRect(o.x,o.y,t))},pointInPolygon:function(e,t){var i,n,r,o;i=e,n={x:-1e6,y:e.y};for(var a=0,s=0;s<t.length-1;s++)r=t[s],o=t[s+1],1==Utils.checkCross(i,n,r,o)&&a++;return r=t[t.length-1],o=t[0],1==Utils.checkCross(i,n,r,o)&&a++,a%2!=0},pointInRect:function(e,t,i){return e>=i.x&&e<=i.x+i.w&&t>=i.y&&t<=i.y+i.h},pointInLinker:function(e,t,i){for(var n=this.getLinkerLinePoints(t),r={x:e.x-i,y:e.y},o={x:e.x+i,y:e.y},a={x:e.x,y:e.y-i},s={x:e.x,y:e.y+i},l=1;l<n.length;l++){var p=n[l-1],h=n[l],d=this.checkCross(r,o,p,h);if(d)return l;if(d=this.checkCross(a,s,p,h))return l}return-1},getCenterPoint:function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}},getPointInLinePos:function(e,t,i,n){var r={x:e.x-n,y:e.y},o={x:e.x+n,y:e.y},a={x:e.x,y:e.y-n},s={x:e.x,y:e.y+n},l=this.getCenterPoint(t,i),p=this.checkCross(r,o,t,l);return p?0:(p=this.checkCross(r,o,l,i))?1:(p=this.checkCross(a,s,t,l))?0:(p=this.checkCross(a,s,l,i))?1:-1},getLinkerVector:function(e){for(var t=Utils.copyArray(this.getLinkerLinePoints(e)),i=1;i<t.length;i++){var n=t[i-1],r=t[i];Math.abs(r.y-n.y)<1&&r.x>n.x?(r.v=0,r.h=1):Math.abs(r.y-n.y)<1&&r.x<n.x?(r.v=0,r.h=-1):r.y>n.y&&Math.abs(r.x-n.x)<1?(r.v=1,r.h=0):r.y<n.y&&Math.abs(r.x-n.x)<1?(r.v=-1,r.h=0):(r.v=t[i-1].v,r.h=t[i-1].h)}return t[0].v=t[1].v,t[0].h=t[1].h,t},getPointInlineProject:function(e,t,i){var n={},r=e.x,o=e.y,a=t.x,s=t.y,l=i.x,p=i.y;if(r==a&&(n.x=r,n.y=p),o==s&&(n.x=l,n.y=o),r!=a&&o!=s){var h=(s-o)/(a-r),d=-1/h,c=o-h*r,u=p-d*l;n.x=(u-c)/(h-d),n.y=(d*c-h*u)/(d-h)}return r<a?(n.x=n.x<r?r:n.x,n.x=n.x>a?a:n.x):(n.x=n.x>r?r:n.x,n.x=n.x<a?a:n.x),o<s?(n.y=n.y<o?o:n.y,n.y=n.y>s?s:n.y):(n.y=n.y>o?o:n.y,n.y=n.y<s?s:n.y),n},intersection:function(e,t,i,n){var r,o=e.x,a=e.y,s=t.x,l=t.y,p=i.x,h=i.y,d=n.x,c=n.y;return{x:((o*l-a*s)*(p-d)-(o-s)*(p*c-h*d))/(r=(o-s)*(h-c)-(a-l)*(p-d)),y:((o*l-a*s)*(h-c)-(a-l)*(p*c-h*d))/r}},getLinesFromLinker:function(e){var t=e.from,i=e.to,n=[],r=e.points;if(2==r.length&&r[0].x==r[1].x&&r[0].y==r[1].y)n.push({x1:t.x,y1:t.y,x2:i.x,y2:i.y});else{for(var o=t,a=0;a<r.length;a++){var s=r[a];if(s.x!=o.x||s.y!=o.y){var l={x1:o.x,y1:o.y,x2:s.x,y2:s.y};n.push(l),o=s}}n.push({x1:o.x,y1:o.y,x2:i.x,y2:i.y})}return n},getLinkerLength:function(e){for(var t=this.getLinkerLinePoints(e),i=0,n=1;n<t.length;n++){var r=t[n-1],o=t[n];i+=Utils.measureDistance(r,o)}return i},margeLinker:function(e,t){if("broken"!=e.linkerType)return Utils.copyArray(e.points);for(var i=Utils.copy(e),n=this.getLinkerLinePoints(i),r=t||1,o=1;o<n.length-1&&!(n.length<3);o++){o<1&&(o=1);var a=n[o-1],s=n[o],l=n[o+1];Math.abs(a.x-s.x)<r&&Math.abs(s.x-l.x)<r?(n.splice(o,1),o-=2):Math.abs(a.y-s.y)<r&&Math.abs(s.y-l.y)<r&&(n.splice(o,1),o-=2)}return n.splice(1,n.length-2)},getShapesByRange:function(e,t){var i=[];for(var n in Model.define.elements){var r=Model.getShapeById(n),o=r.props;if(o="linker"==r.name?this.getLinkerBox(r):this.getShapeBox(r),this.rectInRect(o,e))i.push(n);else if(t){var a=!1,s=!1,l={x:e.x,y:e.y},p={x:e.x+e.w,y:e.y},h={x:e.x+e.w,y:e.y+e.h},d={x:e.x,y:e.y+e.h},c=this.getShapeBox(r);r.name.startsWith("chart_")&&(a=this.pointInRect(l.x,l.y,c)||this.pointInRect(p.x,p.y,c)||this.pointInRect(h.x,h.y,c)||this.pointInRect(d.x,d.y,c),s=l.x-0<=c.x&&p.x-0>=c.x+r.props.w&&c.y<=l.y-0&&l.y-0<=c.y+r.props.h||d.x-0<=c.x&&h.x-0>=c.x+r.props.w&&c.y<=d.y-0&&d.y-0<=c.y+r.props.h||l.y-0<=c.y&&d.y-0>=c.y+r.props.h&&c.x<=l.x-0&&l.x-0<=c.left+r.props.w||p.y-0<=c.y&&h.y-0>=c.y+r.props.h&&c.x<=p.x-0&&p.x-0<=c.x+r.props.w),(this.getLineToShapePoints(r,l,p).length||this.getLineToShapePoints(r,p,h).length||this.getLineToShapePoints(r,h,d).length||this.getLineToShapePoints(r,d,l).length||a||s)&&i.push(r.id)}}return i},getControlBox:function(e){for(var t={x1:null,y1:null,x2:null,y2:null},i=0;i<e.length;i++){var n,r=e[i],o=Model.getShapeById(r);n="linker"==o.name?this.getLinkerBox(o):this.getShapeBox(o),(null==t.x1||n.x<t.x1)&&(t.x1=n.x),(null==t.y1||n.y<t.y1)&&(t.y1=n.y),(null==t.x2||n.x+n.w>t.x2)&&(t.x2=n.x+n.w),(null==t.y2||n.y+n.h>t.y2)&&(t.y2=n.y+n.h)}return{x:t.x1,y:t.y1,w:t.x2-t.x1,h:t.y2-t.y1}},getShapesBounding:function(e){for(var t={x1:null,y1:null,x2:null,y2:null},i=0;i<e.length;i++){var n,r=e[i];n="linker"==r.name?this.getLinkerBox(r):r.props,(null==t.x1||n.x<t.x1)&&(t.x1=n.x),(null==t.y1||n.y<t.y1)&&(t.y1=n.y),(null==t.x2||n.x+n.w>t.x2)&&(t.x2=n.x+n.w),(null==t.y2||n.y+n.h>t.y2)&&(t.y2=n.y+n.h)}return{x:t.x1,y:t.y1,w:t.x2-t.x1,h:t.y2-t.y1}},getShapeContext:function(e){return Utils.getDomById(e).getElementsByTagName("canvas")[0].getContext("2d")},selectIds:[],isRangeSelect:!1,selectShape:function(e,t,i){if("string"==typeof e){var n=e;(e=[]).push(n)}if(!(e.length<=0)){for(var r=[],o=0;o<e.length;o++){var a=e[o];if((!(h=Model.getShapeById(a)).attribute||!h.attribute.collapseBy)&&(r.push(a),h.group)){var s=Model.getGroupShapes(h.group);Utils.mergeArray(r,s)}}var l=[];for(o=0;o<r.length;o++){a=r[o];(h=Model.getShapeById(a)).parent&&0==h.resizeDir.length&&l.indexOf(h.parent)<0?l.push(h.parent):l.indexOf(a)<0&&l.push(a)}e=l,Utils.removeAnchors(),Utils.selectIds=[];for(var p=0;p<e.length;p++){n=e[p];var h=Model.getShapeById(n);Utils.selectIds.push(n),"linker"==h.name?this.isLocked(h.id)?Utils.showLockers(h):0!=i&&(Model.intersection[h.id]?Designer.painter.renderLinker(h,null,null,Model.intersection[h.id]):Designer.painter.renderLinker(h)):this.isLocked(h.id)?Utils.showLockers(h):1==e.length?Utils.showCreateLinker(h):Utils.showAnchors(h)}var d=!1;if(1==(l=Utils.getSelectedIds()).length)"linker"==Model.getShapeById(l[0]).name&&(d=!0,Utils.showLinkerControls());if(l.length>0&&!d)Designer.painter.drawControls(l);void 0===t&&(t=!0),this.selectCallback&&t&&this.selectCallback(),0!=i&&Designer.events.push("selectChanged"),this.showLinkerCursor(),Designer.events.push("renderSvgCharts","select")}},selectCallback:null,unselect:function(e){var t=this.selectIds;this.selectIds=[],0==t.length&&(this.isRangeSelect=!1),this.unselectGrid();for(var i=0;i<t.length;i++){var n=t[i],r=Model.getShapeById(n);"linker"==r.name&&0!=e&&(Model.intersection[r.id]?Designer.painter.renderLinker(r,null,null,Model.intersection[r.id]):Designer.painter.renderLinker(r))}$("#shape_controls").hide(),$(".pop-sub-editor").hide(),$("#pop-sub-editor-menu").removeClass("show"),Utils.removeLockers(),Utils.removeAnchors(),Utils.removeCreateLinker(),0!=e&&Designer.events.push("selectChanged"),this.hideLinkerCursor(),this.hideLinkerControls()},getSelected:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i)){var n=Model.getShapeById(i);e.push(n)}}return e},getSelectedIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];Utils.isLocked(i)||e.push(i)}return e},getSelectedLinkers:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i)){var n=Model.getShapeById(i);"linker"==n.name&&e.push(n)}}return e},getSelectedLinkerIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i))"linker"==Model.getShapeById(i).name&&e.push(i)}return e},getSelectedShapeIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];if(!Utils.isLocked(i))"linker"!=Model.getShapeById(i).name&&e.push(i)}return e},getSelectedLockedIds:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t];Utils.isLocked(i)&&e.push(i)}return e},getSelectedGroups:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);n.group&&e.indexOf(n.group)<0&&e.push(n.group)}return e},getSelectedGroupsAndShapes:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);n.group&&e.indexOf(n.group)<0&&e.push(n.group),n.group||("linker"!=n.name?e.push(n.id):null==n.from.id&&null==n.to.id&&e.push(n.id))}return e},getSelectedLanes:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);"lane"==n.category&&e.push(n)}return e},getSelectedCharts:function(){for(var e=[],t=0;t<this.selectIds.length;t++){var i=this.selectIds[t],n=Model.getShapeById(i);n.name.startsWith("chart_")&&e.push(n)}return e},isSelected:function(e){return this.selectIds.indexOf(e)>=0&&!this.isLocked(e)},selectText:function(e){if(document.body.createTextRange)(t=document.body.createTextRange()).moveToElementText(e),t.select();else if(window.getSelection){var t,i=window.getSelection();(t=document.createRange()).selectNodeContents(e),i.removeAllRanges(),i.addRange(t)}},getShapeTextNumber:function(){var e=Model.define.elements,t=this.selectIds,i="",n="";for(var r in e){var o=e[r];"linker"==o.name?o.textBlock&&o.textBlock.length?o.textBlock.map(function(e){i+=e.text||"",-1!==t.indexOf(r)&&(n+=e.text||"")}):o.text&&(i+=o.text||"",-1!==t.indexOf(r)&&(n+=o.text||"")):o.textBlock&&o.textBlock.length&&o.textBlock.map(function(e){i+=e.text||"",-1!==t.indexOf(r)&&(n+=e.text||"")})}var a=$("<div style='display:none;'>"+i+"</div>").appendTo("body");a.find(".equation-text").remove();var s=a.text().length;a.html(n).find(".equation-text").remove();var l=a.text().length;return a.remove(),{all:s,select:l}},isLocked:function(e){return!!Model.getShapeById(e).locked},linkerCursorTimer:null,showLinkerCursor:function(){this.hideLinkerCursor();var e=Utils.getSelectedIds();if(1==e.length){var t=Model.getShapeById(e[0]);if("linker"!=t.name){var i=Model.linkerMap.map[t.id];if(i&&i.length){for(var n=[],r=0;r<i.length;r++){var o=i[r],a=Model.getShapeById(o);if(t.id==a.from.id&&a.to.id){var s=this.getLinkerLength(a),l=[];if("broken"==a.linkerType){l.push({x:a.from.x,y:a.from.y,t:0});for(var p=0;p<a.points.length;p++){var h=a.points[p];l.push({x:h.x,y:h.y})}l.push({x:a.to.x,y:a.to.y});var d=0;for(p=1;p<l.length;p++){var c=l[p-1],u=l[p];d+=Utils.measureDistance(c,u),u.t=d/s}}Math.floor(s/120);for(var g=3/s,y=120*Math.ceil(s/120)/s,f=0;f<s;){var x={t:f/s,step:g,linker:a,points:l,maxT:y};n.push(x),f+=120}}}this.playLinkerCursor(n)}}}},playLinkerCursor:function(e){for(var t=0;t<e.length;t++){var i=e[t],n=$("<div class='linker_cursor'></div>").appendTo("#designer_canvas"),r=i.linker,o=Utils.getLinkerLineStyle(r.lineStyle).lineWidth+2;o<5&&(o=5);var a=o/2;i.half=a,i.dom=n,n.css({width:o,height:o,"-webkit-border-radius":a,"-moz-border-radius":a,"-ms-border-radius":a,"-o-border-radius":a,"border-radius":a,"z-index":$("#"+r.id).css("z-index")})}this.linkerCursorTimer=setInterval(function(){for(var t=0;t<e.length;t++){var i=e[t],n=i.linker;i.t>=i.maxT&&(i.t=0,i.dom.show());var r=i.t;if("broken"==n.linkerType)for(var o=1;o<i.points.length;o++){var a=i.points[o-1],s=i.points[o];if(r>=a.t&&r<s.t){var l=(r-a.t)/(s.t-a.t),p=(1-l)*a.x+l*s.x,h=(1-l)*a.y+l*s.y;i.dom.css({left:p-i.half,top:h-i.half});break}}else if("curve"==n.linkerType){var d=n.from,c=(a=n.points[0],s=n.points[1],n.to);p=d.x*Math.pow(1-r,3)+a.x*r*Math.pow(1-r,2)*3+s.x*Math.pow(r,2)*(1-r)*3+c.x*Math.pow(r,3),h=d.y*Math.pow(1-r,3)+a.y*r*Math.pow(1-r,2)*3+s.y*Math.pow(r,2)*(1-r)*3+c.y*Math.pow(r,3);i.dom.css({left:p-i.half,top:h-i.half})}else{p=(1-r)*n.from.x+r*n.to.x,h=(1-r)*n.from.y+r*n.to.y;i.dom.css({left:p-i.half,top:h-i.half})}i.t+=i.step,i.t>=1&&i.dom.hide()}},30)},hideLinkerCursor:function(){this.linkerCursorTimer&&clearInterval(this.linkerCursorTimer),$(".linker_cursor").remove()},showLinkerControls:function(){this.hideLinkerControls();var e=Utils.getSelectedIds(),t=null;if(1==e.length){var i=Model.getShapeById(e[0]);"linker"==i.name&&"curve"==i.linkerType&&(t=i)}function n(e,t){var i=null,n=null;"from"==t?(i=e.from,n=e.points[0]):(i=e.to,n=e.points[1]);var r=Utils.measureDistance(i,n)-6,o={x:.5*i.x+.5*n.x,y:.5*i.y+.5*n.y},a=Utils.getAngle(i,n)+Math.PI/2,s=$("<div class='linker_control_line'></div>").appendTo("#designer_canvas"),l=$("<div class='linker_control_point'></div>").appendTo("#designer_canvas"),p="rotate("+Math.round(a/(2*Math.PI)*360)+"deg)";return s.css({left:o.x,top:o.y-r/2,height:r,width:1..restoreScale(),"z-index":Model.orderList.length,"-webkit-transform":p,"-ms-transform":p,"-o-transform":p,"-moz-transform":p,transform:p}),l.css({left:n.x-4,top:n.y-4,transform:"scale("+1..restoreScale()+")","z-index":999999}),l.attr("ty",t),l.unbind().bind("mousedown",function(i){e=Model.getShapeById(e.id);var n=null;n="from"==t?e.points[0]:e.points[1],i.stopPropagation(),l.addClass("moving"),Designer.op.changeState("changing_curve");i.pageX,i.pageY;null!=e.textPos&&(e.textPos.x,e.textPos.y);var r=$("#designer_canvas");$(document).bind("mousemove.change_curve",function(t){var i=Utils.getRelativePos(t.pageX,t.pageY,r);n.x=i.x,n.y=i.y,Designer.painter.renderLinker(e,null,!0),Model.define.elements[e.id]=e,Utils.showLinkerControls(),$(".linker_control_point[ty="+l.attr("ty")+"]").addClass("moving"),$(document).unbind("mouseup.changed_curve").bind("mouseup.changed_curve",function(t){Model.update(e),$(document).unbind("mouseup.changed_curve")})}),$(document).unbind("mouseup.change_curve").bind("mouseup.change_curve",function(e){$(document).unbind("mouseup.change_curve"),$(document).unbind("mousemove.change_curve"),$(".linker_control_point").removeClass("moving"),Designer.op.resetState()})}),l}null!=t&&(n(t,"from"),n(t,"to"))},hideLinkerControls:function(){$(".linker_control_line").remove(),$(".linker_control_point").remove()},showLinkerEndsPoint:function(){$(".linker_ends_point").show()},hideLinkerEndsPoint:function(){$(".linker_ends_point").hide()},showAnchors:function(e){if(!($("#shape_contour_"+e.id).length>0||$("#shape_create_linkers_"+e.id).length>0)){var t=$("<div class='shape_contour' id='shape_contour_"+e.id+"'></div>").appendTo($("#designer_canvas"));t.css({left:e.props.x,top:e.props.y,"z-index":Model.orderList.length+1}),Utils.isSelected(e.id)||t.addClass("hovered_contour");for(var i=Designer.config.anchorSize-2,n={"border-color":Designer.config.anchorColor,"border-radius":Designer.config.anchorSize/2,width:i,height:i,transform:"scale( "+1/Designer.config.scale+")"},r=e.getAnchors(),o={x:e.props.w/2,y:e.props.h/2},a=e.props.angle,s=0;s<r.length;s++){var l=r[s],p=$("<div class='shape_anchor'></div>").appendTo(t),h=this.getRotated(o,l,a);n.left=h.x-Designer.config.anchorSize/2,n.top=h.y-Designer.config.anchorSize/2,p.css(n)}}},hideAnchors:function(){$(".hovered_contour").remove()},removeAnchors:function(){$(".shape_contour").remove()},showLinkerFocusPoint:function(e){var t=$(".linker_focus_point");0==t.length&&(t=$("<div class='linker_focus_point'></div>").appendTo("#designer_canvas")).css({width:"6px",height:"6px",border:"1px solid #fff",borderRadius:"50%",backgroundColor:"#EB5555",position:"absolute",transform:"translate(-50%,-50%) scale("+1..restoreScale()+")",zIndex:Model.orderList.length+1}),t.css({left:e.x,top:e.y})},hideLinkerFocusPoint:function(){$(".linker_focus_point").remove()},showLockers:function(e){var t=$("#"+e.id),i=this.getShapeBox(e);function n(e){(function(){var e=$("<canvas class='shape_locker' width='10px' height='10px'></canvas>").appendTo(t),i=e[0].getContext("2d");return i.strokeStyle="#777",i.lineWidth=1,i.beginPath(),i.moveTo(2,2),i.lineTo(9,9),i.moveTo(2,9),i.lineTo(9,2),i.stroke(),e})().css({left:e.x-i.x+5,top:e.y-i.y+5})}if("linker"!=e.name){var r=e.props,o={x:r.x+r.w/2,y:r.y+r.h/2};n(this.getRotated(o,{x:r.x,y:r.y},e.props.angle)),n(this.getRotated(o,{x:r.x+r.w,y:r.y},e.props.angle)),n(this.getRotated(o,{x:r.x+r.w,y:r.y+r.h},e.props.angle)),n(this.getRotated(o,{x:r.x,y:r.y+r.h},e.props.angle))}else n(e.from),n(e.to)},removeLockers:function(){$(".shape_locker").remove()},showCreateLinkerMulti:function(e){for(var t=0;t<e.length;t++){var i=e[t];"linker"==i.name||this.isLocked(i.id)||this.showCreateLinker(i)}},showCreateLinker:function(e){if(!($("#shape_create_linkers_"+e.id).length>0))for(var t=16..restoreScale(),i=$("<div class='shape_create_linkers' id='shape_create_linkers_"+e.id+"'></div>").appendTo($("#designer_canvas")),n={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2},r=e.getAnchors(),o=0;o<r.length;o++){var a,s,l,p,h=r[o],d=h.x,c=h.y,u=e.props.w-h.x,g=e.props.h-h.y,y=Math.min(d,c,u,g);d==y?(a=e.props.x-t,s=e.props.y+e.props.h/2,l=e.props.x-80,p=s):c==y?(a=e.props.x+e.props.w/2,s=e.props.y-t,l=a,p=e.props.y-80):u==y?(a=e.props.x+e.props.w+t,s=e.props.y+e.props.h/2,l=e.props.x+e.props.w+80,p=s):g==y&&(a=e.props.x+e.props.w/2,s=e.props.y+e.props.h+t,l=a,p=e.props.y+e.props.h+80),h=this.getRotated(n,{x:a,y:s},e.props.angle);var f=this.getRotated(n,{x:l,y:p},e.props.angle),x=this.getLineToShapePoints(e,h,n);if(x=x.length?x[0]:h,e.name.startsWith("chart_")){if(0==o)var v=.5*Math.PI;else if(1==o)v=1.5*Math.PI;else if(2==o)v=0;else if(3==o)v=Math.PI}else v=this.getPointAngle(e.id,x.x,x.y,7);$("<div class='shape_create_linker po-diagraming-icons' shape_id='"+e.id+"' angle="+v+" x1="+x.x+" y1="+x.y+" x2="+f.x+" y2="+f.y+">&#xe7fb;</div>").appendTo(i).css({left:h.x,top:h.y,"z-index":Model.orderList.length+2,transform:"scale("+1..restoreScale()+")"})}},removeCreateLinker:function(){$(".shape_create_linkers").remove()},measureDistance:function(e,t){var i=t.y-e.y,n=t.x-e.x;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},removeFromArray:function(e,t){var i=e.indexOf(t);return i>=0&&e.splice(i,1),e},addToArray:function(e,t){return e.indexOf(t)<0&&e.push(t),e},mergeArray:function(e,t){for(var i=0;i<t.length;i++){var n=t[i];e.indexOf(n)<0&&e.push(n)}return e},getCirclePoints:function(e,t,i){for(var n=Math.PI/90,r=[],o=0;o<180;o++){var a=n*o,s={x:e-Math.cos(a)*i,y:t-Math.sin(a)*i,angle:a};r.push(s)}return r},getLineToShapePoints:function(e,t,i){var n=[];if("linker"==e.name)return n;for(var r=this.getShapeBox(e),o=this.getShapeContext(e.id),a=Utils.isMac(),s=t.x,l=t.y,p=i.x,h=i.y,d=this.measureDistance(t,i),c=Math.atan2(h-l,p-s),u=-1;u<=d;u++){var g=t.x+Math.cos(c)*u,y=t.y+Math.sin(c)*u,f=g-(r.x-10),x=y-(r.y-10);a&&(f*=2,x*=2),o.isPointInPath(f,x)?n.push({x:g,y:y,inPath:!0}):n.push({x:g,y:y,inPath:!1})}var v=n.length;return n.filter(function(e,t){return!(!(t>0&&e.inPath)||n[t-1].inPath)||!(!(t<v-1&&e.inPath)||n[t+1].inPath)})},getPointAngle:function(e,t,i,n){var r=Utils.restoreScale($("#"+e).position()),o=Utils.getShapeContext(e),a=Utils.isMac();t-=r.left,i-=r.top;for(var s=this.getCirclePoints(t,i,n),l=s.length,p=!1,h=0;h<l;h++){var d=(y=s[h]).x,c=y.y;a&&(d=2*y.x+4,c=2*y.y+6),o.isPointInPath(d,c)?(y.inPath=!0,p=!0):y.inPath=!1}if(0==p)return null;var u=null,g=null;for(h=0;h<l;h++){var y;if(!(y=s[h]).inPath){if(null==u)s[(h-1+l)%l].inPath&&(u=y.angle);if(null==g)s[(h+1+l)%l].inPath&&(g=y.angle);if(null!=u&&null!=g)break}}return(u+(2*Math.PI+g-u)%(2*Math.PI)/2)%(2*Math.PI)},getAngleDir:function(e){var t=Math.PI;return e>=t/4&&e<t/4*3?1:e>=t/4*3&&e<t/4*5?2:e>=t/4*5&&e<t/4*7?3:4},getLinkerPoints:function(e,t,i){for(var n=Utils.copyArray(e.points),r=-1,o=-1,a=0;a<n.length;a++){(_=n[a].fixed)&&-1==r&&(r=a),_&&(o=a)}if(r>-1&&!0!==i)return n=this.getLinkerFixedPoints(e,r,o,t,i);if(n=[],"broken"==e.linkerType){var s=Math.PI,l=e.from,p=e.to,h=Math.abs(p.x-l.x),d=Math.abs(p.y-l.y);t=t?20:0;var c=null!=l.id&&Model.getShapeById(l.id),u=null!=p.id&&Model.getShapeById(p.id);if(c&&u){var g=this.getAngleDir(l.angle),y=this.getAngleDir(p.angle);if(1==g&&1==y){l.y<p.y?(_=l,D=p,P=!1):(_=p,D=l,P=!0);var f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>=f.x-30&&D.x<=f.x+f.w+30){m=D.x<f.x+f.w/2?f.x-30:f.x+f.w+30;var v=_.y-30;n.push({x:_.x,y:v}),_.id!==D.id&&n.push({x:m,y:v}),v=D.y-30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{v=_.y-30;n.push({x:_.x,y:v}),n.push({x:D.x,y:v})}}else if(3==g&&3==y){l.y>p.y?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>=f.x-30&&D.x<=f.x+f.w+30){v=_.y+30;m=D.x<f.x+f.w/2?f.x-30:f.x+f.w+30,n.push({x:_.x,y:v}),_.id!==D.id&&n.push({x:m,y:v}),v=D.y+30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{v=_.y+30;n.push({x:_.x,y:v}),n.push({x:D.x,y:v})}}else if(2==g&&2==y){l.x>p.x?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.y>=f.y-30&&D.y<=f.y+f.h+30){var m=_.x+30;v=D.y<f.y+f.h/2?f.y-30:f.y+f.h+30,n.push({x:m,y:_.y}),_.id!==D.id&&n.push({x:m,y:v}),m=D.x+30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:m,y:D.y})}else{m=_.x+30;n.push({x:m,y:_.y}),n.push({x:m,y:D.y})}}else if(4==g&&4==y){l.x<p.x?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.y>=f.y-30&&D.y<=f.y+f.h+30){m=_.x-30;v=D.y<f.y+f.h/2?f.y-30:f.y+f.h+30,n.push({x:m,y:_.y}),_.id!==D.id&&n.push({x:m,y:v}),m=D.x-30,_.id!==D.id&&n.push({x:m,y:v}),n.push({x:m,y:D.y})}else{m=_.x-30;n.push({x:m,y:_.y}),n.push({x:m,y:D.y})}}else if(1==g&&3==y||3==g&&1==y){1==g?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.y<=_.y){v=_.y-d/2;n.push({x:_.x,y:v}),n.push({x:D.x,y:v})}else{var b=f.x+f.w,w=x.x+x.w;v=_.y-30;if(w>=f.x&&x.x<=b){var S=f.x+f.w/2;m=D.x<S?f.x<x.x?f.x-30:x.x-30:b>w?b+30:w+30,x.y<_.y&&(v=x.y-30)}else m=D.x<_.x?w+(f.x-w)/2:b+(x.x-b)/2;n.push({x:_.x,y:v}),n.push({x:m,y:v}),v=D.y+30,n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(2==g&&4==y||4==g&&2==y){2==g?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>_.x){m=_.x+h/2;n.push({x:m,y:_.y}),n.push({x:m,y:D.y})}else{var k=f.y+f.h,M=x.y+x.h;m=_.x+30;if(M>=f.y&&x.y<=k){S=f.y+f.h/2;v=D.y<S?f.y<x.y?f.y-30:x.y-30:k>M?k+30:M+30,x.x+x.w>_.x&&(m=x.x+x.w+30)}else v=D.y<_.y?M+(f.y-M)/2:k+(x.y-k)/2;n.push({x:m,y:_.y}),n.push({x:m,y:v}),m=D.x-30,n.push({x:m,y:v}),n.push({x:m,y:D.y})}}else if(1==g&&2==y||2==g&&1==y){2==g?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>_.x&&D.y>_.y)n.push({x:D.x,y:_.y});else if(D.x>_.x&&x.x>_.x){m=x.x-_.x<60?_.x+(x.x-_.x)/2:_.x+30;v=D.y-30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x<=_.x&&D.y>f.y+f.h){k=f.y+f.h,m=_.x+30;v=D.y-k<60?k+(D.y-k)/2:D.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=(w=x.x+x.w)>_.x?w+30:_.x+30,v=D.y<f.y?D.y-30:f.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(1==g&&4==y||4==g&&1==y){4==g?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,w=(x=Model.getShapeById(D.id).props).x+x.w;if(D.x<_.x&&D.y>_.y)n.push({x:D.x,y:_.y});else if(D.x<_.x&&w<_.x){m=_.x-w<60?w+(_.x-w)/2:_.x-30;v=D.y-30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x>=_.x&&D.y>f.y+f.h){k=f.y+f.h,m=_.x-30;v=D.y-k<60?k+(D.y-k)/2:D.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=x.x<_.x?x.x-30:_.x-30,v=D.y<f.y?D.y-30:f.y-30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(2==g&&3==y||3==g&&2==y){2==g?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,x=Model.getShapeById(D.id).props;if(D.x>_.x&&D.y<_.y)n.push({x:D.x,y:_.y});else if(D.x>_.x&&x.x>_.x){m=x.x-_.x<60?_.x+(x.x-_.x)/2:_.x+30;v=D.y+30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x<=_.x&&D.y<f.y){m=_.x+30;v=f.y-D.y<60?D.y+(f.y-D.y)/2:D.y+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=(w=x.x+x.w)>_.x?w+30:_.x+30,v=D.y>f.y+f.h?D.y+30:f.y+f.h+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}else if(3==g&&4==y||4==g&&3==y){4==g?(_=l,D=p,P=!1):(_=p,D=l,P=!0);f=Model.getShapeById(_.id).props,w=(x=Model.getShapeById(D.id).props).x+x.w;if(D.x<_.x&&D.y<_.y)n.push({x:D.x,y:_.y});else if(D.x<_.x&&w<_.x){m=_.x-w<60?w+(_.x-w)/2:_.x-30;v=D.y+30;n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else if(D.x>=_.x&&D.y<f.y){m=_.x-30;v=f.y-D.y<60?D.y+(f.y-D.y)/2:D.y+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}else{m=x.x<_.x?x.x-30:_.x-30,v=D.y>f.y+f.h?D.y+30:f.y+f.h+30,n.push({x:m,y:_.y}),n.push({x:m,y:v}),n.push({x:D.x,y:v})}}P&&n.reverse()}else if(c||u){var _,D,P,U;c?(_=l,D=p,P=!1,U=l.angle):(_=p,D=l,P=!0,U=p.angle);var $=Model.getShapeById(_.id).props;if(U>=s/4&&U<s/4*3)if(D.y<_.y-t)if(h>=d)n.push({x:_.x,y:D.y});else{S=d/2;n.push({x:_.x,y:_.y-S}),n.push({x:D.x,y:_.y-S})}else if(n.push({x:_.x,y:_.y-30}),h>=d)if(D.x>=$.x-30&&D.x<=$.x+$.w+30){var L=$.x+$.w/2;D.x<L?(n.push({x:$.x-30,y:_.y-30}),n.push({x:$.x-30,y:D.y})):(n.push({x:$.x+$.w+30,y:_.y-30}),n.push({x:$.x+$.w+30,y:D.y}))}else D.x<$.x?(n.push({x:D.x+30,y:_.y-30}),n.push({x:D.x+30,y:D.y})):(n.push({x:D.x-30,y:_.y-30}),n.push({x:D.x-30,y:D.y}));else if(D.x>=$.x-30&&D.x<=$.x+$.w+30){L=$.x+$.w/2;D.x<L?(n.push({x:$.x-30,y:_.y-30}),n.push({x:$.x-30,y:D.y-30}),n.push({x:D.x,y:D.y-30})):(n.push({x:$.x+$.w+30,y:_.y-30}),n.push({x:$.x+$.w+30,y:D.y-30}),n.push({x:D.x,y:D.y-30}))}else n.push({x:D.x,y:_.y-30});else if(U>=s/4*3&&U<s/4*5)if(D.x>_.x+t)if(h>=d){S=h/2;n.push({x:_.x+S,y:_.y}),n.push({x:_.x+S,y:D.y})}else n.push({x:D.x,y:_.y});else if(n.push({x:_.x+30,y:_.y}),h>=d)if(D.y>=$.y-30&&D.y<=$.y+$.h+30){L=$.y+$.h/2;D.y<L?(n.push({x:_.x+30,y:$.y-30}),n.push({x:D.x+30,y:$.y-30}),n.push({x:D.x+30,y:D.y})):(n.push({x:_.x+30,y:$.y+$.h+30}),n.push({x:D.x+30,y:$.y+$.h+30}),n.push({x:D.x+30,y:D.y}))}else n.push({x:_.x+30,y:D.y});else if(D.y>=$.y-30&&D.y<=$.y+$.h+30){L=$.y+$.h/2;D.y<L?(n.push({x:_.x+30,y:$.y-30}),n.push({x:D.x,y:$.y-30})):(n.push({x:_.x+30,y:$.y+$.h+30}),n.push({x:D.x,y:$.y+$.h+30}))}else D.y<_.y?(n.push({x:_.x+30,y:D.y+30}),n.push({x:D.x,y:D.y+30})):(n.push({x:_.x+30,y:D.y-30}),n.push({x:D.x,y:D.y-30}));else if(U>=s/4*5&&U<s/4*7)if(D.y>_.y+t)if(h>=d)n.push({x:_.x,y:D.y});else{S=d/2;n.push({x:_.x,y:_.y+S}),n.push({x:D.x,y:_.y+S})}else if(n.push({x:_.x,y:_.y+30}),h>=d)if(D.x>=$.x-30&&D.x<=$.x+$.w+30){L=$.x+$.w/2;D.x<L?(n.push({x:$.x-30,y:_.y+30}),n.push({x:$.x-30,y:D.y})):(n.push({x:$.x+$.w+30,y:_.y+30}),n.push({x:$.x+$.w+30,y:D.y}))}else D.x<$.x?(n.push({x:D.x+30,y:_.y+30}),n.push({x:D.x+30,y:D.y})):(n.push({x:D.x-30,y:_.y+30}),n.push({x:D.x-30,y:D.y}));else if(D.x>=$.x-30&&D.x<=$.x+$.w+30){L=$.x+$.w/2;D.x<L?(n.push({x:$.x-30,y:_.y+30}),n.push({x:$.x-30,y:D.y+30}),n.push({x:D.x,y:D.y+30})):(n.push({x:$.x+$.w+30,y:_.y+30}),n.push({x:$.x+$.w+30,y:D.y+30}),n.push({x:D.x,y:D.y+30}))}else n.push({x:D.x,y:_.y+30});else if(D.x<_.x-t)if(h>=d){S=h/2;n.push({x:_.x-S,y:_.y}),n.push({x:_.x-S,y:D.y})}else n.push({x:D.x,y:_.y});else if(n.push({x:_.x-30,y:_.y}),h>=d)if(D.y>=$.y-30&&D.y<=$.y+$.h+30){L=$.y+$.h/2;D.y<L?(n.push({x:_.x-30,y:$.y-30}),n.push({x:D.x-30,y:$.y-30}),n.push({x:D.x-30,y:D.y})):(n.push({x:_.x-30,y:$.y+$.h+30}),n.push({x:D.x-30,y:$.y+$.h+30}),n.push({x:D.x-30,y:D.y}))}else n.push({x:_.x-30,y:D.y});else if(D.y>=$.y-30&&D.y<=$.y+$.h+30){L=$.y+$.h/2;D.y<L?(n.push({x:_.x-30,y:$.y-30}),n.push({x:D.x,y:$.y-30})):(n.push({x:_.x-30,y:$.y+$.h+30}),n.push({x:D.x,y:$.y+$.h+30}))}else D.y<_.y?(n.push({x:_.x-30,y:D.y+30}),n.push({x:D.x,y:D.y+30})):(n.push({x:_.x-30,y:D.y-30}),n.push({x:D.x,y:D.y-30}));P&&n.reverse()}else if(h>=d){S=(p.x-l.x)/2;n.push({x:l.x+S,y:l.y}),n.push({x:l.x+S,y:p.y})}else{S=(p.y-l.y)/2;n.push({x:l.x,y:l.y+S}),n.push({x:p.x,y:l.y+S})}}else if("curve"==e.linkerType){l=e.from,p=e.to;var I=.4*this.measureDistance(l,p);function C(e,t){if(null!=e.id)return{x:e.x-I*Math.cos(e.angle),y:e.y-I*Math.sin(e.angle)};var i=Math.abs(e.y-t.y),n=Math.abs(e.x-t.x),r=Math.atan(i/n),o={};return e.x<=t.x?o.x=e.x+I*Math.cos(r):o.x=e.x-I*Math.cos(r),e.y<=t.y?o.y=e.y+I*Math.sin(r):o.y=e.y-I*Math.sin(r),o}n.push(C(l,p)),n.push(C(p,l))}return n},getLinkerFixedPoints:function(e,t,i,n,r){var o=e.points,a=Math.PI,s=e.from,l=e.to;n=n?20:0;var p,h,d,c,u,g=null!=s.id&&Model.getShapeById(s.id),y=null!=l.id&&Model.getShapeById(l.id),f=[];if(g&&"from"==r||y&&"to"==r){g&&"from"==r?(p=s,h=(u=o.slice(t))[0],c=s.angle,u[1]||l,d=!1):(p=l,h=(u=o.slice(0,i+1))[i],c=l.angle,u[i-1]||s,d=!0);var x=Math.abs(h.x-p.x),v=Math.abs(h.y-p.y),m=Model.getShapeById(p.id).props;if(c>=a/4&&c<a/4*3)if(h.y<p.y-n)if(x>=v)f.push({x:p.x,y:h.y});else{var b=v/2;f.push({x:p.x,y:p.y-b}),f.push({x:h.x,y:p.y-b})}else if(f.push({x:p.x,y:p.y-30}),x>=v)if(h.x>=m.x-30&&h.x<=m.x+m.w+30){var w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y-30}),f.push({x:m.x-30,y:h.y})):(f.push({x:m.x+m.w+30,y:p.y-30}),f.push({x:m.x+m.w+30,y:h.y}))}else h.x<m.x?(f.push({x:h.x+30,y:p.y-30}),f.push({x:h.x+30,y:h.y})):(f.push({x:h.x-30,y:p.y-30}),f.push({x:h.x-30,y:h.y}));else if(h.x>=m.x-30&&h.x<=m.x+m.w+30){w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y-30}),f.push({x:m.x-30,y:h.y-30}),f.push({x:h.x,y:h.y-30})):(f.push({x:m.x+m.w+30,y:p.y-30}),f.push({x:m.x+m.w+30,y:h.y-30}),f.push({x:h.x,y:h.y-30}))}else f.push({x:h.x,y:p.y-30});else if(c>=a/4*3&&c<a/4*5)if(h.x>p.x+n)if(x>=v){b=x/2;f.push({x:p.x+b,y:p.y}),f.push({x:p.x+b,y:h.y})}else f.push({x:h.x,y:p.y});else if(f.push({x:p.x+30,y:p.y}),x>=v)if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x+30,y:m.y-30}),f.push({x:h.x+30,y:m.y-30}),f.push({x:h.x+30,y:h.y})):(f.push({x:p.x+30,y:m.y+m.h+30}),f.push({x:h.x+30,y:m.y+m.h+30}),f.push({x:h.x+30,y:h.y}))}else f.push({x:p.x+30,y:h.y});else if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x+30,y:m.y-30}),f.push({x:h.x,y:m.y-30})):(f.push({x:p.x+30,y:m.y+m.h+30}),f.push({x:h.x,y:m.y+m.h+30}))}else h.y<p.y?(f.push({x:p.x+30,y:h.y+30}),f.push({x:h.x,y:h.y+30})):(f.push({x:p.x+30,y:h.y-30}),f.push({x:h.x,y:h.y-30}));else if(c>=a/4*5&&c<a/4*7)if(h.y>p.y+n)if(x>=v)f.push({x:p.x,y:h.y});else{b=v/2;f.push({x:p.x,y:p.y+b}),f.push({x:h.x,y:p.y+b})}else if(f.push({x:p.x,y:p.y+30}),x>=v)if(h.x>=m.x-30&&h.x<=m.x+m.w+30){w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y+30}),f.push({x:m.x-30,y:h.y})):(f.push({x:m.x+m.w+30,y:p.y+30}),f.push({x:m.x+m.w+30,y:h.y}))}else h.x<m.x?(f.push({x:h.x+30,y:p.y+30}),f.push({x:h.x+30,y:h.y})):(f.push({x:h.x-30,y:p.y+30}),f.push({x:h.x-30,y:h.y}));else if(h.x>=m.x-30&&h.x<=m.x+m.w+30){w=m.x+m.w/2;h.x<w?(f.push({x:m.x-30,y:p.y+30}),f.push({x:m.x-30,y:h.y+30}),f.push({x:h.x,y:h.y+30})):(f.push({x:m.x+m.w+30,y:p.y+30}),f.push({x:m.x+m.w+30,y:h.y+30}),f.push({x:h.x,y:h.y+30}))}else f.push({x:h.x,y:p.y+30});else if(h.x<p.x-n)if(x>=v){b=x/2;f.push({x:p.x-b,y:p.y}),f.push({x:p.x-b,y:h.y})}else f.push({x:h.x,y:p.y});else if(f.push({x:p.x-30,y:p.y}),x>=v)if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x-30,y:m.y-30}),f.push({x:h.x-30,y:m.y-30}),f.push({x:h.x-30,y:h.y})):(f.push({x:p.x-30,y:m.y+m.h+30}),f.push({x:h.x-30,y:m.y+m.h+30}),f.push({x:h.x-30,y:h.y}))}else f.push({x:p.x-30,y:h.y});else if(h.y>=m.y-30&&h.y<=m.y+m.h+30){w=m.y+m.h/2;h.y<w?(f.push({x:p.x-30,y:m.y-30}),f.push({x:h.x,y:m.y-30})):(f.push({x:p.x-30,y:m.y+m.h+30}),f.push({x:h.x,y:m.y+m.h+30}))}else h.y<p.y?(f.push({x:p.x-30,y:h.y+30}),f.push({x:h.x,y:h.y+30})):(f.push({x:p.x-30,y:h.y-30}),f.push({x:h.x,y:h.y-30}))}else{if("from"==r?(p=s,h=(u=o.slice(t))[0],c=s.angle,u[1]||l,d=!1):(p=l,h=(u=o.slice(0,i+1))[i],c=l.angle,u[i-1]||s,d=!0),(x=Math.abs(h.x-p.x))>=(v=Math.abs(h.y-p.y))){b=(h.x-p.x)/2;f.push({x:p.x+b,y:p.y}),f.push({x:p.x+b,y:h.y})}else{b=(h.y-p.y)/2;f.push({x:p.x,y:p.y+b}),f.push({x:h.x,y:p.y+b})}}return d?(f.reverse(),u.concat(f)):f.concat(u)},getLinkerLinePoints:function(e){var t=[];if("curve"!=e.linkerType)t.push(e.from),t=t.concat(e.points);else for(var i=0;i<=1;){var n={x:(1-i)*(1-i)*(1-i)*e.from.x+3*(1-i)*(1-i)*i*e.points[0].x+3*(1-i)*i*i*e.points[1].x+i*i*i*e.to.x,y:(1-i)*(1-i)*(1-i)*e.from.y+3*(1-i)*(1-i)*i*e.points[0].y+3*(1-i)*i*i*e.points[1].y+i*i*i*e.to.y};t.push(n),i+=.05}return t.push(e.to),t},getLinkerLinesPoints:function(e){var t=[],i=0;if("broken"==e.linkerType){var n=[];n.push(e.from),(n=n.concat(e.points)).push(e.to);for(var r=1;r<n.length;r++){var o=n[r],a=n[r-1];for(i=0;i<=1;){var s={x:a.x*(1-i)+o.x*i,y:a.y*(1-i)+o.y*i};t.push(s),i+=.05}}}if("normal"==e.linkerType)for(;i<1;){s={x:e.from.x*(1-i)+e.to.x*i,y:e.from.y*(1-i)+e.to.y*i};t.push(s),i+=.05}else for(;i<1;){s={x:(1-i)*(1-i)*(1-i)*e.from.x+3*(1-i)*(1-i)*i*e.points[0].x+3*(1-i)*i*i*e.points[1].x+i*i*i*e.to.x,y:(1-i)*(1-i)*(1-i)*e.from.y+3*(1-i)*(1-i)*i*e.points[0].y+3*(1-i)*i*i*e.points[1].y+i*i*i*e.to.y};t.push(s),i+=.05}return t},getLinkerBox:function(e){for(var t=this.getLinkerLinePoints(e),i=t[0].x,n=t[0].y,r=t[0].x,o=t[0].y,a=0;a<t.length;a++){var s=t[a];s.x<i?i=s.x:s.x>r&&(r=s.x),s.y<n?n=s.y:s.y>o&&(o=s.y)}return{x:i,y:n,w:r-i,h:o-n}},getShapeBox:function(e){var t=e.props,i=e.props.angle;return this.getRotatedBox(t,i)},getRotatedBox:function(e,t,i){if(0==t)return e;i||(i={x:e.x+e.w/2,y:e.y+e.h/2});var n=this.getRotated(i,{x:e.x,y:e.y},t),r=this.getRotated(i,{x:e.x+e.w,y:e.y},t),o=this.getRotated(i,{x:e.x+e.w,y:e.y+e.h},t),a=this.getRotated(i,{x:e.x,y:e.y+e.h},t),s=Math.min(n.x,r.x,o.x,a.x),l=Math.max(n.x,r.x,o.x,a.x),p=Math.min(n.y,r.y,o.y,a.y);return{x:s,y:p,w:l-s,h:Math.max(n.y,r.y,o.y,a.y)-p}},getRotated:function(e,t,i){var n=this.measureDistance(e,t);if(0==n||0==i)return t;var r=Math.atan(Math.abs(t.x-e.x)/Math.abs(e.y-t.y));t.x>=e.x&&t.y>=e.y?r=Math.PI-r:t.x<=e.x&&t.y>=e.y?r=Math.PI+r:t.x<=e.x&&t.y<=e.y&&(r=2*Math.PI-r);var o=((r%=2*Math.PI)+i)%(2*Math.PI);return{x:e.x+Math.sin(o)*n,y:e.y-Math.cos(o)*n}},getShapeAnchorInLinker:function(e){if("linker"==e.name)return[];for(var t=e.getAnchors(),i=[],n={x:e.props.x+e.props.w/2,y:e.props.y+e.props.h/2},r=0;r<t.length;r++){var o=t[r],a={x:o.x+e.props.x,y:o.y+e.props.y},s=this.getRotated(n,a,e.props.angle);i.push(s)}for(var l=[],p=Model.orderList.length-1;p>=0;p--){var h=Model.orderList[p].id,d=Model.getShapeById(h);if(!("linker"!=d.name||d.attribute&&d.attribute.collapseBy)){var c=d,u=null;for(r=0;r<i.length;r++){var g={x:(y=i[r]).x-10,y:y.y-10,w:20,h:20};if(null==c.from.id&&this.pointInRect(c.from.x,c.from.y,g)){u={linker:c,anchors:[y],type:"from"};break}if(null==c.to.id&&this.pointInRect(c.to.x,c.to.y,g)){u={linker:c,anchors:[y],type:"to"};break}}if(null==u)for(r=0;r<i.length;r++){var y=i[r],f=Utils.pointInLinker(y,c,10),x=Utils.pointInRect(c.to.x,c.to.y,e.props),v=Utils.pointInRect(c.from.x,c.from.y,e.props);f>-1&&(v||x?x&&null==c.to.id?u={linker:c,anchors:[y],type:"to"}:v&&null==c.from.id&&(u={linker:c,anchors:[y],type:"from"}):(null!=u&&"line"==u.type||(u={linker:c,anchors:[],type:"line"}),u.anchors.push(y)))}if(null!=u){if("line"==u.type&&1==u.anchors.length)continue;l.push(u)}}}return l},getEndpointAngle:function(e,t){var i,n;if(i="from"==t?e.from:e.to,"normal"==e.linkerType)n="from"==t?e.to:e.from;else if("broken"==e.linkerType)"from"==t?(n=e.points[0]||e.to).x==i.x&&n.y==i.y&&(n=e.points[1]||e.to):(n=e.points[e.points.length-1]||e.from).x==i.x&&n.y==i.y&&(n=e.points[e.points.length-2]||e.from);else{var r,o=Utils.measureDistance(e.from,e.to);n={x:(1-(r="from"==t?12/o:1-12/o))*(1-r)*(1-r)*e.from.x+3*(1-r)*(1-r)*r*e.points[0].x+3*(1-r)*r*r*e.points[1].x+r*r*r*e.to.x,y:(1-r)*(1-r)*(1-r)*e.from.y+3*(1-r)*(1-r)*r*e.points[0].y+3*(1-r)*r*r*e.points[1].y+r*r*r*e.to.y}}return this.getAngle(n,i)},getAngle:function(e,t){var i=Math.atan(Math.abs(e.y-t.y)/Math.abs(e.x-t.x));return i=isNaN(i)?1.5707963267948966:i,t.x<=e.x&&t.y>e.y?i=Math.PI-i:t.x<e.x&&t.y<=e.y?i=Math.PI+i:t.x>=e.x&&t.y<e.y&&(i=2*Math.PI-i),i},getDarkerColor:function(e,t){t||(t=13);var i=e.split(","),n=parseInt(i[0]),r=parseInt(i[1]),o=parseInt(i[2]),a=Math.round(n-n/255*t);a<0&&(a=0);var s=Math.round(r-r/255*t);s<0&&(s=0);var l=Math.round(o-o/255*t);return l<0&&(l=0),a+","+s+","+l},getDarkestColor:function(e){return this.getDarkerColor(e,26)},toScale:function(e){var t={};for(var i in e)t[i]=e[i],"number"==typeof e[i]&&(t[i]=t[i].toScale());return t},restoreScale:function(e){var t={};for(var i in e)t[i]=e[i],"number"==typeof e[i]&&(t[i]=t[i].restoreScale());return t},shapesToRound:function(e){if(e&&e.length)for(var t=0,i=e.length;t<i;t++){var n=e[t];"lane"==n.category&&n.props&&(n.props.x=Math.round(n.props.x),n.props.y=Math.round(n.props.y),n.props.w=Math.round(n.props.w),n.props.h=Math.round(n.props.h))}},getOutlinkers:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push(n.id)}var r=[],o=[];for(i=0;i<e.length;i++){if("linker"!=(n=e[i]).name){var a=Model.getShapeLinkers(n.id);if(a&&a.length>0)for(var s=0;s<a.length;s++){var l=a[s];!this.isSelected(l)&&o.indexOf(l)<0&&t.indexOf(l)<0&&(r.push(Model.getShapeById(l)),o.push(l))}}}return r},getFamilyShapes:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];if("linker"!=r.name){if(r.parent&&Model.getShapeById(r.parent)){var o=Model.getShapeById(r.parent);Utils.isSelected(r.parent)||t.push(o);var a=this.getChildrenShapes(o);t=t.concat(a)}var s=this.getChildrenShapes(r);t=t.concat(s)}}for(n=0;n<t.length;n++)i.indexOf(t[n].id)>-1?(t.splice(n,1),n--):i.push(t[n].id);return t},getChildrenShapes:function(e){var t=[];if(e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++){var n=e.children[i],r=Model.getShapeById(n);r?!Utils.isSelected(n)&&r&&t.push(Model.getShapeById(n)):(e.children.splice(i,1),i--)}return t},isFamilyShape:function(e,t){return e.parent==t.id||(e.id==t.parent||!(!e.parent||e.parent!=t.parent))},getContainedShapes:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];if("linker"!=r.name&&r.attribute&&r.attribute.container){var o=a(r);t=t.concat(o)}}function a(e){for(var t=[],n=Model.orderList.length-1;n>=0;n--){var r=Model.orderList[n].id;if(e.id!=r&&!Utils.isSelected(r)&&i.indexOf(r)<0){var o=Model.getShapeById(r);if(!(o.attribute&&void 0!==o.attribute.container&&0!=o.attribute.container||Utils.isFamilyShape(o,e))){var a=Utils.getShapeBox(o);Utils.rectInRect(a,e.props)&&o.container==e.id&&(t.push(o),i.push(r))}}}return t}return t},getAttachedShapes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].id);var n=[];for(i=0;i<e.length;i++){var r=e[i];if("task"==r.groupName||"callActivity"==r.groupName||"subProcess"==r.groupName){for(var o=[],a=Model.orderList.length-1;a>=0;a--){var s=Model.orderList[a].id,l=Model.getShapeById(s);l.attachTo==r.id&&!Utils.isSelected(s)&&t.indexOf(s)<0&&o.push(l)}n=n.concat(o)}}return n},copy:function(e){return $.extend(!0,{},e)},copyArray:function(e){return $.extend(!0,[],e)},rangeChildren:function(e){var t=[];if(e.children&&e.children.length>0)if("verticalPool"==e.name){for(var i=[],n=[],r=0;r<e.children.length;r++){var o=e.children[r];"horizontalSeparator"==(h=Model.getShapeById(o)).name?n.push(h):i.push(h)}i.sort(function(e,t){return e.props.x-t.props.x});var a=e.props.x;for(r=0;r<i.length;r++){(h=i[r]).props.x=a,Designer.painter.renderShape(h),t.push(h),a+=h.props.w}n.sort(function(e,t){return e.props.y-t.props.y});var s=e.props.y+e.props.height[0];for(r=0;r<n.length;r++){var l=(h=n[r]).props.y+h.props.h;h.props.w=e.props.w,h.props.y=s;var p=l-s;r==n.length-1&&(p=e.props.y+e.props.h-s),h.props.h=p,Designer.painter.renderShape(h),t.push(h),s+=p}}else if("horizontalPool"==e.name){for(i=[],n=[],r=0;r<e.children.length;r++){o=e.children[r];"verticalSeparator"==(h=Model.getShapeById(o)).name?n.push(h):i.push(h)}i.sort(function(e,t){return e.props.y-t.props.y});for(s=e.props.y,r=0;r<i.length;r++){(h=i[r]).props.y=s,Designer.painter.renderShape(h),t.push(h),s+=h.props.h}n.sort(function(e,t){return e.props.x-t.props.x});for(a=e.props.x+e.props.height[0],r=0;r<n.length;r++){var h,d=(h=n[r]).props.x+h.props.w;h.props.h=e.props.h,h.props.x=a;var c=d-a;r==n.length-1&&(c=e.props.x+e.props.w-a),h.props.w=c,Designer.painter.renderShape(h),t.push(h),a+=c}}return t},getRelativePos:function(e,t,i){var n=i.offset();return null==n&&(n={left:0,top:0}),{x:(e-n.left+i.scrollLeft()).restoreScale(),y:(t-n.top+i.scrollTop()).restoreScale()}},getCollapsedShapes:function(e){for(var t=[],i=[],n=0;n<e.length;n++){var r=e[n];if(r.attribute&&r.attribute.collapsed){for(var o=[],a=Model.orderList.length-1;a>=0;a--){var s=Model.orderList[a].id,l=Model.getShapeById(s);l.attribute&&l.attribute.collapseBy==r.id&&i.indexOf(s)<0&&o.push(l)}t=t.concat(o)}}return t},getCollapsedShapesById:function(e){for(var t=[],i=Model.orderList.length-1;i>=0;i--){var n=Model.orderList[i].id,r=Model.getShapeById(n);r.attribute&&r.attribute.collapseBy==e&&t.push(r)}return t},getShapeLineStyle:function(e,t){return 0!=t&&Model.define.theme&&Model.define.theme.shape?$.extend({},Schema.shapeDefaults.lineStyle,Model.define.theme.shape.lineStyle,e):$.extend({},Schema.shapeDefaults.lineStyle,e)},getLinkerLineStyle:function(e,t){return 0!=t&&Model.define.theme&&Model.define.theme.linker?$.extend({},Schema.linkerDefaults.lineStyle,Model.define.theme.linker.lineStyle,e):$.extend({},Schema.linkerDefaults.lineStyle,e)},getShapeFontStyle:function(e,t){Model.define;return 0!=t&&Model.define.theme&&Model.define.theme.shape?$.extend({},Schema.shapeDefaults.fontStyle,Model.define.theme.shape.fontStyle,e):$.extend({},Schema.shapeDefaults.fontStyle,e)},getShapeFontStyleByEditor:function(e){var t=e.textBlock,i=Utils.getGridSelectedCells(),n=t.map(function(e){return e.text||""}).join("");if(""==n)return this.getShapeFontStyle(e.fontStyle);var r=$("<div>"+n+"</div>").css({display:"none"}).appendTo("body");r.find(".equation-text").remove(),r.find("span").each(function(){""==$(this).text()&&$(this).remove()}),r.find("font").each(function(){$(this).attr("color")&&$(this).css("fill",$(this).attr("color"))}),r.find("strong").css("font-weight","bold"),r.find("b").css("font-weight","bold"),r.find("em").css("font-style","italic"),r.find("i").css("font-style","italic"),r.find("u").css("text-decoration","underline"),r.find("strike").css("text-decoration","line-through");var o=[];!function e(t){for(var i=0,n=t.length;i<n;i++){if("#text"==t[i].nodeName)for(var r=0;r<t[i].data.length;r++){if("DIV"==t[i].parentNode.nodeName)var a="";else a=t[i].parentNode.getAttribute("style")||"";-1===o.indexOf(a)&&o.push(a)}else-1==["BR","DIV","LI","P"].indexOf(t[i].nodeName)&&-1==t[i].nodeName.indexOf("H")&&("DIV"==t[i].parentNode.nodeName?"function"==typeof t[i].getAttribute&&t[i].setAttribute("style",t[i].getAttribute("style")):null==t[i].parentNode.getAttribute("style")?t[i].setAttribute("style",t[i].getAttribute("style")):t[i].setAttribute("style",t[i].parentNode.getAttribute("style")+t[i].getAttribute("style")));e(t[i].childNodes)}}(r[0].childNodes),r.remove();for(var a=[{type:"bold",style:"font-weight:bold;"},{type:"italic",style:"font-style:italic;"},{type:"underline",style:"text-decoration:underline;"},{type:"middleline",style:"text-decoration:line-through;"}],s={},l=0,p=o.length;l<p;l++){var h=o[l].replace(/\s/g,"");if(0==l&&-1!==h.indexOf("fill:")){var d=h.match(/fill:rgb\(.*?\);/);if(d&&d.length){var c=d[0].replace("fill:rgb(","").replace(");","");s.color=c}}-1!=h.indexOf("font-weight:normal;")&&(s.bold=!1),-1!=h.indexOf("font-style:normal;")&&(s.italic=!1);for(var u=0;u<a.length;u++){var g=a[u].style;-1==h.indexOf(g)&&(a.splice(u,1),u--)}}for(u=0;u<a.length;u++){s[a[u].type]=!0}var y=e.fontStyle;return i.length&&(y=i[0].textBlock.fontStyle),$.extend({},this.getShapeFontStyle(y),s)},getShapeFontHeight:function(e){var t=e.getTextBlock(),i=Utils.getShapeFontStyle(e.fontStyle),n=$("#shape_text_ruler");return 0==n.length&&(n=$("<div contenteditable='true' spellcheck=false id='shape_text_ruler'></div>").appendTo("#designer_canvas")),t.map(function(e){return function(e){var t=$.extend({},i,e.fontStyle),r=e.position;if("horizontal"==t.orientation){var o={x:r.x+r.w/2,y:r.y+r.h/2};r={x:o.x-r.h/2,y:o.y-r.w/2,w:r.h,h:r.w}}var a={width:r.w+"px","z-index":Model.orderList.length+9999,"line-height":100*t.lineHeight+"%","font-size":t.size+"px","font-family":t.fontFamily,"font-weight":t.bold?"bold":"normal","font-style":t.italic?"italic":"normal","text-align":t.textAlign,color:"rgb("+t.color+")","text-decoration":t.underline?"underline":"none","word-wrap":"break-word"};n.css(a);var s=e.text.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;");return n.html(s).height()}(e)})},getLinkerFontStyle:function(e,t){return 0!=t&&Model.define.theme&&Model.define.theme.linker?$.extend({},Schema.linkerDefaults.fontStyle,Model.define.theme.linker.fontStyle,e):$.extend({},Schema.linkerDefaults.fontStyle,e)},getShapeFillStyle:function(e,t){Model.define;return 0!=t&&Model.define.theme&&Model.define.theme.shape?$.extend({},Schema.shapeDefaults.fillStyle,Model.define.theme.shape.fillStyle,e):$.extend({},Schema.shapeDefaults.fillStyle,e)},getLanesByPool:function(e){for(var t=(e=Utils.copy(e)).children,i=t.length,n=[],r=0;r<i;r++){var o=Utils.copy(Model.getShapeById(t[r]));o.name&&o.name.indexOf("Lane")>-1&&n.push(o)}return n=n.sort(function(e,t){return e.props.x-t.props.x||e.props.y-t.props.y})},getSeparatorsByPool:function(e){for(var t=(e=Utils.copy(e)).children,i=t.length,n=[],r=0;r<i;r++){var o=Utils.copy(Model.getShapeById(t[r]));o.name&&o.name.indexOf("Separator")>-1&&o.name.indexOf("SeparatorBar")<0&&n.push(o)}return n},getSeparatorBarsByPool:function(e){for(var t=(e=Utils.copy(e)).children,i=t.length,n=[],r=0;r<i;r++){var o=Utils.copy(Model.getShapeById(t[r]));o.name&&o.name.indexOf("SeparatorBar")>-1&&n.push(o)}return n},getLinkersByShapes:function(e){for(var t=[],i=Model.define.elements,n=[],r=0;r<e.length;r++)n.push(e[r].id);for(key in i)if("linker"==i[key].name){var o=i[key];(n.indexOf(o.to.id)>-1||n.indexOf(o.from.id)>-1)&&t.push(o)}return t},containsChinese:function(e){return escape(e).indexOf("%u")>=0},filterXss:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toString()).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/%3C/g,"&lt;")).replace(/>/g,"&gt;")).replace(/%3E/g,"&gt;")).replace(/'/g,"&#39;")).replace(/"/g,"&quot;")).replace(/&lt;div&gt;/g,"<div>").replace(/&lt;\/div&gt;/g,"</div>")).replace(/&lt;u&gt;/g,"<u>").replace(/&lt;\/u&gt;/g,"</u>")).replace(/&lt;br&gt;/g,"<br>")).replace(/&lt;b&gt;/g,"<b>").replace(/&lt;\/b&gt;/g,"</b>")).replace(/&lt;i&gt;/g,"<i>").replace(/&lt;\/i&gt;/g,"</i>")).replace(/&lt;font&gt;/g,"<font").replace(/&lt;\/font&gt;/g,"</font>")},showError:function(){var e=$("#canvas-error");e.length&&(e=$("<div id='canvas-error'><span>保存出现了异常，为了防止内容丢失，请及时刷新页面或者反馈问题</span></div>").appendTo("body")).show()},RGB2Hex:function(e){if("#"==e.charAt(0))return e;var t=e.split(/\D+/),i=65536*Number(t[1])+256*Number(t[2])+Number(t[3]);return""+Utils.toHex(i,6)},toHex:function(e,t){for(var i=e.toString(16);i.length<t;)i="0"+i;return i},popEditor:{params:{span:null,range:null,selection:null},close:function(){$(".pop-editor").hide()},init:function(e){e=$(e);var t=this.getSelection();null!=t&&(this.params.range=t.range,this.params.selection=t.selection,this.renderMenu(),this.renderMenuPos(e),this.initEvent(e))},getSelection:function(){var e=document.getSelection();return e.isCollapsed?null:{selection:e,range:e.getRangeAt(0)}},initEvent:function(e){var t=this,i=$(".pop-editor");i.children("div").off("mousedown").on("mousedown",function(n){var r=$(this),o=r.data("key");if("down"==o)i.find(".pop-editor-items").hide(),r.find(".pop-editor-items").show();else{if("color"==o)return n.stopPropagation(),n.preventDefault(),void $.colorpicker({target:r,stopPropagation:!0,setColor:"red",onSelect:function(e){(e=null==e||"transparent"==e?"transparent":"rgb("+e+")").indexOf("rgb")>=0&&(e=Utils.RGB2Hex(e)),t.setStyle("ForeColor",e)}});if("equation"==o){if(!Designer.events.push("testVip","Latex"))return Designer.events.push("vipLimit","Latex"),n.stopPropagation(),void n.preventDefault();insert.equation.equationInit(e)}else t.setStyle(o)}n.preventDefault(),n.stopPropagation()}),i.children("div").off("mouseup").on("mouseup",function(e){e.stopPropagation(),e.preventDefault()}),i.find(".pop-editor-items > div").off("mousedown").on("mousedown",function(e){var i=$(this),n=i.parent().data("key"),r=i.text();t.setStyle(n,r);return e.stopPropagation(),!1})},renderMenu:function(){var e=$(".pop-editor");if(0==e.length){var t=window.source&&"wps"==source?staticBasePath+"/wps/images/svip_icon_no_border.svg":staticBasePath+"/images/vip-tip.svg";e=$("<div class='pop-editor'><div data-key='bold'><div class='po-diagraming-icons bold'>&#xe6bf;</div></div><div data-key='italic'><div class='po-diagraming-icons italic'>&#xe6da;</div></div><div data-key='underline'><div class='po-diagraming-icons underline'>&#xe6d6;</div></div><div data-key='strikeThrough'><span class='po-diagraming-icons middleline'>&#xe732;</span></div><div data-key='color'><svg class='po-icon-svg' aria-hidden='true' style='font-size:16px'><use xlink:href='#icon-zitiyanse-fuwenbenbianjiqi'></use></svg></div><div data-key='equation'><div class='po-diagraming-icons equation'><img class='eq-tip-vip' src='"+t+"'>&#xe651;</div></div>").appendTo("#designer_canvas")}return e},renderMenuPos:function(e){var t=e,i=$(".pop-editor"),n=parseFloat(t.css("left")),r=parseFloat(t.css("top"));i.css({left:n+(t.outerWidth()/2-i.outerWidth()/2),top:r+t.outerHeight(),transform:"scale("+1..restoreScale()+")",transformOrigin:"center top"}).show()},setStyle:function(e,t){if(document.getSelection().isCollapsed){var i=document.createRange(),n=$("#shape_text_edit")[0];i.selectNodeContents(n);var r=window.getSelection();r.removeAllRanges(),r.addRange(i)}this.params;switch(e){case"h":document.execCommand("formatBlock",!1,"<"+t+">");break;case"f":document.execCommand("FontName",!1,t);break;default:document.execCommand(e,!1,t)}return""}},toast:function(e,t,i){var n=$(".toast-con");0==n.length&&(n=$('<div class="toast-con moving"><span>'+e+"</span></div>").appendTo("#ui_container"));var r=(t=$(t)).offset();n.css({left:r.left-(n.outerWidth()-t.outerWidth())/2,top:r.top-n.outerHeight()-15}).show(),setTimeout(function(){$(".toast-con").fadeOut().remove()},i)},gridSelectObj:{id:null,indexs:[],rows:[],columns:[]},selectGrid:function(e,t,i){var n=this.gridSelectObj,r=n.indexs,o=[],a=[],s=n.id,l=e.textBlock.length;if(s==e.id&&i||(n.id=e.id,r=[]),e.merge){for(var p=[],h=0;h<t.length;h++)for(var d=0;d<e.merge.length;d++)if(e.merge[d].indexOf(t[h])>-1){p=p.concat(e.merge[d]);break}t=t.concat(p);var c=[];for(h=0;h<t.length;h++)-1===c.indexOf(t[h])&&c.push(t[h]);t=c}for(h=0;h<t.length;h++){var u=t[h];if(-1==r.indexOf(u)){if(u>=l)continue;var g=Math.floor(u/e.path[0].length),y=u%e.path[0].length;r.push(u)}else{var f=r.indexOf(u);r.splice(f,1)}}this.gridSelectObj.indexs=r.sort(function(e,t){return e-t});for(h=0;h<this.gridSelectObj.indexs.length;h++){var x=this.gridSelectObj.indexs[h];g=Math.floor(x/e.path[0].length);o.push(g);y=x%e.path[0].length;a.push(y)}this.gridSelectObj.rows=o,this.gridSelectObj.columns=a,Designer.events.push("renderGridSelect",e),this.selectCallback&&this.selectCallback()},isMergeGrid:function(){if(!this.gridSelectObj.id)return!1;var e=this.gridSelectObj.columns,t=this.gridSelectObj.rows,i=Math.min.apply(Math,_toConsumableArray(e)),n=Math.max.apply(Math,_toConsumableArray(e)),r=Math.min.apply(Math,_toConsumableArray(t)),o=(n-i+1)*(Math.max.apply(Math,_toConsumableArray(t))-r+1),a=Model.getShapeById(this.gridSelectObj.id).merge,s=!0;if(a)for(var l=this.gridSelectObj.indexs.join(","),p=0;p<a.length;p++){if(l==a[p].join(",")){s=!1;break}}return o==this.gridSelectObj.indexs.length&&o>1&&s},isSplitGrid:function(){var e=!1;if(!this.gridSelectObj.id)return e;var t=Model.getShapeById(this.gridSelectObj.id).merge;if(t)for(var i=this.gridSelectObj.indexs,n=0;n<t.length;n++){var r=t[n][0];if(i.indexOf(r)>-1){e=!0;break}}return e},unselectGrid:function(){this.gridSelectObj={id:null,indexs:[],rows:[],columns:[]},$("#grid_selects").remove(),$("#grid_dom").remove(),$("#lane_dom").remove()},getGridSelectedCells:function(){var e=this.gridSelectObj,t=[];if(e.id)for(var i=Model.getShapeById(e.id),n=0;n<e.indexs.length;n++){var r=e.rows[n],o=e.columns[n],a=e.indexs[n],s=i.path[r][o],l=i.textBlock[a];t.push({id:e.id,path:s,textBlock:l})}return t},formattedShape:function(e){if(["verticalPool","verticalLane","verticalSeparatorBar","horizontalSeparator","horizontalSeparatorBar","verticalSeparator","horizontalPool","horizontalLane"].indexOf(e.name)>-1&&!e.props.height)switch(e.name){case"verticalPool":e.props.height=[40],e.textBlock[0].position.h="height[0]",e.path[1].actions[2].y="height[0]",e.path[1].actions[3].y="height[0]";break;case"verticalLane":e.props.height=[30],e.textBlock[0].position.h="height[0]",e.path[1].actions[2].y="height[0]",e.path[1].actions[3].y="height[0]";break;case"horizontalSeparator":e.props.height=[20],e.textBlock[0].position.w="height[0]",e.path[1].actions[1].x="height[0]",e.path[1].actions[2].x="height[0]";break;case"verticalSeparator":e.props.height=[20],e.textBlock[0].position.h="height[0]",e.path[1].actions[2].y="height[0]",e.path[1].actions[3].y="height[0]";break;case"horizontalPool":e.props.height=[40],e.textBlock[0].position.w="height[0]",e.path[1].actions[1].x="height[0]",e.path[1].actions[2].x="height[0]";break;case"horizontalLane":e.props.height=[30],e.textBlock[0].position.w="height[0]",e.path[1].actions[1].x="height[0]",e.path[1].actions[2].x="height[0]";break;case"horizontalSeparatorBar":case"verticalSeparatorBar":e.props.height=[20]}},getShapeRuleLine:function(e,t,i){for(var n=e.x,r=e.y+e.h/2,o=e.x+e.w,a=e.y,s=e.x+e.w/2,l=e.y+e.h,p=null,h=null,d=null,c=null,u={d:null,pos:null},g={d:null,pos:null},y={d:null,pos:null},f={d:null,pos:null},x=null,v=0,m=null,b=null,w=0,S=t.length;w<S;w++){var k=(W=t[w]).left,M=W.right,_=W.top,D=W.bottom,P=W.middle;if(W.right<n){if(x="left",v=n-W.right,Math.abs(r-P)<4){if(null==m||v<m){m=v;var U=P-r;h={target:W.id,s:U,targetPos:{x:M,y:r+U},ac:"left"}}}else if(Math.abs(_-a)<4||Math.abs(D-a)<4){if(null==m||v<m){m=v;U=Math.abs(a-_)<4?_-a:D-a;h={target:W.id,s:U,targetPos:{x:M,y:a+U},ac:"left"}}}else if((Math.abs(_-l)<4||Math.abs(D-l)<4)&&(null==m||v<m)){m=v;U=Math.abs(l-_)<4?_-l:D-l;h={target:W.id,s:U,targetPos:{x:M,y:l+U},ac:"left"}}(null==u.d||u.d>v)&&(u.d=v,u.pos=W)}else if(W.left>o){if(x="right",v=W.left-o,Math.abs(r-P)<4){if(null==m||v<m){m=v;U=P-r;h={target:W.id,s:U,targetPos:{x:k,y:r+U},ac:"right"}}}else if(Math.abs(_-a)<4||Math.abs(D-a)<4){if(null==m||v<m){m=v;U=Math.abs(a-_)<4?_-a:D-a;h={target:W.id,s:U,targetPos:{x:k,y:a+U},ac:"right"}}}else if((Math.abs(_-l)<4||Math.abs(D-l)<4)&&(null==m||v<m)){m=v;U=Math.abs(l-_)<4?_-l:D-l;h={target:W.id,s:U,targetPos:{x:k,y:l+U},ac:"right"}}(null==g.d||g.d>v)&&(g.d=v,g.pos=W)}var $=0;for(S=t.length;$<S;$++){var L=(N=t[$]).left,I=N.right,C=N.top,B=N.bottom;if("left"==x){if(I<k&&Math.abs(k-I-v)<4&&!(B<_||C>D)&&(null==b||k-I<b)){b=k-I;P=(Math.max(a,_)+Math.min(D,l))/2;var T=(Math.max(C,_)+Math.min(B,D))/2;p={target:W.id,d:b,s:b-v,targetPos:W,ruleLine:{start:{x:I,y:T},end:{x:k,y:T}},ac:"left"}}}else if("right"==x&&L>M&&Math.abs(L-M-v)<4&&!(B<_||C>D)&&(null==b||L-M<b)){b=L-M;P=(Math.max(a,_)+Math.min(D,l))/2,T=(Math.max(C,_)+Math.min(D,B))/2,p={target:W.id,d:b,s:v-b,targetPos:W,ruleLine:{start:{x:M,y:T},end:{x:L,y:T}},ac:"right"};break}}}var z=null,O=0,A=null,R=null;for(w=0,S=i.length;w<S;w++){k=(W=i[w]).left,M=W.right,_=W.top,D=W.bottom,P=W.middle;var W,E=W.center;if(D<a){if(z="top",O=a-D,Math.abs(s-E)<4){if(null==A||O<A){A=O;U=E-s;c={target:W.id,s:U,targetPos:{x:s+U,y:D},ac:"top"}}}else if(Math.abs(n-k)<4||Math.abs(n-M)<4){if(null==A||O<A){A=O;U=Math.abs(n-k)<4?k-n:M-n;c={target:W.id,s:U,targetPos:{x:n+U,y:D},ac:"top"}}}else if((Math.abs(o-k)<4||Math.abs(o-M)<4)&&(null==A||O<A)){A=O;U=Math.abs(k-o)<4?k-o:M-o;c={target:W.id,s:U,targetPos:{x:o+U,y:D},ac:"top"}}(y.d>O||null==y.d)&&(y.d=O,y.pos=W)}else if(_>l){if(z="bottom",O=_-l,Math.abs(s-E)<4){if(null==A||O<A){A=O;U=E-s;c={target:W.id,s:U,targetPos:{x:s+U,y:_},ac:"bottom"}}}else if(Math.abs(n-k)<4||Math.abs(n-M)<4){if(null==A||O<A){A=O;U=Math.abs(n-k)<4?k-n:M-n;c={target:W.id,s:U,targetPos:{x:n+U,y:_},ac:"bottom"}}}else if((Math.abs(o-k)<4||Math.abs(o-M)<4)&&(null==A||O<A)){A=O;U=Math.abs(k-o)<4?k-o:M-o;c={target:W.id,s:U,targetPos:{x:o+U,y:_},ac:"bottom"}}(null==f.d||f.d>O)&&(f.d=O,f.pos=W)}for($=0,S=i.length;$<S;$++){var N;L=(N=i[$]).left,I=N.right,C=N.top,B=N.bottom;if("top"==z){if(B<_&&Math.abs(_-B-O)<4&&!(I<k||L>M)&&(null==R||_-B<R)){R=_-B;T=(Math.max(L,k)+Math.min(M,I))/2,d={target:W.id,d:R,s:R-O,targetPos:W,ruleLine:{start:{x:T,y:B},end:{x:T,y:_}},ac:"top"};break}}else if("bottom"==z&&C>D&&Math.abs(C-D-O)<4&&!(I<k||L>M)&&(null==R||C-D<R)){R=C-D;T=(Math.max(L,k)+Math.min(M,I))/2,d={target:W.id,d:R,s:O-R,targetPos:W,ruleLine:{start:{x:T,y:D},end:{x:T,y:C}},ac:"bottom"};break}}}var F=null;Math.abs(g.d-u.d)<8&&null!=g.d&&null!=u.d&&(F={s:(g.d-u.d)/2,d:(g.d+u.d)/2,leftPos:u.pos,rightPos:g.pos});var j=null;Math.abs(y.d-f.d)<8&&null!=f.d&&null!=y.d&&(j={s:(f.d-y.d)/2,d:(f.d+y.d)/2,topPos:y.pos,bottomPos:f.pos});var K=h?h.s:j?j.s:d?d.s:0;e.y=e.y+K;var H=c?c.s:F?F.s:p?p.s:0;if(e.x=e.x+H,h){var G=null,X=null;"left"==h.ac?(G=h.targetPos,X={x:e.x,y:G.y}):(X=h.targetPos,G={x:e.x+e.w,y:X.y}),Designer.op.drawSnpLine(G,X,"line")}else if(j){var Y=j.topPos,q=j.bottomPos,V=(X={x:(G={x:(Math.max(e.x,Y.left)+Math.min(Y.right,e.x+e.w))/2,y:Y.bottom}).x,y:e.y},{x:(te={x:(Math.max(e.x,q.left)+Math.min(q.right,e.x+e.w))/2,y:e.y+e.h}).x,y:q.top});Designer.op.drawSnpLine(G,X),Designer.op.drawSnpLine(te,V)}else if(d){var J=d.targetPos,Z=d.ruleLine;G=null,X=null;"top"==(ie=d.ac)?X={x:(G={x:(Math.max(J.left,e.x)+Math.min(J.right,e.x+e.w))/2,y:J.bottom}).x,y:e.y}:"bottom"==ie&&(G={x:(X={x:(Math.max(J.left,e.x)+Math.min(J.right,e.x+e.w))/2,y:J.top}).x,y:e.y+e.h}),Designer.op.drawSnpLine(G,X),Designer.op.drawSnpLine(Z.start,Z.end)}if(c){G=null,X=null;"top"==c.ac?X={x:(G=c.targetPos).x,y:e.y}:G={x:(X=c.targetPos).x,y:e.y+e.h},Designer.op.drawSnpLine(G,X,"line")}else if(F){var Q=F.leftPos,ee=F.rightPos,te=(G={x:Q.right,y:(Math.max(e.y,Q.top)+Math.min(Q.bottom,e.y+e.h))/2},X={x:e.x,y:G.y},{x:e.x+e.w,y:(Math.max(e.y,ee.top)+Math.min(ee.bottom,e.y+e.h))/2});V={x:ee.left,y:te.y},Designer.op.drawSnpLine(G,X),Designer.op.drawSnpLine(te,V)}else if(p){var ie;J=p.targetPos,Z=p.ruleLine,G=null,X=null;"left"==(ie=p.ac)?(G={x:J.right,y:(Math.max(J.top,e.y)+Math.min(J.bottom,e.y+e.h))/2},X={x:e.x,y:G.y}):"right"==ie&&(X={x:J.left,y:(Math.max(J.top,e.y)+Math.min(J.bottom,e.y+e.h))/2},G={x:e.x+e.w,y:X.y}),Designer.op.drawSnpLine(G,X),Designer.op.drawSnpLine(Z.start,Z.end)}},shapesCount:function(){},getPrintPageSize:function(){var e=flow2svg.calcCanvasSize(),t=e.minX+e.w-10,i=e.minY+e.h-10;return"landscape"==Model.define.page.orientation&&(t=[i,i=t][0]),{width:t=Math.max(1050,1050*Math.ceil(t/1050)),height:i=Math.max(1485,1485*Math.ceil(i/1485))}},isMultiplicity:function(e){var t=!1;if("linker"!=e.name)return t;for(var i=0;i<e.textBlock.length;i++){if("multiplicity"==e.textBlock[i].type){t=!0;break}}return t},autoTextHeight:function(e,t){var i,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal 13px 微软雅黑",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=t.split(/\n|<br>/),l=0;if(a)e.props.w=r||e.props.w;else{var p=e.props.w;s.forEach(function(e){var t=document.createElement("canvas").getContext("2d");t.font=o,p=Math.max(p,t.measureText(e).width)}),e.props.w=p>r?r:p}for(var h=0;h<s.length;h++){l+=c(e,s[h],o).height}var d=null!==(i=null===(n=Schema.shapes)||void 0===n?void 0:n.text)&&void 0!==i?i:e;function c(e,t,i){var n;t=0==(n=t).length?"":n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&#39;/g,"'")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')).replace(/<br>/g,"\n")).replace(/&nbsp;/g," ")).replace(/\t/g,"  ");var r=1.25*/(\d+)px/.exec(i)[1],o=Utils.copy(e),a=document.createElement("div");return a.innerText=""==t.trim()?"-":t,a.style="\n        width: ".concat(o.props.w,"px;\n        height: auto;\n        visibility: hidden; \n        position: absolute;\n        font-size: 13px;\n        font-weight: normal;\n        font-family: April;\n        font-style: normal;\n        text-align: center;\n        overflow-wrap: break-word;\n        line-height: 125%;\n        white-space: pre-wrap;\n      "),document.body.appendChild(a),o.props.h=parseFloat(getComputedStyle(a,null).height||r),document.body.removeChild(a),{width:o.props.w,height:o.props.h}}return e.props.h=Math.max(d.props.h,l),{width:e.props.w,height:e.props.h}}};window.GradientHelper={createLinearGradient:function(e,t,i){var n,r,o,a=e.props;if(a.w>a.h?(n={x:0,y:a.h/2},r={x:a.w,y:a.h/2},o=(i.angle+Math.PI/2)%(2*Math.PI)):(n={x:a.w/2,y:0},r={x:a.w/2,y:a.h},o=i.angle),0!=o){var s={x:a.w/2,y:a.h/2};n=Utils.getRotated(s,n,o),r=Utils.getRotated(s,r,o),n.x<0&&(n.x=0),n.x>e.props.w&&(n.x=e.props.w),n.y<0&&(n.y=0),n.y>e.props.h&&(n.y=e.props.h),r.x<0&&(r.x=0),r.x>e.props.w&&(r.x=e.props.w),r.y<0&&(r.y=0),r.y>e.props.h&&(r.y=e.props.h)}var l=t.createLinearGradient(n.x,n.y,r.x,r.y),p="transparent"==i.beginColor?i.beginColor:"rgb("+i.beginColor+")",h="transparent"==i.endColor?i.endColor:"rgb("+i.endColor+")";return l.addColorStop(0,p),l.addColorStop(1,h),l},createRadialGradient:function(e,t,i){var n=e.props,r=n.h;n.w<n.h&&(r=n.w);var o=t.createRadialGradient(n.w/2,n.h/2,10,n.w/2,n.h/2,r*i.radius),a="transparent"==i.beginColor?i.beginColor:"rgb("+i.beginColor+")",s="transparent"==i.endColor?i.endColor:"rgb("+i.endColor+")";return o.addColorStop(0,a),o.addColorStop(1,s),o},getLighterColor:function(e){var t=e.split(","),i=parseInt(t[0]),n=parseInt(t[1]),r=parseInt(t[2]),o=Math.round(i+(255-i)/255*60);o>255&&(o=255);var a=Math.round(n+(255-n)/255*60);a>255&&(a=255);var s=Math.round(r+(255-r)/255*60);return s>255&&(s=255),o+","+a+","+s},getDarkerColor:function(e){var t=e.split(","),i=parseInt(t[0]),n=parseInt(t[1]),r=parseInt(t[2]),o=Math.round(i-i/255*60);o<0&&(o=0);var a=Math.round(n-n/255*60);a<0&&(a=0);var s=Math.round(r-r/255*60);return s<0&&(s=0),o+","+a+","+s}};var MessageSource={batchSize:0,messages:[],withUndo:!0,withMessage:!0,withDock:!0,undoStack:{stack:[],push:function(e,t){this.stack.push(e),void 0===t&&(t=!0),t&&(MessageSource.redoStack.stack=[]),Designer.events.push("undoStackChanged",this.stack.length)},pop:function(){var e=this.stack.length;if(0==e)return null;var t=this.stack[e-1];return this.stack.splice(e-1,1),MessageSource.redoStack.push(t),Designer.events.push("undoStackChanged",this.stack.length),t}},redoStack:{stack:[],push:function(e){this.stack.push(e),Designer.events.push("redoStackChanged",this.stack.length)},pop:function(){var e=this.stack.length;if(0==e)return null;var t=this.stack[e-1];return this.stack.splice(e-1,1),MessageSource.undoStack.push(t,!1),Designer.events.push("redoStackChanged",this.stack.length),t}},beginBatch:function(){this.batchSize++},commit:function(){this.batchSize--,this.submit()},submit:function(){if(0==this.batchSize&&0!=this.messages.length){if(this.withDock&&Dock.update(!0),Designer.events.push("shapeCount"),0==this.withMessage)return void(this.messages=[]);if(this.withUndo&&this.undoStack.push(this.messages),""!=chartId){for(var e=Utils.copyArray(this.messages),t=0;t<e.length;t++){var i=e[t];"update"==i.action&&(i.content.shapes=[])}var n={action:"command",messages:e,name:userName,pageId:Model.pageId};sendMessage.send(n)}this.messages=[]}},send:function(e,t,i){this.messages.push({action:e,content:t,tempId:i,pageId:Model.pageId}),this.submit()},receive:function(e){this.doWithoutMessage(function(){MessageSource.executeMessages(e,!0),Utils.showLinkerControls(),Utils.showLinkerCursor()})},undo:function(){var e=this.undoStack.pop();null!=e&&this.doWithoutUndo(function(){MessageSource.beginBatch();for(var t=0;t<e.length;t++){var i=e[t];if("create"==i.action)Utils.unselect(),Model.remove(i.content,!1),$(".shape_dashboard.menu").hide(),Designer.events.push("changeLinkers");else if("update"==i.action){var n=i.content.shapes;Model.updateMulti(n);for(var r=0;r<n.length;r++){var o=n[r];Designer.painter.renderShape(o)}var a=Utils.getSelectedIds();Utils.unselect(),Utils.selectShape(a,!1),Designer.events.push("changeLinkers")}else if("remove"==i.action){n=i.content;Model.addMulti(n);for(r=0;r<n.length;r++){o=n[r];Designer.painter.renderShape(o)}Designer.events.push("changeLinkers")}else if("updatePage"==i.action){var s=Model.define.page.lineJumps;Model.updatePage(i.content.page),Designer.events.push("resetBrokenLinker",s)}else"setTheme"==i.action?(Model.setTheme(i.content.theme),Designer.events.push("changeLinkers")):"setDefaultStyle"==i.action?Model.setDefaultStyle(i.content.type,i.content.style):"update_with_beautify"==i.action&&Model.updateWithBeautify(i.content.content,i.content.updates,i.content.oldTheme)}MessageSource.commit()})},redo:function(){var e=this.redoStack.pop();null!=e&&this.doWithoutUndo(function(){MessageSource.executeMessages(e,!1)})},executeMessages:function(e,t){MessageSource.beginBatch();for(var i=0;i<e.length;i++){var n=e[i];if("create"==n.action){var r=n.content;if(t)for(var o=0;o<r.length;o++){"linker"!=(a=r[o]).name&&Schema.initShapeFunctions(a)}Model.addMulti(r);for(o=0;o<r.length;o++){var a=r[o];Designer.painter.renderShape(a)}Model.build(),Designer.events.push("changeLinkers")}else if("update"==n.action){var s=n.content.updates;for(o=0;o<s.length;o++){var l=s[o];t&&"linker"!=l.name&&Schema.initShapeFunctions(l),Designer.painter.renderShape(l)}Model.updateMulti(s),Designer.events.push("changeLinkers");var p=Utils.getSelectedIds();Utils.unselect(),Utils.selectShape(p)}else if("remove"==n.action)Utils.unselect(),Model.remove(n.content),Designer.events.push("changeLinkers");else if("updatePage"==n.action){var h=Model.define.page.lineJumps;Model.updatePage(n.content.update),Designer.events.push("resetBrokenLinker",h)}else"setTheme"==n.action?(Model.setTheme(n.content.update),Designer.events.push("changeLinkers")):"setDefaultStyle"==n.action?Model.setDefaultStyle(n.content.type,n.content.update):"clearDefaultStyle"==n.action?Model.clearDefaultStyle():"update_with_beautify"==n.action&&Model.updateWithBeautify(n.content.updates,n.content.content,n.content.theme)}MessageSource.commit()},doWithoutUndo:function(e){this.withUndo=!1,e(),this.withUndo=!0},doWithoutMessage:function(e){this.withMessage=!1,e(),this.withMessage=!0},doWithoutUpdateDock:function(e){this.withDock=!1,e(),this.withDock=!0}};Number.prototype.toScale=function(){return this*Designer.config.scale},Number.prototype.restoreScale=function(){return this/Designer.config.scale},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},window.Model=Model,window.PageModel=PageModel,window.Utils=Utils,window.MessageSource=MessageSource;
},{"./clipboard":"IXVj","../../common/clipboard/util":"G1Mn","../../common/utils":"RKzI"}],"EkD1":[function(require,module,exports) {
var define;
var define;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,n=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var AIDraw={config:{url:"wss://aigc.processon.com/ws"},model:{},sock:null,elements:[],render:{renderChart:function(e){},renderShape:function(){},renderCss:function(e){var t=document.getElementById("flow-ai-style");null==t&&((t=document.createElement("style")).setAttribute("id","flow-ai-style"),document.head.appendChild(t)),t.innerHTML+=e},getCSS:function(){return['.po-ai-menu{display: none;width: 410px;position: absolute;right: 0;top: 36px ;background-color: #fff; padding: 16px 24px !important; padding-bottom: 24px !important; background-image: url("'+staticBasePath+'/images/ai-entry-dropmenu-bg.svg") !important;background-size: 100% !important;background-repeat: no-repeat !important;box-sizing: border-box;}',".po-ai-ul-close{position:absolute;right: 20px; top: 18px;width: 24px;height: 24px;font-size: 16px !important;line-height: 24px;text-align: center; border-radius: 4px;color: #6C7D8F;}",".po-ai-ul-close:hover{background-color: #f3f5f9;}",".po-ai-ul-title{color: #212930ff;font-size: 16px;font-weight: 600;line-height: 20px;margin-bottom: 16px;text-align: left}",".po-ai-ul-choosetype{color: #727E96;font-size: 13px;white-space: pre-wrap;padding: 8px 0;text-align: left;}",".po-ai-ul-flowtype, .po-ai-ul-flowtype>div{display: flex; flex-wrap: wrap; align-items: center;}",".po-ai-ul-flowtype>div{width: 110px;height: 32px; margin-bottom: 8px; padding-left: 8px; border-radius: 4px; box-sizing: border-box; margin-right: 16px;}",".po-ai-ul-flowtype>div:hover{background: #F6F7F8;}",".po-ai-ul-flowtype>div.selected{background: #F3F5F9;}",".po-ai-ul-flowtype>div:hover>svg, .po-ai-ul-flowtype>div.selected>svg{background: #fff!important; }",'.po-ai-ul-flowtype>div[ac="flow"]>svg{background: #067BEF1A}','.po-ai-ul-flowtype>div[ac="sequence"]>svg{background: #00C5AD1A}','.po-ai-ul-flowtype>div[ac="org"]>svg{background: #FF74741A}','.po-ai-ul-flowtype>div[ac="timeline"]>svg{background: #B61CFF1A}','.po-ai-ul-flowtype>div[ac="class"]>svg{background: #FF83101A}',".po-ai-ul-flowtype>div:nth-child(3n){margin-right: 0;}",".po-ai-ul-flowtype>div>svg{width: 20px;height: 20px; box-sizing: border-box; padding: 2px; margin-right: 8px;; border-radius: 4px;}","#ai-draw-input{width:262px;height: 36px;margin-right: 5px;}","#ai-draw-input:-webkit-autofill{box-shadow:0 0 0px 1000px #fff inset;}","#ai-draw-go{display: flex; justify-content: space-around;align-items: center;vertical-align: middle; width: 92px; height: 36px;line-height: 36px;font-size: 15px;font-weight: 700;color: #fff;padding: 0 5px;margin-top: -1px; background: linear-gradient(82.7deg, #f46c9aff 0%, #fd9776ff 100%);border: none;opacity: 1;}","#ai-draw-go.loading:not(.hover){opacity: 0.7;}",".po-ai-ul-goarrow{color: #fff}",".po-ai-go{display: flex;  align-items: center; margin-top: 8px; position: relative;}",".qlist{width: 262px;position: absolute; top: 44px; left: 0; background: #fff; box-shadow: 0 4px 10px 0 #0000001a; padding: 4px; box-sizing: border-box; border-radius: 4px;}",".qlist>div{height: 32px;line-height: 32px;padding-left: 12px; border-radius: 4px;}",".qlist>div:not(.question-tip):hover{background: #F3F5F9;}",".question-tip{color: #727E96;font-size: 13px;white-space: pre-wrap;text-align: left;cursor: default;}",".qlist.hide{display: none;}",".qlist.show{display: block;}",".po-ai-ul-downarrowdiv{position: absolute;left: 214px;height: 18px;line-height: 18px;}",".po-ai-ul-downarrow {text-align: center;color: #9AA5B8;margin: 8px 12px;border-radius: 2px;}",".po-ai-ul-downarrow:hover {background: #F3F5F9;color: #6C7D8F;}",".po-ai-ul-downarrow.show{background: #E9EDF2;color: #6C7D8F;}","#ai-draw-esc{position: relative;}","#ai-draw-esc-rect{width: 5px; height: 5px; background: #fff; border-radius: 1px; position: absolute; left: 7px; top: 17px;}",".ai-draw-loading{height: 20px;animation: rot 2s infinite linear}","@keyframes rot{from{transform: rotate(0);} to{transform: rotate(360deg);}}"].join("")},qList:{flow:["帮我绘制一个用户登录注册流程","项目管理流程图","请设计一个采购流程","获取法律援助流程","如何成长为一个产品经理大神","北京教师资格考试报名流程图"],sequence:["注册登录时序图","消息发送时序图","请设计一个好友拼单时序图"],org:["互联网企业的组织架构","足球队的架构"],timeline:["AI业务的过去现在未来","产品经理发展历史","办公软件发展史"],class:["请设计一个用户登录的类图","请画一个销售费用相关的类图","帮我绘制一个菜品识别系统的类图"]},creatEntryDom:function(){var e=document.querySelector(".po-toolbar-right"),t=document.querySelector("#po-tool-search-text"),r=document.createElement("div");r.setAttribute("id","po-tool-ai-button"),r.setAttribute("class","po-tool-button"),r.style.zIndex=2,r.innerHTML='\n          <img src="'.concat(staticBasePath,'/images/ai-draw-entry.svg" style="width: 22px;">\n          <ul class="po-ai-menu po-menu">\n              <div class="po-diagraming-icons po-ai-ul-close">&#xe6b9;</div>\n              <div class="po-ai-ul-title">Ai创作</div>\n              <div class="po-ai-ul-choosetype">选择图形类型</div>\n              <div class="po-ai-ul-flowtype">\n                <div ac="flow">\n                  <svg class="icon" aria-hidden="true">\n                    <use xlink:href="#icon-liuchengtu"></use>\n                  </svg>\n                  流程图\n                </div>\n                <div ac="sequence">\n                <svg class="icon" aria-hidden="true">\n                  <use xlink:href="#icon-shixutu"></use>\n                </svg>\n                  时序图\n                </div>\n                <div ac="org">\n                  <svg class="icon" aria-hidden="true">\n                    <use xlink:href="#icon-zuzhijiegoutu1"></use>\n                  </svg>\n                  组织结构图\n                </div>\n                <div ac="timeline">\n                    <svg class="icon" aria-hidden="true">\n                      <use xlink:href="#icon-shijianzhou1"></use>\n                    </svg>\n                  时间轴\n                </div> \n                <div ac="class">\n                  <svg class="icon" aria-hidden="true">\n                    <use xlink:href="#icon-leitu"></use>\n                  </svg>\n                  类图\n                </div>\n              </div>\n              <div class="po-ai-go">\n                  <input id="ai-draw-input" class="po-input-other" type=\'search\' placeholder="输入想绘制的流程" autocomplete="off" />\n                  <div class="po-ai-ul-downarrowdiv"><span class="po-diagraming-icons po-ai-ul-downarrow">&#xe72c;</span></div>\n                  <div id="ai-draw-go" class="po-button">\n                    <img style="width: 20px;vertical-align: middle;display: inline-block;" src="').concat(staticBasePath,'/images/AI.svg" loading=\'lazy\'>\n                    <span id="ai-draw-go-text">创作</span>\n                    <span class="po-diagraming-icons po-ai-ul-goarrow">&#xe8a8;</span>\n                  </div>\n                  <div class="qlist hide">\n                    <div class="question-tip">您可以这样提问：</div>\n                    <div class="question">帮我绘制一个用户登录注册流程</div>\n                    <div class="question">项目管理流程图</div>\n                    <div class="question">请设计一个采购流程</div>\n                    <div class="question">获取法律援助流程</div>\n                    <div class="question">如何成长为一个产品经理大神</div>\n                    <div class="question">北京教师资格考试报名流程图</div>\n                  </div>\n              </div>\n          </ul>'),e.insertBefore(r,t)}},controller:{initEntry:function(){AIDraw.render.renderCss(AIDraw.render.getCSS()),AIDraw.render.creatEntryDom(),this.eventInit()},eventInit:function(){var e=this,t=document.querySelector("#po-tool-ai-button"),r=document.querySelector("#ai-draw-input"),o=document.querySelector(".qlist"),i=document.querySelector(".po-ai-ul-downarrow");function n(e){var t,r,i=null!==(t=null===(r=e.target)||void 0===r?void 0:r.className)&&void 0!==t?t:"";"string"==typeof i&&"qlist"!==i&&"question"!==i&&"po-input-other"!==i&&"question-tip"!==i&&i.indexOf("po-ai-ul-downarrow")<0&&(o.className="qlist hide",document.querySelector(".po-ai-ul-downarrow").className="po-diagraming-icons po-ai-ul-downarrow")}function a(){if(r.value&&r.value.trim()){AIDraw.controller.loading=!0,AIDraw.controller.ifPause=!1;var e=document.getElementById("ai-draw-go");e.classList="po-button loading",e.removeChild(document.querySelector(".po-ai-ul-goarrow")),$('\n              <div id="ai-draw-esc">\n                <img class="ai-draw-loading" src="'.concat(staticBasePath,'/images/loading.png" loading="lazy" style="width: 20px;vertical-align: middle;display: inline-block;margin-top: -2px;">\n                <span id="ai-draw-esc-rect"></span>\n              </div>\n            ')).appendTo(e),document.querySelector(".po-ai-ul-flowtype").style["pointer-events"]="none",r.disabled="disabled",document.querySelector(".po-ai-ul-downarrow").style.color="#C7C9CB",AIDraw.server.post(r.value),buried_point_fn("click","AI_draw","流程图编辑器",{"按钮名称":"AI绘制_创作点击",value:memberObj.member?r.value:null})}else r.focus()}t.addEventListener("click",function(e){e.stopPropagation(),t.querySelector("ul").style.display="block",r.focus(),""!==r.value&&(i.className+=" hide"),buried_point_fn("click","AI_draw","流程图编辑器",{"按钮名称":"AI绘制_点击"})},!1),t.querySelector("ul").addEventListener("click",function(e){var t,o;e.stopPropagation(),n(e);var i=null!==(t=null===(o=e.target)||void 0===o?void 0:o.className)&&void 0!==t?t:"";if("po-ai-ul-title"==i||"po-ai-ul-choosetype"==i||"po-ai-menu po-menu"==i){var a=document.querySelector(".po-ai-ul-flowtype>.selected");a&&(a.className=""),AIDraw.controller.renderType="",r.placeholder="输入想绘制的流程"}},!1),document.addEventListener("click",function(e){e.stopPropagation(),n(e)}),r.addEventListener("click",function(e){""!==r.value?(o.className="qlist hide",i.className+=" hide"):(i.className="po-diagraming-icons po-ai-ul-downarrow",o.className="qlist show"),Array.from(o.classList).indexOf("hide")<0&&(i.className+=" show")}),r.addEventListener("mouseover",function(e){""!==r.value?i.className="po-diagraming-icons po-ai-ul-downarrow hide":i.className="po-diagraming-icons po-ai-ul-downarrow",Array.from(o.classList).indexOf("hide")<0&&(i.className+=" show")}),r.addEventListener("mouseout",function(e){"po-input-other"==document.activeElement.className&&""!==r.value?i.className="po-diagraming-icons po-ai-ul-downarrow hide":i.className="po-diagraming-icons po-ai-ul-downarrow",Array.from(o.classList).indexOf("hide")<0&&(i.className+=" show")}),i.addEventListener("click",function(e){var t=e.target.classList;Array.from(t).indexOf("show")<0?(e.target.className+=" show",o.className="qlist show",r.focus()):(e.target.className="po-diagraming-icons po-ai-ul-downarrow",o.className="qlist hide")}),r.addEventListener("input",function(){""!==r.value?(o.className="qlist hide",i.className+=" hide"):(o.className="qlist show",i.className="po-diagraming-icons po-ai-ul-downarrow"),Array.from(o.classList).indexOf("hide")<0&&(i.className+=" show")}),t.querySelector(".po-ai-ul-close").addEventListener("click",function(){t.querySelector("ul").style.display="none"},!1),r.addEventListener("keydown",function(e){13==e.keyCode&&a()},!1),o.addEventListener("click",function(e){var t=e.target;"qlist"!==t.className&&"question-tip"!==t.className&&(r.value=e.target.innerText,o.className="qlist hide",i.className="po-diagraming-icons po-ai-ul-downarrow hide",r.focus())},!1),document.querySelector("#ai-draw-go").addEventListener("click",function(){AIDraw.controller.loading?(Model.define.elements=0==Object.keys(AIDraw.controller.defaultShapes).length?Model.define.elements:AIDraw.controller.defaultShapes,AIDraw.controller.ifPause=!0,AIDraw.controller.loading=!1,$("#ai-draw-go").removeClass("loading"),$("#ai-draw-go-text").text("创作"),$("#ai-draw-go>img").css("display","inline-block"),document.getElementById("ai-draw-go").removeChild(document.querySelector("#ai-draw-esc")),AIDraw.controller.afterLoaded(),$.loading("close"),AIDraw.controller.creating=!1):a()},!1),$("#ai-draw-go").hover(function(t){e.loading&&($("#ai-draw-go-text").text("结束创作"),$("#ai-draw-go>img").css("display","none"),$("#ai-draw-go").addClass("hover"))},function(t){e.loading&&($("#ai-draw-go-text").text("创作"),$("#ai-draw-go>img").css("display","inline-block"),$("#ai-draw-go").removeClass("hover"))}),document.querySelector(".po-ai-ul-flowtype").addEventListener("click",function(e){var t,i,n=e.target.getAttribute("ac"),a=null!==(t=null===(i=e.target)||void 0===i?void 0:i.className)&&void 0!==t?t:"",s=document.querySelector('.po-ai-ul-flowtype>div[ac="'+n+'"]'),p=document.querySelector(".po-ai-ul-flowtype>.selected"),l=p?p.getAttribute("ac"):"";p&&(p.className="");var h="";s&&l!=n&&""==a?(s.className="selected","flow"==n?h="Mermaid":"sequence"==n?h="MermaidSequence":"org"==n?h="ORG":"timeline"==n?h="MermaidTimeLine":"class"==n&&(h="MermaidClass"),r.placeholder=s.innerText):(n="flow",r.placeholder="输入想绘制的流程");for(var d=AIDraw.render.qList[n]||AIDraw.render.qList.flow,c='<div class="question-tip">您可以这样提问：</div>',f=0;f<d.length;f++)c+='<div class="question">'.concat(d[f],"</div>");o.innerHTML=c,AIDraw.controller.renderType=h})},afterLoaded:function(){var e=document.getElementById("ai-draw-go"),t=document.querySelector("#ai-draw-esc");if(this.loading=!1,$("#ai-draw-go").removeClass("loading"),document.querySelector(".po-ai-ul-flowtype").style["pointer-events"]="all",document.querySelector(".po-ai-go").style["pointer-events"]="all",document.querySelector("#ai-draw-input").removeAttribute("disabled"),document.querySelector(".po-ai-ul-downarrow").style.color="#9AA5B8",(t||this.ifPause)&&($("#ai-draw-esc").length>0&&e.removeChild(document.querySelector("#ai-draw-esc")),$("#ai-draw-go-text").text("创作"),$("#ai-draw-go>img").css("display","inline-block"),$("#ai-draw-go").removeClass("hover"),0==$(".po-ai-ul-goarrow").length)){var r=document.createElement("span");r.className="po-diagraming-icons po-ai-ul-goarrow",r.innerHTML="&#xe8a8;",e.appendChild(r)}},loading:!1,creating:!1,tempTxt:"",nodes:[],edges:[],maxY:0,maxX:0,direction:"horizon",renderType:"",nextNodes:{},startY:0,defaultShapes:{},ifPause:!1,clearAiDrawData:function(){this.tempTxt="",this.nodes=[],this.edges=[],this.xxflowNormal.connects={},this.xxflowNormal.tempShapeList={},this.xxflowNormal.tempLinkerList={},this.testtxt="",this.maxY=this.computeBtBorder().maxY,this.maxX=this.computeBtBorder().maxX,this.nextNodes={}},pRender:{outputShapes:function(e){var t=[];return e.map(function(e){if(e.id){var r=e.id,o=Model.getShapeById(r);t.push(o)}}),t}},testtxt:"",createEntry:function createEntry(txt){if(txt.indexOf("{msg:end")>=0){if("PO"==AIDraw.controller.renderType){if(this.tempTxt.indexOf("}")>-1){var arr1=this.tempTxt.split("[DONE]"),node1=arr1[0];if(node1&&node1.indexOf("}")>-1)try{","==node1.substr(-1)&&(node1=node1.substring(0,node1.length-1));var _nodeObj=JSON.parse(node1+"");this.nodes.push(_nodeObj),this.xxflowNormal.init([_nodeObj])}catch(e){","==node1.substr(-1)&&(node1=node1.substring(0,node1.length-1)),eval("var nodeObj = "+node1),this.nodes.push(nodeObj),this.xxflowNormal.init([nodeObj])}}}else if("Mermaid"==AIDraw.controller.renderType){var _arr=this.tempTxt.split("[DONE]"),node=_arr[0].trim();AIDraw.controller.renderNodesByMermaidNode(node)}return AIDraw.controller.clearAiDrawData(),AIDraw.controller.creating=!1,void $.loading("close")}if(txt.indexOf("{msg:overed")>=0)return $.loading("close"),$.toast({type:"error",text:"今日请求数已满，请明天再试"}),void(AIDraw.controller.creating=!1);if(txt.indexOf("{msg:error")>=0)return $.loading("close"),$.toast({type:"error",text:"体验人数太多，请稍后再试"}),void(AIDraw.controller.creating=!1);if(txt.indexOf("{msg:sens")>=0)return $.loading("close"),$.toast({type:"error",text:"关键词有敏感字符，请修改后重试"}),void(AIDraw.controller.creating=!1);if(txt.indexOf("{msg:uid")>=0)return $.loading("close"),$.toast({type:"error",text:"当前用户无访问权限，请稍后重试"}),void(AIDraw.controller.creating=!1);if(this.testtxt+=txt,this.tempTxt+=txt,"PO"==AIDraw.controller.renderType){if(this.tempTxt.indexOf("@")>-1){var arr=this.tempTxt.split("@"),_node=arr[0];if(_node&&_node.indexOf("}")>-1)try{","==_node.substr(-1)&&(_node=_node.substring(0,_node.length-1));var nodeObj=JSON.parse(_node+"");this.nodes.push(nodeObj),this.xxflowNormal.init([nodeObj])}catch(e){","==_node.substr(-1)&&(_node=_node.substring(0,_node.length-1)),eval("var nodeObj = "+_node),this.nodes.push(nodeObj),this.xxflowNormal.init([nodeObj])}this.tempTxt=arr[1]}}else if("Mermaid"==AIDraw.controller.renderType&&this.tempTxt.indexOf("\n")>-1){var _arr2=this.tempTxt.split("\n"),_node2=_arr2[0];AIDraw.controller.renderNodesByMermaidNode(_node2),this.tempTxt=_arr2[1]}},jsonQuickCreate:function(e){var t=e.split("@"),r=this;t.forEach(function(e,t){if(!e||e.indexOf("}")<0)return!0;var o=JSON.parse(e);r.xxflowNormal.init([o])})},preRender:function(e){e.indexOf("横向")>-1||e.indexOf("横着")>-1||e.indexOf("横的")>-1?this.direction="horizon":(e.indexOf("纵向")>-1||e.indexOf("竖向")>-1||e.indexOf("竖的")>-1||e.indexOf("竖着")>-1||e.indexOf("垂直")>-1)&&(this.direction="vertical"),e.indexOf("组织结构")>-1||e.indexOf("组织架构")>-1||e.indexOf("组织图")>-1||e.indexOf("ORG")>-1?this.renderType="ORG":e.indexOf("时序")>-1||/[sS]equence/.test(e)||e.indexOf("序列图")>-1||e.indexOf("循环图")>-1?this.renderType="MermaidSequence":e.indexOf("类图")>-1||/[cC]lass\s*[dD]iagram/.test(e)?this.renderType="MermaidClass":e.indexOf("时间轴")>-1||e.indexOf("时间线")>-1||e.indexOf("里程碑")>-1||/[tT]ime\s*[lL]ine/.test(e)?this.renderType="MermaidTimeLine":""==this.renderType&&(this.renderType="Mermaid")},getMermaidType:function(e){return{sequenceDiagram:"sequence",flow:"flow",graph:"flow",classDiagram:"class",gantt:"gantt",journey:"user",pie:"pie"}[e.trim().split(/\s+/)[0]]},mermaidSequence:{lastShape:{},lifelineMaxX:0,lifeLines:[],lifeLineDesLabel:[],messageLinkers:{},Nests:[],combinedCreating:[],activationShapes:[],combinedShapes:[],notes:[],shapes:[],render:function(e){for(var t=this,r=e.split("\n").map(function(e){return e.trim().replace(/;$/,"")}).filter(function(e){return""!==e&&e.indexOf("```")<0}),o=function(){var e=r[i],o=t.getLineType(e),n=e.split(/\s+/),a=n[0];switch(o){case"lifeLine":t.renderLifeLine(e);break;case"message":var s=t.renderMessageLine(e);if(t.Nests.length>0){var p,l=_createForOfIteratorHelper(t.Nests);try{for(l.s();!(p=l.n()).done;){p.value.includes.push(s)}}catch($){l.e($)}finally{l.f()}}break;case"combined":if(("loop"==a||"alt"==a||"opt"==a||"par"==a||"critical"==a||"break"==a)&&n.length>1){var h,d,c,f=e.split("").slice(a.length+1,e.length).join(""),u=((null===(h=t.lastShape)||void 0===h||null===(h=h.to)||void 0===h?void 0:h.y)||(null===(d=t.lastShape)||void 0===d||null===(d=d.props)||void 0===d?void 0:d.y)+(null===(c=t.lastShape)||void 0===c||null===(c=c.props)||void 0===c?void 0:c.h)||AIDraw.controller.maxY+130)+20;t.Nests.push({type:a,name:f,props:{y:u},includes:[]}),t.combinedCreating.push({type:a,name:f,y:u})}else if("end"==a){for(var y,g,m=t.Nests.length-1;m>=0;m--)if("loop"==t.Nests[m].type||"alt"==t.Nests[m].type||"opt"==t.Nests[m].type||"par"==t.Nests[m].type||"critical"==t.Nests[m].type||"break"==t.Nests[m].type){y=t.Nests[m],g=m;break}var x=t.renderCombinedFragment(y);t.combinedCreating=t.combinedCreating.filter(function(e){return e.y!=x.props.y}),t.combinedShapes.push(x),t.shapes.push(x),t.Nests.splice(g,1)}else for(var v=AIDraw.controller.mermaidSequence,w={else:"alt",and:"par",option:"critical"},S=new RegExp(a+"\\s+(.*)"),I=e.match(S)[1].trim(),b=v.Nests.length-1;b>=0;b--){var k=v.Nests[b];if(k.type==w[a]){var D,A;(k[D="".concat(a,"Arr")]||(k[D]=[])).push({y:((null===(A=v.lastShape)||void 0===A||null===(A=A.to)||void 0===A?void 0:A.y)||v.lastShape.props.y+v.lastShape.props.h)+15,name:I});break}}break;case"activation":if("activate"==a){var L,N,M,O=n[1],B=r[i-1],C=t.getLineType(B),T=(null===(L=t.lastShape)||void 0===L||null===(L=L.to)||void 0===L?void 0:L.y)||(null===(N=t.lastShape)||void 0===N||null===(N=N.props)||void 0===N?void 0:N.y)+(null===(M=t.lastShape)||void 0===M||null===(M=M.props)||void 0===M?void 0:M.h)||AIDraw.controller.maxY+130;if("combined"==C){var P=B.split(/\s+/);if(P.length>1){var _=P[1];if(t.combinedCreating.length>0)for(var j=t.combinedCreating.length-1;j>=0;j--)if(_==t.combinedCreating[j].name){T=t.combinedCreating[j].y+20;break}}}t.Nests.push({type:a,name:"activation_".concat(O),props:{y:T},includes:[]})}else if("deactivate"==a){for(var q,U,E=t.Nests.length-1;E>=0;E--)if("activate"==t.Nests[E].type){q=t.Nests[E],U=E;break}var Y=t.renderActivation(q);t.activationShapes.push(Y),t.shapes.push(Y),t.Nests.splice(U,1)}break;case"note":var R=t.renderNote(e);if(t.shapes.push(R),t.Nests.length>0){var z,F=_createForOfIteratorHelper(t.Nests);try{for(F.s();!(z=F.n()).done;){z.value.includes.push(R)}}catch($){F.e($)}finally{F.f()}}}},i=1;i<r.length;i++)o();this.updateShapes(),AIDraw.elements=AIDraw.controller.pRender.outputShapes(this.shapes),this.clearData()},getLineType:function(e){var t=e.split(/\s+/)[0];return"participant"==t||"actor"==t?"lifeLine":/-{1,2}[>{1,2}|x|)]/.test(e)?"message":"loop"==t||"alt"==t||"else"==t||"opt"==t||"par"==t||"and"==t||"critical"==t||"option"==t||"break"==t||"end"==t?"combined":"activate"==t||"deactivate"==t?"activation":"note"==t.toLowerCase()?"note":"box"==t?"group":void 0},getLinkerType:function(){return{"--\x3e>":"dashed-solid","->>":"solid-solid","--\x3e":"dashed-none","->":"solid-none","--x":"dashed-cross","-x":"solid-cross","--)":"dashed-normal","-)":"solid-normal"}},renderLifeLine:function(e){var t=e.split(/\s+/),r=t[0];if(t.length>3&&"as"==t[2]){var o={};o.id=t[1],o.text=t[3],this.lifeLineDesLabel.push(o)}var i,n,a=this.lifelineMaxX+150;if(0==this.lifelineMaxX)i=AIDraw.controller.maxY+100;else{var s=Model.getShapeById(this.lifeLines[0].id);i=s.props.y||s.from.y-25}if(AIDraw.controller.startY=i,"participant"==r){var p=Math.max(100,AIDraw.util.getTextPos(t[1]).width);n=this.renderShape("sequenceLifeLine",a,i,{text:t[1],width:p,height:200})}else if("actor"==r){var l={x:(n=this.renderShape("actor",a,i,{text:t[1],width:25,height:25,fontStyle:{textAlign:"center",vAlign:"top",bold:!0}})).props.x-0+n.props.w/2,y:n.props.y-0+n.props.h,id:n.id,angle:1.5*Math.PI},h={x:n.props.x-0+n.props.w/2,y:n.props.y-0+n.props.h+300,angle:.5*Math.PI},d=AIDraw.controller.xxflowNormal.createLinker(l,h,"",{lineStyle:"dot",endArrowStyle:"none",lineType:"normal"});this.lifeLines.push(d)}this.lifelineMaxX=n.props.x+n.props.w,this.lifeLines.push(n),this.shapes.push(n)},renderMessageLine:function(e){var t,r,o=this,i=this.getLinkerType();for(var n in i)if(e.indexOf(n)>-1){t=n,r=i[n];break}var a,s=r.split("-")[0],p=r.split("-")[1],l=e.split(t)[0].trim(),h=e.split(t)[1].split(":")[0].trim();/^\+|^\-/.test(h)&&(a=h.substr(0,1),h=h.substr(1,h.length-1).trim());var d=e.substr(e.indexOf(":")+1,e.length-e.indexOf(":")).trim(),c=[];[l,h].map(function(e){o.getShapeByName(e)||c.push(e)}),c.map(function(e){o.renderLifeLine("participant ".concat(e))});var f=this.getShapeByName(l),u=this.getShapeByName(h),y=!1;if(f&&u){var g="linker"==f.name,m="linker"==u.name,x={},v={};x.x=g?f.from.x:f.props.x+f.props.w/2;var w=g?f.from.y-25:f.props.y;this.lastShape.name&&(w="linker"==this.lastShape.name?this.lastShape.from.y:this.lastShape.props.y+this.lastShape.props.h),x.y=w+60,x.angle=Math.PI,l==h?(v.x=x.x,v.y=x.y+30,v.angle=Math.PI,y=!0):(v.x=m?u.from.x:u.props.x+u.props.w/2,v.y=x.y,v.angle=0);var S=this.getLineStyleByArrow(s,p,y,x,v),I=AIDraw.controller.xxflowNormal.createLinker(x,v,d,S);if(this.messageLinkers["".concat(l,"-").concat(h)]||(this.messageLinkers["".concat(l,"-").concat(h)]=[]),this.messageLinkers["".concat(l,"-").concat(h)].push(I),this.lastShape=I,a)if("+"==a)this.Nests.push({type:"activate",name:"activation_".concat(h),props:{y:this.lastShape.to.y},includes:[]});else if("-"==a){for(var b,k,D=this.Nests.length-1;D>=0;D--)if("activate"==this.Nests[D].type){b=this.Nests[D],k=D;break}b.includes.push(I);var A=this.renderActivation(b);this.activationShapes.push(A),this.Nests.splice(k,1)}return this.shapes.push(I),I}},renderCombinedFragment:function(e){var t,r,o=e.type,i=e.name,n=e.props,a=e.includes,s=e.elseArr,p=e.andArr,l=e.optionArr,h=a[a.length-1];n.h=((null==h||null===(t=h.to)||void 0===t?void 0:t.y)||h.props.y)+20-n.y;var d,c=(null===(r=a[0])||void 0===r||null===(r=r.from)||void 0===r?void 0:r.x)||a[0].props.x,f=0;a.map(function(e){f="linker"==e.name?Math.max(f,e.from.x,e.to.x):e.props.x-0+e.props.w,c="linker"==e.name?Math.min(c,e.from.x,e.to.x):e.props.x}),d=Math.abs(f-c),n.x=c-25,n.w=d+40;var u=this.renderShape("combinedFragment",n.x,n.y,{width:n.w,height:n.h,text:["[".concat(i,"]"),o],fillStyle:{type:"none"}});return function(e){var t=AIDraw.controller.mermaidSequence;[s,p,l].map(function(r){r&&r.map(function(r){var o={from:{id:e.id,x:e.props.x,y:r.y},to:{id:e.id,x:e.props.x+e.props.w,y:r.y}},i=AIDraw.controller.xxflowNormal.createLinker(o.from,o.to,"[".concat(r.name,"]"),{lineStyle:"dashed",endArrowStyle:"none",linkerType:"normal",textStyle:{location:.5,pos:"bottom"}});t.messageLinkers["extra_".concat(r.name)]=[i]})})}(u),u},renderActivation:function(e){e.type;var t,r=e.name,o=e.props,i=e.includes,n=i[i.length-1];o.h=((null==n||null===(t=n.to)||void 0===t?void 0:t.y)||n.props.y)-o.y;var a=r.split("_")[1],s=this.getShapeByName(a),p="linker"==s.name?s.from.x:s.props.x+s.props.w/2;o.x=p-15;var l=this.renderShape("sequenceActivation",o.x,o.y,{height:o.h});return i.map(function(e){"linker"==e.name?e.from.x==e.to.x&&e.to.x!=o.x+30?(e.from.x+=15,e.to.x+=15,Designer.painter.renderLinker(e,!1)):(e.to.x==p&&(e.to.x=o.x),e.from.x==p&&(e.from.x=o.x),Designer.painter.renderLinker(e,!0)):(e.props.w-=15,Designer.painter.renderShape(e,!0)),AIDraw.util.update(e)}),l},renderNote:function(e){var t=e.match(/\s(\S*)\s/)[1],r={},o=e.match(/\s+(\S*)\:/)[1],i=this.getShapeByName(o),n="linker"==i.name,a=e.match(/:\s+(.*)$/)[1];switch(t){case"over":var s=o.split(","),p=s[0].trim(),l=this.getShapeByName(p),h="linker"==l.name;i=l;var d=h?l.from.x:l.props.x+l.props.w/2;if(1==s.length)n=h,r.x=d-80,r.w=160;else{var c=s[1].trim(),f=this.getShapeByName(c),u="linker"==f.name;n=u;var y=u?f.from.x:f.props.x+f.props.w/2;r.x=Math.min(d,y)-5,r.w=Math.abs(d-y)+10}break;case"right":r.x=n?i.from.x+5:i.props.x+i.props.w/2+5;break;case"left":r.x=n?i.from.x-100:i.props.x+i.props.w/2-100}var g=n?i.from.y+20:i.props.y;if(this.lastShape.name&&(g="linker"==this.lastShape.name?this.lastShape.from.y:this.lastShape.props.y+this.lastShape.props.h),r.y=g+60,r.w){var m=AIDraw.util.getTextPos(a,r.w);r.h=30*m.lineNum}else{if(AIDraw.util.getTextPos(a).width>240){var x=AIDraw.util.getTextPos(a,240);r.w=240,r.h=30*x.lineNum}}var v=this.renderShape("note",r.x,r.y,{width:r.w||200,height:r.h||30,text:a});return this.notes.push(v),this.lastShape=v,v},renderShape:function(e,t,r,o,i){var n=AIDraw.controller.xxflowNormal.create(e,t,r,i),a=o.width,s=o.height,p=o.text,l=o.fontStyle,h=o.fillStyle;if(p&&Array.isArray(p))for(var d in p)n.textBlock[d].text=p[d];else p&&"string"==typeof p&&(n.textBlock[0].text=p);return a&&(n.props.w=a),s&&(n.props.h=s),l&&(n.fontStyle=l),h&&(n.fillStyle=h),Schema.initShapeFunctions(n),Designer.painter.renderShape(n),Model.add(n,!1),n},getShapeByName:function(e){for(var t,r,o=0;o<this.lifeLines.length;o++){var i=this.lifeLines[o];if(i.textBlock[0]&&i.textBlock[0].text==e){"actor"==(r=i).name&&(r=this.lifeLines[o-1]);break}}return null!==(t=r)&&void 0!==t&&t},getLineStyleByArrow:function(e,t,r,o,i){var n={};return n.lineStyle=e,n.endArrowStyle="solid"==t?"solidArrow":t,r&&(n.linkerType="curve",n.points=[{x:o.x+100,y:o.y-20},{x:i.x+100,y:i.y+20}]),n},updateShapes:function(){var e=this;if(this.combinedShapes.length>0)for(var t=0;t<this.combinedShapes.length;t++){var r=this.combinedShapes[t];for(var o in this.messageLinkers)for(var i=this.messageLinkers[o],n=0;n<i.length;n++){var a=i[n];if(a.from.y>r.props.y){if(a.from.y+=50,a.to.y+=50,a.from.x==a.to.x&&a.from.y!=a.to.y){if(a.points[0].y+=50,a.points[1].y+=50,Designer.painter.renderLinker(a,!1),a.textBlock){var s=AIDraw.util.getTextPos(a.textBlock[0].text),p=a.from.x-0+Utils.getShapesBounding([a]).w+s.width/2;a.to.y<r.props.y+r.props.h&&r.props.x+r.props.w>a.from.x&&r.props.x+r.props.w<p&&(r.props.w=p+10-r.props.x)}}else Designer.painter.renderLinker(a,!0);AIDraw.util.update(a)}}for(var l=this.combinedShapes.length-1;l>=0;l--){var h=this.combinedShapes[l];if(r.id==h.id?h.props.h+=50:Utils.rectInRect(r.props,h.props)?(h.props.x-=10,h.props.w+=20,h.props.h+=50,r.props.y+=50):h.props.y>r.props.y&&l>=t&&(h.props.y==r.props.y+r.props.h&&(h.props.y+=5),h.props.y+=50),h.props.y+h.props.h==r.props.y+r.props.h&&(h.props.h>r.props.h?h.props.y+=5:h.props.y-=5),0==t&&l>=this.combinedShapes.length/2){var d=[this.combinedShapes[this.combinedShapes.length-l-1].props.zindex,h.props.zindex];h.props.zindex=d[0],this.combinedShapes[this.combinedShapes.length-l-1].props.zindex=d[1],Designer.painter.renderShape(this.combinedShapes[this.combinedShapes.length-l-1],!0),AIDraw.util.update(this.combinedShapes[this.combinedShapes.length-l-1])}Designer.painter.renderShape(h,!0),AIDraw.util.updateMulti([h,r])}for(var c=this.activationShapes.length-1;c>=0;c--){var f=this.activationShapes[c];f.props.y<r.props.y&&f.props.y-0+f.props.h>r.props.y?f.props.h+=50:f.props.y>r.props.y&&(f.props.y+=50),f.props.x+f.props.w==r.props.x+r.props.w&&(r.props.w+=10)}this.notes.map(function(e){e.props.y+=50,Designer.painter.renderShape(e,!0),AIDraw.util.update(e)})}for(var u=this.activationShapes.length-1;u>=0;u--){var y=this.activationShapes[u];if(u>=1){var g=this.activationShapes[u-1];g.id!=y.id&&Utils.rectInRect(g.props,y.props)&&(g.props.x+=10,Designer.painter.renderShape(y,!0),AIDraw.util.update(g))}if(u>=this.activationShapes.length/2){var m=[this.activationShapes[this.activationShapes.length-u-1].props.zindex,y.props.zindex];y.props.zindex=m[0],this.activationShapes[this.activationShapes.length-u-1].props.zindex=m[1],Designer.painter.renderShape(this.activationShapes[this.activationShapes.length-u-1],!0),AIDraw.util.update(this.activationShapes[this.activationShapes.length-u-1])}Designer.painter.renderShape(y,!0),AIDraw.util.update(y)}this.lifeLines.map(function(t){if(e.lifeLineDesLabel.length>0&&"linker"!==t.name){var r=e.lifeLineDesLabel.filter(function(e){return e.id==t.textBlock[0].text});r.length>0&&(t.textBlock[0].text=r[0].text,Designer.painter.renderShape(t,!0))}if("actor"!==t.name){var o,i=(null===(o=e.lastShape)||void 0===o||null===(o=o.to)||void 0===o?void 0:o.y)||e.lastShape.props.y-0+e.lastShape.props.h;"linker"==t.name?(t.to.y=i+50,Designer.painter.renderLinker(t,!0)):(t.props.h=i-t.props.y+50,Designer.painter.renderShape(t,!0))}AIDraw.util.update(t)})},clearData:function(){this.shapes=[],this.lastShape={},this.lifelineMaxX=0,this.lifeLines=[],this.messageLinkers={},this.Nests=[],this.combinedCreating=[],this.activationShapes=[],this.combinedShapes=[],this.notes=[]}},mermaidClass:{initClass:!0,title:"",classList:[],classShapes:[],linkerLine:[],linkers:[],creatingClass:[],classMarker:[],edges:{},nameToLabel:{},freeShape:[],classNotes:[],shapes:[],step:120,startY:80,clearData:function(){this.initClass=!0,this.title="",this.classList=[],this.classShapes=[],this.linkerLine=[],this.linkers=[],this.creatingClass=[],this.classMarker=[],this.edges={},this.nameToLabel={},this.freeShape=[],this.classNotes=[],this.shapes=[],this.startY=80},render:function(e){for(var t=this,r=e.split("\n").map(function(e){return e.trim().replace(/;$/,"")}).filter(function(e){return""!==e&&e.indexOf("```")<0}),o=0;o<r.length;o++){var i=r[o];switch(/<-|->/.test(i)&&!this.getLinkerType(i)&&(i.indexOf("<")>-1&&(i=i.replace(/<-/,"<--")),i.indexOf(">")>-1&&(i=i.replace(/->/,"--\x3e"))),this.getLineType(i)){case"title":this.title=i.indexOf("title")>-1?i.split(":")[1].trim():this.title;break;case"class":this.renderClass(i);break;case"namespace":this.renderNamespace(i);break;case"classMarker":this.creatingClass.length>0?this.classMarker.push(i+" "+this.creatingClass[this.creatingClass.length-1]):this.classMarker.push(i);break;case"note":this.classNotes.push(i);break;case"classMember":this.renderClassMember(i)}}for(var n in this.classNotes.forEach(function(e){return t.renderNote(e)}),this.freeShape.forEach(function(e){Array.isArray(e)?t.renderFreeClass.apply(t,_toConsumableArray(e)):t.renderFreeClass(e)}),this.updateStackClass(),this.updateOverlapClass(),this.autoFitText(),this.linkerLine.forEach(function(e){return t.renderLinker(e)}),this.classMarker.forEach(function(e){return t.renderClassMarker(e)}),this.nameToLabel)this.renderLabel(n,this.nameToLabel[n]);""!=this.title&&this.renderTitle(this.title),this.shapes=[].concat(_toConsumableArray(this.classShapes),_toConsumableArray(this.linkers)),AIDraw.elements=AIDraw.controller.pRender.outputShapes(this.shapes),this.clearData()},getLineType:function(e){var t=e.split(/\s+/)[0];return"---"==t||"title:"==t?"title":"class"==t||this.getLinkerType(e)||e.indexOf("{")>-1||e.indexOf("}")>-1?"class":"namespace"==t?"namespace":e.indexOf("<<")>-1||e.indexOf(">>")>-1?"classMarker":"note"==t?"note":e.indexOf(":")>-1||e.indexOf("(")>-1&&e.indexOf(")")>-1||/\s+/.test(e)||e.indexOf("~")>-1?"classMember":void 0},getLinkerType:function(e){for(var t,r,o=[{exp:/<\|--|--\|>/,type:"solid-dashedArrow"},{exp:/\*--|--\*/,type:"solid-solidDiamond"},{exp:/o--|--o/,type:"solid-dashedDiamond"},{exp:/<--|-->/,type:"solid-normal"},{exp:/--/,type:"solid-none"},{exp:/<\.\.|\.\.>/,type:"dashed-normal"},{exp:/<\|\.\.|\.\.\|>/,type:"dashed-dashedArrow"},{exp:/\*\.\.|\.\.\*/,type:"dashed-solidDiamond"},{exp:/o\.\.|\.\.o/,type:"dashed-dashedDiamond"},{exp:/\.\./,type:"dashed-none"}],i=0;i<o.length;i++){var n=o[i];if(n.exp.test(e)){t=n.exp,r=n.type;break}}return!!t&&{arrow:t,type:r}},renderTitle:function(e){var t=AIDraw.controller.computeBtBorder(this.classShapes),r=t.minX,o=t.maxX,i=t.minY-40,n=AIDraw.util.getTextPos(e,"","bold 16px 微软雅黑").width,a=r+(o-r)/2-n/2,s=AIDraw.controller.xxflowNormal.create("text",a,i);s.textBlock[0].text=e,s.props.w=n,s.props.h=30,s.fontStyle={size:16,bold:!0},Designer.painter.renderShape(s),Model.add(s,!1)},renderClass:function(e){var t,r,o,i=e.split(/\s+/),n=i[0];if(/\[".*"\]/.test(e))r=e.match(/\["(.*)"\]/)[1];else if(e.indexOf("~")>-1){r=this.renderGenericType(e).match(/(&lt;.*&gt;)/)[1];var a=e.split("");a.splice(a.indexOf("~"),a.lastIndexOf("~")-a.indexOf("~")+1),e=a.join("")}if(e.indexOf("{")>-1&&"class"==n){var s=(t=e.match(/class\s+(.*?)\s*[\[{]/)[1].trim()).match(/`(.*)`/);return s&&(t=s[1]),r&&(this.nameToLabel[t]=r),this.creatingClass.push(t),this.classList.indexOf(t)<0?(o=this.renderCLS(t),this.freeShape.push(o)):o=this.getShapeByName(t),o}if(e.indexOf("}")>-1)this.creatingClass.pop();else{if("class"==n){t=r?e.match(/class\s+(.*)\s*\[/)[1].trim():i[1].trim();var p=e.match(/`(.*)`/);return p&&(t=p[1]),r&&(this.nameToLabel[t]=r),this.classList.indexOf(t)<0&&(o=this.renderCLS(t)),this.freeShape.push(o),o}var l,h=this.getLinkerType(e);if(h){var d,c,f,u,y,g=e.match(h.arrow)[0],m=e.split(g);for(var x in this.linkerLine.push({line:e,arrow:{arrow:g,type:h.type}}),m){t=m[x].replace(/"(.*)"/,"").trim(),1==x&&(t=t.replace(/:(.*)/,"").trim());var v=e.match(/`(.*)`/);v&&t.indexOf("`")>-1&&(t=v[1]),r&&(this.nameToLabel[t]=r),l=this.classList.indexOf(t)<0?this.renderCLS(t):this.getShapeByName(t),e.match(/[|*o<](--|\.\.)/)||"--"==g||".."==g?y=0:e.match(/(--|\.\.)[|*o>]/)&&(y=1),y==x?(c=l,u=t):(d=l,f=t)}if(this.initClass){this.classList.length==Object.keys(Model.define.elements).length?this.startY=80:this.startY=AIDraw.controller.computeBtBorder().maxY+80,AIDraw.controller.startY=this.startY;Designer.op.moveShape([c],{x:100,y:this.startY},!0),Designer.op.moveShape([d],{x:100,y:c.props.y+c.props.h+this.step},!0),AIDraw.util.updateMulti([d,c]),this.initClass=!1}else for(var w=[d,c],S=[f,u],I=0;I<w.length;I++){var b,k,D,A;k=w[w.length-1-I],D=S[I],A=S[S.length-1-I];var L=(b=w[I]).props,N=k.props;if(0==L.x&&0==L.y||0!=N.x||0!=N.y)0==L.x&&0==L.y&&0==N.x&&0==N.y&&(JSON.stringify(this.freeShape).indexOf(JSON.stringify([b,k]))<0?(this.freeShape.push([b,k]),I++):this.renderFreeClass(d,c));else{var M=0==I?"to":"from",O=this.layoutShapePos(b,k,D,A,M).pos,B=void 0,C=void 0,T=L.x,P=L.y;switch(O){case"top":C={x:L.x,y:L.y-this.step-N.h,w:N.w,h:N.h},0==AIDraw.controller.getCrossShapeIdsInrange(C).length&&C.y>=0&&L.y-this.step-N.h>=this.startY?P=C.y:B={y:this.step};break;case"right":T=L.x+L.w+this.step;break;case"bottom":P=L.y+L.h+this.step;break;case"left":C={x:L.x-this.step-N.w,y:L.y,w:N.w,h:N.h},0==AIDraw.controller.getCrossShapeIdsInrange(C).length&&C.x>=0?T=C.x:B={x:this.step}}Designer.op.moveShape([k],{x:T,y:P},!0),AIDraw.util.update(k),B&&this.movingOtherShapes(B,k)}}this.freeShape=this.freeShape.filter(function(e){return e.id!==d.id&&e.id!==c.id});var _={to:f,from:u};for(var j in _){var q,U,E=_[j];(q=this.edges)[E]||(q[E]={}),(U=this.edges[E])[j]||(U[j]=[]);var Y="from"==j?_.to:_.from;this.edges[E][j].indexOf(Y)<0&&this.edges[E][j].push(Y)}return[d,c]}}},renderFreeClass:function(e,t){var r=this.classShapes.filter(function(e){return 0!=e.props.x&&0!=e.props.y}),o={};0==r.length?(o.maxX=0,o.minY=AIDraw.controller.computeBtBorder().maxY+this.step,AIDraw.controller.startY=o.minY):o=AIDraw.controller.computeBtBorder(r);var i=o.maxX,n=o.minY,a=e.props,s=null==t?void 0:t.props,p=[];t?0!=a.x&&0!=a.y&&0==s.x&&0==s.y?(t.props.x=a.x,t.props.y=a.y-this.step-s.h,p=[t]):0==a.x&&0==a.y&&0!=s.x&&0!=s.y?(e.props.x=s.x,e.props.y=s.y+this.step+s.h,p=[e]):0==a.x&&0==a.y&&0==s.x&&0==s.y&&(t.props.x=i+this.step,t.props.y=n,e.props.x=i+this.step,e.props.y=s.y+s.h+this.step,p=[e,t]):(e.props.x=i+this.step,e.props.y=n,p=[e]),p.length>0&&(p.forEach(function(e){return Designer.painter.renderShape(e)}),AIDraw.util.updateMulti(p))},updateStackClass:function(e){for(var t in e=e||this.edges)for(var r=e[t],o=r.from||[],i=r.to||[],n=[].concat(_toConsumableArray(o),_toConsumableArray(i)),a=this.getShapeByName(t),s=0;s<n.length;s++){var p=this.getShapeByName(n[s]);if(!this.shapeInRange(a,p)){var l,h,d,c=this.edges[n[s]],f=c.from||[],u=c.to||[],y=[].concat(_toConsumableArray(f),_toConsumableArray(u)),g=void 0,m=void 0,x=[p,a],v=[n[s],t];l=x[m=n.length<=y.length?0:1],g=x[x.length-1-m],h=v[m],d=v[v.length-1-m];var w=this.layoutShapePos(l,g,h,d).pos;if(w){var S=void 0,I=void 0;switch(g.props.x=l.props.x,g.props.y=l.props.y,w){case"top":I={x:l.props.x,y:l.props.y-this.step-g.props.h,w:g.props.w,h:g.props.h},0==AIDraw.controller.getCrossShapeIdsInrange(I).length&&I.y>=0?g.props.y=I.y:S={y:this.step};break;case"right":g.props.x=l.props.x+l.props.w+this.step;break;case"bottom":g.props.y=l.props.y+l.props.h+this.step;break;case"left":I={x:l.props.x-this.step-g.props.w,y:l.props.y,w:g.props.w,h:g.props.h},0==AIDraw.controller.getCrossShapeIdsInrange(I).length&&I.x>=0?g.props.x=I.x:S={x:this.step}}S&&this.movingOtherShapes(S,g),Designer.painter.renderShape(g),AIDraw.util.update(g)}}}},updateOverlapClass:function(){var e=this,t=[],r=AIDraw.controller.computeBtBorder(this.classShapes),o=r.minX,i=r.minY,n=r.maxX,a=r.maxY;this.classShapes.map(function(r){e.classShapes.map(function(e){r.id!==e.id&&r.props.x==e.props.x&&r.props.y==e.props.y&&0==t.filter(function(t){return t[0].id==e.id&&t[1].id==r.id}).length&&t.push([r,e])})});for(var s,p={},l=0;l<t.length;l++){var h=t[l];s=h[0];for(var d=0;d<h.length;d++){var c=h[d].textBlock[0].text;if(!p[c]){var f,u,y,g,m=null!==(f=null===(u=this.edges[c])||void 0===u||null===(u=u.from)||void 0===u?void 0:u.length)&&void 0!==f?f:0,x=null!==(y=null===(g=this.edges[c])||void 0===g||null===(g=g.to)||void 0===g?void 0:g.length)&&void 0!==y?y:0;p[c]=m+x}}for(var v,w=["top","left","right","bottom"],S=void 0,I=void 0,b=void 0,k={},D=void 0,A=s.props,L=function(){var t=w[N];switch(t){case"top":k.x=A.x,k.w=A.w,k.y=0,k.h=A.y-e.step>0?A.y-e.step:0,I=k.x,b=A.y-e.step-A.h;break;case"left":k.x=0,k.w=A.x-e.step>0?A.x-e.step:0,k.y=A.y,k.h=A.h,I=s.x-e.step-A.w,b=k.y;break;case"right":k.x=A.x+A.w+e.step,k.w=Model.define.page.width-k.x,k.y=A.y,k.h=A.h,I=s.x+e.step+A.w,b=k.y;case"bottom":k.x=A.x,k.w=A.w,k.y=A.y+A.h+e.step,k.h=Model.define.page.height-k.y,I=k.x,b=A.y+e.step+A.h}if(0==k.h||0==k.w)return 0;var r,n=Utils.getShapesByRange(k);if(0==n.length)return s.props.x=I,s.props.y=b,D=t,1;if(r=e.classShapes.filter(function(e){return n.indexOf(e.id)>-1}),!S||r.length<S){if("top"==t||"left"==t)if("top"==t){if(Utils.getShapesByRange({x:k.x,y:i-e.step-A.h,w:k.w,h:A.h}).length>0)return 0}else if("left"==t&&Utils.getShapesByRange({x:o-e.step-A.w,y:k.y,w:A.w,h:k.h}).length>0)return 0;S=r.length,D=t}},N=0;N<w.length&&(0===(v=L())||1!==v);N++);if(D){var M=void 0,O=void 0;switch(D){case"top":O={x:s.props.x,y:i-this.step-A.h,w:s.props.w,h:s.props.h},0==AIDraw.controller.getCrossShapeIdsInrange(O).length&&O.y>=0?s.props.y=O.y:(M={y:this.step},s.props.y=i);break;case"right":s.props.x=n+A.w+this.step;break;case"bottom":s.props.y=a+this.step+A.h;break;case"left":s.props.x=o-A.w-this.step,O={x:s.props.x-this.step-A.w,y:s.props.y,w:s.props.w,h:s.props.h},0==AIDraw.controller.getCrossShapeIdsInrange(O).length&&O.x>=0?s.props.x=O.x:(M={x:this.step},s.props.x=o)}Designer.painter.renderShape(s),AIDraw.util.update(s),M&&this.movingOtherShapes(M,s)}}},autoFitText:function(){for(var e=this,t=function(){var t,o=Utils.copy(e.classShapes[r]);t=Designer.op.shapeChangeHeight(e.classShapes[r])[0];var i=e.classShapes.filter(function(e){return e.props.y==o.props.y&&e.id!==o.id});i.length>0&&(t.props.h<i[0].props.h?t.props.h=i[0].props.h:i.map(function(e){e.props.h=t.props.h,Designer.painter.renderShape(e),AIDraw.util.update(e)}));var n=e.classShapes.filter(function(e){return e.props.y>o.props.y});if(n.length>0){var a=t.props.h-o.props.h;n.map(function(e){Designer.op.moveShape([e],{x:0,y:a},!0),AIDraw.util.update(e)})}Designer.painter.renderShape(t),AIDraw.util.update(t)},r=0;r<this.classShapes.length;r++)t()},layoutShapePos:function(e,t,r,o,i){for(var n,a,s,p,l,h,d,c,f,u=this,y=null!==(n=null===(a=this.edges[r])||void 0===a?void 0:a.to)&&void 0!==n?n:[],g=null!==(s=null===(p=this.edges[r])||void 0===p?void 0:p.from)&&void 0!==s?s:[],m=[].concat(_toConsumableArray(y),_toConsumableArray(g)),x=null!==(l=null===(h=this.edges[o])||void 0===h?void 0:h.to)&&void 0!==l?l:[],v=null!==(d=null===(c=this.edges[o])||void 0===c?void 0:c.from)&&void 0!==d?d:[],w=[].concat(_toConsumableArray(x),_toConsumableArray(v)),S=y.length+g.length,I={top:0,right:0,bottom:0,left:0},b=0;b<S;b++){var k=m[b],D=this.getShapeByName(k),A=D.props.x-0+D.props.w/2,L=D.props.y-0+D.props.h/2,N=e.props.x-0+e.props.w/2,M=e.props.y-0+e.props.h/2;A==N&&D.props.y+D.props.h+this.step==e.props.y?I.top++:A==N&&e.props.y+e.props.h+this.step==D.props.y?I.bottom++:L==M&&D.props.x+D.props.w+this.step==e.props.x?I.left++:L==M&&e.props.x+e.props.w+this.step==D.props.x&&I.right++}var O=[];for(var B in I)O.push(I[B]);var C,T=Math.min.apply(Math,O);C="to"==i?["top","right","bottom","left"]:["bottom","right","left","top"];var P={top:0,right:0,bottom:0,left:0},_=w.filter(function(e){var t=u.getShapeByName(e);if(0!==t.props.x||0!==t.props.y)return!0});if(_.length>0)for(var j=0;j<C.length;j++)if(I[C[j]]==T){var q=Utils.copy(t);switch(C[j]){case"top":q.props.x=e.props.x+e.props.w/2-q.props.w/2,q.props.y=e.props.y-this.step-q.props.h;break;case"right":q.props.x=e.props.x+e.props.w+this.step,q.props.y=e.props.y+e.props.h/2-q.props.h/2;break;case"bottom":q.props.x=e.props.x+e.props.w/2-q.props.w/2,q.props.y=e.props.y+this.step+e.props.h;break;case"left":q.props.x=e.props.x-q.props.w-this.step,q.props.y=e.props.y+e.props.h/2-q.props.h/2}for(var U=0;U<_.length;U++){var E=this.getShapeByName(_[U]);this.shapeInRange(E,q)&&(P[C[j]]++,f=C[j])}}if(f){var Y=0;for(var R in P)P[R]>Y&&(f=R,Y=P[R])}else for(var z=0;z<C.length;z++)if(I[C[z]]==T){f=C[z];break}return{pos:f,posNum:I}},renderCLS:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e;if(this.classList.indexOf(o)<0){var i=AIDraw.controller.xxflowNormal.create("cls",t,r);return i.textBlock.map(function(e,t){e.text=0==t?o:""}),Schema.initShapeFunctions(i),Designer.painter.renderShape(i),Model.add(i,!1),this.classList.push(e),this.classShapes.push(i),i}},renderNamespace:function(e){},renderClassMarker:function(e){var t,r,o=e.match(/<<(.*)>>(.*)/),i=this.creatingClass[this.creatingClass.length-1];i&&(r=this.getShapeByName(i)),t=o[1],o.length>2&&""!==o[2].trim()&&(i=o[2].trim(),r=this.getShapeByName(i)),r.textBlock[0].text='<div><span style="font-weight: normal;">&lt;&lt;'.concat(t,"&gt;&gt;</span></div>").concat(i),Designer.painter.renderShape(r),AIDraw.util.update(r)},renderNote:function(e){var t,r,o,n,a;if((t=e.match(/"(.*)"/))||(t=e.match(/:(.*)/)),t=t[1].trim(),e.indexOf("note for")>-1){var s=e.match(/note for (.*?)"/);s||(s=e.match(/note for (.*?):/)),s=s[1].trim(),r=this.renderClass(s+" .. `"+t+"`")[0]}else r=this.renderClass("class `"+t+"`");Designer.op.shapeReplace("simpleClass",r.id),r=Model.getShapeById(r.id);for(var p=0;p<this.classShapes.length;p++)if(this.classShapes[p].id==r.id){o=p;break}void 0!==o&&this.classShapes.splice(o,1,r),this.freeShape.map(function(e,t){(e.id==r.id&&(n=t),Array.isArray(e))&&(e.filter(function(e,t){return e.id==r.id}).length>0&&(n=t,a=i))}),void 0!==n&&(a?this.freeShape[n][a]=r:this.freeShape[n]=r)},renderClassMember:function(e){var t,r;if(e.indexOf(":")>-1&&0==this.creatingClass.length){var o=e.split(":");if(t=o[0],r=o[1].trim(),t.indexOf("~")>-1){var i=this.renderGenericType(t).match(/(&lt;.*&gt;)/)[1];this.nameToLabel[t]=i;var n=t.split("");n.splice(n.indexOf("~"),n.lastIndexOf("~")-n.indexOf("~")+1),t=n.join("")}var a=t.match(/`(.*)`/);t=a?a[1]:t.replace(/\s/g,"")}else t=this.creatingClass[this.creatingClass.length-1],r=e;r.indexOf("~")>-1&&(r=this.renderGenericType(r));var s=r.substr(0,r.length-1);/\*$/.test(r)&&(r="<i>".concat(s,"</i>")),/\$$/.test(r)&&(r="<u>".concat(s,"</u>"));var p=this.getShapeByName(t);if(p){var l,h=p.textBlock;""!=h[l=r.indexOf("(")>-1&&r.indexOf(")")>-1?2:1].text&&(h[l].text+="\n"),h[l].text+=r,Designer.painter.renderShape(p),AIDraw.util.update(p)}},renderLabel:function(e,t){var r=this.getShapeByName(e);r&&(r.textBlock[0].text=t.indexOf("&lt;")>-1?e+" "+t:t),Designer.painter.renderShape(r),AIDraw.util.update(r)},renderLinker:function(e){var t,r,o,i,n,a=e.line,s=e.arrow,p=s.arrow,l=s.type,h=a.split(p),d={},c={},f=0;a.match(/[|*o<](--|\.\.)/)||"--"==p||".."==p?f=1:a.match(/(--|\.\.)[|*o>]/)&&(f=0);for(var u=0;u<h.length;u++){var y=h[u],g=h[u].match(/"(.*)"/);n=h[u].match(/:(.*)/),g&&(g=g[1],y=y.replace(/"(.*)"/,"")),n&&(n=n[1]),y=y.replace(/:(.*)/,"").replace(/`/g,"").trim(),f==u?(t=y,o=g):(r=y,i=g)}var m=this.getShapeByName(t),x=this.getShapeByName(r);if(m&&x){var v,w=m.props.x,S=m.props.y,I=m.props.w,b=m.props.h,k=x.props.x,D=x.props.y,A=x.props.w,L=x.props.h,N=[];if(m.id==x.id){v=AIDraw.controller.hasLinkersByPos(m,"right");var M=S;if(v.length>0){var O=v.length+1;v.map(function(e,t){e.from.y=S+(2*t+1)/(2*O+1)*b,e.to.y=S+2*(t+1)/(2*O+1)*b,N.push(e)}),d.y=S+(2*v.length+1)/(2*O+1)*b,c.y=S+2*(v.length+1)/(2*O+1)*b}else d.y=M-0+(b+S-M)/3,c.y=d.y+(b+S-M)/3;d.x=w-0+I,c.x=d.x}else if(S-this.step==D+L){d.x=w-0+I/2,d.y=S,c.x=k-0+A/2,c.y=D-0+L;var B=this.updateMultiLinkers(m,x,d,c,"top","bottom");d=B.from,c=B.to,N=B.updateLinkers}else if(S+b==D-this.step){d.x=w-0+I/2,d.y=S-0+b,c.x=k-0+A/2,c.y=D;var C=this.updateMultiLinkers(m,x,d,c,"bottom","top");d=C.from,c=C.to,N=C.updateLinkers}else if(w-this.step==k+A){d.x=w,d.y=S-0+b/2,c.x=k-0+A,c.y=D-0+L/2;var T=this.updateMultiLinkers(m,x,d,c,"left","right");d=T.from,c=T.to,N=T.updateLinkers}else if(w+I==k-this.step){d.x=w-0+I,d.y=S-0+b/2,c.x=k,c.y=D-0+L/2;var P=this.updateMultiLinkers(m,x,d,c,"right","left");d=P.from,c=P.to,N=P.updateLinkers}else w==k?(d.x=w-0+I,d.y=S-0+b/2,c.x=k-0+A,c.y=D-0+L/2):S==D?(d.x=w-0+I/2,d.y=S-0+b,c.x=w-0+A/2,c.y=D-0+L):(d.x=w>k?w:w-0+I,d.y=S>D?S:S-0+b,c.x=w>k?k-0+A:k,c.y=S>D?D-0+L/2:D);d.id=m.id,d.angle=Utils.getPointAngle(m.id,d.x,d.y,4),c.id=x.id,c.angle=Utils.getPointAngle(x.id,c.x,c.y,4);var _=l.split("-"),j=_[0],q=_[1],U=[];o&&(U[U.length]={text:o,location:.1}),i&&(U[U.length]={text:i,location:.8}),n&&(U[U.length]={text:n,location:.5}),N.forEach(function(e){Designer.painter.renderLinker(e,!0),AIDraw.util.update(e)});var E=AIDraw.controller.xxflowNormal.createLinker(d,c,"",{lineStyle:j,endArrowStyle:q,textBlock:U});this.linkers.push(E)}},updateMultiLinkers:function(e,t,r,o,i,n){for(var a=AIDraw.controller.hasLinkersByPos(e,i),s=AIDraw.controller.hasLinkersByPos(t,n),p="top"==i||"bottom"==i?"vertical":"horizon",l=[a,s],h=[r,o],d=[e,t],c=[],f=function(e){var t=l[e];if(t.length>0){var i=[],n=[];t.map(function(t,r){t.from.id==d[e].id?"vertical"==p&&t.from.y==h[e].y?i.push({id:t.id,x:t.to.x,shape:t,type:"from"}):t.from.x==h[e].x&&n.push({id:t.id,y:t.to.y,shape:t,type:"from"}):t.to.id==d[e].id&&("vertical"==p&&t.to.y==h[e].y?i.push({id:t.id,x:t.from.x,shape:t,type:"to"}):t.to.x==h[e].x&&n.push({id:t.id,y:t.from.y,shape:t,type:"to"}))}),i.length>0?(i.push({id:"new",x:h[l.length-1-e].x}),i.sort(function(e,t){return e.x-t.x})):n.length>0&&(n.push({id:"new",y:h[l.length-1-e].y}),n.sort(function(e,t){return e.y-t.y}));var a="vertical"==p?i:n;a.map(function(t,i){var n=d[e].props.x+(i+1)/(a.length+1)*d[e].props.w,s=d[e].props.y+(i+1)/(a.length+1)*d[e].props.h;if("new"!=t.id){var l=t.shape;"vertical"==p?(l.from.x==l.to.x&&(l.from.x=n,l.to.x=n),l[t.type].x=n):(l.from.y==l.to.y&&(l.from.y=s,l.to.y=s),l[t.type].y=s),c.push(l)}else"vertical"==p?r.x==o.x?(r.x=n,o.x=n):0==e?r.x=n:o.x=n:r.y==o.y?(r.y=s,o.y=s):0==e?r.y=s:o.y=s})}},u=0;u<l.length;u++)f(u);return{from:r,to:o,updateLinkers:c}},getShapeByName:function(e){for(var t,r,o=0;o<this.classShapes.length;o++){var i=this.classShapes[o];if(i.textBlock[0]&&i.textBlock[0].text==e){r=i;break}}return null!==(t=r)&&void 0!==t&&t},movingOtherShapes:function(e,t){for(var r=0;r<this.classShapes.length;r++){var o=this.classShapes[r],i=o.props.w,n=o.props.h;if(o.id!=t.id&&(0!=o.props.x||0!=o.props.y)){for(var a in e){var s=e[a];"x"==a?Designer.op.moveShape([o],{x:i+s,y:0},!0):"y"==a&&Designer.op.moveShape([o],{x:0,y:n+s},!0)}AIDraw.util.update(o)}}},shapeInRange:function(e,t){return t.props.x>=e.props.x-this.step-t.props.w&&t.props.x<=e.props.x+this.step+e.props.w&&t.props.y>=e.props.y-this.step-t.props.h&&t.props.y<=e.props.y+this.step+e.props.h},renderGenericType:function(e){var t,r,o=null!==(t=null===(r=e.match(/~/g))||void 0===r?void 0:r.length)&&void 0!==t?t:0;if(o>=2)for(var i=0,n=Math.floor(o/2);i<n;){var a=e.indexOf("~"),s=e.lastIndexOf("~");e=e.substring(0,a)+"&lt;"+e.substring(a+1,s)+"&gt;"+e.substring(s+1),i++}return e}},mermaidTimeLine:{type:{},style:{},timeLine:{},shapes:[],creatingNode:{},creatingIcon:{},timeNodes:[],timeNotes:[],timeLinkers:[],creatingLinker:{},creatingGroup:{},groupShapes:[],step:150,title:"",defX:0,defY:0,minX:void 0,minY:void 0,maxX:0,maxY:0,render:function(e){var t=this;"vertical"==AIDraw.controller.direction&&(this.step=70);var r=this.template().type,o=this.template().style;this.type=r[Math.floor(Math.random()*r.length)],this.style=o[Math.floor(Math.random()*o.length)],this.renderTimeLine();for(var i=e.split("\n").map(function(e){return e.trim().replace(/;$/,"")}).filter(function(e){return""!==e&&e.indexOf("```")<0&&e.indexOf("%%")<0&&e.indexOf("dateFormat")<0&&e.indexOf("axisFormat")<0&&"mermaid"!=e}),n=0,a=0;a<i.length;a++){var s=i[a];switch(this.getLineType(s)){case"title":this.title=s.match(/\s+(.*)/)[1];break;case"node":this.renderTimeNode(s,n),""!==s.trim().split(":")[0]&&n++;break;case"group":this.renderGroup(s)}}if(0!==Object.keys(this.timeLine).length){var p=this.timeNodes[0].props,l=this.timeNodes[this.timeNodes.length-1].props;"horizon"==AIDraw.controller.direction?(this.timeLine.from.x=p.x-100,this.timeLine.from.y=p.y-0+p.h/2,this.timeLine.to.x=l.x+100,this.timeLine.to.y=this.timeLine.from.y,this.timeLine.to.angle=0,this.minX=this.timeLine.from.x,this.maxX=this.timeLine.to.x):(this.timeLine.from.x=p.x-0+p.w/2,this.timeLine.from.y=p.y-50,this.timeLine.to.x=this.timeLine.from.x,this.timeLine.to.y=l.y+l.h+50,this.timeLine.to.angle=.5*Math.PI,this.minY=this.timeLine.from.y,this.maxY=this.timeLine.to.y),Designer.painter.renderLinker(this.timeLine,!0),AIDraw.util.update(this.timeLine)}this.renderTitle();var h=[];if("horizon"==AIDraw.controller.direction){var d=this.defY-this.minY;this.shapes.forEach(function(e){var t=Model.getShapeById(e.id);"linker"==t.name?(t.from.y+=d,t.to.y+=d,Designer.painter.renderLinker(t,!0)):Designer.op.moveShape([t],{x:0,y:d},!0),h.push(t)})}else{var c=this.defX-this.minX;this.shapes.forEach(function(e){var t=Model.getShapeById(e.id);"linker"==t.name?(t.from.x+=c,t.to.x+=c,Designer.painter.renderLinker(t,!0)):Designer.op.moveShape([t],{x:c,y:0},!0),h.push(t)})}AIDraw.util.updateMulti(h);var f=[];this.groupShapes.forEach(function(e){var r=Model.getShapeById(e),o=r.textBlock[0].text,i=r.props;if(""!=o){var n,a,s=i.angle==.5*Math.PI?i.h:i.w,p=AIDraw.util.getTextPos(o,s),l=p.width,h=18*p.lineNum>30?18*p.lineNum:30;n="horizon"==AIDraw.controller.direction?i.x-0+i.w/2-l/2:i.x-0+i.w/2,a=i.y-0+i.h/2-h/2;var d=AIDraw.controller.xxflowNormal.create("text",n,a);d.props.w=l,d.props.h=h,d.textBlock[0].text=o,Designer.painter.renderShape(d),Model.add(d,!1),t.shapes.push(d),r.textBlock[0].text="",Designer.painter.renderShape(r),f.push(r)}}),AIDraw.util.updateMulti(f),this.setTemplate(),AIDraw.elements=AIDraw.controller.pRender.outputShapes([].concat(_toConsumableArray(this.shapes),[this.timeLine])),this.clearData()},getLineType:function(e){var t=e.split(/\s+/)[0];return"title"==t||"Title"==t?"title":/:\s+/.test(e)?"node":"section"==t?"group":void 0},renderTitle:function(){var e=this.maxX-this.minX,t=AIDraw.util.getTextPos(this.title,e,"bold 18px 微软雅黑"),r=t.lineNum>1?e:t.width,o=t.lineNum>1?18*t.lineNum:35,i=this.minX+e/2-r/2,n=this.minY-30-o;AIDraw.controller.startY=n;var a=AIDraw.controller.xxflowNormal.create("text",i,n);a.props.w=r,a.props.h=o,a.textBlock[0].text=this.title,a.fontStyle={bold:!0,size:18},Designer.painter.renderShape(a),Model.add(a,!1),this.shapes.push(a)},renderTimeLine:function(){var e,t,r,o,i,n=null!==(e=null===(t=this.type)||void 0===t?void 0:t.timeLine)&&void 0!==e?e:"linker",a=null!==(r=null===(o=this.type)||void 0===o?void 0:o.name)&&void 0!==r?r:"def";if("vertical"==AIDraw.controller.direction&&"chain1"==a&&(n="linker"),"none"!=n)return"linker"!=n&&"linker-arc"!=n||(i=AIDraw.controller.xxflowNormal.createLinker({x:0,y:0},{x:100,y:0})),this.timeLine=i,this.shapes.push(i),i},renderTimeNode:function(e,t){var r=[],o=!1;""!==(r=e.trim().split(":"))[0]?(this.creatingNode.text=r[0].trim(),this.creatingNode.index=t,this.renderTimeNodeIcon(),this.renderTimeNodeTime(),this.renderTimeNodeLinker()):o=!0;for(var i=1;i<r.length;i++){r.length>2&&i>1&&(o=!0);var n=r[i].trim();0==this.timeNotes.length&&this.timeNotes.push({text:this.creatingNode.text,shapes:[]});var a=0;o&&(a=this.timeNotes[this.timeNotes.length-1].shapes.length);var s=this.renderTimeNodeNote(n,a,o);o?this.timeNotes[this.timeNotes.length-1].shapes.push(s):this.timeNotes.push({text:this.creatingNode.text,shapes:[s]}),this.shapes.push(s)}},renderTimeNodeIcon:function(){var e,t,r,o,i,n=null!==(e=null===(t=this.type)||void 0===t?void 0:t.timeNodeIcon)&&void 0!==e?e:"round";if(0==this.timeNodes.length){var a=[],s=[];for(var p in this.shapes.forEach(function(e){return a.push(e.id)}),Model.define.elements)a.indexOf(p)<0&&s.push(Model.define.elements[p]);r=150,o=AIDraw.controller.computeBtBorder(s).maxY+200,this.defX=r,this.defY=o}else{var l=AIDraw.controller.computeBtBorder(this.timeNodes);"horizon"==AIDraw.controller.direction?("valueChain1"==n&&(this.step=20),o=this.timeNodes[0].props.y,r=l.maxX+this.step):(o=l.maxY+this.step,r=this.timeNodes[0].props.x)}switch(i="vertical"==AIDraw.controller.direction&&"valueChain1"==n&&this.timeNodes.length%2!=0?AIDraw.controller.xxflowNormal.create("valueChain2",r,o):AIDraw.controller.xxflowNormal.create(n,r,o),n){case"valueChain1":i.props.h=40;break;default:i.props.w=20,i.props.h=20}return Schema.initShapeFunctions(i),Designer.painter.renderShape(i),Model.add(i,!1),this.timeNodes.push(i),this.shapes.push(i),this.creatingIcon=i,i},renderTimeNodeTime:function(){var e,t,r=null!==(e=null===(t=this.type)||void 0===t?void 0:t.timeNodeIcon)&&void 0!==e?e:"round",o=[],i=this.creatingIcon,n=this.creatingNode.index,a=this.creatingNode.text,s=AIDraw.util.getTextPos(a,120,"bold 14px 微软雅黑"),p=s.lineNum>1?120:s.width,l=s.lineNum>1?18*s.lineNum:30;if("round"==r){var h,d,c;if("horizon"==AIDraw.controller.direction)c=n%2==0?"bottom":"top",h=i.props.x-0+i.props.w/2-p/2,d="bottom"==c?i.props.y+i.props.h+5:i.props.y-5-30;else if(c=n%2==0?"left":"right",d=i.props.y-0+i.props.h/2-15,"left"==c)h=i.props.x-10-p;else h=i.props.x+i.props.w+10;var f=AIDraw.controller.xxflowNormal.create("text",h,d);f.textBlock[0].text=a,f.props.w=p,f.props.h=l,f.fontStyle={bold:!0,size:14},Designer.painter.renderShape(f),this.shapes.push(f),Model.add(f,!1)}else"valueChain1"==r&&(i.textBlock[0].text=a,o.push(i));if(o.length>0){for(var u=0;u<o.length;u++)Designer.painter.renderShape(o[u]);AIDraw.util.updateMulti(o)}},renderTimeNodeLinker:function(){var e,t,r,o,i,n=null!==(e=null===(t=this.type)||void 0===t?void 0:t.timeNodeLinker)&&void 0!==e?e:"linker",a=null!==(r=null===(o=this.type)||void 0===o?void 0:o.timeNodeIcon)&&void 0!==r?r:"round",s=this.creatingIcon,p=this.creatingNode.index;if("none"!=n&&("round"==a?i="horizon"==AIDraw.controller.direction?p%2==0?"top":"bottom":p%2==0?"right":"left":"valueChain1"==a&&(i="horizon"==AIDraw.controller.direction?"top":p%2==0?"right":"left"),"linker"==n)){var l={},h={};"top"==i||"bottom"==i?(l.x=s.props.x-0+s.props.w/2,h.x=l.x,l.angle=0*Math.PI,h.angle=1.5*Math.PI,"top"==i?(l.y=s.props.y,h.y=l.y-132):(l.y=s.props.y-0+s.props.h,h.y=l.y+132)):"right"!=i&&"left"!=i||(l.y=s.props.y-0+s.props.h/2,h.y=l.y,l.angle=Math.PI,h.angle=0,"right"==i?(l.x=s.props.x-0+s.props.w,h.x=l.x+132):(l.x=s.props.x,h.x=l.x-132));var d="round"==a?"dashed":"solid",c="round"==a?"none":"solidArrow",f=AIDraw.controller.xxflowNormal.createLinker(l,h,"",{lineStyle:d,endArrowStyle:c});this.timeLinkers.push(f),this.shapes.push(f)}},renderTimeNodeNote:function(e,t,r){var o,i,n,a,s,p,l,h,d,c=null!==(o=null===(i=this.type)||void 0===i?void 0:i.renderTimeNodeNote)&&void 0!==o?o:"roundRectangle",f=null!==(n=null===(a=this.type)||void 0===a?void 0:a.name)&&void 0!==n?n:"def",u=this.creatingIcon,y=(this.creatingNode.text,this.creatingNode.index),g=AIDraw.util.getTextPos(e,150),m=150,x=r?this.timeNotes[this.timeNotes.length-1].shapes[this.timeNotes[this.timeNotes.length-1].shapes.length-1]:void 0;if("chain1"==f?(h=18*g.lineNum<60?60:18*g.lineNum,d="horizon"==AIDraw.controller.direction?"top":y%2==0?"right":"left"):"def"==f&&(h=18*g.lineNum<45?45:18*g.lineNum,d="horizon"==AIDraw.controller.direction?y%2==0?"top":"bottom":y%2==0?"right":"left"),"top"==d||"bottom"==d){var v=u.props.x-0+u.props.w/2;p=v-75,s=this.timeLinkers.filter(function(e){return e.from.x==v})[0],"top"==d?(l=(x?x.props.y:u.props.y)-h-52,s&&(s.to.y=l+h)):(l=(x?x.props.y+x.props.h:u.props.y+u.props.h)+52,s&&(s.to.y=l))}else if("right"==d||"left"==d){var w=u.props.y-0+u.props.h/2;l=w-h/2,s=this.timeLinkers.filter(function(e){return e.from.y==w})[0],"right"==d?(p=(x?x.props.x+x.props.w:u.props.x+u.props.w)+52,s&&(s.to.x=p)):(p=(x?x.props.x:u.props.x)-m-52,s&&(s.to.x=p+m))}this.minX=this.minX?Math.min(this.minX,p):p,this.minY=this.minY?Math.min(this.minY,l):l,this.maxX=Math.max(this.maxX,p+m),this.maxY=Math.max(this.maxY,l+h);var S=this.creatingGroup.shape;if(S){this.creatingGroup.start=0==this.creatingGroup.start?"horizon"==AIDraw.controller.direction?p:l:this.creatingGroup.start;var I,b,k,D,A=S.props;if(A.h=("horizon"==AIDraw.controller.direction?p+m:l+h)-this.creatingGroup.start,0!=A.angle){var L={x:A.w/2,y:A.h/2},N={x:0,y:A.h};I=Utils.getRotated(L,N,A.angle)}else I={x:0,y:0};"horizon"==AIDraw.controller.direction?(D=Math.max(this.maxY,u.props.y-0+u.props.h),b=this.creatingGroup.start-I.x,k=D+20-I.y):(b=Math.max(this.maxX,u.props.x-0+u.props.w)+20-I.x,k=this.creatingGroup.start-I.y),A.x=0,A.y=0,S.textBlock[0].text=this.creatingGroup.text,Designer.op.moveShape([S],{x:b,y:k},!0),this.groupShapes.indexOf(S.id)<0&&this.groupShapes.push(S.id),AIDraw.util.update(S)}s&&Designer.painter.renderLinker(s),AIDraw.util.update(s);var M=AIDraw.controller.xxflowNormal.create(c,p,l);return M.textBlock[0].text=e,M.props.w=m,M.props.h=h,Designer.painter.renderShape(M),Model.add(M,!1),M},renderGroup:function(e){var t=e.match(/\s+(.*)/)[1],r=AIDraw.controller.xxflowNormal.create("rightBraceFlow",0,0);return"horizon"==AIDraw.controller.direction&&(r.props.angle=.5*Math.PI),r.props.w=80,Model.add(r,!1),this.creatingGroup={shape:r,start:0,end:0,text:t},this.shapes.push(r),r},template:function(){return{type:[{name:"def",timeLine:"linker",timeNodeIcon:"round",timeNodeTime:"text",renderTimeNodeNote:"valueChain3",timeNodeLinker:"linker",group:"leftBraceFlow"},{name:"chain1",timeLine:"none",timeNodeIcon:"valueChain1",timeNodeTime:"text",renderTimeNodeNote:"roundRectangle",timeNodeLinker:"linker",group:"leftBraceFlow"}],style:[{timeNodeIcon:{fillColor:["248,176,82","246,144,42"],lineColor:["198,82,50"],color:["255,255,255"],lineWidth:1.5},timeNodeLinker:{lineColor:["23,23,23"]},timeNodeNote:{fillColor:["255,255,255"],lineColor:["99,172,240"]}},{timeNodeIcon:{fillColor:["65,163,224","232,106,147","242,191,85","190,214,161","83,117,207"],lineColor:["255,255,255"],color:["255,255,255"],lineWidth:1.5},timeNodeLinker:{lineColor:["65,163,224","232,106,147","242,191,85","190,214,161","83,117,207"]},timeNodeNote:{lineColor:["65,163,224","232,106,147","242,191,85","190,214,161","83,117,207"]}}]}},setTemplate:function(){for(var e,t,r,o,i,n,a=this,s=null!==(e=null===(t=this.style)||void 0===t?void 0:t.timeNodeIcon)&&void 0!==e?e:{},p=null!==(r=null===(o=this.style)||void 0===o?void 0:o.timeNodeNote)&&void 0!==r?r:{},l=null!==(i=null===(n=this.style)||void 0===n?void 0:n.timeNodeLinker)&&void 0!==i?i:{},h=[],d=function(e){a.timeNotes[e].shapes.forEach(function(t){var r=Model.getShapeById(t.id),o=p.lineColor||[];r.lineStyle.lineColor=o[e%o.length]||"0,0,0",h.push(r)})},c=0;c<this.timeNotes.length;c++)d(c);for(var f=0;f<this.timeNodes.length;f++){var u=Model.getShapeById(this.timeNodes[f].id),y=s.fillColor||[],g=s.color||[],m=s.lineWidth||2,x=s.lineColor||[];u.fillStyle.color=y[f%y.length]||"255,255,255",u.fontStyle.color=g[f%g.length]||"0,0,0",u.lineStyle.lineWidth=m,u.lineStyle.lineColor=x[f%x.length]||"0,0,0",h.push(u)}for(var v=0;v<this.timeLinkers.length;v++){var w=Model.getShapeById(this.timeLinkers[v].id),S=l.lineColor||[];w.lineStyle.lineColor=S[v%S.length]||"0,0,0",h.push(w)}if(h.length>0){for(var I=0;I<h.length;I++){var b=h[I];Designer.painter.renderShape(b)}AIDraw.util.updateMulti(h)}},clearData:function(){this.type={},this.timeLine={},this.shapes=[],this.creatingNode={},this.creatingIcon={},this.timeNodes=[],this.timeNotes=[],this.timeLinkers=[],this.creatingLinker={},this.creatingGroup={},this.groupShapes=[],this.step=150,this.title="",this.defX=0,this.defY=0,this.minX=void 0,this.minY=void 0,this.maxX=0,this.maxY=0}},xxflowNormal:{connects:{},tempShapeList:{},tempLinkerList:{},init:function(e){var t=this;try{if(!(e instanceof Array))return;var r={x:100,y:100};AIDraw.controller.maxY&&(r.y=AIDraw.controller.maxY-0+100),e.forEach(function(e,o){if(!e)return!0;var i,n={};0==Object.keys(t.connects).length?(n.type="start",n.x=r.x,n.y=r.y,n.text=e.label):(n.type=e.type,e.edges&&e.edges.length>1?n.type="decision":e.edges&&1==e.edges.length&&"condition"==e.type&&(n.type="action"),n.x=t.connects[e.id].x,n.y=t.connects[e.id].y,n.text=e.label),t.tempShapeList[e.id]?i=t.tempShapeList[e.id]:(i=t.createNode(n),t.tempShapeList[e.id]=i);var a=[];for(var s in t.tempLinkerList){var p=t.tempLinkerList[s];p.edgeTo==e.id&&""!=e.type&&a.push(p)}a.forEach(function(e){e.to.id=i.id,"horizon"==AIDraw.controller.direction?(e.to.x=i.props.x,e.to.y=i.props.y+i.props.h/2,e.to.angle=Utils.getPointAngle(e.to.id,e.to.x,e.to.y,7)):"vertical"==AIDraw.controller.direction&&(e.to.x=i.props.x+i.props.w/2,e.to.y=i.props.y,e.to.angle=Utils.getPointAngle(e.to.id,e.to.x,e.to.y,7)),Designer.painter.renderLinker(e,!0),AIDraw.util.updateMulti([e])}),delete t.connects[e.id];var l=e.edges;if(l&&"[object Object]"==Object.prototype.toString.call(l)&&(l=[l]),!l||!l.length)return!0;l.forEach(function(r,o){if(!r.to)return!0;for(var n in t.tempLinkerList)if(t.tempLinkerList[n].edgeTo==r.to)try{if(t.tempLinkerList[n].from.id==t.tempShapeList[e.id].id)return}catch(f){}var a=r.to+"",s="";r.condition&&(s=r.condition+"");var p,l,h,d=AIDraw.controller.getLineByDir(i,o,t.tempShapeList[a],s);p=d.from,l=d.to,h=e.lineStyle;var c=t.createLinker(p,l,s,h);t.tempLinkerList[c.id]=Utils.copy(c),t.tempLinkerList[c.id].edgeTo=a+"",t.connects[a]={linkerId:c.id,x:l.x,y:l.y}})})}catch(o){}},createNode:function(e){var t,r={};if("PO"==AIDraw.controller.renderType)t="roundRectangle";else if("Mermaid"==AIDraw.controller.renderType){var o;t=null!==(o=e.type)&&void 0!==o?o:"roundRectangle"}else"ORG"==AIDraw.controller.renderType&&(t=e.type);return"start"==e.type||"end"==e.type?t="terminator":"condition"!=e.type&&"decision"!=e.type&&"gateway"!=e.type&&"judge"!=e.type&&"judgement"!=e.type||(t="decision"),(r=this.createShape(t,e.x-0,e.y-0,e.text,e.id)).textBlock.forEach(function(t){t.text=e.text}),Schema.initShapeFunctions(r),Designer.painter.renderShape(r),Model.add(r,!1),r},createShape:function(e,t,r,o,i){var n=Schema.shapes[e];if(AIDraw.controller.autoPosByText(n,o),"horizon"==AIDraw.controller.direction)var a=t,s=r-n.props.h/2;else if("vertical"==AIDraw.controller.direction)a=t-n.props.w/2,s=r;return this.create(e,a,s,i)},create:function(e,t,r,o){var i=Utils.newId(),n=Utils.copy(Schema.shapes[e]);n.id=o||i,n.props.x=t,n.props.y=r,n.attribute.container?n.props.zindex=-1:n.props.zindex=Model.maxZIndex+1,n.props=$.extend(!0,{},Schema.shapeDefaults.props,n.props);for(var a=0;a<n.dataAttributes.length;a++){n.dataAttributes[a].id=Utils.newId()}return n},createLinker:function(e,t,r){var o,i,n,a,s,p,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},h=Utils.newId(),d=Utils.copy(Schema.linkerDefaults);d.from=e,d.to=t,d.props={zindex:Model.maxZIndex+1},delete d.fontStyle,delete d.linkerType;var c=null!==(o=null===(i=l)||void 0===i?void 0:i.lineStyle)&&void 0!==o?o:"solid",f=null!==(n=null===(a=l)||void 0===a?void 0:a.linkerType)&&void 0!==n?n:"broken",u=null===(s=l)||void 0===s?void 0:s.textStyle,y=null===(p=l)||void 0===p?void 0:p.textBlock;l=={}&&(Designer.defaults.linkerBeginArrowStyle&&(l.beginArrowStyle=Designer.defaults.linkerBeginArrowStyle),Designer.defaults.linkerEndArrowStyle&&(l.endArrowStyle=Designer.defaults.linkerEndArrowStyle)),"ORG"==AIDraw.controller.renderType&&(l.endArrowStyle="none");var g=Model.define;return null!=g.defaultLinkerStyle&&null!=g.defaultLinkerStyle.linkerStyle&&(l=$.extend(l,g.defaultLinkerStyle.linkerStyle)),d.lineStyle=l,d.lineType=c,d.linkerType=f,d.id=h,r&&(d.text=r,u&&(d.textBlock=d.textBlock||[],d.textBlock[0]=d.textBlock[0]||{},d.textBlock[0].text=r,d.textBlock[0].location=u.location,d.textPos=d.textPos||{},d.textPos.pos=u.pos)),y&&(d.textBlock=y),l.points?(d.points=l.points,Designer.painter.renderLinker(d,!1)):Designer.painter.renderLinker(d,!0),Model.add(d,!1),d}},getLineByDir:function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i={},n={},a=100;if(""!==o){var s=AIDraw.util.getTextPos(o).width;a=a<s+50?s+50:a}if("horizon"==AIDraw.controller.direction)if(r){var p=r;i.x=e.props.x-0+e.props.w/2,i.y=e.props.y-0,n.x=p.props.x-0+p.props.w/2,n.y=p.props.y-0,n.id=p.id,n.angle=Utils.getPointAngle(n.id,n.x,n.y,7)}else 0==t?(i.x=e.props.x-0+e.props.w,i.y=e.props.y-0+e.props.h/2,n.x=i.x+a,n.y=i.y):(i.x=e.props.x-0+e.props.w/2,i.y=e.props.y-0+e.props.h,n.x=e.props.x-0+e.props.w+100,n.y=i.y+100),n.id=null;else if("vertical"==AIDraw.controller.direction)if(r){var l=r;i.x=e.props.x-0,i.y=e.props.y-0+e.props.h/2,n.x=l.props.x-0,n.y=l.props.y-0+l.props.h/2,n.id=l.id,n.angle=Utils.getPointAngle(n.id,n.x,n.y,7)}else 0==t?(i.x=e.props.x-0+e.props.w/2,i.y=e.props.y-0+e.props.h,n.x=i.x,n.y=i.y+100):(i.x=e.props.x-0+e.props.w,i.y=e.props.y-0+e.props.h/2,n.x=e.props.x-0+e.props.w+100,n.y=i.y-0+e.props.w+100),n.id=null,n.angle=.5*Math.PI;return i.id=e.id,i.angle=Utils.getPointAngle(i.id,i.x,i.y,7),{from:i,to:n}},renderNodesByMermaidNode:function(e){if(e.indexOf("flowchart")>-1||e.indexOf("graph")>-1){var t=e.split(/\s+/),r=t[t.length-1].replace(/;$/,"");AIDraw.controller.direction="TD"==r||"TB"==r||"BT"==r?"vertical":"horizon"}else{var o=AIDraw.controller.renderLinkerByMermaid(e);if(o){var i=o.nodeFrom,n=o.nodeTo,a=o.linkerLabel,s=o.lineStyle,p=AIDraw.controller.getNodeByTxt(i),l=AIDraw.controller.getNodeByTxt(n);AIDraw.controller.nextNodes[p.id]&&(p.label=p.label&&""!=p.label?p.label:AIDraw.controller.nextNodes[p.id].label,p.type=p.type&&""!=p.type?p.type:AIDraw.controller.nextNodes[p.id].type),AIDraw.controller.nextNodes[l.id]={label:l.label,type:l.type};for(var h=a?{to:l.id,condition:a}:{to:l.id},d=!0,c=0;c<this.nodes.length;c++)if(this.nodes[c].id==p.id){var f;this.nodes[c].edges=null!==(f=this.nodes[c].edges)&&void 0!==f?f:[],this.nodes[c].edges.push(h),this.nodes[c].lineStyle=s,this.xxflowNormal.init([this.nodes[c]]),d=!1;break}if(d){var u=_objectSpread(_objectSpread({},p),{},{edges:[h],lineStyle:s});this.nodes.push(u),this.xxflowNormal.init([u])}var y=l;this.nodes.push(y),this.xxflowNormal.init([y])}}},shapeNodes:[],renderNodesByMermaid:function(e){var t=this,r=[],o={},i={},n={},a=[],s={x:200,y:200};s.y=AIDraw.controller.maxY?AIDraw.controller.maxY-0+140:200,AIDraw.controller.startY=s.y-60;var p=e.split("\n").map(function(e){return e.trim()}).filter(function(e){return""!==e&&e.indexOf("```")<0});if(p[0]&&p[0].indexOf("flowchart")>-1||p[0].indexOf("graph")>-1){var l=p[0].split(/\s+/),h=l[l.length-1].replace(/;$/,"");AIDraw.controller.direction="TD"==h||"TB"==h||"BT"==h?"vertical":"horizon"}for(var d=function(){var e=p[c];if("classDiagram"==e)return 1;var l=AIDraw.controller.renderLinkerByMermaid(e);if(l||AIDraw.controller.getNodeByTxt(e),l){var h,d,f=l.nodeFrom,u=l.nodeTo,y=l.linkerLabel,g=l.lineStyle,m=AIDraw.controller.getNodeByTxt(f),x=AIDraw.controller.getNodeByTxt(u),v=m.id,w=m.label,S=m.type,I=x.id,b=x.label,k=x.type;AIDraw.controller.nextNodes[v]&&(w=w&&""!=w?w:AIDraw.controller.nextNodes[v].label,S=S&&""!=S?S:AIDraw.controller.nextNodes[v].type),AIDraw.controller.nextNodes[I]={label:b,type:k},a.push(v);var D=t.getLevelInfoByIds(c,v,I,a,o,i,n);o=D.levels,i=D.parents,n=D.children;for(var A=y?{to:I,condition:y}:{to:I},L=!0,N=0;N<r.length;N++)if(r[N].id==v){var M;r[N].edges=null!==(M=r[N].edges)&&void 0!==M?M:[],r[N].edges.push(A),r[N].lineStyle=g,t.connects[v]=r[N],L=!1;break}if(L){var O=_objectSpread(_objectSpread({},m),{},{edges:[A],lineStyle:g});1==o[v]&&(O.x=s.x,O.y=s.y),r.push(O),t.connects[v]=O,t.renderShapeByNode(O)}var B=0,C=i[I],T=C[C.length-1],P=_objectSpread(_objectSpread({},t.tempShapeList),t.tempLinkerList),_=null!==(h=null===(d=Schema.shapes[x.type])||void 0===d?void 0:d.props)&&void 0!==h?h:{w:96,h:54};if(1!=o[I])if(o[T]+1==o[I]&&(B=n[T].indexOf(I)),0==B){var j=!1,q=0,U=0,E=t.tempShapeList[T].id,Y=Model.getShapeById(E);if("vertical"==AIDraw.controller.direction){var R=Y.props.x-0+Y.props.w/2;if(x.y=Y.props.y+Y.props.h+80,!t.tempShapeList.hasOwnProperty(x.id)){var z={x:R-_.w/2,y:x.y,w:_.w,h:_.h};for(var F in P){if(j)break;var $=P[F];(j=AIDraw.controller.checkShapeOverlap(z,$))&&(q="linker"==$.name?z.x+z.w>q?z.x+z.w:q:$.props.x+$.props.w>q?$.props.x+$.props.w:q)}}x.x=j?q+120:R}else{var X=Y.props.y-0+Y.props.h/2,G=80;if(y){var H=AIDraw.util.getTextPos(y).width;G=G<H+50?H+50:G,x.x=Y.props.x+Y.props.w+G}else x.x=Y.props.x+Y.props.w+G;if(!t.tempShapeList.hasOwnProperty(x.id)){var W={x:x.x,y:X-_.h/2,w:_.w,h:_.h};for(var J in P){if(j)break;var K=P[J];(j=AIDraw.controller.checkShapeOverlap(W,K))&&(U="linker"==K.name?W.y+W.h>U?W.y+W.h:U:K.props.y+K.props.h>U?K.props.y+K.props.h:U)}x.y=j?U+120:X}}}else{var Z=n[T][B-1],Q=t.tempShapeList[Z].id,V=Model.getShapeById(Q),ee=!1,te=t.tempShapeList,re=0,oe=0;if("vertical"==AIDraw.controller.direction){var ie=V.props.x+V.props.w+120;for(var ne in te){var ae=Model.getShapeById(te[ne].id);if("linker"!=ae.name&&ae.props.y==V.props.y){var se=ae.props.x+ae.props.w;se&&se>re&&(re=se),ae.props.x<=ie&&ie<=ae.props.x+ae.props.w&&(ee=!0)}}ie=ee?AIDraw.controller.computeBtBorder(t.tempShapeList).maxX+120:ie,x.x=ie,x.y=V.props.y}else{var pe=V.props.y+V.props.h+120;for(var le in te){var he=Model.getShapeById(te[le].id);if("linker"!=he.name&&he.props.x==V.props.x){var de=he.props.x+he.props.w;de&&de>oe&&(oe=de),he.props.y<=pe&&pe<=he.props.y+he.props.h&&(ee=!0)}}pe=ee?AIDraw.controller.computeBtBorder(t.tempShapeList).maxY+120:pe,x.x=V.props.x,x.y=pe}}var ce=x;r.push(ce),t.tempShapeList[I]||t.renderShapeByNode(ce);var fe=Array.from(new Set(i[I])),ue=!!t.connects[I],ye={linkerLabel:y,lineStyle:g},ge=t.renderLinkerByNode(t.tempShapeList[v].id,t.tempShapeList[I].id,ye,ue,B);if(ge&&(Utils.selectIds=[ge.id],AIDraw.util.layerShapes("back"),Utils.unselect()),t.connects[I]=ce,fe&&fe.length>0)for(var me=function(e){var o=t.tempShapeList[fe[e]].id,i=Model.getShapeById(o),a=Utils.copy(i),s=r.filter(function(t){return t.id==fe[e]})[0],p=n[fe[e]];if(0==p.length)return 1;var l=Model.getShapeById(t.tempShapeList[p[p.length-1]].id),h=[];if(p.map(function(e){return h.push(t.tempShapeList[e].id)}),s&&p){var d=0;if(p.length>0){var c=p[0],f=t.tempShapeList[c].id,u=Model.getShapeById(f),y=u.props.x,g=u.props.y;if(p.length>2)"vertical"==AIDraw.controller.direction?(d=t.connects[p[p.length-1]]?(l.props.x+l.props.w/2-(y+u.props.w/2))/2:(ce.x-y)/2,i.props.x=y+d+u.props.w/2-i.props.w/2):(d=t.connects[p[p.length-1]]?(l.props.y+l.props.h/2-(g+u.props.h/2))/2:(ce.y-g)/2,i.props.y=g+d+u.props.h/2-i.props.h/2);else if(1==p.length){var m,x=Utils.getOutlinkers([Model.getShapeById(h[0])]);m="vertical"==AIDraw.controller.direction?.5*Math.PI:0,1==x.filter(function(e){return e.to.id==h[0]&&e.from.id==o&&e.to.angle==m}).length&&("vertical"==AIDraw.controller.direction?i.props.x=y+u.props.w/2-i.props.w/2:i.props.y=g+u.props.h/2-i.props.h/2)}var v=t.tempShapeList,w=i.props.x,S=i.props.y,I=!1;for(var b in v){var k=Model.getShapeById(v[b].id);"linker"!=k.name&&("vertical"==AIDraw.controller.direction?k.props.y==i.props.y&&k.id!==i.id&&k.props.x<=w&&w<=k.props.x+k.props.w&&(I=!0):k.props.x==i.props.x&&k.id!==i.id&&k.props.y<=S&&S<=k.props.y+k.props.h&&(I=!0))}I&&(i=a)}Designer.painter.renderShape(i),AIDraw.util.update(i);var D,A=Utils.getOutlinkers([i]),L=_createForOfIteratorHelper(A);try{for(L.s();!(D=L.n()).done;){var N=D.value,M=Model.getShapeById(N.from.id),O=Model.getShapeById(N.to.id);"vertical"==AIDraw.controller.direction?(p.length>2&&h.indexOf(N.to.id)>-1&&(N.from.y=M.props.y-0+M.props.h,N.from.angle=1.5*Math.PI),N.from.x=M.props.x-0+M.props.w/2,0==N.from.angle?N.from.x=M.props.x:N.from.angle==Math.PI&&(N.from.x=M.props.x-0+M.props.w),N.to.x=O.props.x-0+O.props.w/2,0==N.to.angle?N.to.x=O.props.x:N.to.angle==Math.PI&&(N.to.x=O.props.x-0+O.props.w)):(p.length>2&&h.indexOf(N.to.id)>-1&&(N.from.x=M.props.x-0+M.props.w,N.from.angle=Math.PI),N.from.y=M.props.y-0+M.props.h/2,N.from.angle==.5*Math.PI?N.from.y=M.props.y:N.from.angle==1.5*Math.PI&&(N.from.y=M.props.y-0+M.props.h),N.to.y=O.props.y-0+O.props.h/2,N.to.angle==.5*Math.PI?N.to.y=O.props.y:N.to.angle==1.5*Math.PI&&(N.to.y=O.props.y-0+O.props.h)),Designer.painter.renderLinker(N,!0),Utils.selectIds=[N.id],AIDraw.util.layerShapes("back"),Utils.unselect()}}catch(B){L.e(B)}finally{L.f()}AIDraw.util.updateMulti(A)}},xe=fe.length-1;xe>=0;xe--)me(xe)}},c=1;c<p.length&&!d();c++);this.updateLinkers();var f=[];for(var u in this.tempShapeList)f.push(this.tempShapeList[u]);var y=[].concat(f,_toConsumableArray(this.tempLinkerList));AIDraw.elements=AIDraw.controller.pRender.outputShapes(y),this.connects={},this.tempLinkerList=[],this.tempShapeList={}},getLevelInfoByIds:function(e,t,r,o,i,n,a){i[t]||(i[t]=1),i[r]?i[r]=this.tempShapeList[r]?i[r]:Math.max(i[t]+1,i[r]):i[r]=i[t]+1;var s,p=1==e?i[t]:i[r];(n[r]=n[r]||[],a[t]=a[t]||[],p==i[t]+1||1==p)&&(n[t]&&(s=n[r]).push.apply(s,_toConsumableArray(n[t])),n[r].push(t));return i[t]+1==i[r]&&a[t].push(r),{levels:i,parents:n,children:a}},updateLinkers:function(){var e,t=this.getCrossLinkersInRange(),r=t.crossObj,o=t.overlapObj,i=_createForOfIteratorHelper(r);try{for(i.s();!(e=i.n()).done;){var n=e.value,a=Model.getShapeById(n[0]),s=Model.getShapeById(n[1]),p=Utils.copy(a),l=Utils.copy(s),h=Model.getShapeById(a.from.id),d=Model.getShapeById(a.to.id),c=Model.getShapeById(s.from.id),f=Model.getShapeById(s.to.id);if(p=je(n[0]),l=je(n[1]),"vertical"==AIDraw.controller.direction){if("right"==_e(h,d)&&a.from.angle!=1.5*Math.PI){var u=Pe(h,d,a,p,r);r=u.crossObj,p=Utils.copy(u.oldLinker)}if("right"==_e(c,f)&&s.from.angle!=1.5*Math.PI){var y=Pe(c,f,s,l,r);r=y.crossObj,l=Utils.copy(y.oldLinker)}if(0==r.length)break;if(0==a.from.angle&&0==a.to.angle){this.moveLinkerByDir(a,"right","right");var g=this.getCrossLinkersInRange().crossObj;if(g.length<r.length)r=g;else if(this.fallBackShape(p),0==s.from.angle&&0==s.to.angle){this.moveLinkerByDir(s,"right","right");var m=this.getCrossLinkersInRange().crossObj;m.length<r.length?r=m:this.fallBackShape(l)}}else if(0==s.from.angle&&0==s.to.angle){this.moveLinkerByDir(s,"right","right");var x=this.getCrossLinkersInRange().crossObj;x.length<r.length?r=x:this.fallBackShape(l)}}else{if("bottom"==_e(h,d)&&a.from.angle!=Math.PI){var v=Pe(h,d,a,p,r);r=v.crossObj,p=Utils.copy(v.oldLinker)}if("bottom"==_e(c,f)&&s.from.angle!=Math.PI){var w=Pe(c,f,s,l,r);r=w.crossObj,l=Utils.copy(w.oldLinker)}if(0==r.length)break;if(a.from.angle==.5*Math.PI&&a.to.angle==.5*Math.PI){this.moveLinkerByDir(a,"bottom","bottom");var S=this.getCrossLinkersInRange().crossObj;if(S.length<r.length)r=S;else if(this.fallBackShape(p),s.from.angle==.5*Math.PI&&s.to.angle==.5*Math.PI){this.moveLinkerByDir(s,"bottom","bottom");var I=this.getCrossLinkersInRange().crossObj;I.length<r.length?r=I:this.fallBackShape(l)}}else if(s.from.angle==.5*Math.PI&&s.to.angle==.5*Math.PI){this.moveLinkerByDir(s,"bottom","bottom");var b=this.getCrossLinkersInRange().crossObj;b.length<r.length?r=b:this.fallBackShape(l)}}}}catch(Ue){i.e(Ue)}finally{i.f()}var k,D=_createForOfIteratorHelper(o);try{for(D.s();!(k=D.n()).done;){var A=k.value;if(0==this.getCrossLinkersInRange().overlapObj.length)break;var L=Model.getShapeById(A[0]),N=Model.getShapeById(A[1]),M=Utils.getShapesBounding([L]),O=Utils.getShapesBounding([N]),B=Utils.copy(L),C=Utils.copy(N),T=Model.getShapeById(L.from.id),P=Model.getShapeById(L.to.id),_=Model.getShapeById(N.from.id),j=Model.getShapeById(N.to.id),q=void 0,U=void 0,E=void 0,Y=void 0;if(B=je(A[0]),C=je(A[1]),"vertical"==AIDraw.controller.direction){if("right"==_e(T,P)&&L.from.angle!=1.5*Math.PI){var R=Pe(T,P,L,B,r);o=R.overlapObj,B=Utils.copy(R.oldLinker)}if("right"==_e(_,j)&&N.from.angle!=1.5*Math.PI){var z=Pe(_,j,N,C,r);o=z.overlapObj,C=Utils.copy(z.oldLinker)}if(0==o.length)break;if(M.h>=O.h?(q=L,U=B,E=N,Y=C):(q=N,U=C,E=L,Y=B),0==q.from.angle){this.moveLinkerByDir(q,"right","right");var F=this.getCrossLinkersInRange(),$=F.crossObj,X=F.overlapObj;if($.length<=r.length&&X.length<o.length)r=$,o=X;else if(this.fallBackShape(U),0==E.from.angle){this.moveLinkerByDir(E,"right","right");var G=this.getCrossLinkersInRange(),H=G.crossObj,W=G.overlapObj;H.length<=r.length&&W.length<o.length?(r=H,o=W):this.fallBackShape(Y)}}else if(0==E.from.angle){this.moveLinkerByDir(E,"right","right");var J=this.getCrossLinkersInRange(),K=J.crossObj,Z=J.overlapObj;K.length<=r.length&&Z.length<o.length?(r=K,o=Z):this.fallBackShape(Y)}}else{if("bottom"==_e(T,P)&&L.from.angle!=Math.PI){var Q=Pe(T,P,L,B,r);o=Q.overlapObj,B=Utils.copy(Q.oldLinker)}if("bottom"==_e(_,j)&&N.from.angle!=Math.PI){var V=Pe(_,j,N,C,r);o=V.overlapObj,C=Utils.copy(V.oldLinker)}if(0==o.length)break;if(M.h>=O.h?(q=L,U=B,E=N,Y=C):(q=N,U=C,E=L,Y=B),q.from.angle==.5*Math.PI){this.moveLinkerByDir(q,"bottom","bottom");var ee=this.getCrossLinkersInRange(),te=ee.crossObj,re=ee.overlapObj;if(te.length<=r.length&&re.length<o.length)r=te,o=re;else if(this.fallBackShape(U),E.from.angle==.5*Math.PI){this.moveLinkerByDir(E,"bottom","bottom");var oe=this.getCrossLinkersInRange(),ie=oe.crossObj,ne=oe.overlapObj;ie.length<=r.length&&ne.length<o.length?(r=ie,o=ne):this.fallBackShape(Y)}}else if(E.from.angle==.5*Math.PI){this.moveLinkerByDir(E,"bottom","bottom");var ae=this.getCrossLinkersInRange(),se=ae.crossObj,pe=ae.overlapObj;se.length<=r.length&&pe.length<o.length?(r=se,o=pe):this.fallBackShape(Y)}}}}catch(Ue){D.e(Ue)}finally{D.f()}var le=0;if(this.getCrossLinkersInRange().crossShapeObj.length>0){var he,de=_createForOfIteratorHelper(this.getCrossLinkersInRange().crossShapeObj);try{for(de.s();!(he=de.n()).done;){var ce=he.value;Model.getShapeById(ce[1]);je(ce[1])}}catch(Ue){de.e(Ue)}finally{de.f()}}for(;this.getCrossLinkersInRange().crossShapeObj.length>0&&le<=5;){var fe=this.getCrossLinkersInRange().crossShapeObj;le++;var ue,ye=_createForOfIteratorHelper(fe);try{for(ye.s();!(ue=ye.n()).done;){for(var ge=ue.value,me=Model.getShapeById(ge[1]),xe=Model.getShapeById(ge[0]),ve=Model.getShapeById(me.from.id),we=Model.getShapeById(me.to.id),Se=Utils.copy(me),Ie=["top","right","bottom","left"],be=!1,ke=0;ke<Ie.length;ke++){for(var De=Ie[ke],Ae=0;Ae<Ie.length;Ae++){var Le=Ie[Ae],Ne=AIDraw.controller.moveLinkerByDir(me,De,Le);if(!(this.getCrossLinkersInRange().crossShapeObj.length>=fe.length)){me=Ne,be=!0;break}AIDraw.controller.fallBackShape(Se)}if(be)break}var Me=void 0;if("vertical"==AIDraw.controller.direction&&xe.props.x+140>AIDraw.controller.computeBtBorder(this.tempShapeList).maxX){if(ve.props.x+ve.props.w/2==xe.props.x+xe.props.w/2&&(Me=ve),we.props.x+we.props.w/2==xe.props.x+xe.props.w/2&&(Me=we),Me){var Oe=Utils.getOutlinkers([Me]),Be=[Me].concat(Oe);Designer.op.moveShape(Be,{x:140,y:0},!0)}}else if("horizon"==AIDraw.controller.direction&&xe.props.y+140>AIDraw.controller.computeBtBorder(this.tempShapeList).maxY&&(ve.props.y+ve.props.h/2==xe.props.y+xe.props.h/2&&(Me=ve),we.props.y+we.props.h/2==xe.props.y+xe.props.h/2&&(Me=we),Me)){var Ce=Utils.getOutlinkers([Me]),Te=[Me].concat(Ce);Designer.op.moveShape(Te,{x:0,y:140},!0)}}}catch(Ue){ye.e(Ue)}finally{ye.f()}}function Pe(e,t,r,o,i,n){var a,s;if("right"==_e(e,t)?(a="left",s="right"):"left"==_e(e,t)?(a="right",s="left"):"top"==_e(e,t)?(a="bottom",s="top"):"bottom"==_e(e,t)&&(a="top",s="bottom"),"vertical"==AIDraw.controller.direction){if(e.props.y-t.props.y>100){var p=qe(t,"bottom"),l=qe(e,"top");p&&p.to.id!=r.to.id||(s="bottom"),l&&l.from.id!=r.from.id||(a="top")}else if(t.props.y-e.props.y>100){var h=qe(e,"bottom"),d=qe(t,"top");d&&d.to.id!=r.to.id||(s="top"),h&&h.from.id!=r.from.id||(a="bottom")}}else e.props.x-t.props.x>100?(qe(t,"right")||(s="right"),qe(e,"left")||(a="left")):t.props.x-e.props.x>100&&(qe(t,"left")||(s="left"),qe(e,"right")||(a="right"));AIDraw.controller.moveLinkerByDir(r,a,s);var c=AIDraw.controller.getCrossLinkersInRange(),f=c.crossObj,u=c.overlapObj;return f.length<=i.length||(AIDraw.controller.fallBackShape(o),n&&n()),{crossObj:f,overlapObj:u,oldLinker:r}}function _e(e,t){if("vertical"==AIDraw.controller.direction){if(e.props.x>t.props.x+t.props.w)return"right";if(t.props.x>e.props.x+e.props.w)return"left";if(t.props.x==e.props.x&&e.props.y<t.props.y)return"top";if(t.props.x==e.props.x&&e.props.y>t.props.y)return"bottom"}else{if(e.props.y>t.props.y+t.props.h)return"bottom";if(t.props.y>e.props.y+e.props.h)return"top";if(t.props.y==e.props.y&&e.props.x<t.props.x)return"right";if(t.props.y==e.props.y&&e.props.x>t.props.x)return"left"}}function je(e){var t=AIDraw.controller,r=Model.getShapeById(e),o=(Utils.copy(r),Model.getShapeById(r.from.id)),i=Model.getShapeById(r.to.id),n=t.tempLinkerList.filter(function(t){return t.id==e}),a=Utils.getOutlinkers([o]);if(n.length>0){if(!n[0].ifBack)return r;if("horizon"==AIDraw.controller.direction){if(i.props.x>=o.props.x)return r;var s=qe(o,"left");if(s){var p=Model.getShapeById(s.from.id);if(p.props.y+p.props.h/2==o.props.y+o.props.h/2||Math.abs(p.props.x+p.props.w/2-(i.props.x+i.props.w/2))<1)return r;Designer.op.moveShape([o].concat(_toConsumableArray(a)),{x:p.props.x+p.props.w/2-o.props.w/2-o.props.x,y:0},!0),s.to.x=o.props.x+o.props.w/2,s.to.y=o.props.y,s.to.angle=.5*Math.PI,r.from.x=o.props.x,r.from.angle=0,r.from.y=o.props.y+o.props.h/2,r.to.y=i.props.y+i.props.h,r.to.angle=1.5*Math.PI,Designer.painter.renderLinker(r,!0),Designer.painter.renderLinker(s,!0),AIDraw.util.updateMulti([o].concat(_toConsumableArray(a)))}}else{if(i.props.y>=o.props.y)return r;var l=qe(o,"top");if(l){var h=Model.getShapeById(l.from.id);if(h.props.x+h.props.w/2==o.props.x+o.props.w/2||Math.abs(h.props.y+h.props.h/2-(i.props.y+i.props.h/2))<1)return r;Designer.op.moveShape([o].concat(_toConsumableArray(a)),{x:0,y:h.props.y+h.props.h/2-o.props.h/2-o.props.y},!0),l.to.x=o.props.x,l.to.y=o.props.y+o.props.h/2,l.to.angle=0,r.from.x=o.props.x+o.props.w/2,r.from.angle=.5*Math.PI,r.from.y=o.props.y,r.to.y=i.props.y+i.props.h/2,r.to.x=i.props.x+i.props.w,r.to.angle=Math.PI,Designer.painter.renderLinker(r,!0),Designer.painter.renderLinker(l,!0),AIDraw.util.updateMulti([o].concat(_toConsumableArray(a)))}}}return r}function qe(e,t){var r;"bottom"==t?r=1.5*Math.PI:"top"==t?r=.5*Math.PI:"left"==t?r=0:"right"==t&&(r=Math.PI);var o,i,n=!1,a=_createForOfIteratorHelper(Utils.getOutlinkers([e]));try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s.from.id==e.id&&s.from.angle==r||s.to.id==e.id&&s.to.angle==r){n=!0,o=s;break}}}catch(Ue){a.e(Ue)}finally{a.f()}return o||n}},moveLinkerByDir:function(e,t,r){var o=Model.getShapeById(e.from.id),i=Model.getShapeById(e.to.id);return"right"==t?(e.from.x=o.props.x-0+o.props.w,e.from.y=o.props.y-0+o.props.h/2,e.from.angle=Math.PI):"left"==t?(e.from.x=o.props.x,e.from.y=o.props.y-0+o.props.h/2,e.from.angle=0):"bottom"==t?(e.from.x=o.props.x-0+o.props.w/2,e.from.y=o.props.y-0+o.props.h,e.from.angle=1.5*Math.PI):"top"==t&&(e.from.x=o.props.x-0+o.props.w/2,e.from.y=o.props.y,e.from.angle=.5*Math.PI),"right"==r?(e.to.x=i.props.x-0+i.props.w,e.to.y=i.props.y-0+i.props.h/2,e.to.angle=Math.PI):"left"==r?(e.to.x=i.props.x,e.to.y=i.props.y-0+i.props.h/2,e.to.angle=0):"bottom"==r?(e.to.x=i.props.x-0+i.props.w/2,e.to.y=i.props.y-0+i.props.h,e.to.angle=1.5*Math.PI):"top"==r&&(e.to.x=i.props.x-0+i.props.w/2,e.to.y=i.props.y,e.to.angle=.5*Math.PI),Designer.painter.renderLinker(e,!0),AIDraw.util.update(e),e},fallBackShape:function(e){e&&(Designer.painter.renderLinker(e,!0),AIDraw.util.update(e))},checkLinkerOverlap:function(e,t,r,o){var i=e.x==t.x&&t.x==r.x&&r.x==o.x&&!(Math.max(e.y,t.y)<Math.min(r.y,o.y)||Math.min(e.y,t.y)>Math.max(r.y,o.y)),n=e.y==t.y&&t.y==r.y&&r.y==o.y&&!(Math.max(e.x,t.x)<Math.min(r.x,o.x)||Math.min(e.x,t.x)>Math.max(r.x,o.x));return i||n},checkShapeOverlap:function(e,t){if("linker"!=t.name){var r=t.props;return Utils.rectCross(e,r)}for(var o=t.points,i=0;i<o.length;i++){var n=o[i];if(n.x>=e.x&&n.x<=e.x+e.w&&n.y>=e.y&&n.y<=e.y+e.h)return!0}return!1},getCrossLinkersInRange:function(){var e=this.tempLinkerList,t=this.tempShapeList,r=e,o=[];for(var i in t)o.push(Model.getShapeById(t[i].id));for(var n={},a=0;a<r.length;a++){var s=Model.getShapeById(r[a].id);n[s.id]=Utils.getLinesFromLinker(s)}var p=[],l=[],h=[];for(var d in n){var c=n[d];if(1!=c.length)for(var f in n)for(var u=n[f],y=0;y<c.length;y++){for(var g=c[y],m={x:g.x1,y:g.y1},x={x:g.x2,y:g.y2},v=0;v<u.length;v++){var w=u[v],S={x:w.x1,y:w.y1},I={x:w.x2,y:w.y2};if(this.checkLinkerOverlap(m,x,S,I)&&d!=f&&0==l.filter(function(e){return e[0]==f&&e[1]==d||e[0]==d&&e[1]==f}).length&&l.push([d,f]),Utils.checkCross(m,x,S,I)){var b=Utils.intersection(m,x,S,I);if(Math.abs(b.x-m.x)<12&&Math.abs(b.y-m.y)<8)continue;if(Math.abs(b.x-x.x)<12&&Math.abs(b.y-x.y)<8)continue;if(Math.abs(b.x-S.x)<20&&Math.abs(b.y-S.y)<8)continue;if(Math.abs(b.x-I.x)<20&&Math.abs(b.y-I.y)<8)continue;d!=f&&0==p.filter(function(e){return e[0]==f&&e[1]==d}).length&&p.push([d,f])}}var k,D=_createForOfIteratorHelper(o);try{var A=function(){var e=k.value,t=Utils.getOutlinkers([e]);Utils.getLineToShapePoints(e,m,x).length>0&&0==t.filter(function(e){return e.id==d}).length&&0==h.filter(function(t){return t[0]==e.id&&t[1]==d}).length&&h.push([e.id,d])};for(D.s();!(k=D.n()).done;)A()}catch(L){D.e(L)}finally{D.f()}}}return{crossObj:p,overlapObj:l,crossShapeObj:h}},renderShapeByNode:function(e){e.type||(e.type="roundRectangle");var t=this.xxflowNormal.createShape(e.type,e.x,e.y,e.label);return t.textBlock.forEach(function(t){t.text=e.label}),Designer.painter.renderShape(t),this.tempShapeList[e.id]=t,Model.add(t,!1),t},renderLinkerByNode:function(e,t,r,o,i){var n={},a={},s=r.linkerLabel,p=r.lineStyle,l=Model.getShapeById(e),h=Model.getShapeById(t);"vertical"==AIDraw.controller.direction?(n.x=l.props.x-0+l.props.w/2,n.y=l.props.y-0+l.props.h,n.id=e,n.angle=1.5*Math.PI,a.x=h.props.x-0+h.props.w/2,a.y=h.props.y,a.id=t,a.angle=.5*Math.PI,o&&(n.x=l.props.x,n.y=l.props.y-0+l.props.h/2,n.angle=0,a.x=h.props.x,a.y=h.props.y-0+h.props.h/2,a.angle=0),0==i||o||1==i&&(n.x=l.props.x-0+l.props.w,n.y=l.props.y-0+l.props.h/2,n.angle=Math.PI)):(n.x=l.props.x-0+l.props.w,n.y=l.props.y-0+l.props.h/2,n.id=e,n.angle=Math.PI,a.x=h.props.x,a.y=h.props.y-0+h.props.h/2,a.id=t,a.angle=0,o&&(n.x=l.props.x-0+l.props.w/2,n.y=l.props.y,n.angle=.5*Math.PI,a.x=h.props.x-0+h.props.w/2,a.y=h.props.y,a.angle=.5*Math.PI),0==i||o||1==i&&(n.x=l.props.x-0+l.props.w/2,n.y=l.props.y-0+l.props.h,n.angle=1.5*Math.PI));var d=this.xxflowNormal.createLinker(n,a,s,p);return this.tempLinkerList.push(_objectSpread(_objectSpread({},d),{},{ifBack:o})),d},renderNodesByORGNode:function(e){var t=[],r=e.split("\n").map(function(e){return e.trim()}).filter(function(e,t){return""!==e&&e.indexOf("```")<0&&!e.match(/^##*#$/)&&(0!=t&&e.indexOf("#")>-1||0==t)});if(r){r.length>1&&r[0].indexOf("#")<0&&(r[0].indexOf(":")>-1||r[0].indexOf("：")>-1)&&0==(r[1].match(/^#+/g)||[""])[0].length&&r.splice(0,1);var o={name:r[0].replace(/^#{1}\s*/,""),id:Utils.newId(),children:[],parent:[],level:1};t.push(o);for(var i=[o],n=0,a=1;a<r.length;a++){var s=r[a],p=(s.match(/^#+/g)||[""])[0].length;if(p=r[0].indexOf("#")>-1?p:2==(r[1].match(/^#+/g)||[""])[0].length?p:p+1,n>2&&p<2)break;for(var l={name:s.replace(/^#+\s*/,""),id:Utils.newId(),children:[],parent:[]};i.length>0&&p<=i[i.length-1].level;)i.pop();if(i.length>0){var h=i[i.length-1];l.parent=[].concat(_toConsumableArray(h.parent),[h.id]),h.children.push(l.id)}l.level=p,i.push(l),t.push(l),n=Math.max(n,p)}var d=this.drawByORGNode(t);AIDraw.elements=AIDraw.controller.pRender.outputShapes(d)}},connects:{},tempShapeList:{},tempLinkerList:[],drawByORGNode:function(e){var t=this,r=[],o={x:100,y:100};return o.y=AIDraw.controller.maxY?AIDraw.controller.maxY-0+100:100,AIDraw.controller.startY=o.y,e.forEach(function(i,n){var a={type:"roundRectangle",text:i.name,id:i.id};if(1==i.level)a.x=o.x,a.y=o.y;else{var s=e[n-1],p=t.connects[s.id];if(s.level==i.level-1)a.x=p.x,a.y=p.y-0+100;else if(s.level>i.level)a.x=p.x-0+120,a.y=p.y-0-100*(s.level-i.level);else if(s.level==i.level){a.x=p.x-0+120,a.y=p.y;var l=i.parent;if(l.length>0)for(var h=function(){var r=l[d],o=Model.getShapeById(r),i=e.filter(function(e){return e.id==r})[0];if(i){var n=i.children;if(n.length>0){var s=n[0],p=Model.getShapeById(s).props.x;if(n.length>1){var h;if(t.connects[n[n.length-1]])h=(Model.getShapeById(n[n.length-1]).props.x-p)/2;else h=(a.x-p)/2;o.props.x=p+h}else 1==n.length&&(o.props.x=p)}}Designer.painter.renderShape(o);var c,f=Utils.getOutlinkers([o]),u=_createForOfIteratorHelper(f);try{for(u.s();!(c=u.n()).done;){var y=c.value,g=Model.getShapeById(y.from.id);y.from.x=g.props.x+g.props.w/2;var m=Model.getShapeById(y.to.id);y.to.x=m.props.x+m.props.w/2,y.lineStyle={endArrowStyle:"none"},Designer.painter.renderLinker(y,!0)}}catch(x){u.e(x)}finally{u.f()}AIDraw.util.updateMulti([o].concat(_toConsumableArray(f)))},d=l.length-1;d>=0;d--)h()}}t.connects[i.id]=a;var c=t.xxflowNormal.create(a.type,a.x,a.y,a.id);if(c.textBlock.forEach(function(e){e.text=a.text}),Designer.painter.renderShape(c),Model.add(c,!1),r.push(c),i.parent.length>0){var f=i.parent[i.parent.length-1],u={},y={},g=Model.getShapeById(f),m=Model.getShapeById(i.id);u.x=g.props.x-0+g.props.w/2,u.y=g.props.y-0+g.props.h,u.id=f,u.angle=1.5*Math.PI,y.x=m.props.x-0+m.props.w/2,y.y=m.props.y,y.id=i.id,y.angle=.5*Math.PI;var x=t.xxflowNormal.createLinker(u,y);r.push(x)}}),r},autoPosByText:function(e,t){try{for(var r=1;;r+=.1){e.props.w*=r,e.props.h*=r;var o=e.getTextBlock()[0].position,i=o.w,n=o.h,a=AIDraw.util.getTextPos(t,i).lineNum;if("decision"==e.name){if(16*a+16<n/2)break}else if(16*a+16<n)break}}catch(s){}},createByRole:function(e,t){this[e]&&"function"==typeof this[e].init&&this[e].init(t)},computeBtBorder:function(e){var t=e||Model.define.elements,r=0,o=0,i=Object.keys(t),n=t[i[0]]?t[i[0]].props.x:0,a=t[i[0]]?t[i[0]].props.y:0;for(var s in t){var p=t[s];if("linker"!=p.name){var l=Utils.getShapeBox(p),h=l.y+l.h;h&&h>r&&(r=h);var d=l.x+l.w;d&&d>o&&(o=d),n=Math.min(n,l.x),a=Math.min(a,l.y)}}return{maxX:o,maxY:r,minX:n,minY:a}},changeCanvas:function(e){var t=[];e.map(function(e){return t.push(e.id)});var r=Utils.getControlBox(t);Designer.op.changeCanvas(r)},hasLinkersByPos:function(e,t){var r;"bottom"==t?r=1.5*Math.PI:"top"==t?r=.5*Math.PI:"left"==t?r=0:"right"==t&&(r=Math.PI);var o,i=[],n=_createForOfIteratorHelper(Utils.getOutlinkers([e]));try{for(n.s();!(o=n.n()).done;){var a=o.value;(a.from.id==e.id&&Math.floor(a.from.angle)==Math.floor(r)||a.to.id==e.id&&Math.floor(a.to.angle)==Math.floor(r))&&i.push(a)}}catch(s){n.e(s)}finally{n.f()}return i},getCrossShapeIdsInrange:function(e,t){t=t||Model.define.elements;var r=[];for(var o in t){var i=t[o];"linker"!==i.name&&Utils.rectCross(e,i.props)&&r.push(o)}return r},renderLinkerByMermaid:function(e){for(var t,r,o,i=[{exp:/([<|x|o]?)-{2,}(([^-]+)-{1,}|-*)([>|x|o]?)/,type:"solid"},{exp:/([<|x|o]?)-\.((.+[^\.$])\.{1,}|\.*)-([>|x|o]?)/,type:"dashed"}],n={x:"cross",o:"solidCircle","<":"solidArrow",">":"solidArrow"},a=0;a<i.length;a++){var s=i[a];if(r=e.match(s.exp)){t=s.type;break}}if(!t)return!1;var p=e.split(r[0]),l=p[0].trim(),h=p[1].trim().replace(/;$/,"");if(r[3])o=r[3];else{var d=/\|(.*)\|/.exec(h);d&&(o=d[1],h=h.replace(d[0],"").trim())}return{nodeFrom:l,nodeTo:h,linkerLabel:o,lineStyle:{lineStyle:t,beginArrowStyle:""==r[1]?"none":n[r[1]],endArrowStyle:""==r[4]?"none":n[r[4]]}}},getNodeByTxt:function(e){for(var t,r="",o="",i="",n=[{exp:/\|(.*)\|/,type:"linkerLabel"},{exp:/\({3}(.*)\){3}/,type:"round"},{exp:/\[{2}(.*)\]{2}/,type:"predefinedProcess"},{exp:/\({2}(.*)\){2}/,type:"onPageReference"},{exp:/\{{2}(.*)\}{2}/,type:"preparation"},{exp:/\(\[(.*)\]\)/,type:"terminator"},{exp:/\[(.*)\]/,type:"process"},{exp:/\((.*)\)/,type:"roundRectangle"},{exp:/\[\((.*)\)\]/,type:"horizontalDirectData"},{exp:/\>(.*)\]/,type:"receiveSignal"},{exp:/\{(.*)\}/,type:"decision"},{exp:/\[\/(.*)\/\]/,type:"data"},{exp:/\[\\(.*)\\\]/,type:"data"},{exp:/\[\/(.*)\\\]/,type:"manualOperation"},{exp:/\[\\(.*)\/\]/,type:"manualOperation"}],a=0;a<n.length;a++){var s=n[a];if(t=s.exp.exec(e)){r=t[1],o=e.replace(t[0],"").trim(),i=s.type,this.shapeNodes.push({id:o,label:r,type:i});break}}if(!t){var p=this.shapeNodes.filter(function(t){return t.id==e});if(p.length>0)return p[0];r=e||"",o=e,i=""}return{id:o,label:r,type:i}}},server:{post:function(e,t,r){function o(t){var r=memberObj.userId;""!==AIDraw.controller.renderType&&("PO"==AIDraw.controller.renderType||("Mermaid"==AIDraw.controller.renderType||("ORG"==AIDraw.controller.renderType||("MermaidSequence"==AIDraw.controller.renderType||("MermaidClass"==AIDraw.controller.renderType||AIDraw.controller.renderType)))));var o=new WebSocket(AIDraw.config.url);o.onopen=function(){if(1==o.readyState){AIDraw.controller.preRender(e);var i=location.port||location.href.indexOf("192.168.10.")>-1?{prompt:e,type:AIDraw.controller.renderType,uid:r,http:!0}:{prompt:e,type:AIDraw.controller.renderType,uid:r,http:!0,useInfo:t};AIDraw.controller.ifPause?o.close():o.send(JSON.stringify(i))}},o.onerror=function(e){AIDraw.controller.ifPause||$.toast({type:"error",text:"AI绘图服务异常，请稍后再试"}),o.close()},o.onclose=function(){$.loading("close"),AIDraw.controller.ifPause||(document.querySelector("#po-tool-ai-button").querySelector("ul").style.display="none"),AIDraw.controller.creating=!1,AIDraw.controller.afterLoaded()},o.onmessage=function(e){var t;e=null===(t=e)||void 0===t?void 0:t.data;if(AIDraw.controller.ifPause)o.close(),document.querySelector("#po-tool-ai-button").querySelector("ul").style.display="none";else if(""==e.trim()||e.startsWith("{msg:")){if(e.indexOf("{msg:")>=0){var r;e.indexOf("{msg:overed")>=0?r="今日请求数已满，请明天再试":e.indexOf("{msg:uid")>=0?r="当前用户无访问权限，请稍后重试":e.indexOf("{msg:error")>=0?r="AI绘图服务异常，请稍后再试":e.indexOf("{msg:sens")>=0?r="关键词有敏感字符，请修改后重试":(e.indexOf("{msg:用户鉴权失败")>=0||e.indexOf("{msg:userOauthError")>=0||e.indexOf("{msg:用户信息错误")>=0||e.indexOf("{msg:userInfoError")>=0)&&(r="请求失败"),r&&$.toast({type:"error",text:r}),o.close(),document.querySelector("#po-tool-ai-button").querySelector("ul").style.display="none"}}else{var i,n;e=JSON.parse(e),Designer.setZoomScale(1);var a=null!==(i=null===(n=e)||void 0===n||null===(n=n.message)||void 0===n?void 0:n.content)&&void 0!==i?i:"";a.indexOf("```")>-1&&(a=a.substring(a.indexOf("```")+4,a.lastIndexOf("```")));var s=Model.define.page.height;switch(AIDraw.controller.defaultShapes=Model.define.elements,AIDraw.controller.renderType){case"MermaidSequence":AIDraw.controller.mermaidSequence.render(a);break;case"ORG":AIDraw.controller.renderNodesByORGNode(a);break;case"MermaidClass":AIDraw.controller.mermaidClass.render(a);break;case"MermaidTimeLine":AIDraw.controller.mermaidTimeLine.render(a);break;default:AIDraw.controller.renderNodesByMermaid(a)}AIDraw.controller.ifPause||(AIDraw.controller.ifPause=!0,Model.addMulti(AIDraw.elements),AIDraw.controller.changeCanvas(AIDraw.elements),AIDraw.elements=[],AIDraw.controller.startY<s&&AIDraw.controller.startY<=Model.define.page.height-$("#designer_layout").height()?$("#designer_layout").scrollTop(Designer.config.pageMargin-10+AIDraw.controller.startY):$("#designer_layout").scrollTop(Designer.config.pageMargin-10+Model.define.page.height-$("#designer_layout").height()),$("#designer_layout").scrollLeft(Designer.config.pageMargin-10))}}}e&&"undefined"!=typeof memberObj&&poAjax({type:"GET",success:function(e){if(!AIDraw.controller.creating){$.loading({text:"AI作图中"}),AIDraw.controller.creating=!0,AIDraw.controller.clearAiDrawData();var t=[];Schema.categories.forEach(function(e){t.push(e.name)});for(var r={js:[]},i=!1,n=0,a=["basic","flow","uml_sequence","uml_class","uml_common","uml_component","uml_deployment","uml_stateactivity","uml_usecase","evc"];n<a.length;n++){var s=a[n];t.indexOf(s)<0&&(i=!0,r.js.push(staticBasePath+"/diagrams/categories/"+s+".js"))}i?bigPipe.render(r,function(){Schema.init(!0),o(e)}):o(e)}},error:function(e){AIDraw.controller.afterLoaded()}},"getAIUseInfo")}},util:{newId:function(){return Utils.randomString(10)+Utils.randomNumber(6)},copy:function(e){return $.extend(!0,{},e)},copyArray:function(e){return $.extend(!0,[],e)},getTextPos:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal 13px 微软雅黑",o=document.createElement("canvas").getContext("2d");o.font=r;var i=o.measureText(e).width,n=1;return t&&""!==t&&(n=Math.ceil(Math.ceil(i)/Math.floor(t))),{width:i,lineNum:n}},update:function(e){this.updateMulti([e])},updateMulti:function(e){for(var t=0;t<e.length;t++){var r=e[t];Model.define.elements[r.id]&&(Model.define.elements[r.id]=Utils.copy(r))}},layerShapes:function(e){var t=Utils.getSelected();if(0!=t.length&&e){var r;if(t.sort(function(e,t){return e.props.zindex-t.props.zindex}),"back"==e){r=Model.orderList[0].zindex;for(var o=t.length-1;o>=0;o--){r-=1,t[o].props.zindex=r}}this.updateMulti(t)}}}};window.AIDraw=AIDraw,AIDraw.controller.initEntry();
},{}],"iNYO":[function(require,module,exports) {
var Designer=window.Designer,Model=window.Model,PageModel=window.PageModel,Utils=window.Utils,$=window.$,definition={comments:[{shapeId:"xOlkwPnRMe297445",name:"zss",replyId:"",id:"GLosaMPVhB796174",time:1640681147437,userId:"5c98469ae4b02ce2e89aef17",content:"233"}],elements:{rQaTFDpILn754942:{parent:"",link:"",shapeStyle:{alpha:1},textBlock:[{position:{w:"w-20",x:10,h:"h",y:0},text:""}],anchors:[{x:"w/2",y:"0"},{x:"w/2",y:"h"},{x:"0",y:"h/2"},{x:"w",y:"h/2"}],title:"矩形",fontStyle:{},dataAttributes:[{name:"序号",id:"phBjstmfma666276",type:"number",category:"default",value:""},{name:"名称",id:"ltiNEtozoX631307",type:"string",category:"default",value:""},{name:"所有者",id:"bBMTELYEsi267358",type:"string",category:"default",value:""},{name:"连接",id:"MHEIKCpMZQ852304",type:"link",category:"default",value:""},{name:"便笺",id:"RPliJyTJqx047948",type:"string",category:"default",value:""}],props:{zindex:1,w:100,x:224.81817626953125,h:70,y:176.81817626953125,angle:0},path:[{actions:[{x:"0",action:"move",y:"0"},{x:"w",action:"line",y:"0"},{x:"w",action:"line",y:"h"},{x:"0",action:"line",y:"h"},{action:"close"}]}],lineStyle:{},children:[],resizeDir:["tl","tr","br","bl"],name:"rectangle",fillStyle:{},theme:{},id:"rQaTFDpILn754942",attribute:{container:!1,rotatable:!0,visible:!0,collapsable:!1,collapsed:!1,linkable:!0,markerOffset:5},category:"basic",locked:!1,group:""},nJsoSoGzSv656517:{linkerType:"broken",lineStyle:{},name:"linker",from:{x:324.81817626953125,y:211.81817626953125,angle:3.141592653589793,id:"rQaTFDpILn754942"},id:"nJsoSoGzSv656517",text:"",to:{x:479.81817626953125,y:211.81817626953125,angle:0,id:"xOlkwPnRMe297445"},locked:!1,group:"",points:[{x:402.31817626953125,y:211.81817626953125},{x:402.31817626953125,y:211.81817626953125}],dataAttributes:[],props:{zindex:2}},xOlkwPnRMe297445:{parent:"",link:"",shapeStyle:{alpha:1},textBlock:[{position:{w:"w-20",x:10,h:"h",y:0},text:""}],anchors:[{x:"w/2",y:"0"},{x:"w/2",y:"h"},{x:"0",y:"h/2"},{x:"w",y:"h/2"}],title:"矩形",fontStyle:{},dataAttributes:[{horizontal:"mostright",showName:!0,name:"序号",showType:"text",vertical:"mostbottom",id:"LaiYNFFbKM482561",type:"number",category:"default",value:"123"},{name:"名称",id:"CifiRDahWR914306",type:"string",category:"default",value:""},{name:"所有者",id:"ZjgdzGjmuw642921",type:"string",category:"default",value:""},{name:"连接",id:"lcGGuiMUuW259341",type:"link",category:"default",value:""},{name:"便笺",id:"jBWzVAlpBM555597",type:"string",category:"default",value:""}],props:{zindex:3,w:100,x:479.81817626953125,h:70,y:176.81817626953125,angle:0},path:[{actions:[{x:"0",action:"move",y:"0"},{x:"w",action:"line",y:"0"},{x:"w",action:"line",y:"h"},{x:"0",action:"line",y:"h"},{action:"close"}]}],lineStyle:{},children:[],resizeDir:["tl","tr","br","bl"],name:"rectangle",fillStyle:{},theme:{},id:"xOlkwPnRMe297445",attribute:{container:!1,rotatable:!0,visible:!0,collapsable:!1,collapsed:!1,linkable:!0,markerOffset:5},category:"basic",locked:!1,group:""}},theme:{},page:{padding:20,backgroundColor:"transparent",orientation:"portrait",gridSize:15,watermark:"",width:1554,showGrid:!0,lineJumps:!1,height:1640}};Designer.events.addEventListener("randerComplete",function(e){"down"==Util.getUrlParams("action")&&setTimeout(function(){var e=Util.getUrlParams("type");$("#header-export").trigger("click"),$("#header-export-menu li[type="+e+"]").trigger("click")},500),window.exportCanHandle.status=!0,$("#load_mask").remove(),Designer.events.push("renderSvgCharts"),buried_point_fn("page_visit","流程图编辑器",{"文件类型":chartObj.category,"文件属性":role="私人文件"},!1,"process"),injectExtraAsynCall("onRanderComplete")}),Designer.events.addEventListener("initialized",function(e){var r=e.chartObj,t=e.chartDefIds;function o(){window.configCollaSave&&configCollaSave.init(deviceType,fileType)}localRuntime?(Designer.open(definition),o()):(o(),PageModel.list=t,PageModel.build(),PageModel.mainId=e.mainCanvasId,Designer.renderPage(PageModel.mainId,e.def,!0),Designer.initialize.canvasSizeAuto(),null==r.schema&&(r.schema=[]),UI.setSchema(r.schema,!0),r&&"viewer"==r.collaRole&&(r.orgId?window.location.href="/preview/"+chartId:Designer.setReadonly(!0)),$("#header-rename").html(r.title),$("title").html(r.title+"-ProcessOn"),r.owner&&r.owner.userId!=userObj.userId&&$("#po-publish-button").remove(),insert.share.init({isHide:!0})),window.localStorage.removeItem("clipboard")}),Designer.events.addEventListener("create",function(e){});var createdTip=!1;Designer.events.addEventListener("created",function(e){createdTip&&(UI.showStartStep("created",$("#"+e.id)),createdTip=!1),setTimeout(function(){Designer.events.push("renderSvgCharts")})}),Designer.events.addEventListener("linkerCreating",function(e){}),Designer.events.addEventListener("resetBrokenLinker",function(e){var r=Model.define.page.lineJumps;if(null==r||0!=r||1!=e){if(e!=r&&null!=r&&(null!=e||0!=r)){var t=Model.orderList.length;if(t>400)return Model.intersection={},void(t<=1e3&&$.toast({type:"warning",text:"图形过多不能显示跨线",delay:5e3}));var o={};for(I=0,B=(D=Model.getLinkers("broken")).length;I<B;I++){o[(U=D[I]).id]=Utils.getLinesFromLinker(U)}var n=[];for(var a in o){var p=o[a];for(var i in o){var s=o[i];for(I=0;I<p.length;I++)for(var l=p[I],h={x:l.x1,y:l.y1},d={x:l.x2,y:l.y2},c=0;c<s.length;c++){var g={},u=s[c],m={x:u.x1,y:u.y1},f={x:u.x2,y:u.y2};if(Utils.checkCross(h,d,m,f)){var v=Utils.intersection(h,d,m,f);if(Math.abs(v.x-h.x)<12&&Math.abs(v.y-h.y)<8)continue;if(Math.abs(v.x-d.x)<12&&Math.abs(v.y-d.y)<8)continue;if(Math.abs(v.x-m.x)<20&&Math.abs(v.y-m.y)<8)continue;if(Math.abs(v.x-f.x)<20&&Math.abs(v.y-f.y)<8)continue;v.y=Math.round(v.y);var y=a;h.y!=d.y&&m.y==f.y&&(y=i,c);var S=!1;if(n.length>0)for(var w=0;w<n.length;w++){var x=n[w];if(x.curveId&&x.curveId==y){g=x,S=!0;break}}null==g.points&&(g.points=[]),g.points.push(v),S||(g.curveId=y,n.push(g))}}}}var b=Utils.copy(Model.intersection);if(Model.intersection={},n.length>0)for(I=0;I<n.length;I++){var M=n[I];U=Model.getShapeById(M.curveId);M.points=M.points.sort(function(e,r){return e.x<r.x?-1:e.x>r.x?1:void 0});var L=[];for(c=0;c<M.points.length;c++)-1==L.indexOf(M.points[c].x+","+M.points[c].y)?L.push(M.points[c].x+","+M.points[c].y):(M.points.splice(c,1),c--);Designer.painter.renderLinker(U,null,null,M),Model.intersection[M.curveId]=M}if(!$.isEmptyObject(b))for(var a in b){if(null==Model.intersection[a])null!=(U=Model.getShapeById(a))&&Designer.painter.renderLinker(U)}n={},o=null}}else for(var D,I=0,B=(D=Model.getLinkers("broken")).length;I<B;I++){var U=D[I];Designer.painter.renderLinker(U),Model.intersection={}}}),Designer.events.addEventListener("changeLinkers",function(e){Designer.events.push("resetBrokenLinker")}),Designer.events.addEventListener("linkerCreated",function(e){Designer.events.push("resetBrokenLinker")}),Designer.events.addEventListener("setDefaultStyle",function(e){UI.setDefaultStyle(e)}),Designer.events.addEventListener("selectChanged",function(){if(UI.update(),Dock.isOpen&&("shape"==Dock.openView||"page"==Dock.openView)){var e=Utils.getSelectedIds()||[];e&&0==e.length?Dock.show("page"):Dock.show("shape")}Dock.update(),Navigator.update(),UI.showShapeOptions(),UI.showShapeCount()}),Designer.events.addEventListener("clipboardChanged",function(e){e>0?$("#header-edit-menu").children("li[ac=paste]").menuitem("enable"):$("#header-edit-menu").children("li[ac=paste]").menuitem("disable")}),Designer.events.addEventListener("undoStackChanged",function(e){0==e?($("#header-edit-menu").children("li[ac=undo]").menuitem("disable"),$("#po-flow-undo").button("disable")):($("#header-edit-menu").children("li[ac=undo]").menuitem("enable"),$("#po-flow-undo").button("enable"))}),Designer.events.addEventListener("redoStackChanged",function(e){0==e?($("#header-edit-menu").children("li[ac=redo]").menuitem("disable"),$("#po-flow-redo").button("disable")):($("#header-edit-menu").children("li[ac=redo]").menuitem("enable"),$("#po-flow-redo").button("enable"))}),Designer.events.addEventListener("beforeResize",function(e){var r=e.shapes,t=e.minSize,o=e.dir;if(1==r.length){var n=r[0];if("verticalPool"==n.name){if("b"==o){for(var a=0,p=0,i=0,s=0,l=0,h=0;h<n.children.length;h++){var d=n.children[h];"horizontalSeparator"==(x=Model.getShapeById(d)).name&&(l++,a+=x.props.h,x.props.y>p&&(p=x.props.y,i=x.props.h)),"verticalLane"==x.name&&(s=x.props.height[0])}0==a?(a+=s,a+=n.props.height[0],a+=20):a+=1==l?n.props.height[0]-i+s+30:n.props.height[0]-i+50,t.h=a}else if("l"==o||"r"==o){var c=20,g=null,u=(l=0,0);for(h=0;h<n.children.length;h++){d=n.children[h];"horizontalSeparator"==(x=Model.getShapeById(d)).name?(u=x.props.height[0],l++):"verticalLane"==x.name&&((null==g||x.props.x<g.props.x&&"l"==o||x.props.x>g.props.x&&"r"==o)&&(g=x),c+=x.props.w)}null!=g&&(c-=g.props.w),l>0&&(c+=u),t.w=c}else if("bl"==o||"br"==o){for(a=0,c=20,p=0,i=0,s=0,l=0,u=0,h=0;h<n.children.length;h++){d=n.children[h];"horizontalSeparator"==(x=Model.getShapeById(d)).name?(u=x.props.height[0],l++,a+=x.props.h,x.props.y>p&&(p=x.props.y,i=x.props.h)):"verticalLane"==x.name&&((null==g||x.props.x<g.props.x&&"bl"==o||x.props.x>g.props.x&&"br"==o)&&(g=x),c+=x.props.w,s=x.props.height[0])}0==a?(a+=s,a+=n.props.height[0],a+=20):a+=1==l?n.props.height[0]-i+s+30:n.props.height[0]-i+50,null!=g&&(c-=g.props.w),l>0&&(c+=u),t.w=c,t.h=a}}else if("verticalLane"==n.name&&"b"==o){a=0,g=n,p=0,i=0,l=0;var m=Model.getShapeById(g.parent);for(h=0;h<m.children.length;h++){d=m.children[h];"horizontalSeparator"==(x=Model.getShapeById(d)).name&&(l++,a+=x.props.h,x.props.y>p&&(p=x.props.y,i=x.props.h))}0==a||1==l?a=g.props.height[0]+30:a+=60-i,t.h=a}else if("horizontalSeparator"==n.name&&"b"==o){a=0;var f=n,v=99999999999;for(s=0,m=Model.getShapeById(f.parent),h=0;h<m.children.length;h++){d=m.children[h];"horizontalSeparator"==(x=Model.getShapeById(d)).name&&x.props.y<v&&(v=x.props.y),"verticalLane"==x.name&&(s=x.props.height[0])}n.props.y==v&&(t.h=s+60)}else if("horizontalPool"==n.name){if("r"==o){c=0;var y=0,S=0;for(s=0,l=0,h=0;h<n.children.length;h++){d=n.children[h];"verticalSeparator"==(x=Model.getShapeById(d)).name&&(l++,c+=x.props.w,x.props.x>y&&(y=x.props.x,S=x.props.w)),"horizontalLane"==x.name&&(s=x.props.height[0])}0==c?(c+=s,c+=n.props.height[0],c+=20):c+=1==l?n.props.height[0]-S+s+30:n.props.height[0]-S+50,t.w=c}else if("t"==o||"b"==o){for(a=20,g=null,l=0,u=0,h=0;h<n.children.length;h++){d=n.children[h];"verticalSeparator"==(x=Model.getShapeById(d)).name?(u=x.props.height[0],l++):"horizontalLane"==x.name&&((null==g||x.props.y<g.props.y&&"t"==o||x.props.y>g.props.y&&"b"==o)&&(g=x),a+=x.props.h)}null!=g&&(a-=g.props.h),l>0&&(a+=u),t.h=a}else if("tr"==o||"br"==o){for(c=0,y=0,S=0,s=0,l=0,a=20,g=null,u=0,h=0;h<n.children.length;h++){d=n.children[h];"verticalSeparator"==(x=Model.getShapeById(d)).name?(u=x.props.height[0],l++,c+=x.props.w,x.props.x>y&&(y=x.props.x,S=x.props.w)):"horizontalLane"==x.name&&(s=x.props.height[0],(null==g||x.props.y<g.props.y&&"tr"==o||x.props.y>g.props.y&&"br"==o)&&(g=x),a+=x.props.h)}0==c?(c+=s,c+=n.props.height[0],c+=20):c+=1==l?n.props.height[0]-S+s+30:n.props.height[0]-S+50,null!=g&&(a-=g.props.h),l>0&&(a+=u),t.h=a,t.w=c}}else if("verticalSeparator"==n.name&&"r"==o){c=0,f=n;var w=99999999999;for(s=0,m=Model.getShapeById(f.parent),h=0;h<m.children.length;h++){d=m.children[h];"verticalSeparator"==(x=Model.getShapeById(d)).name&&x.props.x<w&&(w=x.props.x),"horizontalLane"==x.name&&(s=x.props.height[0])}n.props.x==w&&(t.w=s+60)}else if("horizontalLane"==n.name&&"r"==o){for(c=0,g=n,y=0,S=0,l=0,m=Model.getShapeById(g.parent),h=0;h<m.children.length;h++){var x;d=m.children[h];"verticalSeparator"==(x=Model.getShapeById(d)).name&&(l++,c+=x.props.w,x.props.x>y&&(y=x.props.x,S=x.props.w))}0==c||1==l?c=g.props.height[0]+30:c+=60-S,t.w=c}else["cls","cls_","interface","combinedFragment","package","enumeration"].indexOf(n.name)>-1&&(t.h=80)}}),Designer.events.addEventListener("resizing",function(e){var r=e.shape,t=e.dir,o=e.offset,n=[];if("verticalPool"==r.name){if("b"==t){for(var a=0,p=0;p<r.children.length;p++){var i=r.children[p];"verticalLane"!=(g=Model.getShapeById(i)).name&&"verticalSeparatorBar"!=g.name||(g.props.h=r.props.h-r.props.height[0],Designer.painter.renderShape(g),n.push(g)),"horizontalSeparator"==g.name&&g.props.y>a&&(a=g.props.y,b=g)}b&&(b.props.h=r.props.y+r.props.h-b.props.y,Designer.painter.renderShape(b),n.push(b))}else if("r"==t){if(r.children&&r.children.length>0){var s=null,l=Utils.getLanesByPool(r),h=[],d=0,c=l.reduce(function(e,r){return e+r.props.w},0);for(p=0;p<r.children.length;p++){i=r.children[p];"horizontalSeparator"==(g=Model.getShapeById(i)).name&&(g.props.w=r.props.w,Designer.painter.renderShape(g),n.push(g))}if(l.length>1){l.map(function(e,r){if(r!=l.length-1){var t=e.props.w/c*o.w;d+=t,h.push(t)}else h.push(o.w-d)}),d=0;for(p=0;p<l.length;p++)(s=Model.getShapeById(l[p].id)).props.w+=h[p],s.props.x+=d,d+=h[p],Designer.painter.renderShape(s),n.push(s)}else l.length&&((s=Model.getShapeById(l[0].id)).props.w+=o.w,Designer.painter.renderShape(s),n.push(s))}}else if("l"==t){if(r.children&&r.children.length>0){for(s=null,l=Utils.getLanesByPool(r),h=[],d=0,c=l.reduce(function(e,r){return e+r.props.w},0),p=0;p<r.children.length;p++){i=r.children[p];"horizontalSeparator"==(g=Model.getShapeById(i)).name?(g.props.x+=o.x,g.props.w+=o.w,Designer.painter.renderShape(g),n.push(g)):"verticalSeparatorBar"==g.name&&(g.props.x+=o.x,Designer.painter.renderShape(g),n.push(g))}if(l.length>1){l.map(function(e,r){if(r!=l.length-1){var t=e.props.w/c*o.w;d+=t,h.push(t)}else h.push(o.w-d)}),d=o.w;for(p=0;p<l.length;p++)(s=Model.getShapeById(l[p].id)).props.w+=h[p],s.props.x-=d,d-=h[p],Designer.painter.renderShape(s),n.push(s)}else l.length&&((s=Model.getShapeById(l[0].id)).props.w+=o.w,s.props.x+=o.x,Designer.painter.renderShape(s),n.push(s))}}else if("br"==t){for(a=0,s=null,p=0;p<r.children.length;p++){i=r.children[p];var g=Model.getShapeById(i);l=Utils.getLanesByPool(r),h=[],d=0,c=l.reduce(function(e,r){return e+r.props.w},0);"verticalSeparatorBar"==g.name&&(g.props.h=r.props.h-r.props.height[0],Designer.painter.renderShape(g),n.push(g)),"horizontalSeparator"==g.name&&(g.props.w=r.props.w,g.props.y>a&&(a=g.props.y,b=g),Designer.painter.renderShape(g),n.push(g))}if(b&&(b.props.h=r.props.y+r.props.h-b.props.y,Designer.painter.renderShape(b),n.push(b)),l.length>1){l.map(function(e,r){if(r!=l.length-1){var t=e.props.w/c*o.w;d+=t,h.push(t)}else h.push(o.w-d)}),d=0;for(p=0;p<l.length;p++)(s=Model.getShapeById(l[p].id)).props.h=r.props.h-r.props.height[0],s.props.w+=h[p],s.props.x+=d,d+=h[p],Designer.painter.renderShape(s),n.push(s)}else l.length&&((s=Model.getShapeById(l[0].id)).props.h=r.props.h-r.props.height[0],s.props.w+=o.w,Designer.painter.renderShape(s),n.push(s))}else if("bl"==t){for(a=0,s=null,p=0;p<r.children.length;p++){i=r.children[p],g=Model.getShapeById(i),l=Utils.getLanesByPool(r),h=[],d=0,c=l.reduce(function(e,r){return e+r.props.w},0);"verticalSeparatorBar"==g.name&&(g.props.x+=o.x,g.props.h=r.props.h-r.props.height[0],Designer.painter.renderShape(g),n.push(g)),"horizontalSeparator"==g.name&&(g.props.x+=o.x,g.props.w+=o.w,g.props.y>a&&(a=g.props.y,b=g),Designer.painter.renderShape(g),n.push(g))}if(b&&(b.props.h=r.props.y+r.props.h-b.props.y,Designer.painter.renderShape(b),n.push(b)),l.length>1){l.map(function(e,r){if(r!=l.length-1){var t=e.props.w/c*o.w;d+=t,h.push(t)}else h.push(o.w-d)}),d=o.w;for(p=0;p<l.length;p++)(s=Model.getShapeById(l[p].id)).props.h=r.props.h-r.props.height[0],s.props.w+=h[p],s.props.x-=d,d-=h[p],Designer.painter.renderShape(s),n.push(s)}else l.length&&((s=Model.getShapeById(l[0].id)).props.h=r.props.h-r.props.height[0],s.props.w+=o.w,s.props.x+=o.x,Designer.painter.renderShape(s),n.push(s))}}else if("verticalLane"==r.name){if(n=[M=Model.getShapeById(r.parent)],M.props.w+=o.w,M.props.h=r.props.h+M.props.height[0],M.props.x+=o.x,Designer.painter.renderShape(M),"r"==t){var u=[],m=Model.getPersistenceById(r.id);for(p=0;p<M.children.length;p++){if((i=M.children[p])!=r.id){var f=Model.getPersistenceById(i);"horizontalSeparator"==(g=Model.getShapeById(i)).name?(g.props.w+=o.w,Designer.painter.renderShape(g),n.push(g)):f.props.x>m.props.x&&"verticalLane"==f.name&&u.push(g)}}if(u.length>0){var v=Utils.getContainedShapes(u),y=Utils.getOutlinkers(v);v=v.concat(y),u=u.concat(v),Designer.op.moveShape(u,{x:o.w,y:0}),n=n.concat(u)}}else if("b"==t){for(a=0,p=0;p<M.children.length;p++){if((i=M.children[p])!=r.id)"verticalLane"!=(g=Model.getShapeById(i)).name&&"verticalSeparatorBar"!=g.name||(g.props.h=r.props.h,Designer.painter.renderShape(g),n.push(g)),"horizontalSeparator"==g.name&&g.props.y>a&&(a=g.props.y,b=g)}b&&(b.props.h=r.props.y+r.props.h-b.props.y,Designer.painter.renderShape(b),n.push(b))}else if("l"==t){for(u=[],m=Model.getPersistenceById(r.id),p=0;p<M.children.length;p++){if((i=M.children[p])!=r.id){f=Model.getPersistenceById(i);"horizontalSeparator"==(g=Model.getShapeById(i)).name?(g.props.x+=o.x,g.props.w+=o.w,Designer.painter.renderShape(g),n.push(g)):"verticalSeparatorBar"==g.name?(g.props.x+=o.x,Designer.painter.renderShape(g),n.push(g)):f.props.x<m.props.x&&"verticalLane"==f.name&&u.push(g)}}if(u.length>0){v=Utils.getContainedShapes(u),y=Utils.getOutlinkers(v);v=v.concat(y),u=u.concat(v),Designer.op.moveShape(u,{x:o.x,y:0}),n=n.concat(u)}}}else if("horizontalSeparator"==r.name){n=[M=Model.getShapeById(r.parent)],M.props.h+=o.h,Designer.painter.renderShape(M);for(p=0;p<M.children.length;p++){i=M.children[p],g=Model.getShapeById(i);i!=r.id&&("horizontalSeparator"!=g.name?(g.props.h+=o.h,Designer.painter.renderShape(g),n.push(g)):g.props.y>r.props.y&&(g.props.y+=o.h,Designer.painter.renderShape(g),n.push(g)))}}else if("horizontalPool"==r.name){if("r"==t){var S=0;for(p=0;p<r.children.length;p++){i=r.children[p];"horizontalLane"!=(g=Model.getShapeById(i)).name&&"horizontalSeparatorBar"!=g.name||(g.props.w=r.props.w-r.props.height[0],Designer.painter.renderShape(g),n.push(g)),"verticalSeparator"==g.name&&g.props.x>S&&(S=g.props.x,b=g)}b&&(b.props.w=r.props.x+r.props.w-b.props.x,Designer.painter.renderShape(b),n.push(b))}else if("b"==t){if(r.children&&r.children.length>0){s=null,l=Utils.getLanesByPool(r),h=[];var w=0,x=l.reduce(function(e,r){return e+r.props.h},0);for(p=0;p<r.children.length;p++){i=r.children[p];"verticalSeparator"==(g=Model.getShapeById(i)).name&&(g.props.h=r.props.h,Designer.painter.renderShape(g),n.push(g))}if(l.length>1){l.map(function(e,r){if(r!=l.length-1){var t=e.props.h/x*o.h;w+=t,h.push(t)}else h.push(o.h-w)}),w=0;for(p=0;p<l.length;p++)(s=Model.getShapeById(l[p].id)).props.h+=h[p],s.props.y+=w,w+=h[p],Designer.painter.renderShape(s),n.push(s)}else l.length&&((s=Model.getShapeById(l[0].id)).props.h+=o.h,Designer.painter.renderShape(s),n.push(s))}}else if("t"==t){if(r.children&&r.children.length>0){for(s=null,l=Utils.getLanesByPool(r),h=[],w=0,x=l.reduce(function(e,r){return e+r.props.h},0),p=0;p<r.children.length;p++){i=r.children[p];"verticalSeparator"==(g=Model.getShapeById(i)).name?(g.props.y+=o.y,g.props.h+=o.h,Designer.painter.renderShape(g),n.push(g)):"horizontalSeparatorBar"==g.name&&(g.props.y+=o.y,Designer.painter.renderShape(g),n.push(g))}if(l.length>1){l.map(function(e,r){if(r!=l.length-1){var t=e.props.h/x*o.h;w+=t,h.push(t)}else h.push(o.h-w)}),w=o.h;for(p=0;p<l.length;p++)(s=Model.getShapeById(l[p].id)).props.h+=h[p],s.props.y-=w,w-=h[p],Designer.painter.renderShape(s),n.push(s)}else l.length&&((s=Model.getShapeById(l[0].id)).props.h+=o.h,s.props.y+=o.y,Designer.painter.renderShape(s),n.push(s))}}else if("br"==t){for(S=0,s=null,p=0;p<r.children.length;p++){i=r.children[p];"horizontalLane"!=(g=Model.getShapeById(i)).name&&"horizontalSeparatorBar"!=g.name||(g.props.w=r.props.w-r.props.height[0],"horizontalLane"==g.name&&(null==s||g.props.y>s.props.y)&&(s=g),Designer.painter.renderShape(g),n.push(g)),"verticalSeparator"==g.name&&(g.props.h=r.props.h,g.props.x>S&&(S=g.props.x,b=g),Designer.painter.renderShape(g),n.push(g))}null!=s&&(s.props.h+=o.h,Designer.painter.renderShape(s),n.push(s)),b&&(b.props.w=r.props.x+r.props.w-b.props.x,Designer.painter.renderShape(b),n.push(b))}else if("tr"==t){for(S=0,s=null,p=0;p<r.children.length;p++){i=r.children[p];"horizontalSeparatorBar"==(g=Model.getShapeById(i)).name&&(g.props.w=r.props.w-r.props.height[0],g.props.y+=o.y,Designer.painter.renderShape(g),n.push(g)),"horizontalLane"==g.name&&(g.props.w=r.props.w-r.props.height[0],(null==s||g.props.y<s.props.y)&&(s=g),Designer.painter.renderShape(g),n.push(g)),"verticalSeparator"==g.name&&(g.props.y+=o.y,g.props.h+=o.h,g.props.x>S&&(S=g.props.x,b=g),Designer.painter.renderShape(g),n.push(g))}null!=s&&(s.props.h+=o.h,s.props.y+=o.y,Designer.painter.renderShape(s),n.push(s)),b&&(b.props.w=r.props.x+r.props.w-b.props.x,Designer.painter.renderShape(b),n.push(b))}}else if("horizontalLane"==r.name){if(n=[M=Model.getShapeById(r.parent)],M.props.h+=o.h,M.props.w+=o.w,M.props.y+=o.y,Designer.painter.renderShape(M),"r"==t){var b;for(S=0,p=0;p<M.children.length;p++){if((i=M.children[p])!=r.id)"horizontalLane"!=(g=Model.getShapeById(i)).name&&"horizontalSeparatorBar"!=g.name||(g.props.w=r.props.w,Designer.painter.renderShape(g),n.push(g)),"verticalSeparator"==g.name&&g.props.x>S&&(S=g.props.x,b=g)}b&&(b.props.w=r.props.x+r.props.w-b.props.x,Designer.painter.renderShape(b),n.push(b))}else if("b"==t){for(u=[],m=Model.getPersistenceById(r.id),p=0;p<M.children.length;p++){if((i=M.children[p])!=r.id){f=Model.getPersistenceById(i);"verticalSeparator"==(g=Model.getShapeById(i)).name?(g.props.h+=o.h,Designer.painter.renderShape(g),n.push(g)):f.props.y>m.props.y&&"horizontalLane"==f.name&&u.push(g)}}if(u.length>0){v=Utils.getContainedShapes(u),y=Utils.getOutlinkers(v);v=v.concat(y),u=u.concat(v),Designer.op.moveShape(u,{x:0,y:o.h}),n=n.concat(u)}}else if("t"==t){for(u=[],m=Model.getPersistenceById(r.id),p=0;p<M.children.length;p++){if((i=M.children[p])!=r.id){f=Model.getPersistenceById(i);"verticalSeparator"==(g=Model.getShapeById(i)).name?(g.props.y+=o.y,g.props.h+=o.h,Designer.painter.renderShape(g),n.push(g)):"horizontalSeparatorBar"==g.name?(g.props.y+=o.y,Designer.painter.renderShape(g),n.push(g)):f.props.y<m.props.y&&"horizontalLane"==f.name&&u.push(g)}}if(u.length>0){v=Utils.getContainedShapes(u),y=Utils.getOutlinkers(v);v=v.concat(y),u=u.concat(v),Designer.op.moveShape(u,{x:0,y:o.y}),n=n.concat(u)}}}else if("verticalSeparator"==r.name){var M;n=[M=Model.getShapeById(r.parent)],M.props.w+=o.w,Designer.painter.renderShape(M);for(p=0;p<M.children.length;p++){i=M.children[p],g=Model.getShapeById(i);i!=r.id&&("verticalSeparator"!=g.name?(g.props.w+=o.w,Designer.painter.renderShape(g),n.push(g)):g.props.x>r.props.x&&(g.props.x+=o.w,Designer.painter.renderShape(g),n.push(g)))}}return n}),Designer.events.addEventListener("beforeRemove",function(e){for(var r={},t=0;t<e.length;t++){r[(n=e[t]).id]=n}var o=[];for(t=0;t<e.length;t++){var n;if("verticalSeparatorBar"==(n=e[t]).name&&!r[n.parent]&&o.indexOf(n.id)<0)delete r[n.id];else if("horizontalSeparatorBar"==n.name&&!r[n.parent]&&o.indexOf(n.id)<0)delete r[n.id];else if("horizontalSeparator"==n.name){for(var a=Model.getShapeById(n.parent),p=null,i=0,s=0;s<a.children.length;s++){var l=a.children[s];"horizontalSeparator"!=(h=Model.getShapeById(l)).name||r[l]?"verticalSeparatorBar"==h.name&&(p=h):i+=1}0==i&&null!=p&&(r[p.id]=p,o.indexOf(p.id)<0&&o.push(p.id))}else if("verticalSeparator"==n.name){for(a=Model.getShapeById(n.parent),p=null,i=0,s=0;s<a.children.length;s++){var h;l=a.children[s];"verticalSeparator"!=(h=Model.getShapeById(l)).name||r[l]?"horizontalSeparatorBar"==h.name&&(p=h):i+=1}0==i&&null!=p&&(r[p.id]=p,o.indexOf(p.id)<0&&o.push(p.id))}}for(var d in e=[],r)e.push(r[d]);return e}),Designer.events.addEventListener("removed",function(e){for(var r=e.shapes,t=e.range,o=e.changedIds,n=[],a=[],p=0;p<r.length;p++){var i=r[p];if("verticalLane"==i.name&&t.indexOf(i.parent)<0&&a.indexOf(i.parent)<0)a.push(i.parent);else if("horizontalLane"==i.name&&t.indexOf(i.parent)<0&&a.indexOf(i.parent)<0)a.push(i.parent);else if("verticalSeparatorBar"==i.name&&t.indexOf(i.parent)<0){(l=Model.getShapeById(i.parent)).props.w-=i.props.w,l.props.x+=i.props.w,Designer.painter.renderShape(l),o.indexOf(i.parent)<0&&(o.push(i.parent),n.push(l))}else if("horizontalSeparatorBar"==i.name&&t.indexOf(i.parent)<0){(l=Model.getShapeById(i.parent)).props.y+=i.props.h,l.props.h-=i.props.h,Designer.painter.renderShape(l),o.indexOf(i.parent)<0&&(o.push(i.parent),n.push(l))}else"horizontalSeparator"==i.name&&t.indexOf(i.parent)<0&&a.indexOf(i.parent)<0?a.push(i.parent):"verticalSeparator"==i.name&&t.indexOf(i.parent)<0&&a.indexOf(i.parent)<0&&a.push(i.parent)}for(var s=0;s<a.length;s++){var l,h=a[s];if("verticalPool"==(l=Model.getShapeById(h)).name){var d=0,c=0,g=0,u=0;for(p=0;p<l.children.length;p++){var m=l.children[p];"verticalLane"==(w=Model.getShapeById(m)).name?(g++,d+=w.props.w):"horizontalSeparator"==w.name&&(u=w.props.height[0])}if(d+=u,0==g)for(p=0;p<r.length;p++)if(r[p].parent==h&&"verticalLane"==r[p].name){c=r[p].props.w;break}if(g>0||c){l.props.w=c+d,Designer.painter.renderShape(l),o.indexOf(h)<0&&(o.push(h),n.push(l));var f=Utils.rangeChildren(l);n=n.concat(f)}else if(d>0){f=Utils.rangeChildren(l);n=n.concat(f)}}else if("horizontalPool"==l.name){var v=0,y=0,S=(g=0,0);for(p=0;p<l.children.length;p++){var w;m=l.children[p];"horizontalLane"==(w=Model.getShapeById(m)).name?(g++,v+=w.props.h):"verticalSeparator"==w.name&&(S=w.props.height[0])}if(v+=S,0==g)for(p=0;p<r.length;p++)if(r[p].parent==h&&"horizontalLane"==r[p].name){y=r[p].props.h;break}if(g>0||y){l.props.h=y+v,Designer.painter.renderShape(l),o.indexOf(h)<0&&(o.push(h),n.push(l));f=Utils.rangeChildren(l);n=n.concat(f)}else if(v>0){f=Utils.rangeChildren(l);n=n.concat(f)}}}return Designer.events.push("delSvgCharts",r),n}),Designer.events.addEventListener("shapeChanged",function(e){}),Designer.events.addEventListener("renderShapeDom",function(focus){if(null!=focus&&"shape"==focus.type){var shape=focus.shape;if("uiGrid"==shape.name&&0==$("#grid_dom").length){var props=shape.props,x=props.x,y=props.y,w=props.w,h=props.h,zindex=props.zindex,angle=props.angle;if(0!=angle)return;var minVal=20,lineColor="50,50,50",dom=$("<div id='grid_dom'></div>").appendTo($("#designer_canvas"));dom.css({position:"absolute",left:x,top:y,width:w,height:h,"z-index":zindex+2});for(var path2=shape.path[2].actions,rowArr=[.5],columnArr=[.5],i=0;i<path2.length;i++){var pathItem=path2[i];if(0==pathItem.x){var pathY=eval("var w="+w+";var h = "+h+";"+pathItem.y);rowArr.push(pathY)}else if(0==pathItem.y){var pathX=eval("var w="+w+";var h = "+h+";"+pathItem.x);columnArr.push(pathX)}}rowArr.push(h+.5),columnArr.push(w+.5);for(var i=1;i<rowArr.length;i++)dom.append("<div class='line row' sort="+i+" style='cursor:s-resize; padding-top:6px; border-top:2px dotted transparent; width:"+(w-12)+"px; position:absolute; left:6px; top:"+rowArr[i]+"px;'></div>");for(var i=1;i<columnArr.length;i++)dom.append("<div class='line column' sort="+i+" style='cursor:e-resize; padding-left:6px; border-left:2px dotted transparent; height:"+(h-12)+"px; position:absolute; top:6px; left:"+columnArr[i]+"px;'></div>");var sort=0,yL=0,xL=0;dom.children(".row").off("mousedown.uigrid").on("mousedown.uigrid",function(e){e.stopPropagation();var r=$(this);r.css({"border-top-color":"rgb("+lineColor+")",width:w+16+"px",left:"-8px"}),sort=r.attr("sort");var t=e.pageY,o=Utils.restoreScale(r.position()),n=Utils.restoreScale(dom.children(".row").eq(sort-2).position());$(document).off("mousemove.uigrid").on("mousemove.uigrid",function(e){e.stopPropagation();var a=e.pageY;n.top=1==sort?0:n.top;var p=o.top+(a-t).restoreScale();p=p<n.top+minVal?n.top+minVal:p,r.css({top:p}),yL=p-o.top})}),dom.children(".column").off("mousedown.uigrid").on("mousedown.uigrid",function(e){e.stopPropagation(),$("#shape_opt_box").css({"pointer-events":"none"});var r=$(this);r.css({"border-left-color":"rgb("+lineColor+")",height:h+16+"px",top:"-8px"}),sort=r.attr("sort");var t=e.pageX,o=Utils.restoreScale(r.position()),n=Utils.restoreScale(r.prev().position()),a=Utils.restoreScale(r.next().position()),p=1==sort?0:n.left,i=null==a?9999:a.left;$(document).off("mousemove.uigrid").on("mousemove.uigrid",function(e){e.stopPropagation();var n=e.pageX,a=o.left+(n-t).restoreScale();a=(a=a<p+minVal?p+minVal:a)>i-minVal?i-minVal:a,r.css({left:a}),xL=a-o.left})}),$(document).off("mouseup.uigrid").on("mouseup.uigrid",function(e){if($(document).off("mousemove.uigrid"),$(document).off("mouseup.uigrid"),$("#shape_opt_box").css({"pointer-events":"auto"}),0!=yL){if(Math.abs(yL)<2)return;dom.remove(),h+=+yL;for(var r=sort;r<rowArr.length;r++)rowArr[r]=rowArr[r]+yL;var t=shape.path[1].actions;t[2].y="Math.floor(h*"+rowArr[1]/h+")+0.5",t[3].y="Math.floor(h*"+rowArr[1]/h+")+0.5";var o=[];for(r=1;r<rowArr.length-1;r++){var n="Math.floor(h*"+rowArr[r]/h+")+0.5";o.push({action:"move",x:0,y:n}),o.push({action:"line",x:"w",y:n})}for(r=0;r<shape.path[2].actions.length;r++){0!=(a=shape.path[2].actions[r]).y&&"h"!=a.y||o.push(a)}}else{if(Math.abs(xL)<2)return;dom.remove(),columnArr[sort]=columnArr[sort]+xL,w=columnArr[columnArr.length-1];for(o=[],r=0;r<shape.path[2].actions.length;r++){var a;0!=(a=shape.path[2].actions[r]).x&&"w"!=a.x||o.push(a)}for(r=1;r<columnArr.length-1;r++){n="Math.floor(w*"+columnArr[r]/w+")+0.5";o.push({action:"move",x:n,y:0}),o.push({action:"line",x:n,y:"h"})}}var p=shape.textBlock,i=0;for(r=0;r<rowArr.length-1;r++)for(var s=0;s<columnArr.length-1;s++){var l="Math.floor(w*"+columnArr[s]/w+")",d="Math.floor(w*"+(columnArr[s+1]-columnArr[s])/w+")",c="Math.floor(h*"+rowArr[r]/h+")",g="Math.floor(h*"+(rowArr[r+1]-rowArr[r])/h+")";p[i].position.x=l,p[i].position.w=d,p[i].position.y=c,p[i].position.h=g,i++}shape.path[2].actions=o,shape.props.h=h,shape.props.w=w,Schema.initShapeFunctions(shape),Model.update(shape),Designer.painter.renderShape(shape),Utils.unselect()}),$(document).on("mouseup.uigrid",function(){$(document).off("mouseup.uigrid"),$("#grid_dom").remove()}),$(window).on("keydown.uigrid",function(){$(window).off("keydown.uigrid"),$("#grid_dom").remove()})}if("grid"==shape.category&&(0==$("#grid_dom").length||$("#grid_dom").attr("shape-id")!=shape.id)){var props=shape.props,x=props.x,y=props.y,w=props.w,h=props.h,zindex=Model.orderList.length>shape.props.zindex?Model.orderList.length:shape.props.zindex,angle=props.angle;if(0!=angle)return;var minVal=20,lineColor="67,134,245",lineWidth=shape.lineStyle.lineWidth<4?4:shape.lineStyle.lineWidth,selectAllWidth=shape.lineStyle.lineWidth+8;$("#grid_dom").remove();var dom=$("<div id='grid_dom' shape-id='"+shape.id+"'></div>").appendTo($("#designer_canvas"));dom.css({position:"absolute",left:x,top:y,width:w,height:h,"z-index":zindex+3});for(var path=shape.path,rowHArr=[],columnWArr=[],i=0;i<path.length;i++){var pathItem=path[i],rowH=eval("var w="+w+";var h = "+h+";"+pathItem[0].actions[0].h),rowY=eval("var w="+w+";var h = "+h+";"+pathItem[0].actions[0].y);rowHArr.push(rowH),dom.append("<div class='line row' sort="+(i+1)+" style='cursor:s-resize; border-top:"+lineWidth+"px solid transparent; width:"+(w-12)+"px; position:absolute; left:6px; top:"+(rowY+rowH-lineWidth/2)+"px;'></div>"),dom.append("<div class='row-select-all' sort="+i+" style='height:"+rowH+"px; width:"+selectAllWidth+"px; position:absolute; left:0; top:"+rowY+"px;'></div>")}for(var i=0;i<path[0].length;i++){var pathItem=path[0][i],columnW=eval("var w="+w+";var h = "+h+";"+pathItem.actions[0].w),columnX=eval("var w="+w+";var h = "+h+";"+pathItem.actions[0].x);columnWArr.push(columnW),dom.append("<div class='line column' sort="+(i+1)+" style='cursor:e-resize; border-left:"+lineWidth+"px solid transparent; height:"+(h-12)+"px; position:absolute; top:6px; left:"+(columnW+columnX-lineWidth/2)+"px;'></div>"),dom.append("<div class='column-select-all' sort="+i+" style='height:"+selectAllWidth+"px; width:"+columnW+"px; position:absolute; top:0; left:"+columnX+"px;'></div>")}var tbs=shape.getTextBlock();if("grid"==shape.category&&shape.merge)for(var gridMerge=shape.merge||[],i=0;i<gridMerge.length;i++){var gridMgs=gridMerge[i],first=gridMgs[0],last=gridMgs[gridMgs.length-1];tbs[first].position.w=tbs[last].position.w+tbs[last].position.x-tbs[first].position.x,tbs[first].position.h=tbs[last].position.h+tbs[last].position.y-tbs[first].position.y;for(var j=1;j<gridMgs.length;j++)tbs[gridMgs[j]].jump=!0}for(var rects=[],i=0;i<tbs.length;i++){var tb=tbs[i];if(!tb.jump){var postion=tb.position,rect={x:postion.x+lineWidth,y:postion.y+lineWidth,w:postion.w-lineWidth,h:postion.h-lineWidth};rects.push(rect)}}var isDown=!1;dom.off("mousemove.gridhover").on("mousemove.gridhover",function(e){for(var r=Utils.getRelativePos(e.pageX,e.pageY,dom),t=0;t<rects.length;t++){var o=rects[t];if(Utils.pointInRect(r.x,r.y,o)&&!isDown){dom.children(".line").hide();break}dom.children(".line").show()}}),dom.children(".row-select-all").off("mousedown.gridall").on("mousedown.gridall",function(e){shape=Model.getShapeById(shape.id),Utils.selectShape(shape.id);for(var r=e.ctrlKey||e.metaKey,t=Utils.gridSelectObj,o=(shape.path.length,shape.path[0].length),n=$(this).attr("sort")-0,a=[],p=[],i=[],s=0;s<o;s++){var l=n*o+s;a.push(l),t.id==shape.id&&-1!=t.indexs.indexOf(l)?p.push(l):i.push(l)}r&&p.length&&p.length!=o&&(a=i),Utils.selectGrid(shape,a,r),$("#designer_canvas").off("mouseup touchend.gridSelect")}),dom.children(".column-select-all").off("mousedown.gridall").on("mousedown.gridall",function(e){shape=Model.getShapeById(shape.id),Utils.selectShape(shape.id);for(var r=e.ctrlKey||e.metaKey,t=Utils.gridSelectObj,o=shape.path.length,n=shape.path[0].length,a=$(this).attr("sort")-0,p=[],i=[],s=[],l=0;l<o;l++){var h=n*l+a;p.push(h),t.id==shape.id&&-1!=t.indexs.indexOf(h)?i.push(h):s.push(h)}r&&i.length&&i.length!=o&&(p=s),Utils.selectGrid(shape,p,r),$("#designer_canvas").off("mouseup touchend.gridSelect")});var sort=0,yL=0,xL=0;function gridMouseupFn(){if(isDown=!1,$(document).off("mousemove.grid"),$("#shape_opt_box").css({"pointer-events":"auto"}),0!=yL){if(Math.abs(yL)<2)return $(document).off("mouseup.grid"),void $("#grid_dom").remove();dom.remove(),h+=+yL,rowHArr[sort-1]=rowHArr[sort-1]+yL}else{if(Math.abs(xL)<2)return $(document).off("mouseup.grid"),void $("#grid_dom").remove();dom.remove(),w+=xL,columnWArr[sort-1]=columnWArr[sort-1]+xL}for(var e=columnWArr.length,r=Utils.copyArray(path),t=[],o=0,n=0;n<rowHArr.length;n++){var a=rowHArr[n],p=0;o+=a;for(var i=0;i<columnWArr.length;i++){var s=columnWArr[i];p+=s;var l="w*"+Math.round((p-s)/w*1e4)/1e4,d="h*"+Math.round((o-a)/h*1e4)/1e4,c="w*"+Math.round(s/w*1e4)/1e4,g="h*"+Math.round(a/h*1e4)/1e4;i==columnWArr.length-1&&(c="w-"+l),n==rowHArr.length-1&&(g="h-"+d),r[n][i].actions=[{action:"rect",x:l,y:d,w:c,h:g}];var u={x:l,y:d,w:c,h:g},m=shape.textBlock[n*e+i],f=m?m.text:"";m&&m.fontStyle?t.push({position:u,text:f,fontStyle:m.fontStyle}):t.push({position:u,text:f})}}var v=Utils.getOutlinkers([shape]);for(n=0;n<v.length;n++){var y=v[n];y.from.id==shape.id&&(Math.abs(y.from.x-shape.props.x-shape.props.w)<2&&(y.from.x=y.from.x+(w-shape.props.w)),Math.abs(y.from.y-shape.props.y-shape.props.h)<2&&(y.from.y=y.from.y+(h-shape.props.h))),y.to.id==shape.id&&(Math.abs(y.to.x-shape.props.x-shape.props.w)<2&&(y.to.x=y.to.x+(w-shape.props.w)),Math.abs(y.to.y-shape.props.y-shape.props.h)<2&&(y.to.y=y.to.y+(h-shape.props.h))),Designer.painter.renderLinker(y,!0)}shape.textBlock=t,shape.path=r,shape.props.h=h,shape.props.w=w,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape);var S=v.concat([shape]);Model.updateMulti(S),Utils.unselect(),Utils.selectShape(shape.id),$(document).off("mouseup.grid"),$("#grid_dom").remove()}dom.children(".row").off("mousedown.grid").on("mousedown.grid",function(e){isDown=!0,shape=Model.getShapeById(shape.id),e.stopPropagation(),dom.children(".row-select-all").hide(),dom.children(".column-select-all").hide();var r=$(this);r.css({"border-top-color":"rgb("+lineColor+")",width:w+16+"px",left:"-8px"}),sort=r.attr("sort");var t=e.pageY,o=Utils.restoreScale(r.position()),n=Utils.restoreScale(dom.children(".row").eq(sort-2).position());$(document).off("mousemove.grid").on("mousemove.grid",function(e){e.stopPropagation();var a=e.pageY;n.top=1==sort?0:n.top;var p=o.top+(a-t).restoreScale();p=p<n.top+minVal?n.top+minVal:p,r.css({top:p}),yL=p-o.top}),$(document).off("mouseup.grid").on("mouseup.grid",gridMouseupFn),$("#designer_canvas").off("mouseup touchend.gridSelect")}),dom.children(".column").off("mousedown.grid").on("mousedown.grid",function(e){isDown=!0,shape=Model.getShapeById(shape.id),e.stopPropagation(),dom.children(".row-select-all").hide(),dom.children(".column-select-all").hide(),$("#shape_opt_box").css({"pointer-events":"none"});var r=$(this);r.css({"border-left-color":"rgb("+lineColor+")",height:h+16+"px",top:"-8px"}),sort=r.attr("sort");var t=e.pageX,o=Utils.restoreScale(r.position()),n=Utils.restoreScale(dom.children(".column").eq(sort-2).position());$(document).off("mousemove.grid").on("mousemove.grid",function(e){e.stopPropagation();var a=e.pageX;n.left=1==sort?0:n.left;var p=o.left+(a-t).restoreScale();p=p<n.left+minVal?n.left+minVal:p,r.css({left:p}),xL=p-o.left}),$(document).off("mouseup.grid").on("mouseup.grid",gridMouseupFn),$("#designer_canvas").off("mouseup touchend.gridSelect")}),$(window).on("keydown.grid",function(e){(e.ctrlKey||e.metaKey)&&$(".row-select-all").is(":visible")||($(window).off("keydown.grid"),$("#grid_dom").remove())})}if("lane"==shape.category){var shapeId=shape.id;if("verticalPool"==shape.name&&"horizontalPool"==shape.name||(shape.parent&&(shapeId=shape.parent),shape.parent&&(shape=Model.getShapeById(shapeId))),0==$("#lane_dom").length||$("#lane_dom").attr("shape-id")!=shapeId){var props=shape.props,x=props.x,y=props.y,w=props.w,h=props.h,zindex=Model.orderList.length>shape.props.zindex?Model.orderList.length:shape.props.zindex,angle=props.angle;if(0!=angle)return;var minVal=20,maxVal=500,lineColor="67,134,245",lineWidth=shape.lineStyle.lineWidth>4?shape.lineStyle.lineWidth:4,selectAllWidth=shape.lineStyle.lineWidth;$("#lane_dom").remove();var dom=$("<div id='lane_dom' shape-id='"+shapeId+"'></div>").appendTo($("#designer_canvas"));dom.css({position:"absolute",left:x,top:y,width:0,height:0,"z-index":zindex+2});var path=shape.path,shapes=[],poolLine="",laneLine="",separatorLine="",line={verticalLane:{name:"泳道(垂直)"},horizontalSeparator:{name:"分隔符(水平)"},horizontalLane:{name:"泳道(水平)"},verticalSeparator:{name:"分隔符(垂直)"},verticalSeparatorBar:{name:"水平分隔条"},horizontalSeparatorBar:{name:"垂直分隔条"}},lanes=Utils.getLanesByPool(Model.getShapeById(shapeId)),separators=Utils.getSeparatorsByPool(Model.getShapeById(shapeId)),bars=Utils.getSeparatorBarsByPool(Model.getShapeById(shapeId));if("verticalPool"==shape.name){var poolHeight=shape.props.height[0],separatorHeight=0,laneHeight=0;dom.append("<div class='line row' type='pool' style='cursor:s-resize; border-top:"+lineWidth+"px solid transparent; width:"+(w-12)+"px; position:absolute; left:6px; top:"+(poolHeight-lineWidth/2)+"px;'></div>"),separators.length&&(separatorHeight=separators[0].props.height[0],dom.append("<div class='line column' type='separator' style='cursor:e-resize; border-left:"+lineWidth+"px solid transparent; height:"+(h-poolHeight-12)+"px; position:absolute; top:"+(poolHeight+6)+"px; left:"+(separatorHeight-lineWidth/2)+"px;'></div>")),lanes.length&&(laneHeight=lanes[0].props.height[0],dom.append("<div class='line row' type='lane'  style='cursor:s-resize; border-top:"+lineWidth+"px solid transparent; width:"+(w-separatorHeight-12)+"px; position:absolute; left:"+(separatorHeight+6)+"px; top:"+(poolHeight+laneHeight-lineWidth/2)+"px;'></div>"));var lineType="",yL=0,xL=0;dom.children(".row").off("mousedown.lane").on("mousedown.lane",function(e){shape=Model.getShapeById(shape.id),lanes=Utils.getLanesByPool(Model.getShapeById(shapeId)),separators=Utils.getSeparatorsByPool(Model.getShapeById(shapeId)),bars=Utils.getSeparatorBarsByPool(Model.getShapeById(shapeId)),e.stopPropagation();var r=$(this);r.css({"border-top-color":"rgb("+lineColor+")"}),lineType=r.attr("type");var t=e.pageY,o="lane"==lineType?e.offsetX+separatorHeight:e.offsetX,n=Utils.restoreScale(r.position()),a="lane"==lineType?Utils.restoreScale(dom.children(".row[type='pool']").position()):{top:0};$(document).off("mousemove.lane").on("mousemove.lane",function(e){e.stopPropagation();var p=e.pageY;a.top=a.top;var i=n.top+(p-t).restoreScale();i=(i=i<a.top+minVal?a.top+minVal:i)>a.top+maxVal?a.top+maxVal:i,r.css({top:i}),yL=i-n.top,laneSnpLine(a.top,i,o,"vertical")}),$(document).off("mouseup.lane").on("mouseup.lane",laneMouseupFn),$("#designer_canvas").off("mouseup touchend.gridSelect")}),dom.children(".column").off("mousedown.lane").on("mousedown.lane",function(e){shape=Model.getShapeById(shape.id),lanes=Utils.getLanesByPool(Model.getShapeById(shapeId)),separators=Utils.getSeparatorsByPool(Model.getShapeById(shapeId)),bars=Utils.getSeparatorBarsByPool(Model.getShapeById(shapeId)),e.stopPropagation();var r=$(this);r.css({"border-left-color":"rgb("+lineColor+")"}),lineType=r.attr("type");var t=e.pageX,o=e.offsetY+poolHeight,n=Utils.restoreScale(r.position()),a="lane"==lineType?Utils.restoreScale(dom.children(".column[type='pool']").position()):{left:0};$(document).off("mousemove.lane").on("mousemove.lane",function(e){e.stopPropagation();var p=e.pageX;a.left=a.left;var i=n.left+(p-t).restoreScale();i=(i=i<a.left+minVal?a.left+minVal:i)>a.left+maxVal?a.left+maxVal:i,r.css({left:i}),xL=i-n.left,laneSnpLine(a.left,i,o,"horizontal")}),$(document).off("mouseup.lane").on("mouseup.lane",laneMouseupFn),$("#designer_canvas").off("mouseup touchend.gridSelect")})}else{var poolHeight=shape.props.height[0],separatorHeight=0,laneHeight=0;dom.append("<div class='line column' type='pool'  style='cursor:e-resize; border-left:"+lineWidth+"px solid transparent; height:"+(h-12)+"px; position:absolute; top:6px; left:"+(poolHeight-lineWidth/2)+"px;'></div>"),separators.length&&(separatorHeight=separators[0].props.height[0],dom.append("<div class='line row' type='separator' style='cursor:s-resize; border-top:"+lineWidth+"px solid transparent; width:"+(w-poolHeight-12)+"px; position:absolute; left:"+(poolHeight+6)+"px; top:"+(separatorHeight-lineWidth/2)+"px;'></div>")),lanes.length&&(laneHeight=lanes[0].props.height[0],dom.append("<div class='line column' type='lane' style='cursor:e-resize; border-left:"+lineWidth+"px solid transparent; height:"+(h-separatorHeight-12)+"px; position:absolute; top:"+(separatorHeight+6)+"px; left:"+(poolHeight+laneHeight-lineWidth/2)+"px;'></div>"));var lineType="",yL=0,xL=0;dom.children(".row").off("mousedown.lane").on("mousedown.lane",function(e){shape=Model.getShapeById(shape.id),lanes=Utils.getLanesByPool(Model.getShapeById(shapeId)),separators=Utils.getSeparatorsByPool(Model.getShapeById(shapeId)),bars=Utils.getSeparatorBarsByPool(Model.getShapeById(shapeId)),e.stopPropagation();var r=$(this);r.css({"border-top-color":"rgb("+lineColor+")"}),lineType=r.attr("type");var t=e.pageY,o=e.offsetX+poolHeight,n=Utils.restoreScale(r.position()),a="lane"==lineType?Utils.restoreScale(dom.children(".row[type='pool']").position()):{top:0};$(document).off("mousemove.lane").on("mousemove.lane",function(e){e.stopPropagation();var p=e.pageY,i=n.top+(p-t).restoreScale();i=(i=i<a.top+minVal?a.top+minVal:i)>a.top+maxVal?a.top+maxVal:i,r.css({top:i}),yL=i-n.top,laneSnpLine(a.top,i,o,"vertical")}),$(document).off("mouseup.lane").on("mouseup.lane",laneMouseupFn),$("#designer_canvas").off("mouseup touchend.gridSelect")}),dom.children(".column").off("mousedown.lane").on("mousedown.lane",function(e){shape=Model.getShapeById(shape.id),lanes=Utils.getLanesByPool(Model.getShapeById(shapeId)),separators=Utils.getSeparatorsByPool(Model.getShapeById(shapeId)),bars=Utils.getSeparatorBarsByPool(Model.getShapeById(shapeId)),e.stopPropagation();var r=$(this);r.css({"border-left-color":"rgb("+lineColor+")"}),lineType=r.attr("type");var t=e.pageX,o="lane"==lineType?e.offsetY+separatorHeight:e.offsetY,n=Utils.restoreScale(r.position()),a="lane"==lineType?Utils.restoreScale(dom.children(".column[type='pool']").position()):{left:0};$(document).off("mousemove.lane").on("mousemove.lane",function(e){e.stopPropagation();var p=e.pageX;a.left=a.left;var i=n.left+(p-t).restoreScale();i=(i=i<a.left+minVal?a.left+minVal:i)>a.left+maxVal?a.left+maxVal:i,r.css({left:i}),xL=i-n.left,laneSnpLine(a.left,i,o,"horizontal")}),$(document).off("mouseup.lane").on("mouseup.lane",laneMouseupFn),$("#designer_canvas").off("mouseup touchend.gridSelect")})}function laneMouseupFn(){if($(document).off("mousemove.lane"),$("#shape_opt_box").css({"pointer-events":"auto"}),0!=yL){if(Math.abs(yL)<2)return $(document).off("mouseup.lane"),void $("#lane_dom").remove();dom.remove();var e=Utils.getContainedShapes([shape]);t=(t=Utils.getSelected()).filter(function(e){return e.container&&e.container==shape.id}),e=e.concat(t);var r=Utils.getOutlinkers(e);switch((o=e.concat(r)).length>0&&(Utils.hideLinkerCursor(),UI.hideShapeOptions(),Designer.op.moveShape(o,{x:0,y:yL}),shapes=shapes.concat(o)),lineType){case"pool":shape.props.height[0]+=yL,shape.props.h+=yL,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape),shapes.push(shape),lanes.map(function(e){e.props.y+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),separators.map(function(e){e.props.y+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),bars.map(function(e){e.props.y+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)});break;case"lane":shape.props.h+=yL,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape),shapes.push(shape),lanes.map(function(e){e.props.height[0]+=yL,e.props.h+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),separators.map(function(e){e.props.y==shape.props.y+shape.props.height[0]?e.props.h+=yL:e.props.y+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),bars.map(function(e,r){0==r?e.props.h+=yL:e.props.y+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)});break;case"separator":shape.props.h+=yL,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape),shapes.push(shape),lanes.map(function(e){e.props.y+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),separators.map(function(e){e.props.height[0]+=yL,e.props.h+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),bars.map(function(e){e.props.height[0]+=yL,e.props.h+=yL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)})}}else{if(Math.abs(xL)<2)return $(document).off("mouseup.lane"),void $("#lane_dom").remove();dom.remove();var t;e=Utils.getContainedShapes([shape]);t=(t=Utils.getSelected()).filter(function(e){return e.container&&e.container==shape.id}),e=e.concat(t);var o;r=Utils.getOutlinkers(e);switch((o=e.concat(r)).length>0&&(Utils.hideLinkerCursor(),UI.hideShapeOptions(),Designer.op.moveShape(o,{x:xL,y:0}),shapes=shapes.concat(o)),lineType){case"pool":shape.props.height[0]+=xL,shape.props.w+=xL,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape),shapes.push(shape),lanes.map(function(e){e.props.x+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),separators.map(function(e){e.props.x+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),bars.map(function(e){e.props.x+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)});break;case"lane":shape.props.w+=xL,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape),shapes.push(shape),lanes.map(function(e){e.props.height[0]+=xL,e.props.w+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),separators.map(function(e){e.props.x==shape.props.x+shape.props.height[0]?e.props.w+=xL:e.props.x+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),bars.map(function(e,r){0==r?e.props.w+=xL:e.props.x+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)});break;case"separator":shape.props.w+=xL,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape),shapes.push(shape),lanes.map(function(e){e.props.x+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),separators.map(function(e){e.props.height[0]+=xL,e.props.w+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)}),bars.map(function(e){e.props.height[0]+=xL,e.props.w+=xL,Schema.initShapeFunctions(e),Designer.painter.renderShape(e),shapes.push(e)})}}Model.updateMulti(shapes),Utils.unselect(),Utils.selectShape(shape.id);var n=Utils.getControlBox([shape.id]);Designer.op.changeCanvas(n),$(document).off("mouseup.lane"),$("#lane_dom").remove()}function laneSnpLine(e,r,t,o){var n=$("#lane_dom");if($(".designer_op_snapline_h").remove(),$(".designer_op_snapline_v").remove(),"vertical"==o){var a="<span class='text' style='top:"+Math.round(r-e)/2+"px;'>"+Math.round(r-e)+"px</span>";$("<div class='designer_op_snapline_v line'>"+a+"</div>").appendTo(n).css({height:Math.round(r-e),left:Math.round(t),top:Math.round(e)})}else{a="<span class='text' >"+Math.round(r-e)+"px</span>";$("<div class='designer_op_snapline_h line'>"+a+"</div>").appendTo(n).css({width:Math.round(r-e),left:Math.round(e),top:Math.round(t)})}}$(window).on("keydown.lane",function(e){$(window).off("keydown.lane"),$("#lane_dom").remove()})}return}}}),Designer.events.addEventListener("gridSelect",function(e){if(Utils.getSelected().length>0&&"grid"==e.category){e=Utils.getSelected()[0];var r=$("#designer_canvas");r.off("mouseup touchend.gridSelect").on("mouseup touchend.gridSelect",function(t){if(2!=t.button){var o=t.ctrlKey||t.metaKey;r.off("mouseup touchend.gridSelect"),"touchend"==t.type&&(t=t.originalEvent.changedTouches[0]);var n=Utils.getRelativePos(t.pageX,t.pageY,r),a=e.getTextBlock();e.path.length,e.path[0].length;if(0!=e.props.angle)return;for(var p=n.x-e.props.x,i=n.y-e.props.y,s=(e.lineStyle.lineWidth,0);s<a.length;s++){var l=a[s];if(Utils.pointInRect(p,i,l.position)){var h=[];h.push(s),Utils.selectGrid(e,h,o);break}}}})}}),Designer.events.addEventListener("renderGridSelect",function(e){if("grid"==e.category){var r=e.getTextBlock(),t=$("#designer_canvas"),o=$("#grid_selects");o.remove(),o=$("<div id='grid_selects'></div>"),$("#grid_dom").length?$("#grid_dom").before(o):o.appendTo(t),o.css({top:e.props.y,left:e.props.x,width:e.props.w,height:e.props.h,"z-index":$("#"+e.id).css("z-index")});for(var n=Utils.gridSelectObj.indexs,a=(Utils.gridSelectObj.rows,Utils.gridSelectObj.columns,Utils.getShapeFillStyle(e.fillStyle)),p=0;p<n.length;p++){var i=n[p],s=$("<div class='grid_select' num="+i+" ></div>").appendTo(o),l=r[i],h={},d=e.getPath()[i];e.theme=e.theme||{},"header"==e.theme.name?h=0==d.row?$.extend({},a,e.theme.row[0].fillStyle,d.fillStyle):$.extend({},a,e.theme.row[1].fillStyle,d.fillStyle):"striping"==e.theme.name?(e.theme.row&&(h=$.extend({},a,e.theme.row[d.row%2].fillStyle,d.fillStyle)),e.theme.column&&(h=$.extend({},a,e.theme.column[d.column%2].fillStyle,d.fillStyle))):h=$.extend({},a,d.fillStyle);for(var c=[67,134,245],g=h.color.split(","),u=!0,m=0;m<g.length;m++){if(!(Math.abs(g[m]-c[m])<80)){u=!0;break}u=!1}var f="rgb(";if(u)f=f+c.join(",")+")";else for(m=0;m<g.length;m++)m==g.length-1?f+=255-g[m]+")":f+=255-g[m]+",";s.css({top:l.position.y,left:l.position.x,width:l.position.w,height:l.position.h,background:f}),$("#po-flow-grid-fill").colorButton("setColor",h.color||"255,255,255")}UI.update()}}),Designer.events.addEventListener("shapeCount",function(){var e=(Model.orderList||[]).length;if(e>1e3?$.toast({type:"warning",name:"large-shape",text:"文件过大会导致性能降低，建议新建文件继续绘制",autoClose:!1,target:$("#designer_viewport")}):$.toast("close","large-shape"),UI.showShapeCount(e),"viewer"!=chartObj.collaRole)if("undefined"==typeof DesignerInsertTemp){var r={js:[staticBasePath+"/assets/js/designer_insert_temp.js"],css:[staticBasePath+"/assets/css/designer_insert_temp.css"]};bigPipe.render(r,function(){0==e?DesignerInsertTemp.init("flow"):DesignerInsertTemp.clear("flow")})}else 0==e?DesignerInsertTemp.init("flow"):DesignerInsertTemp.clear("flow")}),Designer.events.addEventListener("searchReplace",function(){var e=UI.searchAndReplace.text;e.length>0&&UI.searchAndReplace.searchText(e)}),Designer.events.addEventListener("hideSearchReplace",function(){UI.hideSearchReplace()}),Designer.events.addEventListener("useBrush",function(e){"brush"==e?(Designer.clipboard.brush(),$("#po-flow-brush").attr("original-title","格式刷生效中  ESC取消"),$(".po-hover-tip .tip-content").html("格式刷生效中  ESC取消"),$("#po-flow-brush").button("select"),$.toast({type:"secondary",text:"左键单击画布空白区域，退出格式刷。",autoClose:!1})):"unbrush"==e&&($("#po-flow-brush").button("unselect"),$(document).off("keydown.cancelbrush"),Utils.selectCallback=null,$("#po-flow-brush").attr("original-title","格式刷(Ctrl+Shift+C)"),$.toast("close"))}),Designer.events.addEventListener("setZoomScale",function(){var e=Designer.config.scale;$("#po-flow-navigation .po-flow-zoom").progress("setValue",parseInt(100*e)+"%")}),Designer.events.addEventListener("buriedPoint",function(e){"function"==typeof buried_point_fn&&buried_point_fn(e.eventFn,e.eventName,e.currPage,e.Params,e.Params1)}),Designer.events.addEventListener("isTeam",function(e){}),Designer.events.addEventListener("poGuide",function(e){PoGuide&&0==PoGuide.config.isClose&&PoGuide.step}),Designer.events.addEventListener("downloadPartShow",function(){var e=Utils.getSelectedIds(),r=!1;if(e.length){for(var t=0;t<e.length;t++){var o=e[t],n=Model.getShapeById(o);if(!n.parent||-1!=e.indexOf(n.parent))break;e.splice(t,1),t--}e.length&&(r=!0)}r?($("#header-export-menu li[type=download_part]").menuitem("enable"),$("#header-file-menu li[type=download_part]").menuitem("enable"),$("#designer-contextmenu .devi-download-part").show(),$("#designer-contextmenu li[ac=download_part]").show()):($("#header-export-menu li[type=download_part]").menuitem("disable"),$("#header-file-menu li[type=download_part]").menuitem("disable"))}),Designer.events.addEventListener("downloadPart",function(e){e=e||Utils.getSelectedIds();var r=Model.define.elements;for(var t in r){var o=r[t];o.container&&e.indexOf(o.container)>-1&&e.push(t),"linker"==o.name&&r[o.from.id]&&r[o.from.id].container&&e.indexOf(r[o.from.id].container)>-1&&r[o.to.id]&&r[o.to.id].container&&e.indexOf(r[o.to.id].container)>-1&&e.push(t)}UI.export("png",e)}),Designer.events.addEventListener("testVip",function(e){return"flowShapeNum"===e||vipState.test(e)}),Designer.events.addEventListener("vipLimit",function(e){switch(e){case"myShape":insert.pay.init({title:"升级会员享无限自定义图形数",pointsSource:"添加我的图形"});break;case"Latex":insert.pay.init({title:"升级会员解锁LaTeX方程式编辑器",pointsSource:"插入数学公式"});break;case"pasteImage":insert.pay.init({title:"升级会员解锁快速粘贴截图",pointsSource:"插入截图"});break;case"download":insert.pay.init({title:"升级会员解锁全部下载格式",pointsSource:"下载会员格式"});break;case"canvasNum":insert.pay.init({title:"升级会员，解锁多画布功能",pointsSource:"画布新建"})}}),Designer.events.addEventListener("poGuide",function(){PoGuide.init()}),Designer.events.addEventListener("update",function(e){Designer.events.push("renderSvgCharts")}),Designer.events.addEventListener("renderSvgCharts",function(e){var r=Model.define.elements,t=r,o=Object.keys(r),n=Utils.getSelectedIds(),a=flow2svg.calcCanvasSize(o),p=flow2svg.calcCanvasSize(n);"select"==e&&(t=Utils.getSelectedCharts());var i=document.createDocumentFragment(),s=function(){var r=t[l];if(r.name.startsWith("chart_")){var o=r.props.x-a.minX-15,n=r.props.y-a.minY-15,s=r.props.x-p.minX-15,h=r.props.y-p.minY-15;if("select"==e)$("#svg_".concat(r.id)).find("svg:first").attr({propspartx:s,propsparty:h});else{$("#svg_".concat(r.id))&&$("#svg_".concat(r.id)).remove();var d=$('<div id="svg_'.concat(r.id,'" style="display:none;"></div>'));Designer.painter.drawChart($(d)[0],r,"canvas",{renderer:"svg",width:r.props.w,height:r.props.h,propsx:o,propsy:n,propspartx:s,propsparty:h,autoFit:!1}),i.appendChild($(d)[0]);var c=$("#".concat(r.id)),g=Utils.copy(r.drawChart);g.canvas&&$.extend(!0,g.options,g.canvas,{width:r.props.w,height:r.props.h,autoFit:!1});var u=g.options,m=Designer.painter.bindNewChart(r.category,{cdom:$(c)[0]},u),f=m.bindNewEvent(m.ChartType,$(c)[0],u);$(c).children().length>1&&$(c).children("div:last").remove(),setTimeout(function(){var e,t=Designer.painter.toDataURL(f.chart,$(c).find("canvas")[0]),o=Math.max(null!==(e=window.devicePixelRatio)&&void 0!==e?e:2,2);r.name.startsWith("chart_")&&(r.fillStyle={type:"image",fileId:t,display:"stretch",imageW:r.props.w/o,imageH:r.props.h/o},r.lineStyle={lineWidth:0,lineStyle:"solid"})},0)}}};for(var l in t)s();document.body.appendChild(i)}),Designer.events.addEventListener("delSvgCharts",function(e){for(var r in e){var t=e[r];t.name.startsWith("chart_")&&$("#svg_".concat(t.id))&&$("#svg_".concat(t.id)).remove()}}),Designer.events.addEventListener("onInitPages",function(){$("#history-container").hide(),History.closeHistory()});
},{}],"HtMi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disLineFix=void 0;var e=exports.disLineFix={scale:1,imgData:{},pageScaleChangeTimeIdx:null,pageScaleChange:function(e){if(!(device.indexOf("mobi")>-1)){var a=this;this.scale=e,this.pageScaleChangeTimeIdx&&clearTimeout(this.pageScaleChangeTimeIdx),e<.5?this.pageScaleChangeTimeIdx=setTimeout(function(){for(var e in $("#designer_canvas").addClass("scale_min"),Model.define.elements){var i=Model.define.elements[e];a.updateCanvas(i)}},500):$("#designer_canvas").removeClass("scale_min")}},updateImgTimeIdx:{},updateImg:function(e,a){if(!(device.indexOf("mobi")>-1)){var i=this,n=e.id,t=$("#"+n);if(t.length){i.imgData[n]&&delete i.imgData[n],t.removeClass("show_scale_min_canvas"),t.find(".scale_min_canvas").remove();var s=("linker"===e.name?Utils.getLinkerLineStyle(e.lineStyle):Utils.getShapeLineStyle(e.lineStyle)).lineWidth;i.scale>=.5||s>=5||(i.updateImgTimeIdx[n]&&clearTimeout(i.updateImgTimeIdx[n]),i.updateImgTimeIdx[n]=setTimeout(function(){try{var a=t.find(".shape_canvas")[0].toDataURL(),s=document.createElement("img");s.onload=function(a){i.imgData[n]=s,i.drawCanvas(e,s)},s.src=a}catch(d){i.imgData[n]&&delete i.imgData[n],t.removeClass("show_scale_min_canvas"),t.find(".scale_min_canvas").remove()}},a?500:0))}}},updateCanvas:function(e){var a=e.id;if($("#"+a).length){var i=this.imgData;i[a]?this.drawCanvas(e,i[a]):this.updateImg(e,0)}},drawCanvas:function(e,a){var i=e.id,n=$("#"+i);if(a){var t,s,d=this.scale,l=n.find(".scale_min_canvas");l.length?(s=(t=l[0]).getContext("2d")).clearRect(0,0,t.width,t.height):s=(t=(l=$('<canvas class="scale_min_canvas"></canvas>').appendTo(n))[0]).getContext("2d");var c=Math.round(n.width()*d),m=Math.round(n.height()*d);l.css({width:c,height:m,transform:"translateZ(0) scale("+1/d+")"}),t.width=2*c,t.height=2*m,s.drawImage(a,0,0,2*c,2*m),n.addClass("show_scale_min_canvas")}else n.removeClass("show_scale_min_canvas"),n.find(".scale_min_canvas").remove()}};
},{}],"r6N2":[function(require,module,exports) {
"use strict";var _chartconfig=require("./chartconfig.json"),_disLineFix=require("./disLineFix"),Designer=window.Designer,Model=window.Model,Utils=window.Utils,Schema=window.Schema,$=window.$;Designer.addFunction("open",function(definition,pageId){if(""!=definition){"string"==typeof definition&&eval("definition = "+definition),window.defFilterXSS&&(definition=window.defFilterXSS(definition)),Model.pageId=pageId||Model.pageId,$(".shape_box").remove(),Model.define.elements={},Model.persistence.elements={},Model.define.page=definition.page,Model.define.version=definition.version,Model.persistence.page=Utils.copy(definition.page),Model.comments=definition.comments,definition.theme?(Model.define.theme=definition.theme,Model.persistence.theme=Utils.copy(definition.theme)):(delete Model.define.theme,delete Model.persistence.theme),definition.defaultStyle?Model.define.defaultStyle=definition.defaultStyle:delete Model.define.defaultStyle,definition.defaultLinkerStyle?Model.define.defaultLinkerStyle=definition.defaultLinkerStyle:delete Model.define.defaultLinkerStyle,0==localRuntime&&Designer.initialize.initCanvas();var shapes=definition.elements;if(!Model.define.page.richText&&"wps"==source){for(var shapeId in shapes){var shape=shapes[shapeId];if("linker"!=shape.name&&shape.textBlock)for(var i=0;i<shape.textBlock.length;i++){var text=shape.textBlock[i].text;text&&(text.length==text.indexOf("\n")+2&&text.replace(/\n/g,"<br><br>"),text=text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),text=text.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;"),shape.textBlock[i].text=text)}}setTimeout(function(){Designer.setPageStyle({richText:!0}),sendMessage.version=sendMessage.version+1,sendMessage.saveOnline("all")},5e3)}var shapeCount=0;for(var shapeId in shapes){var shape=shapes[shapeId];"linker"!=shape.name&&(shape.props.x<-1e3&&(shape.props.x=-1e3),shape.props.y<-1e3&&(shape.props.y=-1e3),Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape),Model.add(shape,!1)),shapeCount++}var outerImages={};for(var shapeId in shapes){var shape=shapes[shapeId];if("linker"==shape.name&&(shape.from.x<-1e3&&(shape.from.x=-1e3),shape.from.y<-1e3&&(shape.from.y=-1e3),shape.to.x<-1e3&&(shape.to.x=-1e3===shape.from.x?-900:-1e3),shape.to.y<-1e3&&(shape.to.y=-1e3===shape.to.y?-900:-1e3),Designer.painter.renderLinker(shape),Model.add(shape,!1)),null!=shape.fillStyle&&null!=shape.fillStyle.fileId){var fileId=shape.fillStyle.fileId;fileId.indexOf("iconfinder.com")>=0?outerImages[shape.id]=fileId:fileId.indexOf("cayfu.com")>=0&&(outerImages[shape.id]=fileId)}}0==shapeCount&&Model.build(),0==localRuntime&&"undefined"==typeof isView&&Navigator.draw(),Designer.events.push("resetBrokenLinker"),Designer.events.push("randerComplete"),Designer.events.push("shapeCount")}}),Designer.addFunction("selectAll",function(){var e=Model.define.elements,t=[];for(var r in e)t.push(r);Utils.selectShape(t);var o=Utils.getSelectedCharts().length;1==Utils.getSelectedShapeIds().length&&1==o||$(".pop-sub-editor").hide()}),Designer.addFunction("setFontStyle",function(e){var t=Utils.getSelected();if(0!=t.length){for(var r=Utils.getGridSelectedCells(),o=0;o<t.length;o++){var i=t[o];if(i.fontStyle=Utils.copy(i.fontStyle),Utils.gridSelectObj.id==i.id&&r.length>0)for(var n=0;n<r.length;n++){(l=r[n].textBlock).fontStyle=$.extend({},l.fontStyle,e)}else{var l=i.textBlock||[],a=function(e,t,r){for(var o=0;o<e.length;o++)e[o].text=e[o].text?e[o].text.replace(t,r):""};void 0!==e.fontFamily&&(i.fontStyle.fontFamily=e.fontFamily,a(l,/font-family\:[\-\s\w\u4E00-\u9FA5]*/g,"font-family:"+e.fontFamily)),void 0!==e.size&&(i.fontStyle.size=e.size,a(l,/font-size\:\d+px/g,"font-size:"+e.size+"px")),void 0!==e.color&&(i.fontStyle.color=e.color,a(l,/color\:[#\w,\s()]+/gi,"color:rgb("+e.color+")")),l.length&&(i.textBlock=l),void 0!==e.bold&&(i.fontStyle.bold=e.bold),void 0!==e.italic&&(i.fontStyle.italic=e.italic),void 0!==e.underline&&(i.fontStyle.underline=e.underline,1==i.fontStyle.middleline&&(i.fontStyle.middleline=!1)),void 0!==e.middleline&&(i.fontStyle.middleline=e.middleline,1==i.fontStyle.underline&&(i.fontStyle.underline=!1)),void 0!==e.textAlign&&(i.fontStyle.textAlign=e.textAlign),void 0!==e.lineHeight&&(i.fontStyle.lineHeight=e.lineHeight,"interface"!=i.name&&"cls"!=i.name||Designer.op.shapeChangeHeight(i).map(function(e){"linker"==e.name?(Designer.painter.renderLinker(e,!0),changeShapes.push(e)):i=e}))}if("linker"==i.name)Designer.painter.renderLinker(i);else{void 0!==e.vAlign&&(i.fontStyle.vAlign=e.vAlign);for(var s=i.textBlock,d=0;d<s.length;d++){if(null!=(l=s[d]).text){if(void 0!==e.color){var p=$("<div>"+l.text+"</div>").appendTo("body");p.find("font").removeAttr("color"),l.text=p.html().replace(/<font\s*>/g,"").replace(/<\/font>/g,""),p.remove()}void 0!==e.bold&&(l.text=l.text.replace(/<b\s*>/g,"").replace(/<\/b>/g,"").replace(/font-weight: normal;/g,"")),void 0!==e.italic&&(l.text=l.text.replace(/<i\s*>/g,"").replace(/<\/i>/g,"").replace(/font-style: normal;/g,"")),void 0!==e.underline&&(l.text=l.text.replace(/<u\s*>/g,"").replace(/<\/u>/g,"")),void 0!==e.middleline&&(l.text=l.text.replace(/<strike\s*>/g,"").replace(/<\/strike>/g,""))}}Designer.painter.renderShape(i)}}Model.updateMulti(t)}}),Designer.addFunction("setShapeStyle",function(e){var t=Utils.getSelected();if(0!=t.length){for(var r=[],o=0;o<t.length;o++){var i=t[o];"linker"!=i.name&&(i.shapeStyle=Utils.copy(i.shapeStyle),void 0!==e.alpha&&(i.shapeStyle.alpha=e.alpha),Designer.painter.renderShape(i),r.push(i))}Model.updateMulti(r)}}),Designer.addFunction("setLineStyle",function(e){var t=Utils.getSelected();if(0!=t.length){var r=Utils.getFamilyShapes(t);t=t.concat(r);for(var o=0;o<t.length;o++){(i=t[o]).lineStyle=Utils.copy(i.lineStyle),void 0!==e.lineWidth&&(i.lineStyle.lineWidth=e.lineWidth),void 0!==e.lineColor&&(i.lineStyle.lineColor=e.lineColor),void 0!==e.lineStyle&&(i.lineStyle.lineStyle=e.lineStyle),"linker"==i.name&&(void 0!==e.beginArrowStyle&&(i.lineStyle.beginArrowStyle=e.beginArrowStyle,Designer.defaults.linkerBeginArrowStyle=e.beginArrowStyle),void 0!==e.endArrowStyle&&(i.lineStyle.endArrowStyle=e.endArrowStyle,Designer.defaults.linkerEndArrowStyle=e.endArrowStyle),0==i.lineStyle.lineWidth&&(i.lineStyle.lineWidth=1))}Model.updateMulti(t);for(o=0;o<t.length;o++){var i=t[o];if(Designer.painter.renderShape(i),"linker"!=i.name){var n=Model.getShapeLinkers(i.id);if(!n)continue;for(var l=0;l<n.length;l++)if(!Utils.isSelected(n[l])){var a=Model.getShapeById(n[l]);Designer.painter.renderShape(a)}}}Designer.events.push("resetBrokenLinker")}}),Designer.addFunction("setFillStyle",function(e){var t=Utils.getSelected();if(0!=t.length){for(var r=[],o=Utils.getGridSelectedCells(),i=0;i<t.length;i++){var n=t[i];if("linker"!=n.name){if(Utils.gridSelectObj.id==n.id&&o.length>0)if("transparent"==e.color&&"solid"==e.type){for(var l=0;l<o.length;l++){(a=o[l].path).fillStyle=$.extend({},a.fillStyle,{type:"none",color:"255,255,255"})}Schema.initShapeFunctions(n)}else{for(l=0;l<o.length;l++){var a;(a=o[l].path).fillStyle=$.extend({},a.fillStyle,e)}Schema.initShapeFunctions(n)}else if("transparent"==e.color&&"solid"==e.type||"none"==e.type)n.fillStyle=$.extend({},n.fillStyle,{type:"none",color:"255,255,255"}),n.theme&&(n.theme.row&&(n.theme.row[0].fillStyle=$.extend({},n.theme.row[0].fillStyle,{type:"none",color:"255,255,255"})),n.theme.column&&(n.theme.column[0].fillStyle=$.extend({},n.theme.column[0].fillStyle,{type:"none",color:"255,255,255"})));else{n.fillStyle=Utils.copy(n.fillStyle);var s=n.fillStyle.type;void 0!==e.type&&(d(n,e.type),s=e.type),void 0!==e.color&&("solid"==s?(n.fillStyle.color=e.color,n.theme&&(n.theme.row&&(n.theme.row[0].fillStyle=$.extend({},n.theme.row[0].fillStyle,{type:"solid",color:e.color})),n.theme.column&&(n.theme.column[0].fillStyle=$.extend({},n.theme.column[0].fillStyle,{type:"solid",color:e.color})))):"gradient"==s&&(n.fillStyle.beginColor=GradientHelper.getLighterColor(e.color),n.fillStyle.endColor=GradientHelper.getDarkerColor(e.color))),"gradient"==s&&(void 0!==e.beginColor&&(n.fillStyle.beginColor=e.beginColor),void 0!==e.endColor&&(n.fillStyle.endColor=e.endColor),void 0!==e.gradientType&&(n.fillStyle.gradientType=e.gradientType,"linear"==e.gradientType?(delete n.fillStyle.radius,n.fillStyle.angle=0):(delete n.fillStyle.angle,n.fillStyle.radius=.75)),void 0!==e.radius&&(n.fillStyle.radius=e.radius),void 0!==e.angle&&(n.fillStyle.angle=e.angle)),"image"==s&&(void 0!==e.display&&(n.fillStyle.display=e.display),void 0!==e.fileId&&(n.fillStyle.fileId=e.fileId),void 0!==e.imageW&&(n.fillStyle.imageW=e.imageW),void 0!==e.imageH&&(n.fillStyle.imageH=e.imageH))}Designer.painter.renderShape(n),r.push(n)}}Model.updateMulti(r)}function d(e,t){var r=e.fillStyle;if(r.type!=t){var o={type:t};if("solid"==t)if("gradient"==r.type){var i=GradientHelper.getDarkerColor(r.beginColor);o.color=i}else o.color="255,255,255";else if("gradient"==t){var n=r.color;"solid"!=r.type&&(n="255,255,255"),o.gradientType="linear",o.angle=0,o.beginColor=GradientHelper.getLighterColor(n),o.endColor=GradientHelper.getDarkerColor(n)}else"image"==t&&(o.fileId="",o.display="fill",o.imageW=10,o.imageH=10);e.fillStyle=o}}}),Designer.addFunction("setLinkerType",function(e){var t=Utils.getSelected();if(0!=t.length){for(var r=[],o=0;o<t.length;o++){var i=t[o];"linker"==i.name&&(i.linkerType=e,Designer.painter.renderLinker(i,!0),r.push(i))}Schema.linkerDefaults.linkerType=e;var n=Utils.getSelectedIds();n.length>1&&Designer.painter.drawControls(n),Model.updateMulti(r),Utils.hideLinkerControls(),Utils.showLinkerControls()}}),Designer.addFunction("resetLinker",function(){var e=Utils.getSelectedIds();if(0!=e.length){for(var t=[],r=0;r<e.length;r++){var o=Model.getShapeById(e[r]);"linker"==o.name&&(o.points=[],o.points=Utils.getLinkerPoints(o),Designer.painter.renderLinker(o),t.push(o))}t.length>0&&(Utils.unselect(),Utils.selectShape(e),Model.updateMulti(t))}}),Designer.addFunction("matchSize",function(e){var t=Utils.getSelected();if(0!=t.length&&e){for(var r=null,o=null,i=[],n=0;n<t.length;n++){"linker"!=(a=t[n]).name&&((null==r||a.props.w>r)&&(r=a.props.w),(null==o||a.props.h>o)&&(o=a.props.h))}"auto"==e.w&&(e.w=r),"auto"==e.h&&(e.h=o),Utils.removeAnchors();var l=[];for(n=0;n<t.length;n++){var a;if("linker"!=(a=t[n]).name){var s=Designer.op.changeShapeProps(a,e);Utils.showAnchors(a),Utils.mergeArray(i,s),l.push(a)}}for(n=0;n<i.length;n++){var d=i[n],p=Model.getShapeById(d);Designer.painter.renderLinker(p,!0),l.push(p)}Designer.painter.drawControls(Utils.getSelectedIds()),Model.updateMulti(l)}}),Designer.addFunction("alignShapes",function(e){var t=Utils.getSelected();if(0!=t.length&&e){for(var r=Utils.getSelectedIds(),o=Utils.getSelectedGroups(),i=Utils.getControlBox(r),n=Utils.getSelectedLanes().length,l=0;l<t.length;l++)"lane"==t[l].category&&(i=Utils.getControlBox([t[l].id]));if(n>=2)"function"==typeof $.toast&&$.toast({type:"warning",text:"多个泳池泳道暂不支持对齐"});else{var a=[],s=[];Utils.removeAnchors();var d=[];if(1!=o.length||r.length!=Model.getGroupShapes(o[0]).length)for(l=0;l<o.length;l++){var p=o[l],h=Model.getGroupShapes(p),g=Utils.getControlBox(h),c=0,u=0;"left"==e?c=i.x-g.x:"center"==e?c=i.x+i.w/2-(g.x+g.w/2):"right"==e?c=i.x+i.w-(g.x+g.w):"top"==e?u=i.y-g.y:"middle"==e?u=i.y+i.h/2-(g.y+g.h/2):"bottom"==e&&(u=i.y+i.h-(g.y+g.h));for(var f=0;f<h.length;f++){var m=h[f];if("linker"!=(S=Model.getShapeById(m)).name){var y={x:S.props.x+c,y:S.props.y+u},v=Designer.op.changeShapeProps(S,y,h);Utils.showAnchors(S),Utils.mergeArray(a,v),d.push(S)}else S.from.x=S.from.x+c,S.from.y=S.from.y+u,S.to.x=S.to.x+c,S.to.y=S.to.y+u,a.push(S.id);s.push(m),r=Utils.removeFromArray(r,m)}}for(l=0;l<r.length;l++){var S;if("linker"!=(S=Model.getShapeById(r[l])).name&&d.push(S),"left"==e){if("linker"!=S.name){var x=Utils.getShapeBox(S);y={x:i.x-(x.x-S.props.x)},v=Designer.op.changeShapeProps(S,y);Utils.showAnchors(S),Utils.mergeArray(a,v)}else if(null==S.from.id&&null==S.to.id){var w=Utils.getLinkerBox(S);S.from.x-=w.x-i.x,S.to.x-=w.x-i.x,a.push(S.id)}}else if("center"==e){var M=i.x+i.w/2;if("linker"!=S.name){y={x:Math.round(M-S.props.w/2)},v=Designer.op.changeShapeProps(S,y);Utils.showAnchors(S),Utils.mergeArray(a,v)}else if(null==S.from.id&&null==S.to.id){w=Utils.getLinkerBox(S);S.from.x+=Math.round(M-w.w/2-w.x),S.to.x+=Math.round(M-w.w/2-w.x),a.push(S.id)}}else if("right"==e){var U=i.x+i.w;if("linker"!=S.name){x=Utils.getShapeBox(S),y={x:U-S.props.w-(S.props.x-x.x)},v=Designer.op.changeShapeProps(S,y);Utils.showAnchors(S),Utils.mergeArray(a,v)}else if(null==S.from.id&&null==S.to.id){w=Utils.getLinkerBox(S);S.from.x+=U-w.x-w.w,S.to.x+=U-w.x-w.w,a.push(S.id)}}else if("top"==e){if("linker"!=S.name){x=Utils.getShapeBox(S),y={y:i.y-(x.y-S.props.y)},v=Designer.op.changeShapeProps(S,y);Utils.showAnchors(S),Utils.mergeArray(a,v)}else if(null==S.from.id&&null==S.to.id){w=Utils.getLinkerBox(S);S.from.y-=w.y-i.y,S.to.y-=w.y-i.y,a.push(S.id)}}else if("middle"==e){var D=i.y+i.h/2;if("linker"!=S.name){y={y:Math.round(D-S.props.h/2)},v=Designer.op.changeShapeProps(S,y);Utils.showAnchors(S),Utils.mergeArray(a,v)}else if(null==S.from.id&&null==S.to.id){w=Utils.getLinkerBox(S);S.from.y+=Math.round(D-w.h/2-w.y),S.to.y+=Math.round(D-w.h/2-w.y),a.push(S.id)}}else if("bottom"==e){var k=i.y+i.h;if("linker"!=S.name){x=Utils.getShapeBox(S),y={y:k-S.props.h-(S.props.y-x.y)},v=Designer.op.changeShapeProps(S,y);Utils.showAnchors(S),Utils.mergeArray(a,v)}else if(null==S.from.id&&null==S.to.id){w=Utils.getLinkerBox(S);S.from.y+=k-w.y-w.h,S.to.y+=k-w.y-w.h,a.push(S.id)}}}for(l=0;l<a.length;l++){m=a[l];var b=Model.getShapeById(m);Designer.painter.renderLinker(b,!0),d.push(b)}r=r.concat(s),Designer.painter.drawControls(r),Model.updateMulti(d)}}}),Designer.addFunction("distributeShapes",function(e){var t=Utils.getSelected();if(0!=t.length&&e){Utils.removeAnchors();for(var r=Utils.getSelectedIds(),o=Utils.getSelectedGroups(),i=Utils.getControlBox(r),n=[],l=[],a=[],s=0;s<o.length;s++){var d=Model.getGroupShapes(o[s]),p=Utils.getControlBox(d);l.push({type:"group",shapeIds:d,box:p})}for(s=0;s<t.length;s++){if(!(M=t[s]).group)if("linker"!=M.name){var h=Utils.getShapeBox(M);l.push({type:"shape",id:M.id,box:h})}else if(null==M.from.id&&null==M.to.id){h=Utils.getLinkerBox(M);l.push({type:"linker",id:M.id,box:h})}}if("h"==e){l.sort(function(e,t){return e.box.x-t.box.x});var g=i.w;for(s=0;s<l.length;s++){g-=(h=l[s]).box.w}var c=g/(l.length-1),u=i.x;for(s=0;s<l.length;s++){var f=(h=l[s]).box.x-u;if("group"==h.type)for(var m=h.shapeIds,y=0;y<m.length;y++){if("linker"!=(M=Model.getShapeById(m[y])).name){var v={x:M.props.x-f},S=Designer.op.changeShapeProps(M,v,m);Utils.showAnchors(M),Utils.mergeArray(n,S),a.push(M)}else M.from.x=M.from.x-f,M.to.x=M.to.x-f,n.push(M.id)}else if("shape"==h.type){v={x:(M=Model.getShapeById(h.id)).props.x-f},S=Designer.op.changeShapeProps(M,v,m);Utils.showAnchors(M),Utils.mergeArray(n,S),a.push(M)}else if("linker"==h.type){(M=Model.getShapeById(h.id)).from.x=M.from.x-f,M.to.x=M.to.x-f,n.push(M.id)}u+=h.box.w+c}}else{l.sort(function(e,t){return e.box.y-t.box.y});var x=i.h;for(s=0;s<l.length;s++){x-=(h=l[s]).box.h}for(c=x/(l.length-1),u=i.y,s=0;s<l.length;s++){var w=(h=l[s]).box.y-u;if("group"==h.type)for(m=h.shapeIds,y=0;y<m.length;y++){if("linker"!=(M=Model.getShapeById(m[y])).name){v={y:M.props.y-w},S=Designer.op.changeShapeProps(M,v,m);Utils.showAnchors(M),Utils.mergeArray(n,S),a.push(M)}else M.from.y=M.from.y-w,M.to.y=M.to.y-w,n.push(M.id)}else if("shape"==h.type){v={y:(M=Model.getShapeById(h.id)).props.y-w},S=Designer.op.changeShapeProps(M,v,m);Utils.showAnchors(M),Utils.mergeArray(n,S),a.push(M)}else if("linker"==h.type){var M;(M=Model.getShapeById(h.id)).from.y=M.from.y-w,M.to.y=M.to.y-w,n.push(M.id)}u+=h.box.h+c}}for(s=0;s<n.length;s++){var U=n[s],D=Model.getShapeById(U);Designer.painter.renderLinker(D,!0),a.push(D)}Designer.painter.drawControls(r),Model.updateMulti(a)}}),Designer.addFunction("layerShapes",function(e){var t=Utils.getSelected();if(0!=t.length&&e){var r;if(t.sort(function(e,t){return e.props.zindex-t.props.zindex}),"front"==e){r=Model.maxZIndex;for(var o=0;o<t.length;o++){r+=1,(g=t[o]).props.zindex=r}}else if("forward"==e){var i=null,n=null;for(o=0;o<t.length;o++){if(null!=(i=c(g=t[o]))){n=g.props.zindex;break}}if(null==i)return;var l=i.props.zindex,a=c(i),s=l+1;null!=a&&(s=l+(a.props.zindex-l)/2);var d=s-n;for(o=0;o<t.length;o++){(g=t[o]).props.zindex+=d}}else if("back"==e){r=Model.orderList[0].zindex;for(o=t.length-1;o>=0;o--){r-=1,(g=t[o]).props.zindex=r}}else if("backward"==e){var p=null;for(n=null,o=0;o<t.length;o++){if(null!=(p=u(g=t[o]))){n=g.props.zindex;break}}if(null==p)return;l=p.props.zindex;var h=u(p);s=l-1;null!=h&&(s=l-(l-h.props.zindex)/2);for(d=s-n,o=0;o<t.length;o++){var g;(g=t[o]).props.zindex+=d}}Model.updateMulti(t)}function c(e){for(var t=Utils.getShapeBox(e),r=0;r<Model.orderList.length;r++){var o=Model.orderList[r];if(!(o.zindex<=e.props.zindex||Utils.isSelected(o.id))){var i=Model.getShapeById(o.id),n=Utils.getShapeBox(i);if(Utils.rectCross(t,n))return i}}return null}function u(e){for(var t=Utils.getShapeBox(e),r=Model.orderList.length-1;r>=0;r--){var o=Model.orderList[r];if(!(o.zindex>=e.props.zindex||Utils.isSelected(o.id))){var i=Model.getShapeById(o.id),n=Utils.getShapeBox(i);if(Utils.rectCross(t,n))return i}}return null}}),Designer.addFunction("group",function(){var e=Utils.getSelected(),t=Utils.getSelectedIds();if(!(e.length<2)){for(var r=Utils.newId(),o=0;o<e.length;o++){var i=e[o];"linker"==i.name&&(i.from.id&&t.indexOf(i.from.id)<0&&(i.from.id=null),i.to.id&&t.indexOf(i.to.id)<0&&(i.to.id=null)),i.group=r}$("#bar_ungroup").button("enable"),Model.updateMulti(e)}}),Designer.addFunction("ungroup",function(){var e=Utils.getSelected();if(0!=e.length){for(var t=0;t<e.length;t++){e[t].group=null}$("#bar_ungroup").button("disable"),Model.updateMulti(e)}}),Designer.addFunction("lockShapes",function(){var e=Utils.getSelectedIds();if(0!=e.length){for(var t=[],r=0;r<e.length;r++){var o=Model.getShapeById(e[r]);o.locked=!0,t.push(o)}Utils.unselect(),Utils.selectShape(e),Model.updateMulti(t)}}),Designer.addFunction("unlockShapes",function(){var e=Utils.getSelectedLockedIds();if(0!=e.length){for(var t=[],r=0;r<e.length;r++){var o=Model.getShapeById(e[r]);o.locked=!1,t.push(o)}var i=Utils.getSelectedIds();Utils.unselect(),Utils.selectShape(i),Model.updateMulti(t)}}),Designer.addFunction("beautify",function(){var e=Beautify.getBeautifyDefinition();return e.updates.length>0&&(Model.updateWithBeautify(e.updates,e.content,e.theme),Utils.unselect(),$.toast({type:"success",text:"美化完成"}),!0)}),Designer.addFunction("setPageStyle",function(e){Model.updatePage(e,!0)}),Designer.addFunction("setLinkerRelation",function(e){var t={generalization:{beginArrowStyle:"dashedArrow",endArrowStyle:"none",lineStyle:"solid"},realization:{beginArrowStyle:"none",endArrowStyle:"dashedArrow",lineStyle:"dashed"},dependencies:{beginArrowStyle:"none",endArrowStyle:"normal",lineStyle:"dashed"},aggregation:{beginArrowStyle:"dashedDiamond",endArrowStyle:"none",lineStyle:"solid"},combination:{beginArrowStyle:"solidDiamond",endArrowStyle:"none",lineStyle:"solid"},association:{beginArrowStyle:"none",endArrowStyle:"normal",lineStyle:"solid"},bidirectional:{beginArrowStyle:"none",endArrowStyle:"none",lineStyle:"solid"}},r=Utils.getSelected();if(0!=r.length){for(var o=t[e].lineStyle,i=t[e].beginArrowStyle,n=t[e].endArrowStyle,l=0;l<r.length;l++){var a=r[l];"linker"==a.name&&(void 0!==o&&(a.lineStyle.lineStyle=o),void 0!==i&&(a.lineStyle.beginArrowStyle=i),void 0!==n&&(a.lineStyle.endArrowStyle=n),Designer.painter.renderShape(a))}Model.updateMulti(r),Designer.events.push("resetBrokenLinker")}}),Designer.addFunction("setLinkerMultiplicity",function(){var e=Utils.getSelected();if(0!=e.length){for(var t=[],r=0;r<e.length;r++){var o=e[r];if("linker"==o.name)Utils.isMultiplicity(o)||(o.textBlock.push({location:.05,text:"0..*",pos:"top",type:"multiplicity"}),o.textBlock.push({location:.95,text:"0..*",pos:"top",type:"multiplicity"}),Designer.painter.renderShape(o),t.push(o))}t.length>0&&Model.updateMulti(t)}}),Designer.addFunction("setReadonly",function(e){"boolean"==typeof e&&(e?(Designer.readonly=!0,$("#header-rename").addClass("readonly"),$("#po-toolbar").addClass("readonly"),$("#header-history").addClass("readonly"),$("#header-export").addClass("readonly"),$("#po-publish-button").addClass("readonly"),$("#po-tool-ai-button").addClass("readonly"),$(".po-flow-header-container .po-menu").children("li").addClass("readonly"),$(".po-flow-header-container .extend-menu").children("li").removeClass("readonly"),$("#header-export-menu li").removeClass("readonly"),$("#header-view-menu li").removeClass("readonly"),$("#header-file-menu li").eq(0).removeClass("readonly"),$("#header-file-menu li[ac='share']").removeClass("readonly"),$("#header-file-menu li[ac='print']").removeClass("readonly"),$("#header-edit-menu li[ac='find']").removeClass("readonly"),$("#po-toolbar .po-toolbar-container div").addClass("disabled"),$(".po-flow-layout").addClass("readonly"),$("#po-flow-dock-layout .dock-container").addClass("readonly"),$("#po-flow-search-replace .tab-item[ac='replace']").remove(),$("#open-insert-temp").addClass("readonly"),$("#po-foot-help").addClass("readonly"),Designer.hotkey.cancel(),Designer.op.cancel(),$(window).trigger("resize.designer"),Dock.currentView="",Designer.contextMenu.destroy(),Designer.op.canvasDraggable(),$.toast({text:"当前文件仅可查看",type:"secondary"})):(Designer.readonly=!1,$("#header-rename").removeClass("readonly"),$("#po-toolbar").removeClass("readonly"),$("#header-history").removeClass("readonly"),$("#header-export").removeClass("readonly"),$("#po-publish-button").removeClass("readonly"),$(".po-flow-header-container .po-menu").children("li").removeClass("readonly"),$("#po-toolbar .po-toolbar-container div").removeClass("disabled"),$(".po-flow-layout").removeClass("readonly"),$("#po-flow-dock-layout .dock-container").removeClass("readonly"),$("#open-insert-temp").removeClass("readonly"),$("#po-foot-help").removeClass("readonly"),Designer.hotkey.init(),Designer.op.init(),$(window).trigger("resize.designer"),Dock.currentView="",Designer.contextMenu.init()))}),Designer.addFunction("zoomIn",function(e){var t=Designer.config.scale+.1;Designer.setZoomScale(t,e)}),Designer.addFunction("zoomOut",function(e){var t=Designer.config.scale-.1;Designer.setZoomScale(t,e)}),Designer.addFunction("setZoomScale",function(e,t){(e=Math.round(100*e)/100)<.2&&(e=.2),e>2&&(e=2);var r=Designer.config.scale;if(r!=e){Designer.contextMenu.hide(),$(".po-extend-toolbar.show").removeClass("show"),Designer.config.scale=e;var o=$("#canvas_container"),i=$("#designer_canvas"),n=Model.define.page,l=n.width,a=n.height;i.css({transform:"translateZ(0) scale("+e+")"}),o.css({width:l*e,height:a*e}),Designer.op.canvasScalePoint(r,e,t),_disLineFix.disLineFix.pageScaleChange(e);var s=Utils.getSelectedIds(),d=Utils.getSelectedLockedIds();Utils.mergeArray(s,d),Utils.unselect(!1),Utils.selectShape(s,null,!1),Designer.events.push("setZoomScale")}}),Designer.addFunction("setShapeProps",function(e,t){if(t||(t=Utils.getSelected()),0!=t.length&&e){for(var r=[],o=[],i=0;i<t.length;i++){var n=t[i];if("linker"!=n.name){var l=Designer.op.changeShapeProps(n,e);r.push(n),l&&l.length&&Utils.mergeArray(o,l)}}for(i=0;i<o.length;i++){var a=o[i],s=Model.getShapeById(a);Designer.painter.renderLinker(s,!0),r.push(s)}r.length>0&&Model.updateMulti(r);var d=Utils.getSelectedIds();Utils.unselect(),Utils.selectShape(d);var p=Utils.getControlBox(d);Designer.op.changeCanvas(p)}}),Designer.addFunction("addDataAttribute",function(e){var t=Utils.getSelectedIds(),r=Model.getShapeById(t[0]);r.dataAttributes||(r.dataAttributes=[]),e.id=Utils.newId(),e.category="custom",r.dataAttributes.push(e),MessageSource.doWithoutUpdateDock(function(){Model.update(r)})}),Designer.addFunction("updateDataAttribute",function(e){var t=Utils.getSelectedIds(),r=Model.getShapeById(t[0]);r.dataAttributes||(r.dataAttributes=[]);for(var o=!1,i=0;i<r.dataAttributes.length;i++){r.dataAttributes[i].id==e.id&&(r.dataAttributes[i]=e,o=!0)}o&&(MessageSource.doWithoutUpdateDock(function(){Model.update(r)}),Designer.painter.renderShape(r))}),Designer.addFunction("getDataAttrById",function(e){var t=Utils.getSelectedIds(),r=Model.getShapeById(t[0]);r.dataAttributes||(r.dataAttributes=[]);for(var o=0;o<r.dataAttributes.length;o++){var i=r.dataAttributes[o];if(i.id==e)return i}return null}),Designer.addFunction("getDefaultDataAttrByName",function(e){var t=Utils.getSelectedIds(),r=Model.getShapeById(t[0]);r.dataAttributes||(r.dataAttributes=[]);for(var o=0;o<r.dataAttributes.length;o++){var i=r.dataAttributes[o];if("default"==i.category&&i.name==e)return i}return null}),Designer.addFunction("deleteDataAttribute",function(e){var t=Utils.getSelectedIds(),r=Model.getShapeById(t[0]);r.dataAttributes||(r.dataAttributes=[]);for(var o=!1,i=0;i<r.dataAttributes.length;i++){r.dataAttributes[i].id==e&&(r.dataAttributes.splice(i,1),o=!0)}o&&(MessageSource.doWithoutUpdateDock(function(){Model.update(r)}),Designer.painter.renderShape(r))}),Designer.addFunction("setSchema",function(schemaCategories,callback){if(0==schemaCategories.length)return Schema.empty(),Schema.init(!0),Designer.initialize.initShapes(),void(callback&&callback());poAjax({data:{categories:schemaCategories},type:"get",success:function success(data){Schema.empty(),eval(data),Schema.init(!0),Designer.initialize.initShapes(),callback&&callback()}},"schema")}),Designer.addFunction("setLaneNum",function(e){var t=Utils.getSelectedIds(),r=Model.getShapeById(t[0]),o=Utils.getLanesByPool(r),i=o.length,n=30;if(i>0&&(n=o[0].props.height[0]),MessageSource.beginBatch(),i>e){for(var l=[],a=e;a<i;a++)l.push(o[a]);Model.remove(l)}if(i<e){var s=[],d=[];if("verticalPool"==r.name){for(a=i;a<e;a++){var p=e-1!=a;(h=Model.create("verticalLane",0,0)).props.height[0]=n,h.onCreated(r,p),s.push(h),d.push(h.id),Model.define.elements[h.id]=h}Model.addMulti(s)}if("horizontalPool"==r.name){for(a=i;a<e;a++){var h;p=e-1!=a;(h=Model.create("horizontalLane",0,0)).props.height[0]=n,h.onCreated(r,p),s.push(h),d.push(h.id),Model.define.elements[h.id]=h}Model.addMulti(s)}var g=Utils.getControlBox(d);Designer.op.changeCanvas(g)}Utils.unselect(),Utils.selectShape(r.id),MessageSource.commit();var c=Utils.getControlBox([r.id]);Designer.op.changeCanvas(c)}),Designer.addFunction("setPoolOrientation",function(e){var t=Utils.getSelected()[0];if(t&&!(t.name.indexOf("Pool")<0)){var r=Utils.getContainedShapes([t])||[],o=Utils.getLinkersByShapes(r)||[],i=Utils.getLanesByPool(t)||[],n=Utils.getSeparatorsByPool(t)||[],l=Utils.getSeparatorBarsByPool(t)||[];if("horizontal"==e){if("horizontalPool"==t.name)return;t.name="horizontalPool";var a=Model.create("horizontalPool",0,0),s=Model.create("horizontalLane",0,0),d=Model.create("verticalSeparator",0,0),p=Model.create("horizontalSeparatorBar",0,0),h=Utils.copy(t.props);t.props.w=h.h,t.props.h=h.w,t.path=a.path,t.getPath=a.getPath,t.textBlock[0].position=a.textBlock[0].position,t.fontStyle.orientation="horizontal",t.resizeDir=a.resizeDir;for(var g=0;g<i.length;g++){(m=i[g]).name="horizontalLane";var c=Utils.copy(m.props);m.props.w=c.h,m.props.h=c.w,m.props.x=h.x+c.y-h.y,m.props.y=h.y+c.x-h.x,m.path=s.path,m.getPath=s.getPath,m.textBlock[0].position=s.textBlock[0].position,m.fontStyle.orientation="horizontal",m.resizeDir=s.resizeDir,Designer.painter.renderShape(m)}for(g=0;g<n.length;g++){(y=n[g]).name="verticalSeparator";c=Utils.copy(y.props);y.props.w=c.h,y.props.h=c.w,y.props.x=h.x+c.y-h.y,y.props.y=h.y+c.x-h.x,y.path=d.path,y.getPath=d.getPath,y.resizeDir=d.resizeDir,y.fontStyle=$.extend(!0,y.fontStyle,d.fontStyle),delete y.fontStyle.orientation,y.textBlock[0].position=d.textBlock[0].position,y.resizeDir=d.resizeDir,Designer.painter.renderShape(y)}for(g=0;g<l.length;g++){(v=l[g]).name="horizontalSeparatorBar";c=Utils.copy(v.props);v.props.w=c.h,v.props.h=c.w,v.props.x=h.x+c.y-h.y,v.props.y=h.y+c.x-h.x,v.path=p.path,v.getPath=p.getPath,v.getTextBlock=p.getTextBlock,v.resizeDir=p.resizeDir,v.fontStyle=$.extend(!0,v.fontStyle,p.fontStyle),delete v.fontStyle.orientation,Designer.painter.renderShape(v)}Designer.painter.renderShape(t)}else{if("verticalPool"==t.name)return;t.name="verticalPool";a=Model.create("verticalPool",0,0),s=Model.create("verticalLane",0,0);var u=Model.create("horizontalSeparator",0,0),f=Model.create("verticalSeparatorBar",0,0);h=Utils.copy(t.props);t.props.w=h.h,t.props.h=h.w,t.path=a.path,t.getPath=a.getPath,t.textBlock[0].position=a.textBlock[0].position,t.fontStyle.orientation="vertical",t.resizeDir=a.resizeDir;for(g=0;g<i.length;g++){var m;(m=i[g]).name="verticalLane";c=Utils.copy(m.props);m.props.w=c.h,m.props.h=c.w,m.props.x=h.x+c.y-h.y,m.props.y=h.y+c.x-h.x,m.path=s.path,m.getPath=s.getPath,m.textBlock[0].position=s.textBlock[0].position,m.fontStyle.orientation="vertical",m.resizeDir=s.resizeDir,Designer.painter.renderShape(m)}for(g=0;g<n.length;g++){var y;(y=n[g]).name="horizontalSeparator";c=Utils.copy(y.props);y.props.w=c.h,y.props.h=c.w,y.props.x=h.x+c.y-h.y,y.props.y=h.y+c.x-h.x,y.path=u.path,y.getPath=u.getPath,y.resizeDir=u.resizeDir,y.fontStyle=$.extend(!0,y.fontStyle,u.fontStyle),y.fontStyle.orientation="horizontal",y.resizeDir=u.resizeDir,y.textBlock[0].position=u.textBlock[0].position,Designer.painter.renderShape(y)}for(g=0;g<l.length;g++){var v;(v=l[g]).name="verticalSeparatorBar";c=Utils.copy(v.props);v.props.w=c.h,v.props.h=c.w,v.props.x=h.x+c.y-h.y,v.props.y=h.y+c.x-h.x,v.path=f.path,v.getPath=f.getPath,v.getTextBlock=f.getTextBlock,v.resizeDir=f.resizeDir,v.fontStyle=$.extend(!0,v.fontStyle,f.fontStyle),v.fontStyle.orientation="horizontal",Designer.painter.renderShape(v)}Designer.painter.renderShape(t)}for(g=0;g<r.length;g++){var S=r[g];c=Utils.copy(S.props);S.props.x=h.x+(c.y+c.h/2-h.y)-c.w/2,S.props.y=h.y+(c.x+c.w/2-h.x)-c.h/2,Designer.painter.renderShape(S)}for(g=0;g<o.length;g++){var x=o[g];if(x.from.id)var w=Model.getShapeById(x.from.id),M=w.getAnchors();else M=[Utils.copy(x.from)];if(x.to.id)var U=Model.getShapeById(x.to.id),D=U.getAnchors();else D=[Utils.copy(x.to)];for(var k=null,b=0;b<M.length;b++){var C=M[b];if(x.from.id)var I={x:C.x+w.props.x,y:C.y+w.props.y};else I=C;for(var A=0;A<D.length;A++){var B=D[A];if(x.to.id)var j={x:B.x+U.props.x,y:B.y+U.props.y};else j=B;var F=Utils.measureDistance(I,j);null==k&&(k={to:j,from:I,distance:F}),F<k.distance&&(k={to:j,from:I,distance:F})}}if(x.points=[],x.to=$.extend(!0,x.to,k.to),x.from=$.extend(!0,x.from,k.from),x.to.id){var z=Utils.getPointAngle(x.to.id,x.to.x,x.to.y,7);x.to.angle=z}if(x.from.id){var P=Utils.getPointAngle(x.from.id,x.from.x,x.from.y,7);x.from.angle=P}Designer.painter.renderLinker(x,!0)}var L=i.concat(l).concat(n).concat(r).concat(o).concat([t]);Model.updateMulti(L),Utils.unselect(),Utils.selectShape(t.id);var R=Utils.getControlBox([t.id]);Designer.op.changeCanvas(R)}}),Designer.addFunction("setPoolText",function(e){var t=Utils.getSelected()[0];if(t&&!(t.name.indexOf("Pool")<0)){for(var r=Utils.getLanesByPool(t)||[],o=(Utils.getSeparatorsByPool(t),Utils.getSeparatorBarsByPool(t),r.concat([t])),i=function(){var e,t,r;(l=o[n]).fontStyle.orientation="horizontal",l.textBlock[0].text=(e=l.textBlock[0].text?l.textBlock[0].text:"",t="",function e(r){for(var o=0,i=r.length;o<i;o++)"#text"==r[o].nodeName&&(t+=r[o].data),e(r[o].childNodes)}((r=$("<div>"+e+"</div>").appendTo("body"))[0].childNodes),r.remove(),t),Designer.painter.renderShape(l)},n=0;n<o.length;n++)i();if("horizontal"==e)for(n=0;n<o.length;n++){(l=o[n]).fontStyle.orientation="horizontal",Designer.painter.renderShape(l)}else for(n=0;n<o.length;n++){var l;delete(l=o[n]).fontStyle.orientation,Designer.painter.renderShape(l)}Model.updateMulti(o),UI.update()}}),Designer.addFunction("setGridNum",function(obj){for(var shape=Utils.getSelected()[0],path=shape.path,props=shape.props,h=props.h,w=props.w,rowVal=path.length,columnVal=path[0].length,oldRowVal=rowVal,oldColumnVal=columnVal,type=obj.type,val=obj.val,rowIndex=obj.rowIndex||rowVal,columnIndex=obj.columnIndex||columnVal,direction=obj.direction||"after",rowHArr=[],columnWArr=[],delIndexs=[],i=0;i<path.length;i++){var pathItem=path[i],rowH=eval("var w="+w+";var h = "+h+";"+pathItem[0].actions[0].h);rowH=Math.round(1e4*rowH)/1e4,rowHArr.push(rowH)}for(var i=0;i<path[0].length;i++){var pathItem=path[0][i],columnW=eval("var w="+w+";var h = "+h+";"+pathItem.actions[0].w);columnW=Math.round(1e4*columnW)/1e4,columnWArr.push(columnW)}var mergeRows=[],mergeColumns=[],newMergeRows=[],newMergeColumns=[];if(shape.merge)for(var gridMerge=shape.merge||[],i=0;i<gridMerge.length;i++){for(var gridMgs=gridMerge[i],mgRs=[],mgCs=[],j=0;j<gridMgs.length;j++){var mergeI=gridMgs[j],mergeR=Math.floor(mergeI/oldColumnVal),mergeC=mergeI%oldColumnVal;mgRs.push(mergeR),mgCs.push(mergeC)}mergeRows.push(mgRs),mergeColumns.push(mgCs)}if("row"==type){if(val>0){for(var copyRowH=rowHArr[rowIndex-1],copyPath=path[rowIndex-1],i=0;i<val;i++){if("after"==direction){rowHArr.splice(rowIndex,0,copyRowH),path.splice(rowIndex,0,copyPath);for(var j=0;j<columnVal;j++)shape.textBlock.splice(rowIndex*columnVal+j,0,{})}if("before"==direction){rowHArr.splice(rowIndex-1,0,copyRowH),path.splice(rowIndex-1,0,copyPath);for(var j=0;j<columnVal;j++)shape.textBlock.splice((rowIndex-1)*columnVal+j,0,{})}}for(var i=0;i<mergeRows.length;i++){var mergeRow=mergeRows[i];if(mergeRow[0]>=rowIndex-1&&"before"==direction||mergeRow[0]>rowIndex-1&&"after"==direction)for(var j=0;j<mergeRow.length;j++)mergeRow[j]=mergeRow[j]+val}h+=copyRowH*val}if(val<0){val=Math.abs(val);for(var delHs=rowHArr.splice(rowIndex-val,val),i=0;i<delHs.length;i++)h-=delHs[i];path.splice(rowIndex-val,val),shape.textBlock.splice((rowIndex-val)*columnVal,val*columnVal);for(var i=0;i<mergeRows.length;i++){for(var mergeRow=mergeRows[i],mergeColumn=mergeColumns[i],newMergeRow=[],newMergeColumn=[],j=0;j<mergeRow.length;j++){var mergeR=mergeRow[j],mergeC=mergeColumn[j];rowIndex-val>mergeR?(newMergeRow.push(mergeR),newMergeColumn.push(mergeC)):rowIndex<=mergeR&&(newMergeRow.push(mergeR-val),newMergeColumn.push(mergeC))}newMergeRow.length>1&&(newMergeRows.push(newMergeRow),newMergeColumns.push(newMergeColumn))}mergeRows=newMergeRows,mergeColumns=newMergeColumns}rowVal=rowHArr.length}if("column"==type){if(val>0){for(var copyColumnW=columnWArr[columnIndex-1],copyPath=[],i=0;i<path.length;i++){var p=path[i];copyPath.push(p[columnIndex-1])}for(var i=0;i<val;i++){if("after"==direction){columnWArr.splice(columnIndex,0,copyColumnW);for(var j=0;j<path.length;j++){var p=path[j];p.splice(columnIndex,0,copyPath[j]);var columnNum=0==j?columnVal+i:columnVal+i+1;shape.textBlock.splice(j*columnNum+columnIndex,0,{})}}if("before"==direction){columnWArr.splice(columnIndex-1,0,copyColumnW);for(var j=0;j<path.length;j++){var p=path[j];p.splice(columnIndex-1,0,copyPath[j]);var columnNum=0==j?columnVal+i:columnVal+i+1;shape.textBlock.splice(j*columnNum+columnIndex-1,0,{})}}}for(var i=0;i<mergeColumns.length;i++){var mergeColumn=mergeColumns[i];if(mergeColumn[0]>=columnIndex-1&&"before"==direction||mergeColumn[0]>columnIndex-1&&"after"==direction)for(var j=0;j<mergeColumn.length;j++)mergeColumn[j]=mergeColumn[j]+val}w+=copyColumnW*val}if(val<0){val=Math.abs(val);for(var delWs=columnWArr.splice(columnIndex-val,val),i=0;i<delWs.length;i++)w-=delWs[i];for(var j=0;j<path.length;j++){var p=path[j];p.splice(columnIndex-val,val);var columnNum=0==j?columnVal:columnVal-val;shape.textBlock.splice(j*columnNum+columnIndex-val,val)}for(var i=0;i<mergeColumns.length;i++){for(var mergeColumn=mergeColumns[i],mergeRow=mergeRows[i],newMergeColumn=[],newMergeRow=[],j=0;j<mergeColumn.length;j++){var mergeC=mergeColumn[j],mergeR=mergeRow[j];columnIndex-val>mergeC?(newMergeColumn.push(mergeC),newMergeRow.push(mergeR)):columnIndex<=mergeC&&(newMergeColumn.push(mergeC-val),newMergeRow.push(mergeR))}newMergeColumn.length>1&&(newMergeColumns.push(newMergeColumn),newMergeRows.push(newMergeRow))}mergeColumns=newMergeColumns,mergeRows=newMergeRows}columnVal=columnWArr.length}for(var newMerge=[],i=0;i<mergeRows.length;i++){for(var mrs=mergeRows[i],mcs=mergeColumns[i],newM=[],j=0;j<mrs.length;j++){var mr=mrs[j],mc=mcs[j];newM.push(mr*columnVal+mc)}newM.length>1&&newMerge.push(newM)}shape.merge=newMerge;for(var path_=Utils.copyArray(path),textBlock=[],rowH_=0,i=0;i<rowHArr.length;i++){var rowH=rowHArr[i],columnW_=0;rowH_+=rowH;for(var j=0;j<columnWArr.length;j++){var columnW=columnWArr[j];columnW_+=columnW;var x1="w*"+Math.round((columnW_-columnW)/w*1e4)/1e4,y1="h*"+Math.round((rowH_-rowH)/h*1e4)/1e4,w1="w*"+Math.round(columnW/w*1e4)/1e4,h1="h*"+Math.round(rowH/h*1e4)/1e4;j==columnWArr.length-1&&(w1="w-"+x1),i==rowHArr.length-1&&(h1="h-"+y1),path_[i][j].actions=[{action:"rect",x:x1,y:y1,w:w1,h:h1}];var textPos={x:x1,y:y1,w:w1,h:h1},textObj=shape.textBlock[i*columnVal+j],text=textObj?textObj.text:"";textObj&&textObj.fontStyle?textBlock.push({position:textPos,text:text,fontStyle:textObj.fontStyle}):textBlock.push({position:textPos,text:text})}}for(var outlinkers=Utils.getOutlinkers([shape]),i=0;i<outlinkers.length;i++){var linker=outlinkers[i];linker.from.id==shape.id&&(Math.abs(linker.from.x-shape.props.x-shape.props.w)<2&&(linker.from.x=linker.from.x+(w-shape.props.w)),Math.abs(linker.from.y-shape.props.y-shape.props.h)<2&&(linker.from.y=linker.from.y+(h-shape.props.h))),linker.to.id==shape.id&&(Math.abs(linker.to.x-shape.props.x-shape.props.w)<2&&(linker.to.x=linker.to.x+(w-shape.props.w)),Math.abs(linker.to.y-shape.props.y-shape.props.h)<2&&(linker.to.y=linker.to.y+(h-shape.props.h))),Designer.painter.renderLinker(linker,!0)}shape.textBlock=textBlock,shape.path=path_,shape.props.h=h,shape.props.w=w,Schema.initShapeFunctions(shape),Designer.painter.renderShape(shape);var shapes=outlinkers.concat([shape]);Model.updateMulti(shapes);var gridSelectObj=Utils.gridSelectObj;if(Utils.unselect(),Utils.selectShape(shape.id),gridSelectObj.indexs.length>0){var rs=gridSelectObj.rows,cs=gridSelectObj.columns,r=rs[rs.length-1],c=cs[cs.length-1];r=r>rowVal-1?rowVal-1:r,c=c>columnVal-1?columnVal-1:c,"before"==direction&&("row"==type?r+=1:"column"==type&&(c+=1));var index=r*columnVal+c;Utils.selectGrid(shape,[index])}Designer.op.changeCanvas(shape.props)}),Designer.addFunction("mergeGrid",function(){if(Utils.isMergeGrid()){var e=Utils.gridSelectObj,t=Model.getShapeById(e.id),r=t.merge||[],o=[];o.push(e.indexs);for(var i=0;i<r.length;i++)e.indexs.indexOf(r[i][0])<0&&o.push(r[i]);for(i=1;i<e.indexs.length;i++){var n=e.indexs[i],l=e.rows[i],a=e.columns[i];delete t.path[l][a].fillStyle,delete t.textBlock[n].text,delete t.textBlock[n].fontStyle}t.merge=o,Schema.initShapeFunctions(t),Designer.painter.renderShape(t),Model.update(t),Utils.unselect(),Utils.selectShape(t.id)}}),Designer.addFunction("splitGrid",function(){if(Utils.isSplitGrid()){for(var e=Utils.gridSelectObj,t=Model.getShapeById(e.id),r=[],o=e.indexs,i=0;i<t.merge.length;i++){var n=t.merge[i][0];o.indexOf(n)<0&&r.push(t.merge[i])}t.merge=r,Designer.painter.renderShape(t),Model.update(t),Utils.unselect(),Utils.selectShape(t.id)}}),Designer.addFunction("renderSchemaJs",function(e,t){var r=document,o=(this.jsVersion,r.createElement("script"));o.setAttribute("type","text/javascript"),o.setAttribute("src","/scripts_bin/zh/diagraming/schema/categories/"+e+".js"),o.setAttribute("charset","UTF-8"),r.body.appendChild(o),o.onload=function(){Schema.init(!0),t()}}),Designer.addFunction("setChartType",function(e){var t=Utils.getSelectedIds()[0],r=Model.getShapeById(t),o=$("#"+t),i=r.drawChart;if(i.canvas&&$.extend(!0,i.options,i.canvas),r&&e){var n,l,a,s,d,p,h,g=r.name.split("_").slice(-2).join("_")+"_2_"+e.split("_").slice(-2).join("_"),c=(r.name.split("_").slice(-2,-1)[0],e.split("_").slice(-2,-1)[0]),u=e.split("_").slice(0,2).join("_"),f=_chartconfig.changeOptions[g],m=null!==(n=null==i||null===(l=i.options)||void 0===l?void 0:l.data)&&void 0!==n?n:[],y=Object.keys(m[0]),v=null!==(a=null==i||null===(s=i.options)||void 0===s?void 0:s.xField)&&void 0!==a?a:y[0],S=null!==(d=null==i||null===(p=i.options)||void 0===p?void 0:p.yField)&&void 0!==d?d:y[1];null==i||null===(h=i.options)||void 0===h||h.seriesField;if(f){var x,w,M=null!==(x=null==f?void 0:f.change)&&void 0!==x?x:{},U=null!==(w=null==f?void 0:f.del)&&void 0!==w?w:[];for(var D in M)"seriesField"===D&&"xField"===M[D]?(i.options.seriesField="bar"===c?S:v,i.canvas.seriesField="bar"===c?S:v):"seriesField"!==D||y.includes("seriesField")?"seriesField"===D&&"seriesField"===M[D]?(i.options.seriesField="seriesField",i.canvas.seriesField="seriesField"):i.canvas[D]?(i.canvas[D]=M[D],i.options[D]=M[D]):i.options[D]=M[D]:(delete i.options.seriesField,delete i.canvas.seriesField);U.length>0&&U.map(function(e){return delete i.options[e]}),r.category=u,r.name=e,r.title=_chartconfig.typeToTitle[c],Designer.painter.drawChart(o[0],r),o.children("div:first").remove(),Model.update(r),_chartconfig.changeType[e]?$(".pop-sub-editor>div[data-key='changeType']").removeClass("disabled"):$(".pop-sub-editor>div[data-key='changeType']").addClass("disabled"),$("#po-chart-toolbar-type-menu").hide(),$("#po-chart-toolbar-type").removeClass("selected")}}}),Designer.addFunction("renderPage",function(e,t,r){Utils.unselect(),MessageSource.redoStack.stack=[],MessageSource.undoStack.stack=[],Designer.events.push("undoStackChanged",0),Designer.events.push("redoStackChanged",0),Designer.initialize.initialized=!1,Designer.open(t,e),Designer.initialize.initialized=!0,r&&Designer.initialize.initPage("select"),window.UI&&UI.update(),"undefined"!=typeof isView?Designer.events.push("viewUpdate"):(window.publicCLB.sendPageId(e),window.sendMessage.initVersion()),$("#po-global-loading-wrap").fadeOut()}),Designer.addFunction("updateShapeToImg",function(e){_disLineFix.disLineFix.updateImg(e,!0)});
},{"./chartconfig.json":"uKLG","./disLineFix":"HtMi"}],"Sk2s":[function(require,module,exports) {
var o={definition:{},beautifyDefinition:{},content:{},config:{size:8,pos:12,sizeInterval:60,color:60,linkerInterval:8},getBeautifyDefinition:function(){return this.definition=Utils.copy(Model.define.elements),this.beautifyDefinition=Utils.copy(Model.define.elements),this.reviewText(),this.reviewSize(),this.reviewPosition(),this.reviewLinker(),this.update(),this.reviewColor(),this.reviewLane(),this.content},addContainer:function(){var o=this.beautifyDefinition,r=[];for(key in o)r.push(o[key]);for(var t=[],n=0;n<r.length;n++){if(""==(h=r[n]).parent&&h.attribute.container&&"linker"!==h.name){var e=h.props.x,i=h.props.x+h.props.w,p=h.props.y,s=h.props.y+h.props.h,a={id:h.id,x1:e,x2:i,y1:p,y2:s};t.push(a),h.containerChildren=[]}}for(n=0;n<r.length;n++){var h;if(!(""==(h=r[n]).parent&&h.attribute.container)&&t.length>0&&"linker"!==h.name)for(var l=0;l<t.length;l++){var f=t[l];if(void 0===h.container){e=h.props.x,i=h.props.x+h.props.w,p=h.props.y,s=h.props.y+h.props.h;var y=e>f.x1&&e<f.x2&&i>f.x1&&i<f.x2,d=p>f.y1&&p<f.y2&&s>f.y1&&s<f.y2;y&&d&&(h.container=f.id,o[f.id].containerChildren.push(h.id))}else h.container==f.id&&o[f.id].containerChildren.push(h.id)}}this.beautifyDefinition=o},reviewText:function(){var o=this.beautifyDefinition;$(".shape_box").each(function(){var r=$(this),t=r.attr("id"),n=o[t].props.h;if(r.children(".text_canvas").length>0){var e=r.children(".text_canvas").height();n<e&&(o[t].props.y=o[t].props.y-(e-n)/2,o[t].props.h=e)}}),this.beautifyDefinition=o},reviewSize:function(){var r=this.beautifyDefinition,t=[];for(key in r)t.push(r[key]);for(var n=[],e=[],i=o.config.size,p=0;p<t.length;p++)if(o.util.isShape(t[p])){var s=t[p].props.w,a=t[p].props.h,h=parseInt(s/i),l=parseInt(a/i);n.push({id:t[p].id,midWVal:h,w:s}),e.push({id:t[p].id,midHVal:l,h:a})}if(0!=n.length){n=o.util.midArrConcat(n,"midWVal"),e=o.util.midArrConcat(e,"midHVal");for(p=0;p<n.length;p++){for(var f=n[p].ids,y=0,d=0,g=0;g<f.length;g++)y+=f[g].w;d=y/f.length,n[p].meanVal=d}for(p=0;p<n.length;p++)for(g=p;g<n.length;g++)Math.abs(n[p].meanVal-n[g].meanVal)<i/2&&p!=g&&(n[p].ids=n[p].ids.concat(n[g].ids),n[g].ids=[]);for(p=0;p<n.length;p++){for(f=n[p].ids,y=0,d=0,g=0;g<f.length;g++)y+=f[g].w;d=y/f.length,n[p].meanVal=d}for(p=0;p<n.length;p++){if((f=n[p].ids).length>1)for(g=0;g<f.length;g++){r[f[g].id].props.w=Math.ceil(n[p].meanVal)}}for(p=0;p<e.length;p++){for(f=e[p].ids,y=0,d=0,g=0;g<f.length;g++)y+=f[g].h;d=y/f.length,e[p].meanVal=d}for(p=0;p<e.length;p++)for(g=p;g<e.length;g++)Math.abs(e[p].meanVal-e[g].meanVal)<i/2&&p!=g&&(e[p].ids=e[p].ids.concat(e[g].ids),e[g].ids=[]);for(p=0;p<e.length;p++){for(f=e[p].ids,y=0,d=0,g=0;g<f.length;g++)y+=f[g].h;d=y/f.length,e[p].meanVal=d}for(p=0;p<e.length;p++){if((f=e[p].ids).length>1)for(g=0;g<f.length;g++){r[f[g].id].props.h=Math.ceil(e[p].meanVal)}}this.beautifyDefinition=r}},reviewPosition:function(){var r=this.beautifyDefinition,t=[];for(key in r)t.push(r[key]);for(var n=[],e=[],i=o.config.pos,p=o.config.sizeInterval,s=0;s<t.length;s++)if("linker"!=t[s].name&&0==t[s].children.length&&""==t[s].parent){var a=t[s].id,h=t[s].props.w,l=t[s].props.h,f=(b=t[s].props.x)+h/2,y=(w=t[s].props.y)+l/2,d=parseInt(f/i),g=parseInt(y/i);n.push({id:a,midXVal:d,x_:f,x:b,w:h,h:l}),e.push({id:a,midYVal:g,y_:y,y:w,w:h,h:l})}if(0!=n.length){n=o.util.midArrConcat(n,"midXVal"),e=o.util.midArrConcat(e,"midYVal");for(s=0;s<n.length;s++){for(var c=n[s].ids,u=0,v=0,x=0;x<c.length;x++)u+=c[x].x_;v=u/c.length,n[s].meanVal=v}for(s=0;s<n.length;s++)for(x=s;x<n.length;x++)Math.abs(n[s].meanVal-n[x].meanVal)<i/2&&s!=x&&(n[s].ids=n[s].ids.concat(n[x].ids),n[x].ids=[]);for(s=0;s<n.length;s++){for(c=n[s].ids,u=0,v=0,x=0;x<c.length;x++)u+=c[x].x_;v=u/c.length,n[s].meanVal=v}for(s=0;s<n.length;s++){if((c=n[s].ids).length>1)for(x=0;x<c.length;x++)for(var m=0;m<c.length;m++)Math.abs(c[x].w-c[m].w)>p&&Math.abs(c[x].h-c[m].h)>p&&(c[x].id=x)}for(s=0;s<n.length;s++){if((c=n[s].ids).length>1)for(x=0;x<c.length;x++){a=c[x].id;var b=c[x].x+(Math.ceil(n[s].meanVal)-c[x].x_);null!=r[a]&&(r[a].props.x=b)}}for(s=0;s<e.length;s++){for(c=e[s].ids,u=0,v=0,x=0;x<c.length;x++)u+=c[x].y_;v=u/c.length,e[s].meanVal=v}for(s=0;s<e.length;s++)for(x=s;x<e.length;x++)Math.abs(e[s].meanVal-e[x].meanVal)<i/2&&s!=x&&(e[s].ids=e[s].ids.concat(e[x].ids),e[x].ids=[]);for(s=0;s<e.length;s++){if((c=e[s].ids).length>1)for(x=0;x<c.length;x++)for(m=0;m<c.length;m++)Math.abs(c[x].w-c[m].w)>p&&Math.abs(c[x].h-c[m].h)>p&&(c[x].id=x)}for(s=0;s<e.length;s++){for(c=e[s].ids,u=0,v=0,x=0;x<c.length;x++)u+=c[x].y_;v=u/c.length,e[s].meanVal=v}for(s=0;s<e.length;s++){if((c=e[s].ids).length>1)for(x=0;x<c.length;x++){a=c[x].id;var w=c[x].y+(Math.ceil(e[s].meanVal)-c[x].y_);null!=r[a]&&(r[a].props.y=w)}}this.beautifyDefinition=r}},reviewLinker:function(){var r=this.beautifyDefinition,t=o.definition,n=[],e=Model.define.theme;null!=e&&"{}"!=JSON.stringify(e)||(e={linker:{lineStyle:{lineWidth:2}}});var i=o.config.linkerInterval;for(key in r)n.push(r[key]);for(var p=0;p<n.length;p++)if("linker"==n[p].name){n[p],n[p].id;var s=n[p].to.id,a=n[p].to.x,h=n[p].to.y,l=n[p].from.id,f=n[p].from.x,y=n[p].from.y,d=n[p].linkerType,g=n[p].points;if(null!=s){var c=r[s].props.x,u=r[s].props.x+r[s].props.w,v=r[s].props.x+r[s].props.w/2,x=r[s].props.y,m=r[s].props.y+r[s].props.h,b=r[s].props.y+r[s].props.h/2,w=t[s].props.x,S=t[s].props.x+t[s].props.w,M=t[s].props.x+t[s].props.w/2,k=t[s].props.y,V=t[s].props.y+t[s].props.h,D=t[s].props.y+t[s].props.h/2;Math.abs(a-w)<1?(a=c,h+=b-D,"broken"==d&&(g[g.length-1].y=h)):Math.abs(a-S)<1?(a=u,h+=b-D,"broken"==d&&(g[g.length-1].y=h)):Math.abs(h-k)<1?(a+=v-M,h=x,"broken"==d&&(g[g.length-1].x=a)):Math.abs(h-V)<1&&(a+=v-M,h=m,"broken"==d&&(g[g.length-1].x=a))}if(null!=l){c=r[l].props.x,u=r[l].props.x+r[l].props.w,v=r[l].props.x+r[l].props.w/2,x=r[l].props.y,m=r[l].props.y+r[l].props.h,b=r[l].props.y+r[l].props.h/2,w=t[l].props.x,S=t[l].props.x+t[l].props.w,M=t[l].props.x+t[l].props.w/2,k=t[l].props.y,V=t[l].props.y+t[l].props.h,D=t[l].props.y+t[l].props.h/2;Math.abs(f-w)<1?(f=c,y+=b-D,"broken"==d&&(g[0].y=y)):Math.abs(f-S)<1?(f=u,y+=b-D,"broken"==d&&(g[0].y=y)):Math.abs(y-k)<1?(f+=v-M,y=x,"broken"==d&&(g[0].x=f)):Math.abs(y-V)<1&&(f+=v-M,y=m,"broken"==d&&(g[0].x=f))}if("broken"==n[p].linkerType){g=n[p].points;if(2==n[p].points.length)g[0].x==g[1].x?Math.abs(g[0].y-g[1].y)<i&&g[0].y!=g[1].y&&(n[p].points[0].y=h,n[p].points[1].y=h,y=h):Math.abs(g[0].x-g[1].x)<i&&g[0].x!=g[1].x&&(n[p].points[0].x=a,n[p].points[1].x=a,f=a);else if(n[p].points.length>2){var _=g[0],C=g[1],z=g[g.length-1],I=g[g.length-2],O=Utils.measureDistance(_,C),J=Utils.measureDistance(z,I);if(O<i-2){g.splice(0,2);c=g[0].x,x=g[0].y;Math.abs(f-c)<i-2&&(g[0].x=f),Math.abs(y-x)<i-2&&(g[0].y=y)}if(J<i-2){g.splice(g.length-2,2);u=g[g.length-1].x,m=g[g.length-1].y;Math.abs(a-u)<i-2&&(g[g.length-1].x=a),Math.abs(h-m)<i-2&&(g[g.length-1].y=h)}n[p].points=g}}n[p].to.x=a,n[p].to.y=h,n[p].from.x=f,n[p].from.y=y}this.beautifyDefinition=r},reviewLane:function(){var r=this.beautifyDefinition,t=o.definition,n=[];for(var e in r){var i=r[e],p=i.props.height&&i.props.height[0]?i.props.height[0]:40;if(i.children&&i.children.length)if("verticalPool"==i.name){for(var s=[],a=[],h=0,l=0,f=i.children.length;l<f;l++){n.push(i.children[l]);var y=r[i.children[l]];"verticalLane"==y.name?s.push(y):"horizontalSeparator"==y.name?a.push(y):"verticalSeparatorBar"==y.name&&(y.props.x=i.props.x,y.props.y=i.props.y+p,y.props.h=i.props.h-p,h=y.props.w)}s.sort(function(o,r){return o.props.x-r.props.x}),a.sort(function(o,r){return o.props.y-r.props.y});for(var d=0;d<s.length;d++){var g=s[d];g.props.y=i.props.y+p,g.props.h=i.props.h-p,g.props.x=0==d?i.props.x+h:s[d-1].props.x+s[d-1].props.w,d==s.length-1&&(g.props.w=i.props.x+i.props.w-g.props.x)}for(var c=0;c<a.length;c++){var u=a[c];u.props.x=i.props.x,u.props.w=i.props.w,u.props.y=0==c?i.props.y+p:a[c-1].props.y+a[c-1].props.h,c==a.length-1&&(u.props.h=i.props.y+i.props.h-u.props.y)}}else if("horizontalPool"==i.name){for(var v=[],x=[],m=0,b=0;b<i.children.length;b++){n.push(i.children[b]);var w=r[i.children[b]];"horizontalLane"==w.name?v.push(w):"verticalSeparator"==w.name?x.push(w):"horizontalSeparatorBar"==w.name&&(w.props.x=i.props.x+p,w.props.y=i.props.y,w.props.w=i.props.w-p,m=w.props.h)}v.sort(function(o,r){return o.props.y-r.props.y}),x.sort(function(o,r){return o.props.x-r.props.x});for(var S=0;S<v.length;S++){var M=v[S];M.props.x=i.props.x+p,M.props.w=i.props.w-p,M.props.y=0==S?i.props.y+m:v[S-1].props.y+v[S-1].props.h,S==v.length-1&&(M.props.h=i.props.y+i.props.h-M.props.y)}for(var k=0;k<x.length;k++){var V=x[k];V.props.y=i.props.y,V.props.h=i.props.h,V.props.x=0==k?i.props.x+p:x[k-1].props.x+x[k-1].props.w,k==x.length-1&&(V.props.w=i.props.x+i.props.w-V.props.x)}}}this.beautifyDefinition=r;var D=this.content.updates,_=this.content.content;if(n.length)for(var C=0;C<n.length;C++){var z=n[C],I=r[z],O=t[z],J=I.props,N=O.props;JSON.stringify(J)!=JSON.stringify(N)&&(D.push({id:I.id,name:I.name,props:J}),_.push({id:O.id,name:O.name,props:N}))}},reviewColor:function(){var r=this.content.updates,t=this.content.content,n=Model.define.theme;null!=n&&"{}"!=JSON.stringify(n)&&"[object String]"!=Object.prototype.toString.call(n)||(n={shape:{fillStyle:{color:"255,255,255"},fontStyle:{color:"50,50,50"}}});var e=this.beautifyDefinition,i=o.definition,p=[],s=n.shape.fillStyle,a=n.shape.fontStyle,h=[],l=[];for(key in e)p.push(e[key]);for(var f=0;f<p.length;f++){var y=p[f],d=y.id;if("linker"!=y.name){var g=y.fillStyle.color?y.fillStyle.color:s.color,c=y.fontStyle.color?y.fontStyle.color:a.color;if(g&&c)for(var u=g.split(","),v=c.split(","),x=0;x<3&&Math.abs(u[x]-v[x])<o.config.color;x++)2==x&&(v[0]=255-v[0],v[1]=255-v[1],v[2]=255-v[2],y.fontStyle.color=v.join(","),h.push({id:d,fontStyle:y.fontStyle}),l.push({id:d,fontStyle:i[d].fontStyle}))}}if(h.length>0){for(f=0;f<h.length;f++){var m=h[f],b=(d=m.id,l[f]);for(x=0;x<r.length;x++){var w=r[x];id_=w.id,d==id_&&(w.fontStyle=m.fontStyle,t[x].fontStyle=b.fontStyle,h.splice(f,1),l.splice(f,1),f--)}}r=r.concat(h),t=t.concat(l),this.content.updates=r,this.content.content=t}},update:function(){var r=this.beautifyDefinition,t=o.definition,n=[],e=[];for(var i in r){var p=r[i],s=t[i];if(o.util.isShape(p)){var a={},h={},l=p.props.x,f=p.props.y,y=p.props.w,d=p.props.h,g=s.props.x,c=s.props.y,u=s.props.w,v=s.props.h;(Math.abs(l-g)>0||Math.abs(f-c)>0||Math.abs(y-u)>0||Math.abs(d-v)>0)&&(a=p.props,h=s.props);var x="",m="";if(p.fontStyle.color&&p.fontStyle.color!=s.fontStyle.color&&(x=p.fontStyle.color,m=s.fontStyle.color),"{}"!=JSON.stringify(a)||""!=x){var b={id:p.id,name:p.name},w={id:s.id,name:s.name};a!={}&&(b.props=a,w.props=h),""!=x&&(b.fontStyle={},w.fontStyle={},b.fontStyle.color=x,w.fontStyle.color=m),e.push(b),n.push(w)}}if("linker"==p.name){var S=p.from.x,M=p.from.y,k=p.to.x,V=p.to.y,D=p.points,_=s.from.x,C=s.from.y,z=s.to.x,I=s.to.y,O=s.points,J={},N={},L={},A={};if(Math.abs(S-_)>0||Math.abs(M-C)>0||Math.abs(k-z)>0||Math.abs(V-I)>0||D.length!=O.length){S==_&&M==C||(J=p.from,L=s.from),k==z&&V==I||(N=p.to,A=s.to);var B={id:p.id,name:p.name,points:D},P={id:s.id,name:s.name,points:O};"{}"!=JSON.stringify(J)&&(B.from=J,P.from=L),"{}"!=JSON.stringify(N)&&(B.to=N,P.to=A),e.push(B),n.push(P)}}}e.length,this.content.updates=e,this.content.content=n},util:{midArrConcat:function(o,r){var t=[];return function n(){for(var e=o[0][r],i={mid:e,ids:[]},p=0;p<o.length;p++)e==o[p][r]&&(i.ids.push(o[p]),o.splice(p,1),p--);t.push(i),o.length>0&&n()}(),t},isShape:function(o){return"linker"!=o.name&&0==o.children.length&&""==o.parent&&0==o.attribute.container}}};window.Beautify=o;
},{}],"tLUA":[function(require,module,exports) {
function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(r){o(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function o(e,r,n){return(r=d(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function t(e){return l(e)||s(e)||a(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,r){if(e){if("string"==typeof e)return c(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,r):void 0}}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e){if(Array.isArray(e))return c(e)}function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}function v(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,d(o.key),o)}}function f(e,r,n){return r&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(r){var n=g(r,"string");return"symbol"===e(n)?n:String(n)}function g(r,n){if("object"!==e(r)||null===r)return r;var o=r[Symbol.toPrimitive];if(void 0!==o){var t=o.call(r,n||"default");if("object"!==e(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(r)}var h=function(){function e(r){v(this,e),r&&(this.chartId=r.chartId,this.definitionId=r.chartObj.definitionId,this.userId=r.userId,this.fullName=r.fullName,this.deviceType=r.deviceType,this.saveTextDom=r.saveTextDom,this.renderOffText=r.renderOffText,this.readonly=r.readonly),this.isOffLine=!1,this.saving=!1,this.versionNow=0,this.version=0,this.isSaveVersion=!1,this.errorVersionStart=0,this.serverRestartSaveErrorCount=0,this.saveOnlineTime=1e4,this.isWaiting=!1,this.errorSave=0,this.checkMsgUnsavedTime=3e3,this.sendServerErrorStatus=!1,this.sending=!1,this.mess=[],this.tempMess=[]}return f(e,[{key:"send",value:function(e){var r=this;if(configCollaSave.saveSending&&configCollaSave.saveSending(),e||(e=[]),Object.keys(e).length&&this.version++,this.isSaveVersion=!0,"command"==e.action&&(this.version=this.version+e.messages.length-1),null==this.chartId||""==this.chartId)return r.isOffLine=!0,void configCollaSave.poCollect("emptyChartId");var o=t(e=[].concat(e));if($("#header-history").siblings(".reconn").remove(),r.saveTextDom.html("保存中"),this.sending)return $.isEmptyObject(o)||(this.tempMess=this.tempMess.concat(o)),void configCollaSave.saveLocal_(!0);window.savePartnerUnsaved&&clearTimeout(savePartnerUnsaved),$.isEmptyObject(o)?r.mess=r.tempMess:r.mess=r.tempMess.concat(o),r.tempMess=[],r.sending=!0,configCollaSave.checkMsgs&&configCollaSave.checkMsgs();var i=JSON.stringify(this.mess),a=configCollaSave.getDefId?configCollaSave.getDefId():"",s={msgStr:i,defId:a,ignore:"msgStr",chartId:this.chartId,uk:this.userId,client:publicCLB?publicCLB.client:"",fullName:this.fullName},l=this.version;injectExtraAsynCall("beforeSendMsg",{msgStr:i,defId:a,chartId:this.chartId},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=n(n({},s),e),configCollaSave.ajax({url:configCollaSave.host("sendMsg"),data:s,type:"POST",cache:!1,success:function(e){r.sending=!1,injectExtraAsynCall("onSendMsgSuccess",{data:e},function(){r.sendSuccess(e,l)})},error:function(e){r.sending=!1,injectExtraAsynCall("onSendMsgError",{jqxr:e},function(){r.sendError(e)})}})})}},{key:"sendSuccess",value:function(e,r){var n=this;if(n.sending=!1,n.sendServerErrorStatus=!1,"oauth"!=e.result){if("error"==e.result||"error_text"==e.error||"error"==e.error||e.error)return n.poSaveStatus="error",n.errorSave++,n.errorVersionStart=n.version,"error_text"==e.error&&(configCollaSave.errorTextTip(),configCollaSave.poCollect("saveError")),n.directErrorHandle(),void configCollaSave.saveLocal_();n.versionNow=r||this.version,n.errorSave=0,n.errorVersionStart=0,e.version&&e.version>n.versionNow&&n.versionNow>1&&e.version-n.versionNow>5&&n.dlgWarnAndReload(),n.poSaveStatus="success",window.poWebSocket&&1!=poWebSocket.readyState&&publicCLB&&publicCLB.socketReconnect("dir");var o=t(n.mess);if(n.mess=[],window.poWebSocket){var i={type:"_s@deliver",content:{client:publicCLB.client,source:n.deviceType,msg:o}};poWebSocket.send(JSON.stringify(i))}n.saveTextDom.html("已保存"),configCollaSave.saveSuccess(),localStorage.setItem("version_local_"+n.chartId,e.version||1),window.savePartnerUnsaved=setTimeout(function(){n.tempMess&&n.tempMess.length>0&&n.send()},n.checkMsgUnsavedTime)}else n.pageReload()}},{key:"sendError",value:function(e){var r=this;r.sending=!1,r.poSaveStatus="error",r.errorSave++,r.errorVersionStart=r.version,configCollaSave.saveLocal_(),PoNetwork.test({onlineCallback:function(){e.status&&0==(e.status+"").indexOf("50")&&(r.sendServerErrorStatus=!0)}})}},{key:"checkMsgs",value:function(){for(var e=t(this.mess),r={},n=0;n<e.length;n++){var o=e[n];if("create"==o.action)for(var i=o.content,a=i.length-1;a>=0;a--){var s=i[a];r[s.id]?i.splice(a,1):r[s.id]=!0}}this.mess=e}},{key:"initVersion",value:function(){var e=this,r=configCollaSave.getCurrDef().version||0;if(!configCollaSave.opts.readonly){isNaN(r)||(this.version=this.versionNow=r);var n=configCollaSave.getDefId?"_"+configCollaSave.getDefId():"";configCollaSave.store("get","def_"+this.chartId+n,function(n){if(n){var o=n.value;if("string"==typeof o&&(o=JSON.parse(o)),"[object Object]"!=Object.prototype.toString.call(o))return;var t=o.page&&!isNaN(o.page.version)&&o.page.version||o.version||0;!isNaN(r)&&t-r>2&&(e.version=e.versionNow=t,configCollaSave.initMap&&configCollaSave.initMap(o),e.saveOnline("initVersion"))}})}}},{key:"pageReload",value:function(){"offline"!=PoNetwork.status&&(window.reloadTimer&&(clearTimeout(window.reloadTimer),window.reloadTimer=null),configCollaSave.closeTip(),configCollaSave.pageReloadTip(),window.reloadTimer=setTimeout(function(){window.reloadTimer&&(clearTimeout(window.reloadTimer),window.reloadTimer=null),window.location.reload()},3e3))}},{key:"initVersionCallback",value:function(){if(window.poWebSocket&&1==poWebSocket.readyState){var e={type:"_s@deliver",content:{client:publicCLB.client,source:this.deviceType,msg:[],type:"fe_all_update",version:this.version}};try{poWebSocket.send(JSON.stringify(e))}catch(r){}}}},{key:"getYunVersion",value:function(e){var r=configCollaSave.getDefId?configCollaSave.getDefId():window.chartObj.definitionId,n={userId:this.userId,chartId:this.chartId,defId:r},o=configCollaSave.host("getYunVersion");configCollaSave.ajax({url:o,data:n,cache:!1,type:"GET",success:function(r){if(null!=r.version)return e&&e(r.version),r.version},error:function(){}})}},{key:"saveVersion",value:function(e,r){var n=this,o=configCollaSave.getCurrDef();sendMessage.version>1&&(o.version=sendMessage.version);var t="autoSaveVersion",i=JSON.stringify(o),a="自动存储";null!=e&&""!=e&&(a=e,t="saveVersion");var s=configCollaSave.getCanvasId?configCollaSave.getCanvasId():n.chartId,l={chartId:n.chartId,canvasId:s,def:i,remark:a,terminal:"WEB"};poAjax({data:JSON.stringify(l),type:"post",contentType:"application/json",success:function(o){n.isSaveVersion=!1,r&&r("success"),configCollaSave.loadHistorys(!0,e)}},t)}},{key:"saveLocal_",value:function(e){var r=this,n=configCollaSave.getCurrDef();this.version>1&&(n.version=this.version);var o=JSON.stringify(n);if(""!=o){var t=configCollaSave.getDefId?"_"+configCollaSave.getDefId():"";configCollaSave.store&&configCollaSave.store("put",{id:"def_"+this.chartId+t,value:o}),e||setTimeout(function(){$("#header-history img").hide(),r.saveTextDom.html("<span class='offline-tip'><span class='po-diagraming-icons'>&#xe99a;</span></span>"),$("#header-history").siblings(".reconn").length<1&&$("#header-history").after("<a href='javascript:void(0)' onclick='sendMessage.saveOnline()' class=\"reconn\" style='color:#067BEF;text-decoration:underline;margin-left:2px'>重连同步</a>")},100)}}},{key:"getLocalVersion",value:function(e){return this.chartId&&(localStorage.getItem("def_"+this.chartId)||{}).version||0}},{key:"removeLocalDef",value:function(){this.chartId&&configCollaSave.store&&configCollaSave.store("delete","def_"+this.chartId)}},{key:"directErrorHandle",value:function(){var e=this;e.judgeCollaStatus(function(r){"colla"!=r?sendMessage.saveOnline("initVersion"):sendMessage.getYunVersion(function(r){!isNaN(r)&&r-e.version>1?sendMessage.saveVersion(null,function(r){"success"==r&&e.pageReload()}):sendMessage.saveOnline("initVersion_colla")})})}},{key:"serverRestartHandle",value:function(e){var r=this;r.version-r.versionNow>0?r.getYunVersion(function(e){!isNaN(e)&&e-r.version>2&&r.dlgWarnAndReload(),r.saveOnline("serverRestart")}):r.judgeCollaStatus(function(e){"colla"==e&&r.getYunVersion(function(e){e&&e-r.version>2&&r.dlgWarnAndReload()})})}},{key:"dlgWarnAndReload",value:function(){var e=this;"offline"!=PoNetwork.status&&(publicCLB&&publicCLB.stopCollaDlg("yunVersionLarge"),window.reload20s&&window.clearTimeout(reload20s),window.reload20s=setTimeout(function(){e.pageReload()},5e3))}},{key:"clearDlgWarnAndReload",value:function(){var e=this,r=$("#stop-colla-dlg");r.length>0&&"block"==r.css("display")&&r.dialog("close"),"undefined"!=typeof reload20s&&reload20s&&sendMessage.getYunVersion(function(r){r-e.version<3&&(window.clearTimeout(reload20s),reload20s=null)})}},{key:"judgeCollaStatus",value:function(e){var r=n({},publicCLB.collaUserClient);Object.keys(r).length>1?e&&e("colla"):publicCLB&&publicCLB.cooperatingSend(function(r){r>1?e&&e("colla"):e&&e("self")},"dir")}},{key:"saveOnline",value:function(e){var r=this;if(!r.saving)if("click"!=e&&"serverRestart"!=e&&r.serverRestartSaveErrorCount>=5){if(window.clearSaveErrorCountTimer&&(clearTimeout(window.clearSaveErrorCountTimer),window.clearSaveErrorCountTimer=null),window.serverRestartSaveErrorTimer)return;window.serverRestartSaveErrorTimer=setTimeout(function(){r.serverRestartSaveErrorCount=0,window.serverRestartSaveErrorTimer=null},6e4)}else if("click"==e||"serverRestart"==e||!r.isWaiting){r.isWaiting=!0,window.saveOnlineTimer&&(clearTimeout(window.saveOnlineTimer),window.saveOnlineTimer=null),window.saveOnlineTimer=setTimeout(function(){r.isWaiting=!1,window.saveOnlineTimer=null},r.saveOnlineTime),window.clearSaveErrorCountTimer||(window.clearSaveErrorCountTimer=setTimeout(function(){r.serverRestartSaveErrorCount=0,window.clearSaveErrorCountTimer=null},6e4)),r.saving=!0;var n=configCollaSave.getCurrDef();this.version>1&&(n.version=this.version);var o=JSON.stringify(n);if(null!=o&&""!=$.trim(o))if("offline"!=PoNetwork.status){r.saveTextDom.html("保存中"),r.version++;var t=Object.keys(n).length,i=configCollaSave.getDefId?configCollaSave.getDefId():"";configCollaSave.ajax({url:configCollaSave.host("saveOnline"),type:"post",cache:!1,data:{chartId:r.chartId,def:o,shapecount:t,ignore:"def",defId:i},success:function(e){if(r.saving=!1,"oauth"!=e.error&&"notlogin"!=e.error)if("error"!=e.error&&"error"!=e.result){r.serverRestartSaveErrorCount=0,r.initVersionCallback();r.getLocalVersion();e.version&&e.version,r.saveTextDom.html("已保存"),$("#header-history").siblings(".reconn").remove(),configCollaSave.saveSuccess(),r.poSaveStatus="success",r.versionNow=e.version,injectExtraAsynCall("afterSaveOnlineSunccess",{},function(){})}else r.serverRestartSaveErrorCount++;else r.pageReload()},error:function(){r.saving=!1,"serverRestart"==e&&r.serverRestartSaveErrorCount++}})}else r.saving=!1;else configCollaSave.saveOnlineError()}}}]),e}();"undefined"!=typeof module&&(module.exports=h);
},{}],"pq75":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function o(e){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?t(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(e,t,o){return(t=l(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(t){var o=c(t,"string");return"symbol"===e(o)?o:String(o)}function c(t,o){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,o||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}var s={mind:{executing:!1,mess:[],init:function(e){var t=e.msg,o=this;if(this.executing)this.mess.push(t);else{this.executing=!0,msgs=window.outlineObj.util.copyArray(this.mess.concat(t));try{for(var n=0;n<msgs.length;n++){var i=msgs[n],r=i.action,a=i.content;if("create"==r){var l={action:"add",content:a.content,indexs:a.index,parts:a.parts};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("delete"==r){l={action:"delete",content:a.content,indexs:{}};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("updateTitle"==r){var c=a.content,s=a.update,d=window.outlineObj.model.getNodeById(c),u=window.outlineObj.util.copy(d);(y=window.outlineObj.util.copy(d)).title=s;l={action:"update",content:{key:"title",nodes:[y],oldNodes:[u]}};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("updateImage"==r){c=a.content;var f=a.update;d=window.outlineObj.model.getNodeById(c),u=window.outlineObj.util.copy(d);(y=window.outlineObj.util.copy(d)).image=f;l={action:"update",content:{key:"image",nodes:[y],oldNodes:[u]}};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("setTheme"==r);else if("updateStructure"==r);else if("deleteConnection"==r){l={action:"deleteConnection",content:a.content};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("addConnection"==r){l={action:"addConnection",content:a.content};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("updateConnection"==r);else if("updatePos"==r){var g=window.outlineObj.model,p=a.content,v=(a.original,a.newIndex),m=(a.oldIndex,a.oldPart,a.newPart);a.selectedIds;if(p.length<1)return;var h={sourceId:[],target:{}};p.forEach(function(e,t){if(!e.id)return!0;if(h.sourceId.push(e.id),targetIndex=v[e.id],null==targetIndex)return!0;if(targetIndex<1)"root"==e.parent&&"left"==m[e.id]?h.target[e.id]={id:e.parent,pos:"in",part:"left"}:h.target[e.id]={id:e.parent,pos:"in"};else{var o=g.getNodeById(e.parent);if(!o)return!0;var n=o.children;"root"==e.parent&&"left"==m[e.id]&&(n=o.leftChildren),targetId=n[targetIndex-1].id,h.target[e.id]={id:targetId,pos:"down"}}}),h.source={};l={action:"moveNode",content:h};window.outlineObj.server.excuteMsgDirect(l,function(){}),o.updateSummaries(a.newSums,a.oldSums)}else if("changeToFreeTopic"==r){var y=a.content,w=(a.original,a.index,a.updates);null!=w&&$.isEmptyObject(w)&&(w=null);var b=window.outlineObj.util.copy(y);if(!y||$.isEmptyObject(y))return;var S=(g=window.outlineObj.model).data.children,k=(h={sourceId:[y.id],target:{}},{});if(0==S.length)k={id:"root",pos:"in"};else k={id:S[S.length-1].id,pos:"down"};h.target[y.id]=k;l={action:"moveNode",content:h};window.outlineObj.server.excuteMsgDirect(l,function(){});var C=g.getNodeById(b.id);C.parent="root",C.pos=b.pos,C.free=!0,o.updateSummaries(null,{updates:w})}else if("updateFreeTopic"==r){var T=a.content,P=(a.original,a.topicIds);for(g=window.outlineObj.model,n=0;n<P.length;n++){var O=P[n];(d=g.getTopicById(O)).pos=T[O]}g.resetNodeList()}else if("update"==r){a.content,a.original,a.type,l={action:"update",content:h={nodes:a.content,oldNodes:a.original,key:a.type}};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("addFreeTopic"==r){y=a.content,b=window.outlineObj.util.copy(y);if(!y||$.isEmptyObject(y))return;S=(g=window.outlineObj.model).data.children;var I={};0==S.length?I[y.id]=0:I[y.id]=S.length;l={action:"add",content:[y],indexs:I,parts:"right"};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("updateBg"==r){var x=a.content;if(x)x.indexOf("obqv3yxb1.bkt.clouddn.com")>=0&&(x=x.replace("obqv3yxb1.bkt.clouddn.com","cdn3.processon.com")),(g=window.outlineObj.model).getNodeById("root").background=x}else if("setThemeOverWrite"==r){var N=a.content,j=a.tps;o.style.setThemeOverWrite_.call(o,N,j,"delete",!0);o=this;var M=(g=window.outlineObj.model).data;M.theme;null==N&&""==N||(M.theme=N),o.getStyleTopics(M),g.resetNodeList()}else if("setTopicStyle"==r){c=a.content;var W=a.update;d=window.outlineObj.model.getNodeById(c),u=window.outlineObj.util.copy(d);(y=window.outlineObj.util.copy(d)).style=W;l={action:"update",content:{key:"style",nodes:[y],oldNodes:[u]}};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("changetopicexpand"==r){c=a.content;var D=a.type;d=window.outlineObj.model.getNodeById(c),u=window.outlineObj.util.copy(d),y=window.outlineObj.util.copy(d);if(!D)return;"show"==D?y.collapsed=!1:"hide"==D&&(y.collapsed=!0);l={action:"update",content:{key:"collapsed",nodes:[y],oldNodes:[u]}};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("insertParent"==r){l={action:"insertParent",content:d=a.content,oldNode:u=a.original,part:a.part};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("unInsertParent"==r){l={action:"unInsertParent",content:d=a.content,oldNode:u=a.original,part:a.part};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("addSummary"==r){l={action:"addSummary",content:E=a.content};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("deleteSummary"==r){var E=a.content;a.parats,l={action:"deleteSummary",content:E};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("updateSummary"==r){E=a.content,a.original,l={action:"updateSummary",content:E};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("addPerBoundaries"==r){l={action:"addPerBoundaries",content:a.content};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("delPerBoundaries"==r){l={action:"delPerBoundaries",content:a.content};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("updatePerBoundaries"==r){l={action:"updatePerBoundaries",content:a.content,original:a.original};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("deleteSelf"==r){l={action:"deleteSelf",content:a.removed,add:a.add,addPart:a.addPart,removedPart:a.removedPart};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("deleteSelfRestore"==r){l={action:"deleteSelfRestore",content:a.removed,add:a.add,addPart:a.addPart,removedPart:a.removedPart,removedIndex:a.removedIndex};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("hideTopics"==r){l={action:"hideTopics",content:a.ids,parts:a.parts,withChildren:a.withChildren};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("showTopics"==r){l={action:"showTopics",content:a.ids,parts:a.parts,withChildren:a.withChildren};window.outlineObj.server.excuteMsgDirect(l,function(){})}else if("updatePage"==r){l={action:"updatePage",content:a.content,original:a.original};window.outlineObj.server.excuteMsgDirect(l,function(){})}else"updateSumData"==r&&o.updateSummaries(a.newSums,a.oldSums)}}catch(U){}this.executing=!1,this.mess=[]}},updateSummaries:function(e,t){var o=window.outlineObj.model;if(null!=t&&!$.isEmptyObject(t)){var n=t.updates;for(var i in n){if((c=n[i])&&c.length>0){var r=o.getNodeById(i).summaries;c.forEach(function(e,t){var o=r[t];o.id==e.id&&(o.range=e.range,e.part?o.part=e.part:delete o.part,e.removed&&r.splice(t,1))})}}}if(null!=e&&!$.isEmptyObject(e)){var a=e.updates;for(var l in a){var c;if((c=a[l])&&c.length>0){r=o.getNodeById(l).summaries;var s=[];r.forEach(function(e){s.push(e.id)}),c.forEach(function(e,t){var o=r[t];o&&o.id==e.id?(o.range=e.range,e.part?o.part=e.part:delete o.part):s.indexOf(e.id)<0&&r.push(e)})}}}o.resetNodeList()},getStyleTopics:function(e){var t=[],o=this.util;return function e(n){if(!n)return;if(n.style||n.lineStyle||n.theme&&n.background||n.margin){if(t.push(o.copy(n)),n.summary){if(null!=n.style)for(var i in n.style)"lineWidth"!=i&&"lineColor"!=i&&"lineType"!=i&&delete n.style[i]}else delete n.style;delete n.lineStyle}n.theme&&delete n.background;n.margin&&delete n.margin;var r=n.children,a=[];n.root&&(a=n.leftChildren,r=r.concat(a));if(r.length>0)for(var l=0,c=r.length;l<c;l++){var s=r[l];e(s)}}(e),t}},outline:{executing:!1,mess:[],init:function(e){var t=e.msg,o=mind.model,n=o.topic;if(this.executing)this.mess.concat(t);else{this.executing=!0;var i=mind.util.copyArray(this.mess.concat(t));try{for(var r,a,l,c,s,d,u,f,g,p,v,m,h,y,w,b,S,k,C,T,P,O,I,x,N,j,M,W,D,E=function(){switch(r=i[U],r.action){case"add":if(S=r.content,a=r.indexs,l=r.parts,S&&S.length>0)for(x=0,k=S.length;x<k;x++)"root"==(j=S[x]).parent?l[j.id]||(l[j.id]="right"):(c=o.getSubTopic(j),s=mind.util.getSelectedPart(c.id,n.structure),l[j.id]=s);W={msg:[{action:"create",content:{content:S,index:a,parts:l}}],client:e.client},configCollaSave.MessageSource(W);break;case"update":if(T=r.content,S=T.nodes,u=T.oldNodes,"title"==(p=T.key))for(x=0,k=S.length;x<k;x++)j=S[x],W={msg:[{action:"updateTitle",content:{content:j.id,update:j.title}}],client:e.client},configCollaSave.MessageSource(W);else if("note"==p||"tag"==p||"link"==p||"icon"==p||"style"==p||"task"==p)T=r.content,d=T.nodes,u=T.oldNodes,p=T.key,W={msg:[{action:"update",content:{content:d,original:u,type:p}}],client:e.client},configCollaSave.MessageSource(W);else if("collapsed"==p)W={msg:[{action:"changetopicexpand",content:{content:S[0].id,type:null}}],client:e.client},configCollaSave.MessageSource(W);else if("image"==p||"code"==p)for(x=0,k=S.length;x<k;x++)T=r.content,f=T.nodes[x],g=T.oldNodes[x],p=T.key,W={msg:[{action:"update",content:{content:f,original:g,type:p,imgPosChange:{resize:!1,direction:!1}}}],client:e.client},configCollaSave.MessageSource(W);break;case"moveNode":for(T=r.content,v=T.sourceId,M=T.target,T.source,S=[],x=0,k=v.length;x<k;x++)m=v[x],(M.id||M[m])&&S.push(mind.model.getTopicById(m));if(M.id)t(S,M);else for(h=0,y=S.length;h<y;h++)w=S[h],C=M[w.id],t([w],C);function t(t,o){o.pos&&("up"==o.pos&&(o.pos="before"),"down"==o.pos&&(o.pos="after"),o.pos);var n={msg:[{action:"updatePos",content:{content:mind.util.copyArray(t),target:o,moveFromOutline:!0}}],client:e.client};configCollaSave.MessageSource(n)}break;case"delete":S=r.content,W={msg:[{action:"delete",content:{content:mind.util.copyArray(S),updates:null}}],client:e.client},configCollaSave.MessageSource(W);break;case"open":case"close":break;case"indent":if(T=r.content,I=T.ids,O=T.targets,T.origins,b=T.type,0==I.length)return{v:void 0};for(P=mind.util.copyArray(I),S=[],k=P.length,x=0;x<k;x++)N=P[x],M=O[N],j=mind.util.copy(mind.model.getTopicById(N)),C=M,M&&("undo"!=b&&(C={id:M.id,pos:"in"}),W={msg:[{action:"updatePos",content:{content:[j],target:C,moveFromOutline:!0}}],client:e.client},configCollaSave.MessageSource(W));break;case"unIndent":for(T=r.content,P=T.ids,O=T.targets,T.origins,P.length>0&&P.reverse(),I=mind.util.copyArray(P),{},x=0;x<P.length;x++)N=P[x],"root"!=(j=mind.model.getTopicById(N)).parent&&(M={id:j.parent,pos:"after"},W={msg:[{action:"updatePos",content:{content:[j],target:M,moveFromOutline:!0}}],client:e.client},configCollaSave.MessageSource(W))}},U=0;U<i.length;U++)if(D=E())return D.v}catch($){}this.executing=!1,this.mess=[]}}}};window.PoNetwork={preStatus:"online",offlineCallback:null,onlineCallback:null,onlineVal:"online",offlineVal:"offline",intervalTime:2e4,networkTimer:null,imgExpireLoadTime:5e3,imgTimeoutTimer:null,imgTimeoutTimer2:null,init:function(e){e||(e={}),PoNetwork.offlineHandlePub=e.offlineHandle,PoNetwork.onlineHandlePub=e.onlineHandle,e.onlineChange&&(PoNetwork.onlineChangePub=e.onlineChange),window.addEventListener("offline",PoNetwork.offlineFc,!1),window.addEventListener("online",PoNetwork.onlineFc,!1),PoNetwork.networkTimer&&clearInterval(PoNetwork.networkTimer),PoNetwork.networkTimer=setInterval(function(){PoNetwork.test()},PoNetwork.intervalTime),Object.defineProperty(PoNetwork,"status",{get:function(){return this.preStatus},set:function(e){"offline"==e&&"online"==this.preStatus&&(this.preStatus=e,PoNetwork.offlineChange()),"online"==e&&"offline"==this.preStatus&&(this.preStatus=e,PoNetwork.onlineChange())}})},onlineChange:function(){this.onlineChangePub&&this.onlineChangePub()},offlineChange:function(){},offlineHandle:function(){"undefined"==typeof offlineMask&&(offlineMask=!1),offlineMask||PoNetwork.openDialog(),offlineMask=!0,PoNetwork.offlineHandlePub&&PoNetwork.offlineHandlePub(),this.offlineCallback&&this.offlineCallback()},onlineHandle:function(){"undefined"==typeof offlineMask&&(offlineMask=!1),PoNetwork.closeDialog(),offlineMask=!1,PoNetwork.onlineCallback&&PoNetwork.onlineCallback(),PoNetwork.onlineHandlePub&&PoNetwork.onlineHandlePub()},clearNetworkTimer:function(){clearInterval(PoNetwork.netWorkTimer)},test:function(e){if(null==e&&(e={}),PoNetwork.onlineCallback=e.onlineCallback||null,PoNetwork.offlineCallback=e.offlineCallback||null,PoNetwork.saveTrigger=e.saveTrigger||null,0==navigator.onLine)PoNetwork.offlineFc();else{var t=new Image;t.src="https://ks3-cn-beijing.ksyun.com/mind-files/netest.jpg?_u="+(new Date).getTime(),clearTimeout(PoNetwork.imgTimeoutTimer),clearTimeout(PoNetwork.imgTimeoutTimer2),PoNetwork.imgTimeoutTimer=setTimeout(function(){PoNetwork.testAgain(),t=null},PoNetwork.imgExpireLoadTime),t.onload=function(){clearTimeout(PoNetwork.imgTimeoutTimer),clearTimeout(PoNetwork.imgTimeoutTimer2),PoNetwork.onlineFc(),t=null}}},offlineFc:function(){PoNetwork.status="offline",PoNetwork.offlineHandle()},onlineFc:function(){PoNetwork.status="online",PoNetwork.onlineHandle()},testAgain:function(e){clearTimeout(PoNetwork.imgTimeoutTimer2);var t=this,o=new Image;o.src="https://nettest.processon.com/assets/netest.jpg?_u="+(new Date).getTime(),PoNetwork.imgTimeoutTimer2=setTimeout(function(){t.offlineFc(),o=null},PoNetwork.imgExpireLoadTime),o.onload=function(){clearTimeout(PoNetwork.imgTimeoutTimer2),t.onlineFc(),o=null}},openDialog:function(e){var t=this;injectExtraAsynCall("beforeOfflineTip",{},function(){configCollaSave.errorTip&&(e=e||"网络已断开，为防止内容丢失，请检查网络。",configCollaSave.errorTip(e)),this.offlineTimer||(this.offlineTimer=setTimeout(function(){t.turnToReadOnly()},6e4))})},closeDialog:function(){this.offlineTimer&&clearTimeout(this.offlineTimer),this.offlineTimer=null,configCollaSave.closeTip&&configCollaSave.closeTip()},offlineTimer:null,turnToReadOnly:function(){},turnToEdit:function(){},readonlyDlg:function(){}},PoNetwork.init({offlineHandle:function(){},onlineChange:function(){"undefined"!=typeof publicCLB&&(sendMessage.serverRestartHandle(),"undefined"!=typeof poWebSocket&&poWebSocket&&1!=poWebSocket.readyState&&publicCLB.socketReconnect("dir"),"undefined"!=typeof poWebSocket&&poWebSocket&&1==poWebSocket.readyState&&sendMessage.clearDlgWarnAndReload())}});var d=function(){function e(t){i(this,e),t&&(this.chartId=t.chartId,this.userId=t.userId,this.fullName=t.fullName,this.photoUrl=t.photoUrl,this.name=t.name,this.defaultPort=t.defaultPort,this.deviceType=t.deviceType,this.userToken=t.userToken,this.saveTextDom=t.saveTextDom,this.renderOffText=t.renderOffText,this.photoCon=t.photoCon,this.webSocketUrl=t.webSocketUrl),this.collaUserCount=1,this.versionSaveTime=18e4,this.collaUserClient={},this.collaUsers={},this.reconnecting=!1,this.reconnectTimer=null,this.reconnectCount=0,this.prePoSaveStatus="success",this.reconnectTimerSpace=1e4,this.heartRate=15e3,this.timer=null,this.serverTimer=null,this.userOpCount={},this.cooperatingSending=!1,this.cooperatingSendErrorCount=0,this.cooperatingSendErrorTime=null,this.collaClose=0}return a(e,[{key:"init",value:function(){var e=this;this.client=(new Date).valueOf()+configCollaSave.newId(),window.onbeforeunload=function(t){if(window.poWebSocket&&1==poWebSocket.readyState&&poWebSocket.close(1e3),"error"==e.prePoSaveStatus)return"网络异常，已与服务器断开连接，现在关闭会导致内容丢失，确定关闭吗？"},window.setInterval(function(){sendMessage.isSaveVersion&&sendMessage.saveVersion()},e.versionSaveTime),document.addEventListener("visibilitychange",function(){!document.hidden&&window.poWebSocket&&1!=poWebSocket.readyState&&e.socketReconnect("dir"),PoNetwork.test()}),this.collaStart(),sendMessage.poSaveStatus||Object.defineProperty(sendMessage,"poSaveStatus",{get:function(){return e.prePoSaveStatus},set:function(t){if("success"==t&&"error"==e.prePoSaveStatus&&(sendMessage.serverRestartHandle(),window.offLineDlgTimer&&(clearTimeout(window.offLineDlgTimer),window.offLineDlgTimer=null)),"error"==t&&"offline"==PoNetwork.preStatus){if(window.offLineDlgTimer)return;window.offLineDlgTimer=setTimeout(function(){"offline"==PoNetwork.preStatus&&configCollaSave.offlineDialog&&configCollaSave.offlineDialog()},3e3)}e.prePoSaveStatus=t}})}},{key:"onMessage",value:function(e,t){var n=e.msg,i=[],r=[],a=null;if(e.client!=this.client){for(var l=0;l<n.length;l++){var c=n[l],d="outline"==e.source?c.content:"mind"==e.source&&(c.content.content||c.content)||[];if(!(0!=d.length&&this.getTopicParent(d))){var u=c.action;if(sendMessage.version++,"outline"!=e.source)if("mind"!==e.source){"changeTitle"==u?$(".diagram_title").text(c.title):"chat"==u?configCollaSave.appendChatMsg(c):"changeSchema"==u?""==c.categories?configCollaSave.setSchema([]):configCollaSave.setSchema(c.categories.split(",")):"command"==u?(c.pageId==Model.pageId||void 0===c.pageId&&Model.pageId==PageModel.list[0].definitionId)&&(configCollaSave.MessageSource(c.messages),sendMessage.version=sendMessage.version+c.messages.length-1):"addHistory"==u?configCollaSave.loadHistorys():"page"==u&&configCollaSave.loadPages(c.messages);var f=c.messages[0];f&&"update"===f.action?a=o({},f.content.updates[0]).id:f&&(a=f.content[0]?f.content[0].id:null),a&&t&&t(a)}else"outline"!=this.deviceType&&(r.push(c),e.msg=r);else"mind"!=this.deviceType&&configCollaSave.MessageSource(c)}}if("outline"!=e.source||"mind"!=this.deviceType){if("mind"===e.source){if("outline"==this.deviceType)return void s.mind.init(e);configCollaSave.MessageSource(e,function(e){i=e}),a=i&&i.length>0&&i[0]}a&&t&&t(a)}else s.outline.init(e)}}},{key:"getTopicParent",value:function(e){return!!configCollaSave.getTopicParent&&configCollaSave.getTopicParent(e)}},{key:"reset",value:function(){return clearTimeout(this.timer),clearTimeout(this.serverTimer),this}},{key:"start",value:function(){var e=this;this.timer=setTimeout(function(){e.serverTimer&&clearTimeout(e.serverTimer);poWebSocket.send(JSON.stringify({type:"PING"})),e.serverTimer=setTimeout(function(){e.reset(),e.stopCollaDlg("collaClose")},e.heartRate)},this.heartRate)}},{key:"collaStart",value:function(){var e=this;window.poWebSocket&&1==poWebSocket.readyState||(window.poWebSocket&&poWebSocket.close(1e3),window.poWebSocket=null,this.createWebsocket(),this.clearSocketReconnectCountTimer&&(clearInterval(this.clearSocketReconnectCountTimer),this.clearSocketReconnectCountTimer=null),this.clearSocketReconnectCountTimer=setInterval(function(){"online"==PoNetwork.status&&e.reconnectCount>10&&(e.reconnectCount=1)},3e5))}},{key:"createWebsocket",value:function(){if(window.WebSocket){if(window.poWebSocket&&1!=poWebSocket.readyState&&(poWebSocket.close(1e3),poWebSocket=null),this.userId){var e=this.fullName?this.fullName.replace(/&amp;/g,"&"):"访客",t=this.client;try{var o=this.userToken?"&token=".concat(this.userToken):"";window.poWebSocket=new WebSocket(this.webSocketUrl+"?chartId="+this.chartId+"&userId="+this.userId+"&clientId="+t+"&userName="+encodeURIComponent(e)+"&avatar="+this.photoUrl+o),this.collaEventInit()}catch(n){this.socketReconnect()}}}else $.showTip("当前浏览器不支持WebSocket，请选择其他浏览器(Chrome, FireFox, Safari)")}},{key:"socketReconnect",value:function(e){var t=this;if(!this.reconnecting)if(this.reconnecting=!0,"offline"!=PoNetwork.status)if("dir"!=e&&(this.reconnectCount+=1),this.reconnectCount>10)this.reconnecting=!1;else{this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnecting=!1);var o=this.reconnectTimerSpace*this.reconnectCount;"dir"==e&&(o=100),this.reconnectTimer=setTimeout(function(){t.reconnecting=!1,t.createWebsocket()},o)}else this.reconnecting=!1}},{key:"collaEventInit",value:function(){var e=this;poWebSocket.onopen=function(){e.reconnecting=!1,e.reconnectCount=1,poWebSocket.send(JSON.stringify({type:"ONLINE_USER"})),e.closeCollaElseDlg(),sendMessage.clearDlgWarnAndReload(),"undefined"!=typeof getCollaCountTimer&&getCollaCountTimer&&clearInterval(getCollaCountTimer),e.reset(),e.start()},poWebSocket.onmessage=function(t){var o=JSON.parse(t.data);switch(o.type){case"pong":sendMessage.clearDlgWarnAndReload("colla"),e.reset(),e.start();break;case"ONLINE_USER":var n=o.clients;if(null==n)return;e.collaUserCount=n.length,configCollaSave.renderUsers(n);break;case"JOIN_IN":e.collaUserCount+=1,configCollaSave.renderUsers(o.content,"join");break;case"LEAVE_OUT":e.collaUserCount-=1,configCollaSave.renderUsers(o.content,"leave");break;case"_s@deliver":try{var i=o.content;if("fe_all_update"===i.type)return void(i.version-sendMessage.version>4&&("success"!=sendMessage.poSaveStatus?configCollaSave.saveVersion&&configCollaSave.saveVersion(null,function(e){"success"==e&&sendMessage.dlgWarnAndReload()}):sendMessage.dlgWarnAndReload()));e.onMessage(i,function(t){e.showUserOp(t,i.client)})}catch(a){}break;case"_s@board":var r=o.content;"undefined"!=typeof wemeetWebSocket&&(r.type==wemeetWebSocket.WEMEET_TYPE.CREAT_NOTICE?wemeetWebSocket.msg(o):r.type==wemeetWebSocket.WEMEET_TYPE.SUS_NOTICE?wemeetWebSocket.msg(o):r.type==wemeetWebSocket.WEMEET_TYPE.REC_NOTICE&&wemeetWebSocket.msg(o))}},poWebSocket.onerror=function(t){e.reset(),configCollaSave.isSafari()?PoNetwork.test({onlineCallback:function(){setTimeout(function(){e.stopCollaDlg("collaClose")},500)}}):setTimeout(function(){e.stopCollaDlg("collaClose")},500)},poWebSocket.onclose=function(t){e.reset(),configCollaSave.isSafari()?PoNetwork.test({onlineCallback:function(){setTimeout(function(){e.stopCollaDlg("collaClose")},2e3)}}):setTimeout(function(){e.stopCollaDlg("collaClose")},2e3)}}},{key:"renderUsers",value:function(e,t){var o=this;configCollaSave.injectExtraAsynCall("beforeRenderUsers",{users:e,type:t},function(n){e=n.users,t=n.type,"[object Object]"===Object.prototype.toString.call(e)&&(e.avatar=decodeURIComponent(e.avatar));var i=o.photoCon;if(null==t&&e instanceof Array){if(o.collaUsers={},o.collaUserClient={},e.forEach(function(e,t){e.avatar=decodeURIComponent(e.avatar),null==o.collaUserClient[e.clientId]&&(o.collaUserClient[e.clientId]=e),null==o.collaUsers[e.userId]&&(o.collaUsers[e.userId]=e,o.collaUserClient[e.clientId]=e)}),configCollaSave.resetUserPic(i,t,e),!(Object.keys(o.collaUserClient).length>1))return void i.hide();i.css("display","flex")}if("join"==t&&(o.collaUserClient[e.clientId]=e,null==o.collaUsers[e.userId]&&(o.collaUsers[e.userId]=e),i.show(),configCollaSave.resetUserPic(i,t,e),configCollaSave.forceExitFocus&&configCollaSave.forceExitFocus()),"leave"==t){var r=0;for(var a in o.collaUserClient){o.collaUserClient[a].userId==e.userId&&r++}o.collaUserClient[e.clientId]&&delete o.collaUserClient[e.clientId],o.collaUsers[e.userId]&&r>0&&r<2&&(delete o.collaUsers[e.userId],configCollaSave.resetUserPic(i,t,e)),Object.keys(o.collaUserClient).length<=1&&i.length>0&&i.hide()}})}},{key:"resetUserPic",value:function(e,t,o){var n=this,i=e.find(".users-box"),r=i.children(),a=[],l=[];for(var c in n.collaUsers)a.unshift(n.collaUsers[c]);if(null==t){if(r.length<1){for(var s=0;s<3;s++)l.push("<div uid='' ind='"+s+"' style='left:"+26*s+"px; display: none; z-index:"+(s+1)+"' class='colla-user' title_pos='top' disableTitle title=''><img src='"+n.defaultPort+"' onerror=\"this.onerror=null;this.src=staticBasePath+'/assets/images/default_photo.png'\"/></div>");i.html(l.join("")),d(a,3)}n.collaMemberList.call(n,a,t)}else d(a,3),n.collaMemberList.call(n,o,t);function d(t,o){e.find("[uid]").each(function(e,o){$(o).css({display:e<t.length?"block":"none"})}),t.length>1?i.css({width:30+26*(t.length-1)}):i.css({width:30}),t.forEach(function(e,o){var i=$(".colla-user[ind="+(t.length-o-1)+"]"),r=i.find("img");i.attr({uid:e.userId,title:n.collaDecode(e.userName)});var a=e.avatar;r.attr("src",a)})}}},{key:"collaMemberList",value:function(e,t){var o=Object.keys(this.collaUsers).length;$("#po-clb-user-menu .title .text").html("当前协作人数"+o);var n="";for(var i in this.collaUsers){var r=this.collaUsers[i];n+='<li> <img src="'+r.avatar+'" alt="" onerror="this.onerror=null;this.src=staticBasePath+\'/assets/images/default_photo.png\'"> <div class="center"> <div class="name">'+this.collaDecode(r.userName)+'</div></div><div class="po-tool-button"></div></li>'}$("#po-clb-user-menu .po-clb-user-list").html(n)}},{key:"collaDecode",value:function(e){if(e)try{return decodeURI(e)}catch(t){return e}}},{key:"renderOff",value:function(e){if(!$("#stop_listen_tip").length){var t=sendMessage.isOffLine?this.renderOffText.isOffLine:e?this.renderOffText.isColla:this.renderOffText.defaultText,o='<div id="stop_listen_tip"><div style="font-size:17px;margin-top:40px;color:#999;font-size:16px;">温馨提示</div><div style="font-size:16px;margin-top:58px;color:#666;">'.concat(t,"</div></div>");$(o).appendTo("body").show(),$.mask()}}},{key:"showUserOp",value:function(e,t){var o=this.collaUserClient[t];if(null!=o&&e){var n=$("#"+e),i=configCollaSave.zoom()||1;if(n.length>0){var r=n.offset(),a=$(".colla-user-tip-con[uk="+t+"]");if(0==a.length){var l=o.avatar;"designer"==this.deviceType?(a=$("<div uk='"+t+"' class='colla-user-tip-con'><img src='"+l+"'/></div>").appendTo("#designer_canvas"),Model&&"number"==typeof Model.maxZIndex&&a.css("z-index",Model.maxZIndex+3)):a=$("<div uk='"+t+"' class='colla-user-tip-con'><img src='"+l+"'/></div>").appendTo("body"),null!=this.userOpCount[t]&&window.clearTimeout(this.userOpCount[t]),this.userOpCount[t]=setTimeout(function(){a.fadeOut().remove()},2e3)}a.css({left:r.left+(n.outerWidth()+12)*i,top:r.top+n.outerHeight()/2*i-a.outerHeight()/2}).show()}}}},{key:"cooperatingSend",value:function(e,t){var o=this,n=1;if("offline"!=PoNetwork.status){var i=(new Date).getTime();this.cooperatingSendErrorCount>4&&i-this.cooperatingSendErrorTime<18e4&&!t?e&&e(n):this.cooperatingSending?e&&e(n):(this.cooperatingSending=!0,configCollaSave.ajax({url:configCollaSave.host("cooperatingSend"),data:{chartId:this.chartId},cache:!1,type:"GET",async:!0,success:function(t){o.cooperatingSending=!1,o.cooperatingSendErrorCount=0,t&&t.length>1&&(n=t.length),e&&e(n)},error:function(t){o.cooperatingSending=!1,0==o.cooperatingSendErrorCount&&(o.cooperatingSendErrorTime=(new Date).getTime()),o.cooperatingSendErrorCount++,e&&e(n)}}))}else e&&e(n)}},{key:"stopCollaDlg",value:function(e){var t=this;if(this.collaClose="collaClose"==e?1:0,"offline"!=PoNetwork.status){if(window.getCollaCountTimer&&clearInterval(getCollaCountTimer),Object.keys(t.collaUserClient).length<2&&"yunVersionLarge"!=e&&"collaClose"!=e)return t.socketReconnect("dir"),void(window.getCollaCountTimer=setInterval(function(){t.cooperatingSend(function(e){e>1&&t.stopCollaDlg("dir")})},2e4));if(!(Object.keys(t.collaUserClient).length<2&&"yunVersionLarge"!=e&&"dir"!=e)){var o=$("#stop-colla-dlg");o.is(":visible")||(this.closeCollaElseDlg("stop"),"yunVersionLarge"!=e&&configCollaSave.poCollect("yunVersionLarge"))}}}},{key:"closeCollaElseDlg",value:function(e){var t={stop:"#stop-colla-dlg",server:"#colla-server-error"};for(var o in t)if(e!=o){var n=$(t[o]);n.length>0&&n.dialog("close")}}},{key:"collaServerError",value:function(){configCollaSave.poCollect("collaServerError");var e=$("#colla-server-error");if(0==e.length){e=$('<div id="colla-server-error" class="dialog dialog-box" style="width: 400px;min-height: 0px;z-index:3;"><h3 style="padding:3px 18px;margin-bottom:16px;">协作异常</h3>\n\t\t\t\t\t<div style="padding:0px 18px;margin-bottom:12px;"><div style="font-size:14px;">当前多人协作未成功连接，请确保网络通畅的情况，稍后重试。</div></div><div style="margin-top:20px;" class="dialog_buttons"><span style="margin-right: 20px; color:#63abf7;cursor:pointer" onclick="location.reload();" class="mind-button">刷新重试</span></div></div>').appendTo($("body"))}e.dialog(),this.closeCollaElseDlg("server")}},{key:"sendPageId",value:function(e){if(null!=e&&"undefined"!=typeof poWebSocket&&poWebSocket&&1==poWebSocket.readyState){var t={type:"_s@deliver",content:{client:this.client,source:"flow",msg:[{action:"switchPage",messages:{pageId:e,user:{client:this.client}}}]}};poWebSocket.send(JSON.stringify(t))}}},{key:"getPageDef",value:function(e,t){var o={defId:e,chartId:chartId};poAjax({data:o,cache:!1,type:"GET",success:function(e){t&&t(e)},error:function(){$.toast({text:"获取文件失败，请检查网络，现已为您打开本地缓存文件。",type:"error"});var o=definition.find(function(t){return t.page.id==e});t&&t({def:o})}},"getDefById")}},{key:"addPage",value:function(e,t){var o=this;$("#po-global-loading-wrap").css("backgroundColor","transparent").show().find(".po-loadingTop p").hide();var n={chartId:chartId};poAjax({url:configCollaSave.host("addPage"),data:n,cache:!1,type:"post",success:function(e){var n=e.chartDefIds,i=n[n.length-1].definitionId;o.getPageDef(i,function(e){if(e.def){t&&t(n,i,e.def);try{if("undefined"!=typeof poWebSocket&&poWebSocket){var r={type:"_s@deliver",content:{client:o.client,source:"flow",msg:[{action:"page",messages:[{action:"addPage",content:n}],name:userObj.userName}]}};poWebSocket.send(JSON.stringify(r))}}catch(a){}}else $.toast({text:"新建失败",type:"error"})})},error:function(){$("#po-global-loading-wrap").hide(),$.toast({text:"新建失败",type:"error"})}})}},{key:"copyPage",value:function(e,t){var o=this;$("#po-global-loading-wrap").css("backgroundColor","transparent").show().find(".po-loadingTop p").hide();var n={chartId:chartId,defId:e.pageId};e.def&&(n.def=e.def),poAjax({url:configCollaSave.host("copyPage"),data:n,cache:!1,type:"post",success:function(e){var n=e.canvas.chartDefIds;t&&t(n,e.defId,e.def);try{if("undefined"!=typeof poWebSocket&&poWebSocket){var i={type:"_s@deliver",content:{client:o.client,source:"flow",msg:[{action:"page",messages:[{action:"copyPage",content:n}],name:userObj.userName}]}};poWebSocket.send(JSON.stringify(i))}}catch(r){}},error:function(){$("#po-global-loading-wrap").hide(),$.toast({text:"新建失败",type:"error"})}})}},{key:"deletePage",value:function(e,t){var o=this,n={defId:e,chartId:chartId};poAjax({url:configCollaSave.host("deletePage"),data:n,cache:!1,type:"post",success:function(n){var i=n.chartDefIds;t&&t(i);try{if("undefined"!=typeof poWebSocket&&poWebSocket){var r={type:"_s@deliver",content:{client:o.client,source:"flow",msg:[{action:"page",messages:[{action:"delPage",content:{id:e}}],name:userObj.userName}]}};poWebSocket.send(JSON.stringify(r))}}catch(a){}},error:function(){$.toast({text:"删除失败",type:"error"})}})}},{key:"renamePage",value:function(e,t){var o=this,n={title:e.title,defId:e.id,chartId:chartId};poAjax({url:configCollaSave.host("renamePage"),data:n,cache:!1,type:"post",success:function(e){var n=e.chartDefIds;t&&t(n);try{if("undefined"!=typeof poWebSocket&&poWebSocket){var i={type:"_s@deliver",content:{client:o.client,source:"designer",msg:[{action:"page",messages:[{action:"rename",content:n}]}]}};poWebSocket.send(JSON.stringify(i))}}catch(r){}},error:function(e){t&&t(e)}})}},{key:"sortPage",value:function(e,t,o){var n=this,i={chartId:chartId,source:e,target:t};poAjax({url:configCollaSave.host("sortPage"),data:i,cache:!1,type:"post",success:function(e){var t=e.chartDefIds;"function"==typeof o&&o(t);try{if("undefined"!=typeof poWebSocket&&poWebSocket){var i={type:"_s@deliver",content:{client:n.client,source:"designer",msg:[{action:"page",messages:[{action:"sortpage",content:t}]}]}};poWebSocket.send(JSON.stringify(i))}}catch(r){}},error:function(e){"function"==typeof o&&o(e)}})}},{key:"setMainPage",value:function(e,t){var o=this;poAjax({url:configCollaSave.host("setMainPage"),data:{chartId:chartId,defId:e},cache:!1,type:"post",success:function(e){t&&t(e.mainCanvasId);try{if("undefined"!=typeof poWebSocket&&poWebSocket){var n={type:"_s@deliver",content:{client:o.client,source:"flow",msg:[{action:"page",messages:[{action:"setMainPage",content:e.mainCanvasId}],name:userObj.userName}]}};poWebSocket.send(JSON.stringify(n))}}catch(i){}},error:function(){$("#po-global-loading-wrap").hide(),$.toast({text:"新建失败",type:"error"})}})}}]),e}();"undefined"!=typeof module&&(module.exports=d);
},{}],"bk6H":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,u=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw u}}}}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(t){var n=c(t,"string");return"symbol"===e(n)?n:String(n)}function c(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}var s=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,f=function(){function e(t,n,r){o(this,e),this._dbs={},this._databaseName=t,this.currentStore="",this.open(t,n,r)}return u(e,[{key:"open",value:function(e,n,r){var o=this;if(s)return new Promise(function(i,u){if(o._dbs&&o._dbs[e])i(o._dbs[e]);else{var a=s.open(e,n);a.onupgradeneeded=function(u){var a=u.target.result;for(var c in o._dbs[e]=a,r)if(a.objectStoreNames.contains(r[c].storeName))a.close(),n++,o.open(e,n,r);else{var s,f=a.createObjectStore(r[c].storeName,r[c].option),l=t(r[c].index);try{for(l.s();!(s=l.n()).done;){var v=s.value;f.createIndex(v.name,v.keyPath,{unique:v.unique})}}catch(d){l.e(d)}finally{l.f()}}i(a)},a.onsuccess=function(t){var n=t.target.result;o._dbs[e]=n,i(n)},a.onerror=function(e){var t=e.target.error;if("VersionError"==t.name){var n=(t=t.toString()).match(/requested version \([0-9]+\) is less than the existing version \([0-9]+\)/);if(n){var r=n[0].match(/requested version \((\S*?)\)/);r&&(r=r[1]);var o=n[0].match(/existing version \((\S*?)\)/);o&&(o=o[1])}}}}})}},{key:"_getTransaction",value:function(e,t,n){var r=this;if(this._dbs[this._databaseName]){var o=this._dbs[this._databaseName].transaction(e,"readwrite");n&&n(o)}else this.open(this._databaseName,t).then(function(){r._getTransaction(e,t,n)})}},{key:"_getObjectStore",value:function(e,t,n){this._getTransaction(e,t,function(t){var r=t.objectStore(e);n&&n(r)})}},{key:"collection",value:function(e,t){return this.currentStore=e,this._getObjectStore(e,t),this}},{key:"add",value:function(e){var t=this;return new Promise(function(n,r){t._getObjectStore(t.currentStore,1,function(t){var o=t.get(e);o.onsuccess=function(e){n(e.target.result)},o.onerror=function(e){r(null)}})})}},{key:"get",value:function(e){var t=this;return new Promise(function(n,r){t._getObjectStore(t.currentStore,1,function(t){var o=t.get(e);o.onsuccess=function(e){n(e.target.result)},o.onerror=function(e){r(null)}})})}},{key:"delete",value:function(e){var t=this;return new Promise(function(n,r){t._getObjectStore(t.currentStore,1,function(t){var o=t.delete(e);o.onsuccess=function(e){n(e.target.result)},o.onerror=function(e){r(null)}})})}},{key:"clear",value:function(e){var t=this;return new Promise(function(n,r){t._getObjectStore(t.currentStore,1,function(t){var o=t.clear(e);o.onsuccess=function(e){n(e.target.result)},o.onerror=function(e){r(null)}})})}},{key:"put",value:function(e){var t=this;return new Promise(function(n,r){t._getObjectStore(t.currentStore,1,function(t){var o=t.put(e);o.onsuccess=function(e){n(e.target.result)},o.onerror=function(e){r(null)}})})}},{key:"find",value:function(e,t,n,r){var o=this;return new Promise(function(i,u){o._getObjectStore(o.currentStore,1,function(o){var a=o.openCursor(IDBKeyRange.bound(e,t,n,r));a.onsuccess=function(e){i(e.target.result)},a.onerror=function(e){u(null)}})})}}]),e}();"undefined"!=typeof module&&(module.exports=f);
},{}],"a54O":[function(require,module,exports) {
"use strict";var e=require("../utils");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach(function(t){i(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function i(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var n=a(e,"string");return"symbol"===t(n)?n:String(n)}function a(e,n){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}require("./collaboration.less"),window.Message=require("./sendmessage"),window.Collaboration=require("./collaboration"),window.domain||(window.domain=""),window.staticBasePath||(window.staticBasePath="/v5_editor/static"),injectExtraAsynCall("beforeCreateIndexdb",{},function(){window.DB=require("./indexdb");var e=[{storeName:"processonEdit",option:{keyPath:"id"},index:[]}];window.db=new DB("processonEdit","1",e),window.store=db.collection("processonEdit","1")}),window.configCollaSave={opts:{chartId:null,userId:null,fullName:null,photoUrl:null,photoCon:$(".po-clb-user-photo-list"),name:"思维导图",readonly:!1,defaultPort:staticBasePath+"/assets/images/default_photo.png",webSocketUrl:e.webSocketUrl,saveTextDom:$("#save-tip"),renderOffText:{defaultText:'由于您长时间未编辑图形<br><br>系统已自动为您存储历史版本并暂停了作图</div><div style="color:#666;font-size:16px;margin-top:40px;">点击 <a style="color:#63abf7;cursor:pointer" onclick="location.reload();">恢复</a>',isOffLine:'多人协作时，为了防止丢失图形，禁止使用离线模式</div><div style="font-size:16px;margin-top:8px;color:#666;">请确保网络恢复后刷新页面</div><div style="color:#666;font-size:16px;margin-top:40px;">点击 <a style="color:#63abf7;cursor:pointer" onclick="location.reload();">刷新页面</a>',isColla:'协作服务器连接断开，多人协作状态下无法进行编辑操作</div><div style="font-size:16px;margin-top:8px;color:#666;">请刷新页面后操作</div><div style="color:#666;font-size:16px;margin-top:40px;">点击 <a style="color:#63abf7;cursor:pointer" onclick="location.reload();">刷新页面</a>'}},init:function(e,t){var n=this.opts;if(e&&t){var i=t+"-"+e;if(s[t]){var r=s[i]||{};n=o(o(o({},n),s[t].opts),r.opts);var a=configCollaSave.apiList;configCollaSave=o(o(o(o({},configCollaSave),s[t]),r),{},{opts:n}),configCollaSave.apiList=o(o({},configCollaSave.apiList),a)}}configCollaSave.getUserObj(),configCollaSave.instantSend(n),window.publicCLB=new Collaboration(n),publicCLB.init(),setTimeout(function(){window.chartObj&&(configCollaSave.opts.collaRole=chartObj.collaRole,configCollaSave.opts.orgId=chartObj.orgId,configCollaSave.getFilePower()),sendMessage.initVersion()},1500)},instantSend:function(e){window.sendMessage?e&&(sendMessage.chartId=e.chartId,sendMessage.userId=e.userId,sendMessage.fullName=e.fullName,sendMessage.deviceType=e.deviceType,sendMessage.saveTextDom=e.saveTextDom,sendMessage.renderOffText=e.renderOffText,sendMessage.readonly=e.readonly):window.sendMessage=new Message(e)},getUserObj:function(){this.opts.chartId=window.chartId,window.userObj&&(this.opts.userId=userObj.userId,this.opts.fullName=userObj.fullName,this.opts.photoUrl=userObj.photoUrl)},apiList:{sendMsg:poApi.sendMsg,getYunVersion:poApi.getPoYunVersion,saveVersion:poApi.saveVersion,saveOnline:poApi.saveOnline,cooperatingSend:"https://wpscb.processon.com/online_user"},host:function(e){var t=this.apiList;if(t&&t[e])return t[e]},getFilePower:function(){"viewer"!=this.opts.collaRole||this.opts.orgId||(this.opts.readonly=!0)},saveSending:function(){},saveSuccess:function(){},saveLocal:function(){},getLocal:function(){},saveLocal_:function(e){sendMessage.saveLocal_(e)},store:function(e){function t(t,n,o,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n,o){injectExtraAsynCall("beforeSaveIndexdb",{type:e,data:t,resolve:n,reject:o},function(e){var t=e.type,n=e.data,o=e.resolve,i=e.reject;t&&store[t]&&store[t](n).then(function(e){o&&o(e)}).catch(function(e){i&&i(e)})})}),errorTextTip:function(){this.toast({type:"warning",text:"文件标题保存失败，涉及敏感字符，请重新输入"})},toast:function(e,t){$.toast&&$.toast(e,t)},errorTip:function(e){this.toast({type:"warning",text:e,name:"network",autoClose:!1,zIndex:6})},closeTip:function(){this.toast("close","network"),this.warnTip("close","network")},pageReloadTip:function(){this.toast({type:"secondary",text:"检测到云端版本有更新，为避免数据丢失即将刷新页面",autoClose:!1})},getCurrDef:function(){var e=window.currDef||window.Model&&$.extend(Model.define,{comments:Model.comments})||window.mind&&mind.model.topic||window.outlineObj&&outlineObj.model.data;window.mind&&mind.currentRoot&&(delete mind.currentRoot.root,delete mind.currentRoot.structure);var t=JSON.stringify(e);return window.mind&&mind.currentRoot&&(mind.currentRoot.root=!0,mind.currentRoot.structure=e.structure),JSON.parse(t)},ajax:function(e,t){poAjax(e,t)},loadHistorys:function(e){},setSchema:function(e){Designer.setSchema(e)},appendChatMsg:function(e){},showUserOp:function(){},MessageSource:function(e,t){},renderUsers:function(){},resetUserPic:function(e,t,n){},zoom:function(){return 1},poCollect:function(e){if(e){"".concat(this.opts.deviceType,"-editor"),"".concat(this.opts.name,"-msg");e}},isChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")>=0},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>=0},isSafari:function(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")},isIE:function(){var e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1||e.indexOf("Edge/")>-1},newId:function(){return this.randomString(10)+this.randomNumber(6)},randomNumber:function(e){for(var t="";e>0;)t+=Math.floor(10*Math.random()),e--;return t},randomString:function(e,t){t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var n="",o=0;o<e;o++){var i=Math.floor(Math.random()*t.length);n+=t.substring(i,i+1)}return n},closeHistory:function(){},loadPages:function(e){for(var t=0;t<e.length;t++){var n=e[t],o=n.action;"delPage"==o?PageModel.delPage({id:n.content.id},!0):"setMainPage"==o?PageModel.delPage({id:n.content.id},!0):(PageModel.list=n.content,PageModel.build(),Designer.initialize.initPage())}},warnTip:function(e,t){var n=$(".warn-tip");if((t||e.data)&&(n=$(".warn-tip[data-info="+(t||e.data)+"]")),"string"!=typeof e){var o={content:"",tipIcon:!1,pos:"top",top:"90px",closable:!0,delay:null,onClose:null,callback:null};$.extend(o,e),n.length>0&&n.remove();var i="";if(o.tipIcon){var r="&#xe672;";o.tipIcon.indexOf("&#")>-1&&(r=o.tipIcon),i="<div class='warn-icon icons'>"+r+"</div>"}var a="";if(o.data&&(a="data-info="+o.data),0==(n=$("<div class='warn-tip' "+a+">"+i+"<div class='mind-tip-text'>"+o.content+"</div><div class='mind-tip-close icons'>&#xe622;</div></div>").appendTo("body")).find(".mind-tip-close").length)$("<span class='mind-dlog-close icons'>&#xe623;</span>").appendTo(dialogTitle);!1===o.closable?(n.find(".mind-tip-close").css("display","none"),o.delay&&("undefined"!=typeof clearWarnTipTimer&&clearTimeout(clearWarnTipTimer),clearWarnTipTimer=setTimeout(function(){n.remove()},o.delay))):n.find(".mind-tip-close").css("display","block"),n.children(".mind-tip-close").off("click").on("click",function(){n.remove(),o.onClose&&o.onClose instanceof Function&&o.onClose()}),setTimeout(function(){n.css({top:o.top,bottom:"auto"})}),o.callback&&o.callback instanceof Function&&o.callback()}else"close"==e&&n.length>0&&n.find(".mind-tip-close").trigger("click")},offlineTipCount:0,offlineDialog:function(){if(!(this.offlineTipCount>0)){this.offlineTipCount++;var e=$("#po-offline-dlg");e.length||(e=$('<div id="po-offline-dlg" class="po-dialog" style="width:412px;">\n\t\t\t\t<div class="po-dialog-header">风险提示</div>\n\t\t\t\t<div class="mind-context-menu-content" style="padding:0px 24px;">\n\t\t\t\t\t<div style="font-size:14px;">网络异常，您可以在当前网页继续进行离线编辑操作，关闭</div>\n\t\t\t\t\t<div style="font-size:14px;margin-top:8px;">浏览器可能会导致部分内容丢失，请尽快恢复网络。</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="po-buttons" style="padding:20px 24px;white-space: nowrap;text-align: right;">\n\t\t\t\t\t<span id="btn-offline-cancel" style="width:32px;" class="po-button primary">知道了</span>\n\t\t\t\t</div>\n\t\t\t</div>').appendTo("body"),$("#btn-offline-cancel").on("click",function(){e.dialog("close").remove()})),e.is(":visible")||e.dialog()}},injectExtraAsynCall:function(e){function t(t,n,o){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){injectExtraAsynCall(e,t,function(e,t,o){n(e,t,o)})})};var s={mind:{opts:{deviceType:"mind",name:"思维导图"},zoom:function(){return mind.operation.zoomVal/100},saveOnlineError:function(){Util.loading({content:"未发现本地数据，请编辑后，再次尝试",show:3e3,model:!1})},saveSending:function(){$("#header-history img").is(":visible")||$("#header-history img").show(),$("#header-history img").attr("src","".concat(staticBasePath,"/images/saving.gif"))},saveSuccess:function(){$("#header-history img").is(":visible")||$("#header-history img").show(),$("#header-history img").attr("src",staticBasePath+"/images/saved.gif"),$(".reconn").remove(),mind.plugins.navigator&&mind.plugins.navigator.init.call(mind)},checkMsgs:function(){sendMessage.checkMsgs()},initMap:function(e){var t=mind.model.topic=e;setTimeout(function(){mind.operation.clearCanvas.call(mind),mind.operation.zoomVal=100,null!=t&&t.theme&&t.theme.indexOf("customise_")>=0?getThemeById(t.theme,function(e){mind=new mindDesigner("#mind_con",{chartId:chartId},JSON.stringify(t),e)}):mind=new mindDesigner("#mind_con",{chartId:chartId},JSON.stringify(t))},1e3)},renderUsers:function(e,t){publicCLB.renderUsers(e,t)},resetUserPic:function(e,t,n){publicCLB.resetUserPic(e,t,n)},loadHistorys:function(e){historyV.loadHistorys(e),$("#history_remark").val(""),$("#btn_history_clear").button("disable")},getTopicParent:function(e){if("undefined"==typeof mind||!mind)return!1;var t=!1;if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n].parent;if(!mind.model.getTopicById(o)){if(t=!0,e.length>1)for(var i=0;i<e.length;i++){if(o==e[i].id){t=!1;break}}break}}return t},MessageSource:function(e,t){mind.messageSource.excuteMsgDirect.call(mind,e,t)},forceExitFocus:function(){0==$(".mind-topic-focus").length||$("#root").length>0||window.mind&&(mind.operation.focusTopic.call(mind,mind.model.topic.id,!0,!1),mind.operation.exitFocus.call(mind),configCollaSave.toast({type:"warning",text:"您的文件处于多人协作， 已退出聚焦模式"}))}},"mind-mobi":{opts:{photoCon:$(".colla-users-con")},saveSuccess:function(){$(".reconn").remove()},renderUsers:function(e,t){$("#colla-users-con").find("img").attr("src",this.opts.photoUrl),publicCLB.renderUsers(e,t)},resetUserPic:function(e,t,n){var o,i=[],r=[];for(var a in publicCLB.collaUserClient){var s=publicCLB.collaUserClient[a];-1==r.indexOf(s)&&r.unshift(s),i.indexOf(s.userId)<0&&i.push(s.userId)}(o=i.length)>0?(e.find(".colla-amount").length&&e.find(".colla-amount").remove(),e.append('<div class="colla-amount">'+o+"</div>")):$(".colla-amount").remove(),null==t?this.collaMemberList(r,t):this.collaMemberList(n,t)},collaMemberList:function(e,t){var n=$("#topic-colla-con"),o=$(".colla_list");if(o.length<1&&(o=$("<div class='colla_list'><ul class='colla_oneself'></ul><ul class='colla_temp'></ul>").appendTo(n)),null==t)$(".colla_temp").find("li[uid]").remove(),e.forEach(function(e,t){a(e,!0)});else if("join"==t)$("li[uid="+e.userId+"]").length<1&&a(e);else if("leave"==t){var i=0;for(var r in publicCLB.collaUserClient){publicCLB.collaUserClient[r].userId==e.userId&&i++}if(i>0)return;$("li[uid="+e.userId+"]").length&&$("li[uid="+e.userId+"]").remove()}function a(e,t){window.userObj&&userObj.userId==e.userId&&t?$(".colla_oneself").html("<li uid='"+e.userId+"'><img src='"+e.avatar+"' /><span class='owner_name'>"+decodeURIComponent(e.userName)+"</span><label>（我）</label></li>"):$("li[uid="+e.userId+"]").length<1&&$(".colla_temp").append("<li uid='"+e.userId+"'><img src='"+e.avatar+"' /><span class='owner_name'>"+decodeURIComponent(e.userName)+"</span></li>")}}},flow:{opts:{deviceType:"designer",name:"流程图"},saveSending:function(){$("#header-history img").attr("src","".concat(staticBasePath,"/images/saving.gif")).error(function(){$(this).hide()}).load(function(){$(this).show()})},apiList:{addPage:poApi.addPage,deletePage:poApi.deletePage,copyPage:poApi.copyPage,sortPage:poApi.sortPage,renamePage:poApi.renamePage,setMainPage:poApi.setMainPage},getDefId:function(){return Model.pageId},getCanvasId:function(){return PageModel.data[Model.pageId].canvasId},saveSuccess:function(){$("#header-history img").attr("src",staticBasePath+"/images/saved.gif").show(),$(".reconn").remove()},saveOnlineError:function(){Util.loading({content:"未发现本地数据，请编辑后，再次尝试",show:3e3,model:!1})},initMap:function(e){Model.define=e,setTimeout(function(){Designer.open(o({},Model.define)),Designer.initialize.canvasSizeAuto()},1e3)},renderUsers:function(e,t){publicCLB.renderUsers(e,t)},resetUserPic:function(e,t,n){publicCLB.resetUserPic(e,t,n)},loadHistorys:function(e,t){null!=t&&""!=t&&(History.loadHistorys(!0),$.toast({text:"历史版本创建成功"}))},MessageSource:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){MessageSource.receive(e)})},outline:{opts:{deviceType:"outline",name:"思维笔记"},getUserObj:function(){this.opts.chartId=window.chartId,this.opts.userId=window.userId,this.opts.fullName=window.fullName,this.opts.photoUrl=window.photoUrl},saveSending:function(){$("#header-history img").attr("src","".concat(staticBasePath,"/images/saving.gif")).error(function(){$(this).hide()}).load(function(){$(this).show()})},saveSuccess:function(){$("#header-history img").attr("src","".concat(staticBasePath,"/images/saved.gif")).show(),$(".reconn").remove()},saveOnlineError:function(){Util.loading({content:"未发现本地数据，请编辑后，再次尝试",show:3e3,model:!1})},checkMsgs:function(){sendMessage.checkMsgs()},initMap:function(e){outlineObj.model.data=e,setTimeout(function(){$("#outline-con").html(""),window.outlineObj=new window.Outline({target:"outline-con",line:{show:!0},readonly:!1,indent:"wider"},e)},1e3)},renderUsers:function(e,t){publicCLB.renderUsers(e,t)},resetUserPic:function(e,t,n){},loadHistorys:function(e){outlineUI&&outlineUI.history&&outlineUI.history.loadHistorys(),$("#history_remark").val(""),$("#btn_history_clear").button("disable"),$.toast({text:"历史版本创建成功"})},MessageSource:function(e,t){window.outlineObj.server.excuteMsgDirect(e,t)},getTopicParent:function(e){if("undefined"==typeof outlineObj||!outlineObj)return!1;var t=!1;if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n].parent;if(!outlineObj.model.getNodeById(o)){if(t=!0,e.length>1)for(var i=0;i<e.length;i++){if(o==e[i].id){t=!1;break}}break}}return t},forceExitFocus:function(){0==$(".mind-topic-focus").length||$("#root").length>0||window.mind&&(mind.operation.focusTopic.call(mind,mind.model.topic.id,!0,!1),mind.operation.exitFocus.call(mind),configCollaSave.toast({type:"warning",text:"您的文件处于多人协作， 已退出聚焦模式"}))}}};if(window.configCollaSave&&configCollaSave.instantSend(),window.localStorage){for(var l in localStorage)if(l.indexOf("def_")>-1){var c=JSON.parse(localStorage.getItem(l));c&&d(l,c)}function d(e,t){configCollaSave.store("get",e,function(n){if(n){var o=n.value;"string"==typeof o&&(o=JSON.parse(o)),t[version]>o[version]&&configCollaSave.store("put",{id:e,value:t},function(){localStorage.removeItem(e)})}else configCollaSave.store("add",{id:e,value:t},function(){localStorage.removeItem(e)})})}}var u=configCollaSave.getDefId?configCollaSave.getDefId():"";u&&configCollaSave.store("find","def_"+window.chartId,function(e){if(e){var t=e.value;"string"==typeof t&&(t=JSON.parse(t)),configCollaSave.store("add",{id:"def_"+window.chartId+"_"+u,value:t},function(){configCollaSave.store("remove","def_"+window.chartId)})}});
},{"../utils":"RKzI","./collaboration.less":"Zcgp","./sendmessage":"tLUA","./collaboration":"pq75","./indexdb":"bk6H"}],"tgKe":[function(require,module,exports) {
window.Server={addMyshapes:function(t,e){poAjax({data:{content:t},success:function(t){e(t),$.toast({text:"图形添加成功"})},error:function(){$.toast({type:"error",text:"图形添加失败"})}},"addMyshapes")},getMyshapes:function(t,e){poAjax({data:{page:t,size:10},type:"GET",success:function(t){e(t)},error:function(){$.toast({type:"error",text:"图形添加失败"})}},"getMyshapes")},newFile:function(t,e){var o=userObj.userId==chartObj.owner.userId&&chartObj.folderId?chartObj.folderId:"root";poAjax({data:{folderId:o,category:t},success:function(t){e(t)}},"createFile")},copyFile:function(t){var e=userObj.userId==chartObj.owner.userId&&chartObj.folderId?chartObj.folderId:"root";poAjax({data:{folderId:e,templateId:chartObj.chartId},success:function(e){t(e)}},"createFile")},favChart:function(t){poAjax({data:{chartId:chartId,chartType:"chart"},success:function(e){t(e)}},"favourite")},setConfig:function(t,e,o){poAjax({data:{field:t,value:e},success:function(t){null!=o&&o(t)}},"setConfig")},setBasicConfig:function(t,e){poAjax({data:{flowBasicConfig:t},success:function(t){null!=e&&e(t)}},"setBasicConfig")},logout:function(t){poAjax({type:"GET",success:function(e){Util.setCookies("token","",-1),"function"==typeof t&&t(e)}},"logout")}};
},{}],"Gotj":[function(require,module,exports) {
var process = require("process");
var e=require("process");(function(){var n,r,t,o,u,i;"undefined"!=typeof performance&&null!==performance&&performance.now?module.exports=function(){return performance.now()}:null!=e&&e.hrtime?(module.exports=function(){return(n()-u)/1e6},r=e.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),i=1e9*e.uptime(),u=o-i):Date.now?(module.exports=function(){return Date.now()-t},t=Date.now()):(module.exports=function(){return(new Date).getTime()-t},t=(new Date).getTime())}).call(this);
},{"process":"rH1J"}],"Slta":[function(require,module,exports) {
var global = arguments[3];
for(var e=arguments[3],n=require("performance-now"),t="undefined"==typeof window?e:window,a=["moz","webkit"],l="AnimationFrame",c=t["request"+l],o=t["cancel"+l]||t["cancelRequest"+l],r=0;!c&&r<a.length;r++)c=t[a[r]+"Request"+l],o=t[a[r]+"Cancel"+l]||t[a[r]+"CancelRequest"+l];if(!c||!o){var i=0,u=0,f=[],m=1e3/60;c=function(e){if(0===f.length){var t=n(),a=Math.max(0,m-(t-i));i=a+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var n=0;n<e.length;n++)if(!e[n].cancelled)try{e[n].callback(i)}catch(t){setTimeout(function(){throw t},0)}},Math.round(a))}return f.push({handle:++u,callback:e,cancelled:!1}),u},o=function(e){for(var n=0;n<f.length;n++)f[n].handle===e&&(f[n].cancelled=!0)}}module.exports=function(e){return c.call(t,e)},module.exports.cancel=function(){o.apply(t,arguments)},module.exports.polyfill=function(e){e||(e=t),e.requestAnimationFrame=c,e.cancelAnimationFrame=o};
},{"performance-now":"Gotj"}],"r3Yr":[function(require,module,exports) {
module.exports=function(e){this.ok=!1,this.alpha=1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase();var a={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};e=a[e]||e;for(var f=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<f.length;r++){var t=f[r].re,d=f[r].process,i=t.exec(e);if(i){var l=d(i);this.r=l[0],this.g=l[1],this.b=l[2],l.length>3&&(this.alpha=l[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var e=this.r.toString(16),a=this.g.toString(16),f=this.b.toString(16);return 1==e.length&&(e="0"+e),1==a.length&&(a="0"+a),1==f.length&&(f="0"+f),"#"+e+a+f},this.getHelpXML=function(){for(var e=new Array,r=0;r<f.length;r++)for(var t=f[r].example,d=0;d<t.length;d++)e[e.length]=t[d];for(var i in a)e[e.length]=i;var l=document.createElement("ul");l.setAttribute("id","rgbcolor-examples");for(r=0;r<e.length;r++)try{var n=document.createElement("li"),s=new RGBColor(e[r]),o=document.createElement("div");o.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),o.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+e[r]+" -> "+s.toRGB()+" -> "+s.toHex());n.appendChild(o),n.appendChild(h),l.appendChild(n)}catch(c){}return l}};
},{}],"AkCQ":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGPathDataTransformer=exports.SVGPathDataParser=exports.SVGPathData=exports.COMMAND_ARG_COUNTS=void 0,exports.encodeSVGPath=i;var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(t,e)};function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function i(t){var r="";Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e];if(i.type===N.CLOSE_PATH)r+="z";else if(i.type===N.HORIZ_LINE_TO)r+=(i.relative?"h":"H")+i.x;else if(i.type===N.VERT_LINE_TO)r+=(i.relative?"v":"V")+i.y;else if(i.type===N.MOVE_TO)r+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===N.LINE_TO)r+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===N.CURVE_TO)r+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===N.SMOOTH_CURVE_TO)r+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===N.QUAD_TO)r+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===N.SMOOTH_QUAD_TO)r+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==N.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+e+".");r+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return r}function a(t,r){var e=t[0],i=t[1];return[e*Math.cos(r)-i*Math.sin(r),e*Math.sin(r)+i*Math.cos(r)]}function n(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var i=0;i<r.length;i++)if("number"!=typeof r[i])throw new Error("assertNumbers arguments["+i+"] is not a number. "+t(r[i])+" == typeof "+r[i]);return!0}var o=Math.PI;function s(t,r,e){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var i=t.rX,n=t.rY,s=t.x,u=t.y;i=Math.abs(t.rX),n=Math.abs(t.rY);var c=a([(r-s)/2,(e-u)/2],-t.xRot/180*o),h=c[0],y=c[1],p=Math.pow(h,2)/Math.pow(i,2)+Math.pow(y,2)/Math.pow(n,2);1<p&&(i*=Math.sqrt(p),n*=Math.sqrt(p)),t.rX=i,t.rY=n;var m=Math.pow(i,2)*Math.pow(y,2)+Math.pow(n,2)*Math.pow(h,2),O=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-m)/m)),l=i*y/n*O,T=-n*h/i*O,f=a([l,T],t.xRot/180*o);t.cX=f[0]+(r+s)/2,t.cY=f[1]+(e+u)/2,t.phi1=Math.atan2((y-T)/n,(h-l)/i),t.phi2=Math.atan2((-y-T)/n,(-h-l)/i),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*o),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*o),t.phi1*=180/o,t.phi2*=180/o}function u(t,r,e){n(t,r,e);var i=t*t+r*r-e*e;if(0>i)return[];if(0===i)return[[t*e/(t*t+r*r),r*e/(t*t+r*r)]];var a=Math.sqrt(i);return[[(t*e+r*a)/(t*t+r*r),(r*e-t*a)/(t*t+r*r)],[(t*e-r*a)/(t*t+r*r),(r*e+t*a)/(t*t+r*r)]]}var c,h=Math.PI/180;function y(t,r,e){return(1-e)*t+e*r}function p(t,r,e,i){return t+Math.cos(i/180*o)*r+Math.sin(i/180*o)*e}function m(t,r,e,i){var a=r-t,n=e-r,o=3*a+3*(i-e)-6*n,s=6*(n-a),u=3*a;return Math.abs(o)<1e-6?[-u/s]:function(t,r,e){void 0===e&&(e=1e-6);var i=t*t/4-u/o;if(i<-e)return[];if(i<=e)return[-t/2];var a=Math.sqrt(i);return[-t/2-a,-t/2+a]}(s/o,0,1e-6)}function O(t,r,e,i,a){var n=1-a;return t*(n*n*n)+r*(3*n*n*a)+e*(3*n*a*a)+i*(a*a*a)}!function(t){function r(){return o(function(t,r,e){return t.relative&&(void 0!==t.x1&&(t.x1+=r),void 0!==t.y1&&(t.y1+=e),void 0!==t.x2&&(t.x2+=r),void 0!==t.y2&&(t.y2+=e),void 0!==t.x&&(t.x+=r),void 0!==t.y&&(t.y+=e),t.relative=!1),t})}function e(){var t=NaN,r=NaN,e=NaN,i=NaN;return o(function(a,n,o){return a.type&N.SMOOTH_CURVE_TO&&(a.type=N.CURVE_TO,t=isNaN(t)?n:t,r=isNaN(r)?o:r,a.x1=a.relative?n-t:2*n-t,a.y1=a.relative?o-r:2*o-r),a.type&N.CURVE_TO?(t=a.relative?n+a.x2:a.x2,r=a.relative?o+a.y2:a.y2):(t=NaN,r=NaN),a.type&N.SMOOTH_QUAD_TO&&(a.type=N.QUAD_TO,e=isNaN(e)?n:e,i=isNaN(i)?o:i,a.x1=a.relative?n-e:2*n-e,a.y1=a.relative?o-i:2*o-i),a.type&N.QUAD_TO?(e=a.relative?n+a.x1:a.x1,i=a.relative?o+a.y1:a.y1):(e=NaN,i=NaN),a})}function i(){var t=NaN,r=NaN;return o(function(e,i,a){if(e.type&N.SMOOTH_QUAD_TO&&(e.type=N.QUAD_TO,t=isNaN(t)?i:t,r=isNaN(r)?a:r,e.x1=e.relative?i-t:2*i-t,e.y1=e.relative?a-r:2*a-r),e.type&N.QUAD_TO){t=e.relative?i+e.x1:e.x1,r=e.relative?a+e.y1:e.y1;var n=e.x1,o=e.y1;e.type=N.CURVE_TO,e.x1=((e.relative?0:i)+2*n)/3,e.y1=((e.relative?0:a)+2*o)/3,e.x2=(e.x+2*n)/3,e.y2=(e.y+2*o)/3}else t=NaN,r=NaN;return e})}function o(t){var r=0,e=0,i=NaN,a=NaN;return function(n){if(isNaN(i)&&!(n.type&N.MOVE_TO))throw new Error("path must start with moveto");var o=t(n,r,e,i,a);return n.type&N.CLOSE_PATH&&(r=i,e=a),void 0!==n.x&&(r=n.relative?r+n.x:n.x),void 0!==n.y&&(e=n.relative?e+n.y:n.y),n.type&N.MOVE_TO&&(i=r,a=e),o}}function c(t,r,e,i,a,s){return n(t,r,e,i,a,s),o(function(n,o,u,c){var h=n.x1,y=n.x2,p=n.relative&&!isNaN(c),m=void 0!==n.x?n.x:p?0:o,O=void 0!==n.y?n.y:p?0:u;function l(t){return t*t}n.type&N.HORIZ_LINE_TO&&0!==r&&(n.type=N.LINE_TO,n.y=n.relative?0:u),n.type&N.VERT_LINE_TO&&0!==e&&(n.type=N.LINE_TO,n.x=n.relative?0:o),void 0!==n.x&&(n.x=n.x*t+O*e+(p?0:a)),void 0!==n.y&&(n.y=m*r+n.y*i+(p?0:s)),void 0!==n.x1&&(n.x1=n.x1*t+n.y1*e+(p?0:a)),void 0!==n.y1&&(n.y1=h*r+n.y1*i+(p?0:s)),void 0!==n.x2&&(n.x2=n.x2*t+n.y2*e+(p?0:a)),void 0!==n.y2&&(n.y2=y*r+n.y2*i+(p?0:s));var T=t*i-r*e;if(void 0!==n.xRot&&(1!==t||0!==r||0!==e||1!==i))if(0===T)delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag,n.type=N.LINE_TO;else{var f=n.xRot*Math.PI/180,v=Math.sin(f),_=Math.cos(f),x=1/l(n.rX),d=1/l(n.rY),A=l(_)*x+l(v)*d,E=2*v*_*(x-d),C=l(v)*x+l(_)*d,M=A*i*i-E*r*i+C*r*r,R=E*(t*i+r*e)-2*(A*e*i+C*t*r),g=A*e*e-E*t*e+C*t*t,S=(Math.atan2(R,M-g)+Math.PI)%Math.PI/2,I=Math.sin(S),L=Math.cos(S);n.rX=Math.abs(T)/Math.sqrt(M*l(L)+R*I*L+g*l(I)),n.rY=Math.abs(T)/Math.sqrt(M*l(I)-R*I*L+g*l(L)),n.xRot=180*S/Math.PI}return void 0!==n.sweepFlag&&0>T&&(n.sweepFlag=+!n.sweepFlag),n})}t.ROUND=function(t){function r(r){return Math.round(r*t)/t}return void 0===t&&(t=1e13),n(t),function(t){return void 0!==t.x1&&(t.x1=r(t.x1)),void 0!==t.y1&&(t.y1=r(t.y1)),void 0!==t.x2&&(t.x2=r(t.x2)),void 0!==t.y2&&(t.y2=r(t.y2)),void 0!==t.x&&(t.x=r(t.x)),void 0!==t.y&&(t.y=r(t.y)),void 0!==t.rX&&(t.rX=r(t.rX)),void 0!==t.rY&&(t.rY=r(t.rY)),t}},t.TO_ABS=r,t.TO_REL=function(){return o(function(t,r,e){return t.relative||(void 0!==t.x1&&(t.x1-=r),void 0!==t.y1&&(t.y1-=e),void 0!==t.x2&&(t.x2-=r),void 0!==t.y2&&(t.y2-=e),void 0!==t.x&&(t.x-=r),void 0!==t.y&&(t.y-=e),t.relative=!0),t})},t.NORMALIZE_HVZ=function(t,r,e){return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===e&&(e=!0),o(function(i,a,n,o,s){if(isNaN(o)&&!(i.type&N.MOVE_TO))throw new Error("path must start with moveto");return r&&i.type&N.HORIZ_LINE_TO&&(i.type=N.LINE_TO,i.y=i.relative?0:n),e&&i.type&N.VERT_LINE_TO&&(i.type=N.LINE_TO,i.x=i.relative?0:a),t&&i.type&N.CLOSE_PATH&&(i.type=N.LINE_TO,i.x=i.relative?o-a:o,i.y=i.relative?s-n:s),i.type&N.ARC&&(0===i.rX||0===i.rY)&&(i.type=N.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i})},t.NORMALIZE_ST=e,t.QT_TO_C=i,t.INFO=o,t.SANITIZE=function(t){void 0===t&&(t=0),n(t);var r=NaN,e=NaN,i=NaN,a=NaN;return o(function(n,o,s,u,c){var h=Math.abs,y=!1,p=0,m=0;if(n.type&N.SMOOTH_CURVE_TO&&(p=isNaN(r)?0:o-r,m=isNaN(e)?0:s-e),n.type&(N.CURVE_TO|N.SMOOTH_CURVE_TO)?(r=n.relative?o+n.x2:n.x2,e=n.relative?s+n.y2:n.y2):(r=NaN,e=NaN),n.type&N.SMOOTH_QUAD_TO?(i=isNaN(i)?o:2*o-i,a=isNaN(a)?s:2*s-a):n.type&N.QUAD_TO?(i=n.relative?o+n.x1:n.x1,a=n.relative?s+n.y1:n.y2):(i=NaN,a=NaN),n.type&N.LINE_COMMANDS||n.type&N.ARC&&(0===n.rX||0===n.rY||!n.lArcFlag)||n.type&N.CURVE_TO||n.type&N.SMOOTH_CURVE_TO||n.type&N.QUAD_TO||n.type&N.SMOOTH_QUAD_TO){var O=void 0===n.x?0:n.relative?n.x:n.x-o,l=void 0===n.y?0:n.relative?n.y:n.y-s;p=isNaN(i)?void 0===n.x1?p:n.relative?n.x:n.x1-o:i-o,m=isNaN(a)?void 0===n.y1?m:n.relative?n.y:n.y1-s:a-s;var T=void 0===n.x2?0:n.relative?n.x:n.x2-o,f=void 0===n.y2?0:n.relative?n.y:n.y2-s;h(O)<=t&&h(l)<=t&&h(p)<=t&&h(m)<=t&&h(T)<=t&&h(f)<=t&&(y=!0)}return n.type&N.CLOSE_PATH&&h(o-u)<=t&&h(s-c)<=t&&(y=!0),y?[]:n})},t.MATRIX=c,t.ROTATE=function(t,r,e){void 0===r&&(r=0),void 0===e&&(e=0),n(t,r,e);var i=Math.sin(t),a=Math.cos(t);return c(a,i,-i,a,r-r*a+e*i,e-r*i-e*a)},t.TRANSLATE=function(t,r){return void 0===r&&(r=0),n(t,r),c(1,0,0,1,t,r)},t.SCALE=function(t,r){return void 0===r&&(r=t),n(t,r),c(t,0,0,r,0,0)},t.SKEW_X=function(t){return n(t),c(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return n(t),c(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),n(t),c(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),n(t),c(1,0,0,-1,0,t)},t.A_TO_C=function(){return o(function(t,r,e){return N.ARC===t.type?function(t,r,e){var i,n,o,u;t.cX||s(t,r,e);for(var c=Math.min(t.phi1,t.phi2),p=Math.max(t.phi1,t.phi2)-c,m=Math.ceil(p/90),O=new Array(m),l=r,T=e,f=0;f<m;f++){var v=y(t.phi1,t.phi2,f/m),_=y(t.phi1,t.phi2,(f+1)/m),x=_-v,d=4/3*Math.tan(x*h/4),A=[Math.cos(v*h)-d*Math.sin(v*h),Math.sin(v*h)+d*Math.cos(v*h)],E=A[0],C=A[1],M=[Math.cos(_*h),Math.sin(_*h)],R=M[0],g=M[1],S=[R+d*Math.sin(_*h),g-d*Math.cos(_*h)],I=S[0],L=S[1];O[f]={relative:t.relative,type:N.CURVE_TO};var U=function(r,e){var i=a([r*t.rX,e*t.rY],t.xRot),n=i[0],o=i[1];return[t.cX+n,t.cY+o]};i=U(E,C),O[f].x1=i[0],O[f].y1=i[1],n=U(I,L),O[f].x2=n[0],O[f].y2=n[1],o=U(R,g),O[f].x=o[0],O[f].y=o[1],t.relative&&(O[f].x1-=l,O[f].y1-=T,O[f].x2-=l,O[f].y2-=T,O[f].x-=l,O[f].y-=T),l=(u=[O[f].x,O[f].y])[0],T=u[1]}return O}(t,t.relative?0:r,t.relative?0:e):t})},t.ANNOTATE_ARCS=function(){return o(function(t,r,e){return t.relative&&(r=0,e=0),N.ARC===t.type&&s(t,r,e),t})},t.CLONE=function(){return function(t){var r={};for(var e in t)r[e]=t[e];return r}},t.CALCULATE_BOUNDS=function(){var t=r(),a=i(),n=e(),c=o(function(r,e,i){var o=n(a(t(function(t){var r={};for(var e in t)r[e]=t[e];return r}(r))));function h(t){t>c.maxX&&(c.maxX=t),t<c.minX&&(c.minX=t)}function y(t){t>c.maxY&&(c.maxY=t),t<c.minY&&(c.minY=t)}if(o.type&N.DRAWING_COMMANDS&&(h(e),y(i)),o.type&N.HORIZ_LINE_TO&&h(o.x),o.type&N.VERT_LINE_TO&&y(o.y),o.type&N.LINE_TO&&(h(o.x),y(o.y)),o.type&N.CURVE_TO){h(o.x),y(o.y);for(var l=0,T=m(e,o.x1,o.x2,o.x);l<T.length;l++)0<(H=T[l])&&1>H&&h(O(e,o.x1,o.x2,o.x,H));for(var f=0,v=m(i,o.y1,o.y2,o.y);f<v.length;f++)0<(H=v[f])&&1>H&&y(O(i,o.y1,o.y2,o.y,H))}if(o.type&N.ARC){h(o.x),y(o.y),s(o,e,i);for(var _=o.xRot/180*Math.PI,x=Math.cos(_)*o.rX,d=Math.sin(_)*o.rX,A=-Math.sin(_)*o.rY,E=Math.cos(_)*o.rY,C=o.phi1<o.phi2?[o.phi1,o.phi2]:-180>o.phi2?[o.phi2+360,o.phi1+360]:[o.phi2,o.phi1],M=C[0],R=C[1],g=function(t){var r=t[0],e=t[1],i=180*Math.atan2(e,r)/Math.PI;return i<M?i+360:i},S=0,I=u(A,-x,0).map(g);S<I.length;S++)(H=I[S])>M&&H<R&&h(p(o.cX,x,A,H));for(var L=0,U=u(E,-d,0).map(g);L<U.length;L++){var H;(H=U[L])>M&&H<R&&y(p(o.cY,d,E,H))}}return r});return c.minX=1/0,c.maxX=-1/0,c.minY=1/0,c.maxY=-1/0,c}}(c||(exports.SVGPathDataTransformer=c={}));var l,T=function(){function t(){}return t.prototype.round=function(t){return this.transform(c.ROUND(t))},t.prototype.toAbs=function(){return this.transform(c.TO_ABS())},t.prototype.toRel=function(){return this.transform(c.TO_REL())},t.prototype.normalizeHVZ=function(t,r,e){return this.transform(c.NORMALIZE_HVZ(t,r,e))},t.prototype.normalizeST=function(){return this.transform(c.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(c.QT_TO_C())},t.prototype.aToC=function(){return this.transform(c.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(c.SANITIZE(t))},t.prototype.translate=function(t,r){return this.transform(c.TRANSLATE(t,r))},t.prototype.scale=function(t,r){return this.transform(c.SCALE(t,r))},t.prototype.rotate=function(t,r,e){return this.transform(c.ROTATE(t,r,e))},t.prototype.matrix=function(t,r,e,i,a,n){return this.transform(c.MATRIX(t,r,e,i,a,n))},t.prototype.skewX=function(t){return this.transform(c.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(c.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(c.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(c.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(c.ANNOTATE_ARCS())},t}(),f=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},v=function(t){return"0".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<="9".charCodeAt(0)},_=exports.SVGPathDataParser=function(t){function r(){var r=t.call(this)||this;return r.curNumber="",r.curCommandType=-1,r.curCommandRelative=!1,r.canParseCommandOrComma=!0,r.curNumberHasExp=!1,r.curNumberHasExpDigits=!1,r.curNumberHasDecimal=!1,r.curArgs=[],r}return e(r,t),r.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(" ",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},r.prototype.parse=function(t,r){var e=this;void 0===r&&(r=[]);for(var i=function(t){r.push(t),e.curArgs.length=0,e.canParseCommandOrComma=!0},a=0;a<t.length;a++){var n=t[a],o=!(this.curCommandType!==N.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=v(n)&&("0"===this.curNumber&&"0"===n||o);if(!v(n)||s)if("e"!==n&&"E"!==n)if("-"!==n&&"+"!==n||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==n||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+a);if(this.curCommandType===N.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+a+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+a+'"');this.curArgs.push(u),this.curArgs.length===x[this.curCommandType]&&(N.HORIZ_LINE_TO===this.curCommandType?i({type:N.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):N.VERT_LINE_TO===this.curCommandType?i({type:N.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===N.MOVE_TO||this.curCommandType===N.LINE_TO||this.curCommandType===N.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),N.MOVE_TO===this.curCommandType&&(this.curCommandType=N.LINE_TO)):this.curCommandType===N.CURVE_TO?i({type:N.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===N.SMOOTH_CURVE_TO?i({type:N.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===N.QUAD_TO?i({type:N.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===N.ARC&&i({type:N.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!f(n))if(","===n&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==n&&"-"!==n&&"."!==n)if(s)this.curNumber=n,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+a+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+n+'" at index '+a+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==n&&"Z"!==n)if("h"===n||"H"===n)this.curCommandType=N.HORIZ_LINE_TO,this.curCommandRelative="h"===n;else if("v"===n||"V"===n)this.curCommandType=N.VERT_LINE_TO,this.curCommandRelative="v"===n;else if("m"===n||"M"===n)this.curCommandType=N.MOVE_TO,this.curCommandRelative="m"===n;else if("l"===n||"L"===n)this.curCommandType=N.LINE_TO,this.curCommandRelative="l"===n;else if("c"===n||"C"===n)this.curCommandType=N.CURVE_TO,this.curCommandRelative="c"===n;else if("s"===n||"S"===n)this.curCommandType=N.SMOOTH_CURVE_TO,this.curCommandRelative="s"===n;else if("q"===n||"Q"===n)this.curCommandType=N.QUAD_TO,this.curCommandRelative="q"===n;else if("t"===n||"T"===n)this.curCommandType=N.SMOOTH_QUAD_TO,this.curCommandRelative="t"===n;else{if("a"!==n&&"A"!==n)throw new SyntaxError('Unexpected character "'+n+'" at index '+a+".");this.curCommandType=N.ARC,this.curCommandRelative="a"===n}else r.push({type:N.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=n,this.curNumberHasDecimal="."===n}else this.curNumber+=n,this.curNumberHasDecimal=!0;else this.curNumber+=n;else this.curNumber+=n,this.curNumberHasExp=!0;else this.curNumber+=n,this.curNumberHasExpDigits=this.curNumberHasExp}return r},r.prototype.transform=function(t){return Object.create(this,{parse:{value:function(r,e){void 0===e&&(e=[]);for(var i=0,a=Object.getPrototypeOf(this).parse.call(this,r);i<a.length;i++){var n=a[i],o=t(n);Array.isArray(o)?e.push.apply(e,o):e.push(o)}return e}}})},r}(T),N=exports.SVGPathData=function(t){function r(e){var i=t.call(this)||this;return i.commands="string"==typeof e?r.parse(e):e,i}return e(r,t),r.prototype.encode=function(){return r.encode(this.commands)},r.prototype.getBounds=function(){var t=c.CALCULATE_BOUNDS();return this.transform(t),t},r.prototype.transform=function(t){for(var r=[],e=0,i=this.commands;e<i.length;e++){var a=t(i[e]);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return this.commands=r,this},r.encode=function(t){return i(t)},r.parse=function(t){var r=new _,e=[];return r.parse(t,e),r.finish(e),e},r.CLOSE_PATH=1,r.MOVE_TO=2,r.HORIZ_LINE_TO=4,r.VERT_LINE_TO=8,r.LINE_TO=16,r.CURVE_TO=32,r.SMOOTH_CURVE_TO=64,r.QUAD_TO=128,r.SMOOTH_QUAD_TO=256,r.ARC=512,r.LINE_COMMANDS=r.LINE_TO|r.HORIZ_LINE_TO|r.VERT_LINE_TO,r.DRAWING_COMMANDS=r.HORIZ_LINE_TO|r.VERT_LINE_TO|r.LINE_TO|r.CURVE_TO|r.SMOOTH_CURVE_TO|r.QUAD_TO|r.SMOOTH_QUAD_TO|r.ARC,r}(T),x=exports.COMMAND_ARG_COUNTS=((l={})[N.MOVE_TO]=2,l[N.LINE_TO]=2,l[N.HORIZ_LINE_TO]=1,l[N.VERT_LINE_TO]=1,l[N.CLOSE_PATH]=0,l[N.QUAD_TO]=4,l[N.SMOOTH_QUAD_TO]=2,l[N.CURVE_TO]=6,l[N.SMOOTH_CURVE_TO]=4,l[N.ARC]=7,l);
},{}],"UkFi":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlurStack=void 0,exports.canvasRGB=g,exports.canvasRGBA=i,exports.image=n,exports.imageDataRGB=s,exports.imageDataRGBA=f;var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function n(t,r,e,a,n,o){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var f=n?"offset":"natural",s=t[f+"Width"],u=t[f+"Height"];if("string"==typeof r&&(r=document.getElementById(r)),r&&"getContext"in r){o||(r.style.width=s+"px",r.style.height=u+"px"),r.width=s,r.height=u;var v=r.getContext("2d");v.clearRect(0,0,s,u),v.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,s,u),isNaN(e)||e<1||(a?i(r,0,0,s,u,e):g(r,0,0,s,u,e))}}}function o(r,e,a,n,o){if("string"==typeof r&&(r=document.getElementById(r)),!(r&&"object"===t(r)&&"getContext"in r))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=r.getContext("2d");try{return i.getImageData(e,a,n,o)}catch(f){throw new Error("unable to access image data: "+f)}}function i(t,r,e,a,n,i){if(!(isNaN(i)||i<1)){i|=0;var g=o(t,r,e,a,n);g=f(g,r,e,a,n,i),t.getContext("2d").putImageData(g,r,e)}}function f(t,r,n,o,i,f){for(var g,s=t.data,v=2*f+1,c=o-1,x=i-1,l=f+1,b=l*(l+1)/2,p=new u,y=p,d=1;d<v;d++)y=y.next=new u,d===l&&(g=y);y.next=p;for(var h=null,m=null,w=0,B=0,C=e[f],E=a[f],I=0;I<i;I++){y=p;for(var S=s[B],N=s[B+1],R=s[B+2],D=s[B+3],G=0;G<l;G++)y.r=S,y.g=N,y.b=R,y.a=D,y=y.next;for(var A=0,W=0,j=0,k=0,H=l*S,T=l*N,_=l*R,M=l*D,O=b*S,P=b*N,q=b*R,z=b*D,F=1;F<l;F++){var J=B+((c<F?c:F)<<2),K=s[J],L=s[J+1],Q=s[J+2],U=s[J+3],V=l-F;O+=(y.r=K)*V,P+=(y.g=L)*V,q+=(y.b=Q)*V,z+=(y.a=U)*V,A+=K,W+=L,j+=Q,k+=U,y=y.next}h=p,m=g;for(var X=0;X<o;X++){var Y=z*C>>E;if(s[B+3]=Y,0!==Y){var Z=255/Y;s[B]=(O*C>>E)*Z,s[B+1]=(P*C>>E)*Z,s[B+2]=(q*C>>E)*Z}else s[B]=s[B+1]=s[B+2]=0;O-=H,P-=T,q-=_,z-=M,H-=h.r,T-=h.g,_-=h.b,M-=h.a;var $=X+f+1;$=w+($<c?$:c)<<2,O+=A+=h.r=s[$],P+=W+=h.g=s[$+1],q+=j+=h.b=s[$+2],z+=k+=h.a=s[$+3],h=h.next;var tt=m,rt=tt.r,et=tt.g,at=tt.b,nt=tt.a;H+=rt,T+=et,_+=at,M+=nt,A-=rt,W-=et,j-=at,k-=nt,m=m.next,B+=4}w+=o}for(var ot=0;ot<o;ot++){var it=s[B=ot<<2],ft=s[B+1],gt=s[B+2],st=s[B+3],ut=l*it,vt=l*ft,ct=l*gt,xt=l*st,lt=b*it,bt=b*ft,pt=b*gt,yt=b*st;y=p;for(var dt=0;dt<l;dt++)y.r=it,y.g=ft,y.b=gt,y.a=st,y=y.next;for(var ht=o,mt=0,wt=0,Bt=0,Ct=0,Et=1;Et<=f;Et++){B=ht+ot<<2;var It=l-Et;lt+=(y.r=it=s[B])*It,bt+=(y.g=ft=s[B+1])*It,pt+=(y.b=gt=s[B+2])*It,yt+=(y.a=st=s[B+3])*It,Ct+=it,mt+=ft,wt+=gt,Bt+=st,y=y.next,Et<x&&(ht+=o)}B=ot,h=p,m=g;for(var St=0;St<i;St++){var Nt=B<<2;s[Nt+3]=st=yt*C>>E,st>0?(st=255/st,s[Nt]=(lt*C>>E)*st,s[Nt+1]=(bt*C>>E)*st,s[Nt+2]=(pt*C>>E)*st):s[Nt]=s[Nt+1]=s[Nt+2]=0,lt-=ut,bt-=vt,pt-=ct,yt-=xt,ut-=h.r,vt-=h.g,ct-=h.b,xt-=h.a,Nt=ot+((Nt=St+l)<x?Nt:x)*o<<2,lt+=Ct+=h.r=s[Nt],bt+=mt+=h.g=s[Nt+1],pt+=wt+=h.b=s[Nt+2],yt+=Bt+=h.a=s[Nt+3],h=h.next,ut+=it=m.r,vt+=ft=m.g,ct+=gt=m.b,xt+=st=m.a,Ct-=it,mt-=ft,wt-=gt,Bt-=st,m=m.next,B+=o}}return t}function g(t,r,e,a,n,i){if(!(isNaN(i)||i<1)){i|=0;var f=o(t,r,e,a,n);f=s(f,r,e,a,n,i),t.getContext("2d").putImageData(f,r,e)}}function s(t,r,n,o,i,f){for(var g,s=t.data,v=2*f+1,c=o-1,x=i-1,l=f+1,b=l*(l+1)/2,p=new u,y=p,d=1;d<v;d++)y=y.next=new u,d===l&&(g=y);y.next=p;for(var h,m,w=null,B=null,C=e[f],E=a[f],I=0,S=0,N=0;N<i;N++){var R=s[S],D=s[S+1],G=s[S+2],A=l*R,W=l*D,j=l*G,k=b*R,H=b*D,T=b*G;y=p;for(var _=0;_<l;_++)y.r=R,y.g=D,y.b=G,y=y.next;for(var M=0,O=0,P=0,q=1;q<l;q++)h=S+((c<q?c:q)<<2),k+=(y.r=R=s[h])*(m=l-q),H+=(y.g=D=s[h+1])*m,T+=(y.b=G=s[h+2])*m,M+=R,O+=D,P+=G,y=y.next;w=p,B=g;for(var z=0;z<o;z++)s[S]=k*C>>E,s[S+1]=H*C>>E,s[S+2]=T*C>>E,k-=A,H-=W,T-=j,A-=w.r,W-=w.g,j-=w.b,h=I+((h=z+f+1)<c?h:c)<<2,k+=M+=w.r=s[h],H+=O+=w.g=s[h+1],T+=P+=w.b=s[h+2],w=w.next,A+=R=B.r,W+=D=B.g,j+=G=B.b,M-=R,O-=D,P-=G,B=B.next,S+=4;I+=o}for(var F=0;F<o;F++){var J=s[S=F<<2],K=s[S+1],L=s[S+2],Q=l*J,U=l*K,V=l*L,X=b*J,Y=b*K,Z=b*L;y=p;for(var $=0;$<l;$++)y.r=J,y.g=K,y.b=L,y=y.next;for(var tt=0,rt=0,et=0,at=1,nt=o;at<=f;at++)S=nt+F<<2,X+=(y.r=J=s[S])*(m=l-at),Y+=(y.g=K=s[S+1])*m,Z+=(y.b=L=s[S+2])*m,tt+=J,rt+=K,et+=L,y=y.next,at<x&&(nt+=o);S=F,w=p,B=g;for(var ot=0;ot<i;ot++)s[h=S<<2]=X*C>>E,s[h+1]=Y*C>>E,s[h+2]=Z*C>>E,X-=Q,Y-=U,Z-=V,Q-=w.r,U-=w.g,V-=w.b,h=F+((h=ot+l)<x?h:x)*o<<2,X+=tt+=w.r=s[h],Y+=rt+=w.g=s[h+1],Z+=et+=w.b=s[h+2],w=w.next,Q+=J=B.r,U+=K=B.g,V+=L=B.b,tt-=J,rt-=K,et-=L,B=B.next,S+=o}return t}var u=exports.BlurStack=function t(){r(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};
},{}],"e3eR":[function(require,module,exports) {
var define;
var process = require("process");
var t,e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoundingBox=exports.AnimateTransformElement=exports.AnimateElement=exports.AnimateColorElement=exports.AElement=void 0,exports.CB1=ht,exports.CB2=ct,exports.CB3=ft,exports.CB4=gt,exports.Property=exports.PolylineElement=exports.PolygonElement=exports.Point=exports.PatternElement=exports.PathParser=exports.PathElement=exports.Parser=exports.PSEUDO_ZERO=exports.Mouse=exports.MissingGlyphElement=exports.Matrix=exports.MaskElement=exports.MarkerElement=exports.LinearGradientElement=exports.LineElement=exports.ImageElement=exports.GradientElement=exports.GlyphElement=exports.GElement=exports.FontFaceElement=exports.FontElement=exports.Font=exports.FilterElement=exports.FeMorphologyElement=exports.FeGaussianBlurElement=exports.FeDropShadowElement=exports.FeCompositeElement=exports.FeColorMatrixElement=exports.EllipseElement=exports.Element=exports.Document=exports.DescElement=exports.DefsElement=exports.ClipPathElement=exports.CircleElement=exports.Canvg=void 0,exports.QB1=pt,exports.QB2=vt,exports.QB3=yt,exports.ViewPort=exports.UseElement=exports.UnknownElement=exports.Translate=exports.Transform=exports.TitleElement=exports.TextPathElement=exports.TextElement=exports.TSpanElement=exports.TRefElement=exports.SymbolElement=exports.StyleElement=exports.StopElement=exports.SkewY=exports.SkewX=exports.Skew=exports.Screen=exports.Scale=exports.SVGFontLoader=exports.SVGElement=exports.Rotate=exports.RenderedElement=exports.RectElement=exports.RadialGradientElement=void 0,exports.compressSpaces=X,exports.elements=void 0,exports.getSelectorSpecificity=at,exports.normalizeAttributeName=q,exports.normalizeColor=Q,exports.parseExternalUrl=$,exports.presets=void 0,exports.toMatrixValue=W,exports.toNumbers=Y,exports.trimLeft=G,exports.trimRight=U,exports.vectorMagnitude=st,exports.vectorsAngle=lt,exports.vectorsRatio=ut;var r=o(require("raf")),n=o(require("rgbcolor")),i=require("svg-pathdata"),a=require("stackblur-canvas");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach(function(e){h(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function h(t,e,r){return(e=T(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=N(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=g(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function g(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}function p(t){return d(t)||y(t)||N(t)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function d(t){if(Array.isArray(t))return L(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}function x(t,e){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=S();return function(){var r,n=P(t);if(e){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k(this,r)}}function k(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T(n.key),n)}}function C(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function T(t){var e=V(t,"string");return"symbol"===s(e)?e:String(e)}function V(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function M(t,e){return R(t)||D(t,e)||N(t,e)||O()}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function R(t){if(Array.isArray(t))return t}function B(){"use strict";B=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,o=Object.create(a.prototype),s=new O(n||[]);return i(o,"_invoke",{value:C(t,r,s)}),o}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var g="suspendedStart",p="suspendedYield",v="executing",y="completed",d={};function m(){}function x(){}function b(){}var k={};h(k,o,function(){return this});var w=Object.getPrototypeOf,S=w&&w(w(N([])));S&&S!==r&&n.call(S,o)&&(k=S);var P=b.prototype=m.prototype=Object.create(k);function A(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(i,a,o,u){var l=f(t[i],t,a);if("throw"!==l.type){var h=l.arg,c=h.value;return c&&"object"==s(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,o,u)},function(t){r("throw",t,o,u)}):e.resolve(c).then(function(t){h.value=t,o(h)},function(t){return r("throw",t,o,u)})}u(l.arg)}var a;i(this,"_invoke",{value:function(t,n){function i(){return new e(function(e,i){r(t,n,e,i)})}return a=a?a.then(i,i):i()}})}function C(e,r,n){var i=g;return function(a,o){if(i===v)throw new Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===g)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var a=f(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,d;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function V(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(V,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(s(e)+" is not iterable")}return x.prototype=b,i(P,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:x,configurable:!0}),x.displayName=h(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},A(E.prototype),h(E.prototype,u,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new E(c(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},A(P),h(P,l,"Generator"),h(P,o,function(){return this}),h(P,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function I(t,e,r,n,i,a,o){try{var s=t[a](o),u=s.value}catch(l){return void r(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function z(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function o(t){I(a,n,i,o,s,"next",t)}function s(t){I(a,n,i,o,s,"throw",t)}o(void 0)})}}function F(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).DOMParser,e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,createCanvas:function(t,e){return new OffscreenCanvas(t,e)},createImage:function(t){return z(B().mark(function e(){var r,n,i;return B().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.blob();case 5:return n=e.sent,e.next=8,createImageBitmap(n);case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}},e)}))()}};return void 0===globalThis.DOMParser&&void 0!==t||Reflect.deleteProperty(e,"DOMParser"),e}function _(t){var e=t.DOMParser,r=t.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:t.fetch,createCanvas:r.createCanvas,createImage:r.loadImage}}var j=exports.presets=Object.freeze({__proto__:null,offscreen:F,node:_});function X(t){return t.replace(/(?!\u3000)\s+/gm," ")}function G(t){return t.replace(/^[\n \t]+/,"")}function U(t){return t.replace(/[\n \t]+$/,"")}function Y(t){var e=t.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return e?e.map(parseFloat):[]}function W(t){var e=Y(t);return[e[0]||0,e[1]||0,e[2]||0,e[3]||0,e[4]||0,e[5]||0]}var H=/^[A-Z-]+$/;function q(t){return H.test(t)?t.toLowerCase():t}function $(t){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t);return e&&(e[2]||e[3]||e[4])||""}function Q(t){if(!t.startsWith("rgb"))return t;var e=3;return t.replace(/\d+(\.\d+)?/g,function(t,r){return e--&&r?String(Math.round(parseFloat(t))):t})}var Z=/(\[[^\]]+\])/g,J=/(#[^\s+>~.[:]+)/g,K=/(\.[^\s+>~.[:]+)/g,tt=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,et=/(:[\w-]+\([^)]*\))/gi,rt=/(:[^\s+>~.[:]+)/g,nt=/([^\s+>~.[:]+)/g;function it(t,e){var r=e.exec(t);return r?[t.replace(e," "),r.length]:[t,0]}function at(t){var e=[0,0,0],r=t.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),n=0,i=M(it(r,Z),2);r=i[0],n=i[1],e[1]+=n;var a=M(it(r,J),2);r=a[0],n=a[1],e[0]+=n;var o=M(it(r,K),2);r=o[0],n=o[1],e[1]+=n;var s=M(it(r,tt),2);r=s[0],n=s[1],e[2]+=n;var u=M(it(r,et),2);r=u[0],n=u[1],e[1]+=n;var l=M(it(r,rt),2);r=l[0],n=l[1],e[1]+=n;var h=M(it(r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),nt),2);return r=h[0],n=h[1],e[2]+=n,e.join("")}var ot=exports.PSEUDO_ZERO=1e-8;function st(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function ut(t,e){return(t[0]*e[0]+t[1]*e[1])/(st(t)*st(e))}function lt(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(ut(t,e))}function ht(t){return t*t*t}function ct(t){return 3*t*t*(1-t)}function ft(t){return 3*t*(1-t)*(1-t)}function gt(t){return(1-t)*(1-t)*(1-t)}function pt(t){return t*t}function vt(t){return 2*t*(1-t)}function yt(t){return(1-t)*(1-t)}var dt=exports.Property=function(){function t(e,r,n){A(this,t),this.document=e,this.name=r,this.value=n,this.isNormalizedColor=!1}return C(t,[{key:"split",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",r=this.document,n=this.name;return X(this.getString()).trim().split(e).map(function(e){return new t(r,n,e)})}},{key:"hasValue",value:function(t){var e=this.value;return null!==e&&""!==e&&(t||0!==e)&&void 0!==e}},{key:"isString",value:function(t){var e=this.value,r="string"==typeof e;return r&&t?t.test(e):r}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);var e=this.value,r=parseFloat(e);return this.isString(/%$/)&&(r/=100),r}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":String(this.value):String(t)}},{key:"getColor",value:function(t){var e=this.getString(t);return this.isNormalizedColor?e:(this.isNormalizedColor=!0,e=Q(e),this.value=e,e)}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9.-]/g,"")}},{key:"getPixels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var r=M("boolean"==typeof t?[void 0,t]:[t],2),n=r[0],i=r[1],a=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(a.computeSize("x"),a.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(a.computeSize("x"),a.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*a.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*a.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&i:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*a.computeSize(n);default:var o=this.getNumber();return e&&o<1?o*a.computeSize(n):o}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=/#([^)'"]+)/.exec(t),r=(null==e?void 0:e[1])||t;return this.document.definitions[r]}},{key:"getFillStyleDefinition",value:function(t,e){var r=this.getDefinition();if(!r)return null;if("function"==typeof r.createGradient&&"getBoundingBox"in t)return r.createGradient(this.document.ctx,t,e);if("function"==typeof r.createPattern){if(r.getHrefAttribute().hasValue()){var n=r.getAttribute("patternTransform");(r=r.getHrefAttribute().getDefinition())&&n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)}if(r)return r.createPattern(this.document.ctx,t,e)}return null}},{key:"getTextBaseline",value:function(){if(!this.hasValue())return null;var e=this.getString();return t.textBaselineMapping[e]||null}},{key:"addOpacity",value:function(e){for(var r=this.getColor(),i=r.length,a=0,o=0;o<i&&(","===r[o]&&a++,3!==a);o++);if(e.hasValue()&&this.isString()&&3!==a){var s=new n.default(r);s.ok&&(s.alpha=e.getNumber(),r=s.toRGBA())}return new t(this.document,this.name,r)}}],[{key:"empty",value:function(e){return new t(e,"EMPTY","")}}]),t}();dt.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var mt=exports.ViewPort=function(){function t(){A(this,t),this.viewPorts=[]}return C(t,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getRoot",value:function(){var t=M(this.viewPorts,1)[0];return t||xt()}},{key:"getCurrent",value:function(){var t=this.viewPorts,e=t[t.length-1];return e||xt()}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}]),t}();function xt(){return{width:mt.DEFAULT_VIEWPORT_WIDTH,height:mt.DEFAULT_VIEWPORT_HEIGHT}}mt.DEFAULT_VIEWPORT_WIDTH=800,mt.DEFAULT_VIEWPORT_HEIGHT=600;var bt=exports.Point=function(){function t(e,r){A(this,t),this.x=e,this.y=r}return C(t,[{key:"angleTo",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,r=this.y,n=e*t[0]+r*t[2]+t[4],i=e*t[1]+r*t[3]+t[5];this.x=n,this.y=i}}],[{key:"parse",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=M(Y(e),2),i=n[0],a=void 0===i?r:i,o=n[1];return new t(a,void 0===o?r:o)}},{key:"parseScale",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=M(Y(e),2),i=n[0],a=void 0===i?r:i,o=n[1];return new t(a,void 0===o?a:o)}},{key:"parsePath",value:function(e){for(var r=Y(e),n=r.length,i=[],a=0;a<n;a+=2)i.push(new t(r[a],r[a+1]));return i}}]),t}(),kt=exports.Mouse=function(){function t(e){A(this,t),this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}return C(t,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){if(!this.working){var t=this.screen,e=this.onClick,r=this.onMouseMove,n=t.ctx.canvas;n.onclick=e,n.onmousemove=r,this.working=!0}}},{key:"stop",value:function(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}},{key:"hasEvents",value:function(){return this.working&&this.events.length>0}},{key:"runEvents",value:function(){if(this.working){var t,e=this.screen,r=this.events,n=this.eventElements,i=e.ctx.canvas.style;i&&(i.cursor=""),r.forEach(function(e,r){var i=e.run;for(t=n[r];t;)i(t),t=t.parent}),this.events=[],this.eventElements=[]}}},{key:"checkPath",value:function(t,e){if(this.working&&e){var r=this.events,n=this.eventElements;r.forEach(function(r,i){var a=r.x,o=r.y;!n[i]&&e.isPointInPath&&e.isPointInPath(a,o)&&(n[i]=t)})}}},{key:"checkBoundingBox",value:function(t,e){if(this.working&&e){var r=this.events,n=this.eventElements;r.forEach(function(r,i){var a=r.x,o=r.y;!n[i]&&e.isPointInBox(a,o)&&(n[i]=t)})}}},{key:"mapXY",value:function(t,e){for(var r=this.screen,n=r.window,i=r.ctx,a=new bt(t,e),o=i.canvas;o;)a.x-=o.offsetLeft,a.y-=o.offsetTop,o=o.offsetParent;return(null==n?void 0:n.scrollX)&&(a.x+=n.scrollX),(null==n?void 0:n.scrollY)&&(a.y+=n.scrollY),a}},{key:"onClick",value:function(t){var e=this.mapXY(t.clientX,t.clientY),r=e.x,n=e.y;this.events.push({type:"onclick",x:r,y:n,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY(t.clientX,t.clientY),r=e.x,n=e.y;this.events.push({type:"onmousemove",x:r,y:n,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),t}(),wt="undefined"!=typeof window?window:null,St="undefined"!=typeof fetch?fetch.bind(void 0):void 0,Pt=exports.Screen=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.fetch,i=void 0===n?St:n,a=r.window,o=void 0===a?wt:a;if(A(this,t),this.ctx=e,this.viewPort=new mt,this.mouse=new kt(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=o,!i)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=i}return C(t,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every(function(t){return t()});return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,r=t.ctx,n=t.aspectRatio,i=t.width,a=t.desiredWidth,o=t.height,s=t.desiredHeight,u=t.minX,l=void 0===u?0:u,h=t.minY,c=void 0===h?0:h,f=t.refX,g=t.refY,p=t.clip,v=void 0!==p&&p,y=t.clipX,d=void 0===y?0:y,m=t.clipY,x=void 0===m?0:m,b=M(X(n).replace(/^defer\s/,"").split(" "),2),k=b[0]||"xMidYMid",w=b[1]||"meet",S=i/a,P=o/s,A=Math.min(S,P),E=Math.max(S,P),C=a,T=s;"meet"===w&&(C*=A,T*=A),"slice"===w&&(C*=E,T*=E);var V=new dt(e,"refX",f),O=new dt(e,"refY",g),N=V.hasValue()&&O.hasValue();if(N&&r.translate(-A*V.getPixels("x"),-A*O.getPixels("y")),v){var L=A*d,D=A*x;r.beginPath(),r.moveTo(L,D),r.lineTo(i,D),r.lineTo(i,o),r.lineTo(L,o),r.closePath(),r.clip()}if(!N){var R="meet"===w&&A===P,B="slice"===w&&E===P,I="meet"===w&&A===S,z="slice"===w&&E===S;k.startsWith("xMid")&&(R||B)&&r.translate(i/2-C/2,0),k.endsWith("YMid")&&(I||z)&&r.translate(0,o/2-T/2),k.startsWith("xMax")&&(R||B)&&r.translate(i-C,0),k.endsWith("YMax")&&(I||z)&&r.translate(0,o-T)}switch(!0){case"none"===k:r.scale(S,P);break;case"meet"===w:r.scale(A,A);break;case"slice"===w:r.scale(E,E)}r.translate(-l,-c)}},{key:"start",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.enableRedraw,o=void 0!==a&&a,s=i.ignoreMouse,u=void 0!==s&&s,l=i.ignoreAnimation,h=void 0!==l&&l,c=i.ignoreDimensions,f=void 0!==c&&c,g=i.ignoreClear,p=void 0!==g&&g,v=i.forceRedraw,y=i.scaleWidth,d=i.scaleHeight,m=i.offsetX,x=i.offsetY,b=this.mouse,k=1e3/t.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=k,this.readyPromise=new Promise(function(t){n.resolveReady=t}),this.isReady()&&this.render(e,f,p,y,d,m,x),o){var w=Date.now(),S=w,P=0;u||b.start(),this.intervalId=(0,r.default)(function t(){w=Date.now(),(P=w-S)>=k&&(S=w-P%k,n.shouldUpdate(h,v)&&(n.render(e,f,p,y,d,m,x),b.runEvents())),n.intervalId=(0,r.default)(t)})}}},{key:"stop",value:function(){this.intervalId&&(r.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var r=this.frameDuration;if(this.animations.reduce(function(t,e){return e.update(r)||t},!1))return!0}return!("function"!=typeof e||!e())||(!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents())}},{key:"render",value:function(t,e,r,n,i,a,o){var s=this.viewPort,u=this.ctx,l=this.isFirstRender,h=u.canvas;s.clear(),h.width&&h.height&&s.setCurrent(h.width,h.height);var c=t.getStyle("width"),f=t.getStyle("height");!e&&(l||"number"!=typeof n&&"number"!=typeof i)&&(c.hasValue()&&(h.width=c.getPixels("x"),h.style&&(h.style.width="".concat(h.width,"px"))),f.hasValue()&&(h.height=f.getPixels("y"),h.style&&(h.style.height="".concat(h.height,"px"))));var g=h.clientWidth||h.width,p=h.clientHeight||h.height;if(e&&c.hasValue()&&f.hasValue()&&(g=c.getPixels("x"),p=f.getPixels("y")),s.setCurrent(g,p),"number"==typeof a&&t.getAttribute("x",!0).setValue(a),"number"==typeof o&&t.getAttribute("y",!0).setValue(o),"number"==typeof n||"number"==typeof i){var v=Y(t.getAttribute("viewBox").getString()),y=0,d=0;if("number"==typeof n){var m=t.getStyle("width");m.hasValue()?y=m.getPixels("x")/n:v[2]&&!isNaN(v[2])&&(y=v[2]/n)}if("number"==typeof i){var x=t.getStyle("height");x.hasValue()?d=x.getPixels("y")/i:v[3]&&!isNaN(v[3])&&(d=v[3]/i)}y||(y=d),d||(d=y),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(i);var b=t.getStyle("transform",!0,!0);b.setValue("".concat(b.getString()," scale(").concat(1/y,", ").concat(1/d,")"))}r||u.clearRect(0,0,g,p),t.render(u),l&&(this.isFirstRender=!1)}}]),t}();Pt.defaultWindow=wt,Pt.defaultFetch=St,Pt.FRAMERATE=30,Pt.MAX_VIRTUAL_PIXELS=3e4;var At=Pt.defaultFetch,Et="undefined"!=typeof DOMParser?DOMParser:void 0,Ct=exports.Parser=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.fetch,n=void 0===r?At:r,i=e.DOMParser,a=void 0===i?Et:i;if(A(this,t),!n)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!a)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=n,this.DOMParser=a}return C(t,[{key:"parse",value:function(){var t=z(B().mark(function t(e){return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.startsWith("<")){t.next=2;break}return t.abrupt("return",this.parseFromString(e));case 2:return t.abrupt("return",this.load(e));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"parseFromString",value:function(t){var e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch(r){return this.checkDocument(e.parseFromString(t,"text/xml"))}}},{key:"checkDocument",value:function(t){var e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}},{key:"load",value:function(){var t=z(B().mark(function t(e){var r,n;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:return r=t.sent,t.next=5,r.text();case 5:return n=t.sent,t.abrupt("return",this.parseFromString(n));case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),Tt=exports.Translate=function(){function t(e,r){A(this,t),this.type="translate",this.point=bt.parse(r)}return C(t,[{key:"apply",value:function(t){var e=this.point,r=e.x,n=e.y;t.translate(r||0,n||0)}},{key:"unapply",value:function(t){var e=this.point,r=e.x,n=e.y;t.translate(-1*r||0,-1*n||0)}},{key:"applyToPoint",value:function(t){var e=this.point,r=e.x,n=e.y;t.applyTransform([1,0,0,1,r||0,n||0])}}]),t}(),Vt=exports.Rotate=function(){function t(e,r,n){A(this,t),this.type="rotate";var i=Y(r);this.angle=new dt(e,"angle",i[0]),this.originX=n[0],this.originY=n[1],this.cx=i[1]||0,this.cy=i[2]||0}return C(t,[{key:"apply",value:function(t){var e=this.cx,r=this.cy,n=this.originX,i=this.originY,a=this.angle,o=e+n.getPixels("x"),s=r+i.getPixels("y");t.translate(o,s),t.rotate(a.getRadians()),t.translate(-o,-s)}},{key:"unapply",value:function(t){var e=this.cx,r=this.cy,n=this.originX,i=this.originY,a=this.angle,o=e+n.getPixels("x"),s=r+i.getPixels("y");t.translate(o,s),t.rotate(-1*a.getRadians()),t.translate(-o,-s)}},{key:"applyToPoint",value:function(t){var e=this.cx,r=this.cy,n=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,r||0]),t.applyTransform([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]),t.applyTransform([1,0,0,1,-e||0,-r||0])}}]),t}(),Mt=exports.Scale=function(){function t(e,r,n){A(this,t),this.type="scale";var i=bt.parseScale(r);0!==i.x&&0!==i.y||(i.x=ot,i.y=ot),this.scale=i,this.originX=n[0],this.originY=n[1]}return C(t,[{key:"apply",value:function(t){var e=this.scale,r=e.x,n=e.y,i=this.originX,a=this.originY,o=i.getPixels("x"),s=a.getPixels("y");t.translate(o,s),t.scale(r,n||r),t.translate(-o,-s)}},{key:"unapply",value:function(t){var e=this.scale,r=e.x,n=e.y,i=this.originX,a=this.originY,o=i.getPixels("x"),s=a.getPixels("y");t.translate(o,s),t.scale(1/r,1/n||r),t.translate(-o,-s)}},{key:"applyToPoint",value:function(t){var e=this.scale,r=e.x,n=e.y;t.applyTransform([r||0,0,0,n||0,0,0])}}]),t}(),Ot=exports.Matrix=function(){function t(e,r,n){A(this,t),this.type="matrix",this.matrix=W(r),this.originX=n[0],this.originY=n[1]}return C(t,[{key:"apply",value:function(t){var e=this.originX,r=this.originY,n=this.matrix,i=e.getPixels("x"),a=r.getPixels("y");t.translate(i,a),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-i,-a)}},{key:"unapply",value:function(t){var e=this.originX,r=this.originY,n=this.matrix,i=n[0],a=n[2],o=n[4],s=n[1],u=n[3],l=n[5],h=1/(i*(1*u-0*l)-a*(1*s-0*l)+o*(0*s-0*u)),c=e.getPixels("x"),f=r.getPixels("y");t.translate(c,f),t.transform(h*(1*u-0*l),h*(0*l-1*s),h*(0*o-1*a),h*(1*i-0*o),h*(a*l-o*u),h*(o*s-i*l)),t.translate(-c,-f)}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),t}(),Nt=exports.Skew=function(t){m(r,Ot);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="skew",a.angle=new dt(t,"angle",n),a}return C(r)}(),Lt=exports.SkewX=function(t){m(r,Nt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="skewX",a.matrix=[1,0,Math.tan(a.angle.getRadians()),1,0,0],a}return C(r)}(),Dt=exports.SkewY=function(t){m(r,Nt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="skewY",a.matrix=[1,Math.tan(a.angle.getRadians()),0,1,0,0],a}return C(r)}();function Rt(t){return X(t).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Bt(t){var e=M(t.split("("),2),r=e[0],n=void 0===r?"":r,i=e[1],a=void 0===i?"":i;return[n.trim(),a.trim().replace(")","")]}var It=exports.Transform=function(){function t(e,r,n){var i=this;A(this,t),this.document=e,this.transforms=[],Rt(r).forEach(function(e){if("none"!==e){var r=M(Bt(e),2),a=r[0],o=r[1],s=t.transformTypes[a];s&&i.transforms.push(new s(i.document,o,n))}})}return C(t,[{key:"apply",value:function(t){this.transforms.forEach(function(e){return e.apply(t)})}},{key:"unapply",value:function(t){this.transforms.forEach(function(e){return e.unapply(t)})}},{key:"applyToPoint",value:function(t){this.transforms.forEach(function(e){return e.applyToPoint(t)})}}],[{key:"fromElement",value:function(e,r){var n=r.getStyle("transform",!1,!0);if(n.hasValue()){var i=M(r.getStyle("transform-origin",!1,!0).split(),2),a=i[0],o=i[1],s=void 0===o?a:o;if(a&&s){var u=[a,s];return new t(e,n.getString(),u)}}return null}}]),t}();It.transformTypes={translate:Tt,rotate:Vt,scale:Mt,matrix:Ot,skewX:Lt,skewY:Dt};var zt=exports.Element=function(){function t(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(A(this,t),this.document=e,this.node=r,this.captureTextNodes=i,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],r&&1===r.nodeType){if(Array.from(r.attributes).forEach(function(t){var r=q(t.nodeName);n.attributes[r]=new dt(e,r,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue())this.getAttribute("style").getString().split(";").map(function(t){return t.trim()}).forEach(function(t){if(t){var r=M(t.split(":").map(function(t){return t.trim()}),2),i=r[0],a=r[1];i&&(n.styles[i]=new dt(e,i,a))}});var a=e.definitions,o=this.getAttribute("id");o.hasValue()&&(a[o.getString()]||(a[o.getString()]=this)),Array.from(r.childNodes).forEach(function(t){if(1===t.nodeType)n.addChild(t);else if(i&&(3===t.nodeType||4===t.nodeType)){var r=e.createTextNode(t);r.getText().length>0&&n.addChild(r)}})}}return C(t,[{key:"getAttribute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.attributes[t];if(!r&&e){var n=new dt(this.document,t,"");return this.attributes[t]=n,n}return r||dt.empty(this.document)}},{key:"getHrefAttribute",value:function(){var t;for(var e in this.attributes)if("href"===e||e.endsWith(":href")){t=this.attributes[e];break}return t||dt.empty(this.document)}},{key:"getStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.styles[t];if(n)return n;var i=this.getAttribute(t);if(i.hasValue())return this.styles[t]=i,i;if(!r){var a=this.parent;if(a){var o=a.getStyle(t);if(o.hasValue())return o}}if(e){var s=new dt(this.document,t,"");return this.styles[t]=s,s}return dt.empty(this.document)}},{key:"render",value:function(t){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(t.save(),this.getStyle("mask").hasValue()){var e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if("none"!==this.getStyle("filter").getValue("none")){var r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(t),r.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}},{key:"setContext",value:function(t){}},{key:"applyEffects",value:function(t){var e=It.fromElement(this.document,this);e&&e.apply(t);var r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){var n=r.getDefinition();n&&n.apply(t)}}},{key:"clearContext",value:function(t){}},{key:"renderChildren",value:function(t){this.children.forEach(function(e){e.render(t)})}},{key:"addChild",value:function(e){var r=e instanceof t?e:this.document.createElement(e);r.parent=this,t.ignoreChildTypes.includes(r.type)||this.children.push(r)}},{key:"matchesSelector",value:function(t){var e,r=this.node;if("function"==typeof r.matches)return r.matches(t);var n=null===(e=r.getAttribute)||void 0===e?void 0:e.call(r,"class");return!(!n||""===n)&&n.split(" ").some(function(e){return".".concat(e)===t})}},{key:"addStylesFromStyleDefinition",value:function(){var t,e=this.document,r=e.styles,n=e.stylesSpecificity;for(var i in r)if(!i.startsWith("@")&&this.matchesSelector(i)){var a=r[i],o=n[i];if(a)for(var s in a){var u=this.stylesSpecificity[s];void 0===u&&(u="000"),o&&o>=u&&((t=a[s])&&(this.styles[s]=t),this.stylesSpecificity[s]=o)}}}},{key:"removeStyles",value:function(t,e){return e.reduce(function(e,r){var n=t.getStyle(r);if(!n.hasValue())return e;var i=n.getString();return n.setValue(""),[].concat(p(e),[[r,i]])},[])}},{key:"restoreStyles",value:function(t,e){e.forEach(function(e){var r=M(e,2),n=r[0],i=r[1];t.getStyle(n,!0).setValue(i)})}},{key:"isFirstChild",value:function(){var t;return 0===(null===(t=this.parent)||void 0===t?void 0:t.children.indexOf(this))}}]),t}();zt.ignoreChildTypes=["title"];var Ft=exports.UnknownElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){return A(this,r),e.call(this,t,n,i)}return C(r)}();function _t(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function jt(t){return void 0===e?t:t.trim().split(",").map(_t).join(",")}function Xt(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function Gt(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}var Ut=exports.Font=function(){function t(e,r,n,i,a,o){A(this,t);var s=o?"string"==typeof o?t.parse(o):o:{};this.fontFamily=a||s.fontFamily,this.fontSize=i||s.fontSize,this.fontStyle=e||s.fontStyle,this.fontWeight=n||s.fontWeight,this.fontVariant=r||s.fontVariant}return C(t,[{key:"toString",value:function(){return[Xt(this.fontStyle),this.fontVariant,Gt(this.fontWeight),this.fontSize,jt(this.fontFamily)].join(" ").trim()}}],[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n="",i="",a="",o="",s="",u=X(e).trim().split(" "),l={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return u.forEach(function(e){switch(!0){case!l.fontStyle&&t.styles.includes(e):"inherit"!==e&&(n=e),l.fontStyle=!0;break;case!l.fontVariant&&t.variants.includes(e):"inherit"!==e&&(i=e),l.fontStyle=!0,l.fontVariant=!0;break;case!l.fontWeight&&t.weights.includes(e):"inherit"!==e&&(a=e),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0;break;case!l.fontSize:"inherit"!==e&&(o=e.split("/")[0]||""),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0,l.fontSize=!0;break;default:"inherit"!==e&&(s+=e)}}),new t(n,i,a,o,s,r)}}]),t}();Ut.styles="normal|italic|oblique|inherit",Ut.variants="normal|small-caps|inherit",Ut.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var Yt=exports.BoundingBox=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;A(this,t),this.x1=e,this.y1=r,this.x2=n,this.y2=i,this.addPoint(e,r),this.addPoint(n,i)}return C(t,[{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}},{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,0)}},{key:"addY",value:function(t){this.addPoint(0,t)}},{key:"addBoundingBox",value:function(t){if(t){var e=t.x1,r=t.y1,n=t.x2,i=t.y2;this.addPoint(e,r),this.addPoint(n,i)}}},{key:"sumCubic",value:function(t,e,r,n,i){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*r+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,r,n,i){var a=6*e-12*r+6*n,o=-3*e+9*r-9*n+3*i,s=3*r-3*e;if(0!==o){var u=Math.pow(a,2)-4*s*o;if(!(u<0)){var l=(-a+Math.sqrt(u))/(2*o);0<l&&l<1&&(t?this.addX(this.sumCubic(l,e,r,n,i)):this.addY(this.sumCubic(l,e,r,n,i)));var h=(-a-Math.sqrt(u))/(2*o);0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,r,n,i)):this.addY(this.sumCubic(h,e,r,n,i)))}}else{if(0===a)return;var c=-s/a;0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,r,n,i)):this.addY(this.sumCubic(c,e,r,n,i)))}}},{key:"addBezierCurve",value:function(t,e,r,n,i,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,r,i,o),this.bezierCurveAdd(!1,e,n,a,s)}},{key:"addQuadraticCurve",value:function(t,e,r,n,i,a){var o=t+2/3*(r-t),s=e+2/3*(n-e),u=o+1/3*(i-t),l=s+1/3*(a-e);this.addBezierCurve(t,e,o,u,s,l,i,a)}},{key:"isPointInBox",value:function(t,e){var r=this.x1,n=this.y1,i=this.x2,a=this.y2;return r<=t&&t<=i&&n<=e&&e<=a}}]),t}(),Wt=exports.RenderedElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).modifiedEmSizeStack=!1,t}return C(r,[{key:"calculateOpacity",value:function(){for(var t=1,e=this;e;){var r=e.getStyle("opacity",!1,!0);r.hasValue(!0)&&(t*=r.getNumber()),e=e.parent}return t}},{key:"setContext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){var r=this.getStyle("fill"),n=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),a=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){var o=r.getFillStyleDefinition(this,n);o&&(t.fillStyle=o)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());var s=r.getColor();"inherit"!==s&&(t.fillStyle="none"===s?"rgba(0,0,0,0)":s)}if(n.hasValue()){var u=new dt(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=u}if(i.isUrlDefinition()){var l=i.getFillStyleDefinition(this,a);l&&(t.strokeStyle=l)}else if(i.hasValue()){"currentColor"===i.getString()&&i.setValue(this.getStyle("color").getColor());var h=i.getString();"inherit"!==h&&(t.strokeStyle="none"===h?"rgba(0,0,0,0)":h)}if(a.hasValue()){var c=new dt(this.document,"stroke",t.strokeStyle).addOpacity(a).getString();t.strokeStyle=c}var f=this.getStyle("stroke-width");if(f.hasValue()){var g=f.getPixels();t.lineWidth=g||ot}var p=this.getStyle("stroke-linecap"),v=this.getStyle("stroke-linejoin"),y=this.getStyle("stroke-miterlimit"),d=this.getStyle("stroke-dasharray"),m=this.getStyle("stroke-dashoffset");if(p.hasValue()&&(t.lineCap=p.getString()),v.hasValue()&&(t.lineJoin=v.getString()),y.hasValue()&&(t.miterLimit=y.getNumber()),d.hasValue()&&"none"!==d.getString()){var x=Y(d.getString());void 0!==t.setLineDash?t.setLineDash(x):void 0!==t.webkitLineDash?t.webkitLineDash=x:void 0===t.mozDash||1===x.length&&0===x[0]||(t.mozDash=x);var b=m.getPixels();void 0!==t.lineDashOffset?t.lineDashOffset=b:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=b:void 0!==t.mozDashOffset&&(t.mozDashOffset=b)}}if(this.modifiedEmSizeStack=!1,void 0!==t.font){var k=this.getStyle("font"),w=this.getStyle("font-style"),S=this.getStyle("font-variant"),P=this.getStyle("font-weight"),A=this.getStyle("font-size"),E=this.getStyle("font-family"),C=new Ut(w.getString(),S.getString(),P.getString(),A.hasValue()?"".concat(A.getPixels(!0),"px"):"",E.getString(),Ut.parse(k.getString(),t.font));w.setValue(C.fontStyle),S.setValue(C.fontVariant),P.setValue(C.fontWeight),A.setValue(C.fontSize),E.setValue(C.fontFamily),t.font=C.toString(),A.isPixels()&&(this.document.emSize=A.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}},{key:"clearContext",value:function(t){f(P(r.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),r}(),Ht=exports.TextElement=function(t){m(r,Wt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,(this instanceof r?this.constructor:void 0)===r||i)).type="text",a.x=0,a.y=0,a.leafTexts=[],a.textChunkStart=0,a.minX=Number.POSITIVE_INFINITY,a.maxX=Number.NEGATIVE_INFINITY,a.measureCache=-1,a}return C(r,[{key:"setContext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(P(r.prototype),"setContext",this).call(this,t,e);var n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}},{key:"initializeCoordinates",value:function(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}},{key:"getBoundingBox",value:function(t){var e=this;if("text"!==this.type)return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);var r=null;return this.children.forEach(function(n,i){var a=e.getChildBoundingBox(t,e,e,i);r?r.addBoundingBox(a):r=a}),r}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,r=Ut.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(r)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new Yt(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,r){var n,i=e[r];if(t.isArabic){var a,o=e.length,s=e[r-1],u=e[r+1],l="isolated";(0===r||" "===s)&&r<o-1&&" "!==u&&(l="terminal"),r>0&&" "!==s&&r<o-1&&" "!==u&&(l="medial"),r>0&&" "!==s&&(r===o-1||" "===u)&&(l="initial"),n=(null===(a=t.arabicGlyphs[i])||void 0===a?void 0:a[l])||t.glyphs[i]}else n=t.glyphs[i];return n||(n=t.missingGlyph),n}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,r=Array.from(e.parentNode.childNodes),n=r.indexOf(e),i=r.length-1,a=X(e.textContent||"");return 0===n&&(a=G(a)),n===i&&(a=U(a)),a}},{key:"renderChildren",value:function(t){var e=this;if("text"===this.type){this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach(function(r,n){e.renderChild(t,e,e,n)});var r=this.document.screen.mouse;r.isWorking()&&r.checkBoundingBox(this,this.getBoundingBox(t))}else this.renderTElementChildren(t)}},{key:"renderTElementChildren",value:function(t){var e=this.document,r=this.parent,n=this.getText(),i=r.getStyle("font-family").getDefinition();if(i)for(var a=i.fontFace.unitsPerEm,o=Ut.parse(e.ctx.font),s=r.getStyle("font-size").getNumber(o.fontSize),u=r.getStyle("font-style").getString(o.fontStyle),l=s/a,h=i.isRTL?n.split("").reverse().join(""):n,c=Y(r.getAttribute("dx").getString()),f=h.length,g=0;g<f;g++){var p=this.getGlyph(i,h,g);t.translate(this.x,this.y),t.scale(l,-l);var v=t.lineWidth;t.lineWidth=t.lineWidth*a/s,"italic"===u&&t.transform(1,0,.4,1,0,0),p.render(t),"italic"===u&&t.transform(1,0,-.4,1,0,0),t.lineWidth=v,t.scale(1/l,-1/l),t.translate(-this.x,-this.y),this.x+=s*(p.horizAdvX||i.horizAdvX)/a,void 0===c[g]||isNaN(c[g])||(this.x+=c[g])}else{var y=this.x,d=this.y;t.fillStyle&&t.fillText(n,y,d),t.strokeStyle&&t.strokeText(n,y,d)}}},{key:"applyAnchoring",value:function(){if(!(this.textChunkStart>=this.leafTexts.length)){var t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),r=0;r="start"===e?t.x-this.minX:"end"===e?t.x-this.maxX:t.x-(this.minX+this.maxX)/2;for(var n=this.textChunkStart;n<this.leafTexts.length;n++)this.leafTexts[n].x+=r;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}},{key:"adjustChildCoordinatesRecursive",value:function(t){var e=this;this.children.forEach(function(r,n){e.adjustChildCoordinatesRecursiveCore(t,e,e,n)}),this.applyAnchoring()}},{key:"adjustChildCoordinatesRecursiveCore",value:function(t,e,r,n){var i=r.children[n];i.children.length>0?i.children.forEach(function(r,n){e.adjustChildCoordinatesRecursiveCore(t,e,i,n)}):this.adjustChildCoordinates(t,e,r,n)}},{key:"adjustChildCoordinates",value:function(t,e,r,n){var i=r.children[n];if("function"!=typeof i.measureText)return i;t.save(),i.setContext(t,!0);var a=i.getAttribute("x"),o=i.getAttribute("y"),s=i.getAttribute("dx"),u=i.getAttribute("dy"),l=i.getStyle("font-family").getDefinition(),h=Boolean(null==l?void 0:l.isRTL);0===n&&(a.hasValue()||a.setValue(i.getInheritedAttribute("x")),o.hasValue()||o.setValue(i.getInheritedAttribute("y")),s.hasValue()||s.setValue(i.getInheritedAttribute("dx")),u.hasValue()||u.setValue(i.getInheritedAttribute("dy")));var c=i.measureText(t);return h&&(e.x-=c),a.hasValue()?(e.applyAnchoring(),i.x=a.getPixels("x"),s.hasValue()&&(i.x+=s.getPixels("x"))):(s.hasValue()&&(e.x+=s.getPixels("x")),i.x=e.x),e.x=i.x,h||(e.x+=c),o.hasValue()?(i.y=o.getPixels("y"),u.hasValue()&&(i.y+=u.getPixels("y"))):(u.hasValue()&&(e.y+=u.getPixels("y")),i.y=e.y),e.y=i.y,e.leafTexts.push(i),e.minX=Math.min(e.minX,i.x,i.x+c),e.maxX=Math.max(e.maxX,i.x,i.x+c),i.clearContext(t),t.restore(),i}},{key:"getChildBoundingBox",value:function(t,e,r,n){var i=r.children[n];if("function"!=typeof i.getBoundingBox)return null;var a=i.getBoundingBox(t);return a&&i.children.forEach(function(r,n){var o=e.getChildBoundingBox(t,e,i,n);a.addBoundingBox(o)}),a}},{key:"renderChild",value:function(t,e,r,n){var i=r.children[n];i.render(t),i.children.forEach(function(r,n){e.renderChild(t,e,i,n)})}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;var r=this.getText(),n=this.measureTargetText(t,r);return this.measureCache=n,n}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var r=this.parent,n=r.getStyle("font-family").getDefinition();if(n){for(var i=this.getFontSize(),a=n.isRTL?e.split("").reverse().join(""):e,o=Y(r.getAttribute("dx").getString()),s=a.length,u=0,l=0;l<s;l++){u+=(this.getGlyph(n,a,l).horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,void 0===o[l]||isNaN(o[l])||(u+=o[l])}return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var h=t.measureText(e).width;return this.clearContext(t),t.restore(),h}},{key:"getInheritedAttribute",value:function(t){for(var e=this;e instanceof r&&e.isFirstChild()&&e.parent;){var n=e.parent.getAttribute(t);if(n.hasValue(!0))return n.getString("0");e=e.parent}return null}}]),r}(),qt=exports.TSpanElement=function(t){m(r,Ht);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,(this instanceof r?this.constructor:void 0)===r||i)).type="tspan",a.text=a.children.length>0?"":a.getTextFromNode(),a}return C(r,[{key:"getText",value:function(){return this.text}}]),r}(),$t=function(t){m(r,qt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="textNode",t}return C(r)}(),Qt=exports.PathParser=function(t){m(r,i.SVGPathData);var e=b(r);function r(t){var n;return A(this,r),(n=e.call(this,t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,""))).control=new bt(0,0),n.start=new bt(0,0),n.current=new bt(0,0),n.command=null,n.commands=n.commands,n.i=-1,n.previousCommand=null,n.points=[],n.angles=[],n}return C(r,[{key:"reset",value:function(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new bt(0,0),this.control=new bt(0,0),this.current=new bt(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.commands.length-1}},{key:"next",value:function(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}},{key:"getPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",r=new bt(this.command[t],this.command[e]);return this.makeAbsolute(r)}},{key:"getAsControlPoint",value:function(t,e){var r=this.getPoint(t,e);return this.control=r,r}},{key:"getAsCurrentPoint",value:function(t,e){var r=this.getPoint(t,e);return this.current=r,r}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.type;if(t!==i.SVGPathData.CURVE_TO&&t!==i.SVGPathData.SMOOTH_CURVE_TO&&t!==i.SVGPathData.QUAD_TO&&t!==i.SVGPathData.SMOOTH_QUAD_TO)return this.current;var e=this.current,r=e.x,n=e.y,a=this.control,o=a.x,s=a.y;return new bt(2*r-o,2*n-s)}},{key:"makeAbsolute",value:function(t){if(this.command.relative){var e=this.current,r=e.x,n=e.y;t.x+=r,t.y+=n}return t}},{key:"addMarker",value:function(t,e,r){var n=this.points,i=this.angles;r&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=n[n.length-1].angleTo(r)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,r=0;r<e;r++)if(!t[r])for(var n=r+1;n<e;n++)if(t[n]){t[r]=t[n];break}return t}}]),r}(),Zt=exports.PathElement=function(t){m(r,Wt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="path",a.pathParser=new Qt(a.getAttribute("d").getString()),a}return C(r,[{key:"path",value:function(t){var e=this.pathParser,r=new Yt;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case Qt.MOVE_TO:this.pathM(t,r);break;case Qt.LINE_TO:this.pathL(t,r);break;case Qt.HORIZ_LINE_TO:this.pathH(t,r);break;case Qt.VERT_LINE_TO:this.pathV(t,r);break;case Qt.CURVE_TO:this.pathC(t,r);break;case Qt.SMOOTH_CURVE_TO:this.pathS(t,r);break;case Qt.QUAD_TO:this.pathQ(t,r);break;case Qt.SMOOTH_QUAD_TO:this.pathT(t,r);break;case Qt.ARC:this.pathA(t,r);break;case Qt.CLOSE_PATH:this.pathZ(t,r)}return r}},{key:"getBoundingBox",value:function(t){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),r=t.getMarkerAngles();return e.map(function(t,e){return[t,r[e]]})}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());var r=this.getMarkers();if(r){var n=r.length-1,i=this.getStyle("marker-start"),a=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(i.isUrlDefinition()){var s=i.getDefinition(),u=M(r[0],2),l=u[0],h=u[1];s.render(t,l,h)}if(a.isUrlDefinition())for(var c=a.getDefinition(),f=1;f<n;f++){var g=M(r[f],2),p=g[0],v=g[1];c.render(t,p,v)}if(o.isUrlDefinition()){var y=o.getDefinition(),d=M(r[n],2),m=d[0],x=d[1];y.render(t,m,x)}}}},{key:"pathM",value:function(t,e){var n=this.pathParser,i=r.pathM(n).point,a=i.x,o=i.y;n.addMarker(i),e.addPoint(a,o),t&&t.moveTo(a,o)}},{key:"pathL",value:function(t,e){var n=this.pathParser,i=r.pathL(n),a=i.current,o=i.point,s=o.x,u=o.y;n.addMarker(o,a),e.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathH",value:function(t,e){var n=this.pathParser,i=r.pathH(n),a=i.current,o=i.point,s=o.x,u=o.y;n.addMarker(o,a),e.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathV",value:function(t,e){var n=this.pathParser,i=r.pathV(n),a=i.current,o=i.point,s=o.x,u=o.y;n.addMarker(o,a),e.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathC",value:function(t,e){var n=this.pathParser,i=r.pathC(n),a=i.current,o=i.point,s=i.controlPoint,u=i.currentPoint;n.addMarker(u,s,o),e.addBezierCurve(a.x,a.y,o.x,o.y,s.x,s.y,u.x,u.y),t&&t.bezierCurveTo(o.x,o.y,s.x,s.y,u.x,u.y)}},{key:"pathS",value:function(t,e){var n=this.pathParser,i=r.pathS(n),a=i.current,o=i.point,s=i.controlPoint,u=i.currentPoint;n.addMarker(u,s,o),e.addBezierCurve(a.x,a.y,o.x,o.y,s.x,s.y,u.x,u.y),t&&t.bezierCurveTo(o.x,o.y,s.x,s.y,u.x,u.y)}},{key:"pathQ",value:function(t,e){var n=this.pathParser,i=r.pathQ(n),a=i.current,o=i.controlPoint,s=i.currentPoint;n.addMarker(s,o,o),e.addQuadraticCurve(a.x,a.y,o.x,o.y,s.x,s.y),t&&t.quadraticCurveTo(o.x,o.y,s.x,s.y)}},{key:"pathT",value:function(t,e){var n=this.pathParser,i=r.pathT(n),a=i.current,o=i.controlPoint,s=i.currentPoint;n.addMarker(s,o,o),e.addQuadraticCurve(a.x,a.y,o.x,o.y,s.x,s.y),t&&t.quadraticCurveTo(o.x,o.y,s.x,s.y)}},{key:"pathA",value:function(t,e){var n=this.pathParser,i=r.pathA(n),a=i.currentPoint,o=i.rX,s=i.rY,u=i.sweepFlag,l=i.xAxisRotation,h=i.centp,c=i.a1,f=i.ad,g=1-u?1:-1,p=c+g*(f/2),v=new bt(h.x+o*Math.cos(p),h.y+s*Math.sin(p));if(n.addMarkerAngle(v,p-g*Math.PI/2),n.addMarkerAngle(a,p-g*Math.PI),e.addPoint(a.x,a.y),t&&!isNaN(c)&&!isNaN(f)){var y=o>s?o:s,d=o>s?1:o/s,m=o>s?s/o:1;t.translate(h.x,h.y),t.rotate(l),t.scale(d,m),t.arc(0,0,y,c,c+f,Boolean(1-u)),t.scale(1/d,1/m),t.rotate(-l),t.translate(-h.x,-h.y)}}},{key:"pathZ",value:function(t,e){r.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}}],[{key:"pathM",value:function(t){var e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}},{key:"pathL",value:function(t){return{current:t.current,point:t.getAsCurrentPoint()}}},{key:"pathH",value:function(t){var e=t.current,r=t.command,n=new bt((r.relative?e.x:0)+r.x,e.y);return t.current=n,{current:e,point:n}}},{key:"pathV",value:function(t){var e=t.current,r=t.command,n=new bt(e.x,(r.relative?e.y:0)+r.y);return t.current=n,{current:e,point:n}}},{key:"pathC",value:function(t){return{current:t.current,point:t.getPoint("x1","y1"),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathS",value:function(t){return{current:t.current,point:t.getReflectedControlPoint(),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathQ",value:function(t){return{current:t.current,controlPoint:t.getAsControlPoint("x1","y1"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathT",value:function(t){var e=t.current,r=t.getReflectedControlPoint();return t.control=r,{current:e,controlPoint:r,currentPoint:t.getAsCurrentPoint()}}},{key:"pathA",value:function(t){var e=t.current,r=t.command,n=r.rX,i=r.rY,a=r.xRot,o=r.lArcFlag,s=r.sweepFlag,u=a*(Math.PI/180),l=t.getAsCurrentPoint(),h=new bt(Math.cos(u)*(e.x-l.x)/2+Math.sin(u)*(e.y-l.y)/2,-Math.sin(u)*(e.x-l.x)/2+Math.cos(u)*(e.y-l.y)/2),c=Math.pow(h.x,2)/Math.pow(n,2)+Math.pow(h.y,2)/Math.pow(i,2);c>1&&(n*=Math.sqrt(c),i*=Math.sqrt(c));var f=(o===s?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(i,2)-Math.pow(n,2)*Math.pow(h.y,2)-Math.pow(i,2)*Math.pow(h.x,2))/(Math.pow(n,2)*Math.pow(h.y,2)+Math.pow(i,2)*Math.pow(h.x,2)));isNaN(f)&&(f=0);var g=new bt(f*n*h.y/i,f*-i*h.x/n),p=new bt((e.x+l.x)/2+Math.cos(u)*g.x-Math.sin(u)*g.y,(e.y+l.y)/2+Math.sin(u)*g.x+Math.cos(u)*g.y),v=lt([1,0],[(h.x-g.x)/n,(h.y-g.y)/i]),y=[(h.x-g.x)/n,(h.y-g.y)/i],d=[(-h.x-g.x)/n,(-h.y-g.y)/i],m=lt(y,d);return ut(y,d)<=-1&&(m=Math.PI),ut(y,d)>=1&&(m=0),{currentPoint:l,rX:n,rY:i,sweepFlag:s,xAxisRotation:u,centp:p,a1:v,ad:m}}},{key:"pathZ",value:function(t){t.current=t.start}}]),r}(),Jt=exports.SVGElement=function(t){m(r,Wt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="svg",t.root=!1,t}return C(r,[{key:"setContext",value:function(t){var e,n=this.document,i=n.screen,a=n.window,o=t.canvas;if(i.setDefaults(t),"style"in o&&void 0!==t.font&&a&&void 0!==a.getComputedStyle){t.font=a.getComputedStyle(o).getPropertyValue("font");var s=new dt(n,"fontSize",Ut.parse(t.font).fontSize);s.hasValue()&&(n.rootEmSize=s.getPixels("y"),n.emSize=n.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var u=i.viewPort,l=u.width,h=u.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var c=this.getAttribute("refX"),g=this.getAttribute("refY"),p=this.getAttribute("viewBox"),v=p.hasValue()?Y(p.getString()):null,y=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),d=0,m=0,x=0,b=0;v&&(d=v[0],m=v[1]),this.root||(l=this.getStyle("width").getPixels("x"),h=this.getStyle("height").getPixels("y"),"marker"===this.type&&(x=d,b=m,d=0,m=0)),i.viewPort.setCurrent(l,h),!this.node||this.parent&&"foreignObject"!==(null===(e=this.node.parentNode)||void 0===e?void 0:e.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),f(P(r.prototype),"setContext",this).call(this,t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),v&&(l=v[2],h=v[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i.viewPort.width,desiredWidth:l,height:i.viewPort.height,desiredHeight:h,minX:d,minY:m,refX:c.getValue(),refY:g.getValue(),clip:y,clipX:x,clipY:b}),v&&(i.viewPort.removeCurrent(),i.viewPort.setCurrent(l,h))}},{key:"clearContext",value:function(t){f(P(r.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getAttribute("width",!0),i=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),s=n.getNumber(0),u=i.getNumber(0);if(r)if("string"==typeof r)this.getAttribute("preserveAspectRatio",!0).setValue(r);else{var l=this.getAttribute("preserveAspectRatio");l.hasValue()&&l.setValue(l.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),i.setValue(e),a.hasValue()||a.setValue("0 0 ".concat(s||t," ").concat(u||e)),o.hasValue()){var h=this.getStyle("width"),c=this.getStyle("height");h.hasValue()&&h.setValue("".concat(t,"px")),c.hasValue()&&c.setValue("".concat(e,"px"))}}}]),r}(),Kt=exports.RectElement=function(t){m(r,Zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="rect",t}return C(r,[{key:"path",value:function(t){var e=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),i=this.getStyle("height",!1,!0).getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),s=a.getPixels("x"),u=o.getPixels("y");if(a.hasValue()&&!o.hasValue()&&(u=s),o.hasValue()&&!a.hasValue()&&(s=u),s=Math.min(s,n/2),u=Math.min(u,i/2),t){var l=(Math.sqrt(2)-1)/3*4;t.beginPath(),i>0&&n>0&&(t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.bezierCurveTo(e+n-s+l*s,r,e+n,r+u-l*u,e+n,r+u),t.lineTo(e+n,r+i-u),t.bezierCurveTo(e+n,r+i-u+l*u,e+n-s+l*s,r+i,e+n-s,r+i),t.lineTo(e+s,r+i),t.bezierCurveTo(e+s-l*s,r+i,e,r+i-u+l*u,e,r+i-u),t.lineTo(e,r+u),t.bezierCurveTo(e,r+u-l*u,e+s-l*s,r,e+s,r),t.closePath())}return new Yt(e,r,e+n,r+i)}},{key:"getMarkers",value:function(){return null}}]),r}(),te=exports.CircleElement=function(t){m(r,Zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="circle",t}return C(r,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()),new Yt(e-n,r-n,e+n,r+n)}},{key:"getMarkers",value:function(){return null}}]),r}(),ee=exports.EllipseElement=function(t){m(r,Zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="ellipse",t}return C(r,[{key:"path",value:function(t){var e=(Math.sqrt(2)-1)/3*4,r=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&r>0&&n>0&&(t.beginPath(),t.moveTo(i+r,a),t.bezierCurveTo(i+r,a+e*n,i+e*r,a+n,i,a+n),t.bezierCurveTo(i-e*r,a+n,i-r,a+e*n,i-r,a),t.bezierCurveTo(i-r,a-e*n,i-e*r,a-n,i,a-n),t.bezierCurveTo(i+e*r,a-n,i+r,a-e*n,i+r,a),t.closePath()),new Yt(i-r,a-n,i+r,a+n)}},{key:"getMarkers",value:function(){return null}}]),r}(),re=exports.LineElement=function(t){m(r,Zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="line",t}return C(r,[{key:"getPoints",value:function(){return[new bt(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new bt(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=M(this.getPoints(),2),r=e[0],n=r.x,i=r.y,a=e[1],o=a.x,s=a.y;return t&&(t.beginPath(),t.moveTo(n,i),t.lineTo(o,s)),new Yt(n,i,o,s)}},{key:"getMarkers",value:function(){var t=M(this.getPoints(),2),e=t[0],r=t[1],n=e.angleTo(r);return[[e,n],[r,n]]}}]),r}(),ne=exports.PolylineElement=function(t){m(r,Zt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="polyline",a.points=[],a.points=bt.parsePath(a.getAttribute("points").getString()),a}return C(r,[{key:"path",value:function(t){var e=this.points,r=M(e,1)[0],n=r.x,i=r.y,a=new Yt(n,i);return t&&(t.beginPath(),t.moveTo(n,i)),e.forEach(function(e){var r=e.x,n=e.y;a.addPoint(r,n),t&&t.lineTo(r,n)}),a}},{key:"getMarkers",value:function(){var t=this.points,e=t.length-1,r=[];return t.forEach(function(n,i){i!==e&&r.push([n,n.angleTo(t[i+1])])}),r.length>0&&r.push([t[t.length-1],r[r.length-1][1]]),r}}]),r}(),ie=exports.PolygonElement=function(t){m(r,ne);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="polygon",t}return C(r,[{key:"path",value:function(t){var e=f(P(r.prototype),"path",this).call(this,t),n=M(this.points,1)[0],i=n.x,a=n.y;return t&&(t.lineTo(i,a),t.closePath()),e}}]),r}(),ae=exports.PatternElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="pattern",t}return C(r,[{key:"createPattern",value:function(t,e,r){var n=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),a=new Jt(this.document,null);a.attributes.viewBox=new dt(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new dt(this.document,"width","".concat(n,"px")),a.attributes.height=new dt(this.document,"height","".concat(i,"px")),a.attributes.transform=new dt(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(n,i),s=o.getContext("2d"),u=this.getAttribute("x"),l=this.getAttribute("y");u.hasValue()&&l.hasValue()&&s.translate(u.getPixels("x",!0),l.getPixels("y",!0)),r.hasValue()?this.styles["fill-opacity"]=r:Reflect.deleteProperty(this.styles,"fill-opacity");for(var h=-1;h<=1;h++)for(var c=-1;c<=1;c++)s.save(),a.attributes.x=new dt(this.document,"x",h*o.width),a.attributes.y=new dt(this.document,"y",c*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}}]),r}(),oe=exports.MarkerElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="marker",t}return C(r,[{key:"render",value:function(t,e,r){if(e){var n=e.x,i=e.y,a=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,i),"auto"===a&&t.rotate(r),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save();var s=new Jt(this.document);s.type=this.type,s.attributes.viewBox=new dt(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new dt(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new dt(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new dt(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new dt(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new dt(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new dt(this.document,"fill",this.getAttribute("fill").getColor("black")),s.attributes.stroke=new dt(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===a&&t.rotate(-r),t.translate(-n,-i)}}}]),r}(),se=exports.DefsElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="defs",t}return C(r,[{key:"render",value:function(){}}]),r}(),ue=exports.GElement=function(t){m(r,Wt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="g",t}return C(r,[{key:"getBoundingBox",value:function(t){var e=new Yt;return this.children.forEach(function(r){e.addBoundingBox(r.getBoundingBox(t))}),e}}]),r}(),le=exports.GradientElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).attributesToInherit=["gradientUnits"],a.stops=[];var o=w(a),s=o.stops;return o.children.forEach(function(t){"stop"===t.type&&s.push(t)}),a}return C(r,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,r){var n=this,i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=i.stops,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(r,a[a.length-1].color);if(a.forEach(function(t){o.addColorStop(t.offset,n.addParentOpacity(r,t.color))}),this.getAttribute("gradientTransform").hasValue()){var s=this.document,u=Pt.MAX_VIRTUAL_PIXELS,l=s.screen.viewPort.getRoot(),h=new Kt(s);h.attributes.x=new dt(s,"x",-u/3),h.attributes.y=new dt(s,"y",-u/3),h.attributes.width=new dt(s,"width",u),h.attributes.height=new dt(s,"height",u);var c=new ue(s);c.attributes.transform=new dt(s,"transform",this.getAttribute("gradientTransform").getValue()),c.children=[h];var f=new Jt(s);f.attributes.x=new dt(s,"x",0),f.attributes.y=new dt(s,"y",0),f.attributes.width=new dt(s,"width",l.width),f.attributes.height=new dt(s,"height",l.height),f.children=[c];var g=s.createCanvas(l.width,l.height),p=g.getContext("2d");return p.fillStyle=o,f.render(p),p.createPattern(g,"no-repeat")}return o}},{key:"inheritStopContainer",value:function(t){var e=this;this.attributesToInherit.forEach(function(r){!e.getAttribute(r).hasValue()&&t.getAttribute(r).hasValue()&&e.getAttribute(r,!0).setValue(t.getAttribute(r).getValue())})}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new dt(this.document,"color",e).addOpacity(t).getColor():e}}]),r}(),he=exports.LinearGradientElement=function(t){m(r,le);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="linearGradient",a.attributesToInherit.push("x1","y1","x2","y2"),a}return C(r,[{key:"getGradient",value:function(t,e){var r="objectBoundingBox"===this.getGradientUnits(),n=r?e.getBoundingBox(t):null;if(r&&!n)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=r?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=r?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=r?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=r?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===o&&a===s?null:t.createLinearGradient(i,a,o,s)}}]),r}(),ce=exports.RadialGradientElement=function(t){m(r,le);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="radialGradient",a.attributesToInherit.push("cx","cy","r","fx","fy","fr"),a}return C(r,[{key:"getGradient",value:function(t,e){var r="objectBoundingBox"===this.getGradientUnits(),n=e.getBoundingBox(t);if(r&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=r?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=r?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=i,s=a;this.getAttribute("fx").hasValue()&&(o=r?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=r?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var u=r?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),l=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,s,l,i,a,u)}}]),r}(),fe=exports.StopElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).type="stop";var o=Math.max(0,Math.min(1,a.getAttribute("offset").getNumber())),s=a.getStyle("stop-opacity"),u=a.getStyle("stop-color",!0);return""===u.getString()&&u.setValue("#000"),s.hasValue()&&(u=u.addOpacity(s)),a.offset=o,a.color=u.getColor(),a}return C(r)}(),ge=exports.AnimateElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).type="animate",a.duration=0,a.initialUnits="",a.removed=!1,a.frozen=!1,t.screen.animations.push(w(a)),a.begin=a.getAttribute("begin").getMilliseconds(),a.maxDuration=a.begin+a.getAttribute("dur").getMilliseconds(),a.from=a.getAttribute("from"),a.to=a.getAttribute("to"),a.values=new dt(t,"values",null);var o=a.getAttribute("values");return o.hasValue()&&a.values.setValue(o.getString().split(";")),a}return C(r,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),r=e.progress,n=e.from,i=e.to,a=n.getNumber()+(i.getNumber()-n.getNumber())*r;return"%"===t&&(a*=100),"".concat(a).concat(t)}},{key:"update",value:function(t){var e=this.parent,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var n=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==n||this.frozen){if("remove"===n&&!this.removed)return this.removed=!0,e&&r&&r.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e&&r&&(e.animationFrozen=!0,e.animationFrozenValue=r.getString());return!1}this.duration+=t;var i=!1;if(this.begin<this.duration){var a=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){var s=o.getString();a="".concat(s,"(").concat(a,")")}r.setValue(a),i=!0}return i}},{key:"getProgress",value:function(){var t,e,r=this.document,n=this.values,i=(this.duration-this.begin)/(this.maxDuration-this.begin);if(n.hasValue()){var a,o=i*(n.getValue().length-1),s=Math.floor(o),u=Math.ceil(o);a=n.getValue()[s],t=new dt(r,"from",a?parseFloat(a):0),a=n.getValue()[u],e=new dt(r,"to",a?parseFloat(a):0),i=(o-s)/(u-s)}else t=this.from,e=this.to;return{progress:i,from:t,to:e}}}]),r}(),pe=exports.AnimateColorElement=function(t){m(r,ge);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="animateColor",t}return C(r,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,r=t.from,i=t.to,a=new n.default(r.getColor()),o=new n.default(i.getColor());if(a.ok&&o.ok){var s=a.r+(o.r-a.r)*e,u=a.g+(o.g-a.g)*e,l=a.b+(o.b-a.b)*e;return"rgb(".concat(Math.floor(s),", ").concat(Math.floor(u),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}}]),r}(),ve=exports.AnimateTransformElement=function(t){m(r,ge);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="animateTransform",t}return C(r,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,r=t.from,n=t.to,i=Y(r.getString()),a=Y(n.getString());return i.map(function(t,r){return t+(a[r]-t)*e}).join(" ")}}]),r}(),ye=exports.FontFaceElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="font-face",a.ascent=a.getAttribute("ascent").getNumber(),a.descent=a.getAttribute("descent").getNumber(),a.unitsPerEm=a.getAttribute("units-per-em").getNumber(),a}return C(r)}(),de=exports.GlyphElement=function(t){m(r,Zt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="glyph",a.horizAdvX=a.getAttribute("horiz-adv-x").getNumber(),a.unicode=a.getAttribute("unicode").getString(),a.arabicForm=a.getAttribute("arabic-form").getString(),a}return C(r)}(),me=exports.MissingGlyphElement=function(t){m(r,de);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="missing-glyph",t.horizAdvX=0,t}return C(r)}(),xe=exports.FontElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).type="font",a.isArabic=!1,a.glyphs={},a.arabicGlyphs={},a.isRTL=!1,a.horizAdvX=a.getAttribute("horiz-adv-x").getNumber();var o,s=t.definitions,u=c(w(a).children);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(l instanceof ye){a.fontFace=l;var f=l.getStyle("font-family");f.hasValue()&&(s[f.getString()]=w(a))}else if(l instanceof me)a.missingGlyph=l;else if(l instanceof de)if(l.arabicForm){a.isRTL=!0,a.isArabic=!0;var g=a.arabicGlyphs[l.unicode];void 0===g?a.arabicGlyphs[l.unicode]=h({},l.arabicForm,l):g[l.arabicForm]=l}else a.glyphs[l.unicode]=l}}catch(p){u.e(p)}finally{u.f()}return a}return C(r,[{key:"render",value:function(){}}]),r}(),be=exports.TRefElement=function(t){m(r,Ht);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="tref",t}return C(r,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}]),r}(),ke=exports.AElement=function(t){m(r,Ht);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).type="a";var o=n.childNodes,s=o[0],u=o.length>0&&Array.from(o).every(function(t){return 3===t.nodeType});return a.hasText=u,a.text=u?a.getTextFromNode(s):"",a}return C(r,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){if(this.hasText){f(P(r.prototype),"renderChildren",this).call(this,t);var e=this.document,n=this.x,i=this.y,a=e.screen.mouse,o=new dt(e,"fontSize",Ut.parse(e.ctx.font).fontSize);a.isWorking()&&a.checkBoundingBox(this,new Yt(n,i-o.getPixels("y"),n+this.measureText(t),i))}else if(this.children.length>0){var s=new ue(this.document);s.children=this.children,s.parent=this,s.render(t)}}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),r}(),we=exports.TextPathElement=function(t){m(r,Ht);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).type="textPath",a.textWidth=0,a.textHeight=0,a.pathLength=-1,a.glyphInfo=null,a.letterSpacingCache=[],a.measuresCache=new Map([["",0]]);var o=a.getHrefAttribute().getDefinition();return a.text=a.getTextFromNode(),a.dataArray=a.parsePathData(o),a}return C(r,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(t){var e=this.dataArray;t&&t.beginPath(),e.forEach(function(e){var r=e.type,n=e.points;switch(r){case Qt.LINE_TO:t&&t.lineTo(n[0],n[1]);break;case Qt.MOVE_TO:t&&t.moveTo(n[0],n[1]);break;case Qt.CURVE_TO:t&&t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case Qt.QUAD_TO:t&&t.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case Qt.ARC:var i=M(n,8),a=i[0],o=i[1],s=i[2],u=i[3],l=i[4],h=i[5],c=i[6],f=i[7],g=s>u?s:u,p=s>u?1:s/u,v=s>u?u/s:1;t&&(t.translate(a,o),t.rotate(c),t.scale(p,v),t.arc(0,0,g,l,l+h,Boolean(1-f)),t.scale(1/p,1/v),t.rotate(-c),t.translate(-a,-o));break;case Qt.CLOSE_PATH:t&&t.closePath()}})}},{key:"renderChildren",value:function(t){this.setTextData(t),t.save();var e=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),n=this.glyphInfo,i=t.fillStyle;"underline"===e&&t.beginPath(),n.forEach(function(n,i){var a=n.p0,o=n.p1,s=n.rotation,u=n.text;t.save(),t.translate(a.x,a.y),t.rotate(s),t.fillStyle&&t.fillText(u,0,0),t.strokeStyle&&t.strokeText(u,0,0),t.restore(),"underline"===e&&(0===i&&t.moveTo(a.x,a.y+r/8),t.lineTo(o.x,o.y+r/5))}),"underline"===e&&(t.lineWidth=r/20,t.strokeStyle=i,t.stroke(),t.closePath()),t.restore()}},{key:"getLetterSpacingAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}},{key:"findSegmentToFitChar",value:function(t,e,r,n,i,a,o,s,u){var h=a,c=this.measureText(t,s);" "===s&&"justify"===e&&r<n&&(c+=(n-r)/i),u>-1&&(h+=this.getLetterSpacingAt(u));var f=this.textHeight/20,g=this.getEquidistantPointOnPath(h,f,0),p=this.getEquidistantPointOnPath(h+c,f,0),v={p0:g,p1:p},y=g&&p?Math.atan2(p.y-g.y,p.x-g.x):0;if(o){var d=Math.cos(Math.PI/2+y)*o,m=Math.cos(-y)*o;v.p0=l(l({},g),{},{x:g.x+d,y:g.y+m}),v.p1=l(l({},p),{},{x:p.x+d,y:p.y+m})}return{offset:h+=c,segment:v,rotation:y}}},{key:"measureText",value:function(t,e){var r=this.measuresCache,n=e||this.getText();if(r.has(n))return r.get(n);var i=this.measureTargetText(t,n);return r.set(n,i),i}},{key:"setTextData",value:function(t){var e=this;if(!this.glyphInfo){var r=this.getText(),n=r.split(""),i=r.split(" ").length-1,a=this.parent.getAttribute("dx").split().map(function(t){return t.getPixels("x")}),o=this.parent.getAttribute("dy").getPixels("y"),s=this.parent.getStyle("text-anchor").getString("start"),u=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),h=0;u.hasValue()&&"inherit"!==u.getValue()?u.hasValue()&&"initial"!==u.getValue()&&"unset"!==u.getValue()&&(h=u.getPixels()):h=l.getPixels();var c=[],f=r.length;this.letterSpacingCache=c;for(var g=0;g<f;g++)c.push(void 0!==a[g]?a[g]:h);var p=c.reduce(function(t,e,r){return 0===r?0:t+e||0},0),v=this.measureText(t),y=Math.max(v+p,0);this.textWidth=v,this.textHeight=this.getFontSize(),this.glyphInfo=[];var d=this.getPathLength(),m=this.getStyle("startOffset").getNumber(0)*d,x=0;"middle"!==s&&"center"!==s||(x=-y/2),"end"!==s&&"right"!==s||(x=-y),x+=m,n.forEach(function(r,a){var u=e.findSegmentToFitChar(t,s,y,d,i,x,o,r,a),l=u.offset,h=u.segment,c=u.rotation;x=l,h.p0&&h.p1&&e.glyphInfo.push({text:n[a],p0:h.p0,p1:h.p1,rotation:c})})}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],r=t.pathParser;for(r.reset();!r.isEnd();){var n=r.current,i=n?n.x:0,a=n?n.y:0,o=r.next(),s=o.type,u=[];switch(o.type){case Qt.MOVE_TO:this.pathM(r,u);break;case Qt.LINE_TO:s=this.pathL(r,u);break;case Qt.HORIZ_LINE_TO:s=this.pathH(r,u);break;case Qt.VERT_LINE_TO:s=this.pathV(r,u);break;case Qt.CURVE_TO:this.pathC(r,u);break;case Qt.SMOOTH_CURVE_TO:s=this.pathS(r,u);break;case Qt.QUAD_TO:this.pathQ(r,u);break;case Qt.SMOOTH_QUAD_TO:s=this.pathT(r,u);break;case Qt.ARC:u=this.pathA(r);break;case Qt.CLOSE_PATH:Zt.pathZ(r)}o.type!==Qt.CLOSE_PATH?e.push({type:s,points:u,start:{x:i,y:a},pathLength:this.calcLength(i,a,s,u)}):e.push({type:Qt.CLOSE_PATH,points:[],pathLength:0})}return e}},{key:"pathM",value:function(t,e){var r=Zt.pathM(t).point,n=r.x,i=r.y;e.push(n,i)}},{key:"pathL",value:function(t,e){var r=Zt.pathL(t).point,n=r.x,i=r.y;return e.push(n,i),Qt.LINE_TO}},{key:"pathH",value:function(t,e){var r=Zt.pathH(t).point,n=r.x,i=r.y;return e.push(n,i),Qt.LINE_TO}},{key:"pathV",value:function(t,e){var r=Zt.pathV(t).point,n=r.x,i=r.y;return e.push(n,i),Qt.LINE_TO}},{key:"pathC",value:function(t,e){var r=Zt.pathC(t),n=r.point,i=r.controlPoint,a=r.currentPoint;e.push(n.x,n.y,i.x,i.y,a.x,a.y)}},{key:"pathS",value:function(t,e){var r=Zt.pathS(t),n=r.point,i=r.controlPoint,a=r.currentPoint;return e.push(n.x,n.y,i.x,i.y,a.x,a.y),Qt.CURVE_TO}},{key:"pathQ",value:function(t,e){var r=Zt.pathQ(t),n=r.controlPoint,i=r.currentPoint;e.push(n.x,n.y,i.x,i.y)}},{key:"pathT",value:function(t,e){var r=Zt.pathT(t),n=r.controlPoint,i=r.currentPoint;return e.push(n.x,n.y,i.x,i.y),Qt.QUAD_TO}},{key:"pathA",value:function(t){var e=Zt.pathA(t),r=e.rX,n=e.rY,i=e.sweepFlag,a=e.xAxisRotation,o=e.centp,s=e.a1,u=e.ad;return 0===i&&u>0&&(u-=2*Math.PI),1===i&&u<0&&(u+=2*Math.PI),[o.x,o.y,r,n,s,u,a,i]}},{key:"calcLength",value:function(t,e,r,n){var i=0,a=null,o=null,s=0;switch(r){case Qt.LINE_TO:return this.getLineLength(t,e,n[0],n[1]);case Qt.CURVE_TO:for(i=0,a=this.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),s=.01;s<=1;s+=.01)o=this.getPointOnCubicBezier(s,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case Qt.QUAD_TO:for(i=0,a=this.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),s=.01;s<=1;s+=.01)o=this.getPointOnQuadraticBezier(s,t,e,n[0],n[1],n[2],n[3]),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case Qt.ARC:i=0;var u=n[4],l=n[5],h=n[4]+l,c=Math.PI/180;if(Math.abs(u-h)<c&&(c=Math.abs(u-h)),a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),l<0)for(s=u-c;s>h;s-=c)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(s=u+c;s<h;s+=c)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),i+=this.getLineLength(a.x,a.y,o.x,o.y)}return 0}},{key:"getPointOnLine",value:function(t,e,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r,s=(i-r)/(n-e+ot),u=Math.sqrt(t*t/(1+s*s));n<e&&(u*=-1);var l=s*u,h=null;if(n===e)h={x:a,y:o+l};else if((o-r)/(a-e+ot)===s)h={x:a+u,y:o+l};else{var c,f,g=this.getLineLength(e,r,n,i);if(g<ot)return null;var p=(a-e)*(n-e)+(o-r)*(i-r);c=e+(p/=g*g)*(n-e),f=r+p*(i-r);var v=this.getLineLength(a,o,c,f),y=Math.sqrt(t*t-v*v);u=Math.sqrt(y*y/(1+s*s)),n<e&&(u*=-1),h={x:c+u,y:f+(l=s*u)}}return h}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),r=0,n=null;if(t<-5e-5||t-5e-5>e)return null;var i,a=c(this.dataArray);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(!o||!(o.pathLength<5e-5||r+o.pathLength+5e-5<t)){var s=t-r,u=0;switch(o.type){case Qt.LINE_TO:n=this.getPointOnLine(s,o.start.x,o.start.y,o.points[0],o.points[1],o.start.x,o.start.y);break;case Qt.ARC:var l=o.points[4],h=o.points[5],f=o.points[4]+h;if(u=l+s/o.pathLength*h,h<0&&u<f||h>=0&&u>f)break;n=this.getPointOnEllipticalArc(o.points[0],o.points[1],o.points[2],o.points[3],u,o.points[6]);break;case Qt.CURVE_TO:(u=s/o.pathLength)>1&&(u=1),n=this.getPointOnCubicBezier(u,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3],o.points[4],o.points[5]);break;case Qt.QUAD_TO:(u=s/o.pathLength)>1&&(u=1),n=this.getPointOnQuadraticBezier(u,o.start.x,o.start.y,o.points[0],o.points[1],o.points[2],o.points[3])}if(n)return n;break}r+=o.pathLength}}catch(g){a.e(g)}finally{a.f()}return null}},{key:"getLineLength",value:function(t,e,r,n){return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(t,e){return e.pathLength>0?t+e.pathLength:t},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,r,n,i,a,o,s,u){return{x:s*ht(t)+a*ct(t)+n*ft(t)+e*gt(t),y:u*ht(t)+o*ct(t)+i*ft(t)+r*gt(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,r,n,i,a,o){return{x:a*pt(t)+n*vt(t)+e*yt(t),y:o*pt(t)+i*vt(t)+r*yt(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,r,n,i,a){var o=Math.cos(a),s=Math.sin(a),u=r*Math.cos(i),l=n*Math.sin(i);return{x:t+(u*o-l*s),y:e+(u*s+l*o)}}},{key:"buildEquidistantCache",value:function(t,e){var r=this.getPathLength(),n=e||.25,i=t||r/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==n){this.equidistantCache={step:i,precision:n,points:[]};for(var a=0,o=0;o<=r;o+=n){var s=this.getPointOnPath(o),u=this.getPointOnPath(o+n);s&&u&&((a+=this.getLineLength(s.x,s.y,u.x,u.y))>=i&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i))}}}},{key:"getEquidistantPointOnPath",value:function(t,e,r){if(this.buildEquidistantCache(e,r),t<0||t-this.getPathLength()>5e-5)return null;var n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}}]),r}(),Se=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Pe=exports.ImageElement=function(t){m(r,Wt);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).type="image",a.loaded=!1;var o=a.getHrefAttribute().getString();if(!o)return k(a);var s=o.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(o);return t.images.push(w(a)),s?a.loadSvg(o):a.loadImage(o),a}return C(r,[{key:"loadImage",value:function(){var t=z(B().mark(function t(e){var r;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.createImage(e);case 3:r=t.sent,this.image=r,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error('Error while loading image "'.concat(e,'":'),t.t0);case 10:this.loaded=!0;case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},{key:"loadSvg",value:function(){var t=z(B().mark(function t(e){var r,n,i,a;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=Se.exec(e))){t.next=6;break}(n=r[5])&&("base64"===r[4]?this.image=atob(n):this.image=decodeURIComponent(n)),t.next=19;break;case 6:return t.prev=6,t.next=9,this.document.fetch(e);case 9:return i=t.sent,t.next=12,i.text();case 12:a=t.sent,this.image=a,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),console.error('Error while loading image "'.concat(e,'":'),t.t0);case 19:this.loaded=!0;case 20:case"end":return t.stop()}},t,this,[[6,16]])}));return function(e){return t.apply(this,arguments)}}()},{key:"renderChildren",value:function(t){var e=this.document,r=this.image,n=this.loaded,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(n&&r&&o&&s){if(t.save(),t.translate(i,a),"string"==typeof r){var u=e.canvg.forkString(t,r,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:s}),l=u.document.documentElement;l&&(l.parent=this),u.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:r.width,height:s,desiredHeight:r.height}),this.loaded&&("complete"in r&&!r.complete||t.drawImage(r,0,0));t.restore()}}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new Yt(t,e,t+r,e+n)}}]),r}(),Ae=exports.SymbolElement=function(t){m(r,Wt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="symbol",t}return C(r,[{key:"render",value:function(t){}}]),r}(),Ee=exports.SVGFontLoader=function(){function t(e){A(this,t),this.document=e,this.loaded=!1,e.fonts.push(this)}return C(t,[{key:"load",value:function(){var t=z(B().mark(function t(e,r){var n,i,a;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.document,t.next=4,n.canvg.parser.load(r);case 4:i=t.sent,a=i.getElementsByTagName("font"),Array.from(a).forEach(function(t){var r=n.createElement(t);n.definitions[e]=r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error('Error while loading font "'.concat(r,'":'),t.t0);case 12:this.loaded=!0;case 13:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e,r){return t.apply(this,arguments)}}()}]),t}(),Ce=exports.StyleElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="style",X(Array.from(n.childNodes).map(function(t){return t.textContent}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(function(e){var r=e.trim();if(r){var n=r.split("{"),i=n[0].split(","),a=n[1].split(";");i.forEach(function(e){var r=e.trim();if(r){var n=t.styles[r]||{};if(a.forEach(function(e){var r=e.indexOf(":"),i=e.substr(0,r).trim(),a=e.substr(r+1,e.length-r).trim();i&&a&&(n[i]=new dt(t,i,a))}),t.styles[r]=n,t.stylesSpecificity[r]=at(r),"@font-face"===r){var i=n["font-family"].getString().replace(/"|'/g,"");n.src.getString().split(",").forEach(function(e){if(e.indexOf('format("svg")')>0){var r=$(e);r&&new Ee(t).load(i,r)}})}}})}}),a}return C(r)}();Ce.parseExternalUrl=$;var Te=exports.UseElement=function(t){m(r,Wt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="use",t}return C(r,[{key:"setContext",value:function(t){f(P(r.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e=this.document,r=this.element;if(r){var n=r;if("symbol"===r.type&&((n=new Jt(e)).attributes.viewBox=new dt(e,"viewBox",r.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new dt(e,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new dt(e,"overflow",r.getAttribute("overflow").getString()),n.children=r.children,r.styles.opacity=new dt(e,"opacity",this.calculateOpacity())),"svg"===n.type){var i=this.getStyle("width",!1,!0),a=this.getStyle("height",!1,!0);i.hasValue()&&(n.attributes.width=new dt(e,"width",i.getString())),a.hasValue()&&(n.attributes.height=new dt(e,"height",a.getString()))}var o=n.parent;n.parent=this,n.render(t),n.parent=o}}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return e?It.fromElement(t,e):null}},{key:"element",get:function(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}]),r}();function Ve(t,e,r,n,i,a){return t[r*n*4+4*e+a]}function Me(t,e,r,n,i,a,o){t[r*n*4+4*e+a]=o}function Oe(t,e,r){return t[e]*r}function Ne(t,e,r,n){return e+Math.cos(t)*r+Math.sin(t)*n}var Le=exports.FeColorMatrixElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;A(this,r),(a=e.call(this,t,n,i)).type="feColorMatrix";var o=Y(a.getAttribute("values").getString());switch(a.getAttribute("type").getString("matrix")){case"saturate":var s=o[0];o=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var u=o[0]*Math.PI/180;o=[Ne(u,.213,.787,-.213),Ne(u,.715,-.715,-.715),Ne(u,.072,-.072,.928),0,0,Ne(u,.213,-.213,.143),Ne(u,.715,.285,.14),Ne(u,.072,-.072,-.283),0,0,Ne(u,.213,-.213,-.787),Ne(u,.715,-.715,.715),Ne(u,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return a.matrix=o,a.includeOpacity=a.getAttribute("includeOpacity").hasValue(),a}return C(r,[{key:"apply",value:function(t,e,r,n,i){for(var a=this.includeOpacity,o=this.matrix,s=t.getImageData(0,0,n,i),u=0;u<i;u++)for(var l=0;l<n;l++){var h=Ve(s.data,l,u,n,i,0),c=Ve(s.data,l,u,n,i,1),f=Ve(s.data,l,u,n,i,2),g=Ve(s.data,l,u,n,i,3),p=Oe(o,0,h)+Oe(o,1,c)+Oe(o,2,f)+Oe(o,3,g)+Oe(o,4,1),v=Oe(o,5,h)+Oe(o,6,c)+Oe(o,7,f)+Oe(o,8,g)+Oe(o,9,1),y=Oe(o,10,h)+Oe(o,11,c)+Oe(o,12,f)+Oe(o,13,g)+Oe(o,14,1),d=Oe(o,15,h)+Oe(o,16,c)+Oe(o,17,f)+Oe(o,18,g)+Oe(o,19,1);a&&(p=0,v=0,y=0,d*=g/255),Me(s.data,l,u,n,i,0,p),Me(s.data,l,u,n,i,1,v),Me(s.data,l,u,n,i,2,y),Me(s.data,l,u,n,i,3,d)}t.clearRect(0,0,n,i),t.putImageData(s,0,0)}}]),r}(),De=exports.MaskElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="mask",t}return C(r,[{key:"apply",value:function(t,e){var n=this.document,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(!o&&!s){var u=new Yt;this.children.forEach(function(e){u.addBoundingBox(e.getBoundingBox(t))}),i=Math.floor(u.x1),a=Math.floor(u.y1),o=Math.floor(u.width),s=Math.floor(u.height)}var l=this.removeStyles(e,r.ignoreStyles),h=n.createCanvas(i+o,a+s),c=h.getContext("2d");n.screen.setDefaults(c),this.renderChildren(c),new Le(n,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,i+o,a+s);var f=n.createCanvas(i+o,a+s),g=f.getContext("2d");n.screen.setDefaults(g),e.render(g),g.globalCompositeOperation="destination-in",g.fillStyle=c.createPattern(h,"no-repeat"),g.fillRect(0,0,i+o,a+s),t.fillStyle=g.createPattern(f,"no-repeat"),t.fillRect(0,0,i+o,a+s),this.restoreStyles(e,l)}},{key:"render",value:function(t){}}]),r}();De.ignoreStyles=["mask","transform","clip-path"];var Re=function(){},Be=exports.ClipPathElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="clipPath",t}return C(r,[{key:"apply",value:function(t){var e=this.document,r=Reflect.getPrototypeOf(t),n=t.beginPath,i=t.closePath;r&&(r.beginPath=Re,r.closePath=Re),Reflect.apply(n,t,[]),this.children.forEach(function(n){if("path"in n){var a="elementTransform"in n?n.elementTransform():null;a||(a=It.fromElement(e,n)),a&&a.apply(t),n.path(t),r&&(r.closePath=i),a&&a.unapply(t)}}),Reflect.apply(i,t,[]),t.clip(),r&&(r.beginPath=n,r.closePath=i)}},{key:"render",value:function(t){}}]),r}(),Ie=exports.FilterElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="filter",t}return C(r,[{key:"apply",value:function(t,e){var n=this.document,i=this.children,a="getBoundingBox"in e?e.getBoundingBox(t):null;if(a){var o=0,s=0;i.forEach(function(t){var e=t.extraFilterDistance||0;o=Math.max(o,e),s=Math.max(s,e)});var u=Math.floor(a.width),l=Math.floor(a.height),h=u+2*o,c=l+2*s;if(!(h<1||c<1)){var f=Math.floor(a.x),g=Math.floor(a.y),p=this.removeStyles(e,r.ignoreStyles),v=n.createCanvas(h,c),y=v.getContext("2d");n.screen.setDefaults(y),y.translate(-f+o,-g+s),e.render(y),i.forEach(function(t){"function"==typeof t.apply&&t.apply(y,0,0,h,c)}),t.drawImage(v,0,0,h,c,f-o,g-s,h,c),this.restoreStyles(e,p)}}}},{key:"render",value:function(t){}}]),r}();Ie.ignoreStyles=["filter","transform","clip-path"];var ze=exports.FeDropShadowElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="feDropShadow",a.addStylesFromStyleDefinition(),a}return C(r,[{key:"apply",value:function(t,e,r,n,i){}}]),r}(),Fe=exports.FeMorphologyElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="feMorphology",t}return C(r,[{key:"apply",value:function(t,e,r,n,i){}}]),r}(),_e=exports.FeCompositeElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="feComposite",t}return C(r,[{key:"apply",value:function(t,e,r,n,i){}}]),r}(),je=exports.FeGaussianBlurElement=function(t){m(r,zt);var e=b(r);function r(t,n,i){var a;return A(this,r),(a=e.call(this,t,n,i)).type="feGaussianBlur",a.blurRadius=Math.floor(a.getAttribute("stdDeviation").getNumber()),a.extraFilterDistance=a.blurRadius,a}return C(r,[{key:"apply",value:function(t,e,r,n,i){var o=this.document,s=this.blurRadius,u=o.window?o.window.document.body:null,l=t.canvas;l.id=o.getUniqueId(),u&&(l.style.display="none",u.appendChild(l)),(0,a.canvasRGBA)(l,e,r,n,i,s),u&&u.removeChild(l)}}]),r}(),Xe=exports.TitleElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="title",t}return C(r)}(),Ge=exports.DescElement=function(t){m(r,zt);var e=b(r);function r(){var t;A(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).type="desc",t}return C(r)}(),Ue=exports.elements={svg:Jt,rect:Kt,circle:te,ellipse:ee,line:re,polyline:ne,polygon:ie,path:Zt,pattern:ae,marker:oe,defs:se,linearGradient:he,radialGradient:ce,stop:fe,animate:ge,animateColor:pe,animateTransform:ve,font:xe,"font-face":ye,"missing-glyph":me,glyph:de,text:Ht,tspan:qt,tref:be,a:ke,textPath:we,image:Pe,g:ue,symbol:Ae,style:Ce,use:Te,mask:De,clipPath:Be,filter:Ie,feDropShadow:ze,feMorphology:Fe,feComposite:_e,feColorMatrix:Le,feGaussianBlur:je,title:Xe,desc:Ge};function Ye(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r}function We(t){return He.apply(this,arguments)}function He(){return(He=z(B().mark(function t(e){var r,n,i=arguments;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]&&i[1],n=document.createElement("img"),r&&(n.crossOrigin="Anonymous"),t.abrupt("return",new Promise(function(t,r){n.onload=function(){t(n)},n.onerror=function(t,e,n,i,a){r(a)},n.src=e}));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}var qe=12,$e=exports.Document=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.rootEmSize,a=void 0===i?qe:i,o=n.emSize,s=void 0===o?qe:o,u=n.createCanvas,l=void 0===u?t.createCanvas:u,h=n.createImage,c=void 0===h?t.createImage:h,f=n.anonymousCrossOrigin;A(this,t),this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=a,this.emSize=s,this.createCanvas=l,this.createImage=this.bindCreateImage(c,f),this.screen.wait(function(){return r.isImagesLoaded()}),this.screen.wait(function(){return r.isFontsLoaded()})}return C(t,[{key:"bindCreateImage",value:function(t,e){return"boolean"==typeof e?function(r,n){return t(r,"boolean"==typeof n?n:e)}:t}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]||qe},set:function(t){this.emSizeStack.push(t)}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(t){return t.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(t){return t.loaded})}},{key:"createDocumentElement",value:function(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}},{key:"createElement",value:function(e){var r=e.nodeName.replace(/^[^:]+:/,""),n=t.elementTypes[r];return n?new n(this,e):new Ft(this,e)}},{key:"createTextNode",value:function(t){return new $t(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(l({document:this},t))}}]),t}();$e.createCanvas=Ye,$e.createImage=We,$e.elementTypes=Ue;var Qe=exports.Canvg=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};A(this,t),this.parser=new Ct(n),this.screen=new Pt(e,n),this.options=n;var i=new $e(this,n),a=i.createDocumentElement(r);this.document=i,this.documentElement=a}return C(t,[{key:"fork",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.from(e,r,l(l({},this.options),n))}},{key:"forkString",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.fromString(e,r,l(l({},this.options),n))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:function(){var t=z(B().mark(function t(){var e,r=arguments;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},this.start(l({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},e)),t.next=4,this.ready();case 4:this.stop();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.documentElement,r=this.screen,n=this.options;r.start(e,l(l({enableRedraw:!0},n),t))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(t,e,r)}}],[{key:"from",value:function(){var e=z(B().mark(function e(r,n){var i,a,o,s=arguments;return B().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]?s[2]:{},a=new Ct(i),e.next=4,a.parse(n);case 4:return o=e.sent,e.abrupt("return",new t(r,o,i));case 6:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"fromString",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new t(e,new Ct(n).parseFromString(r),n)}}]),t}();
},{"raf":"Slta","rgbcolor":"r3Yr","svg-pathdata":"AkCQ","stackblur-canvas":"UkFi","process":"rH1J"}],"hQvI":[function(require,module,exports) {
var define;
var t;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n,i){"function"==typeof t&&t.amd?t(function(){return i(n,n.document)}):"object"==("undefined"==typeof exports?"undefined":e(exports))?module.exports=n.document?i(n,n.document):function(t){return i(t,t.document)}:n.SVG=i(n,n.document)}("undefined"!=typeof window?window:this,function(t,n){function i(t,e,n,i){return n+i.replace(p.regex.dots," .")}function r(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function o(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function a(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function h(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function u(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function l(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function c(e){for(var n=e.childNodes.length-1;n>=0;n--)e.childNodes[n]instanceof t.SVGElement&&c(e.childNodes[n]);return p.adopt(e).id(p.eid(e.nodeName))}function f(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function d(t){return Math.abs(t)>1e-37?t:0}var p=(void 0!==this?this:t).SVG=function(t){if(p.supported)return t=new p.Doc(t),p.parser.draw||p.prepare(),t};if(p.ns="http://www.w3.org/2000/svg",p.xmlns="http://www.w3.org/2000/xmlns/",p.xlink="http://www.w3.org/1999/xlink",p.svgjs="http://svgjs.com/svgjs",p.supported=!!n.createElementNS&&!!n.createElementNS(p.ns,"svg").createSVGRect,!p.supported)return!1;p.did=1e3,p.eid=function(t){return"Svgjs"+s(t)+p.did++},p.create=function(t){var e=n.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},p.extend=function(){var t,e,n,i;for(e=(t=[].slice.call(arguments)).pop(),i=t.length-1;i>=0;i--)if(t[i])for(n in e)t[i].prototype[n]=e[n];p.Set&&p.Set.inherit&&p.Set.inherit()},p.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,p.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&p.extend(e,t.extend),t.construct&&p.extend(t.parent||p.Container,t.construct),e},p.adopt=function(e){return e?e.instance?e.instance:((n="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new p.Nested:new p.Doc:"linearGradient"==e.nodeName?new p.Gradient("linear"):"radialGradient"==e.nodeName?new p.Gradient("radial"):p[s(e.nodeName)]?new(p[s(e.nodeName)]):new p.Element(e)).type=e.nodeName,n.node=e,e.instance=n,n instanceof p.Doc&&n.namespace().defs(),n.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),n):null;var n},p.prepare=function(){var t=n.getElementsByTagName("body")[0],e=(t?new p.Doc(t):p.adopt(n.documentElement).nested()).size(2,0);p.parser={body:t||n.documentElement,draw:e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:e.polyline().node,path:e.path().node,native:p.create("svg")}},p.parser={native:p.create("svg")},n.addEventListener("DOMContentLoaded",function(){p.parser.draw||p.prepare()},!1),p.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+),?([\d\.]+)?\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},p.utils={map:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r},filter:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},p.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},p.Color=function(t){var n;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?p.regex.isRgb.test(t)?(n=p.regex.rgb.exec(t.replace(p.regex.whitespace,"")),this.r=parseInt(n[1]),this.g=parseInt(n[2]),this.b=parseInt(n[3])):p.regex.isHex.test(t)&&(n=p.regex.hex.exec(function(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}(t)),this.r=parseInt(n[1],16),this.g=parseInt(n[2],16),this.b=parseInt(n[3],16)):"object"==e(t)&&(this.r=t.r,this.g=t.g,this.b=t.b))},p.extend(p.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+o(this.r)+o(this.g)+o(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new p.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new p.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),p.Color.test=function(t){return t+="",p.regex.isHex.test(t)||p.regex.isRgb.test(t)},p.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},p.Color.isColor=function(t){return p.Color.isRgb(t)||p.Color.test(t)},p.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},p.extend(p.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];e<n;e++)i.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new p.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(p.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=function t(e){for(var n=e.slice(0),i=n.length;i--;)Array.isArray(n[i])&&(n[i]=t(n[i]));return n}(this.value),t}}),p.PointArray=function(t,e){p.Array.call(this,t,e||[[0,0]])},p.PointArray.prototype=new p.Array,p.PointArray.prototype.constructor=p.PointArray,p.extend(p.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];e<n;e++)i.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new p.PointArray(i)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map(function(t){return t.slice()});if(null!=t[0].x)return t.map(function(t){return[t.x,t.y]})}else t=t.trim().split(p.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,i=t.length;n<i;n+=2)e.push([t[n],t[n+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+t,this.value[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.value.length-1;n>=0;n--)i.width&&(this.value[n][0]=(this.value[n][0]-i.x)*t/i.width+i.x),i.height&&(this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y);return this},bbox:function(){return p.parser.poly.setAttribute("points",this.toString()),p.parser.poly.getBBox()}});for(var m={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},x="mlhvqtcsaz".split(""),y=0,v=x.length;y<v;++y)m[x[y]]=function(t){return function(e,n,i){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var r=0,s=e.length;r<s;++r)e[r]=e[r]+(r%2?n.y:n.x);return m[t](e,n,i)}}(x[y].toUpperCase());p.PathArray=function(t,e){p.Array.call(this,t,e||[["M",0,0]])},p.PathArray.prototype=new p.Array,p.PathArray.prototype.constructor=p.PathArray,p.extend(p.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.value.length-1;r>=0;r--)"M"==(i=this.value[r][0])||"L"==i||"T"==i?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==i?this.value[r][1]+=t:"V"==i?this.value[r][1]+=e:"C"==i||"S"==i||"Q"==i?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==i&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==i&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(n=this.value.length-1;n>=0;n--)"M"==(i=this.value[n][0])||"L"==i||"T"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y):"H"==i?this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x:"V"==i?this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y:"C"==i||"S"==i||"Q"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y,this.value[n][3]=(this.value[n][3]-r.x)*t/r.width+r.x,this.value[n][4]=(this.value[n][4]-r.y)*e/r.height+r.y,"C"==i&&(this.value[n][5]=(this.value[n][5]-r.x)*t/r.width+r.x,this.value[n][6]=(this.value[n][6]-r.y)*e/r.height+r.y)):"A"==i&&(this.value[n][1]=this.value[n][1]*t/r.width,this.value[n][2]=this.value[n][2]*e/r.height,this.value[n][6]=(this.value[n][6]-r.x)*t/r.width+r.x,this.value[n][7]=(this.value[n][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,n,i;for(t=new p.PathArray(t),i=this.value.length===t.value.length,e=0,n=this.value.length;i&&e<n;e++)i=this.value[e][0]===t.value[e][0];return i},morph:function(t){return t=new p.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,i,r,s=this.value,o=this.destination.value,a=[],h=new p.PathArray;for(e=0,n=s.length;e<n;e++){for(a[e]=[s[e][0]],i=1,r=s[e].length;i<r;i++)a[e][i]=s[e][i]+(o[e][i]-s[e][i])*t;"A"===a[e][0]&&(a[e][4]=+(0!=a[e][4]),a[e][5]=+(0!=a[e][5]))}return h.value=a,h},parse:function(t){if(t instanceof p.PathArray)return t.valueOf();var e,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(p.regex.numbersWithDots,i).replace(p.regex.pathLetters," $& ").replace(p.regex.hyphen,"$1 -").trim().split(p.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var r=[],s=new p.Point,o=new p.Point,a=0,h=t.length;do{p.regex.isPathLetter.test(t[a])?(e=t[a],++a):"M"==e?e="L":"m"==e&&(e="l"),r.push(m[e].call(null,t.slice(a,a+=n[e.toUpperCase()]).map(parseFloat),s,o))}while(h>a);return r},bbox:function(){return p.parser.path.setAttribute("d",this.toString()),p.parser.path.getBBox()}}),p.Number=p.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(p.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof p.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new p.Number(t),new p.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new p.Number(t),new p.Number(this-t,this.unit||t.unit)},times:function(t){return t=new p.Number(t),new p.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new p.Number(t),new p.Number(this/t,this.unit||t.unit)},to:function(t){var e=new p.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new p.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new p.Number(this.destination).minus(this).times(t).plus(this):this}}}),p.Element=p.invent({create:function(t){this._stroke=p.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._events=t._events||{},this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=a(this,t,e);return this.width(new p.Number(n.width)).height(new p.Number(n.height))},clone:function(t){this.writeDataToDom();var e=c(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(p.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return p.get(this.attr(t))},parent:function(e){var n=this;if(!n.node.parentNode)return null;if(n=p.adopt(n.node.parentNode),!e)return n;for(;n&&n.node instanceof t.SVGElement;){if("string"==typeof e?n.matches(e):n instanceof e)return n;if(!n.node.parentNode||"#document"==n.node.parentNode.nodeName||"#document-fragment"==n.node.parentNode.nodeName)return null;n=p.adopt(n.node.parentNode)}},doc:function(){return this instanceof p.Doc?this:this.parent(p.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var e=n.createElement("svg");if(!(t&&this instanceof p.Parent))return e.appendChild(t=n.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),e.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");e.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,r=e.firstChild.childNodes.length;i<r;i++)this.node.appendChild(e.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),p.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},p.morph=function(t){return function(e,n){return new p.MorphObj(e,n).at(t)}},p.Situation=p.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new p.Number(t.duration).valueOf(),this.delay=new p.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),p.FX=p.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,n,i){"object"==e(t)&&(n=t.ease,i=t.delay,t=t.duration);var r=new p.Situation({duration:t||1e3,delay:i||0,ease:p.easing[n||"-"]||n});return this.queue(r),this},delay:function(t){var e=new p.Situation({duration:t,delay:0,ease:p.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof p.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof p.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof p.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,n,i=this.situation;if(i.init)return this;for(t in i.animations)for(n=this.target()[t](),Array.isArray(n)||(n=[n]),Array.isArray(i.animations[t])||(i.animations[t]=[i.animations[t]]),e=n.length;e--;)i.animations[t][e]instanceof p.Number&&(n[e]=new p.Number(n[e])),i.animations[t][e]=n[e].morph(i.animations[t][e]);for(t in i.attrs)i.attrs[t]=new p.MorphObj(this.target().attr(t),i.attrs[t]);for(t in i.styles)i.styles[t]=new p.MorphObj(this.target().style(t),i.styles[t]);return i.initialTransformation=this.target().matrixify(),i.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null==t||t,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last();return this.target().on("finished.fx",function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))}),this._callStart()},during:function(t){var e=this.last(),n=function(n){n.detail.situation==e&&t.call(this,n.detail.pos,p.morph(n.detail.pos),n.detail.eased,e)};return this.target().off("during.fx",n).on("during.fx",n),this.after(function(){this.off("during.fx",n)}),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,p.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){var e,n,i;(t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops)?(e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos);this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&s<=r&&(this.situation.once[s].call(this.target(),this.pos,r),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,n,i=this,r=this.target(),s=this.situation;for(t in s.animations)n=[].concat(s.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),r[t].apply(r,n);for(t in s.attrs)n=[t].concat(s.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),r.attr.apply(r,n);for(t in s.styles)n=[t].concat(s.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),r.style.apply(r,n);if(s.transforms.length){for(n=s.initialTransformation,t=0,e=s.transforms.length;t<e;t++){var o=s.transforms[t];o instanceof p.Matrix?n=o.relative?n.multiply((new p.Matrix).morph(o).at(s.ease(this.pos))):n.morph(o).at(s.ease(this.pos)):(o.relative||o.undo(n.extract()),n=n.multiply(o.at(s.ease(this.pos))))}r.matrix(n)}return this},once:function(t,e,n){var i=this.last();return n||(t=i.ease(t)),i.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:p.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new p.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new p.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),p.MorphObj=p.invent({create:function(t,e){return p.Color.isColor(e)?new p.Color(t).morph(e):p.regex.delimiter.test(t)?p.regex.pathLetters.test(t)?new p.PathArray(t).morph(e):new p.Array(t).morph(e):p.regex.numberAndUnit.test(e)?new p.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),p.extend(p.FX,{attr:function(t,n,i){if("object"==e(t))for(var r in t)this.attr(r,t[r]);else this.add(t,n,"attrs");return this},style:function(t,n){if("object"==e(t))for(var i in t)this.style(i,t[i]);else this.add(t,n,"styles");return this},x:function(t,e){if(this.target()instanceof p.G)return this.transform({x:t},e),this;var n=new p.Number(t);return n.relative=e,this.add("x",n)},y:function(t,e){if(this.target()instanceof p.G)return this.transform({y:t},e),this;var n=new p.Number(t);return n.relative=e,this.add("y",n)},cx:function(t){return this.add("cx",new p.Number(t))},cy:function(t){return this.add("cy",new p.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var n;this.target()instanceof p.Text?this.attr("font-size",t):(t&&e||(n=this.target().bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.add("width",new p.Number(t)).add("height",new p.Number(e)));return this},width:function(t){return this.add("width",new p.Number(t))},height:function(t){return this.add("height",new p.Number(t))},plot:function(t,e,n,i){return 4==arguments.length?this.plot([t,e,n,i]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new p.Number(t)):this},viewbox:function(t,e,n,i){return this.target()instanceof p.Container&&this.add("viewbox",new p.ViewBox(t,e,n,i)),this},update:function(t){if(this.target()instanceof p.Stop){if("number"==typeof t||t instanceof p.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),p.Box=p.invent({create:function(t,n,i,r){if(!("object"!=e(t)||t instanceof p.Element))return p.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=n,this.width=i,this.height=r),f(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,f(e)},transform:function(t){var e,n=1/0,i=-1/0,r=1/0,s=-1/0;return[new p.Point(this.x,this.y),new p.Point(this.x2,this.y),new p.Point(this.x,this.y2),new p.Point(this.x2,this.y2)].forEach(function(e){e=e.transform(t),n=Math.min(n,e.x),i=Math.max(i,e.x),r=Math.min(r,e.y),s=Math.max(s,e.y)}),(e=new this.constructor).x=n,e.width=i-n,e.y=r,e.height=s-r,f(e),e}}}),p.BBox=p.invent({create:function(t){if(p.Box.apply(this,[].slice.call(arguments)),t instanceof p.Element){var e;try{if(n.documentElement.contains){if(!n.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var i=t.node;i.parentNode;)i=i.parentNode;if(i!=n)throw new Exception("Element not in the dom")}e=t.node.getBBox()}catch(n){if(t instanceof p.Shape){var r=t.clone(p.parser.draw.instance).show();e=r.node.getBBox(),r.remove()}else e={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}p.Box.call(this,e)}},inherit:p.Box,parent:p.Element,construct:{bbox:function(){return new p.BBox(this)}}}),p.BBox.prototype.constructor=p.BBox,p.extend(p.Element,{tbox:function(){return this.rbox(this.doc())}}),p.RBox=p.invent({create:function(t){p.Box.apply(this,[].slice.call(arguments)),t instanceof p.Element&&p.Box.call(this,t.node.getBoundingClientRect())},inherit:p.Box,parent:p.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new p.RBox(this).transform(t.screenCTM().inverse()):new p.RBox(this).addOffset()}}}),p.RBox.prototype.constructor=p.RBox,p.Matrix=p.invent({create:function(t){var n,i=u([1,0,0,1,0,0]);for(t=t instanceof p.Element?t.matrixify():"string"==typeof t?u(t.split(p.regex.delimiter).map(parseFloat)):6==arguments.length?u([].slice.call(arguments)):Array.isArray(t)?u(t):"object"==e(t)?t:i,n=w.length-1;n>=0;--n)this[w[n]]=null!=t[w[n]]?t[w[n]]:i[w[n]]},extend:{extract:function(){var t=h(this,0,1),e=h(this,1,0),n=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(n*Math.PI/180)+this.f*Math.sin(n*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(n*Math.PI/180)+this.e*Math.sin(-n*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-n,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new p.Matrix(this)}},clone:function(){return new p.Matrix(this)},morph:function(t){return this.destination=new p.Matrix(t),this},at:function(t){return this.destination?new p.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new p.Matrix(this.native().multiply(function(t){return t instanceof p.Matrix||(t=new p.Matrix(t)),t}(t).native()))},inverse:function(){return new p.Matrix(this.native().inverse())},translate:function(t,e){return new p.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),this.around(n,i,new p.Matrix(t,0,0,e,0,0))},rotate:function(t,e,n){return t=p.utils.radians(t),this.around(e,n,new p.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),t=p.utils.radians(t),e=p.utils.radians(e),this.around(n,i,new p.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,n){return this.multiply(new p.Matrix(1,0,0,1,t||0,e||0)).multiply(n).multiply(new p.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=p.parser.native.createSVGMatrix(),e=w.length-1;e>=0;e--)t[w[e]]=this[w[e]];return t},toString:function(){return"matrix("+d(this.a)+","+d(this.b)+","+d(this.c)+","+d(this.d)+","+d(this.e)+","+d(this.f)+")"}},parent:p.Element,construct:{ctm:function(){return new p.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof p.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new p.Matrix(e)}return new p.Matrix(this.node.getScreenCTM())}}}),p.Point=p.invent({create:function(t,n){var i;i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==e(t)?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=n?n:t}:{x:0,y:0},this.x=i.x,this.y=i.y},extend:{clone:function(){return new p.Point(this)},morph:function(t,e){return this.destination=new p.Point(t,e),this},at:function(t){return this.destination?new p.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=p.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new p.Point(this.native().matrixTransform(t.native()))}}}),p.extend(p.Element,{point:function(t,e){return new p.Point(t,e).transform(this.screenCTM().inverse())}}),p.extend(p.Element,{attr:function(t,n,i){if(null==t){for(t={},i=(n=this.node.attributes).length-1;i>=0;i--)t[n[i].nodeName]=p.regex.isNumber.test(n[i].nodeValue)?parseFloat(n[i].nodeValue):n[i].nodeValue;return t}if("object"==e(t))for(n in t)this.attr(n,t[n]);else if(null===n)this.node.removeAttribute(t);else{if(null==n)return null==(n=this.node.getAttribute(t))?p.defaults.attrs[t]:p.regex.isNumber.test(n)?parseFloat(n):n;"stroke-width"==t?this.attr("stroke",parseFloat(n)>0?this._stroke:null):"stroke"==t&&(this._stroke=n),"fill"!=t&&"stroke"!=t||(p.regex.isImage.test(n)&&(n=this.doc().defs().image(n,0,0)),n instanceof p.Image&&(n=this.doc().defs().pattern(0,0,function(){this.add(n)}))),"number"==typeof n?n=new p.Number(n):p.Color.isColor(n)?n=new p.Color(n):Array.isArray(n)&&(n=new p.Array(n)),"leading"==t?this.leading&&this.leading(n):"string"==typeof i?this.node.setAttributeNS(i,t,n.toString()):this.node.setAttribute(t,n.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,n)}return this}}),p.extend(p.Element,{transform:function(t,n){var i,r,s=this;if("object"!=e(t))return i=new p.Matrix(s).extract(),"string"==typeof t?i[t]:i;if(i=new p.Matrix(s),n=!!n||!!t.relative,null!=t.a)i=n?i.multiply(new p.Matrix(t)):new p.Matrix(t);else if(null!=t.rotation)l(t,s),i=n?i.rotate(t.rotation,t.cx,t.cy):i.rotate(t.rotation-i.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(l(t,s),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!n){var o=i.extract();t.scaleX=1*t.scaleX/o.scaleX,t.scaleY=1*t.scaleY/o.scaleY}i=i.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(l(t,s),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!n){o=i.extract();i=i.multiply((new p.Matrix).skew(o.skewX,o.skewY,t.cx,t.cy).inverse())}i=i.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?s.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=s.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,i=(new p.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(n?i=i.translate(t.x,t.y):(null!=t.x&&(i.e=t.x),null!=t.y&&(i.f=t.y)));return this.attr("transform",i)}}),p.extend(p.FX,{transform:function(t,n){var i,r,s=this.target();return"object"!=e(t)?(i=new p.Matrix(s).extract(),"string"==typeof t?i[t]:i):(n=!!n||!!t.relative,null!=t.a?i=new p.Matrix(t):null!=t.rotation?(l(t,s),i=new p.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(l(t,s),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,i=new p.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(l(t,s),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,i=new p.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?s.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=s.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,i=(new p.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(i=new p.Translate(t.x,t.y)),i?(i.relative=n,this.last().transforms.push(i),this._callStart()):this)}}),p.extend(p.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(p.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(p.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(u(e[1])):t[e[0]].apply(t,e[1])},new p.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),p.Transformation=p.invent({create:function(t,n){if(arguments.length>1&&"boolean"!=typeof n)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var i=0,r=this.arguments.length;i<r;++i)this[this.arguments[i]]=t[i];else if("object"==e(t))for(i=0,r=this.arguments.length;i<r;++i)this[this.arguments[i]]=t[this.arguments[i]];this.inversed=!1,!0===n&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],n=0,i=this.arguments.length;n<i;++n)e.push(this[this.arguments[n]]);var r=this._undo||new p.Matrix;return r=(new p.Matrix).morph(p.Matrix.prototype[this.method].apply(r,e)).at(t),this.inversed?r.inverse():r},undo:function(t){for(var e=0,n=this.arguments.length;e<n;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(p[s(this.method)])(t,!0).at(1),this}}}),p.Translate=p.invent({parent:p.Matrix,inherit:p.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),p.Rotate=p.invent({parent:p.Matrix,inherit:p.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new p.Matrix).rotate((new p.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),p.Scale=p.invent({parent:p.Matrix,inherit:p.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),p.Skew=p.invent({parent:p.Matrix,inherit:p.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),p.extend(p.Element,{style:function(t,n){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==e(t))for(n in t)this.style(n,t[n]);else{if(!p.regex.isCss.test(t))return this.node.style[r(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});n=t.pop();)this.style(n[0],n[1])}else this.node.style[r(t)]=null===n||p.regex.isBlank.test(n)?"":n;return this}}),p.Parent=p.invent({create:function(t){this.constructor.call(this,t)},inherit:p.Element,extend:{children:function(){return p.utils.map(p.utils.filterSVGElements(this.node.childNodes),function(t){return p.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return p.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var n,i,r=this.children();for(n=0,i=r.length;n<i;n++)r[n]instanceof p.Element&&t.apply(r[n],[n,r]),e&&r[n]instanceof p.Container&&r[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),p.extend(p.Parent,{ungroup:function(t,e){return 0===e||this instanceof p.Defs||this.node==p.parser.draw?this:(t=t||(this instanceof p.Doc?this:this.parent(p.Parent)),e=e||1/0,this.each(function(){return this instanceof p.Defs?this:this instanceof p.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),p.Container=p.invent({create:function(t){this.constructor.call(this,t)},inherit:p.Parent}),p.ViewBox=p.invent({create:function(t){var n,i,r,s,o,a,h,u=1,l=1,c=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof p.Element){for(a=t,h=t,o=(t.attr("viewBox")||"").match(c),t.bbox,r=new p.Number(t.width()),s=new p.Number(t.height());"%"==r.unit;)u*=r.value,r=new p.Number(a instanceof p.Doc?a.parent().offsetWidth:a.parent().width()),a=a.parent();for(;"%"==s.unit;)l*=s.value,s=new p.Number(h instanceof p.Doc?h.parent().offsetHeight:h.parent().height()),h=h.parent();this.x=0,this.y=0,this.width=r*u,this.height=s*l,this.zoom=1,o&&(n=parseFloat(o[0]),i=parseFloat(o[1]),r=parseFloat(o[2]),s=parseFloat(o[3]),this.zoom=this.width/this.height>r/s?this.height/s:this.width/r,this.x=n,this.y=i,this.width=r,this.height=s)}else t="string"==typeof t?t.match(c).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==e(t)?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,n,i){return this.destination=new p.ViewBox(t,e,n,i),this},at:function(t){return this.destination?new p.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:p.Container,construct:{viewbox:function(t,e,n,i){return 0==arguments.length?new p.ViewBox(this):this.attr("viewBox",new p.ViewBox(t,e,n,i))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){p.Element.prototype[t]=function(e){return null==e?p.off(this,t):p.on(this,t,e),this}}),p.listenerId=0,p.on=function(t,e,n,i,r){var s=n.bind(i||t),o=t instanceof p.Element?t.node:t;o.instance=o.instance||{_events:{}};var a=o.instance._events;n._svgjsListenerId||(n._svgjsListenerId=++p.listenerId),e.split(p.regex.delimiter).forEach(function(t){var e=t.split(".")[0],i=t.split(".")[1]||"*";a[e]=a[e]||{},a[e][i]=a[e][i]||{},a[e][i][n._svgjsListenerId]=s,o.addEventListener(e,s,r||!1)})},p.off=function(t,e,n,i){var r=t instanceof p.Element?t.node:t;if(r.instance&&("function"!=typeof n||(n=n._svgjsListenerId))){var s=r.instance._events;(e||"").split(p.regex.delimiter).forEach(function(t){var e,o,a=t&&t.split(".")[0],h=t&&t.split(".")[1];if(n)s[a]&&s[a][h||"*"]&&(r.removeEventListener(a,s[a][h||"*"][n],i||!1),delete s[a][h||"*"][n]);else if(a&&h){if(s[a]&&s[a][h]){for(o in s[a][h])p.off(r,[a,h].join("."),o);delete s[a][h]}}else if(h)for(t in s)for(e in s[t])h===e&&p.off(r,[t,h].join("."));else if(a){if(s[a]){for(e in s[a])p.off(r,[a,e].join("."));delete s[a]}}else{for(t in s)p.off(r,t);r.instance._events={}}})}},p.extend(p.Element,{on:function(t,e,n,i){return p.on(this,t,e,n,i),this},off:function(t,e){return p.off(this.node,t,e),this},fire:function(e,n){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new p.CustomEvent(e,{detail:n,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),p.Defs=p.invent({create:"defs",inherit:p.Container}),p.G=p.invent({create:"g",inherit:p.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new p.G)}}}),p.Doc=p.invent({create:function(t){t&&("svg"==(t="string"==typeof t?n.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,p.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:p.Container,extend:{namespace:function(){return this.attr({xmlns:p.ns,version:"1.1"}).attr("xmlns:xlink",p.xlink,p.xmlns).attr("xmlns:svgjs",p.svgjs,p.xmlns)},defs:function(){var t;this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=p.adopt(t):this._defs=new p.Defs,this.node.appendChild(this._defs.node));return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,p.parser.draw.parentNode||this.node.appendChild(p.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,n=c(e.cloneNode(!0));return t?(t.node||t).appendChild(n.node):e.parentNode.insertBefore(n.node,e.nextSibling),n}}}),p.extend(p.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof p.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof p.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),p.Mask=p.invent({create:function(){this.constructor.call(this,p.create("mask")),this.targets=[]},inherit:p.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],p.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new p.Mask)}}}),p.extend(p.Element,{maskWith:function(t){return this.masker=t instanceof p.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),p.ClipPath=p.invent({create:function(){this.constructor.call(this,p.create("clipPath")),this.targets=[]},inherit:p.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new p.ClipPath)}}}),p.extend(p.Element,{clipWith:function(t){return this.clipper=t instanceof p.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),p.Gradient=p.invent({create:function(t){this.constructor.call(this,p.create(t+"Gradient")),this.type=t},inherit:p.Container,extend:{at:function(t,e,n){return this.put(new p.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),p.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),p.extend(p.Gradient,p.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new p.Number(t),fy:new p.Number(e)}):this.attr({x1:new p.Number(t),y1:new p.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new p.Number(t),cy:new p.Number(e)}):this.attr({x2:new p.Number(t),y2:new p.Number(e)})}}),p.extend(p.Defs,{gradient:function(t,e){return this.put(new p.Gradient(t)).update(e)}}),p.Stop=p.invent({create:"stop",inherit:p.Element,extend:{update:function(t){return("number"==typeof t||t instanceof p.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new p.Number(t.offset)),this}}}),p.Pattern=p.invent({create:"pattern",inherit:p.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),p.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),p.extend(p.Defs,{pattern:function(t,e,n){return this.put(new p.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),p.Shape=p.invent({create:function(t){this.constructor.call(this,t)},inherit:p.Element}),p.Bare=p.invent({create:function(t,e){if(this.constructor.call(this,p.create(t)),e)for(var n in e.prototype)"function"==typeof e.prototype[n]&&(this[n]=e.prototype[n])},inherit:p.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(n.createTextNode(t)),this}}}),p.extend(p.Parent,{element:function(t,e){return this.put(new p.Bare(t,e))}}),p.Symbol=p.invent({create:"symbol",inherit:p.Container,construct:{symbol:function(){return this.put(new p.Symbol)}}}),p.Use=p.invent({create:"use",inherit:p.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,p.xlink)}},construct:{use:function(t,e){return this.put(new p.Use).element(t,e)}}}),p.Rect=p.invent({create:"rect",inherit:p.Shape,construct:{rect:function(t,e){return this.put(new p.Rect).size(t,e)}}}),p.Circle=p.invent({create:"circle",inherit:p.Shape,construct:{circle:function(t){return this.put(new p.Circle).rx(new p.Number(t).divide(2)).move(0,0)}}}),p.extend(p.Circle,p.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),p.Ellipse=p.invent({create:"ellipse",inherit:p.Shape,construct:{ellipse:function(t,e){return this.put(new p.Ellipse).size(t,e).move(0,0)}}}),p.extend(p.Ellipse,p.Rect,p.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),p.extend(p.Circle,p.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new p.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new p.Number(t).divide(2))},size:function(t,e){var n=a(this,t,e);return this.rx(new p.Number(n.width).divide(2)).ry(new p.Number(n.height).divide(2))}}),p.Line=p.invent({create:"line",inherit:p.Shape,extend:{array:function(){return new p.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,i){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:i}:new p.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=a(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,n,i){return p.Line.prototype.plot.apply(this.put(new p.Line),null!=t?[t,e,n,i]:[0,0,0,0])}}}),p.Polyline=p.invent({create:"polyline",inherit:p.Shape,construct:{polyline:function(t){return this.put(new p.Polyline).plot(t||new p.PointArray)}}}),p.Polygon=p.invent({create:"polygon",inherit:p.Shape,construct:{polygon:function(t){return this.put(new p.Polygon).plot(t||new p.PointArray)}}}),p.extend(p.Polyline,p.Polygon,{array:function(){return this._array||(this._array=new p.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new p.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=a(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),p.extend(p.Line,p.Polyline,p.Polygon,{morphArray:p.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),p.Path=p.invent({create:"path",inherit:p.Shape,extend:{morphArray:p.PathArray,array:function(){return this._array||(this._array=new p.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new p.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=a(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new p.Path).plot(t||new p.PathArray)}}}),p.Image=p.invent({create:"image",inherit:p.Shape,extend:{load:function(e){if(!e)return this;var n=this,i=new t.Image;return p.on(i,"load",function(){p.off(i);var t=n.parent(p.Pattern);null!==t&&(0==n.width()&&0==n.height()&&n.size(i.width,i.height),t&&0==t.width()&&0==t.height()&&t.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:i.width,height:i.height,ratio:i.width/i.height,url:e}))}),p.on(i,"error",function(t){p.off(i),"function"==typeof n._error&&n._error.call(n,t)}),this.attr("href",i.src=this.src=e,p.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new p.Image).load(t).size(e||0,n||e||0)}}}),p.Text=p.invent({create:function(){this.constructor.call(this,p.create("text")),this.dom.leading=new p.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",p.defaults.attrs["font-family"])},inherit:p.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t.valueOf()?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,n=0,i=e.length;n<i;++n)0!=n&&3!=e[n].nodeType&&1==p.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{n=0;for(var r=(t=t.split("\n")).length;n<r;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new p.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=p.utils.map(p.utils.filterSVGElements(t.childNodes),function(t){return p.adopt(t)});return new p.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,i=this.dom.leading*new p.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=i:(this.attr("dy",i+n),n=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new p.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new p.Text).text(t)},plain:function(t){return this.put(new p.Text).plain(t)}}}),p.Tspan=p.invent({create:"tspan",inherit:p.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(p.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),p.extend(p.Text,p.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(n.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new p.Tspan;return!1===this._build&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),p.TextPath=p.invent({create:"textPath",inherit:p.Parent,parent:p.Text,construct:{morphArray:p.PathArray,path:function(t){for(var e=new p.TextPath,n=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+n,p.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return p.adopt(this.node.firstChild)}}}),p.Nested=p.invent({create:function(){this.constructor.call(this,p.create("svg")),this.style("overflow","visible")},inherit:p.Container,construct:{nested:function(){return this.put(new p.Nested)}}}),p.A=p.invent({create:"a",inherit:p.Container,extend:{to:function(t){return this.attr("href",t,p.xlink)},show:function(t){return this.attr("show",t,p.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new p.A).to(t)}}}),p.extend(p.Element,{linkTo:function(t){var e=new p.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),p.Marker=p.invent({create:"marker",inherit:p.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),p.extend(p.Defs,{marker:function(t,e,n){return this.put(new p.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}}),p.extend(p.Line,p.Polyline,p.Polygon,p.Path,{marker:function(t,e,n,i){var r=["marker"];return"all"!=t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof p.Marker?arguments[1]:this.doc().marker(e,n,i),this.attr(r,t)}});var g={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e,n={};n[t]=function(n){if(void 0===n)return this;if("string"==typeof n||p.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(t,n);else for(e=g[t].length-1;e>=0;e--)null!=n[g[t][e]]&&this.attr(g.prefix(t,g[t][e]),n[g[t][e]]);return this},p.extend(p.Element,p.FX,n)}),p.extend(p.Element,p.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:i})},scale:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:i})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new p.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new p.Number(t).plus(this instanceof p.FX?0:this.x()),!0)},dy:function(t){return this.y(new p.Number(t).plus(this instanceof p.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),p.extend(p.Rect,p.Ellipse,p.Circle,p.Gradient,p.FX,{radius:function(t,e){var n=(this._target||this).type;return"radial"==n||"circle"==n?this.attr("r",new p.Number(t)):this.rx(t).ry(null==e?t:e)}}),p.extend(p.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),p.extend(p.Parent,p.Text,p.Tspan,p.FX,{font:function(t,n){if("object"==e(t))for(n in t)this.font(n,t[n]);return"leading"==t?this.leading(n):"anchor"==t?this.attr("text-anchor",n):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,n):this.attr(t,n)}}),p.Set=p.invent({create:function(t){t instanceof p.Set?this.members=t.members.slice():Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new p.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new p.Set(t)}}}),p.FX.Set=p.invent({create:function(t){this.set=t}}),p.Set.inherit=function(){var t=[];for(var e in p.Shape.prototype)"function"==typeof p.Shape.prototype[e]&&"function"!=typeof p.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){p.Set.prototype[t]=function(){for(var e=0,n=this.members.length;e<n;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new p.FX.Set(this)):this}}),t=[],p.FX.prototype)"function"==typeof p.FX.prototype[e]&&"function"!=typeof p.FX.Set.prototype[e]&&t.push(e);t.forEach(function(t){p.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},p.extend(p.Element,{data:function(t,n,i){if("object"==e(t))for(n in t)this.data(n,t[n]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(n){return this.attr("data-"+t)}else this.attr("data-"+t,null===n?null:!0===i||"string"==typeof n||"number"==typeof n?n:JSON.stringify(n));return this}}),p.extend(p.Element,{remember:function(t,n){if("object"==e(arguments[0]))for(var n in t)this.remember(n,t[n]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=n}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),p.get=function(t){var e=n.getElementById(function(t){var e=(t||"").toString().match(p.regex.reference);if(e)return e[1]}(t)||t);return p.adopt(e)},p.select=function(t,e){return new p.Set(p.utils.map((e||n).querySelectorAll(t),function(t){return p.adopt(t)}))},p.extend(p.Parent,{select:function(t){return p.select(t,this.node)}});var w="abcdef".split("");if("function"!=typeof t.CustomEvent){var b=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=n.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i};b.prototype=t.Event.prototype,p.CustomEvent=b}else p.CustomEvent=t.CustomEvent;return function(e){for(var n=0,i=["moz","webkit"],r=0;r<i.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[i[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),s=e.setTimeout(function(){t(i+r)},r);return n=i+r,s},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),p}),SVG.ForiegnObject=function(){this.constructor.call(this,SVG.create("foreignObject")),this.type="foreignObject"},SVG.ForiegnObject.prototype=new SVG.Shape,SVG.extend(SVG.ForiegnObject,{appendChild:function(t,n){var i="string"==typeof t?document.createElement(t):t;if("object"==e(n))for(a in n)i[a]=n[a];return"div"==t&&i.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),this.node.appendChild(i),this},getChild:function(t){return this.node.childNodes[t]}}),SVG.extend(SVG.Container,{foreignObject:function(t,e){return this.put(new SVG.ForiegnObject).size(null==t?100:t,null==e?100:e)}});
},{}],"Hq8W":[function(require,module,exports) {
var define;
var define;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../svgUtil");var flow2svg={elements:{},type:"png",ids:[],watermark:{},pageColor:"",eqObj:{},dom:"",init:function(e,t){if("string"==typeof t)this.type=t;else{var r=t.elements||Model.define.elements;t.ids=t.ids||[],t.ids.length||(t.ids=Object.keys(r)),this.type=t.type,this.eqObj=t.eqObj,this.ids=t.ids,this.pageColor=t.pageColor||Model.define.page.backgroundColor,t.watermark&&"object"==_typeof(t.watermark)&&(this.watermark=t.watermark)}this.dom=e;var l=$(e),i=e.substring(1,e.length);0==l.length&&(l=$("<div id="+i+" style='position:fixed;z-index:1000; top: 0'></div>>").appendTo("body")),this.cleanSvgHtml();var a=this.calcCanvasSize(this.ids);this.canvasSize=a;var n=SVG(i).size(a.w,a.h),o=null!=Model.define.theme;Model.define.page;this.setPageColor(this.pageColor,n),this.setWatermark(["",""],a,n);var s=this.ids.map(function(e){return Utils.copy(r[e])});s.sort(function(e,t){return e.props.zindex-t.props.zindex});for(var p=0,h=s.length;p<h;p++){var c=s[p];if("linker"==c.name)this.linker2svg(c,n,a,o);else if((""==c.parent||null==c.parent)&&(this.shape2svg(c,n,a),null!=c.children&&c.children.length>0))for(var d=c.children,g=0;g<d.length;g++){var f=d[g];if(!r[f])break;var y=Utils.copy(r[f]);this.shape2svg(y,n,a,o)}}this.watermark.download&&this.setWatermark(this.watermark.download,a,n),this.watermark.normal&&this.drawBrand(this.watermark.normal,a,n);var u=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:a.w,h:a.h,x:a.minX,y:a.minY,bg:this.pageColor,content:u}},getSvgHtml:function(){return this.init(),$(this.dom).html()},cleanSvgHtml:function(){$(this.dom).html("")},shape2svg:function shape2svg(shape,draw,canvasSize,hasTheme){if(!$.isEmptyObject(shape)&&"linker"!=shape.name){var props=shape.props,x=25,y=25,w=props.w,h=props.h,height=props.height,path=shape.path,textBlock=shape.textBlock,dataAttr=shape.dataAttributes;props.x-=canvasSize.minX,props.y-=canvasSize.minY,x=props.x-15,y=props.y-15;var fStyle=Utils.getShapeFillStyle(shape.fillStyle,hasTheme),lStyle=Utils.getShapeLineStyle(shape.lineStyle,hasTheme),shapeBox=Utils.getShapeBox(shape),shapeStyle=shape.shapeStyle,defs=draw.defs(),group=draw.group().attr("transform","translate("+x+","+y+")");if(shape.name.startsWith("chart_")){var svgId="svg_"+shape.id;$("#".concat(svgId)).find("svg").clone(!1).appendTo($("#svg_exporter"))}else renderShape(path,group,fStyle,lStyle,defs);renderShapeMarkers(group),renderText(textBlock,group),renderDataAttr(dataAttr,group)}function renderShapeMarkers(e){if(shape.attribute&&shape.attribute.markers&&shape.attribute.markers.length>0)for(var t=shape.attribute.markers,r=Schema.config.markerSize,l=shape.attribute.markerOffset,i=t.length*r+4*(t.length-1),a=shape.props.w/2-i/2,n=0;n<t.length;n++){var o=t[n],s=shape.props.h-r-l,p=e.group().attr("transform","translate("+a+","+s+")");renderShape(Schema.markers[o].call(shape,r),p,fStyle,lStyle,defs),a+=r+4}}function renderShape(e,t,r,l,i){if("grid"==shape.category){for(var a=[],n=0;n<e.length;n++)for(var o=0;o<e[n].length;o++)e[n][o].row=n,e[n][o].column=o,a.push(e[n][o]);e=a;var s=shape.merge||[];for(n=0;n<s.length;n++){var p=s[n],c=p[0],d=p[p.length-1];e[c].actions[0].w=e[d].actions[0].w+"+"+e[d].actions[0].x+"-"+e[c].actions[0].x,e[c].actions[0].h=e[d].actions[0].h+"+"+e[d].actions[0].y+"-"+e[c].actions[0].y;for(o=1;o<p.length;o++)e[p[o]].jump=!0}}for(n=0;n<e.length;n++){var g=e[n];if(!g.jump){var f=$.extend({},l,g.lineStyle),y=$.extend({},r,g.fillStyle),u=g.actions,x="";for(o=0;o<u.length;o++){x+=parsePath(u[o],w,h,height,f.lineWidth)}var m=t.path(x);renderBorder(f,y,m),shape.theme=shape.theme||{},"header"==shape.theme.name?y=0==g.row?$.extend({},r,shape.theme.row[0].fillStyle,g.fillStyle):$.extend({},r,shape.theme.row[1].fillStyle,g.fillStyle):"striping"==shape.theme.name&&(shape.theme.row&&(y=$.extend({},r,shape.theme.row[g.row%2].fillStyle,g.fillStyle)),shape.theme.column&&(y=$.extend({},r,shape.theme.column[g.column%2].fillStyle,g.fillStyle))),renderFill(y,m,i)}}if(null!=props.angle&&0!=props.angle){var v=180*props.angle/Math.PI;t.rotate(v,props.w/2,props.h/2)}}function renderFill(fillStyle,group_path,defs){if("none"!=fillStyle.type)if("image"!=fillStyle.type)if("gradient"==fillStyle.type&&"radial"==fillStyle.gradientType){fillStyle.alpha=null!=fillStyle.alpha?fillStyle.alpha:shapeStyle.alpha;var beginColor="transparent"==fillStyle.beginColor?fillStyle.beginColor:"rgb("+fillStyle.beginColor+")",endColor="transparent"==fillStyle.endColor?fillStyle.endColor:"rgb("+fillStyle.endColor+")",gradient=defs.gradient("radial",function(e){e.at(0,beginColor,fillStyle.alpha),e.at(1,endColor,fillStyle.alpha)});gradient.radius(fillStyle.radius),group_path.fill(gradient)}else if("gradient"==fillStyle.type&&"linear"==fillStyle.gradientType){fillStyle.alpha=null!=fillStyle.alpha?fillStyle.alpha:shapeStyle.alpha;var beginColor="transparent"==fillStyle.beginColor?fillStyle.beginColor:"rgb("+fillStyle.beginColor+")",endColor="transparent"==fillStyle.endColor?fillStyle.endColor:"rgb("+fillStyle.endColor+")",gradient=defs.gradient("linear",function(e){e.at(0,beginColor,fillStyle.alpha),e.at(1,endColor,fillStyle.alpha)}),angle=fillStyle.angle?fillStyle.angle:0,sin=Math.sin(angle)/2,cos=Math.cos(angle)/2;gradient.from(.5+sin,.5-cos).to(.5-sin,.5+cos),group_path.fill(gradient)}else{var shapeColor=Utils.copy(shape.fillStyle).color||"255, 255, 255",st=$.extend({},fillStyle),fillStyle_=Utils.getShapeFillStyle(st,hasTheme),color=fillStyle_.color;if(color.indexOf("r")>=0){var colors=[];colors=$.isEmptyObject(shape.fillStyle)?fillStyle_.color.split(","):shapeColor.split(",");var r=colors[0],g=colors[1],b=colors[2];if("string"==typeof r){var shapeColors=shapeColor.split(",");color=color.replace("r",shapeColors[0]).replace("g",shapeColors[1]).replace("b",shapeColors[2])}else color=color.replace("r",r).replace("g",g).replace("b",b);var cs=color.split(","),newColor=[];newColor.push(eval(cs[0])<0?0:eval(cs[0])),newColor.push(eval(cs[1])<0?0:eval(cs[1])),newColor.push(eval(cs[2])<0?0:eval(cs[2])),color=newColor.join(",")}var fs={color:"rgb("+color+")"};null!=fillStyle.alpha?fs.opacity=fillStyle.alpha:null!=shapeStyle.alpha&&(fs.opacity=shapeStyle.alpha),group_path.fill(fs)}else{var image=fillStyle.fileId;if(!image)return void(null!=group_path&&group_path.fill("none"));-1!=image.indexOf("data:image/")||(0!=image.indexOf("http")?(image=image.indexOf("/")<0?"https://cdn.processon.com/"+image:-1==fillStyle.fileId.indexOf("/assets")?staticBasePath+"/assets"+fillStyle.fileId:staticBasePath+fillStyle.fileId,location.origin.indexOf("processon.com")>-1&&(image=image.replace("http://","https://"))):(image.indexOf("orgu2a928.bkt.clouddn.com")>=0?image=image.replace("orgu2a928.bkt.clouddn.com","cdn2.processon.com").replace("http://","https://"):image.indexOf("7xt9nt.com1.z0.glb.clouddn.com")>=0?image=image.replace("7xt9nt.com1.z0.glb.clouddn.com","cdn.processon.com").replace("http://","https://"):image.indexOf("p7o7ul1nf.bkt.clouddn.com")>=0&&(image=image.replace("p7o7ul1nf.bkt.clouddn.com","cdn1.processon.com").replace("http://","https://")),image=image.replace(/^http:\/\//,"https://")));var imgW=fillStyle.imageW,imgH=fillStyle.imageH,imgX=0,imgY=0;switch(fillStyle.display){case"static":imgX=eval("var w="+props.w+";var h = "+props.h+";"+fillStyle.imageX),imgY=eval("var w="+props.w+";var h = "+props.h+";"+fillStyle.imageY);break;case"stretch":imgW=props.w,imgH=props.h;break;case"fill":imgW/imgH>w/h?(imgW*=h/imgH,imgH=h,imgX=(w-imgW)/2):(imgH*=w/imgW,imgW=w,imgY=(h-imgH)/2);break;case"fit":h/imgH<w/imgW?(imgW*=h/imgH,imgH=h,imgX=(w-imgW)/2):(imgH*=w/imgW,imgW=w,imgY=(h-imgH)/2);break;case"original":imgX=(w-imgW)/2,imgY=(h-imgH)/2;break;case"tile":w=imgW,h=imgH}if(imgW=imgW>0?imgW:1,imgH=imgH>0?imgH:1,w=w>0?w:1,h=h>0?h:1,"stretch"==fillStyle.display&&"pdfhd"==flow2svg.type){var image=group.image(image).size(imgW,imgH).attr({preserveAspectRatio:"none",crossOrigin:"anonymous"});group_path.fill("transparent"),image=null}else{var pattern=group.pattern(w,h,function(e){e.image(image).size(imgW,imgH).attr({preserveAspectRatio:"none",crossOrigin:"anonymous"}).move(imgX,imgY)});group_path.fill(pattern),pattern=null}}else null!=group_path&&group_path.fill("none")}function renderBorder(lineStyle,fillStyle,group_path){var lineStyle_=Utils.getShapeLineStyle(shape.lineStyle,!1),lineWidth=lineStyle.lineWidth;"string"==typeof lineStyle.lineWidth&&(lineWidth=eval("var lineWidth="+lineStyle_.lineWidth+";"+lineStyle.lineWidth)),lineStyle.lineColor=lineStyle.lineColor?lineStyle.lineColor:"0,0,0",shapeStyle.alpha=shapeStyle.alpha?shapeStyle.alpha:"1";var style={width:lineWidth,color:"rgba("+lineStyle.lineColor+","+shapeStyle.alpha+")"};"dot"==lineStyle.lineStyle?style=$.extend(style,{dasharray:"3,4"}):"dashed"==lineStyle.lineStyle?style=$.extend(style,{dasharray:"10,6"}):"dashdot"==lineStyle.lineStyle&&(style=$.extend(style,{dasharray:"10,6,3,6"})),0==lineStyle.lineWidth?group_path.stroke("none"):group_path.stroke(style)}function renderText(textBlock,group){if("grid"==shape.category&&shape.merge)for(var gridMerge=shape.merge||[],i=0;i<gridMerge.length;i++){var gridMgs=gridMerge[i],first=gridMgs[0],last=gridMgs[gridMgs.length-1];textBlock[first].position.w=textBlock[last].position.w+"+"+textBlock[last].position.x+"-"+textBlock[first].position.x,textBlock[first].position.h=textBlock[last].position.h+"+"+textBlock[last].position.y+"-"+textBlock[first].position.y;for(var j=1;j<gridMgs.length;j++)textBlock[gridMgs[j]].jump=!0}for(var i=0;i<textBlock.length;i++){var textObj=textBlock[i];if(!textObj.jump){var pos=textObj.position,text=textObj.text||"",style=null,_group=group.group(),fontStyle=Utils.getShapeFontStyle(shape.fontStyle);fontStyle=$.extend({},fontStyle,textObj.fontStyle);var _w=eval("var w="+props.w+";var h = "+props.h+";"+pos.w),_h=eval("var w="+props.w+";var h = "+props.h+";"+pos.h),_x=eval("var w="+props.w+";var h = "+props.h+";"+pos.x),_y=eval("var w="+props.w+";var h = "+props.h+";"+pos.y);if("horizontal"==fontStyle.orientation){var blockCenter={x:_x+_w/2,y:_y+_h/2};pos={x:blockCenter.x-_h/2,y:blockCenter.y-_w/2,w:_h,h:_w}}if(!$.isEmptyObject(flow2svg.eqObj)){var eqObj=flow2svg.eqObj,eqImg=eqObj.eqImgObj["text_"+shape.id+"_"+i];if(eqImg){var latextTop=0;latextTop="middle"==fontStyle.vAlign?(_h-eqImg.h)/2:"bottom"==fontStyle.vAlign?_h-eqImg.h:0;var latextRect=_group.rect(eqImg.w,eqImg.h);latextRect.attr("transform","translate("+_x+","+(_y+latextTop)+")");var pattern=group.pattern(eqImg.w,eqImg.h,function(e){e.image(eqObj.src).size(eqObj.w,eqObj.h).attr({preserveAspectRatio:"none",crossOrigin:"anonymous"}).move(eqImg.x,-eqImg.y)});latextRect.fill(pattern),pattern=null;continue}}var style="font-family:"+fontStyle.fontFamily+";text-align:"+fontStyle.textAlign+";font-size:"+fontStyle.size+"px;vertical-align:"+fontStyle.vAlign+";color:rgb("+fontStyle.color+");";fontStyle.bold?style+="font-weight:700;":style+="font-weight:400;",fontStyle.italic&&(style+="font-style:italic;"),fontStyle.underline&&(style+="text-decoration:underline;"),fontStyle.middleline&&(style+="text-decoration:line-through;"),"horizontal"==fontStyle.orientation?style+="line-height:"+100*fontStyle.lineHeight+"%;width:"+Math.ceil(_h)+"px; -ms-word-wrap: break-word;word-break:break-word;overflow-wrap: break-word;border:0;":style+="line-height:"+100*fontStyle.lineHeight+"%;width:"+Math.ceil(_w)+"px; -ms-word-wrap: break-word;word-break:break-word;overflow-wrap: break-word;border:0;",text=text||"",text=text.replace(/\n/g,"<br>").replace(/<br><div><\/div>/g,"<br>").replace(/(\u001C)|(\t)|()/g," ").replace(/[\u0000-\u001f]/g,""),"undefined"==typeof isNewTextV||isNewTextV||(text=text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),text=text.replace(/&lt;br&gt;/gi,"<br>"),text=text.replace(/&lt;b&gt;/gi,"<b>").replace(/&lt;\/b&gt;/gi,"</b>"),text=text.replace(/&lt;div&gt;/gi,"<div>").replace(/&lt;\/div&gt;/gi,"</div>"),text=text.replace(/&lt;i&gt;/gi,"<i>").replace(/&lt;\/i&gt;/gi,"</i>"),text=text.replace(/&lt;u&gt;/gi,"<u>").replace(/&lt;\/u&gt;/gi,"</u>"),text=text.replace(/&lt;font/gi,"<font").replace(/\"&gt;/gi,'">').replace(/&lt;\/font&gt;/gi,"</font>"),text=text.replace(/&lt;span/gi,"<span").replace(/&lt;\/span&gt;/gi,"</span>"),text=text.replace(/&lt;p/gi,"<p").replace(/&lt;\/p&gt;/gi,"</p>"));var tempDiv=$("<div contenteditable=true style='"+style+";display:inline-block;position: relative;'>"+text+"</div>").appendTo("body"),textH=tempDiv.outerHeight(),top=0;top="middle"==fontStyle.vAlign?(_h-textH)/2:"bottom"==fontStyle.vAlign?_h-textH:0,top+=_y;var deg=0;if("horizontal"==fontStyle.orientation){top=_w/2-textH/2;var textAngle=shape.props.angle;textAngle=(1.5*Math.PI+textAngle)%(2*Math.PI),deg=Math.round(textAngle/(2*Math.PI)*360),top=_x+top,_x=(props.h-_h)/2-props.h}flow2svg.richText2svg(tempDiv,_group,_x,top,deg,shapeStyle.alpha),tempDiv.remove()}}}function renderText1(textBlock,group){for(var i=0;i<textBlock.length;i++){var textObj=textBlock[i],pos=textObj.position,text=textObj.text,style=null,fontStyle=Utils.getShapeFontStyle(shape.fontStyle);fontStyle=$.extend({},fontStyle,textObj.fontStyle);var _w=eval("var w="+props.w+";var h = "+props.h+";"+pos.w),_h=eval("var w="+props.w+";var h = "+props.h+";"+pos.h),_x=eval("var w="+props.w+";var h = "+props.h+";"+pos.x),_y=eval("var w="+props.w+";var h = "+props.h+";"+pos.y);if("horizontal"==fontStyle.orientation){var blockCenter={x:_x+_w/2,y:_y+_h/2};pos={x:blockCenter.x-_h/2,y:blockCenter.y-_w/2,w:_h,h:_w}}var _group=group.group(),fobj=_group.foreignObject(_w,_h);fobj.attr("x",_x),fobj.attr("style","overflow:visible;");var style="font-family:"+fontStyle.fontFamily+";text-align:"+fontStyle.textAlign+";font-size:"+fontStyle.size+"px;vertical-align:"+fontStyle.vAlign+";color:rgb("+fontStyle.color+");";fontStyle.bold?style+="font-weight:700;":style+="font-weight:400;",fontStyle.italic&&(style+="font-style:italic;"),fontStyle.underline&&(style+="text-decoration:underline;"),fontStyle.middleline&&(style+="text-decoration:line-through;"),"horizontal"==fontStyle.orientation?style+="line-height:"+Math.round(1.25*fontStyle.size)+"px;width:"+Math.ceil(_h)+"px;word-break:break-word;border:0;":style+="line-height:"+Math.round(1.25*fontStyle.size)+"px;width:"+Math.ceil(_w)+"px;word-break:break-word;border:0;";var tempDiv=$("<div contenteditable=true style='"+style+";display:inline-block;'></div>").appendTo("body"),text1=(text||"").replace(/<br><br>/g,"<div style='padding-top:"+Math.round(1.25*fontStyle.size)+"px;'></div><div></div>").replace(/&nbsp;/g," ").replace(/<div><br>/g,"<div style='padding-top:"+Math.round(1.25*fontStyle.size)+"px;'>").replace(/<br>/g,"<div></div>");text1=text1.replace(/\n/g,"<div></div>").replace(/\t/g,"&nbsp;").replace(/\  /g,"&nbsp;&nbsp;"),"undefined"==typeof isNewTextV||isNewTextV||(text1=text1.replace(/</g,"&lt;").replace(/>/g,"&gt;"),text1=text1.replace(/&lt;br&gt;/gi,"<br>"),text1=text1.replace(/&lt;b&gt;/gi,"<b>").replace(/&lt;\/b&gt;/gi,"</b>"),text1=text1.replace(/&lt;div&gt;/gi,"<div>").replace(/&lt;\/div&gt;/gi,"</div>"),text1=text1.replace(/&lt;i&gt;/gi,"<i>").replace(/&lt;\/i&gt;/gi,"</i>"),text1=text1.replace(/&lt;u&gt;/gi,"<u>").replace(/&lt;\/u&gt;/gi,"</u>"),text1=text1.replace(/&lt;font/gi,"<font").replace(/\"&gt;/gi,'">').replace(/&lt;\/font&gt;/gi,"</font>"),text1=text1.replace(/&lt;span/gi,"<span").replace(/&lt;\/span&gt;/gi,"</span>"),text1=text1.replace(/&lt;p/gi,"<p").replace(/&lt;\/p&gt;/gi,"</p>")),tempDiv.html(text1);var textH=tempDiv.outerHeight();fobj.attr("height",textH);var top=0;if(top="middle"==fontStyle.vAlign?_h/2-textH/2:"bottom"==fontStyle.vAlign?_h-textH:0,fobj.attr("y",top+_y),tempDiv.remove(),"horizontal"==fontStyle.orientation){top=_w/2-textH/2;var textCenter={x:_x+_w/2,y:top+textH/2},textAngle=shape.props.angle;if(0!=textAngle){var center={x:shape.props.w/2,y:shape.props.h/2};textCenter=Utils.getRotated(center,textCenter,textAngle)}textAngle=(1.5*Math.PI+textAngle)%(2*Math.PI);var deg=Math.round(textAngle/(2*Math.PI)*360),left=textCenter.x+(shape.props.x-shapeBox.x)-pos.w/2,degStr="width:"+Math.ceil(pos.w)+"px;height:"+textH+"px;";fobj.attr({y:_x+top,x:(props.h-_h)/2-props.h,width:pos.w,transform:"rotate("+deg+")"}),style+=degStr}else style+="";fobj.appendChild("div",{innerHTML:text1,style:style})}}function renderDataAttr(e,t){for(var r=0,l=e.length;r<l;r++){var i=e[r],a="",n=null;if("text"==i.showType||"icon"==i.showType){var o=t.group();if("text"==i.showType)a=i.value,"link"==i.type&&(a="<a style='color:#4183C4;' href="+a+" target='_blank'> "+a+" </a>"),1==i.showName&&(a=i.name+":"+a);else if("icon"==i.showType){if(i.icon=i.icon>29&&i.icon<50?parseInt(i.icon)+1:i.icon,a='<i style="display:inline-block;width:21px;height:21px;"></i>',"link"==i.type&&(a="<a href="+i.value+' target="_blank" style="display:inline-block;width:21px;height:21px;"></a>'),1==i.showName&&(a='<span style ="position: relative;top:-7px">'+i.name+": </span>"+a),i.icon>0){var s=staticBasePath+"/assets/images/data_attr/"+i.icon+".png";n=o.image(s,20,20)}i.icon.indexOf("http")>=0&&(n=o.image(i.icon,20,20))}var p,h,c=$("<div contenteditable=true style='display:inline-block;font-size:12px;color:#333;'>"+a+"</div>").appendTo("body"),d=c.outerHeight(),g=c.outerWidth(),f=i.horizontal,y=i.vertical;p="mostleft"==f?-g-2:"leftedge"==f?-g/2:"left"==f?2:"center"==f?(shape.props.w-g)/2:"right"==f?shape.props.w-g-2:"rightedge"==f?shape.props.w-g/2:shape.props.w+2,h="mosttop"==y?-d:"topedge"==y?-d/2:"top"==y?0:"middle"==y?(shape.props.h-d)/2:"bottom"==y?shape.props.h-d:"bottomedge"==y?shape.props.h-d/2:shape.props.h,flow2svg.richText2svg(c,o,p,h,0),n&&n.attr({x:p+g-21,y:h}),n=null,c.remove()}}}function renderDataAttr1(e,t){for(var r=0,l=e.length;r<l;r++){var i=e[r],a="";if("text"==i.showType||"icon"==i.showType){var n=t.group();if("text"==i.showType)a=i.value,"link"==i.type&&(a="<a style='color:#4183C4;' href="+a+" target='_blank'> "+a+" </a>"),1==i.showName&&(a=i.name+":"+a);else if("icon"==i.showType){var o,s;i.icon=i.icon>29?parseInt(i.icon)+1:i.icon,a='<i style="display:inline-block;width:21px;height:21px;background:url(https://www.processon.com/themes/default/images/diagraming/data-attr-icons.png) '+(o=-(i.icon-1)%5*23-3+"px")+" "+(s=23*-Math.floor(i.icon/5)+"px")+'"></i>',"link"==i.type&&(a="<a href="+i.value+' target="_blank" style="display:inline-block;width:21px;height:21px;background:url(https://www.processon.com/themes/default/images/diagraming/data-attr-icons.png) '+o+" "+s+'"></a>'),1==i.showName&&(a='<span style ="position: relative;top:-7px">'+i.name+": </span>"+a)}var p=$("<div contenteditable=true style='display:inline-block;font-size:12px;color:#333;'>"+a+"</div>").appendTo("body"),h=p.outerHeight(),c=p.outerWidth();p.remove();var d,g,f=n.foreignObject(c,h),y=i.horizontal,u=i.vertical;d="mostleft"==y?-c-2:"leftedge"==y?-c/2:"left"==y?2:"center"==y?(shape.props.w-c)/2:"right"==y?shape.props.w-c-2:"rightedge"==y?shape.props.w-c/2:shape.props.w+2,g="mosttop"==u?-h:"topedge"==u?-h/2:"top"==u?0:"middle"==u?(shape.props.h-h)/2:"bottom"==u?shape.props.h-h:"bottomedge"==u?shape.props.h-h/2:shape.props.h,f.attr({x:d,y:g}),f.appendChild("div",{innerHTML:a,style:"font-size : 12px;color:#333;"})}}}function parsePath(action,w,h,height,lineWidth){var path="";if("close"==action.action)return"Z";var ac=action.action.substring(0,1).toUpperCase();path+=ac+" ";var baseStr="var w = "+w+";var h = "+h+";";if(height&&(baseStr+="var height = ["+height+"];"),"curve"==action.action)return path+eval(baseStr+action.x1)+" "+eval(baseStr+action.y1)+" "+eval(baseStr+action.x2)+" "+eval(baseStr+action.y2)+" "+eval(baseStr+action.x)+" "+eval(baseStr+action.y);if("quadraticCurve"==action.action)return path+eval(baseStr+action.x1)+" "+eval(baseStr+action.y1)+" "+eval(baseStr+action.x)+" "+eval(baseStr+action.y);if("rect"==action.action){var rectW=eval(baseStr+action.w),rectH=eval(baseStr+action.h),rectX=eval(baseStr+action.x),rectY=eval(baseStr+action.y);return"M"+rectX+" "+rectY+"L"+(rectX+rectW)+" "+rectY+"L"+(rectX+rectW)+" "+(rectY+rectH)+" L"+rectX+" "+(rectY+rectH)+"Z"}return path+eval(baseStr+action.x)+" "+eval(baseStr+action.y)}},linker2svg:function(e,t,r,l){var i=e.points,a=e.from,n=e.to,o=Utils.getEndpointAngle(e,"from");isNaN(o)&&(o=0);var s=Utils.getEndpointAngle(e,"to"),p=Utils.getLinkerLineStyle(e.lineStyle);c(a,e,p.beginArrowStyle,o),c(n,e,p.endArrowStyle,s),0==p.lineWidth&&(p.lineWidth=1);a=d(a),n=d(n);if(!(e.attribute&&e.attribute.collapseBy||Math.abs(a.y-n.y)<1&&Math.abs(a.x-n.x)<1)){if("broken"==e.linkerType){var h=Utils.copy(Model.intersection)[e.id];h&&(h=Utils.copyArray(h),i=function(e,t,r,l){for(var i=0;i<t.length-1;i++){var a=t[i].x,n=t[i].y,o=t[i+1].x,s=t[i+1].y;Math.abs(n-s)<1&&Math.abs(a-o)<1&&(t[i+1].type="equal",t[i].type="equal")}t.unshift(g(e)),t.push(g(l));for(var i=0;i<t.length-1;i++){var a=t[i].x,n=t[i].y,o=t[i+1].x,s=t[i+1].y;if(Math.abs(n-s)<1)if(t[i].intersectionArr=[],o>a){for(var p=0;p<r.length;p++){var h=r[p].x,c=r[p].y;Math.abs(n-c)<1&&h>a&&h<o&&(r[p].type="intersectionR",t[i].intersectionArr.push(r[p]))}t[i].intersectionArr=y(t[i].intersectionArr,"x")}else{for(var p=0;p<r.length;p++){var h=r[p].x,c=r[p].y;Math.abs(n-c)<1&&h<a&&h>o&&(r[p].type="intersectionL",t[i].intersectionArr.push(r[p]))}t[i].intersectionArr=y(t[i].intersectionArr,"x").reverse()}}for(var d=[],i=0;i<t.length;i++){d.push(t[i]);var f=t[i].intersectionArr;if(null!=f&&f.length>0)for(var p=0;p<f.length;p++)d.push(f[p])}return d.splice(0,1),d.splice(d.length-1,1),d;function y(e,t){for(var r,l=0;l<e.length-1;l++)for(var i=0;i<e.length-1;i++)e[i][t]>e[i+1][t]&&(r=e[i],e[i]=e[i+1],e[i+1]=r);return e}}(e.from,e.points,h.points,e.to))}!function(){var r="",l=t.group();if("curve"==e.linkerType){r+="M"+a.x+" "+a.y+"C";for(var o=0;o<i.length;o++){var s=d(i[o]);r+=" "+s.x+" "+s.y}r+=" "+n.x+" "+n.y}else if("broken"==e.linkerType){var h=Model.intersection[e.id];h&&(a=d(a),n=d(n)),r+="M"+a.x+" "+a.y;for(var o=0;o<i.length;o++){var s=d(i[o]);if("intersectionR"==s.type){var c=s.x,g=s.y;r+="L"+(c-6)+" "+g+"A 3 3, 0, 0, 1,"+(c+6)+" "+g}else if("intersectionL"==s.type){var c=s.x,g=s.y;r+="L"+(c+6)+" "+g+"A 3 3, 0, 0, 0,"+(c-6)+" "+g}else"equal"!=s.type&&(r+="L"+s.x+" "+s.y)}r+="L"+n.x+" "+n.y}else"normal"==e.linkerType&&(r+="M"+a.x+" "+a.y,r+="L"+n.x+" "+n.y);var f=l.path(r),y={width:p.lineWidth,color:"rgb("+p.lineColor+")"};"dashed"==p.lineStyle?y=$.extend(y,{dasharray:"8,5"}):"dot"==p.lineStyle?y=$.extend(y,{dasharray:"3,3"}):"dashdot"==p.lineStyle&&(y=$.extend(y,{dasharray:"10,5,3,5"}));f.stroke(y),f.fill("none"),function(e,r){var l=null;switch(e.beginArrowStyle){case"solidArrow":var i=e.lineWidth,a="M"+2*(i+5)+",0 L0,"+(i+3)+" L"+2*(i+5)+","+2*(i+3)+" L"+2*(i+5)+",0",n=i+2;l=t.marker(2*(i+5),2*(i+3),function(t){t.path(a).fill("rgb("+e.lineColor+")").stroke({width:1,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",n);break;case"normal":l=t.marker(16,20,function(t){t.path("M15,1 L1,10 L15,19").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",0);break;case"dashedArrow":l=t.marker(16,12,function(t){t.path("M1,6 L15,1 L15,11L1,6").fill("#fff").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",0);break;case"solidDiamond":l=t.marker(20,12,function(t){t.path("M2,6 L10,2 L18,6 L10,10L2,6").fill("rgb("+e.lineColor+")").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",0);break;case"dashedDiamond":l=t.marker(20,12,function(t){t.path("M2,6 L10,2 L18,6 L10,10L2,6").fill("#fff").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",0);break;case"solidCircle":l=t.marker(16,16,function(t){t.circle(8).center(8,8).fill("rgb("+e.lineColor+")").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",3);break;case"dashedCircle":l=t.marker(16,16,function(t){t.circle(8).center(8,8).fill("#fff").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",3);break;case"cross":l=t.marker(14,12,function(t){t.path("M14,0 L0,12").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",-1);break;case"asynch1":l=t.marker(20,12,function(t){t.path("M0,8 L15,0").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",0).attr("refY",8);break;case"asynch2":l=t.marker(20,12,function(t){t.path("M0,0 L15,8").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",0).attr("refY",0)}var o=null;switch(e.endArrowStyle){case"solidArrow":var i=e.lineWidth,a="M0,0 L"+2*(i+5)+","+(i+3)+" L0,"+2*(i+3)+" L0,0",n=i+8;o=t.marker(2*(i+5),2*(i+3),function(t){t.path(a).fill("rgb("+e.lineColor+")").stroke({width:1,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",n);break;case"normal":o=t.marker(16,16,function(t){t.path("M0,0 L10,8 L0,16").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",11);break;case"dashedArrow":o=t.marker(14,12,function(t){t.path("M1,1 L14,6 L1,11L1,1").fill("#fff").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",16);break;case"solidDiamond":o=t.marker(20,12,function(t){t.path("M2,6 L10,2 L18,6 L10,10L2,6").fill("rgb("+e.lineColor+")").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",20);break;case"dashedDiamond":o=t.marker(20,12,function(t){t.path("M2,6 L10,2 L18,6 L10,10L2,6").fill("#fff").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",20);break;case"solidCircle":o=t.marker(16,16,function(t){t.circle(8).center(8,8).fill("rgb("+e.lineColor+")").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",13);break;case"dashedCircle":o=t.marker(16,16,function(t){t.circle(8).center(8,8).fill("#fff").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",13);break;case"cross":o=t.marker(14,12,function(t){t.path("M14,0 L0,12").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",15);break;case"asynch1":o=t.marker(20,12,function(t){t.path("M15,0 L0,8").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",16).attr("refY",0);break;case"asynch2":o=t.marker(20,12,function(t){t.path("M15,8 L0,0").fill("none").stroke({width:e.lineWidth,color:"rgb("+e.lineColor+")"})}).attr("markerUnits","userSpaceOnUse").attr("refX",16).attr("refY",8)}null!=l&&(void 0===e.lineStyle&&"solid"===e.lineStyle||l.attr("stroke-dasharray","0,0"),r.attr("marker-start","url(#"+l.node.id+")"));null!=o&&(void 0===e.lineStyle&&"solid"===e.lineStyle||o.attr("stroke-dasharray","0,0"),r.attr("marker-end","url(#"+o.node.id+")"))}(p,f),function(t){for(var r=0;r<e.textBlock.length;r++){var l=e.textBlock[r],i=null,a=Designer.painter.getLinkerPointByLocation(e,l.location);i={x:a.x,y:a.y};var n=$("#"+e.id).children(".linker_text").eq(r),o=Utils.getAngleDir(a.angle);"bottom"==l.pos?"1"==o||"3"==o?i.x+=n.outerWidth()/2+4:i.y+=n.outerHeight()/2+4:"top"==l.pos&&("1"==o||"3"==o?i.x-=n.outerWidth()/2+4:i.y-=n.outerHeight()/2+4);var s=Utils.getLinkerFontStyle(e.fontStyle),p=s.fontFamily,h="display:none;vertical-align: top;text-align:"+s.textAlign+";color:rgb("+s.color+");line-height:"+Math.round(1.25*s.size)+"px;font-size:"+s.size+"px;font-family:"+p+";white-space:nowrap;display:inline-block;background:#fff;";s.bold?h+="font-weight:700;":h+="font-weight:400;",s.italic&&(h+="font-style:italic;"),s.underline&&(h+="text-decoration:underline;"),s.middleline&&(h+="text-decoration:line-through;");var c=l.text.replace(/\n/g,"<br>").replace(/(\u001C)|(\t)|()/g," ").replace(/[\u0000-\u001f]/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;br&gt;/gi,"<br>").replace(/&lt;div&gt;/gi,"<div>").replace(/&lt;\/div&gt;/gi,"</div>"),d=$("<div contenteditable=true style='"+h+";display:inline-block;'></div>").appendTo("body");d.html(c);var g=d.width(),f=d.outerHeight();d.css("width",g);var y=t.rect();y.attr({width:g,height:f,x:i.x-g/2,y:i.y-f/2,fill:"#fff"}),flow2svg.richText2svg(d,t,i.x-g/2,i.y-f/2,0),d.remove()}}(l)}()}function c(e,t,r,l){if(e.id){var i=Model.getShapeById(e.id);if(i){var a={x:0,y:0},n=Utils.getShapeLineStyle(i.lineStyle),o=Utils.getLinkerLineStyle(t.lineStyle);a.x="none"==r||"cross"==r?-n.lineWidth/2:"solidArrow"==r||"dashedArrow"==r?-n.lineWidth/2-1.3*o.lineWidth:"solidDiamond"==r||"dashedDiamond"==r?-n.lineWidth/2-o.lineWidth:-n.lineWidth/2-o.lineWidth/2;var s=Utils.getRotated({x:0,y:0},a,l);e.x+=s.x,e.y+=s.y}}}function d(e){return e.x=e.x-r.minX-15,e.y=e.y-r.minY-15,e}function g(e){return e.x=e.x+r.minX+15,e.y=e.y+r.minY+15,e}},calcCanvasSize:function(e){var t=null,r=null,l=null,i=null,a=Model.define.elements;$(".shape_box").each(function(){if(!e||e.includes(this.id)){var n=$(this),o=Utils.restoreScale(n.position());if(n.hasClass("linker_box")){var s=n.attr("id"),p=a[s].from.x,h=a[s].from.y,c=a[s].to.x,d=a[s].to.y;if(Math.abs(p-c)<1&&Math.abs(h-d)<1)return!0}var g=o.left+n.width(),f=o.top+n.height();if(n.children(".linker_text").length>0){var y=n.children(".linker_text").position().left.restoreScale(),u=o.left+y+n.children(".linker_text").width();y<0&&(o.left=o.left+y),u>g&&(g=u)}if(n.children(".text_canvas").length>0){var x=n.children(".text_canvas"),m=Utils.restoreScale(x.position()),v=x.height(),b=n.height();m.top<0&&(o.top=o.top+m.top),m.top+v>b&&(f=o.top+m.top+v)}var w=0,S=0;n.find(".attr_canvas").each(function(){var e=$(this),t=Utils.restoreScale(e.position()),r=t.left+e.width()-n.width();t.left<0?(0==w||t.left<w)&&(w=t.left):(0==S||r>S)&&(S=r)}),(null==t||o.left+w<t)&&(t=o.left+w),(null==r||o.top<r)&&(r=o.top),(null==l||g+S>l)&&(l=g+S),(null==i||f>i)&&(i=f)}});$("#designer_canvas");return null==t&&(t=0,r=0,l=0,i=0),{w:l-(t-=30),h:i-(r-=30),minX:t,minY:r}},richText2svg:function(e,t,r,l,i,a){var n=e[0].style,o={anchor:"center"==n.textAlign?"middle":"right"==n.textAlign?"end":"start",family:n.fontFamily,size:n.fontSize,width:n.width?n.width:0,fill:n.color,weight:n.fontWeight,align:n.verticalAlign,lineHeight:n.lineHeight},s={boxW:parseInt(o.width),boxX:r||0,boxY:l||0,deg:i||0,alpha:a||1};e.find("font").each(function(){var e=$(this).attr("color");void 0!==e&&$(this).css("fill",-1==e.indexOf("#")&&-1==e.indexOf("rgb")?"#"+e:e)}),e.find("b").css("font-weight","bold"),e.find("i").css("font-style","italic"),e.find("u").css("text-decoration","underline"),e.find("strike").css("text-decoration","line-through"),e.find("strong").css("font-weight","bold"),e.find("em").css("font-style","italic"),e.find("sup").css({"font-size":parseInt(o.size)/6*5,"vertical-align":"super"}),e.find("sub").css({"font-size":parseInt(o.size)/6*5,"vertical-align":"sub"});var p=[];!function e(t){for(var r=0,l=t.length;r<l;r++){if("#text"==t[r].nodeName)for(var i=0;i<t[r].data.length;i++){if("DIV"==t[r].parentNode.nodeName)var a={text:t[r].data[i],style:""};else a={text:t[r].data[i],style:t[r].parentNode.getAttribute("style").replace(/<br>/g,"").replace(/color/g,"fill").replace(/font-size:\s*inherit;/g,"")};p.push(a)}else"BR"==t[r].nodeName?(r>0&&"DIV"==t[r-1].nodeName&&(a={text:"</br>",style:""},p.push(a)),a={text:"</br>",style:""},p.push(a)):"DIV"==t[r].nodeName?p.length>0&&"</br>"!=p[p.length-1].text&&" "!=p[p.length-1].text&&(a={text:"</br>",style:""},p.push(a)):"DIV"==t[r].parentNode.nodeName?"function"==typeof t[r].getAttribute&&t[r].setAttribute("style",t[r].getAttribute("style")):"#comment"!==t[r].nodeName&&t[r].setAttribute("style",t[r].parentNode.getAttribute("style")+t[r].getAttribute("style"));e(t[r].childNodes)}}(e[0].childNodes),e.empty();for(var h=[],c=0;c<p.length;c++){var d="";d="</br>"==p[c].text?p[c].text:'<span style="'+p[c].style+'">'+p[c].text+"</span>",$(d).appendTo(e)}if(e.children().each(function(e){"</br>"==p[e].text?void 0!==p[e-1]&&"</br>"!=p[e-1].text||(p[e].dy=null,h.push(p[e])):(p[e].dy=$(this)[0].offsetTop,p[e].dx=$(this)[0].offsetLeft,p[e].w=$(this).width(),p[e].h=$(this).height(),0!=h.length&&h[h.length-1].style==p[e].style&&h[h.length-1].dy==p[e].dy&&0!==h.dy?(h[h.length-1].text+=p[e].text,h[h.length-1].w+=p[e].w):h.push(p[e]))}),"svg"!=flow2svg.type&&"pdfhd"!=flow2svg.type)for(c=0;c<h.length;c++){var g=h[c];if(g.style.indexOf("underline")>-1||"underline"==n.textDecoration){var f=(x=g.style.match(/fill:(.*?);/))?x[1]:o.fill,y=(m=g.dx+s.boxX)+g.w,u=v=s.boxY+g.dy+g.h-(g.h-parseInt(o.size))/2;t.line(m,v,y,u).stroke({width:Math.round(parseInt(o.size)/20),color:f})}if(g.style.indexOf("line-through")>-1||"line-through"==n.textDecoration){var x,m,v;f=(x=g.style.match(/fill:(.*?);/))?x[1]:o.fill,y=(m=g.dx+s.boxX)+g.w,u=v=s.boxY+g.dy+g.h/2;t.line(m,v,y,u).stroke({width:Math.round(parseInt(o.size)/20),color:f})}}var b=[],w=null;for(c=0;c<h.length;c++){var S=h[c];null!=S.dy&&null!=w&&S.dx+3>=w?(b[b.length-1].texts.push(S),w=S.dx+S.w):(b.push({texts:[S],dy:S.dy}),w=null==S.dy?null:S.dx+S.w)}var k;k="middle"==o.anchor?s.boxX+s.boxW/2:"end"==o.anchor?s.boxX+s.boxW:s.boxX;var _=1.25;o.lineHeight&&o.lineHeight.indexOf("%")>-1&&(_=parseInt(o.lineHeight)/100);var C=t.text(function(e){for(var t=0,r=parseInt(o.size)/3.3,l=0,i=0;i<b.length;i++)e.tspan(function(e){for(var a=0,s=0,p=b[i].texts,h=0;h<p.length;h++){p[h].text="</br>"==p[h].text?" ":p[h].text,n.textDecoration&&(p[h].style="text-decoration:"+n.textDecoration+";"+p[h].style);var c=e.tspan(p[h].text).attr("style",p[h].style);-1!==p[h].style.indexOf("super")?(0===h?(0===i&&(l=parseInt(o.size)*_+r),c.dy(-r-t+l)):c.dy(-r-t),t=-r,a=r):-1!==p[h].style.indexOf("sub")?(0===h?(0===i&&(l=parseInt(o.size)*_+r),c.dy(r-t+l)):c.dy(r-t),t=r,s=r):0!==t&&(0!==h&&c.dy(0-t),t=0)}l=parseInt(o.size)*_+a+s}).dy(l).attr({x:k})}),M=parseInt(o.size),A=M>=64?8:M>=40?5:M>=32?4:M>=20?3:M>=16?2:1;C.font(o).attr("font-style",n.fontStyle),C.attr("opacity",s.alpha),C.attr({y:s.boxY-parseInt(o.size)*((_-1)/2)-A,transform:"rotate("+s.deg+")"})},setPageColor:function(e,t){"jpg"!=this.type||null!=e&&"transparent"!=e?null!=e&&"transparent"!=e?e=e.indexOf("rgb")>-1?e:"rgb("+e+")":"transparent"!=e&&(e="rgb(255,255,255)"):e="rgb(255,255,255)",t=t||this.draw;var r=$("#svgbackgroundid");r.length>0?r.attr("fill",e):t.rect(this.canvasSize.w,this.canvasSize.h).fill(e).attr("id","svgbackgroundid");var l=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:this.canvasSize.w,h:this.canvasSize.h,x:this.canvasSize.minX,y:this.canvasSize.minY,content:l}},setWatermark:function(e,t,r){var l=this.pageColor;"transparent"==l&&(l="255,255,255"),t=t||this.canvasSize,this.draw=r||this.draw,r=this.draw;var i=this.getDarkerColor(l),a=$(this.dom+">svg").find("defs")[0],n="http://www.w3.org/2000/svg",o=[];"string"==typeof e&&(o=[e]),"object"==_typeof(e)&&(o=e);for(var s=0;s<10;s++){var p=$("#pattern_mark_"+s);if(s>o.length-1){if(p.length){p.find("text").html("");continue}break}if(p.length)p.find("text").html(o[s]);else{var h=document.createElementNS(n,"pattern");h.setAttributeNS(null,"patternUnits","userSpaceOnUse"),h.setAttributeNS(null,"id","pattern_mark_"+s),h.setAttributeNS(null,"width","300"),h.setAttributeNS(null,"height","300"),a.appendChild(h),(e=document.createElementNS(n,"text")).style.dominantBaseline="middle",e.style.textAnchor="middle",e.setAttributeNS(null,"x","150"),e.setAttributeNS(null,"y",100*s+100),e.setAttributeNS(null,"fill","rgba("+i+",0.8)"),e.setAttributeNS(null,"font-size","18"),e.setAttributeNS(null,"transform","rotate(-45, 150, 150)"),e.textContent=$("<span/>").html(o[s]).text(),h.appendChild(e),r.rect(t.w,t.h).fill("url(#pattern_mark_"+s+")")}}var c=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:t.w,h:t.h,x:t.minX,y:t.minY,content:c}},drawBrand:function(e,t,r){t=t||this.canvasSize;var l=$("#normal_brand tspan");if(l.length){l.text(e);var i=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:t.w,h:t.h,x:t.minX,y:t.minY,content:i}}this.draw=r||this.draw,r=this.draw;var a=t.w,n=t.h,o=this.pageColor,s=this.getBrandColor(o),p=0,h=0,c=0;a<700?(p=26,16,h=(a-130)/2,c=(n+48)/2):a<1200?(p=48,28,h=(a-250)/2,c=(n+76)/2,"3px"):(p=72,36,h=(a-370)/2,c=(n+110)/2,"4px");var d=r.group().attr("transform","translate("+h+","+c+")").attr("id","normal_brand");(e=d.text(function(t){t.tspan(e).attr({"font-size":p,dy:0,x:0})})).attr("style","transform:rotate(-30deg);opacity: 0.06; color:"+s+"; font-family: Microsoft Yahei;");i=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:t.w,h:t.h,x:t.minX,y:t.minY,content:i}},getBrandColor:function(e){var t="";function r(e){return e=(e=e.replace("rgb(","")).replace(")","")}function l(e,t){var r=["#000","#fff"];return e<200||e>270?t<=30?r[1]:r[0]:t<=50?r[1]:r[0]}null!=e&&(e.indexOf("#")>=0&&e.indexOf("null")<0?t=r(e=function(e){if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var t="#",r=1;r<4;r+=1)t+=e.slice(r,r+1).concat(e.slice(r,r+1));e=t}for(var l=[],r=1;r<7;r+=2)l.push(parseInt("0x"+e.slice(r,r+2)));return"rgb("+l.join(",")+")"}return e}(e)):null!=e&&e.indexOf("null")<0&&e.toLowerCase().indexOf("rgb(")>=0&&(t=r(e)));var i=function(e,t,r){e/=255,t/=255,r/=255;var l,i,a=Math.max(e,t,r),n=Math.min(e,t,r),o=(a+n)/2;if(a==n)l=i=0;else{var s=a-n;switch(i=o>.5?s/(2-a-n):s/(a+n),a){case e:l=(t-r)/s+(t<r?6:0);break;case t:l=(r-e)/s+2;break;case r:l=(e-t)/s+4}l/=6}return[Math.floor(100*l),Math.round(100*i),Math.round(100*o)]}(t.split(","));return l(i[0],i[2])},getDarkerColor:function(e,t){t||(t=26);var r=e.split(","),l=parseInt(r[0]),i=parseInt(r[1]),a=parseInt(r[2]),n=Math.round(l-l/255*t);n<0&&(n=0);var o=Math.round(i-i/255*t);o<0&&(o=0);var s=Math.round(a-a/255*t);return s<0&&(s=0),n+","+o+","+s}};window.flow2svg=flow2svg;var _default=exports.default=flow2svg;
},{"../svgUtil":"hQvI"}],"RC3o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MindSvgColor=exports.MindSvg=void 0;var F=exports.MindSvg={0:'d="M508.295791 3.713113C227.559513 3.713113 0 231.27262601 0 512s227.568417 508.286887 508.295791 508.286887c280.71847001 0 508.286887-227.568417 508.28688699-508.286887S789.014261 3.713113 508.295791 3.713113zM564.57126999 785.114157l-66.52438299 0L498.046887 361.22267799c-16.01892199 15.279861-37.02427801 30.550817-63.01607 45.82177401-25.991791 15.279861-49.338991 26.730852-70.032696 34.370783l0-64.3072c37.202365-17.488139 69.721043-38.680487 97.564939-63.568139 27.834991-24.878748 47.549217-49.027339 59.13377399-72.43686999l42.86553001-2e-8L564.562365 785.114157z"',1:'d="M512.036126 4.262904c-280.448474 0-507.75516 227.342812-507.75516 507.773223 0 280.412348 227.306685 507.75516 507.75516 507.75516 280.430411 0 507.737096-227.342812 507.737096-507.75516C1019.773223 231.623778 792.466537 4.262904 512.036126 4.262904zM654.608573 756.520868 360.630799 756.520868l0-11.650732c1.896631-29.099735 15.498183-55.309367 40.750467-78.592768 25.216158-23.283401 57.224061-59.680649 96.059834-109.155618 38.781584-49.493032 64.015805-87.786911 75.666537-114.990016 11.650732-27.148915 16.022014-50.432316 13.113847-69.850203-2.908167-19.38176-12.1565-35.385712-27.654683-48.029917-15.552373-12.590016-33.489081-17.918645-53.846252-16.003951-20.375234 1.95082-39.79312 9.736038-58.217534 23.283401-18.46054 13.601552-32.513671 33.976786-42.213583 61.125701l-55.309367-8.724502c15.498183-44.615982 35.385712-77.147716 59.680649-97.504886 24.240748-20.375234 52.852778-31.520198 85.872217-33.471018 19.363697-1.914694 36.830764-1.463115 52.383136 1.463115 15.498183 2.908167 31.520198 9.736038 48.029917 20.375234 16.45553 10.693385 30.057082 26.697336 40.750467 48.029917 10.639196 21.38677 14.558899 47.07257 11.650732 77.147716-2.908167 30.111272-17.972835 65.984689-45.12175 107.692503-27.203105 41.762004-79.586241 107.240924-157.185535 196.454824L654.608573 704.119668 654.608573 756.520868z"',2:'d="M512.036126 4.262904c-280.448474 0-507.75516 227.342812-507.75516 507.75516 0 280.412348 227.306685 507.75516 507.75516 507.75516 280.430411 0 507.737096-227.342812 507.737096-507.75516C1019.773223 231.623778 792.466537 4.262904 512.036126 4.262904zM653.163521 638.604622c-4.877051 37.860363-21.838349 68.405151-50.938084 91.688552s-62.119174 34.464491-98.949938 33.489081c-36.884953-0.957347-68.892856-12.590016-96.059834-34.934133-27.185041-22.289928-44.670171-54.803599-52.383136-97.504886l52.383136-8.724502c7.749092 25.234221 20.375234 46.133286 37.8423 62.570753 17.48513 16.50972 39.305415 24.313001 65.496984 23.283401 26.191568-0.957347 47.018381-11.650732 62.570753-31.989839 15.498183-20.393297 22.271865-43.676698 20.375234-69.850203-1.95082-26.209631-12.138437-46.584865-30.562851-61.143764-18.442477-14.558899-48.011854-24.746516-88.762321-30.562851l0-37.8423c40.750467-3.865514 70.301782-14.558899 88.762321-32.025966 18.442477-17.467067 26.66121-40.244699 24.746516-68.405151-1.95082-28.106262-14.558899-48.481496-37.8423-61.125701-23.283401-12.590016-48.029917-14.053131-74.221485-4.371282-26.191568 9.736038-47.054507 36.884953-62.588816 81.500935l-52.383136-8.724502c11.650732-34.934133 27.654683-64.033868 48.029917-87.317269s48.029917-36.848827 82.96405-40.750467c34.91607-3.865514 65.47892 0.487705 91.688552 13.095784 26.191568 12.644205 44.615982 32.007903 55.309367 58.217534 10.639196 26.209631 12.102311 54.857788 4.353219 85.872217-7.785218 31.068619-30.111272 58.217534-66.942036 81.500935 27.148915 11.650732 48.029917 29.099735 62.588816 52.383136C653.163521 570.199471 657.986382 600.798448 653.163521 638.604622z"',3:['d="M558.566802 596.409102 558.566802 366.465197 395.564932 596.409102Z"','d="M512.036126 4.262904c-280.448474 0-507.75516 227.324749-507.75516 507.773223 0 280.412348 227.306685 507.75516 507.75516 507.75516 280.430411 0 507.737096-227.342812 507.737096-507.75516C1019.773223 231.587652 792.466537 4.262904 512.036126 4.262904zM683.726371 645.902134l-69.850203 0 0 110.60067-55.309367 0 0-110.60067L334.439231 645.902134l0-49.493032 235.76024-340.544576 43.658635 0 0 340.544576 69.850203 0L683.708308 645.902134z"'],4:'d="M512.036126 4.262904c-280.448474 0-507.75516 227.360875-507.75516 507.773223 0 280.448474 227.306685 507.75516 507.75516 507.75516 280.430411 0 507.737096-227.306685 507.737096-507.75516C1019.773223 231.623778 792.466537 4.262904 512.036126 4.262904zM656.071688 599.371459c-1.011536 21.38677-5.364756 43.225119-13.113847 65.47892-7.785218 22.326054-19.417887 40.750467-34.934133 55.32743-15.552373 14.540836-34.464491 26.173505-56.772482 34.934133-22.326054 8.706439-48.011854 12.138437-77.111589 10.187617-29.117799-1.896631-56.772482-12.590016-82.96405-32.025966-26.191568-19.363697-44.164403-52.383136-53.846252-98.968001l52.383136-14.576962c13.565426 52.419263 36.848827 81.537061 69.868266 87.353396 32.96525 5.816334 59.662586 2.438525 80.019757-10.187617 20.375234-12.590016 34.952196-29.099735 43.676698-49.493032 8.724502-20.357171 12.590016-43.152866 11.650732-68.405151-1.011536-25.198095-7.785218-46.566802-20.375234-64.015805-12.644205-17.467067-28.66622-29.099735-48.029917-34.934133-19.417887-5.816334-41.256236-5.816334-65.47892 0-24.294937 5.816334-44.14634 19.417887-59.680649 40.750467l-49.474969-5.816334c3.865514-11.650732 22.271865-95.066361 55.309367-250.319139l229.943905 0 0 52.383136L450.874299 317.044417c-9.736038 52.383136-19.417887 94.14514-29.117799 125.177633 29.117799-13.565426 56.266714-19.887529 81.518998-18.930182 25.180032 1.011536 49.474969 6.827871 72.75837 17.467067 23.283401 10.693385 40.262762 25.234221 50.938084 43.658635 10.639196 18.46054 18.424413 36.884953 23.283401 55.32743C655.078215 558.151349 657.029035 578.020815 656.071688 599.371459z"',5:['d="M580.441277 506.201729c-24.294937-15.516246-51.461916-21.332581-81.500935-17.467067-30.111272 3.901641-51.931558 18.46054-65.496984 43.658635-13.583489 25.234221-19.399824 51.931558-17.467067 80.055883 1.914694 28.160452 11.650732 51.443853 29.099735 69.850203 17.48513 18.46054 40.768531 28.648157 69.868266 30.544787 29.099735 1.968883 53.340483-7.731028 72.75837-29.099735 19.363697-21.314518 29.099735-52.383136 29.099735-93.133604S604.682025 521.754101 580.441277 506.201729z"','d="M512.054189 4.262904c-280.430411 0-507.773223 227.342812-507.773223 507.773223 0 280.430411 227.342812 507.75516 507.773223 507.75516 280.412348 0 507.719033-227.324749 507.719033-507.75516C1019.773223 231.605715 792.466537 4.262904 512.054189 4.262904zM667.758546 663.405327c-8.724502 25.216158-24.294937 48.011854-46.566802 68.405151-22.326054 20.357171-53.394673 31.538261-93.151667 33.471018-39.79312 1.95082-73.751843-5.310566-101.858105-21.820286-28.160452-16.473593-47.578338-39.756994-58.217534-69.868266-10.693385-30.057082-15.064667-59.174881-13.113847-87.335333 1.896631-28.088199 7.27945-51.877368 16.022014-71.295255 8.724502-19.38176 21.820286-43.658635 39.287352-72.776433l119.343235-186.285271 66.942036 0-122.233339 192.101605c52.383136-13.547363 94.072888-11.650732 125.141506 5.816334 31.032493 17.467067 51.895431 37.390721 62.588816 59.680649 10.639196 22.344117 16.45553 46.584865 17.467067 72.75837C680.348562 612.44918 676.483048 638.189169 667.758546 663.405327z"'],6:'d="M512.054189 4.262904c-280.430411 0-507.773223 227.342812-507.773223 507.75516 0 280.448474 227.342812 507.773223 507.773223 507.773223 280.412348 0 507.719033-227.324749 507.719033-507.773223C1019.773223 231.605715 792.466537 4.262904 512.054189 4.262904zM669.203599 314.08206c-91.236973 147.503687-151.333075 295.007373-180.450873 442.456871l-64.051932 0c34.952196-147.449497 96.059834-293.995837 183.377104-439.53064L357.758758 317.008291l0-52.383136 311.44484 0L669.203599 314.08206z"',7:['d="M512.054189 4.262904c-280.430411 0-507.773223 227.306685-507.773223 507.773223 0 280.394285 227.342812 507.75516 507.773223 507.75516 280.412348 0 507.719033-227.360875 507.719033-507.75516C1019.773223 231.587652 792.466537 4.262904 512.054189 4.262904zM647.383313 683.744435c-8.724502 17.467067-18.46054 32.025966-29.099735 43.676698-10.693385 11.650732-25.234221 20.862939-43.658635 27.63662-18.46054 6.827871-41.762004 10.169554-69.868266 10.169554-28.160452 0-52.383136-3.359746-72.75837-10.169554-20.375234-6.773681-37.372658-16.961298-50.938084-30.562851-13.601552-13.547363-22.831822-29.569377-27.63662-48.011854-4.877051-18.424413-7.27945-39.305415-7.27945-62.588816s5.816334-46.079097 17.467067-68.405151c11.650732-22.289928 31.032493-40.262762 58.217534-53.846252-23.283401-13.547363-38.81771-28.61203-46.566802-45.12175-7.785218-16.45553-12.138437-35.385712-13.095784-56.754419-1.011536-21.332581 1.896631-39.756994 8.724502-55.309367 6.773681-15.498183 16.943235-30.057082 30.544787-43.658635 13.565426-13.547363 28.61203-22.777633 45.12175-27.654683 16.45553-4.822861 34.428365-7.27945 53.846252-7.27945 19.363697 0 36.830764 1.95082 52.383136 5.816334 15.498183 3.901641 32.007903 12.138437 49.474969 24.746516 17.467067 12.644205 30.057082 30.562851 37.8423 53.846252 7.749092 23.301464 7.27945 50.486506-1.445052 81.500935-8.724502 31.068619-31.574387 55.309367-68.405151 72.776433 32.96525 9.736038 56.248651 24.746516 69.850203 45.12175 13.565426 20.375234 20.375234 45.12175 20.375234 74.221485S656.107814 666.277368 647.383313 683.744435z"','d="M500.403457 465.433198c29.099735 0 50.920021-8.724502 65.47892-26.191568 14.576962-17.467067 21.350644-38.293879 20.393297-62.570753-1.011536-24.240748-9.736038-42.213583-26.209631-53.846252-16.491656-11.650732-38.81771-16.45553-66.942036-14.558899-28.160452 1.95082-48.029917 10.187617-59.680649 24.746516s-17.467067 31.574387-17.467067 50.938084c0 19.417887 6.791745 37.8423 20.375234 55.309367C449.916952 456.690633 471.285659 465.433198 500.403457 465.433198z"','d="M564.419263 545.471018c-21.38677-14.558899-44.652108-20.826812-69.850203-18.930182-25.234221 1.95082-46.133286 10.693385-62.588816 26.191568-16.50972 15.552373-25.234221 34.934133-26.191568 58.235597-1.011536 23.283401 2.908167 43.658635 11.650732 61.125701s24.728453 28.648157 48.029917 33.489081c23.283401 4.877051 47.524149 4.353219 72.75837-1.463115 25.198095-5.816334 42.647098-19.363697 52.383136-40.750467 9.681849-21.332581 13.113847-42.665161 10.187617-64.033868C597.908344 578.002752 585.751843 560.029917 564.419263 545.471018z"'],8:['d="M557.139813 331.549127c-16.491656-13.547363-34.464491-20.375234-53.828188-20.375234-11.650732-1.896631-26.7154 1.011536-45.12175 8.724502-18.46054 7.785218-33.019439 23.283401-43.658635 46.566802-10.693385 23.283401-14.558899 47.578338-11.650732 72.776433 2.908167 25.234221 13.547363 46.115223 32.007903 62.570753 18.424413 16.50972 38.293879 23.807232 59.680649 21.838349 21.332581-1.896631 38.293879-7.731028 50.920021-17.467067 12.608079-9.681849 24.746516-26.191568 36.397248-49.474969 7.731028-29.099735 9.681849-53.846252 5.816334-74.221485C583.78296 362.111977 573.613406 345.150679 557.139813 331.549127z"','d="M512.054189 4.280967c-280.430411 0-507.773223 227.360875-507.773223 507.773223 0 280.412348 227.342812 507.719033 507.773223 507.719033 280.412348 0 507.719033-227.306685 507.719033-507.719033C1019.773223 231.641842 792.466537 4.280967 512.054189 4.280967zM625.544964 512.018063c-19.417887 40.750467-66.942036 125.141506-142.608573 253.24537L418.884459 765.263433c42.665161-71.801023 77.599294-136.810302 104.802399-195.027836-48.535685 7.767155-88.780385 1.445052-120.80635-18.912119-32.007903-20.393297-51.443853-48.04798-58.217534-82.96405-6.827871-34.934133-6.340166-66.454331 1.445052-94.596719 7.731028-28.124325 19.887529-51.407726 36.397248-69.850203 16.45553-18.442477 36.379185-31.520198 59.662586-39.305415 23.301464-7.731028 44.110213-11.650732 62.588816-11.650732 18.424413 0 37.336532 3.919704 56.754419 11.650732 19.363697 7.785218 36.830764 19.417887 52.383136 34.934133 15.498183 15.552373 26.191568 31.556324 32.007903 48.029917 5.816334 16.50972 8.724502 37.8423 8.724502 64.033868S644.926724 471.267596 625.544964 512.018063z"'],9:'d="M512 960.248024c-247.548002 0-448.248024-200.701045-448.248024-448.248024 0-247.567445 200.701045-448.248024 448.248024-448.248024 247.567445 0 448.248024 200.680579 448.248024 448.248024C960.248024 759.546979 759.567445 960.248024 512 960.248024L512 960.248024zM512.019443 100.034321c-227.490178 0-411.916561 184.41615-411.916561 411.92577 0 227.469712 184.426383 411.92577 411.916561 411.92577 227.508597 0 411.945213-184.455035 411.945213-411.92577C923.964656 284.451494 739.529063 100.034321 512.019443 100.034321L512.019443 100.034321zM305.999253 645.832078l0 19.86442c0 0 103.199407 67.023486 209.68772 67.023486 105.535615 0 202.150046-69.339228 202.150046-69.339228L717.837019 645.832078c0 0-97.41261 55.331189-202.150046 55.331189C408.430156 701.162244 305.999253 645.832078 305.999253 645.832078L305.999253 645.832078zM648.566352 450.637444c-37.121456 0-67.217914-29.075199-67.217914-64.922638 0-35.855626 30.097482-64.941058 67.217914-64.941058 37.139875 0 67.227124 29.085432 67.227124 64.941058C715.783243 421.562245 685.695994 450.637444 648.566352 450.637444L648.566352 450.637444zM381.786333 450.637444c-37.130665 0-67.237357-29.075199-67.237357-64.922638 0-35.855626 30.106692-64.941058 67.237357-64.941058 37.120432 0 67.216891 29.085432 67.216891 64.941058C449.004247 421.562245 418.906765 450.637444 381.786333 450.637444L381.786333 450.637444zM381.786333 450.637444"',10:'d="M511.962138 28.606525c-266.832208 0-483.140719 216.309534-483.140719 483.140719s216.309534 483.140719 483.140719 483.140719 483.140719-216.309534 483.140719-483.140719S778.794345 28.606525 511.962138 28.606525zM511.962138 954.62598c-244.594741 0-442.87976-198.283995-442.87976-442.87976S267.366374 68.866461 511.962138 68.866461s442.87976 198.283995 442.87976 442.87976S756.557902 954.62598 511.962138 954.62598zM262.842337 527.096836c0.164752-40.668235 19.918655-73.529667 44.262086-73.529667 24.445762 0 44.26311 33.138748 44.26311 74.016761s-19.816325 74.016761-44.26311 74.016761c-24.343431 0-44.096311-32.861432-44.262086-73.503061L262.842337 527.096836zM670.492734 527.096836c0.164752-40.668235 19.918655-73.529667 44.262086-73.529667 24.445762 0 44.26311 33.138748 44.26311 74.016761s-19.816325 74.016761-44.26311 74.016761c-24.343431 0-44.096311-32.861432-44.262086-73.503061L670.492734 527.096836zM447.040523 734.697011c0.781806-12.010545 28.880771-21.643949 63.427588-21.643949 35.039028 0 63.442938 9.908674 63.442938 22.131043s-28.40391 22.131043-63.442938 22.131043c-34.546817 0-62.644759-9.632381-63.425541-21.618367L447.040523 734.697011z"',11:'d="M512 966.889281c-251.235998 0-454.889281-203.674773-454.889281-454.889281 0-251.235998 203.654306-454.889281 454.889281-454.889281 251.226788 0 454.889281 203.654306 454.889281 454.889281C966.889281 763.215532 763.216555 966.889281 512 966.889281L512 966.889281zM512.020466 91.552136c-232.184083 0-420.397722 188.205453-420.397722 420.387489 0 232.184083 188.213639 420.397722 420.397722 420.397722 232.17385 0 420.397722-188.213639 420.397722-420.397722C932.418188 279.757588 744.193293 91.552136 512.020466 91.552136L512.020466 91.552136zM302.936497 706.335057l0-33.04972c0 0 104.738459-61.975517 212.795501-61.975517 107.098203 0 205.14424 61.975517 205.14424 61.975517l0 33.04972c0 0-98.845239-61.95505-205.14424-61.95505-108.84601 0-212.795501 64.324004-212.795501 64.324004L302.936497 706.335057zM638.417201 494.742964c-34.295084 0-62.093197-46.218648-62.093197-103.198383 0-56.999179 27.799136-103.219873 62.093197-103.219873s62.072731 46.219671 62.072731 103.219873C700.490955 448.524317 672.702052 494.742964 638.417201 494.742964L638.417201 494.742964zM392.009162 494.742964c-34.295084 0-62.082964-46.218648-62.082964-103.198383 0-56.999179 27.788903-103.219873 62.082964-103.219873 34.284851 0 62.082964 46.219671 62.082964 103.219873C454.092126 448.524317 426.294013 494.742964 392.009162 494.742964L392.009162 494.742964zM392.009162 494.742964"',17:'d="M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64M512 512 512 100.693333c-227.157333-0.298667-411.562667 183.594667-411.861333 410.752-0.298667 227.157333 183.594667 411.562667 410.752 411.904 227.157333 0.256 411.52-183.637333 411.861333-410.752C922.922667 403.413333 879.658667 298.666667 802.602667 221.44L512 512z"',18:'d="M512 44.00000001c247.424 0 448 200.576 448 447.99999999S759.424 940 512 940 64 739.42400001 64 492 264.576 44.00000001 512 44.00000001M512 492L512 80.69333301c-227.157333 0-411.306667 184.149333-411.306667 411.30666699s184.149333 411.349333 411.306667 411.349333 411.349333-184.149333 411.349333-411.349333l0 0L512 492z"',19:'d="M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64M512 512 512 100.693333c-227.157333-0.298667-411.562667 183.594667-411.861333 410.752-0.298667 227.157333 183.594667 411.562667 410.752 411.904 109.44 0.128 214.357333-43.349333 291.669333-120.746667L512 512z"',20:'d="M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64M512 512 512 100.693333c-227.157333-0.042667-411.349333 184.021333-411.434667 411.178667-0.042667 227.157333 184.021333 411.392 411.178667 411.477333 0.085333 0 0.170667 0 0.256 0L512 512z"',21:'d="M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64M512 512 512 100.693333c-227.157333 0.298667-411.050667 184.704-410.752 411.861333 0.128 108.757333 43.349333 213.034667 120.192 290.005333L512 512z"',22:'d="M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64M512 512 512 100.693333c-227.157333 0-411.306667 184.149333-411.306667 411.306667L512 512z"',23:'d="M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64M512 512 512 100.693333C402.986667 100.821333 298.453333 144.256 221.44 221.44L512 512z"',24:'d="M512.466048 65.278976c-246.434816 0-446.211072 199.771136-446.211072 446.200832 0 246.424576 199.776256 446.216192 446.211072 446.216192 246.429696 0 446.205952-199.791616 446.205952-446.216192C956.672 265.051136 756.895744 65.278976 510.466048 65.278976zM798.789632 420.78208 478.706688 740.810752c-6.529024 6.57408-17.169408 6.57408-23.663616 0l-47.312896-47.75936c-6.490112-6.554624-17.164288-17.272832-23.653376-23.886848l-110.068736-115.68128c-3.227648-3.28704-4.953088-7.82336-4.953088-12.151808 0-4.303872 1.72544-8.428544 4.953088-11.73504l48.234496-43.470848c3.262464-3.326976 7.629824-4.953088 11.938816-4.932608 4.248576 0.039936 8.482816 1.680384 11.715584 4.932608l109.147136 111.397888c6.495232 6.608896 17.134592 6.608896 23.663616 0l249.137152-248.42752c6.495232-6.549504 17.129472-6.549504 23.62368 0l47.323136 47.798272C805.30944 403.429376 805.30944 414.208 798.789632 420.78208z"',26:'d="M784.352 184.224c-15.968-6.624-34.304-2.944-46.496 9.248-53.92 53.888-141.696 53.92-195.68 0-87.264-87.168-229.12-87.168-316.32 0-8.032 7.968-12.512 18.848-12.512 30.176l0 554.656c0 23.552 19.072 42.656 42.656 42.656s42.656-19.104 42.656-42.656l0-194.272c54.24-42.528 133.152-38.88 183.168 11.104 87.264 87.168 229.152 87.168 316.32 0 8.032-8.032 12.512-18.848 12.512-30.176l0-341.344c0-17.28-10.4-32.8-26.336-39.424z"',27:'d="M784.352 184.224c-15.968-6.624-34.304-2.944-46.496 9.248-53.92 53.888-141.696 53.92-195.68 0-87.264-87.168-229.12-87.168-316.32 0-8.032 7.968-12.512 18.848-12.512 30.176l0 554.656c0 23.552 19.072 42.656 42.656 42.656s42.656-19.104 42.656-42.656l0-194.272c54.24-42.528 133.152-38.88 183.168 11.104 87.264 87.168 229.152 87.168 316.32 0 8.032-8.032 12.512-18.848 12.512-30.176l0-341.344c0-17.28-10.4-32.8-26.336-39.424z"',28:'d="M784.352 184.224c-15.968-6.624-34.304-2.944-46.496 9.248-53.92 53.888-141.696 53.92-195.68 0-87.264-87.168-229.12-87.168-316.32 0-8.032 7.968-12.512 18.848-12.512 30.176l0 554.656c0 23.552 19.072 42.656 42.656 42.656s42.656-19.104 42.656-42.656l0-194.272c54.24-42.528 133.152-38.88 183.168 11.104 87.264 87.168 229.152 87.168 316.32 0 8.032-8.032 12.512-18.848 12.512-30.176l0-341.344c0-17.28-10.4-32.8-26.336-39.424z"',29:'d="M784.352 184.224c-15.968-6.624-34.304-2.944-46.496 9.248-53.92 53.888-141.696 53.92-195.68 0-87.264-87.168-229.12-87.168-316.32 0-8.032 7.968-12.512 18.848-12.512 30.176l0 554.656c0 23.552 19.072 42.656 42.656 42.656s42.656-19.104 42.656-42.656l0-194.272c54.24-42.528 133.152-38.88 183.168 11.104 87.264 87.168 229.152 87.168 316.32 0 8.032-8.032 12.512-18.848 12.512-30.176l0-341.344c0-17.28-10.4-32.8-26.336-39.424z"',30:'d="M784.352 184.224c-15.968-6.624-34.304-2.944-46.496 9.248-53.92 53.888-141.696 53.92-195.68 0-87.264-87.168-229.12-87.168-316.32 0-8.032 7.968-12.512 18.848-12.512 30.176l0 554.656c0 23.552 19.072 42.656 42.656 42.656s42.656-19.104 42.656-42.656l0-194.272c54.24-42.528 133.152-38.88 183.168 11.104 87.264 87.168 229.152 87.168 316.32 0 8.032-8.032 12.512-18.848 12.512-30.176l0-341.344c0-17.28-10.4-32.8-26.336-39.424z"',31:'d="M784.352 184.224c-15.968-6.624-34.304-2.944-46.496 9.248-53.92 53.888-141.696 53.92-195.68 0-87.264-87.168-229.12-87.168-316.32 0-8.032 7.968-12.512 18.848-12.512 30.176l0 554.656c0 23.552 19.072 42.656 42.656 42.656s42.656-19.104 42.656-42.656l0-194.272c54.24-42.528 133.152-38.88 183.168 11.104 87.264 87.168 229.152 87.168 316.32 0 8.032-8.032 12.512-18.848 12.512-30.176l0-341.344c0-17.28-10.4-32.8-26.336-39.424z"',32:'d="M784.352 184.224c-15.968-6.624-34.304-2.944-46.496 9.248-53.92 53.888-141.696 53.92-195.68 0-87.264-87.168-229.12-87.168-316.32 0-8.032 7.968-12.512 18.848-12.512 30.176l0 554.656c0 23.552 19.072 42.656 42.656 42.656s42.656-19.104 42.656-42.656l0-194.272c54.24-42.528 133.152-38.88 183.168 11.104 87.264 87.168 229.152 87.168 316.32 0 8.032-8.032 12.512-18.848 12.512-30.176l0-341.344c0-17.28-10.4-32.8-26.336-39.424z"',33:'d="M129 513 513 897 513 673 897 673 897 353 513 353 513 129Z"',34:'d="M897 513 513 129 513 353 129 353 129 673 513 673 513 897Z"',35:'d="M513 129 129 513 353 513 353 897 673 897 673 513 897 513Z"',36:'d="M513 897 897 513 673 513 673 129 353 129 353 513 129 513Z"',37:'d="M962 512l-361.147-450v230.625h-177.705v-230.625l-361.148 450 361.147 450v-230.625h177.705v230.625z"',38:'d="M510.466048 65.278976c-246.434816 0-446.211072 199.771136-446.211072 446.200832 0 246.424576 199.776256 446.216192 446.211072 446.216192 246.429696 0 446.205952-199.791616 446.205952-446.216192C956.672 265.051136 756.895744 65.278976 510.466048 65.278976zM798.789632 420.78208 478.706688 740.810752c-6.529024 6.57408-17.169408 6.57408-23.663616 0l-47.312896-47.75936c-6.490112-6.554624-17.164288-17.272832-23.653376-23.886848l-110.068736-115.68128c-3.227648-3.28704-4.953088-7.82336-4.953088-12.151808 0-4.303872 1.72544-8.428544 4.953088-11.73504l48.234496-43.470848c3.262464-3.326976 7.629824-4.953088 11.938816-4.932608 4.248576 0.039936 8.482816 1.680384 11.715584 4.932608l109.147136 111.397888c6.495232 6.608896 17.134592 6.608896 23.663616 0l249.137152-248.42752c6.495232-6.549504 17.129472-6.549504 23.62368 0l47.323136 47.798272C805.30944 403.429376 805.30944 414.208 798.789632 420.78208z"',39:'d="M511.674589 63.444984c-247.481488 0-448.208115 200.684672-448.208115 448.208115 0 247.537769 200.698998 448.208115 448.208115 448.208115 247.537769 0 448.208115-200.62839 448.208115-448.208115C959.882704 264.171612 759.211335 63.444984 511.674589 63.444984L511.674589 63.444984zM695.428659 636.040061c7.634888 7.592932 12.331863 18.068518 12.331863 29.684066 0 23.229051-18.785855 42.015929-42.015929 42.015929-11.530614 0-22.090111-4.696975-29.684066-12.331863L511.674589 571.090816 387.371538 695.450149c-7.649214 7.634888-18.153452 12.331863-29.767977 12.331863-23.159466 0-41.987277-18.785855-41.987277-42.029232 0-11.614525 4.696975-22.062482 12.289907-29.655414l124.373659-124.443243L327.933821 387.308093c-7.607258-7.621585-12.289907-18.124799-12.289907-29.726022 0-23.201421 18.814508-42.015929 42.015929-42.015929 11.57257 0 22.076808 4.682649 29.697369 12.289907l124.303051 124.373659 124.386962-124.345006c7.592932-7.592932 18.153452-12.289907 29.684066-12.289907 23.187095 0 42.015929 18.785855 42.015929 42.015929 0 11.614525-4.696975 22.118763-12.331863 29.726022L571.112306 511.638773 695.428659 636.040061 695.428659 636.040061z"',40:['d="M898.292462 150.642952l-40.481993 0 0 119.055536L682.360528 269.698488 682.360528 150.642952 369.969705 150.642952l0 119.055536L194.51874 269.698488 194.51874 150.642952 125.706515 150.642952c-32.700773 0-59.20952 26.508747-59.20952 59.20952l0 651.0448c0 32.69975 26.508747 59.20952 59.20952 59.20952l772.585947 0c32.69975 0 59.20952-26.50977 59.20952-59.20952L957.501982 209.852472C957.501982 177.151699 930.992211 150.642952 898.292462 150.642952zM899.015939 845.830111c0 10.898211-8.837272 19.73446-19.735483 19.73446L144.719544 865.564571c-10.900258 0-19.73753-8.836249-19.73753-19.73446L124.982014 348.614839c0-10.899234 8.836249-19.736507 19.73753-19.736507l734.560912 0c10.898211 0 19.735483 8.837272 19.735483 19.736507L899.015939 845.830111z"','d="M221.82362 239.434208c0 5.418406 4.39203 9.810437 9.809413 9.810437l106.862843 0c5.418406 0 9.809413-4.39203 9.809413-9.810437L348.305289 113.702622c0-5.418406-4.391007-9.810437-9.809413-9.810437L231.634056 103.892185c-5.418406 0-9.809413 4.39203-9.809413 9.810437L221.824643 239.434208z"','d="M706.036763 239.434208c0 5.418406 4.391007 9.810437 9.810437 9.810437l106.860796 0c5.41943 0 9.810437-4.39203 9.810437-9.810437L832.518433 113.702622c0-5.418406-4.391007-9.810437-9.810437-9.810437L715.8472 103.892185c-5.41943 0-9.810437 4.39203-9.810437 9.810437L706.036763 239.434208z"','d="M831.096037 379.779629 723.275379 379.779629c-7.913227 0-14.329357 6.415107-14.329357 14.328333l0 107.822704c0 7.91118 6.41613 14.32731 14.329357 14.32731l107.820658 0c7.91118 0 14.328333-6.41613 14.328333-14.32731L845.42437 394.107963C845.42437 386.194736 839.007217 379.779629 831.096037 379.779629z"','d="M831.096037 530.184151 723.275379 530.184151c-7.913227 0-14.329357 6.414083-14.329357 14.328333l0 107.821681c0 7.91118 6.41613 14.32731 14.329357 14.32731l107.820658 0c7.91118 0 14.328333-6.41613 14.328333-14.32731L845.42437 544.512485C845.42437 536.597211 839.007217 530.184151 831.096037 530.184151z"','d="M831.096037 680.586626 723.275379 680.586626c-7.913227 0-14.329357 6.414083-14.329357 14.328333l0 107.822704c0 7.91118 6.41613 14.32731 14.329357 14.32731l107.820658 0c7.91118 0 14.328333-6.41613 14.328333-14.32731L845.42437 694.91496C845.42437 687.00071 839.007217 680.586626 831.096037 680.586626z"','d="M652.842237 379.779629 545.020556 379.779629c-7.912204 0-14.329357 6.415107-14.329357 14.328333l0 107.822704c0 7.91118 6.417153 14.32731 14.329357 14.32731L652.842237 516.257977c7.91118 0 14.328333-6.41613 14.328333-14.32731L667.17057 394.107963C667.17057 386.194736 660.753417 379.779629 652.842237 379.779629z"','d="M652.842237 528.095583 545.020556 528.095583c-7.912204 0-14.329357 6.41306-14.329357 14.32731l0 107.821681c0 7.912204 6.417153 14.328333 14.329357 14.328333L652.842237 664.572908c7.91118 0 14.328333-6.41613 14.328333-14.328333L667.17057 542.422893C667.17057 534.50762 660.753417 528.095583 652.842237 528.095583z"','d="M652.842237 678.498058 545.020556 678.498058c-7.912204 0-14.329357 6.41306-14.329357 14.32731L530.691199 800.648073c0 7.912204 6.417153 14.328333 14.329357 14.328333L652.842237 814.976406c7.91118 0 14.328333-6.41613 14.328333-14.328333L667.17057 692.825368C667.17057 684.911118 660.753417 678.498058 652.842237 678.498058z"','d="M366.767779 516.257977l107.820658 0c7.91118 0 14.32731-6.41613 14.32731-14.32731L488.915747 394.107963c0-7.913227-6.41613-14.328333-14.32731-14.328333L366.767779 379.779629c-7.913227 0-14.329357 6.415107-14.329357 14.328333l0 107.822704C352.438423 509.842871 358.854553 516.257977 366.767779 516.257977z"','d="M478.183312 528.096607 365.992113 528.096607c-8.233522 0-14.909571 6.674003-14.909571 14.908548l0 112.191198c0 8.233522 6.67605 14.908548 14.909571 14.908548l112.192222 0c8.231475 0 14.906501-6.675026 14.906501-14.908548L493.090836 543.005155C493.090836 534.77061 486.414787 528.096607 478.183312 528.096607z"','d="M475.632209 677.685553 367.811552 677.685553c-7.913227 0-14.329357 6.414083-14.329357 14.328333l0 107.821681c0 7.91118 6.41613 14.32731 14.329357 14.32731l107.820658 0c7.91118 0 14.32731-6.41613 14.32731-14.32731L489.959519 692.013887C489.960543 684.099636 483.544413 677.685553 475.632209 677.685553z"','d="M297.378409 531.227923 189.557752 531.227923c-7.913227 0-14.329357 6.414083-14.329357 14.328333l0 107.821681c0 7.91118 6.41613 14.32731 14.329357 14.32731l107.820658 0c7.912204 0 14.32731-6.41613 14.32731-14.32731L311.70572 545.556257C311.70572 537.642007 305.290613 531.227923 297.378409 531.227923z"','d="M297.378409 677.685553 189.557752 677.685553c-7.913227 0-14.329357 6.414083-14.329357 14.328333l0 107.821681c0 7.91118 6.41613 14.32731 14.329357 14.32731l107.820658 0c7.912204 0 14.32731-6.41613 14.32731-14.32731L311.70572 692.013887C311.70572 684.099636 305.290613 677.685553 297.378409 677.685553z"'],41:'d="M546.583273 153.623273C546.629818 153.041455 546.909091 152.552727 546.909091 151.947636l0-69.818182 93.090909 0c12.846545 0 23.272727-10.426182 23.272727-23.272727l0-23.272727c0-12.846545-10.426182-23.272727-23.272727-23.272727l-256 0c-12.846545 0-23.272727 10.426182-23.272727 23.272727l0 23.272727c0 12.846545 10.426182 23.272727 23.272727 23.272727l93.090909 0 0 69.818182c0 0.581818 0.302545 1.093818 0.325818 1.652364C255.860364 171.287273 81.454545 356.328727 81.454545 582.469818c0 237.800727 192.768 430.592 430.545455 430.592 237.777455 0 430.545455-192.768 430.545455-430.592C942.545455 356.328727 768.139636 171.287273 546.583273 153.623273zM512 943.522909c-199.330909 0-360.936727-161.489455-360.936727-360.727273 0-199.214545 161.582545-360.727273 360.936727-360.727273s360.936727 161.489455 360.936727 360.727273C872.936727 782.033455 711.330909 943.522909 512 943.522909zM546.513455 508.974545l0-165.166545c0-16.104727-15.453091-29.160727-34.513455-29.160727-19.060364 0-34.513455 13.056-34.513455 29.160727l0 165.166545c-27.671273 13.009455-46.941091 40.936727-46.941091 73.541818 0 44.986182 36.468364 81.454545 81.454545 81.454545 44.986182 0 81.454545-36.468364 81.454545-81.454545C593.454545 549.911273 574.184727 521.984 546.513455 508.974545z"',42:'d="M946.399621 805.467845c0 0-338.714352-579.191308-382.716518-651.846048-51.757804-62.370513-111.540376 0-111.540376 0s-300.852022 519.839549-356.251773 613.983719c-77.125565 109.543905 12.925381 128.594797 12.925381 128.594797s744.461399 0 821.209364 0C984.084918 875.785354 946.399621 805.467845 946.399621 805.467845zM511.674589 776.865413c-24.301476 0-44.002167-19.700691-44.002167-44.002167 0-24.301476 19.700691-44.002167 44.002167-44.002167 24.301476 0 44.002167 19.700691 44.002167 44.002167C555.676755 757.164722 535.976064 776.865413 511.674589 776.865413zM555.676755 595.827197c0 24.301476-19.700691 44.002167-44.002167 44.002167-24.301476 0-44.002167-19.700691-44.002167-44.002167l0-213.870995c0-24.301476 19.700691-44.002167 44.002167-44.002167 24.301476 0 44.002167 19.700691 44.002167 44.002167L555.676755 595.827197z"',43:'d="M503.803829 63.578014c-247.050676 0-447.328072 200.277396-447.328072 447.327048 0 247.054769 200.277396 447.333188 447.328072 447.333188 247.054769 0 447.332165-200.278419 447.332165-447.333188C951.13497 263.85541 750.858598 63.578014 503.803829 63.578014zM575.659367 767.528767 447.745069 767.528767 447.745069 425.470251l127.914298 0L575.659367 767.528767zM575.659367 383.576095 447.745069 383.576095 447.745069 255.897158l127.914298 0L575.659367 383.576095z"',44:'d="M512.805342 64.646346c-246.850108 0-446.789813 199.935612-446.789813 446.789813 0 246.850108 199.939705 446.789813 446.789813 446.789813 246.854201 0 446.789813-199.939705 446.789813-446.789813C959.595154 264.581957 759.65852 64.646346 512.805342 64.646346zM546.401508 777.538749l-73.90829 0 0-80.627319 73.90829 0L546.401508 777.538749zM653.899824 421.442518c-13.437034 24.672936-31.387871 45.912679-53.749158 63.828724-22.395056 17.953907-38.109969 35.833113-47.03013 53.752228-8.958022 17.950837-13.441127 30.232558-13.441127 36.950564l0 23.5166-60.467163 0 0-33.593096c0-20.156062 5.037736-39.752376 15.117302-58.790988 10.076496-19.000749 27.399023-39.752376 52.071959-62.148455 17.916045-15.642259 30.232558-31.915897 36.950564-48.710398 6.719028-16.798595 10.079566-33.034371 10.079566-48.710398 0-29.080316-6.719028-50.916647-20.156062-65.508993-13.437034-14.558577-32.474622-21.836331-57.109696-21.836331-24.672936 0-45.352931 9.55461-62.148455 28.555359-16.798595 19.037589-25.197892 49.866734-25.197892 92.38306l-77.265758 0c2.205225-62.673411 19.000749-109.181655 50.39169-139.414213 31.353079-30.235628 69.391417-45.352931 114.219391-45.352931 49.235354 0 87.86721 13.437034 115.89659 40.312124 27.995611 26.874067 41.995463 61.626569 41.995463 104.143918C674.058956 369.932354 667.336858 396.807445 653.899824 421.442518z"',45:'d="M955.6104 403.197992c-3.797489-11.391445-13.513782-19.655665-25.351388-21.443381l-269.601274-41.657772L540.263717 82.223676c-5.249561-11.168364-16.529465-18.427698-28.925796-18.427698l0 0c-12.396331 0-23.564695 7.147794-28.925796 18.316158L360.9027 339.316056l-269.935895 40.764426c-11.838629 1.786693-21.666462 9.939373-25.463951 21.330818-3.797489 11.279904-1.004887 23.90034 7.370875 32.387641l195.890482 201.474664L221.969441 919.282007c-2.009773 12.06171 3.127224 24.234961 13.066597 31.271214s23.118534 7.818059 33.839713 1.898233l241.12164-132.678812 240.563938 133.572158c4.913916 2.568499 10.163477 3.90903 15.523555 3.90903l0.670266 0c17.645892 0 31.828916-14.295588 31.828916-31.94148 0-3.90903-0.670266-7.706519-2.009773-11.279904l-44.672432-277.865495 196.337667-200.692858C956.503746 426.986791 959.407889 414.477896 955.6104 403.197992z"',46:'d="M512 259.648c-64.896 0-125.952 25.024-171.84 70.464-45.888 45.44-71.168 105.92-71.168 170.176s25.28 124.672 71.168 170.112S447.104 740.864 512 740.864s125.952-25.024 171.84-70.464c45.888-45.44 71.168-105.856 71.168-170.112 0-64.256-25.28-124.736-71.168-170.176C638.016 284.672 576.896 259.648 512 259.648zM512 690.112c-105.728 0-191.808-85.12-191.808-189.824S406.208 310.4 512 310.4c105.728 0 191.808 85.184 191.808 189.888C703.808 604.992 617.792 690.112 512 690.112zM514.816 197.504c14.144 0 25.6-11.328 25.6-25.408L540.416 110.72c0-14.016-11.456-25.408-25.6-25.408S489.152 96.64 489.152 110.72l0 61.376C489.216 186.176 500.672 197.504 514.816 197.504zM299.52 283.52c6.592 0 13.12-2.496 18.112-7.488 10.048-9.92 10.048-25.984 0-35.84L273.792 196.736c-10.048-9.92-26.24-9.92-36.224 0-10.048 9.92-10.048 25.984 0 35.904l43.84 43.392C286.336 281.024 292.928 283.52 299.52 283.52zM208.576 444.288 146.56 444.288c-14.144 0-25.664 11.328-25.664 25.408 0 14.016 11.456 25.408 25.664 25.408l62.016 0c14.144 0 25.664-11.328 25.664-25.408C234.24 455.68 222.784 444.288 208.576 444.288zM877.44 449.984l-62.016 0c-14.144 0-25.664 11.328-25.664 25.408 0 14.016 11.52 25.408 25.664 25.408l62.016 0c14.144 0 25.664-11.328 25.664-25.408C903.104 461.312 891.648 449.984 877.44 449.984zM728.64 287.488c6.592 0 13.12-2.496 18.112-7.424l43.84-43.456c10.048-9.92 10.048-25.984 0-35.904s-26.24-9.92-36.288 0L710.4 244.16c-9.984 9.92-9.984 25.984 0 35.904C715.52 284.992 721.984 287.488 728.64 287.488zM606.656 791.488 417.408 791.488c-14.144 0-25.664 11.392-25.664 25.408s11.456 25.408 25.664 25.408l189.248 0c14.144 0 25.664-11.328 25.664-25.408C632.256 802.88 620.736 791.488 606.656 791.488zM572.416 887.936 451.648 887.936c-14.144 0-25.664 11.328-25.664 25.408 0 14.016 11.456 25.408 25.664 25.408l120.704 0c14.144 0 25.664-11.392 25.664-25.408C598.08 899.264 586.56 887.936 572.416 887.936z"',47:'d="M459.0592 112.5376c-197.3248 23.4496-353.6896 179.8656-377.1392 377.1392l377.1392 0 0-377.1392zM566.9376 113.3056l0 432.896c0 28.3648-22.9888 51.3536-51.4048 51.3536l-432.896 0c27.6992 211.712 208.5376 375.1936 427.7248 375.1936 238.3872 0 431.7184-193.2288 431.7184-431.7184 0-219.1872-163.4816-400.0256-375.1424-427.7248z"',48:'d="M596.87936 285.25568c37.9392 23.78752 64.54272 64.04096 69.39648 110.76608 15.4624 7.22944 32.64512 11.38688 50.8416 11.38688 66.47808 0 120.34048-53.87264 120.34048-120.33024 0-66.46784-53.8624-120.34048-120.34048-120.34048C651.28448 166.74816 597.88288 219.65824 596.87936 285.25568zM518.0416 531.65056c66.4576 0 120.34048-53.88288 120.34048-120.34048S584.4992 290.97984 518.0416 290.97984s-120.36096 53.88288-120.36096 120.34048S451.584 531.65056 518.0416 531.65056zM569.07776 539.8528l-102.10304 0c-84.96128 0-154.08128 69.13024-154.08128 154.08128l0 124.88704 0.31744 1.95584 8.6016 2.69312c81.08032 25.32352 151.52128 33.78176 209.50016 33.78176 113.24416 0 178.88256-32.28672 182.9376-34.34496l8.0384-4.07552 0.86016 0L723.1488 693.93408C723.15904 608.98304 654.03904 539.8528 569.07776 539.8528zM768.18432 415.62112l-101.3248 0c-1.09568 40.54016-18.40128 77.04576-45.76256 103.30112 75.52 22.45632 130.7648 92.48768 130.7648 175.2064l0 38.48192c100.0448-3.67616 157.696-32.02048 161.49504-33.93536l8.0384-4.07552 0.86016 0L922.25536 569.69216C922.25536 484.74112 853.13536 415.62112 768.18432 415.62112zM306.88256 407.41888c23.54176 0 45.44512-6.87104 64-18.57536 5.89824-38.47168 26.5216-72.0896 55.98208-94.98624 0.12288-2.2528 0.33792-4.48512 0.33792-6.7584 0-66.46784-53.88288-120.34048-120.32-120.34048-66.47808 0-120.34048 53.87264-120.34048 120.34048C186.54208 353.54624 240.40448 407.41888 306.88256 407.41888zM414.95552 518.92224c-27.2384-26.12224-44.48256-62.43328-45.74208-102.72768-3.75808-0.27648-7.4752-0.57344-11.30496-0.57344l-102.10304 0c-84.96128 0-154.08128 69.12-154.08128 154.07104l0 124.89728 0.31744 1.93536 8.6016 2.70336c65.04448 20.31616 123.09504 29.66528 173.5168 32.6144l0-37.71392C284.18048 611.40992 339.41504 541.3888 414.95552 518.92224z"',49:'d="M820.851719 939.594635 200.779328 939.594635c-22.339798 0-40.440038-18.10024-40.440038-40.441061L160.33929 548.678364c0-22.319331 18.10024-40.420595 40.440038-40.420595l67.400063 0 0-188.718129c0-133.995807 108.629069-242.638179 242.635109-242.638179 134.00911 0 242.639203 108.642372 242.639203 242.638179l0 188.718129 67.398016 0c22.339798 0 40.441061 18.102287 40.441061 40.420595l0 350.477256C861.292779 921.494395 843.191516 939.594635 820.851719 939.594635M470.380602 739.660046l0 78.614475c0 22.338774 18.105357 40.441061 40.433898 40.441061 22.339798 0 40.440038-18.101263 40.440038-40.441061l0-78.614475c24.076348-14.020318 40.441061-39.806611 40.441061-69.662593 0-44.667316-36.201503-80.880075-80.880075-80.880075-44.675502 0-80.877005 36.21276-80.877005 80.880075C429.937494 699.852412 446.302207 725.639728 470.380602 739.660046M672.573627 319.537594c0-89.330538-72.427566-161.759127-161.759127-161.759127-89.342818 0-161.756057 72.428589-161.756057 161.759127l0 188.719152 323.515185 0L672.573627 319.537594z"',50:'d="M139.85792 884.144128c0 41.119744 33.308672 74.42432 74.430464 74.42432l595.423232 0c41.119744 0 74.43456-33.304576 74.43456-74.42432L884.146176 512c0-41.121792-33.314816-74.428416-74.43456-74.428416L363.145216 437.571584l0-130.246656c0-82.241536 66.6112-148.85888 148.854784-148.85888 82.243584 0 148.85888 66.617344 148.85888 148.85888l0 9.299968c0 25.677824 20.840448 46.52032 46.512128 46.52032 25.675776 0 46.524416-20.842496 46.524416-46.52032l0-9.299968c0-133.595136-108.302336-241.891328-241.893376-241.891328-133.61152 0-241.891328 108.296192-241.891328 241.891328l0 130.246656-55.820288 0c-41.121792 0-74.430464 33.306624-74.430464 74.428416L139.859968 884.144128zM437.571584 642.250752c0-41.119744 33.306624-74.426368 74.428416-74.426368s74.426368 33.306624 74.426368 74.426368c0 26.238976-13.586432 49.313792-34.048 62.523392 0 0 7.2704 43.921408 15.446016 95.639552 0 15.437824-12.466176 27.904-27.912192 27.904l-55.824384 0c-15.443968 0-27.908096-12.466176-27.908096-27.904l15.446016-95.639552C451.162112 691.564544 437.571584 668.48768 437.571584 642.250752z"',51:'d="M514.958222 640.170667 0.056889 342.869333 0.056889 282.567111c0-71.111111 57.628444-128.739556 128.739556-128.739556l766.577778 0c71.111111 0 128.739556 57.628444 128.739556 128.739556l0 60.359111L514.958222 640.170667zM514.958222 716.572444 1024.056889 419.328l0 320.796444c0 71.850667-57.628444 130.048-128.739556 130.048L128.796444 870.172444C57.685333 870.172444 0.056889 811.918222 0.056889 740.124444L0.056889 419.328 514.958222 716.572444z"',52:'d="M301.623281 897.208571c-110.900927-64.038887-149.018484-205.890886-84.878286-316.79079l33.13796-57.482315L283.020915 465.553438l132.500672-229.626351 33.188104-57.432171C494.452191 99.309498 595.849312 72.118196 675.033706 117.860697c79.287752 45.742501 106.47803 147.137576 60.685385 226.374161l-82.896067 143.478094-33.49306 58.094276L503.70323 746.056412c-27.395971 47.571218-88.232811 63.836265-135.805053 36.441318-47.522098-27.496258-63.836265-88.334122-36.340006-135.804029l99.413879-172.24637 19.567381-34.001663 63.226351-109.526575c9.199872-15.857755 29.427311-21.296834 45.285066-12.148129 15.856732 9.199872 21.346978 29.479501 12.148129 45.336233L507.972626 473.58465l-19.619571 34.002686-99.413879 172.195203c-9.198849 15.856732-3.709626 36.085193 12.148129 45.284042 15.857755 9.098561 36.085193 3.710649 45.285066-12.094915l165.689799-287.059546 16.517813-28.716086 13.519412-23.430508 19.619571-34.001663 16.567957-28.665942c27.496258-47.571218 11.182091-108.358938-36.340006-135.804029-47.571218-27.445091-108.410106-11.182091-135.804029 36.391174l-49.758107 86.09709-16.517813 28.717109L323.832939 527.356316l-16.620147 28.717109-33.086792 57.432171c-25.412728 43.963927-27.59757 94.585737-11.740838 138.853598 0.91487 2.33732 1.727406 4.675664 2.744611 7.014007 2.032363 5.082955 4.168084 10.114743 6.811385 14.891717 3.253214 6.302782 7.012984 12.301631 11.079757 18.144931 2.134698 2.998401 4.472018 5.793156 6.810361 8.639079 4.370707 5.489223 9.198849 10.724656 14.434282 15.654109 2.133674 1.983243 4.269396 4.016629 6.556572 5.84637 7.369108 6.351903 15.196674 12.247394 23.989255 17.330349 79.184394 45.742501 180.580492 18.60339 226.322993-60.633195l49.70694-86.14928 132.603006-229.626351 16.516789-28.664918 16.570003-28.717109c9.198849-15.805564 29.427311-21.244643 45.284042-12.146083 15.857755 9.198849 21.295811 29.427311 12.147106 45.284042l-16.567957 28.717109-16.56898 28.716086L618.517429 812.332331C554.426351 923.282379 412.573329 961.299648 301.623281 897.208571z"',53:'d="M960.225968 473.04478c0-7.68196-2.931892-15.362896-8.798747-21.228487-5.864808-5.864568-13.525592-8.797363-21.185353-8.797363l-45.828599 0c-18.997435 0-39.088828-14.81645-44.735663-32.93818l-23.768284-57.732889c-8.930759-16.698311-5.252846-41.340547 8.097754-54.757115l32.522003-32.477692c5.427838-5.427616 8.798747-12.933567 8.798747-21.228487 0-8.293897-3.326905-15.800871-8.798747-21.249977l-55.197351-55.107085c-5.427838-5.427616-12.912607-8.775874-21.185353-8.775874s-15.801518 3.370771-21.229357 8.775874l-32.522003 32.521694c-13.3506 13.394055-38.081854 17.070794-54.803362 8.097422l-57.691251-23.74582c-18.034464-5.602601-32.917016-25.737174-32.917016-44.711318L580.983386 93.797269c0-7.659447-2.932916-15.341407-8.798747-21.206998-5.864808-5.865591-13.525592-8.798387-21.185353-8.798387l-77.95866 0c-7.703765 0-15.363525 2.932796-21.229357 8.798387-5.864808 5.864568-8.797724 13.546527-8.797724 21.206998l0 45.893236c0 18.974144-14.751563 39.108716-32.873012 44.711318l-57.735255 23.74582c-16.764489 8.973372-41.364755 5.339612-54.715354-8.097422l-32.654015-32.499182c-5.427838-5.427616-12.956611-8.754385-21.229357-8.754385-8.272746 0-15.757514 3.369747-21.185353 8.775874l-55.065339 55.063083c-5.427838 5.427616-8.754743 12.912078-8.798747 21.206998 0 8.272407 3.370909 15.779382 8.798747 21.206998l32.479023 32.543184c13.437584 13.438057 17.115497 38.058804 8.097754 54.757115l-23.768284 57.776891c-5.602831 18.120706-25.694225 32.937157-44.690636 32.937157l-45.873626-0.042979c-7.703765 0-15.364549 2.932796-21.229357 8.797363-5.864808 5.865591-8.798747 13.546527-8.798747 21.228487l0 77.932953c0 7.68196 2.932916 15.363919 8.798747 21.228487 5.864808 5.844102 13.525592 8.775874 21.229357 8.775874l45.873626 0c18.996411 0.044002 39.044824 14.859429 44.647655 32.93818l23.812288 57.732889c8.929736 16.742313 5.29685 41.451064-8.097754 54.801117l-32.566007 32.476669c-5.427838 5.427616-8.798747 12.93459-8.798747 21.251 0 8.272407 3.369885 15.800871 8.798747 21.228487l55.196328 55.107085c5.427838 5.428639 12.912607 8.775874 21.186376 8.775874 8.272746 0 15.801518-3.347235 21.229357-8.775874l32.566007-32.499182c13.3506-13.371542 37.949842-17.048281 54.627346-7.988951l57.866243 23.74582c18.121449 5.624091 32.873012 25.714661 32.873012 44.711318l0 45.718251c0 7.68196 2.932916 15.362896 8.797724 21.228487 5.865831 5.843078 13.525592 8.775874 21.229357 8.775874l77.914656 0c7.703765 0 15.364549-2.932796 21.229357-8.775874 5.864808-5.865591 8.798747-13.546527 8.798747-21.228487l0-45.718251c0-18.996656 14.882552-39.087227 32.917016-44.711318l57.779259-23.74582c16.720485-9.060353 41.407735-5.383614 54.846343 7.988951l32.347011 32.476669c5.427838 5.450129 12.912607 8.842389 21.229357 8.842389 8.272746 0.021489 15.801518-3.326768 21.229357-8.775874l55.197351-55.151088c5.471842-5.449106 8.798747-12.95608 8.798747-21.251s-3.370909-15.800871-8.798747-21.228487l-32.522003-32.476669c-13.3506-13.350053-17.028513-38.057781-8.097754-54.801117l23.768284-57.732889c5.646835-18.077727 25.825213-32.894178 44.735663-32.894178l45.828599 0c7.659761 0 15.320545-2.931772 21.185353-8.798387 5.865831-5.864568 8.798747-13.546527 8.798747-21.228487L960.226991 473.04478 960.225968 473.04478zM684.505282 511.957021c0 95.222735-77.169659 172.34523-172.373782 172.34523-95.248127 0-172.418809-77.122495-172.418809-172.34523 0-95.200222 77.170682-172.367743 172.418809-172.367743C607.335623 339.589278 684.505282 416.756799 684.505282 511.957021"',54:'d="M511.968 945.216l-392.192 0c-46.176 0-40.8-19.04-40.8-94.464 0-126.72 321.216-165.888 321.216-296.32 0-80.544-132.8-79.68-132.8-266.592 0-157.824 108.832-248.48 244.576-248.48 135.84 0 244.576 90.656 244.576 248.48 0 186.88-132.704 186.016-132.704 266.592 0 130.432 321.216 169.6 321.216 296.32 0 75.424 5.28 94.464-40.8 94.464l-392.288 0z"',55:'d="M712.772916 66.038042 311.22606 66.038042c-36.910157 0-66.930104 32.181957-66.930104 71.753207l0 747.422847c0 39.572274 30.018924 71.753207 66.930104 71.753207l401.546856 0c36.932671 0 66.930104-32.181957 66.930104-71.753207l0-747.422847C779.704044 98.219999 749.706611 66.038042 712.772916 66.038042zM384.129454 122.972752c0-2.825348 4.581534-5.116531 10.233491-5.116531l237.417003 0c5.651957 0 10.233491 2.291183 10.233491 5.116531l0 11.256368c0 2.825348-4.581534 5.116531-10.233491 5.116531l-237.417003 0c-5.651957 0-10.233491-2.291183-10.233491-5.116531L384.129454 122.972752zM512 913.954675c-20.317574 0-36.788379-16.4783-36.788379-36.805254 0-20.326954 16.470805-36.805254 36.788379-36.805254s36.788379 16.4783 36.788379 36.805254C548.788379 897.476375 532.317574 913.954675 512 913.954675zM311.22606 745.064127 311.22606 209.556737l401.55402 0 0.048097 535.50739L311.22606 745.064127z"',56:'d="M764.032 960 259.968 960c-46.4 0-83.968-37.632-83.968-83.968L176 147.968C176 101.568 213.632 64 259.968 64l504 0c46.4 0 83.968 37.568 83.968 83.968l0 728C848 922.368 810.368 960 764.032 960zM512 931.968c15.424 0 28.032-12.48 28.032-28.032S527.424 876.032 512 876.032s-28.032 12.48-28.032 28.032S496.576 931.968 512 931.968zM526.016 120 497.984 120c-7.744 0-14.016 6.272-14.016 14.016S490.24 147.968 497.984 147.968l28.032 0c7.744 0 14.016-6.272 14.016-14.016S533.76 120 526.016 120zM792 176l-560 0 0 672 560 0L792 176z"',57:['d="M886.59584 423.53792 648.01152 423.53792C740.45184 82.08512 584.30464 64.64 584.30464 64.64c-66.2016 0-52.4608 52.34048-57.4592 61.06112 0 166.98624-177.37216 297.8368-177.37216 297.8368l0 473.54752c0 46.72768 63.70048 63.55456 88.6848 63.55456l358.5024 0c33.728 0 61.20576-88.48256 61.20576-88.48256C946.56 570.58816 946.56 480.86528 946.56 480.86528 946.56 418.55744 886.59584 423.53792 886.59584 423.53792L886.59584 423.53792zM886.59584 423.53792"','d="M251.56736 423.6928 108.69888 423.6928c-29.51296 0-29.97888 28.97664-29.97888 28.97664l29.51296 477.59232c0 30.37824 30.4448 30.37824 30.4448 30.37824l123.66336 0c25.76256 0 25.5296-20.09472 25.5296-20.09472L287.87072 459.90912C287.87072 423.22688 251.56736 423.6928 251.56736 423.6928L251.56736 423.6928zM251.56736 423.6928"'],58:'d="M849.821517 593.375356c0 0 53.94461 4.495384 53.94461-51.697429 0 0 0-80.916914-79.793324-352.885096 0 0-24.723078-79.793324-55.067176-79.793324L446.365652 108.999506c-22.476921 0-79.792301 15.172561-79.792301 57.31538l0 427.059446c0 0 159.582555 118.001531 159.582555 268.596388 4.494361 7.867178-7.867178 55.0682 51.695383 55.0682 0 0 140.480498-15.735379 57.316403-323.666634l214.654848 0L849.82254 593.375356zM278.491247 593.233116c0 0 32.661887 0.421602 32.661887-32.661887l0-433.45204c0 0 0.209778-18.121729-22.968108-18.121729L176.924014 108.99746c0 0-27.393907 0-27.393907 27.393907l-26.549679 430.711626c0 0 0.419556 26.1291 26.971281 26.1291L278.491247 593.233116 278.491247 593.233116z"',59:'d="M884.992 139.072C836.672 90.624 772.416 64 704 64S571.328 90.624 523.072 139.008C474.624 187.392 447.936 251.712 448 320.128c0 46.4 13.184 90.368 36.16 129.28l-374.72 374.72c-25.024 25.024-25.024 65.472 0 90.496 12.48 12.48 28.864 18.752 45.248 18.752s32.768-6.272 45.248-18.752L320 794.496l74.752 74.752c12.48 12.48 28.864 18.752 45.248 18.752s32.768-6.272 45.248-18.752c25.024-25.024 25.024-65.472 0-90.496L410.496 704l164.096-164.096C613.504 562.88 657.6 576.064 704 576.064c68.416 0 132.736-26.688 181.056-75.072C933.376 452.736 960 388.48 960 320.128 960 251.648 933.312 187.328 884.992 139.072zM794.56 410.496c-48.32 48.448-132.48 48.64-181.056-0.128C589.312 386.304 576 354.24 576 320.128c0-34.24 13.312-66.368 37.632-90.688C637.76 205.248 669.824 192 704 192c34.112-0.064 66.24 13.248 90.432 37.504C818.624 253.76 832 285.888 832 320.128 832 354.24 818.688 386.368 794.56 410.496z"',60:'d="M514.031263 900.587226 135.016043 537.873274c-12.113899-12.916171-23.00904-27.228131-32.346709-42.551118-9.209756-15.098883-16.879436-31.207769-22.815635-47.894823-10.060123-28.318976-15.178701-70.808696-15.178701-100.106975 0-143.041834 116.358101-228.320079 259.399935-228.320079 72.010057 0 139.912563 54.723346 188.528817 106.179274C561.203632 173.724647 629.122511 119.001301 701.132568 119.001301c143.025461 0 259.383562 85.278245 259.383562 228.320079 0 28.800953-4.941546 70.840418-14.665001 98.726535-6.209422 17.746176-14.376429 34.881438-24.323988 50.895157-8.359388 13.477966-18.003026 26.249851-28.672016 37.978986l-2.037403 2.053776L514.031263 900.587226z"',61:['d="M594.861196 863.930351l-14.810311-14.852266-63.36005 63.817468 14.45727 14.497179c14.915711 14.971993 41.335431 12.912078 58.900481-4.585435C607.612615 905.308761 609.771791 878.897228 594.861196 863.930351z"','d="M582.168106 745.952356c-7.225565-7.173376-16.812921-11.124362-26.993794-11.124362-10.287297 0-19.944238 4.02057-27.191292 11.319813l-100.267635 100.990089c-7.211239 7.263427-11.161201 16.898879-11.124362 27.133987 0.036839 10.234085 4.056386 19.840884 11.31879 27.051099 7.226588 7.1744 16.812921 11.125385 26.994818 11.125385 10.287297 0 19.943215-4.02057 27.190269-11.319813l100.266611-100.990089C597.247546 785.146007 597.160565 760.837368 582.168106 745.952356z"','d="M725.919091 85.903485c-58.45432 0-106.947777 24.098861-130.712017 44.734854-64.075341 55.640228-230.29199 227.095181-275.626501 274.064936 21.218254 18.551518 68.658729 54.581106 117.02018 54.581106 2.416026 0 4.837168-0.092098 7.194866-0.274246l0.712221-0.039909c0.546446-0.021489 59.598376-2.815115 104.092753-45.760207l0.236384-0.223081 102.697987-95.274924 202.171536 210.722282c17.942651-19.192108 51.29527-55.145971 63.774489-70.458725 17.09126-20.971637 38.084387-64.522526 41.001833-118.244055 2.427282-44.696991-7.615445-111.785969-69.25327-177.571255C841.818751 111.560842 786.872325 85.903485 725.919091 85.903485z"','d="M865.064174 589.655637l-0.301875-0.310062L761.91798 480.529241l0.164752-0.155543-111.8883-116.621091-78.904071 73.201186c-52.287877 50.377364-118.877481 54.538127-125.273145 54.82363-3.098571 0.231267-6.264681 0.348947-9.416464 0.348947-78.899978 0-149.302421-72.349795-152.259776-75.429946l-10.92584-11.375072 10.924817-11.375072c6.29845-6.557346 115.513874-120.197546 203.940832-207.302393-18.995633-18.62315-32.653701-31.649837-40.653909-38.768979-23.986297-21.349237-74.068949-47.750537-136.272663-51.889811-46.947242-3.127224-115.485221 6.049786-175.361937 67.50444-83.689051 85.896322-94.072539 187.095165-30.027897 292.656363 0.962931 1.588171 1.762133 2.908236 2.366907 3.946892 14.930037 25.65838 80.858586 87.48961 80.858586 87.48961l60.648288-58.979276c13.459546-13.556761 31.392988-21.021779 50.496068-21.021779 18.908652 0 36.713156 7.337105 50.132794 20.660552 13.487176 13.390985 20.953218 31.233352 21.021779 50.240241 0.01228 3.330862-0.216941 6.624884-0.652869 9.870812 5.184069-1.183965 10.533914-1.812275 15.985066-1.812275 18.908652 0 36.713156 7.337105 50.131771 20.660552 13.487176 13.390985 20.953218 31.233352 21.021779 50.240241 0.00921 2.670829-0.143263 5.317099-0.421602 7.93574 4.349051-0.818645 8.803503-1.251503 13.32754-1.251503 18.908652 0 36.713156 7.337105 50.131771 20.660552 16.031115 15.917528 22.865777 37.633109 20.520359 58.509579 4.448312-0.858554 9.010211-1.306762 13.643742-1.306762 18.908652 0 36.712133 7.337105 50.131771 20.660552 27.495214 27.299763 27.977191 71.650877 1.363044 99.567693l14.224979 14.262842c6.946202 6.972808 16.739243 10.440793 27.579125 9.768481 11.628852-0.719384 22.955828-6.019087 31.891338-14.921851 8.937556-8.903787 14.280238-20.210297 15.043624-31.837102 0.711198-10.837836-2.718925-20.643156-9.660011-27.608801l-0.180102-0.184195L555.342134 636.815727l-1.047866-1.050935 23.25361-23.190165 133.309168 133.671419c6.946202 6.973832 16.741289 10.438747 27.579125 9.769504 11.627828-0.719384 22.954805-6.02011 31.892361-14.922874 17.880229-17.812691 20.295232-44.480051 5.383614-59.446927L645.270283 551.030945l10.025331-10.012028 13.071713-13.821797 134.582161 127.266545 0.172939 0.172939c14.858406 14.916734 41.49609 12.580526 59.477626-5.170766C878.338502 632.621195 879.532701 604.179422 865.064174 589.655637z"','d="M497.873258 668.088988c-7.225565-7.173376-16.811898-11.124362-26.993794-11.124362-10.287297 0-19.944238 4.019547-27.191292 11.31879l-100.266611 100.991112c-7.211239 7.262404-11.161201 16.898879-11.124362 27.131941s4.056386 19.841907 11.31879 27.052123c7.225565 7.1744 16.811898 11.124362 26.993794 11.124362 10.287297 0 19.944238-4.019547 27.191292-11.31879l100.267635-100.991112C512.952698 707.281615 512.864694 682.975023 497.873258 668.088988z"','d="M338.646813 538.598798c-0.036839-10.234085-4.056386-19.841907-11.31879-27.052123-7.226588-7.173376-16.812921-11.125385-26.993794-11.125385-10.287297 0-19.943215 4.02057-27.191292 11.319813l-100.267635 100.991112c-7.210215 7.262404-11.161201 16.898879-11.124362 27.131941s4.056386 19.841907 11.31879 27.052123c7.225565 7.1744 16.811898 11.124362 26.993794 11.124362 10.287297 0 19.944238-4.019547 27.191292-11.31879l100.267635-100.991112C334.732667 558.468334 338.683652 548.832883 338.646813 538.598798z"','d="M425.13256 617.557104c-0.036839-10.234085-4.056386-19.841907-11.31879-27.052123-7.225565-7.1744-16.811898-11.124362-26.993794-11.124362-10.287297 0-19.944238 4.019547-27.191292 11.31879L259.361049 691.690522c-7.211239 7.263427-11.161201 16.898879-11.124362 27.131941s4.056386 19.841907 11.31879 27.052123c7.226588 7.1744 16.812921 11.125385 26.994818 11.125385 10.287297 0 19.943215-4.02057 27.190269-11.319813l100.266611-100.991112C421.218414 637.427664 425.169399 627.79119 425.13256 617.557104z"'],62:['d="M580.34176 1021.502464c-58.528768 4.818944-127.265792 0-127.265792 0s-350.40768-8.02816-350.40768-287.214592 337.506304-459.13088 337.506304-459.13088l154.349568 0c0 0 320.625664 215.497728 320.625664 464.290816C915.150848 988.281856 580.34176 1023.910912 580.34176 1021.502464L580.34176 1021.502464zM440.174592 256.959488l0-54.629376 154.693632 0 0 54.629376L440.174592 256.959488 440.174592 256.959488zM592.459776 184.132608 442.58304 184.132608 362.816512 4.340736c0 0 47.156224 36.395008 76.172288 36.395008 28.997632 0 78.541824-37.579776 78.541824-37.579776s45.914112 37.579776 74.929152 37.579776c28.977152 0 78.56128-38.687744 78.56128-38.687744L592.459776 184.132608 592.459776 184.132608z"','d="M470.910976 862.855168l69.863424 0 0-67.818496 93.39392 0 0-54.89664-93.39392 0 0-29.858816 93.39392 0 0-54.89664-65.830912 0 78.294016-156.813312-76.573696 0-50.653184 105.892864c-5.810176 12.388352-10.284032 24.046592-13.418496 35.018752-2.675712-10.129408-7.14752-21.751808-13.456384-35.018752l-49.678336-105.892864-76.516352 0 77.280256 156.813312-64.874496 0 0 54.89664 92.17024 0 0 29.858816-92.17024 0 0 54.89664 92.17024 0L470.910976 862.855168 470.910976 862.855168z"'],63:['d="M641.648 168.592 855.36 382.32 385.2 852.528 171.456 638.784 641.648 168.592z"','d="M727.136 83.136l213.744 213.728-64.128 64.08L663.008 147.216 727.136 83.136z"','d="M150.096 660.176l213.728 213.712L64.608 959.392 150.096 660.176z"','d="M809.984 80.432l133.584 133.6c22.112 22.096 20.928 59.216-2.672 82.832-23.648 23.6-60.704 24.784-82.832 2.64l-133.616-133.552c-22.112-22.16-20.928-59.216 2.688-82.816C750.768 59.52 787.824 58.336 809.984 80.432z"'],64:'d="M832.805982 271.399223l-53.467749 0L779.338233 84.253916l-534.677489 0 0 187.145307-53.467749 0c-58.985416 0-106.935498 47.959292-106.935498 106.935498L84.257497 725.875089l160.403247 0 0 213.870995 534.677489 0 0-213.870995 160.403247 0L939.741479 378.334721C939.741479 319.358515 891.782188 271.399223 832.805982 271.399223zM244.660744 431.80247c0-14.785751 11.957333-26.743084 26.733874-26.743084l240.60487 0c14.776542 0 26.733874 11.957333 26.733874 26.743084 0 14.776542-11.957333 26.733874-26.733874 26.733874L271.394618 458.536344C256.618077 458.536344 244.660744 446.579011 244.660744 431.80247zM725.870484 886.278335l-427.741991 0L298.128493 645.673465l427.741991 0L725.870484 886.278335zM725.870484 271.399223l-427.741991 0L298.128493 137.721665l427.741991 0L725.870484 271.399223z"',101:['d="M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z"','d="M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z"','d="M560.256 725.333333h-55.011556V374.855111c-13.226667 12.629333-30.648889 25.272889-52.238222 37.902222-21.390222 12.629333-40.647111 22.101333-57.756444 28.416V387.982222c30.762667-14.464 57.642667-31.971556 80.668444-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456V725.333333z"'],102:['d="M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z"','d="M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z"','d="M642.133333 672.469333V725.333333H346.055111a97.308444 97.308444 0 0 1 6.414222-38.186666c7.537778-20.167111 19.555556-40.035556 36.053334-59.591111 16.711111-19.555556 40.746667-42.168889 72.106666-67.84 48.696889-39.921778 81.592889-71.495111 98.702223-94.72 17.109333-23.424 25.671111-45.511111 25.671111-66.304 0-21.788444-7.850667-40.120889-23.537778-54.997334-15.473778-15.075556-35.740444-22.613333-60.8-22.613333-26.481778 0-47.658667 7.950222-63.559111 23.836444-15.886222 15.886222-23.936 37.888-24.135111 65.991111l-56.519111-5.802666c3.868444-42.168889 18.432-74.24 43.690666-96.241778 25.258667-22.200889 59.164444-33.308444 101.745778-33.308444 42.979556 0 76.999111 11.918222 102.058667 35.754666 25.059556 23.822222 37.575111 53.361778 37.575111 88.604445 0 17.92-3.655111 35.555556-10.993778 52.864s-19.555556 35.555556-36.664889 54.698666c-16.910222 19.143111-45.127111 45.425778-84.636444 78.833778-32.995556 27.690667-54.186667 46.535111-63.573334 56.519111a175.928889 175.928889 0 0 0-23.210666 29.639111H642.133333z"'],103:['d="M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z"','d="M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z"','d="M353.393778 607.075556l54.997333-7.324445c6.314667 31.160889 17.009778 53.674667 32.085333 67.527111 15.274667 13.653333 33.806222 20.48 55.608889 20.48 25.870222 0 47.658667-8.96 65.379556-26.894222 17.92-17.92 26.894222-40.135111 26.894222-66.616889 0-25.258667-8.248889-46.037333-24.746667-62.336-16.497778-16.497778-37.489778-24.746667-62.947555-24.746667-10.382222 0-23.324444 2.033778-38.798222 6.115556l6.115555-48.284444c3.655111 0.412444 6.613333 0.611556 8.846222 0.611555 23.438222 0 44.515556-6.115556 63.260445-18.332444 18.730667-12.231111 28.103111-31.061333 28.103111-56.519111 0-20.167111-6.826667-36.878222-20.48-50.119112-13.639111-13.226667-31.260444-19.854222-52.849778-19.854222-21.390222 0-39.210667 6.712889-53.475555 20.167111-14.250667 13.44-23.424 33.607111-27.491556 60.501334l-55.011555-9.784889c6.727111-36.864 22.001778-65.393778 45.838222-85.560889 23.836444-20.366222 53.475556-30.549333 88.917333-30.549333 24.448 0 46.947556 5.290667 67.527111 15.886222 20.579556 10.382222 36.266667 24.647111 47.061334 42.780444 10.993778 18.133333 16.497778 37.376 16.497777 57.742222 0 19.356444-5.205333 36.977778-15.587555 52.864-10.382222 15.886222-25.770667 28.529778-46.136889 37.888 26.481778 6.115556 47.061333 18.844444 61.724444 38.200889 14.663111 19.143111 22.001778 43.178667 22.001778 72.106667 0 39.111111-14.264889 72.32-42.780444 99.612444-28.515556 27.093333-64.568889 40.647111-108.174223 40.647112-39.310222 0-72.007111-11.719111-98.076444-35.143112-25.884444-23.424-40.647111-53.774222-44.302222-91.064888z"'],104:['d="M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z"','d="M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z"','d="M529.393778 725.333333v-107.249777H335.061333v-50.417778l204.416-290.275556h44.913778v290.275556h60.501333v50.417778H584.391111V725.333333h-54.997333z m0-157.667555V365.696L389.12 567.665778h140.259556z"'],105:['d="M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z"','d="M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z"','d="M353.080889 608l57.742222-4.892444c4.295111 28.117333 14.165333 49.294222 29.653333 63.559111 15.687111 14.051556 34.517333 21.077333 56.519112 21.077333 26.481778 0 48.896-9.969778 67.228444-29.937778 18.332444-19.968 27.505778-46.449778 27.505778-79.445333 0-31.374222-8.874667-56.120889-26.595556-74.24-17.507556-18.133333-40.533333-27.207111-69.048889-27.207111-17.720889 0-33.706667 4.081778-47.971555 12.231111-14.264889 7.936-25.457778 18.332444-33.607111 31.160889l-51.640889-6.727111 43.377778-230.072889h222.762666v52.551111H450.247111l-24.135111 120.391111c26.88-18.744889 55.096889-28.117333 84.636444-28.117333 39.111111 0 72.106667 13.553778 99.000889 40.647111 26.88 27.093333 40.334222 61.923556 40.334223 104.490666 0 40.533333-11.804444 75.576889-35.441778 105.102223-28.728889 36.266667-67.939556 54.4-117.646222 54.4-40.732444 0-74.040889-11.406222-99.911112-34.218667-25.671111-22.812444-40.334222-53.063111-44.003555-90.752z" '],106:['d="M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z"','d="M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z"','d="M638.478222 387.086222l-54.698666 4.266667c-4.892444-21.589333-11.804444-37.262222-20.778667-47.047111-14.876444-15.687111-33.208889-23.523556-54.997333-23.523556-17.521778 0-32.896 4.878222-46.136889 14.648889-17.322667 12.643556-30.976 31.075556-40.96 55.324445-9.969778 24.234667-15.160889 58.766222-15.573334 103.580444 13.240889-20.167111 29.44-35.128889 48.583111-44.913778a130.659556 130.659556 0 0 1 60.188445-14.677333c36.679111 0 67.84 13.553778 93.511111 40.647111 25.870222 26.88 38.798222 61.724444 38.798222 104.490667 0 28.117333-6.115556 54.286222-18.332444 78.535111-12.017778 24.035556-28.615111 42.467556-49.806222 55.310222-21.191111 12.828444-45.226667 19.242667-72.106667 19.242667-45.838222 0-83.214222-16.796444-112.142222-50.417778-28.928-33.806222-43.377778-89.429333-43.377778-166.826667 0-86.584889 15.985778-149.518222 47.957333-188.842666 27.918222-34.218667 65.493333-51.328 112.753778-51.328 35.242667 0 64.071111 9.884444 86.471111 29.639111 22.613333 19.768889 36.167111 47.061333 40.647111 81.891555zM413.895111 580.195556c0 18.944 3.968 37.077333 11.904 54.385777 8.149333 17.322667 19.456 30.563556 33.92 39.722667 14.464 8.96 29.639111 13.44 45.525333 13.44 23.224889 0 43.192889-9.358222 59.889778-28.103111 16.711111-18.744889 25.059556-44.202667 25.059556-76.387556 0-30.961778-8.248889-55.310222-24.746667-73.031111-16.497778-17.92-37.276444-26.88-62.336-26.88-24.846222 0-45.937778 8.96-63.246222 26.88-17.322667 17.720889-25.969778 41.045333-25.969778 69.973334z"'],107:['d="M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z"','d="M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z"','d="M370.972444 336.056889v-52.864h289.976889v42.780444c-28.529778 30.350222-56.832 70.684444-84.949333 121.002667-27.904 50.304-49.493333 102.044444-64.782222 155.221333-10.993778 37.475556-18.019556 78.520889-21.077334 123.136h-56.533333c0.611556-35.242667 7.537778-77.809778 20.778667-127.715555a672.099556 672.099556 0 0 1 56.832-144.227556c24.860444-46.449778 51.228444-85.560889 79.146666-117.333333H370.972444z"'],108:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M437.717333 482.417778c-22.812444-8.348444-39.722667-20.266667-50.716444-35.754667-10.993778-15.473778-16.497778-34.019556-16.497778-55.608889 0-32.597333 11.704889-59.989333 35.128889-82.204444 23.438222-22.186667 54.599111-33.294222 93.511111-33.294222 39.111111 0 70.584889 11.406222 94.407111 34.218666 23.836444 22.613333 35.754667 50.204444 35.754667 82.816 0 20.764444-5.504 38.897778-16.497778 54.385778-10.808889 15.274667-27.306667 27.093333-49.493333 35.441778 27.491556 8.96 48.369778 23.424 62.634666 43.377778 14.464 19.968 21.688889 43.804444 21.688889 71.509333 0 38.300444-13.539556 70.485333-40.632889 96.568889-27.093333 26.055111-62.748444 39.111111-106.951111 39.111111-44.202667 0-79.843556-13.056-106.951111-39.111111-27.079111-26.282667-40.632889-58.979556-40.632889-98.090667 0-29.141333 7.338667-53.475556 22.001778-73.031111 14.876444-19.768889 35.953778-33.208889 63.246222-40.334222z m-10.993777-93.198222c0 21.191111 6.826667 38.499556 20.48 51.939555 13.639111 13.454222 31.36 20.181333 53.162666 20.181333 21.191111 0 38.499556-6.627556 51.939556-19.868444 13.653333-13.44 20.48-29.838222 20.48-49.194667 0-20.167111-7.04-37.077333-21.091556-50.716444-13.852444-13.852444-31.160889-20.778667-51.939555-20.778667-20.992 0-38.4 6.712889-52.252445 20.167111-13.852444 13.44-20.778667 29.525333-20.778666 48.270223z m-17.720889 206.862222c0 15.687111 3.669333 30.862222 10.993777 45.525333a80.540444 80.540444 0 0 0 33.308445 34.232889 97.905778 97.905778 0 0 0 47.36 11.904c26.282667 0 47.971556-8.448 65.080889-25.358222 17.109333-16.910222 25.671111-38.4 25.671111-64.469334 0-26.481778-8.860444-48.384-26.595556-65.706666-17.493333-17.308444-39.509333-25.955556-65.991111-25.955556-25.870222 0-47.36 8.547556-64.469333 25.656889-16.910222 17.109333-25.358222 38.499556-25.358222 64.170667z'"],109:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M361.329778 621.752889l52.864-4.892445c4.48 24.846222 13.041778 42.88 25.671111 54.087112 12.629333 11.207111 28.814222 16.796444 48.583111 16.796444 16.910222 0 31.672889-3.868444 44.302222-11.605333a94.947556 94.947556 0 0 0 31.473778-30.862223c8.149333-13.041778 14.976-30.549333 20.48-52.551111 5.489778-22.001778 8.248889-44.416 8.248889-67.228444 0-2.446222-0.113778-6.115556-0.312889-10.993778-10.993778 17.521778-26.069333 31.772444-45.226667 42.780445a122.538667 122.538667 0 0 1-61.724444 16.184888c-37.063111 0-68.437333-13.44-94.108445-40.334222-25.671111-26.88-38.499556-62.336-38.499555-106.325333 0-45.425778 13.340444-81.991111 40.035555-109.696 26.88-27.704889 60.501333-41.557333 100.835556-41.557333 29.127111 0 55.708444 7.836444 79.744 23.523555 24.234667 15.687111 42.567111 38.101333 54.997333 67.228445 12.629333 28.928 18.944 70.883556 18.944 125.880888 0 57.244444-6.215111 102.869333-18.631111 136.888889-12.430222 33.820444-30.961778 59.591111-55.608889 77.312-24.462222 17.720889-53.176889 26.595556-86.186666 26.595556-35.029333 0-63.644444-9.685333-85.845334-29.041778-22.200889-19.555556-35.555556-46.947556-40.035555-82.204444z m225.194666-197.688889c0-31.573333-8.448-56.632889-25.358222-75.178667-16.696889-18.531556-36.864-27.804444-60.501333-27.804444-24.448 0-45.724444 9.984-63.857778 29.952-18.133333 19.953778-27.192889 45.824-27.192889 77.610667 0 28.515556 8.547556 51.740444 25.671111 69.660444 17.308444 17.720889 38.599111 26.595556 63.857778 26.595556 25.457778 0 46.336-8.874667 62.634667-26.595556 16.497778-17.92 24.746667-42.666667 24.746666-74.24z'"],110:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M512 85.333333A426.709333 426.709333 0 0 0 85.333333 512h426.666667H85.333333a426.709333 426.709333 0 0 0 426.666667 426.666667 426.709333 426.709333 0 0 0 426.666667-426.666667H512h426.666667a426.709333 426.709333 0 0 0-124.970667-301.696L512 512V85.333333z'"],111:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M298.666667 142.506667A426.609778 426.609778 0 0 0 142.506667 725.333333 426.609778 426.609778 0 0 0 725.333333 881.493333 426.609778 426.609778 0 0 0 938.666667 512H512V85.333333a426.552889 426.552889 0 0 0-213.333333 57.173334z'"],112:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M85.333333 512C85.333333 276.352 276.352 85.333333 512 85.333333v426.666667h0.597333l-0.597333 0.597333 301.397333 301.397334C736.213333 891.036444 629.674667 938.666667 512 938.666667 276.352 938.666667 85.333333 747.648 85.333333 512z'"],113:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M298.666667 142.506667A426.609778 426.609778 0 0 0 142.506667 725.333333 426.609778 426.609778 0 0 0 512 938.666667V85.333333a426.552889 426.552889 0 0 0-213.333333 57.173334z'"],114:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M85.333333 512C85.333333 281.116444 268.714667 93.070222 497.777778 85.560889V509.44L202.026667 805.191111A425.201778 425.201778 0 0 1 85.333333 512z'"],115:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M85.333333 512A426.609778 426.609778 0 0 1 512 85.333333v426.666667H85.333333z'"],116:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M210.304 210.304A426.709333 426.709333 0 0 1 512 85.333333v426.666667L210.304 210.304z'"],117:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M759.438222 349.44a28.444444 28.444444 0 0 1 0.469334 40.220444L461.738667 694.912 278.314667 507.136a28.444444 28.444444 0 1 1 40.704-39.751111l142.72 146.133333 257.464889-263.608889a28.444444 28.444444 0 0 1 40.220444-0.483555z'"],118:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M412.444444 384c0 62.833778-44.572444 113.777778-99.555555 113.777778s-99.555556-50.944-99.555556-113.777778 44.572444-113.777778 99.555556-113.777778 99.555556 50.944 99.555555 113.777778z'","d='M398.222222 384c0 54.983111-38.200889 99.555556-85.333333 99.555556s-85.333333-44.572444-85.333333-99.555556 38.200889-99.555556 85.333333-99.555556 85.333333 44.572444 85.333333 99.555556z'","d='M796.444444 384c0 62.833778-44.572444 113.777778-99.555555 113.777778s-99.555556-50.944-99.555556-113.777778 44.572444-113.777778 99.555556-113.777778 99.555556 50.944 99.555555 113.777778z'","d='M782.222222 384c0 54.983111-38.200889 99.555556-85.333333 99.555556s-85.333333-44.572444-85.333333-99.555556 38.200889-99.555556 85.333333-99.555556 85.333333 44.572444 85.333333 99.555556z'","d='M369.777778 440.888889a56.888889 56.888889 0 1 1-113.777778 0 56.888889 56.888889 0 0 1 113.777778 0zM753.777778 440.888889a56.888889 56.888889 0 1 1-113.777778 0 56.888889 56.888889 0 0 1 113.777778 0z'","d='M292.807111 612.821333a14.222222 14.222222 0 0 1 18.816 7.096889C347.349333 698.88 426.823111 753.777778 519.054222 753.777778c92.259556 0 171.719111-54.897778 207.445334-133.859556a14.222222 14.222222 0 1 1 25.912888 11.719111C712.248889 720.412444 622.890667 782.222222 519.054222 782.222222c-103.822222 0-193.180444-61.809778-233.344-150.584889a14.222222 14.222222 0 0 1 7.096889-18.816z'"],119:["d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M412.444444 384c0 62.833778-44.572444 113.777778-99.555555 113.777778s-99.555556-50.944-99.555556-113.777778 44.572444-113.777778 99.555556-113.777778 99.555556 50.944 99.555555 113.777778z'","d='M398.222222 384c0 54.983111-38.200889 99.555556-85.333333 99.555556s-85.333333-44.572444-85.333333-99.555556 38.200889-99.555556 85.333333-99.555556 85.333333 44.572444 85.333333 99.555556z'","d='M796.444444 384c0 62.833778-44.572444 113.777778-99.555555 113.777778s-99.555556-50.944-99.555556-113.777778 44.572444-113.777778 99.555556-113.777778 99.555556 50.944 99.555555 113.777778z'","d='M782.222222 384c0 54.983111-38.200889 99.555556-85.333333 99.555556s-85.333333-44.572444-85.333333-99.555556 38.200889-99.555556 85.333333-99.555556 85.333333 44.572444 85.333333 99.555556z'","d='M369.777778 440.888889a56.888889 56.888889 0 1 1-113.777778 0 56.888889 56.888889 0 0 1 113.777778 0zM753.777778 440.888889a56.888889 56.888889 0 1 1-113.777778 0 56.888889 56.888889 0 0 1 113.777778 0z'","d='M745.315556 780.956444a14.222222 14.222222 0 0 1-18.816-7.096888C690.773333 694.897778 611.299556 640 519.054222 640c-92.245333 0-171.704889 54.897778-207.431111 133.859556a14.222222 14.222222 0 0 1-25.912889-11.719112C325.873778 673.365333 415.232 611.555556 519.054222 611.555556c103.836444 0 193.194667 61.809778 233.358222 150.584888a14.222222 14.222222 0 0 1-7.096888 18.816z'"],120:["d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M201.016889 376.888889a14.222222 14.222222 0 0 1 5.205333-19.427556l147.797334-85.333333a14.222222 14.222222 0 1 1 14.222222 24.632889l-147.797334 85.333333a14.222222 14.222222 0 0 1-19.427555-5.205333zM828.558222 376.888889a14.222222 14.222222 0 0 0-5.205333-19.427556l-147.797333-85.333333a14.222222 14.222222 0 1 0-14.222223 24.632889l147.797334 85.333333a14.222222 14.222222 0 0 0 19.427555-5.205333z'","d='M853.333333 512a341.333333 341.333333 0 0 1-682.666666 0h682.666666z'","d='M743.495111 736.455111c-3.328 3.157333-6.741333 6.257778-10.24 9.287111-29.070222 25.088-63.559111 44.999111-101.518222 58.581334A356.209778 356.209778 0 0 1 511.985778 824.888889c-41.073778 0-81.763556-6.997333-119.722667-20.565333-37.973333-13.582222-72.462222-33.493333-101.504-58.581334a292.039111 292.039111 0 0 1-11.278222-10.268444c22.371556-17.92 62.478222-35.299556 104.519111-31.473778 59.107556 5.376 101.973333 35.100444 122.453333 49.322667 6.627556 4.593778 10.922667 7.566222 12.657778 7.566222 1.777778 0 7.594667-3.370667 16.199111-8.362667C560.995556 737.621333 611.598222 708.266667 654.222222 711.111111c44.956444 2.986667 72.248889 13.582222 89.272889 25.344z'","d='M753.450667 725.461333a327.253333 327.253333 0 0 1-116.266667 81.507556A327.111111 327.111111 0 0 1 270.435556 725.333333c49.820444 28.444444 137.898667 70.983111 241.564444 70.983111 127.502222 0 212.679111-49.393778 241.450667-70.855111zM811.847111 625.777778H212.152889A286.065778 286.065778 0 0 1 199.111111 540.444444h625.777778c0 28.956444-4.408889 57.685333-13.041778 85.333334z'","d='M440.888889 413.383111c0 9.031111-44.572444-10.908444-99.555556-10.908444s-99.555556 19.939556-99.555555 10.908444C241.777778 404.337778 286.350222 355.555556 341.333333 355.555556s99.555556 48.782222 99.555556 57.827555zM782.222222 413.383111c0 9.031111-44.572444-10.908444-99.555555-10.908444s-99.555556 19.939556-99.555556 10.908444C583.111111 404.337778 627.683556 355.555556 682.666667 355.555556s99.555556 48.782222 99.555555 57.827555z'","d='M213.831111 578.247111c-31.943111 55.324444-77.226667 58.168889-93.610667 48.711111-16.355556-9.457778-36.551111-50.090667-4.608-105.429333 31.943111-55.324444 120.305778-94.947556 120.305778-94.947556s9.856 96.327111-22.087111 151.665778z'","d='M242.986667 425.856l-7.068445 0.711111-2.915555-6.485333 8.988444-4.024889 0.995556 9.799111z m-13.397334 11.662222l-4.693333 2.417778c-8.632889 4.508444-20.48 11.079111-33.294222 19.342222-25.884444 16.682667-54.755556 39.68-69.831111 65.806222-30.648889 53.077333-9.927111 88.817778 2.005333 95.715556 11.946667 6.883556 53.262222 6.954667 83.896889-46.108444 15.089778-26.140444 20.565333-62.634667 22.072889-93.383112a422.940444 422.940444 0 0 0-0.156445-43.776z m6.328889-10.951111l-2.915555-6.485333-0.028445 0.014222-0.056889 0.028444-0.213333 0.099556-0.782222 0.355556-2.944 1.393777a437.248 437.248 0 0 0-45.084445 25.344c-26.311111 16.967111-57.6 41.472-74.439111 70.656-33.265778 57.6-13.596444 103.125333 7.210667 115.143111 20.807111 12.017778 70.072889 6.286222 103.324444-51.313777 16.853333-29.198222 22.428444-68.551111 23.964445-99.797334a437.859556 437.859556 0 0 0-0.583111-51.712 251.804444 251.804444 0 0 0-0.284445-3.256889l-0.071111-0.853333-0.014222-0.241778v-0.056889l-0.014222-0.028444-7.068445 0.711111z'","d='M808.760889 578.090667c31.943111 55.324444 77.226667 58.168889 93.596444 48.711111 16.369778-9.443556 36.565333-50.090667 4.622223-105.415111s-120.305778-94.961778-120.305778-94.961778-9.870222 96.327111 22.087111 151.665778z'","d='M779.605333 425.699556l7.068445 0.725333 2.915555-6.485333-8.988444-4.024889-0.995556 9.784889z m13.397334 11.676444a423.438222 423.438222 0 0 1 37.987555 21.76c25.870222 16.682667 54.741333 39.665778 69.831111 65.806222 30.634667 53.063111 9.927111 88.817778-2.019555 95.715556-11.932444 6.883556-53.248 6.940444-83.882667-46.122667-15.089778-26.140444-20.565333-62.634667-22.087111-93.383111a423.964444 423.964444 0 0 1 0.170667-43.776z m-6.328889-10.951111l2.915555-6.485333h0.014223l0.071111 0.028444 0.199111 0.099556 0.796444 0.369777 2.944 1.393778a437.902222 437.902222 0 0 1 45.084445 25.344c26.311111 16.967111 57.585778 41.457778 74.439111 70.656 33.251556 57.6 13.582222 103.111111-7.224889 115.128889-20.792889 12.017778-70.058667 6.286222-103.310222-51.313778-16.853333-29.198222-22.428444-68.536889-23.964445-99.783111a437.447111 437.447111 0 0 1 0.583111-51.726222l0.270223-3.256889 0.071111-0.853333 0.028444-0.227556v-0.099555l7.082667 0.725333z'"],121:["d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M455.111111 318.677333C455.111111 396.344889 334.222222 455.111111 334.222222 455.111111S213.333333 396.572444 213.333333 318.677333C213.333333 284.074667 242.090667 256 277.560889 256c23.907556 0 44.785778 12.771556 55.836444 31.715556 0.355556 0.611556 1.28 0.611556 1.621334 0A64.540444 64.540444 0 0 1 390.883556 256C426.353778 256 455.111111 284.074667 455.111111 318.677333zM810.666667 318.677333C810.666667 396.344889 689.777778 455.111111 689.777778 455.111111S568.888889 396.572444 568.888889 318.677333C568.888889 284.074667 597.646222 256 633.116444 256c23.907556 0 44.785778 12.771556 55.836445 31.715556 0.355556 0.611556 1.28 0.611556 1.621333 0A64.540444 64.540444 0 0 1 746.439111 256C781.909333 256 810.666667 284.074667 810.666667 318.677333z'","d='M853.333333 512a341.333333 341.333333 0 0 1-682.666666 0h682.666666z'","d='M625.678222 802.417778a298.666667 298.666667 0 0 1-227.356444 0A180.309333 180.309333 0 0 1 398.222222 796.444444c0-78.549333 50.944-142.222222 113.777778-142.222222s113.777778 63.672889 113.777778 142.222222c0 1.991111-0.028444 3.982222-0.099556 5.973334z'","d='M210.033778 618.666667A285.952 285.952 0 0 1 199.111111 540.444444h625.777778c0 26.481778-3.697778 52.764444-10.922667 78.222223H210.033778zM753.450667 725.461333A327.139556 327.139556 0 0 1 270.449778 725.333333c49.806222 28.444444 137.884444 70.983111 241.550222 70.983111 127.502222 0 212.679111-49.393778 241.450667-70.855111z'"],122:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M853.333333 512a341.333333 341.333333 0 0 1-682.666666 0h682.666666z'","d='M824.888889 540.444444c0 37.347556-8.092444 74.339556-23.822222 108.856889-15.715556 34.503111-38.769778 65.863111-67.825778 92.273778-29.041778 26.410667-63.544889 47.36-101.504 61.667556A340.224 340.224 0 0 1 512 824.888889c-41.102222 0-81.777778-7.352889-119.736889-21.646222-37.973333-14.307556-72.462222-35.256889-101.504-61.667556-29.056-26.410667-52.110222-57.770667-67.84-92.273778A262.172444 262.172444 0 0 1 199.111111 540.444444h625.777778z'","d='M469.333333 822.229333a340.778667 340.778667 0 0 1-28.444444-4.778666V540.444444h28.444444v281.784889z m142.222223-12.117333c-9.358222 2.844444-18.844444 5.304889-28.444445 7.338667V540.444444h28.444445v269.653334z m142.222222-89.116444a296.291556 296.291556 0 0 1-28.444445 27.52V540.444444h28.444445v180.551112zM327.111111 540.444444v229.475556a308.679111 308.679111 0 0 1-28.444444-21.404444V540.444444h28.444444zM274.176 307.640889C263.224889 323.015111 256 344.917333 256 369.777778a14.222222 14.222222 0 1 1-28.444444 0c0-30.108444 8.689778-57.969778 23.466666-78.663111C265.813333 270.449778 287.488 256 312.888889 256c25.429333 0 47.089778 14.449778 61.866667 35.114667C389.504 311.808 398.222222 339.669333 398.222222 369.777778a14.222222 14.222222 0 1 1-28.444444 0c0-24.874667-7.224889-46.791111-18.176-62.136889C340.622222 292.280889 326.741333 284.444444 312.888889 284.444444s-27.733333 7.836444-38.712889 23.196445zM672.398222 307.640889C661.447111 323.015111 654.222222 344.917333 654.222222 369.777778a14.222222 14.222222 0 1 1-28.444444 0c0-30.108444 8.689778-57.969778 23.466666-78.663111C664.035556 270.449778 685.710222 256 711.111111 256c25.429333 0 47.089778 14.449778 61.866667 35.114667C787.726222 311.808 796.444444 339.669333 796.444444 369.777778a14.222222 14.222222 0 1 1-28.444444 0c0-24.874667-7.224889-46.791111-18.176-62.136889C738.844444 292.280889 724.963556 284.444444 711.111111 284.444444s-27.733333 7.836444-38.712889 23.196445zM231.580444 112.014222c-20.693333 19.143111-37.333333 47.146667-47.416888 77.425778a14.222222 14.222222 0 0 1-26.993778-8.988444c11.249778-33.777778 30.151111-66.247111 55.096889-89.315556 25.088-23.196444 57.059556-37.489778 93.198222-32.213333 30.065778 4.394667 49.905778 24.035556 61.795555 45.240889C379.050667 125.155556 384 149.12 384 166.286222a14.222222 14.222222 0 1 1-28.444444 0c0-12.643556-3.868444-31.758222-13.084445-48.199111-9.102222-16.213333-22.456889-28.302222-41.116444-31.018667-25.500444-3.726222-49.223111 5.944889-69.774223 24.945778zM792.419556 112.014222c20.693333 19.143111 37.333333 47.146667 47.416888 77.425778a14.222222 14.222222 0 0 0 26.993778-8.988444c-11.249778-33.777778-30.151111-66.247111-55.096889-89.315556-25.088-23.196444-57.059556-37.489778-93.198222-32.213333-30.065778 4.394667-49.905778 24.035556-61.809778 45.240889C644.949333 125.155556 640 149.12 640 166.286222a14.222222 14.222222 0 1 0 28.444444 0c0-12.643556 3.868444-31.758222 13.084445-48.199111 9.102222-16.213333 22.456889-28.302222 41.116444-31.018667 25.500444-3.726222 49.223111 5.944889 69.774223 24.945778z'"],123:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M412.444444 384c0 62.833778-44.572444 113.777778-99.555555 113.777778s-99.555556-50.944-99.555556-113.777778 44.572444-113.777778 99.555556-113.777778 99.555556 50.944 99.555555 113.777778z'","d='M398.222222 384c0 54.983111-38.200889 99.555556-85.333333 99.555556s-85.333333-44.572444-85.333333-99.555556 38.200889-99.555556 85.333333-99.555556 85.333333 44.572444 85.333333 99.555556z'","d='M796.444444 384c0 62.833778-44.572444 113.777778-99.555555 113.777778s-99.555556-50.944-99.555556-113.777778 44.572444-113.777778 99.555556-113.777778 99.555556 50.944 99.555555 113.777778z'","d='M782.222222 384c0 54.983111-38.200889 99.555556-85.333333 99.555556s-85.333333-44.572444-85.333333-99.555556 38.200889-99.555556 85.333333-99.555556 85.333333 44.572444 85.333333 99.555556z'","d='M355.555556 426.666667a56.888889 56.888889 0 1 1-113.777778 0 56.888889 56.888889 0 0 1 113.777778 0zM739.555556 426.666667a56.888889 56.888889 0 1 1-113.777778 0 56.888889 56.888889 0 0 1 113.777778 0z'","d='M701.44 740.593778a14.222222 14.222222 0 0 1-19.825778 3.498666c-6.328889-4.423111-12.615111-8.874667-18.872889-13.312C597.191111 684.387556 534.471111 640 455.068444 640c-20.309333 0-37.973333 6.229333-50.403555 17.607111C392.448 668.785778 384 686.122667 384 711.111111a14.222222 14.222222 0 1 1-28.444444 0c0-31.900444 11.050667-57.230222 29.909333-74.496 18.631111-17.066667 43.619556-25.059556 69.589333-25.059555 88.988444 0 159.232 49.891556 223.516445 95.544888 6.499556 4.622222 12.956444 9.201778 19.356444 13.696a14.222222 14.222222 0 0 1 3.498667 19.797334zM764.629333 102.030222a14.222222 14.222222 0 0 1 1.251556 20.067556 2217.130667 2217.130667 0 0 1-65.92 71.224889c-25.500444 26.311111-52.437333 52.48-71.296 66.517333-10.965333 8.163556-22.343111 12.145778-33.706667 12.046222-11.235556-0.099556-21.048889-4.181333-29.056-9.685333-15.573333-10.709333-26.24-28.017778-31.516444-40.263111a14.222222 14.222222 0 0 1 26.112-11.278222c4.124444 9.528889 11.989333 21.546667 21.518222 28.088888 4.551111 3.128889 8.931556 4.650667 13.198222 4.693334 4.152889 0.028444 9.6-1.322667 16.455111-6.428445 16.782222-12.487111 42.282667-37.091556 67.868445-63.488a2190.222222 2190.222222 0 0 0 65.009778-70.257777 14.222222 14.222222 0 0 1 20.081777-1.237334zM277.504 126.08a14.222222 14.222222 0 0 0-5.475556 19.342222c28.686222 51.313778 72.462222 112.284444 110.592 140.672 22.428444 16.696889 48.213333 17.024 69.148445 4.536889 20.337778-12.145778 34.702222-35.413333 38.755555-63.715555a14.222222 14.222222 0 0 0-28.16-4.024889c-3.072 21.475556-13.539556 36.366222-25.173333 43.306666-11.050667 6.599111-24.376889 6.912-37.589333-2.915555-33.137778-24.689778-74.538667-81.308444-102.741334-131.740445a14.222222 14.222222 0 0 0-19.356444-5.461333z'"],124:["d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M220.444444 384a21.333333 21.333333 0 0 1 21.333334-21.333333h184.888889a21.333333 21.333333 0 0 1 0 42.666666H241.777778a21.333333 21.333333 0 0 1-21.333334-21.333333zM625.777778 696.888889a14.222222 14.222222 0 0 1-14.222222 14.222222H412.444444a14.222222 14.222222 0 1 1 0-28.444444h199.111112a14.222222 14.222222 0 0 1 14.222222 14.222222zM215.239111 177.777778a14.222222 14.222222 0 0 0 5.205333 19.427555l181.418667 104.746667a14.222222 14.222222 0 0 0 14.222222-24.632889L234.666667 172.572444a14.222222 14.222222 0 0 0-19.427556 5.205334zM804.451556 177.777778a14.222222 14.222222 0 0 1-5.205334 19.427555l-181.418666 104.746667a14.222222 14.222222 0 0 1-14.222223-24.632889l181.418667-104.746667a14.222222 14.222222 0 0 1 19.427556 5.205334zM576 384a21.333333 21.333333 0 0 1 21.333333-21.333333h184.888889a21.333333 21.333333 0 0 1 0 42.666666H597.333333a21.333333 21.333333 0 0 1-21.333333-21.333333zM839.111111 85.333333a14.222222 14.222222 0 0 1 14.222222 14.222223v241.777777a14.222222 14.222222 0 1 1-28.444444 0V99.555556a14.222222 14.222222 0 0 1 14.222222-14.222223zM910.222222 142.222222a14.222222 14.222222 0 0 1 14.222222 14.222222v199.111112a14.222222 14.222222 0 1 1-28.444444 0V156.444444a14.222222 14.222222 0 0 1 14.222222-14.222222zM981.333333 184.888889a14.222222 14.222222 0 0 1 14.222223 14.222222v184.888889a14.222222 14.222222 0 1 1-28.444445 0V199.111111a14.222222 14.222222 0 0 1 14.222222-14.222222z'"],125:["d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M632.888889 696.888889a21.333333 21.333333 0 0 1-21.333333 21.333333H412.444444a21.333333 21.333333 0 0 1 0-42.666666h199.111112a21.333333 21.333333 0 0 1 21.333333 21.333333z'","d='M426.666667 341.333333a113.763556 113.763556 0 1 1-227.555556 0h227.555556z'","d='M412.444444 341.333333a99.569778 99.569778 0 0 1-169.955555 70.4A99.527111 99.527111 0 0 1 213.333333 341.333333h199.111111z'","d='M426.666667 355.555556a113.763556 113.763556 0 1 0-227.555556 0h227.555556zM824.888889 355.555556a113.763556 113.763556 0 1 0-227.555556 0h227.555556z'","d='M824.888889 341.333333a113.763556 113.763556 0 1 1-227.555556 0h227.555556z'","d='M810.666667 341.333333a99.569778 99.569778 0 0 1-169.955556 70.4A99.527111 99.527111 0 0 1 611.555556 341.333333h199.111111z'","d='M369.777778 355.555556a56.888889 56.888889 0 0 1-113.777778 0h113.777778zM768 355.555556a56.888889 56.888889 0 0 1-113.777778 0h113.777778z'"],126:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M312.888889 312.888889c62.833778 0 113.777778 44.572444 113.777778 99.555555s-50.944 99.555556-113.777778 99.555556-113.777778-44.572444-113.777778-99.555556 50.944-99.555556 113.777778-99.555555z'","d='M312.888889 327.111111c54.983111 0 99.555556 38.200889 99.555555 85.333333s-44.572444 85.333333-99.555555 85.333334-99.555556-38.200889-99.555556-85.333334 44.572444-85.333333 99.555556-85.333333z'","d='M696.888889 512c-62.833778 0-113.777778-44.572444-113.777778-99.555556s50.944-99.555556 113.777778-99.555555 113.777778 44.572444 113.777778 99.555555-50.944 99.555556-113.777778 99.555556z'","d='M696.888889 497.777778c-54.983111 0-99.555556-38.200889-99.555556-85.333334s44.572444-85.333333 99.555556-85.333333 99.555556 38.200889 99.555555 85.333333-44.572444 85.333333-99.555555 85.333334z'","d='M384 355.555556c23.566222 0 42.666667 25.457778 42.666667 56.888888s-19.100444 56.888889-42.666667 56.888889-42.666667-25.457778-42.666667-56.888889 19.100444-56.888889 42.666667-56.888888zM625.777778 469.333333c-23.566222 0-42.666667-25.457778-42.666667-56.888889s19.100444-56.888889 42.666667-56.888888 42.666667 25.457778 42.666666 56.888888-19.100444 56.888889-42.666666 56.888889z'","d='M341.333333 696.888889a14.222222 14.222222 0 0 1 14.222223-14.222222h327.111111a14.222222 14.222222 0 1 1 0 28.444444H355.555556a14.222222 14.222222 0 0 1-14.222223-14.222222z'"],127:["d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M952.888889 512c0 243.484444-197.404444 440.888889-440.888889 440.888889C268.515556 952.888889 71.111111 755.484444 71.111111 512 71.111111 268.515556 268.515556 71.111111 512 71.111111c243.484444 0 440.888889 197.404444 440.888889 440.888889z'","d='M625.777778 696.888889a14.222222 14.222222 0 0 1-14.222222 14.222222H412.444444a14.222222 14.222222 0 1 1 0-28.444444h199.111112a14.222222 14.222222 0 0 1 14.222222 14.222222zM271.672889 372.906667c2.503111-24.96 25.742222-59.776 71.637333-65.180445 17.578667-2.062222 33.251556 1.450667 44.515556 9.628445 10.951111 7.921778 19.313778 21.333333 20.650666 42.567111 0.768 12.288-2.147556 25.116444-9.059555 34.488889-6.485333 8.789333-17.365333 15.843556-35.953778 15.843555-6.314667 0-15.075556-2.304-21.902222-7.253333-6.4-4.593778-10.709333-11.093333-10.709333-20.565333 0-11.178667 4.394667-15.260444 7.864888-17.208889a18.503111 18.503111 0 0 1 9.912889-2.176c0.711111 0.071111 1.052444 0.156444 1.052445 0.142222h-0.014222a14.222222 14.222222 0 1 0 8.903111-27.008c-8.647111-2.844444-22.129778-2.204444-33.649778 4.181333-12.899556 7.153778-22.528 20.992-22.528 42.069334 0 20.096 10.012444 34.616889 22.513778 43.648a68.266667 68.266667 0 0 0 38.556444 12.615111c27.022222 0 46.663111-10.88 58.851556-27.406223 11.747556-15.957333 15.630222-35.84 14.549333-53.134222-1.792-28.615111-13.667556-50.318222-32.341333-63.829333-18.318222-13.283556-41.585778-17.550222-64.526223-14.848-60.046222 7.068444-92.885333 53.248-96.625777 90.595555-5.319111 53.276444 12.060444 89.315556 43.008 112.512 15.928889 11.946667 38.613333 18.972444 59.832889 21.859556 21.091556 2.872889 43.776 2.062222 59.960888-4.465778a14.222222 14.222222 0 1 0-10.638222-26.382222c-9.671111 3.896889-26.695111 5.233778-45.482666 2.673778-18.673778-2.545778-36.039111-8.504889-46.606223-16.440889-22.044444-16.540444-36.224-42.353778-31.772444-86.912zM613.006222 372.906667c2.503111-24.96 25.742222-59.776 71.637334-65.180445 17.564444-2.062222 33.251556 1.450667 44.515555 9.628445 10.951111 7.921778 19.313778 21.333333 20.650667 42.567111 0.768 12.288-2.147556 25.116444-9.059556 34.488889-6.485333 8.789333-17.365333 15.843556-35.953778 15.843555-6.314667 0-15.075556-2.304-21.902222-7.253333-6.4-4.593778-10.709333-11.093333-10.709333-20.565333 0-11.178667 4.394667-15.260444 7.864889-17.208889a18.503111 18.503111 0 0 1 9.912889-2.176c0.711111 0.071111 1.052444 0.156444 1.052444 0.142222h-0.014222a14.222222 14.222222 0 1 0 8.903111-27.008c-8.647111-2.844444-22.129778-2.204444-33.649778 4.181333-12.899556 7.153778-22.513778 20.992-22.513778 42.069334 0 20.096 9.998222 34.616889 22.499556 43.648a68.266667 68.266667 0 0 0 38.556444 12.615111c27.022222 0 46.663111-10.88 58.851556-27.406223 11.747556-15.957333 15.630222-35.84 14.549333-53.134222-1.792-28.615111-13.681778-50.318222-32.341333-63.829333-18.318222-13.283556-41.585778-17.550222-64.526222-14.848-60.046222 7.068444-92.885333 53.248-96.625778 90.595555-5.319111 53.276444 12.060444 89.315556 43.008 112.512 15.928889 11.946667 38.613333 18.972444 59.832889 21.859556 21.091556 2.872889 43.776 2.062222 59.960889-4.465778a14.222222 14.222222 0 1 0-10.638222-26.382222c-9.671111 3.896889-26.695111 5.233778-45.482667 2.673778-18.673778-2.545778-36.024889-8.504889-46.606222-16.440889-22.044444-16.540444-36.224-42.353778-31.772445-86.912z'"],128:["d='M187.939068 93.731068c-37.032329 9.440438-15.640548 172.873644-0.32263 253.404932 47.566904-36.934137 145.46411-127.284603 156.461589-193.21337-66.069041-66.209315-109.862575-72.00263-156.138959-60.191562z'","d='M149.616219 447.670356l-17.127452-90.05589c-7.925479-41.675397-17.576329-105.41589-20.381808-161.006466-1.374685-27.32537-1.304548-55.899178 2.651178-79.787836 1.935781-11.726904 5.358466-25.908603 12.316055-39.052274 6.985644-13.185753 21.237479-31.842192 46.991781-38.407013 30.144877-7.701041 64.091178-10.632767 102.119452 1.921753 36.471233 12.035507 71.231123 36.54137 107.604164 73.012603l20.367781 20.409863-4.74126 28.447562c-4.47474 26.792329-16.832877 52.027616-30.172932 73.34926-13.718795 21.896767-30.66389 43.134247-47.917589 62.365808-34.423233 38.392986-73.377315 72.465534-99.313973 92.580822l-72.395397 56.221808z m27.493699-164.54137c3.324493 23.720329 7.069808 45.953753 10.492493 64.007014 13.494356-10.478466 31.04263-25.249315 49.502685-42.545096 46.627068-43.681315 99.089534-103.438027 106.972931-150.668274-66.069041-66.209315-109.862575-72.00263-156.138959-60.191562-28.72811 7.322301-22.303562 107.309589-10.815123 189.397918z'","d='M822.805041 71.455562c49.446575 4.769315 49.446575 177.137973 43.260493 262.73315-34.830027-16.384-89.228274-45.603068-137.328219-79.226739-45.406685-31.744-85.188384-67.429699-97.504438-99.903124 74.162849-77.627616 129.781479-89.564932 191.572164-83.603287z'","d='M916.143342 419.741808l5.891507-81.513205c3.226301-44.607123 4.923616-112.541808-0.911781-171.260493-2.861589-28.840329-7.883397-59.251726-17.337863-84.290631-7.476603-19.83474-27.690082-62.435945-75.579616-67.064986-36.499288-3.534904-75.256986-2.090082-116.778082 13.95726-40.889863 15.808877-79.970192 44.032-120.775891 86.71737l-24.421698 25.585973 12.540493 33.062575c10.338192 27.283288 29.934466 51.059726 49.376438 70.277261 20.171397 19.918904 44.214356 38.799781 68.453699 55.744876 51.284164 35.854027 108.60011 66.602082 145.590356 83.996055l73.952438 34.787945zM868.716712 273.001205a1128.658411 1128.658411 0 0 1-2.651178 61.17348 959.025096 959.025096 0 0 1-54.53852-28.02674c-26.511781-14.644603-55.646685-32.206904-82.775672-51.171945-45.420712-31.758027-85.202411-67.443726-97.518465-99.917151 74.162849-77.627616 129.781479-89.564932 191.572164-83.603287 39.332822 3.801425 47.370521 113.678027 45.911671 201.545643z'","d='M929.104658 545.41326C929.104658 778.744986 739.959233 967.890411 506.641534 967.890411 273.309808 967.890411 84.164384 778.744986 84.164384 545.41326 84.164384 312.109589 273.309808 122.950137 506.641534 122.950137c233.317699 0 422.463123 189.145425 422.463124 422.463123z'","d='M985.214247 545.41326C985.214247 809.731507 770.945753 1024 506.641534 1024 242.323288 1024 28.054795 809.731507 28.054795 545.41326 28.054795 281.109041 242.323288 66.840548 506.641534 66.840548c264.304219 0 478.572712 214.268493 478.572713 478.572712zM506.641534 967.890411c233.317699 0 422.463123-189.145425 422.463124-422.477151 0-233.317699-189.145425-422.463123-422.463124-422.463123C273.309808 122.950137 84.164384 312.095562 84.164384 545.41326 84.164384 778.744986 273.309808 967.890411 506.641534 967.890411z'","d='M187.939068 93.731068c-37.032329 9.440438-15.640548 172.873644-0.32263 253.404932 47.566904-36.934137 145.46411-127.284603 156.461589-193.21337-66.069041-66.209315-109.862575-72.00263-156.138959-60.191562z'","d='M256.392767 101.221699c-23.369644-7.715068-44.466849-6.382466-66.714301-0.70137-1.99189 0.504986-4.390575 2.216329-6.817315 6.78926-2.42674 4.572932-4.404603 11.221918-5.82137 19.820712-2.847562 17.155507-3.198247 40.398904-1.893699 66.29348 2.384658 46.963726 10.127781 101.347945 17.253699 140.975342 23.103123-18.75463 54.286027-46.851507 81.934027-77.683726 15.73874-17.534247 30.215014-35.825973 41.39485-53.710904 10.380274-16.566356 17.702575-32.431342 20.760547-46.739288-31.42137-31.000548-57.175671-47.48274-80.096438-55.043506z m4.390575-13.326028c26.427616 8.725041 54.805041 27.535781 88.246357 61.075288l2.552986 2.552986-0.589151 3.548932c-2.959781 17.772712-11.670795 36.681644-23.369644 55.380164-11.754959 18.768658-26.778301 37.733699-42.839671 55.632658-32.12274 35.811945-68.818411 67.920658-92.86137 86.591123l-9.061698 7.027726-2.146192-11.249973c-7.687014-40.455014-16.917041-101.782795-19.568219-154.329424-1.332603-26.203178-1.038027-50.638904 2.048-69.295343 1.543014-9.286137 3.843507-17.604384 7.266192-24.085041 3.436712-6.480658 8.472548-11.951342 15.738739-13.816986 24.014904-6.129973 47.973699-7.81326 74.583671 0.981918z'","d='M822.805041 71.455562c49.446575 4.769315 49.446575 177.137973 43.260493 262.73315-34.830027-16.384-89.228274-45.603068-137.328219-79.226739-45.406685-31.744-85.188384-67.429699-97.504438-99.903124 74.162849-77.627616 129.781479-89.564932 191.572164-83.603287z'","d='M734.193973 88.456767c29.555726-11.432329 57.736767-12.93326 87.95178-10.015562 7.911452 0.771507 15.808877 8.556712 22.58411 26.525809 6.536767 17.309808 10.899288 41.254575 13.578521 68.243287 4.937644 49.656986 4.025863 108.010959 1.444821 150.177315-34.465315-16.804822-83.378849-43.681315-126.990027-74.162849-22.513973-15.752767-43.484932-32.347178-60.261699-48.927562-15.36-15.163616-26.848438-29.948493-33.03452-43.681315 35.278904-36.288877 65.928767-57.035397 94.712986-68.17315z m-5.063891-13.087562c-32.150795 12.428274-65.423781 35.545425-102.961096 74.836165l-3.057972 3.198246 1.557041 4.138083c6.691068 17.618411 20.53611 35.489315 37.986192 52.743013 17.534247 17.309808 39.178521 34.423233 62.071232 50.428493 48.492712 33.904219 103.255671 63.319671 138.35222 79.815891l9.258082 4.348493 0.729424-10.18389c3.100055-43.022027 4.671123-107.940822-0.785534-162.858083-2.735342-27.409534-7.252164-52.799123-14.420164-71.820274-6.943562-18.37589-17.576329-33.918247-34.367123-35.531397-31.617753-3.057973-62.14137-1.571068-94.362302 10.88526z'","d='M925.808219 547.068493c0 232.419945-188.401973 420.821918-420.821918 420.821918C272.566356 967.890411 84.164384 779.488438 84.164384 547.068493 84.164384 314.648548 272.566356 126.246575 504.986301 126.246575c232.419945 0 420.821918 188.401973 420.821918 420.821918z'","d='M911.780822 547.068493c0 224.662795-182.131726 406.794521-406.794521 406.794521S98.191781 771.731288 98.191781 547.068493s182.131726-406.794521 406.79452-406.79452 406.794521 182.131726 406.794521 406.79452z'","d='M921.712219 627.824219c-37.032329 195.513863-208.783781 343.36263-415.070685 343.36263-179.25611 0-332.42126-111.630027-393.80515-269.157698l4.320438-3.464767c63.530082-50.989589 124.998137-100.337973 303.665096-100.337973 77.290959 0 155.535781 19.119342 227.945205 36.80789 106.944877 26.133041 201.138849 49.137973 260.544877 2.80548 4.236274-3.815452 8.360329-7.153973 12.400219-10.015562z'","d='M374.545534 588.870137c32.543562-0.855671 75.285041-13.326027 101.165589 11.797041 20.339726 47.202192-73.124822 68.804384-39.669479 116.104767 25.417644 54.243945 97.139726 55.857096 144.482192 33.679781 26.427616-10.085699 42.923836-38.154521 71.343342-43.288548-20.15737 61.860822-101.530301 84.402849-159.659836 73.08274-49.685041-17.898959-106.215452 23.706301-151.131178-14.083507-14.532384-13.129644-45.743342-39.024219-26.24526-58.339945 26.904548 37.972164 71.539726 72.900384 119.345096 47.777315-15.374027-33.020493-27.100932-70.613918-59.532274-90.785315-22.780493-16.846904-38.996164-69.295342-0.098192-75.944329z m72.100822 25.6c-4.03989 15.710685 1.40274 20.550137 16.215671 14.462247 4.124055-15.991233-1.318575-20.844712-16.215671-14.462247zM196.383562 420.821918a56.109589 56.109589 0 0 1 56.109589-56.109589h112.219178a56.109589 56.109589 0 1 1 0 112.219178h-112.219178a56.109589 56.109589 0 0 1-56.109589-56.109589z'","d='M210.410959 420.821918c0-23.243397 21.980932-42.082192 49.09589-42.082192h98.191781c27.114959 0 49.09589 18.838795 49.095891 42.082192s-21.980932 42.082192-49.095891 42.082192h-98.191781c-27.114959 0-49.09589-18.838795-49.09589-42.082192z'","d='M504.986301 420.821918a56.109589 56.109589 0 0 1 56.109589-56.109589h112.219178a56.109589 56.109589 0 0 1 0 112.219178h-112.219178a56.109589 56.109589 0 0 1-56.109589-56.109589z'","d='M519.013699 420.821918c0-23.243397 21.980932-42.082192 49.09589-42.082192h98.191781c27.114959 0 49.09589 18.838795 49.09589 42.082192s-21.980932 42.082192-49.09589 42.082192h-98.191781c-27.114959 0-49.09589-18.838795-49.09589-42.082192z'","d='M371.726027 378.739726c19.357808 0 35.068493 18.838795 35.068494 42.082192s-15.710685 42.082192-35.068494 42.082192-35.068493-18.838795-35.068493-42.082192 15.710685-42.082192 35.068493-42.082192zM680.328767 378.739726c19.357808 0 35.068493 18.838795 35.068493 42.082192s-15.710685 42.082192-35.068493 42.082192-35.068493-18.838795-35.068493-42.082192 15.710685-42.082192 35.068493-42.082192z'"],129:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M568.888889 867.555556a28.444444 28.444444 0 0 0 28.444444-28.444445V440.888889a28.444444 28.444444 0 0 0-28.444444-28.444445h-113.777778a28.444444 28.444444 0 0 0-28.444444 28.444445v398.222222a28.444444 28.444444 0 0 0 28.444444 28.444445h113.777778z'","d='M522.752 168.860444a14.222222 14.222222 0 0 0-21.504 0L273.720889 431.573333A14.222222 14.222222 0 0 0 284.472889 455.111111h455.054222a14.222222 14.222222 0 0 0 10.752-23.537778L522.752 168.860444z'"],130:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M170.666667 455.111111a28.444444 28.444444 0 0 1 28.444444-28.444444h398.222222a28.444444 28.444444 0 0 1 28.444445 28.444444v113.777778a28.444444 28.444444 0 0 1-28.444445 28.444444H199.111111a28.444444 28.444444 0 0 1-28.444444-28.444444v-113.777778z'","d='M869.361778 501.248a14.222222 14.222222 0 0 1 0 21.504L606.648889 750.279111A14.222222 14.222222 0 0 1 583.111111 739.527111V284.472889a14.222222 14.222222 0 0 1 23.537778-10.752l262.712889 227.527111z'"],131:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M568.888889 156.444444a28.444444 28.444444 0 0 1 28.444444 28.444445v398.222222a28.444444 28.444444 0 0 1-28.444444 28.444445h-113.777778a28.444444 28.444444 0 0 1-28.444444-28.444445V184.888889a28.444444 28.444444 0 0 1 28.444444-28.444445h113.777778z'","d='M522.752 855.139556a14.222222 14.222222 0 0 1-21.504 0L273.720889 592.426667A14.222222 14.222222 0 0 1 284.472889 568.888889h455.054222a14.222222 14.222222 0 0 1 10.752 23.537778L522.752 855.139556z'"],132:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M867.555556 455.111111a28.444444 28.444444 0 0 0-28.444445-28.444444H440.888889a28.444444 28.444444 0 0 0-28.444445 28.444444v113.777778a28.444444 28.444444 0 0 0 28.444445 28.444444h398.222222a28.444444 28.444444 0 0 0 28.444445-28.444444v-113.777778z'","d='M168.860444 501.248a14.222222 14.222222 0 0 0 0 21.504l262.712889 227.527111A14.222222 14.222222 0 0 0 455.111111 739.527111V284.472889a14.222222 14.222222 0 0 0-23.537778-10.752L168.860444 501.248z'"],133:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M568.888889 654.222222a28.444444 28.444444 0 0 0 28.444444-28.444444V412.444444a28.444444 28.444444 0 0 0-28.444444-28.444444h-113.777778a28.444444 28.444444 0 0 0-28.444444 28.444444v213.333334a28.444444 28.444444 0 0 0 28.444444 28.444444h113.777778z'","d='M522.752 140.416a14.222222 14.222222 0 0 0-21.504 0L273.720889 403.128889A14.222222 14.222222 0 0 0 284.472889 426.666667h455.054222a14.222222 14.222222 0 0 0 10.752-23.537778L522.752 140.416zM522.752 883.584a14.222222 14.222222 0 0 1-21.504 0L273.720889 620.871111A14.222222 14.222222 0 0 1 284.472889 597.333333h455.054222a14.222222 14.222222 0 0 1 10.752 23.537778L522.752 883.584z'"],134:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M654.222222 455.111111a28.444444 28.444444 0 0 0-28.444444-28.444444H412.444444a28.444444 28.444444 0 0 0-28.444444 28.444444v113.777778a28.444444 28.444444 0 0 0 28.444444 28.444444h213.333334a28.444444 28.444444 0 0 0 28.444444-28.444444v-113.777778z'","d='M140.416 501.248a14.222222 14.222222 0 0 0 0 21.504l262.712889 227.527111A14.222222 14.222222 0 0 0 426.666667 739.527111V284.472889a14.222222 14.222222 0 0 0-23.537778-10.737778L140.416 501.233778zM883.584 501.248a14.222222 14.222222 0 0 1 0 21.504L620.871111 750.279111A14.222222 14.222222 0 0 1 597.333333 739.527111V284.472889a14.222222 14.222222 0 0 1 23.537778-10.752l262.712889 227.527111z'"],135:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],136:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],137:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],138:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],139:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],140:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],141:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],142:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.024889 113.109334a14.222222 14.222222 0 0 0-4.096 12.586666l27.392 159.715556a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226666 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],143:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.039111 113.109334a14.222222 14.222222 0 0 0-4.081778 12.586666L682.666667 725.233778a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226667 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],144:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.024889 113.109334a14.222222 14.222222 0 0 0-4.096 12.586666l27.392 159.715556a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226666 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],145:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.024889 113.109334a14.222222 14.222222 0 0 0-4.096 12.586666l27.392 159.715556a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226666 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],146:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.024889 113.109334a14.222222 14.222222 0 0 0-4.096 12.586666l27.392 159.715556a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226666 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],147:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.039111 113.109334a14.222222 14.222222 0 0 0-4.081778 12.586666L682.666667 725.233778a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226667 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],148:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.039111 113.109334a14.222222 14.222222 0 0 0-4.081778 12.586666L682.666667 725.233778a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226667 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],149:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M288.184889 352.853333h63.502222v199.765334c0 26.126222-2.289778 46.222222-6.883555 60.288-6.172444 18.360889-17.365333 33.137778-33.592889 44.344889-16.213333 11.050667-37.603556 16.568889-64.142223 16.568888-31.146667 0-55.111111-8.675556-71.907555-26.040888-16.782222-17.507556-25.258667-43.121778-25.400889-76.856889l60.060444-6.883556c0.711111 18.076444 3.370667 30.862222 7.964445 38.314667 6.883556 11.335111 17.365333 17.009778 31.431111 17.009778 14.208 0 24.248889-4.024889 30.151111-12.060445 5.873778-8.177778 8.817778-25.031111 8.817778-50.588444V352.853333zM446.862222 509.582222l-54.897778-9.912889c6.172444-22.101333 16.782222-38.471111 31.857778-49.080889 15.075556-10.624 37.461333-15.928889 67.171556-15.928888 26.979556 0 47.075556 3.228444 60.273778 9.671111 13.198222 6.328889 22.471111 14.435556 27.776 24.334222 5.447111 9.756444 8.177778 27.776 8.177777 54.044444l-0.654222 70.599111c0 20.096 0.938667 34.958222 2.801778 44.572445 2.019556 9.472 5.674667 19.655111 10.979555 30.563555h-59.847111a222.819556 222.819556 0 0 1-5.816889-17.863111 108.615111 108.615111 0 0 0-2.133333-7.111111c-10.339556 10.040889-21.404444 17.578667-33.166222 22.613334-11.761778 5.020444-24.32 7.537778-37.674667 7.537777-23.537778 0-42.126222-6.4-55.751111-19.171555-13.496889-12.771556-20.238222-28.913778-20.238222-48.440889 0-12.913778 3.086222-24.391111 9.244444-34.446222a59.719111 59.719111 0 0 1 25.841778-23.239111c11.192889-5.461333 27.264-10.197333 48.213333-14.222223 28.288-5.304889 47.872-10.24 58.780445-14.848v-6.030222c0-11.619556-2.872889-19.868444-8.604445-24.746667-5.745778-5.020444-16.583111-7.537778-32.512-7.537777-10.766222 0-19.157333 2.147556-25.187555 6.456889-6.030222 4.167111-10.908444 11.548444-14.648889 22.186666z m80.938667 49.066667c-7.751111 2.588444-20.024889 5.674667-36.807111 9.258667-16.796444 3.584-27.776 7.111111-32.938667 10.552888-7.893333 5.589333-11.847111 12.700444-11.847111 21.304889 0 8.476444 3.157333 15.786667 9.472 21.959111 6.314667 6.172444 14.364444 9.258667 24.120889 9.258667 10.908444 0 21.304889-3.584 31.203555-10.766222 7.324444-5.447111 12.131556-12.117333 14.435556-20.010667 1.564444-5.176889 2.360889-15.004444 2.360889-29.496889v-12.060444zM837.390222 668.444444h-60.487111v-116.679111c0-24.689778-1.294222-40.618667-3.882667-47.786666-2.588444-7.324444-6.826667-12.999111-12.700444-17.009778-5.745778-4.024889-12.700444-6.030222-20.878222-6.030222a48.497778 48.497778 0 0 0-28.202667 8.604444 43.946667 43.946667 0 0 0-17.223111 22.826667c-3.015111 9.472-4.522667 26.979556-4.522667 52.522666V668.444444h-60.487111V439.822222h56.177778v33.578667c19.953778-25.827556 45.070222-38.755556 75.349333-38.755556 13.354667 0 25.543111 2.446222 36.593778 7.324445 11.050667 4.736 19.384889 10.837333 24.974222 18.304 5.745778 7.466667 9.685333 15.928889 11.847111 25.400889 2.289778 9.472 3.441778 23.04 3.441778 40.675555V668.444444z'"],150:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M160.512 668.444444V352.853333h216.348444v53.390223H224.227556v74.695111h131.754666v53.390222h-131.754666V668.444444h-63.715556zM543.928889 595.683556l60.288 10.112c-7.751111 22.101333-20.024889 38.968889-36.821333 50.588444-16.64 11.491556-37.532444 17.223111-62.648889 17.223111-39.751111 0-69.176889-12.984889-88.263111-38.968889-15.075556-20.807111-22.599111-47.075556-22.599112-78.791111 0-37.888 9.898667-67.512889 29.710223-88.903111 19.811556-21.532444 44.842667-32.284444 75.136-32.284444 34.005333 0 60.842667 11.264 80.497777 33.792 19.669333 22.385778 29.070222 56.760889 28.216889 103.111111H455.879111c0.426667 17.948444 5.319111 31.943111 14.648889 41.984 9.329778 9.898667 20.949333 14.862222 34.872889 14.862222 9.472 0 17.436444-2.588444 23.893333-7.751111 6.456889-5.176889 11.335111-13.496889 14.648889-24.974222z m3.441778-61.141334c-0.426667-17.507556-4.949333-30.791111-13.553778-39.822222-8.604444-9.187556-19.086222-13.795556-31.431111-13.795556-13.198222 0-24.106667 4.821333-32.711111 14.435556-8.618667 9.614222-12.856889 22.684444-12.714667 39.182222h90.410667zM636.728889 668.444444V352.853333h60.501333v113.664c18.659556-21.248 40.760889-31.857778 66.304-31.857777 27.847111 0 50.872889 10.097778 69.105778 30.350222 18.232889 20.096 27.335111 49.009778 27.335111 86.755555 0 39.04-9.329778 69.105778-27.989333 90.197334-18.503111 21.105778-41.045333 31.644444-67.584 31.644444-13.070222 0-25.984-3.228444-38.755556-9.671111-12.629333-6.613333-23.537778-16.298667-32.711111-29.070222V668.444444H636.728889z m60.074667-119.267555c0 23.68 3.726222 41.187556 11.192888 52.536889 10.467556 16.071111 24.391111 24.106667 41.756445 24.106666 13.354667 0 24.689778-5.674667 34.019555-17.009777 9.472-11.477333 14.208-29.496889 14.208-54.044445 0-26.112-4.736-44.913778-14.222222-56.391111-9.457778-11.619556-21.589333-17.436444-36.366222-17.436444-14.506667 0-26.552889 5.660444-36.167111 17.009777-9.614222 11.192889-14.421333 28.273778-14.421333 51.228445z'"],151:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M173.44 668.444444V352.853333H268.8l57.272889 215.267556 56.604444-215.267556h95.587556V668.444444h-59.192889V420.010667L356.408889 668.444444h-61.354667l-62.435555-248.433777V668.444444h-59.192889zM568.704 509.582222l-54.897778-9.912889c6.172444-22.101333 16.782222-38.471111 31.857778-49.080889 15.075556-10.624 37.461333-15.928889 67.171556-15.928888 26.979556 0 47.075556 3.228444 60.273777 9.671111 13.212444 6.328889 22.471111 14.435556 27.776 24.334222 5.447111 9.756444 8.177778 27.776 8.177778 54.044444l-0.64 70.599111c0 20.096 0.924444 34.958222 2.801778 44.572445 1.991111 9.472 5.660444 19.655111 10.965333 30.563555h-59.847111a222.819556 222.819556 0 0 1-5.802667-17.863111 109.553778 109.553778 0 0 0-2.147555-7.111111c-10.339556 10.040889-21.390222 17.578667-33.166222 22.613334-11.761778 5.020444-24.32 7.537778-37.660445 7.537777-23.537778 0-42.126222-6.4-55.751111-19.171555-13.511111-12.771556-20.252444-28.913778-20.252444-48.440889 0-12.913778 3.086222-24.391111 9.258666-34.446222a59.719111 59.719111 0 0 1 25.841778-23.239111c11.192889-5.461333 27.264-10.197333 48.213333-14.222223 28.273778-5.304889 47.857778-10.24 58.780445-14.848v-6.030222c0-11.619556-2.872889-19.868444-8.618667-24.746667-5.745778-5.020444-16.583111-7.537778-32.512-7.537777-10.752 0-19.157333 2.147556-25.173333 6.456889-6.044444 4.167111-10.922667 11.548444-14.648889 22.186666z m80.938667 49.066667c-7.736889 2.588444-20.010667 5.674667-36.807111 9.258667-16.782222 3.584-27.776 7.111111-32.938667 10.552888-7.893333 5.589333-11.832889 12.700444-11.832889 21.304889 0 8.476444 3.157333 15.786667 9.472 21.959111 6.314667 6.172444 14.350222 9.258667 24.106667 9.258667 10.908444 0 21.304889-3.584 31.217777-10.766222 7.310222-5.447111 12.117333-12.117333 14.421334-20.010667 1.578667-5.176889 2.360889-15.004444 2.360889-29.496889v-12.060444zM809.187556 668.444444h-60.487112V439.822222h56.177778v32.497778c9.614222-15.36 18.232889-25.457778 25.841778-30.350222a48.256 48.256 0 0 1 26.254222-7.324445c13.795556 0 27.050667 3.811556 39.822222 11.420445l-18.716444 52.736c-10.197333-6.599111-19.669333-9.898667-28.416-9.898667-8.476444 0-15.644444 2.360889-21.532444 7.111111-5.888 4.579556-10.552889 12.984889-13.994667 25.173334-3.299556 12.202667-4.949333 37.745778-4.949333 76.657777V668.444444z'"],152:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M458.894222 668.444444h-69.319111l-27.548444-71.68h-126.151111L209.806222 668.444444H142.222222l122.922667-315.591111h67.384889L458.894222 668.444444z m-117.333333-124.871111l-43.477333-117.105777-42.624 117.12h86.115555zM473.116444 439.822222h56.405334v33.578667a84.380444 84.380444 0 0 1 29.710222-27.989333c12.487111-7.168 26.339556-10.766222 41.543111-10.766223 26.552889 0 49.095111 10.410667 67.598222 31.217778 18.517333 20.821333 27.776 49.806222 27.776 86.983111 0 38.172444-9.329778 67.882667-27.989333 89.116445-18.659556 21.105778-41.258667 31.644444-67.811556 31.644444-12.629333 0-24.106667-2.503111-34.446222-7.537778-10.183111-5.020444-20.949333-13.624889-32.284444-25.827555v115.171555h-60.501334v-315.591111z m59.847112 110.435556c0 25.685333 5.105778 44.700444 15.288888 57.045333 10.197333 12.202667 22.613333 18.304 37.248 18.304 14.065778 0 25.756444-5.603556 35.086223-16.782222 9.329778-11.349333 13.994667-29.866667 13.994666-55.552 0-23.964444-4.807111-41.770667-14.421333-53.390222-9.614222-11.619556-21.532444-17.436444-35.740444-17.436445-14.791111 0-27.050667 5.745778-36.807112 17.208889-9.756444 11.349333-14.648889 28.216889-14.648888 50.602667zM784.64 668.444444h-60.487111V439.822222h56.177778v32.497778c9.628444-15.36 18.232889-25.457778 25.841777-30.350222a48.256 48.256 0 0 1 26.268445-7.324445c13.767111 0 27.050667 3.811556 39.822222 11.420445l-18.730667 52.736c-10.183111-6.599111-19.655111-9.898667-28.416-9.898667-8.462222 0-15.644444 2.360889-21.532444 7.111111-5.873778 4.579556-10.538667 12.984889-13.980444 25.173334-3.313778 12.202667-4.963556 37.745778-4.963556 76.657777V668.444444z'"],153:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M143.985778 654.222222V348.8h92.302222l55.409778 208.341333 54.784-208.341333h92.501333V654.222222h-57.287111V413.809778L321.066667 654.222222H261.688889l-60.416-240.412444V654.222222h-57.287111zM526.506667 500.48l-53.134223-9.585778c5.973333-21.390222 16.256-37.233778 30.833778-47.502222 14.592-10.282667 36.266667-15.416889 64.995556-15.416889 26.126222 0 45.568 3.128889 58.339555 9.372445 12.785778 6.115556 21.745778 13.952 26.88 23.537777 5.276444 9.443556 7.907556 26.88 7.907556 52.295111l-0.611556 68.337778c0 19.441778 0.896 33.820444 2.702223 43.121778 1.948444 9.173333 5.489778 19.029333 10.624 29.582222h-57.912889c-1.536-3.882667-3.413333-9.656889-5.632-17.294222a105.301333 105.301333 0 0 0-2.076445-6.869333c-9.998222 9.713778-20.693333 17.009778-32.085333 21.873777a91.875556 91.875556 0 0 1-36.451556 7.296c-22.784 0-40.775111-6.186667-53.959111-18.545777-13.056-12.373333-19.584-27.989333-19.584-46.876445 0-12.501333 2.986667-23.608889 8.96-33.336889a57.770667 57.770667 0 0 1 24.988445-22.499555c10.837333-5.262222 26.396444-9.856 46.677333-13.752889 27.349333-5.134222 46.307556-9.927111 56.860444-14.364445v-5.831111c0-11.249778-2.773333-19.242667-8.32-23.964444-5.560889-4.864-16.042667-7.296-31.459555-7.296-10.424889 0-18.545778 2.090667-24.376889 6.257778-5.831111 4.024889-10.552889 11.178667-14.165333 21.461333z m78.336 47.502222c-7.509333 2.488889-19.384889 5.475556-35.626667 8.96-16.256 3.456-26.88 6.869333-31.886222 10.197334-7.637333 5.404444-11.448889 12.288-11.448889 20.622222 0 8.192 3.057778 15.274667 9.159111 21.248 6.115556 5.973333 13.895111 8.96 23.324444 8.96 10.567111 0 20.636444-3.470222 30.222223-10.410667 7.082667-5.276444 11.733333-11.733333 13.952-19.384889 1.536-4.992 2.304-14.506667 2.304-28.529778v-11.662222zM675.484444 432.967111h62.293334l52.906666 157.084445 51.669334-157.084445h60.629333l-78.122667 212.920889-13.966222 38.542222c-5.134222 12.913778-10.069333 22.784-14.791111 29.582222a60.472889 60.472889 0 0 1-16.042667 16.455112c-5.973333 4.309333-13.397333 7.637333-22.286222 10.012444-8.760889 2.360889-18.688 3.527111-29.795555 3.527111-11.249778 0-22.286222-1.180444-33.137778-3.527111l-5.191111-45.838222c9.159111 1.806222 17.422222 2.702222 24.789333 2.702222 13.610667 0 23.68-4.024889 30.208-12.088889 6.528-7.907556 11.52-18.048 15.004445-30.407111l-84.167112-221.866667z'"],154:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M288.184889 352.853333h63.502222v199.765334c0 26.126222-2.289778 46.222222-6.883555 60.288-6.172444 18.360889-17.365333 33.137778-33.592889 44.344889-16.213333 11.050667-37.603556 16.568889-64.142223 16.568888-31.146667 0-55.111111-8.675556-71.907555-26.040888-16.782222-17.507556-25.258667-43.121778-25.400889-76.856889l60.060444-6.883556c0.711111 18.076444 3.370667 30.862222 7.964445 38.314667 6.883556 11.335111 17.365333 17.009778 31.431111 17.009778 14.208 0 24.248889-4.024889 30.151111-12.060445 5.873778-8.177778 8.817778-25.031111 8.817778-50.588444V352.853333zM552.135111 668.444444v-34.232888a87.893333 87.893333 0 0 1-32.938667 28.856888 91.406222 91.406222 0 0 1-42.851555 10.538667c-15.36 0-29.127111-3.370667-41.329778-10.112-12.202667-6.741333-21.020444-16.213333-26.481778-28.416-5.447111-12.202667-8.177778-29.070222-8.177777-50.588444V439.822222h60.501333v105.059556c0 32.142222 1.066667 51.882667 3.228444 59.192889 2.289778 7.182222 6.385778 12.913778 12.259556 17.223111 5.888 4.167111 13.354667 6.243556 22.4 6.243555 10.325333 0 19.584-2.801778 27.761778-8.391111 8.177778-5.745778 13.781333-12.771556 16.782222-21.105778 3.029333-8.462222 4.536889-29.056 4.536889-61.781333v-96.440889h60.487111V668.444444h-56.177778zM861.496889 668.444444h-60.487111v-116.679111c0-24.689778-1.294222-40.618667-3.882667-47.786666-2.574222-7.324444-6.812444-12.999111-12.700444-17.009778-5.731556-4.024889-12.700444-6.030222-20.878223-6.030222a48.497778 48.497778 0 0 0-28.202666 8.604444 43.946667 43.946667 0 0 0-17.208889 22.826667c-3.029333 9.472-4.536889 26.979556-4.536889 52.522666V668.444444h-60.487111V439.822222h56.177778v33.578667c19.953778-25.827556 45.084444-38.755556 75.349333-38.755556 13.354667 0 25.557333 2.446222 36.608 7.324445 11.050667 4.736 19.370667 10.837333 24.96 18.304 5.745778 7.466667 9.699556 15.928889 11.847111 25.400889 2.289778 9.472 3.441778 23.04 3.441778 40.675555V668.444444z'"],155:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M359.296 352.853333h63.502222v199.765334c0 26.126222-2.289778 46.222222-6.883555 60.288-6.172444 18.360889-17.365333 33.137778-33.592889 44.344889-16.213333 11.050667-37.603556 16.568889-64.142222 16.568888-31.146667 0-55.111111-8.675556-71.907556-26.040888-16.782222-17.507556-25.258667-43.121778-25.400889-76.856889l60.060445-6.883556c0.711111 18.076444 3.370667 30.862222 7.964444 38.314667 6.883556 11.335111 17.365333 17.009778 31.431111 17.009778 14.208 0 24.248889-4.024889 30.151111-12.060445 5.873778-8.177778 8.817778-25.031111 8.817778-50.588444V352.853333zM623.246222 668.444444v-34.232888a87.893333 87.893333 0 0 1-32.938666 28.856888 91.406222 91.406222 0 0 1-42.851556 10.538667c-15.36 0-29.127111-3.370667-41.329778-10.112-12.202667-6.741333-21.020444-16.213333-26.481778-28.416-5.447111-12.202667-8.177778-29.070222-8.177777-50.588444V439.822222h60.501333v105.059556c0 32.142222 1.066667 51.882667 3.228444 59.192889 2.289778 7.182222 6.385778 12.913778 12.259556 17.223111 5.888 4.167111 13.354667 6.243556 22.4 6.243555 10.325333 0 19.584-2.801778 27.761778-8.391111 8.177778-5.745778 13.781333-12.771556 16.782222-21.105778 3.029333-8.462222 4.536889-29.056 4.536889-61.781333v-96.440889h60.487111V668.444444h-56.177778zM724.650667 668.444444V352.853333h60.501333V668.444444h-60.501333z'"],156:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M420.238222 654.222222H353.137778l-26.666667-69.376h-122.083555L179.2 654.222222H113.777778l118.954666-305.422222h65.208889L420.238222 654.222222z m-113.536-120.832l-42.097778-113.336889-41.244444 113.336889h83.342222zM581.290667 654.222222v-33.137778a85.063111 85.063111 0 0 1-31.857778 27.932445 88.462222 88.462222 0 0 1-41.472 10.211555c-14.862222 0-28.188444-3.271111-40.007111-9.799111-11.804444-6.528-20.337778-15.687111-25.614222-27.491555-5.276444-11.804444-7.921778-28.131556-7.921778-48.967111v-140.003556h58.538666v101.674667c0 31.104 1.052444 50.204444 3.128889 57.287111 2.218667 6.940444 6.186667 12.501333 11.875556 16.668444 5.688889 4.024889 12.913778 6.044444 21.660444 6.044445 10.012444 0 18.972444-2.702222 26.88-8.135111 7.921778-5.546667 13.340444-12.359111 16.256-20.408889 2.915556-8.192 4.366222-28.131556 4.366223-59.790222v-93.340445h58.552888V654.222222h-54.385777zM674.019556 668.8l66.872888 8.135111c1.109333 7.779556 3.683556 13.112889 7.708445 16.042667 5.546667 4.167111 14.307556 6.257778 26.254222 6.257778 15.274667 0 26.737778-2.304 34.375111-6.883556 5.134222-3.057778 9.031111-7.992889 11.662222-14.791111 1.806222-4.864 2.702222-13.824 2.702223-26.88v-32.284445C806.115556 642.275556 784.028444 654.222222 757.361778 654.222222c-29.724444 0-53.262222-12.572444-70.613334-37.703111-13.624889-19.868444-20.423111-44.586667-20.423111-74.168889 0-37.091556 8.888889-65.422222 26.666667-85.006222 17.92-19.584 40.135111-29.368889 66.673778-29.368889 27.349333 0 49.92 12.017778 67.697778 36.039111v-31.047111h54.798222v198.542222c0 26.112-2.161778 45.624889-6.456889 58.552889-4.309333 12.913778-10.353778 23.04-18.133333 30.407111-7.779556 7.367111-18.190222 13.127111-31.246223 17.294223-12.913778 4.167111-29.297778 6.257778-49.166222 6.257777-37.504 0-64.099556-6.471111-79.786667-19.384889-15.701333-12.771556-23.552-29.013333-23.552-48.753777 0-1.934222 0.071111-4.295111 0.213334-7.082667z m52.295111-129.792c0 23.466667 4.508444 40.704 13.539555 51.669333 9.159111 10.837333 20.408889 16.256 33.749334 16.256 14.307556 0 26.382222-5.546667 36.252444-16.668444 9.856-11.249778 14.791111-27.847111 14.791111-49.792 0-22.912-4.721778-39.936-14.165333-51.043556-9.443556-11.107556-21.390222-16.668444-35.84-16.668444-14.023111 0-25.628444 5.489778-34.787556 16.455111-9.031111 10.837333-13.539556 27.448889-13.539555 49.792z'"],157:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M100.238222 572.387556l57.998222-5.646223c3.484444 19.470222 10.538667 33.763556 21.148445 42.894223 10.737778 9.130667 25.173333 13.696 43.292444 13.696 19.2 0 33.635556-4.024889 43.306667-12.088889 9.799111-8.177778 14.691556-17.720889 14.691556-28.586667 0-6.983111-2.076444-12.899556-6.243556-17.720889-4.024889-4.977778-11.136-9.272889-21.333333-12.899555-6.983111-2.417778-22.897778-6.712889-47.729778-12.885334-31.957333-7.921778-54.385778-17.649778-67.271111-29.198222-18.119111-16.241778-27.192889-36.053333-27.192889-59.406222 0-15.047111 4.238222-29.070222 12.686222-42.097778 8.604444-13.155556 20.878222-23.153778 36.864-30.008889 16.113778-6.840889 35.512889-10.268444 58.197333-10.268444 37.063111 0 64.910222 8.120889 83.569778 24.376889 18.801778 16.241778 28.672 37.916444 29.610667 65.038222l-59.605333 2.616889c-2.56-15.160889-8.064-26.040889-16.512-32.611556-8.334222-6.727111-20.878222-10.083556-37.674667-10.083555-17.308444 0-30.862222 3.555556-40.675556 10.666666-6.314667 4.579556-9.457778 10.680889-9.457777 18.346667 0 6.968889 2.944 12.942222 8.860444 17.92 7.509333 6.300444 25.770667 12.885333 54.769778 19.740444 29.013333 6.826667 50.417778 13.952 64.241778 21.333334 13.966222 7.253333 24.846222 17.265778 32.625777 30.008889 7.921778 12.629333 11.889778 28.259556 11.889778 46.933333 0 16.924444-4.693333 32.753778-14.094222 47.516444-9.400889 14.776889-22.698667 25.784889-39.879111 33.038223-17.194667 7.111111-38.599111 10.666667-64.241778 10.666666-37.333333 0-65.991111-8.590222-86.001778-25.770666-19.996444-17.322667-31.943111-42.496-35.84-75.52zM497.393778 600.376889l56.391111 9.457778c-7.253333 20.679111-18.730667 36.451556-34.446222 47.331555-15.573333 10.737778-35.100444 16.113778-58.595556 16.113778-37.191111 0-64.711111-12.16-82.574222-36.451556-14.094222-19.470222-21.148444-44.032-21.148445-73.713777 0-35.441778 9.272889-63.160889 27.790223-83.171556 18.531556-20.138667 41.955556-30.208 70.286222-30.208 31.829333 0 56.931556 10.538667 75.320889 31.616 18.389333 20.949333 27.192889 53.105778 26.382222 96.469333h-141.781333c0.412444 16.782222 4.977778 29.866667 13.696 39.267556 8.732444 9.258667 19.612444 13.895111 32.625777 13.895111 8.860444 0 16.312889-2.417778 22.357334-7.253333 6.044444-4.835556 10.609778-12.615111 13.696-23.352889z m3.214222-57.201778c-0.398222-16.369778-4.622222-28.8-12.686222-37.262222-8.049778-8.576-17.848889-12.885333-29.397334-12.885333-12.359111 0-22.556444 4.508444-30.606222 13.511111-8.064 8.988444-12.017778 21.191111-11.889778 36.636444H500.622222zM585.016889 454.570667h52.764444v31.416889a78.933333 78.933333 0 0 1 27.790223-26.168889c11.676444-6.727111 24.632889-10.083556 38.869333-10.083556 24.832 0 45.909333 9.728 63.232 29.198222 17.322667 19.484444 25.984 46.592 25.984 81.365334 0 35.712-8.732444 63.502222-26.183111 83.370666-17.450667 19.740444-38.599111 29.610667-63.431111 29.610667-11.818667 0-22.570667-2.346667-32.227556-7.054222-9.528889-4.693333-19.612444-12.757333-30.208-24.163556v107.747556h-56.604444V454.542222z m55.978667 103.310222c0 24.035556 4.764444 41.813333 14.293333 53.361778 9.528889 11.420444 21.148444 17.123556 34.844444 17.123555 13.155556 0 24.106667-5.233778 32.824889-15.701333 8.732444-10.609778 13.084444-27.932444 13.084445-51.968 0-22.414222-4.494222-39.068444-13.482667-49.934222-9.002667-10.88-20.138667-16.312889-33.422222-16.312889-13.838222 0-25.315556 5.361778-34.446222 16.099555-9.130667 10.609778-13.696 26.382222-13.696 47.331556zM920.334222 454.570667v45.112889h-38.656v86.186666c0 17.450667 0.327111 27.662222 0.995556 30.620445a13.084444 13.084444 0 0 0 5.034666 7.04c2.702222 1.877333 5.916444 2.830222 9.671112 2.830222 5.233778 0 12.828444-1.820444 22.755555-5.447111l4.835556 43.904c-13.155556 5.646222-28.060444 8.462222-44.714667 8.462222-10.197333 0-19.399111-1.678222-27.591111-5.034667-8.177778-3.498667-14.222222-7.921778-18.119111-13.297777-3.754667-5.504-6.371556-12.885333-7.850667-22.144-1.208889-6.584889-1.820444-19.882667-1.820444-39.879112v-93.240888h-25.969778v-45.112889h25.969778v-42.496l56.803555-33.024v75.52h38.656z'"],158:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M176.213333 521.784889c0-33.194667 4.977778-61.041778 14.890667-83.569778a154.424889 154.424889 0 0 1 30.236444-44.657778c12.885333-13.184 26.951111-22.968889 42.211556-29.340444 20.295111-8.590222 43.704889-12.885333 70.229333-12.885333 48 0 86.371556 14.890667 115.100445 44.657777 28.899556 29.795556 43.335111 71.196444 43.335111 124.231111 0 52.593778-14.293333 93.781333-42.88 123.562667-28.586667 29.624889-66.816 44.444444-114.673778 44.444445-48.440889 0-86.954667-14.748444-115.555555-44.231112-28.586667-29.624889-42.88-70.371556-42.88-122.211555z m67.783111-2.232889c0 36.892444 8.533333 64.896 25.557334 84.010667 17.038222 18.958222 38.670222 28.444444 64.896 28.444444 26.211556 0 47.701333-9.415111 64.426666-28.231111 16.896-18.958222 25.344-47.331556 25.344-85.105778 0-37.333333-8.220444-65.194667-24.661333-83.555555-16.298667-18.375111-38.001778-27.562667-65.109333-27.562667-27.121778 0-48.967111 9.344-65.564445 28.003556-16.583111 18.517333-24.888889 46.506667-24.888889 83.996444zM730.908444 516.451556l-61.553777 11.093333c-2.076444-12.288-6.826667-21.546667-14.222223-27.761778-7.253333-6.229333-16.739556-9.344-28.444444-9.344-15.559111 0-28.003556 5.404444-37.333333 16.227556-9.187556 10.666667-13.781333 28.586667-13.781334 53.774222 0 28.003556 4.664889 47.786667 13.994667 59.335111 9.486222 11.562667 22.158222 17.336889 38.001778 17.336889 11.861333 0 21.560889-3.328 29.112889-9.998222 7.552-6.826667 12.885333-18.446222 16-34.887111l61.340444 10.439111c-6.371556 28.16-18.602667 49.408-36.664889 63.772444-18.076444 14.364444-42.296889 21.560889-72.675555 21.560889-34.517333 0-62.065778-10.894222-82.659556-32.668444-20.451556-21.774222-30.677333-51.911111-30.677333-90.453334 0-38.954667 10.296889-69.248 30.890666-90.88 20.593778-21.774222 48.455111-32.668444 83.555556-32.668444 28.743111 0 51.555556 6.229333 68.451556 18.673778 17.038222 12.288 29.255111 31.104 36.664888 56.433777zM868.48 446.663111v49.777778h-42.666667v95.118222c0 19.256889 0.369778 30.520889 1.109334 33.777778 0.896 3.100444 2.744889 5.688889 5.546666 7.779555 2.986667 2.062222 6.542222 3.100444 10.666667 3.100445 5.788444 0 14.151111-1.991111 25.116444-6.001778l5.333334 48.455111c-14.506667 6.215111-30.961778 9.329778-49.322667 9.329778-11.264 0-21.418667-1.848889-30.449778-5.546667-9.031111-3.854222-15.701333-8.746667-19.996444-14.677333-4.152889-6.072889-7.04-14.222222-8.675556-24.448-1.322667-7.253333-1.991111-21.916444-1.991111-43.989333v-102.897778h-28.672v-49.777778h28.672V399.786667l62.663111-36.437334v83.342223h42.666667z'"],159:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M146.488889 668.444444V352.853333h62.008889l129.166222 210.744889V352.853333h59.207111V668.444444h-63.943111l-127.232-205.795555V668.444444h-59.192889zM432.412444 550.897778c0-20.081778 4.949333-39.537778 14.848-58.339556 9.898667-18.801778 23.893333-33.137778 41.984-43.050666 18.218667-9.898667 38.542222-14.862222 60.913778-14.862223 34.588444 0 62.933333 11.278222 85.048889 33.806223 22.087111 22.385778 33.137778 50.730667 33.137778 85.034666 0 34.588444-11.192889 63.288889-33.564445 86.115556-22.257778 22.670222-50.318222 34.005333-84.195555 34.005333a133.432889 133.432889 0 0 1-60.060445-14.208c-18.944-9.472-33.365333-23.324444-43.264-41.543111-9.898667-18.375111-14.848-40.689778-14.848-66.958222z m61.994667 3.228444c0 22.684444 5.376 40.049778 16.142222 52.096 10.766222 12.060444 24.035556 18.090667 39.822223 18.090667 15.786667 0 28.999111-6.030222 39.623111-18.076445 10.752-12.060444 16.142222-29.582222 16.142222-52.536888 0-22.385778-5.390222-39.608889-16.142222-51.669334-10.624-12.046222-23.822222-18.076444-39.608889-18.076444s-29.070222 6.030222-39.822222 18.076444c-10.780444 12.060444-16.156444 29.425778-16.156445 52.096zM761.159111 668.444444L669.013333 439.822222h63.502223l43.064888 116.679111 12.487112 38.968889c3.299556-9.912889 5.376-16.440889 6.243555-19.598222 1.991111-6.456889 4.152889-12.913778 6.456889-19.370667l43.477333-116.679111h62.222223L815.616 668.444444h-54.471111z'"],160:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M159.857778 352.853333h116.48c26.254222 0 46.279111 1.991111 60.046222 6.016a105.528889 105.528889 0 0 1 47.587556 29.070223c13.198222 13.923556 23.239111 31.004444 30.136888 51.228444 6.883556 20.096 10.325333 44.928 10.325334 74.496 0 25.969778-3.228444 48.355556-9.671111 67.157333-7.907556 22.968889-19.171556 41.557333-33.806223 55.751111-11.050667 10.780444-25.984 19.171556-44.785777 25.201778-14.065778 4.451556-32.853333 6.670222-56.405334 6.670222h-119.893333V352.853333z m63.715555 53.390223V615.253333h47.587556c17.792 0 30.634667-0.995556 38.542222-3.015111 10.325333-2.574222 18.858667-6.968889 25.6-13.127111 6.897778-6.172444 12.501333-16.284444 16.796445-30.350222 4.309333-14.222222 6.456889-33.521778 6.456888-57.912889 0-24.405333-2.133333-43.121778-6.456888-56.177778-4.295111-13.084444-10.325333-23.267556-18.076445-30.577778-7.751111-7.324444-17.578667-12.273778-29.496889-14.862222-8.888889-1.991111-26.339556-3.000889-52.309333-3.000889H223.573333zM593.024 595.683556l60.273778 10.112c-7.751111 22.101333-20.024889 38.968889-36.821334 50.588444-16.64 11.491556-37.518222 17.223111-62.634666 17.223111-39.765333 0-69.176889-12.984889-88.263111-38.968889-15.075556-20.807111-22.613333-47.075556-22.613334-78.791111 0-37.888 9.912889-67.512889 29.724445-88.903111 19.797333-21.532444 44.842667-32.284444 75.121778-32.284444 34.005333 0 60.856889 11.264 80.497777 33.792 19.669333 22.385778 29.070222 56.760889 28.216889 103.111111H504.974222c0.426667 17.948444 5.304889 31.943111 14.634667 41.984 9.329778 9.898667 20.949333 14.862222 34.872889 14.862222 9.472 0 17.436444-2.588444 23.893333-7.751111 6.456889-5.176889 11.335111-13.496889 14.648889-24.974222z m3.441778-61.141334c-0.426667-17.507556-4.949333-30.791111-13.568-39.822222-8.604444-9.187556-19.086222-13.795556-31.431111-13.795556-13.198222 0-24.106667 4.821333-32.711111 14.435556-8.618667 9.614222-12.856889 22.684444-12.714667 39.182222h90.424889zM887.751111 507.420444l-59.633778 10.766223c-2.005333-11.918222-6.599111-20.892444-13.781333-26.922667-7.025778-6.016-16.213333-9.031111-27.548444-9.031111-15.075556 0-27.121778 5.233778-36.167112 15.715555-8.903111 10.325333-13.354667 27.690667-13.354666 52.096 0 27.121778 4.522667 46.279111 13.568 57.472 9.187556 11.192889 21.461333 16.796444 36.807111 16.796445 11.491556 0 20.892444-3.228444 28.202667-9.685333 7.324444-6.599111 12.487111-17.877333 15.502222-33.806223l59.420444 10.126223c-6.172444 27.264-18.019556 47.857778-35.527111 61.781333-17.493333 13.923556-40.96 20.878222-70.4 20.878222-33.422222 0-60.131556-10.538667-80.071111-31.644444-19.811556-21.091556-29.724444-50.304-29.724444-87.608889 0-37.745778 9.984-67.100444 29.937777-88.049778 19.939556-21.105778 46.933333-31.658667 80.938667-31.658667 27.847111 0 49.948444 6.030222 66.304 18.090667 16.497778 11.918222 28.344889 30.151111 35.527111 54.684444z'"],161:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M216.590222 555.818667l67.982222-6.613334c4.096 22.826667 12.373333 39.594667 24.803556 50.289778 12.586667 10.709333 29.511111 16.071111 50.773333 16.071111 22.499556 0 39.424-4.736 50.759111-14.179555 11.491556-9.6 17.237333-20.764444 17.237334-33.521778 0-8.192-2.446222-15.118222-7.324445-20.778667-4.721778-5.831111-13.070222-10.865778-25.031111-15.118222-8.177778-2.830222-26.837333-7.864889-55.950222-15.104-37.475556-9.287111-63.758222-20.707556-78.862222-34.232889-21.262222-19.057778-31.886222-42.268444-31.886222-69.660444 0-17.635556 4.963556-34.076444 14.876444-49.351111 10.083556-15.416889 24.476444-27.150222 43.207111-35.171556 18.887111-8.035556 41.642667-12.046222 68.238222-12.046222 43.448889 0 76.117333 9.528889 97.991111 28.572444 22.044444 19.057778 33.607111 44.472889 34.702223 76.259556l-69.888 3.072c-2.986667-17.777778-9.443556-30.535111-19.356445-38.257778-9.756444-7.864889-24.476444-11.804444-44.16-11.804444-20.295111 0-36.195556 4.181333-47.687111 12.515555-7.395556 5.361778-11.093333 12.515556-11.093333 21.489778 0 8.192 3.456 15.189333 10.382222 21.020444 8.817778 7.395556 30.222222 15.104 64.227556 23.139556 33.991111 8.021333 59.107556 16.355556 75.320888 25.031111 16.355556 8.490667 29.112889 20.224 38.257778 35.171556 9.272889 14.791111 13.923556 33.137778 13.923556 55.011555 0 19.84-5.518222 38.4-16.540445 55.722667-11.008 17.322667-26.595556 30.222222-46.748444 38.727111-20.138667 8.334222-45.255111 12.515556-75.320889 12.515555-43.747556 0-77.368889-10.083556-100.807111-30.222222-23.466667-20.309333-37.475556-49.820444-42.040889-88.547555zM721.393778 668.444444v-37.546666a96.426667 96.426667 0 0 1-36.124445 31.644444 100.238222 100.238222 0 0 1-46.990222 11.562667c-16.839111 0-31.957333-3.697778-45.340444-11.093333-13.368889-7.395556-23.054222-17.777778-29.041778-31.160889-5.973333-13.383111-8.96-31.886222-8.96-55.495111V417.706667h66.346667v115.228444c0 35.256889 1.180444 56.888889 3.541333 64.924445 2.517333 7.864889 6.997333 14.165333 13.454222 18.887111 6.456889 4.565333 14.648889 6.855111 24.561778 6.855111 11.320889 0 21.475556-3.072 30.449778-9.216 8.96-6.300444 15.118222-14.008889 18.417777-23.139556 3.299556-9.287111 4.963556-31.857778 4.963556-67.754666v-105.784889h66.346667V668.444444h-61.624889z'"],162:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M190.677333 668.444444V322.304h104.604445l62.805333 236.117333 62.094222-236.117333h104.832V668.444444H460.088889V395.975111L391.381333 668.444444h-67.299555l-68.465778-272.469333V668.444444h-64.938667zM578.616889 539.52c0-22.030222 5.418667-43.363556 16.284444-63.971556 10.865778-20.622222 26.211556-36.366222 46.037334-47.217777 19.996444-10.88 42.268444-16.298667 66.830222-16.298667 37.930667 0 69.020444 12.359111 93.255111 37.063111 24.248889 24.561778 36.366222 55.651556 36.366222 93.269333 0 37.930667-12.273778 69.404444-36.835555 94.435556-24.391111 24.888889-55.182222 37.304889-92.316445 37.304889a146.346667 146.346667 0 0 1-65.877333-15.573333c-20.764444-10.382222-36.593778-25.585778-47.459556-45.568-10.865778-20.152889-16.284444-44.629333-16.284444-73.429334z m67.982222 3.555556c0 24.860444 5.916444 43.904 17.720889 57.130666 11.804444 13.226667 26.368 19.84 43.676444 19.84 17.322667 0 31.800889-6.613333 43.448889-19.84 11.804444-13.226667 17.706667-32.426667 17.706667-57.6 0-24.561778-5.902222-43.448889-17.706667-56.675555-11.662222-13.226667-26.126222-19.84-43.448889-19.84-17.308444 0-31.872 6.613333-43.676444 19.84-11.804444 13.226667-17.706667 32.270222-17.706667 57.144889z'"],163:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M340.650667 668.444444V380.871111H237.937778v-58.567111h275.072v58.552889h-102.471111V668.444444h-69.888zM687.032889 668.444444v-37.546666a96.426667 96.426667 0 0 1-36.124445 31.644444 100.238222 100.238222 0 0 1-46.990222 11.562667c-16.839111 0-31.957333-3.697778-45.340444-11.093333-13.368889-7.395556-23.054222-17.777778-29.041778-31.160889-5.973333-13.383111-8.96-31.886222-8.96-55.495111V417.706667h66.346667v115.228444c0 35.256889 1.180444 56.888889 3.541333 64.924445 2.517333 7.864889 6.997333 14.165333 13.454222 18.887111 6.456889 4.565333 14.648889 6.855111 24.561778 6.855111 11.320889 0 21.475556-3.072 30.449778-9.216 8.96-6.300444 15.118222-14.008889 18.417778-23.139556 3.299556-9.287111 4.963556-31.857778 4.963555-67.754666v-105.784889h66.346667V668.444444h-61.624889z'"],164:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M226.517333 668.444444l-82.631111-346.140444h71.537778l52.167111 237.767111 63.288889-237.767111h83.100444l60.686223 241.777778 53.12-241.777778h70.371555L514.104889 668.444444h-74.140445l-68.949333-258.773333L302.307556 668.444444h-75.804445zM769.806222 588.643556l66.104889 11.093333c-8.490667 24.234667-21.959111 42.737778-40.362667 55.480889-18.261333 12.600889-41.173333 18.887111-68.707555 18.887111-43.605333 0-75.875556-14.236444-96.810667-42.723556-16.526222-22.826667-24.789333-51.626667-24.789333-86.428444 0-41.557333 10.851556-74.055111 32.568889-97.507556 21.731556-23.608889 49.208889-35.413333 82.417778-35.413333 37.304889 0 66.730667 12.359111 88.305777 37.063111 21.560889 24.561778 31.857778 62.250667 30.919111 113.095111H673.237333c0.469333 19.683556 5.831111 35.029333 16.056889 46.051556 10.24 10.851556 22.983111 16.284444 38.257778 16.284444 10.382222 0 19.114667-2.844444 26.197333-8.490666 7.082667-5.674667 12.430222-14.791111 16.056889-27.392z m3.783111-67.057778c-0.483556-19.2-5.432889-33.763556-14.876444-43.690667-9.443556-10.069333-20.935111-15.104-34.474667-15.104-14.478222 0-26.453333 5.262222-35.896889 15.815111-9.443556 10.552889-14.08 24.874667-13.937777 42.979556h99.185777z'"],165:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M326.428444 668.444444V380.871111H223.715556v-58.567111h275.072v58.552889h-102.471112V668.444444h-69.888zM609.763556 322.304v127.260444c21.404444-25.031111 46.990222-37.546667 76.728888-37.546666 15.274667 0 29.056 2.844444 41.329778 8.504889 12.273778 5.674667 21.475556 12.913778 27.619556 21.731555 6.300444 8.817778 10.552889 18.574222 12.757333 29.269334 2.360889 10.709333 3.541333 27.306667 3.541333 49.820444V668.444444h-66.346666v-132.451555c0-26.296889-1.265778-42.979556-3.783111-50.062222a32.099556 32.099556 0 0 0-13.454223-16.768c-6.300444-4.238222-14.250667-6.371556-23.850666-6.371556-11.022222 0-20.864 2.673778-29.511111 8.035556-8.661333 5.347556-15.032889 13.454222-19.128889 24.32-3.939556 10.695111-5.902222 26.595556-5.902222 47.687111V668.444444h-66.346667V322.304h66.346667z'"],166:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M291.655111 668.444444V322.304H528.924444v58.552889h-167.395555v81.934222h144.497778v58.552889h-144.497778V668.444444h-69.888zM649.827556 668.444444h-66.346667V417.706667h61.624889v35.640889c10.552889-16.839111 19.996444-27.946667 28.344889-33.28 8.490667-5.361778 18.090667-8.035556 28.8-8.035556 15.118222 0 29.667556 4.167111 43.676444 12.515556l-20.536889 57.841777c-11.178667-7.253333-21.560889-10.865778-31.160889-10.865777-9.301333 0-17.166222 2.602667-23.608889 7.793777-6.456889 5.034667-11.576889 14.250667-15.36 27.633778-3.612444 13.368889-5.432889 41.386667-5.432888 84.053333V668.444444z'"],167:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M230.812444 555.818667l67.982223-6.613334c4.096 22.826667 12.373333 39.594667 24.803555 50.289778 12.586667 10.709333 29.511111 16.071111 50.773334 16.071111 22.499556 0 39.424-4.736 50.759111-14.179555 11.491556-9.6 17.237333-20.764444 17.237333-33.521778 0-8.192-2.446222-15.118222-7.324444-20.778667-4.721778-5.831111-13.070222-10.865778-25.031112-15.118222-8.177778-2.830222-26.837333-7.864889-55.950222-15.104-37.475556-9.287111-63.758222-20.707556-78.862222-34.232889-21.262222-19.057778-31.886222-42.268444-31.886222-69.660444 0-17.635556 4.963556-34.076444 14.876444-49.351111 10.083556-15.416889 24.476444-27.150222 43.207111-35.171556 18.887111-8.035556 41.642667-12.046222 68.238223-12.046222 43.448889 0 76.117333 9.528889 97.991111 28.572444 22.044444 19.057778 33.607111 44.472889 34.702222 76.259556l-69.888 3.072c-2.986667-17.777778-9.443556-30.535111-19.356445-38.257778-9.756444-7.864889-24.476444-11.804444-44.16-11.804444-20.295111 0-36.195556 4.181333-47.687111 12.515555-7.395556 5.361778-11.093333 12.515556-11.093333 21.489778 0 8.192 3.456 15.189333 10.382222 21.020444 8.817778 7.395556 30.222222 15.104 64.227556 23.139556 33.991111 8.021333 59.107556 16.355556 75.320889 25.031111 16.355556 8.490667 29.112889 20.224 38.257777 35.171556 9.272889 14.791111 13.923556 33.137778 13.923556 55.011555 0 19.84-5.518222 38.4-16.540444 55.722667-11.008 17.322667-26.595556 30.222222-46.748445 38.727111-20.138667 8.334222-45.255111 12.515556-75.320889 12.515555-43.747556 0-77.368889-10.083556-100.807111-30.222222-23.466667-20.309333-37.475556-49.820444-42.040889-88.547555zM620.16 494.193778l-60.216889-10.865778c6.769778-24.234667 18.417778-42.183111 34.944-53.831111s41.088-17.464889 73.671111-17.464889c29.582222 0 51.626667 3.541333 66.104889 10.624 14.492444 6.926222 24.632889 15.815111 30.464 26.680889 5.973333 10.695111 8.96 30.449778 8.96 59.264l-0.711111 77.44c0 22.044444 1.038222 38.328889 3.086222 48.881778 2.204444 10.382222 6.215111 21.560889 12.032 33.521777h-65.635555a243.768889 243.768889 0 0 1-6.371556-19.598222 118.883556 118.883556 0 0 0-2.360889-7.793778c-11.335111 11.022222-23.466667 19.285333-36.366222 24.789334a104.135111 104.135111 0 0 1-41.315556 8.263111c-25.813333 0-46.193778-6.997333-61.155555-21.006222-14.791111-14.008889-22.186667-31.715556-22.186667-53.134223 0-14.151111 3.384889-26.752 10.140445-37.774222a65.493333 65.493333 0 0 1 28.344889-25.500444c12.273778-5.973333 29.909333-11.164444 52.892444-15.573334 31.004444-5.831111 52.48-11.264 64.455111-16.298666v-6.613334c0-12.743111-3.157333-21.802667-9.443555-27.150222-6.300444-5.504-18.190222-8.263111-35.655112-8.263111-11.804444 0-21.020444 2.360889-27.633777 7.082667-6.599111 4.565333-11.946667 12.672-16.042667 24.32z m88.775111 53.831111c-8.504889 2.844444-21.959111 6.215111-40.391111 10.154667-18.403556 3.939556-30.435556 7.793778-36.124444 11.562666-8.647111 6.144-12.970667 13.937778-12.970667 23.381334 0 9.287111 3.456 17.322667 10.382222 24.092444 6.926222 6.755556 15.744 10.140444 26.453333 10.140444 11.946667 0 23.367111-3.925333 34.232889-11.804444 8.021333-5.973333 13.297778-13.297778 15.815111-21.959111 1.735111-5.660444 2.602667-16.440889 2.602667-32.341333v-13.226667z'"],168:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M726.186667 352.995556a42.666667 42.666667 0 0 1 1.706666 60.302222L496.256 658.389333a56.888889 56.888889 0 0 1-82.688 0l-131.697778-139.335111a42.666667 42.666667 0 0 1 62.023111-58.609778l111.018667 117.461334L665.884444 354.688a42.666667 42.666667 0 0 1 60.302223-1.706667z'"],169:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M325.390222 325.390222a42.666667 42.666667 0 0 1 60.330667 0l312.888889 312.888889a42.666667 42.666667 0 1 1-60.330667 60.330667l-312.888889-312.888889a42.666667 42.666667 0 0 1 0-60.330667z'","d='M698.609778 325.390222a42.666667 42.666667 0 0 1 0 60.330667l-312.888889 312.888889a42.666667 42.666667 0 1 1-60.330667-60.330667l312.888889-312.888889a42.666667 42.666667 0 0 1 60.330667 0z'"],170:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M241.777778 352a56.888889 56.888889 0 0 1 56.888889-56.888889h426.666666a56.888889 56.888889 0 0 1 56.888889 56.888889v345.6a56.888889 56.888889 0 0 1-56.888889 56.888889H298.666667a56.888889 56.888889 0 0 1-56.888889-56.888889v-345.6z'","d='M379.733333 241.066667a56.888889 56.888889 0 0 1 56.888889 56.888889v34.844444a56.888889 56.888889 0 0 1-113.777778 0v-34.844444a56.888889 56.888889 0 0 1 56.888889-56.888889zM649.955556 241.066667a56.888889 56.888889 0 0 1 56.888888 56.888889v34.844444a56.888889 56.888889 0 0 1-113.777777 0v-34.844444a56.888889 56.888889 0 0 1 56.888889-56.888889z'","d='M378.311111 241.066667a28.444444 28.444444 0 0 1 28.444445 28.444444v64.711111a28.444444 28.444444 0 0 1-56.888889 0v-64.711111a28.444444 28.444444 0 0 1 28.444444-28.444444zM648.533333 241.066667a28.444444 28.444444 0 0 1 28.444445 28.444444v64.711111a28.444444 28.444444 0 0 1-56.888889 0v-64.711111a28.444444 28.444444 0 0 1 28.444444-28.444444z'","d='M363.377778 469.333333a28.444444 28.444444 0 0 1 28.444444-28.444444h240.355556a28.444444 28.444444 0 1 1 0 56.888889h-240.355556a28.444444 28.444444 0 0 1-28.444444-28.444445zM363.377778 617.955556a28.444444 28.444444 0 0 1 28.444444-28.444445h132.266667a28.444444 28.444444 0 1 1 0 56.888889h-132.266667a28.444444 28.444444 0 0 1-28.444444-28.444444z'"],171:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M512 227.555556a42.666667 42.666667 0 0 1 42.666667 42.666666v231.210667l108.387555 108.401778a42.666667 42.666667 0 1 1-60.330666 60.330666L469.333333 536.789333V270.222222a42.666667 42.666667 0 0 1 42.666667-42.666666z'"],172:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M487.367111 199.111111c10.951111-18.958222 38.314667-18.958222 49.265778 0L795.306667 647.111111c10.951111 18.958222-2.744889 42.666667-24.632889 42.666667H253.354667c-21.902222 0-35.584-23.708444-24.647111-42.666667L487.367111 199.111111z'","d='M512 312.888889a28.444444 28.444444 0 0 1 28.444444 28.444444v156.444445a28.444444 28.444444 0 1 1-56.888888 0V341.333333a28.444444 28.444444 0 0 1 28.444444-28.444444z'","d='M554.666667 597.333333a42.666667 42.666667 0 1 1-85.333334 0 42.666667 42.666667 0 0 1 85.333334 0z'"],173:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M512 782.222222a42.666667 42.666667 0 0 1-42.666667-42.666666V455.111111a42.666667 42.666667 0 1 1 85.333334 0v284.444445a42.666667 42.666667 0 0 1-42.666667 42.666666z'","d='M455.111111 298.666667a56.888889 56.888889 0 0 1 113.777778 0 56.888889 56.888889 0 0 1-113.777778 0z'"],174:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M506.424889 666.168889a52.622222 52.622222 0 0 1 22.528 4.778667c7.281778 3.185778 13.653333 7.509333 19.114667 12.970666 5.461333 5.461333 9.784889 11.605333 12.970666 18.432 3.185778 7.281778 4.778667 15.018667 4.778667 23.210667a52.622222 52.622222 0 0 1-4.778667 22.528c-3.185778 7.281778-7.509333 13.653333-12.970666 19.114667a61.767111 61.767111 0 0 1-19.114667 12.970666 52.622222 52.622222 0 0 1-22.528 4.778667c-8.192 0-15.928889-1.592889-23.210667-4.778667a64.469333 64.469333 0 0 1-18.432-12.970666 61.767111 61.767111 0 0 1-12.970666-19.114667 52.622222 52.622222 0 0 1-4.778667-22.528c0-8.192 1.592889-15.928889 4.778667-23.210667 3.185778-6.826667 7.509333-12.970667 12.970666-18.432a64.469333 64.469333 0 0 1 18.432-12.970666 57.272889 57.272889 0 0 1 23.210667-4.778667z m18.432-454.656c45.511111 0 81.237333 12.515556 107.178667 37.546667 25.941333 24.576 38.912 60.302222 38.912 107.178666 0 21.845333-5.233778 42.097778-15.701334 60.757334-10.467556 18.659556-26.624 38.912-48.469333 60.757333-13.198222 12.743111-23.665778 23.665778-31.402667 32.768-7.736889 8.647111-13.653333 16.611556-17.749333 23.893333-3.640889 6.826667-6.144 13.653333-7.509333 20.48a177.066667 177.066667 0 0 0-1.365334 23.210667c0 29.127111-12.288 43.690667-36.864 43.690667-9.557333 0-17.066667-0.682667-22.528-2.048-5.461333-1.365333-9.784889-3.640889-12.970666-6.826667-2.730667-3.640889-4.551111-8.192-5.461334-13.653333a141.44 141.44 0 0 1-1.365333-21.162667c0-46.421333 23.665778-92.842667 70.997333-139.264 10.922667-10.467556 19.797333-19.114667 26.624-25.941333 6.826667-7.281778 12.060444-13.880889 15.701334-19.797334 4.096-6.371556 6.599111-12.515556 7.509333-18.432 1.365333-6.371556 2.048-13.880889 2.048-22.528 0-20.48-6.144-36.181333-18.432-47.104-12.288-10.922667-29.354667-16.384-51.2-16.384s-39.367111 6.371556-52.565333 19.114667c-13.198222 12.288-20.252444 27.306667-21.162667 45.056-1.365333 26.851556-14.563556 40.277333-39.594667 40.277333-26.396444 0-39.594667-12.970667-39.594666-38.912 0-37.319111 14.563556-70.542222 43.690666-99.669333 28.672-28.672 65.763556-43.008 111.274667-43.008z'"],175:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M597.333333 540.273778c42.951111-29.468444 71.111111-78.919111 71.111111-134.940445C668.444444 315.008 595.214222 241.777778 504.888889 241.777778S341.333333 315.008 341.333333 405.333333c0 62.008889 34.488889 115.939556 85.333334 143.672889V611.555556h170.666666v-71.281778z'","d='M507.192889 213.333333C400.739556 213.333333 312.888889 301.397333 312.888889 409.656889c0 65.991111 25.969778 119.168 77.767111 154.638222v63.459556c0 7.224889 4.266667 14.122667 9.528889 19.029333a27.221333 27.221333 0 0 0 20.48 6.784L598.755556 639.217778c13.368889-1.080889 24.945778-12.316444 24.945777-25.813334v-48.668444c45.326222-32.853333 77.653333-89.671111 77.653334-155.079111C701.383111 301.397333 613.660444 213.333333 507.207111 213.333333z m77.397333 313.827556c-8.391111 4.494222-12.657778 13.283556-12.657778 22.855111v39.509333l-129.479111 10.168889v-49.664c0-9.201778-3.768889-17.720889-11.676444-22.357333-44.586667-26.168889-65.706667-64.768-65.706667-118.016 0-79.701333 63.786667-144.526222 141.852445-144.526222s142.193778 64.824889 142.193777 144.526222c0 51.712-23.736889 95.644444-64.526222 117.504z m36.807111 167.153778a25.841778 25.841778 0 0 1-23.808 27.704889l-176.824889 12.913777a25.799111 25.799111 0 0 1-27.534222-23.950222 25.841778 25.841778 0 0 1 23.808-27.690667l176.824889-12.942222a25.799111 25.799111 0 0 1 27.534222 23.964445z m-56.334222 81.777777a25.856 25.856 0 0 1-23.694222 27.804445l-64.156445 4.977778a25.799111 25.799111 0 0 1-27.648-23.836445 25.856 25.856 0 0 1 23.694223-27.804444l64.156444-4.977778a25.827556 25.827556 0 0 1 27.648 23.836444z'","d='M587.989333 429.639111c11.463111 0 21.262222-8.760889 22.4-20.48 5.688889-58.766222-38.229333-90.254222-62.250666-98.702222a22.4 22.4 0 0 0-28.529778 13.767111 22.784 22.784 0 0 0 13.482667 28.956444c3.697778 1.379556 36.053333 14.535111 32.455111 51.598223a22.613333 22.613333 0 0 0 22.442666 24.860444z'"],176:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M483.555556 483.555556V56.888889h85.333333v466.488889a45.511111 45.511111 0 0 1-45.511111 45.511111H56.888889v-85.333333h426.666667z'"],177:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M605.568 271.345778a86.456889 86.456889 0 1 1-172.913778 0 86.456889 86.456889 0 0 1 172.913778 0z'","d='M654.222222 499.271111c7.850667 0 14.293333-6.371556 13.610667-14.193778a163.982222 163.982222 0 0 0-10.752-45.952 157.937778 157.937778 0 0 0-32.369778-51.000889 149.077333 149.077333 0 0 0-48.455111-34.076444 142.890667 142.890667 0 0 0-57.144889-11.960889c-19.612444 0-39.025778 4.053333-57.144889 11.946667a149.077333 149.077333 0 0 0-48.455111 34.090666 157.980444 157.980444 0 0 0-32.369778 51.000889 163.982222 163.982222 0 0 0-10.752 45.937778c-0.668444 7.822222 5.76 14.222222 13.610667 14.222222h270.222222z'","d='M469.333333 519.111111a106.666667 106.666667 0 1 1-213.333333 0 106.666667 106.666667 0 0 1 213.333333 0zM768 519.111111a106.666667 106.666667 0 1 1-213.333333 0 106.666667 106.666667 0 0 1 213.333333 0z'","d='M455.111111 519.111111a92.444444 92.444444 0 1 1-184.888889 0 92.444444 92.444444 0 0 1 184.888889 0z'","d='M512 768c7.850667 0 14.279111-6.371556 13.653333-14.208a176.810667 176.810667 0 0 0-11.875555-51.100444 171.335111 171.335111 0 0 0-35.456-55.367112 163.285333 163.285333 0 0 0-53.063111-37.006222A157.667556 157.667556 0 0 0 362.666667 597.333333c-21.475556 0-42.752 4.408889-62.577778 12.984889a163.271111 163.271111 0 0 0-53.077333 37.006222 171.335111 171.335111 0 0 0-35.456 55.367112A176.810667 176.810667 0 0 0 199.68 753.777778c-0.625778 7.822222 5.802667 14.208 13.653333 14.208h298.666667zM753.777778 519.111111a92.444444 92.444444 0 1 1-184.888889 0 92.444444 92.444444 0 0 1 184.888889 0z'","d='M810.666667 768c7.850667 0 14.279111-6.371556 13.653333-14.208a176.810667 176.810667 0 0 0-11.875556-51.100444 171.335111 171.335111 0 0 0-35.456-55.367112 163.285333 163.285333 0 0 0-53.063111-37.006222A157.667556 157.667556 0 0 0 661.333333 597.333333c-21.475556 0-42.752 4.408889-62.577777 12.984889a163.271111 163.271111 0 0 0-53.077334 37.006222 171.335111 171.335111 0 0 0-35.456 55.367112A176.810667 176.810667 0 0 0 498.346667 753.777778c-0.625778 7.822222 5.802667 14.208 13.653333 14.208h298.666667z'"],178:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M625.777778 355.555556v142.222222h56.888889V355.555556c0-94.250667-76.416-170.666667-170.666667-170.666667s-170.666667 76.416-170.666667 170.666667v142.222222h56.888889V355.555556a113.777778 113.777778 0 1 1 227.555556 0z'","d='M256 469.333333a28.444444 28.444444 0 0 1 28.444444-28.444444h455.111112a28.444444 28.444444 0 0 1 28.444444 28.444444v270.222223a28.444444 28.444444 0 0 1-28.444444 28.444444H284.444444a28.444444 28.444444 0 0 1-28.444444-28.444444V469.333333z'","d='M483.555556 661.333333a35.555556 35.555556 0 0 0 71.111111 0V625.777778h-71.111111v35.555555z'","d='M583.111111 576a64 64 0 1 1-128 0 64 64 0 0 1 128 0z'"],179:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M341.333333 355.555556c0-94.250667 76.416-170.666667 170.666667-170.666667s170.666667 76.416 170.666667 170.666667v7.111111a28.444444 28.444444 0 1 1-56.888889 0V355.555556a113.777778 113.777778 0 1 0-227.555556 0v113.777777a28.444444 28.444444 0 1 1-56.888889 0v-113.777777z'","d='M256 469.333333a28.444444 28.444444 0 0 1 28.444444-28.444444h455.111112a28.444444 28.444444 0 0 1 28.444444 28.444444v270.222223a28.444444 28.444444 0 0 1-28.444444 28.444444H284.444444a28.444444 28.444444 0 0 1-28.444444-28.444444V469.333333z'","d='M483.555556 661.333333a35.555556 35.555556 0 0 0 71.111111 0V625.777778h-71.111111v35.555555z'","d='M583.111111 576a64 64 0 1 1-128 0 64 64 0 0 1 128 0z'"],180:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M227.555556 369.777778a56.888889 56.888889 0 0 1 56.888888-56.888889h455.111112a56.888889 56.888889 0 0 1 56.888888 56.888889v298.666666a56.888889 56.888889 0 0 1-56.888888 56.888889H284.444444a56.888889 56.888889 0 0 1-56.888888-56.888889V369.777778z'","d='M159.786667 370.616889a28.444444 28.444444 0 0 1 38.485333-11.719111L504.888889 522.424889l306.616889-163.527111a28.444444 28.444444 0 0 1 26.766222 50.204444L504.888889 586.908444 171.505778 409.102222a28.444444 28.444444 0 0 1-11.719111-38.485333z'"],181:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M557.454222 391.111111L344.462222 514.090667a77.653333 77.653333 0 0 0 77.667556 134.513777l212.992-122.965333-25.884445-44.842667-212.992 122.965334a25.884444 25.884444 0 0 1-25.884444-44.842667l212.992-122.965333-25.884445-44.842667z'","d='M644.593778 490.268444a25.884444 25.884444 0 1 1-44.828445 25.884445 25.884444 25.884444 0 0 1 44.828445-25.884445zM637.198222 270.336a25.884444 25.884444 0 1 1-44.842666 25.884444 25.884444 25.884444 0 0 1 44.842666-25.884444z'","d='M507.534222 718.862222l257.848889-148.849778a129.436444 129.436444 0 0 0-129.450667-224.199111L378.097778 494.648889l25.884444 44.842667 257.834667-148.864a77.653333 77.653333 0 0 1 77.653333 134.528L481.664 674.019556l25.884444 44.842666z'","d='M467.313778 338.531556L293.546667 438.855111c-83.584 48.256-112.213333 155.121778-63.971556 238.705778 48.256 83.584 155.136 112.213333 238.72 63.957333l173.752889-100.309333-25.884444-44.842667-173.767112 100.309334a122.965333 122.965333 0 0 1-122.965333-212.977778l173.752889-100.323556-25.884444-44.842666z'","d='M627.726222 305.706667l-179.370666 103.552-25.884445-44.842667 179.356445-103.537778 25.884444 44.828445z'"],182:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M771.214222 577.493333l-49.322666 10.894223c-3.939556 11.861333-8.874667 23.751111-14.791112 35.612444l26.624 44.544c9.870222 15.829333 14.791111 39.580444 0 54.414222l-26.624 26.723556c-6.912 6.926222-16.782222 9.898667-26.638222 9.898666-9.856 0-20.707556-2.972444-28.600889-8.903111l-43.406222-27.719111c-10.851556 5.944889-22.684444 10.894222-34.517333 14.848l-10.851556 49.479111C560.128 805.091556 544.341333 824.888889 522.638222 824.888889h-38.456889c-20.721778 0-33.536-19.797333-38.471111-38.599111l-11.832889-49.479111c-12.828444-3.953778-25.656889-9.884444-37.489777-15.829334l-44.387556 27.704889c-5.916444 7.921778-16.768 10.894222-26.638222 10.894222-9.856 0-19.726222-2.972444-26.624-10.894222l-26.638222-26.709333c-14.791111-14.848-9.856-38.599111 0-54.428445l27.619555-46.506666c-4.935111-10.894222-9.856-21.774222-13.795555-32.654222l-49.322667-10.894223C218.823111 574.520889 199.111111 558.691556 199.111111 536.917333V498.346667c0-20.778667 19.726222-33.649778 38.471111-38.599111l49.322667-12.856889c2.958222-10.894222 7.879111-20.792889 12.814222-30.677334l-27.619555-46.506666c-9.856-15.843556-14.791111-39.594667 0-54.428445l26.638222-26.723555c6.897778-5.944889 16.768-8.903111 26.624-8.903111 9.870222 0 20.721778 2.972444 28.615111 8.903111l44.373333 28.700444c11.847111-5.944889 24.675556-11.875556 37.489778-15.829333l11.832889-49.493334c3.953778-17.806222 16.782222-38.584889 38.471111-38.584888h38.471111c20.707556 0 36.494222 19.797333 40.448 37.603555l10.837333 49.479111c11.847111 3.953778 23.68 8.903111 34.531556 14.848l43.406222-27.719111c7.879111-4.949333 17.749333-8.903111 28.586667-8.903111 9.870222 0 19.740444 2.972444 26.638222 10.894222l26.638222 26.709334c14.791111 14.848 9.870222 38.599111 0 54.428444l-26.638222 44.529778c4.935111 10.88 9.870222 21.76 13.809778 32.654222l49.322667 12.871111c17.749333 3.953778 38.471111 16.824889 38.471111 38.584889v38.599111c-0.995556 20.778667-20.707556 36.608-39.452445 39.580445zM504.888889 427.093333c-51.299556 0-92.728889 41.571556-92.728889 92.032s41.429333 92.017778 92.728889 92.017778c51.285333 0 92.728889-41.557333 92.728889-92.017778 0-50.460444-42.424889-92.017778-92.728889-92.017777z'"],183:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M197.191111 755.911111C248.846222 620.970667 370.346667 526.222222 512 526.222222s263.153778 94.748444 314.808889 229.688889C753.962667 849.777778 640.028444 910.222222 512 910.222222c-128.042667 0-241.962667-60.430222-314.808889-154.311111z'","d='M668.444444 362.666667C668.444444 445.141333 598.4 512 512 512s-156.444444-66.858667-156.444444-149.333333S425.6 213.333333 512 213.333333s156.444444 66.858667 156.444444 149.333334z'"],184:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M312.888889 270.222222a56.888889 56.888889 0 0 1 56.888889-56.888889h284.444444a56.888889 56.888889 0 0 1 56.888889 56.888889v483.555556a56.888889 56.888889 0 0 1-56.888889 56.888889H369.777778a56.888889 56.888889 0 0 1-56.888889-56.888889V270.222222z'","d='M341.333333 270.222222a28.444444 28.444444 0 0 1 28.444445-28.444444h284.444444a28.444444 28.444444 0 0 1 28.444445 28.444444v483.555556a28.444444 28.444444 0 0 1-28.444445 28.444444H369.777778a28.444444 28.444444 0 0 1-28.444445-28.444444V270.222222z'","d='M355.555556 282.951111c0-14.890667 11.662222-26.951111 26.069333-26.951111h260.750222c14.392889 0 26.069333 12.060444 26.069333 26.951111v458.097778C668.444444 755.939556 656.782222 768 642.375111 768H381.624889C367.232 768 355.555556 755.939556 355.555556 741.048889v-458.097778z'","d='M412.444444 711.111111a14.222222 14.222222 0 0 1 14.222223-14.222222h170.666666a14.222222 14.222222 0 1 1 0 28.444444H426.666667a14.222222 14.222222 0 0 1-14.222223-14.222222z'"],185:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M284.444444 270.222222a56.888889 56.888889 0 0 1 56.888889-56.888889h327.111111a56.888889 56.888889 0 0 1 56.888889 56.888889v483.555556a56.888889 56.888889 0 0 1-56.888889 56.888889H341.333333a56.888889 56.888889 0 0 1-56.888889-56.888889V270.222222z'","d='M312.888889 270.222222a28.444444 28.444444 0 0 1 28.444444-28.444444h327.111111a28.444444 28.444444 0 0 1 28.444445 28.444444v483.555556a28.444444 28.444444 0 0 1-28.444445 28.444444H341.333333a28.444444 28.444444 0 0 1-28.444444-28.444444V270.222222z'","d='M327.111111 282.951111c0-14.890667 11.804444-26.951111 26.339556-26.951111h302.876444c14.549333 0 26.339556 12.060444 26.339556 26.951111v458.097778C682.666667 755.939556 670.862222 768 656.327111 768H353.450667C338.901333 768 327.111111 755.939556 327.111111 741.048889v-458.097778z'","d='M384 298.666667a14.222222 14.222222 0 0 1 14.222222-14.222223h170.666667a14.222222 14.222222 0 1 1 0 28.444445H398.222222a14.222222 14.222222 0 0 1-14.222222-14.222222z'","d='M625.777778 298.666667a14.222222 14.222222 0 1 1-28.444445 0 14.222222 14.222222 0 0 1 28.444445 0zM540.444444 704a35.555556 35.555556 0 1 1-71.111111 0 35.555556 35.555556 0 0 1 71.111111 0z'"],186:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M315.804444 448c6.343111 0 12.416 2.503111 16.910223 6.940444 4.48 4.451556 7.011556 10.481778 7.011555 16.768v272.583112c0 6.286222-2.531556 12.316444-7.011555 16.768a24.035556 24.035556 0 0 1-16.924445 6.940444h-17.92c-11.107556 0-21.76-4.366222-29.610666-12.145778A41.287111 41.287111 0 0 1 256 726.513778V489.486222c0-11.008 4.408889-21.560889 12.259556-29.340444a42.055111 42.055111 0 0 1 29.596444-12.145778h17.948444zM543.217778 270.222222c12.700444 0 24.888889 5.006222 33.848889 13.895111 8.988444 8.903111 14.037333 20.977778 14.037333 33.564445v106.609778c0 6.286222 2.517333 12.316444 6.997333 16.768a24.035556 24.035556 0 0 0 16.924445 6.940444h95.374222c11.164444 0 22.186667 2.574222 32.170667 7.537778a71.637333 71.637333 0 0 1 25.358222 21.020444 70.542222 70.542222 0 0 1 11.349333 62.762667l-53.219555 177.777778a71.168 71.168 0 0 1-25.912889 36.778666 72.248889 72.248889 0 0 1-42.951111 14.122667H399.544889a24.120889 24.120889 0 0 1-16.924445-6.940444 23.694222 23.694222 0 0 1-7.025777-16.768V471.708444c0-6.286222 2.517333-12.316444 7.011555-16.768a24.035556 24.035556 0 0 1 16.924445-6.940444h11.989333c10.296889 0 20.309333-3.370667 28.487111-9.585778a46.307556 46.307556 0 0 0 16.696889-24.803555l26.268444-97.550223c3.555556-13.141333 11.377778-24.760889 22.257778-33.052444a62.72 62.72 0 0 1 37.973334-12.785778z'"],187:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M301.582222 590.222222a24.035556 24.035556 0 0 0 16.910222-6.940444c4.48-4.451556 7.011556-10.481778 7.011556-16.768V293.930667c0-6.286222-2.531556-12.316444-7.011556-16.768a24.035556 24.035556 0 0 0-16.924444-6.940445h-17.92c-11.107556 0-21.76 4.366222-29.610667 12.145778A41.287111 41.287111 0 0 0 241.777778 311.708444v237.027556c0 11.008 4.408889 21.560889 12.259555 29.340444 7.850667 7.779556 18.488889 12.145778 29.596445 12.145778h17.948444zM528.995556 768c12.700444 0 24.888889-5.006222 33.848888-13.895111a47.246222 47.246222 0 0 0 14.037334-33.564445v-106.609777c0-6.286222 2.517333-12.316444 6.997333-16.768a24.035556 24.035556 0 0 1 16.924445-6.940445h95.374222c11.164444 0 22.186667-2.574222 32.170666-7.537778a71.637333 71.637333 0 0 0 25.358223-21.020444 70.542222 70.542222 0 0 0 11.349333-62.762667l-53.219556-177.777777a71.168 71.168 0 0 0-25.912888-36.778667A72.248889 72.248889 0 0 0 642.986667 270.222222H385.322667a24.120889 24.120889 0 0 0-16.924445 6.940445 23.694222 23.694222 0 0 0-7.025778 16.768v272.583111c0 6.286222 2.517333 12.316444 7.011556 16.768a24.035556 24.035556 0 0 0 16.924444 6.940444h11.989334c10.296889 0 20.309333 3.370667 28.487111 9.585778 8.163556 6.229333 14.037333 14.933333 16.696889 24.803556l26.268444 97.550222c3.555556 13.141333 11.377778 24.760889 22.257778 33.052444a62.72 62.72 0 0 0 37.973333 12.785778z'"],188:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M469.333333 227.555556a42.666667 42.666667 0 1 1 85.333334 0v284.444444a42.666667 42.666667 0 1 1-85.333334 0V227.555556z'","d='M625.777778 241.777778a56.888889 56.888889 0 0 1 0 113.777778h-85.333334a56.888889 56.888889 0 0 1 0-113.777778h85.333334zM604.444444 384a35.555556 35.555556 0 0 1 0 71.111111h-85.333333a35.555556 35.555556 0 0 1 0-71.111111h85.333333zM668.444444 654.222222c0 86.4-70.044444 156.444444-156.444444 156.444445s-156.444444-70.044444-156.444444-156.444445 70.044444-156.444444 156.444444-156.444444 156.444444 70.044444 156.444444 156.444444z'","d='M568.888889 654.222222a56.888889 56.888889 0 1 1-113.777778 0 56.888889 56.888889 0 0 1 113.777778 0z'"],189:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M796.444444 430.976c0 181.546667-284.444444 318.919111-284.444444 318.919111s-284.444444-136.817778-284.444444-318.919111C227.555556 350.051556 295.224889 284.444444 378.666667 284.444444c56.277333 0 105.386667 29.852444 131.384889 74.126223 0.839111 1.450667 3.000889 1.450667 3.84 0C539.946667 314.311111 589.056 284.444444 645.333333 284.444444 728.775111 284.444444 796.444444 350.065778 796.444444 430.976z'"],190:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M535.608889 319.544889a182.897778 182.897778 0 0 1 108.8-33.521778c25.813333 0.668444 51.171556 6.912 74.296889 18.304a200.675556 200.675556 0 0 1 63.957333 42.837333A186.083556 186.083556 0 0 1 817.308444 412.444444c7.054222 23.808 9.244444 48.782222 6.428445 73.443556-5.006222 52.764444-22.570667 94.08-52.992 123.207111L532.764444 844.657778a30.293333 30.293333 0 0 1-22.257777 8.661333 30.293333 30.293333 0 0 1-21.944889-8.689778 29.696 29.696 0 0 1-8.775111-21.731555 29.653333 29.653333 0 0 1 8.746666-22.044445l143.928889-142.407111a13.084444 13.084444 0 0 0 5.888-10.865778 12.913778 12.913778 0 0 0-5.888-10.865777 13.127111 13.127111 0 0 0-10.965333-5.831111 13.283556 13.283556 0 0 0-10.979556 5.831111L466.631111 779.164444a31.175111 31.175111 0 0 1-33.92 6.883556 30.805333 30.805333 0 0 1-13.966222-11.406222 30.350222 30.350222 0 0 1-5.105778-17.208889 29.624889 29.624889 0 0 1 8.760889-22.030222l143.928889-142.449778a13.966222 13.966222 0 0 0 6.343111-11.633778 13.795556 13.795556 0 0 0-6.343111-11.633778 13.127111 13.127111 0 0 0-10.979556-5.831111 13.283556 13.283556 0 0 0-10.979555 5.831111L400.469333 713.671111a30.776889 30.776889 0 0 1-22.257777 8.675556 32.938667 32.938667 0 0 1-22.897778-8.675556 28.629333 28.629333 0 0 1-9.386667-21.717333 31.815111 31.815111 0 0 1 10.339556-23.281778L500.48 525.937778a13.084444 13.084444 0 0 0 5.888-10.865778 12.942222 12.942222 0 0 0-5.888-10.865778 14.549333 14.549333 0 0 0-11.136-5.12 14.691556 14.691556 0 0 0-11.121778 5.12l-145.479111 143.075556c-5.816889 5.902222-13.696 9.344-22.001778 9.671111a27.946667 27.946667 0 0 1-21.944889-9.628445 31.416889 31.416889 0 0 1-9.102222-22.328888 29.269333 29.269333 0 0 1 9.102222-21.745778c96-95.630222 155.249778-153.344 177.834667-174.748445l111.616 109.240889a63.857778 63.857778 0 0 0 23.011556 13.909334 64.384 64.384 0 0 0 52.508444-4.750223 63.573333 63.573333 0 0 0 20.096-17.820444 55.992889 55.992889 0 0 0 9.400889-42.197333 70.869333 70.869333 0 0 0-19.740444-39.424l-127.928889-127.900445z m64.568889 196.451555l-133.546667-132.522666-221.980444 219.733333c-26.339556-26.382222-41.386667-66.730667-44.842667-121.656889a194.275556 194.275556 0 0 1 44.842667-141.824 183.466667 183.466667 0 0 1 61.041777-41.216 185.031111 185.031111 0 0 1 72.519112-14.023111 179.712 179.712 0 0 1 72.021333 13.838222 178.147556 178.147556 0 0 1 60.273778 41.386667l133.816889 132.465778a29.226667 29.226667 0 0 1 8.746666 21.731555 29.653333 29.653333 0 0 1-8.746666 22.044445 31.288889 31.288889 0 0 1-22.570667 8.661333 30.762667 30.762667 0 0 1-21.575111-8.618667z'"],191:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M770.275556 690.062222c0 7.210667-1.237333 13.937778-3.697778 20.195556a50.062222 50.062222 0 0 1-10.524445 16.497778 49.208889 49.208889 0 0 1-15.928889 11.093333c-6.072889 2.659556-12.700444 3.982222-19.911111 3.982222H307.2a54.129778 54.129778 0 0 1-37.546667-15.075555 53.262222 53.262222 0 0 1-11.662222-16.497778c-2.844444-6.257778-4.266667-12.984889-4.266667-20.195556V406.186667c0-14.407111 5.020444-26.638222 15.075556-36.693334 10.055111-10.055111 22.286222-15.075556 36.693333-15.075555h413.013334c14.407111 0 26.638222 5.020444 36.693333 15.075555 10.055111 10.055111 15.075556 22.286222 15.075556 36.693334V483.555556h-129.137778c-14.407111 0-26.638222 4.935111-36.693334 14.791111-10.055111 9.856-15.075556 22.001778-15.075555 36.408889 0.384 9.856 2.460444 18.588444 6.257778 26.168888 3.029333 6.442667 8.064 12.330667 15.075555 17.635556 7.011556 5.304889 17.166222 7.964444 30.435556 7.964444h129.137778v103.537778z m-77.368889-361.813333H434.631111c20.48-10.624 39.822222-20.864 58.026667-30.72 15.928889-8.348444 31.672889-16.682667 47.217778-25.031111s27.690667-14.791111 36.408888-19.342222c13.269333-7.210667 25.130667-10.524444 35.555556-9.955556 10.424889 0.568889 19.242667 2.375111 26.453333 5.404444 8.348444 4.167111 15.544889 9.671111 21.617778 16.497778l32.995556 63.146667zM615.537778 534.755556c0-7.210667 2.460444-13.269333 7.395555-18.204445a24.746667 24.746667 0 0 1 18.204445-7.395555c7.210667 0 13.269333 2.460444 18.204444 7.395555 4.935111 4.935111 7.395556 10.993778 7.395556 18.204445s-2.460444 13.368889-7.395556 18.488888c-4.935111 5.12-10.993778 7.68-18.204444 7.68s-13.269333-2.56-18.204445-7.68a25.699556 25.699556 0 0 1-7.395555-18.488888z'"],192:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M773.432889 379.904l-48.824889 48.810667-135.765333-135.765334 48.796444-48.810666c16.568889-16.568889 33.137778 0 33.137778 0l102.656 102.627555s16.568889 16.568889 0 33.137778zM306.702222 575.104l135.765334 135.779556 264.391111-264.391112-135.779556-135.779555-264.391111 264.391111zM287.416889 715.662222a14.222222 14.222222 0 0 0 14.492444 14.506667l118.414223-2.275556-130.631112-130.645333-2.275555 118.428444z'"],193:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M370.275556 685.781333h283.448888v28.103111h-283.448888V685.795556z m230.855111-334.136889H422.869333a19.171556 19.171556 0 0 0 0 38.328889h178.261334a19.171556 19.171556 0 0 0 0-38.328889z m0 60.686223H422.869333a19.171556 19.171556 0 0 0 0 38.328889h178.261334a19.171556 19.171556 0 0 0 0-38.328889z'","d='M736.568889 479.872h-63.573333v-137.813333a56.291556 56.291556 0 0 0-56.220445-56.220445H407.224889a56.277333 56.277333 0 0 0-56.220445 56.220445v137.813333h-63.573333c-24.064 0-43.761778 21.176889-43.761778 47.061333v164.195556c0 25.870222 19.697778 47.032889 43.761778 47.032889h59.491556V696.604444c0-12.657778 12.572444-22.997333 27.932444-22.997333h274.289778c15.331556 0 27.932444 10.353778 27.932444 22.997333v41.557334h59.491556c24.064 0 43.761778-21.162667 43.761778-47.047111V526.919111c0-25.870222-19.697778-47.047111-43.761778-47.047111z m-347.235556-137.813333a17.891556 17.891556 0 0 1 17.891556-17.891556h209.550222a17.891556 17.891556 0 0 1 17.891556 17.891556v137.813333h-245.333334v-137.813333z m330.624 258.104889a24.604444 24.604444 0 1 1 0-49.180445 24.604444 24.604444 0 0 1 0 49.180445z'"],194:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M378.339556 734.222222h-55.011556V383.744c-13.226667 12.629333-30.648889 25.272889-52.252444 37.902222-21.376 12.629333-40.632889 22.101333-57.742223 28.416v-53.176889c30.762667-14.464 57.642667-31.971556 80.668445-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456v449.777778zM519.495111 513.308444c0-52.963556 5.404444-95.544889 16.199111-127.715555 11.008-32.398222 27.192889-57.358222 48.583111-74.865778C605.866667 293.205333 632.96 284.444444 665.557333 284.444444c24.035556 0 45.112889 4.892444 63.246223 14.663112 18.133333 9.571556 33.109333 23.537778 44.913777 41.870222 11.818667 18.119111 21.091556 40.32 27.804445 66.602666 6.727111 26.069333 10.097778 61.312 10.097778 105.728 0 52.551111-5.404444 95.018667-16.213334 127.416889-10.780444 32.184889-26.979556 57.130667-48.568889 74.865778-21.390222 17.507556-48.497778 26.268444-81.28 26.268445-43.192889 0-77.098667-15.473778-101.745777-46.435556-29.539556-37.290667-44.316444-97.991111-44.316445-182.115556z m56.533333 0c0 73.528889 8.547556 122.524444 25.671112 146.972445 17.308444 24.234667 38.599111 36.352 63.857777 36.352 25.258667 0 46.449778-12.216889 63.559111-36.664889 17.308444-24.448 25.969778-73.329778 25.969778-146.659556 0-73.742222-8.661333-122.737778-25.969778-146.972444-17.109333-24.248889-38.499556-36.366222-64.170666-36.366222-25.258667 0-45.425778 10.695111-60.501334 32.085333-18.944 27.306667-28.416 77.710222-28.416 151.253333z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],195:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M449.450667 734.222222h-55.011556V383.744c-13.226667 12.629333-30.648889 25.272889-52.252444 37.902222-21.376 12.629333-40.632889 22.101333-57.742223 28.416v-53.176889c30.762667-14.464 57.642667-31.971556 80.668445-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456v449.777778zM751.331556 734.222222h-54.997334V383.744c-13.240889 12.629333-30.663111 25.272889-52.252444 37.902222-21.390222 12.629333-40.632889 22.101333-57.742222 28.416v-53.176889c30.748444-14.464 57.642667-31.971556 80.654222-52.551111 23.025778-20.579556 39.324444-40.533333 48.896-59.889778h35.441778v449.777778z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],196:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M378.339556 734.222222h-55.011556V383.744c-13.226667 12.629333-30.648889 25.272889-52.252444 37.902222-21.376 12.629333-40.632889 22.101333-57.742223 28.416v-53.176889c30.762667-14.464 57.642667-31.971556 80.668445-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456v449.777778zM808.561778 681.358222v52.864H512.469333a97.28 97.28 0 0 1 6.414223-38.186666c7.537778-20.167111 19.555556-40.035556 36.053333-59.591112 16.711111-19.555556 40.746667-42.168889 72.106667-67.84 48.696889-39.921778 81.592889-71.495111 98.702222-94.72 17.109333-23.424 25.671111-45.511111 25.671111-66.304 0-21.788444-7.836444-40.120889-23.523556-54.997333-15.488-15.075556-35.754667-22.613333-60.814222-22.613333-26.481778 0-47.658667 7.950222-63.559111 23.836444-15.886222 15.886222-23.921778 37.888-24.135111 65.991111l-56.519111-5.802666c3.868444-42.168889 18.432-74.24 43.690666-96.241778C591.815111 295.537778 625.720889 284.444444 668.302222 284.444444c42.979556 0 76.999111 11.918222 102.058667 35.754667 25.059556 23.822222 37.589333 53.361778 37.589333 88.604445 0 17.92-3.669333 35.555556-11.008 52.864-7.324444 17.308444-19.555556 35.555556-36.664889 54.698666-16.910222 19.143111-45.112889 45.425778-84.636444 78.833778-32.995556 27.690667-54.186667 46.535111-63.559111 56.519111a175.928889 175.928889 0 0 0-23.224889 29.639111h219.704889z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],197:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M378.339556 734.222222h-55.011556V383.744c-13.226667 12.629333-30.648889 25.272889-52.252444 37.902222-21.376 12.629333-40.632889 22.101333-57.742223 28.416v-53.176889c30.762667-14.464 57.642667-31.971556 80.668445-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456v449.777778zM519.808 615.964444l54.997333-7.324444c6.314667 31.160889 17.009778 53.674667 32.085334 67.527111 15.274667 13.653333 33.820444 20.48 55.608889 20.48 25.870222 0 47.672889-8.96 65.393777-26.894222 17.92-17.92 26.88-40.135111 26.88-66.616889 0-25.258667-8.248889-46.037333-24.746666-62.336-16.497778-16.497778-37.475556-24.746667-62.947556-24.746667-10.382222 0-23.324444 2.033778-38.798222 6.115556l6.115555-48.284445c3.655111 0.412444 6.613333 0.611556 8.846223 0.611556 23.438222 0 44.515556-6.115556 63.260444-18.332444 18.730667-12.231111 28.103111-31.061333 28.103111-56.519112 0-20.167111-6.826667-36.878222-20.48-50.119111-13.639111-13.226667-31.260444-19.854222-52.849778-19.854222-21.390222 0-39.210667 6.712889-53.475555 20.167111-14.250667 13.44-23.424 33.607111-27.491556 60.501334l-54.997333-9.784889c6.712889-36.864 21.987556-65.393778 45.824-85.560889C594.972444 294.627556 624.611556 284.444444 660.053333 284.444444c24.448 0 46.961778 5.290667 67.527111 15.886223 20.579556 10.382222 36.266667 24.647111 47.061334 42.780444 10.993778 18.133333 16.497778 37.376 16.497778 57.742222 0 19.356444-5.191111 36.977778-15.587556 52.864-10.382222 15.886222-25.770667 28.529778-46.136889 37.888 26.481778 6.115556 47.061333 18.844444 61.724445 38.200889 14.663111 19.143111 22.001778 43.178667 22.001777 72.106667 0 39.111111-14.264889 72.32-42.780444 99.612444-28.515556 27.093333-64.568889 40.647111-108.16 40.647111-39.324444 0-72.021333-11.719111-98.090667-35.143111-25.870222-23.424-40.632889-53.774222-44.302222-91.064889z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],198:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M378.339556 734.222222h-55.011556V383.744c-13.226667 12.629333-30.648889 25.272889-52.252444 37.902222-21.376 12.629333-40.632889 22.101333-57.742223 28.416v-53.176889c30.762667-14.464 57.642667-31.971556 80.668445-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456v449.777778zM695.808 734.222222v-107.249778H501.475556v-50.417777l204.416-290.275556h44.913777v290.275556h60.501334v50.417777H750.791111v107.249778h-54.997333z m0-157.667555V374.584889l-140.245333 201.969778h140.231111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],199:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M378.339556 734.222222h-55.011556V383.744c-13.226667 12.629333-30.648889 25.272889-52.252444 37.902222-21.376 12.629333-40.632889 22.101333-57.742223 28.416v-53.176889c30.762667-14.464 57.642667-31.971556 80.668445-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456v449.777778zM519.495111 616.888889l57.742222-4.892445c4.295111 28.117333 14.165333 49.294222 29.653334 63.559112 15.687111 14.051556 34.531556 21.077333 56.533333 21.077333 26.467556 0 48.881778-9.969778 67.214222-29.937778 18.346667-19.968 27.505778-46.449778 27.505778-79.445333 0-31.374222-8.860444-56.120889-26.595556-74.24-17.507556-18.133333-40.533333-27.207111-69.048888-27.207111-17.720889 0-33.706667 4.081778-47.971556 12.231111-14.264889 7.936-25.457778 18.332444-33.607111 31.160889l-51.640889-6.727111 43.377778-230.072889h222.762666v52.551111H616.661333l-24.135111 120.391111c26.88-18.744889 55.096889-28.117333 84.636445-28.117333 39.111111 0 72.106667 13.553778 99.000889 40.647111 26.88 27.093333 40.334222 61.923556 40.334222 104.490666 0 40.533333-11.804444 75.576889-35.441778 105.102223-28.728889 36.266667-67.939556 54.4-117.632 54.4-40.746667 0-74.055111-11.406222-99.925333-34.218667-25.671111-22.812444-40.334222-53.063111-44.003556-90.752z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],200:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M378.339556 734.222222h-55.011556V383.744c-13.226667 12.629333-30.648889 25.272889-52.252444 37.902222-21.376 12.629333-40.632889 22.101333-57.742223 28.416v-53.176889c30.762667-14.464 57.642667-31.971556 80.668445-52.551111 23.011556-20.579556 39.310222-40.533333 48.881778-59.889778h35.456v449.777778zM804.892444 395.975111l-54.698666 4.266667c-4.892444-21.589333-11.804444-37.262222-20.764445-47.047111-14.876444-15.687111-33.208889-23.523556-55.011555-23.523556-17.521778 0-32.896 4.878222-46.136889 14.648889-17.322667 12.643556-30.961778 31.075556-40.96 55.324444-9.955556 24.234667-15.160889 58.766222-15.573333 103.580445 13.240889-20.167111 29.44-35.128889 48.583111-44.913778a130.659556 130.659556 0 0 1 60.202666-14.677333c36.664889 0 67.84 13.553778 93.496889 40.647111 25.870222 26.88 38.798222 61.724444 38.798222 104.490667 0 28.117333-6.115556 54.286222-18.332444 78.535111-12.017778 24.035556-28.615111 42.467556-49.806222 55.310222-21.191111 12.828444-45.226667 19.242667-72.106667 19.242667-45.838222 0-83.2-16.796444-112.142222-50.417778-28.928-33.806222-43.377778-89.429333-43.377778-166.826667 0-86.584889 15.985778-149.518222 47.957333-188.842667C592.938667 301.553778 630.528 284.444444 677.774222 284.444444c35.242667 0 64.071111 9.884444 86.471111 29.639112 22.613333 19.768889 36.167111 47.061333 40.647111 81.891555zM580.309333 589.084444c0 18.944 3.968 37.077333 11.918223 54.385778 8.149333 17.322667 19.441778 30.563556 33.905777 39.722667 14.464 8.96 29.639111 13.44 45.539556 13.44 23.210667 0 43.178667-9.358222 59.875555-28.103111 16.711111-18.744889 25.059556-44.202667 25.059556-76.387556 0-30.961778-8.248889-55.310222-24.746667-73.031111-16.497778-17.92-37.276444-26.88-62.336-26.88-24.846222 0-45.937778 8.96-63.246222 26.88-17.322667 17.720889-25.969778 41.045333-25.969778 69.973333z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],201:["d='M591.260444 953.941333A199.111111 199.111111 0 0 1 455.111111 765.041778V120.888889a120.888889 120.888889 0 0 1 241.777778 0v341.518222a130.318222 130.318222 0 0 0 51.100444 103.480889 70.641778 70.641778 0 0 1 45.425778-7.893333l170.666667 27.221333A71.111111 71.111111 0 0 1 1024 655.431111V952.888889a71.111111 71.111111 0 0 1-71.111111 71.111111H782.222222a70.940444 70.940444 0 0 1-53.475555-24.220444l-137.486223-45.838223z m17.991112-53.973333A142.222222 142.222222 0 0 1 512 765.041778V120.888889a64 64 0 1 1 128 0v341.518222A187.207111 187.207111 0 0 0 768 640v-11.776a14.222222 14.222222 0 0 1 16.455111-14.037333l170.666667 27.207111a14.222222 14.222222 0 0 1 11.989333 14.037333V952.888889a14.222222 14.222222 0 0 1-14.222222 14.222222H782.222222a14.222222 14.222222 0 0 1-14.222222-14.222222v-19.726222a14.222222 14.222222 0 0 1-18.716444 13.482666l-140.032-46.677333z'","d='M71.111111 967.111111a14.222222 14.222222 0 0 1-14.222222-14.222222V655.431111a14.222222 14.222222 0 0 1 11.989333-14.037333l170.666667-27.207111a14.222222 14.222222 0 0 1 16.455111 14.051555V640a187.591111 187.591111 0 0 0 54.784-29.070222A187.207111 187.207111 0 0 0 384 462.407111V120.888889a64 64 0 1 1 128 0v644.152889a142.222222 142.222222 0 0 1-97.251556 134.926222l-140.032 46.677333A14.222222 14.222222 0 0 1 256 933.162667V952.888889a14.222222 14.222222 0 0 1-14.222222 14.222222H71.111111z m224.142222 32.668445A70.940444 70.940444 0 0 1 241.777778 1024H71.111111a71.111111 71.111111 0 0 1-71.111111-71.111111V655.431111a71.111111 71.111111 0 0 1 59.918222-70.215111l170.666667-27.221333c16.355556-2.602667 32.142222 0.568889 45.425778 7.893333A130.318222 130.318222 0 0 0 327.111111 462.407111V120.888889a120.888889 120.888889 0 0 1 241.777778 0v644.152889a199.111111 199.111111 0 0 1-136.149333 188.899555l-137.500445 45.838223z'","d='M512 120.888889a64 64 0 1 1 128 0v341.518222A187.192889 187.192889 0 0 0 768 640v312.888889l-158.748444-52.906667A142.222222 142.222222 0 0 1 512 765.027556V120.888889z'","d='M576 192a56.888889 56.888889 0 0 0-56.888889 56.888889V483.555556a7.111111 7.111111 0 0 1-14.222222 0V248.888889a71.111111 71.111111 0 0 1 142.222222 0V483.555556a7.111111 7.111111 0 0 1-14.222222 0V248.888889a56.888889 56.888889 0 0 0-56.888889-56.888889z'","d='M512 120.888889a64 64 0 1 0-128 0v341.518222A187.192889 187.192889 0 0 1 256 640v312.888889l158.748444-52.906667A142.222222 142.222222 0 0 0 512 765.027556V120.888889z'","d='M504.888889 120.888889a71.111111 71.111111 0 0 1 142.222222 0v341.518222c0 77.511111 49.607111 146.346667 123.136 170.851556L768 640h7.111111v322.759111l-168.106667-56.035555a149.333333 149.333333 0 0 1-102.115555-141.681778V120.888889z m256 524.16c-76.657778-27.804444-128-100.721778-128-182.641778V120.888889a56.888889 56.888889 0 0 0-113.777778 0v644.152889a135.111111 135.111111 0 0 0 92.387556 128.184889L760.888889 943.018667v-297.955556z'","d='M768 952.888889V628.224a14.222222 14.222222 0 0 1 16.455111-14.037333l170.666667 27.207111a14.222222 14.222222 0 0 1 11.989333 14.037333V952.888889a14.222222 14.222222 0 0 1-14.222222 14.222222H782.222222a14.222222 14.222222 0 0 1-14.222222-14.222222z'","d='M519.111111 120.888889a71.111111 71.111111 0 0 0-142.222222 0v341.518222c0 77.511111-49.607111 146.346667-123.136 170.851556L256 640h-7.111111v322.759111l168.106667-56.035555a149.333333 149.333333 0 0 0 102.115555-141.681778V120.888889z m-256 524.16c76.657778-27.804444 128-100.721778 128-182.641778V120.888889a56.888889 56.888889 0 0 1 113.777778 0v644.152889a135.111111 135.111111 0 0 1-92.387556 128.184889L263.111111 943.018667v-297.955556z'","d='M448 192a56.888889 56.888889 0 0 1 56.888889 56.888889V483.555556a7.111111 7.111111 0 0 0 14.222222 0V248.888889a71.111111 71.111111 0 0 0-142.222222 0V483.555556a7.111111 7.111111 0 0 0 14.222222 0V248.888889a56.888889 56.888889 0 0 1 56.888889-56.888889z'","d='M256 952.888889V628.224a14.222222 14.222222 0 0 0-16.455111-14.037333l-170.666667 27.207111a14.222222 14.222222 0 0 0-11.989333 14.037333V952.888889a14.222222 14.222222 0 0 0 14.222222 14.222222h170.666667a14.222222 14.222222 0 0 0 14.222222-14.222222z'"],202:["d='M932.408759 477.838156A72.675545 72.675545 0 0 1 895.999876 521.841705a69.361768 69.361768 0 0 1-31.601774 7.580444H895.999876c21.105775 0 40.063994 9.443554 53.091548 24.419552A73.756434 73.756434 0 0 1 967.110977 602.382139c0 18.631109-6.812443 35.626662-18.019553 48.526215A70.172435 70.172435 0 0 1 895.999876 675.327906h-31.601774c11.349332 0 22.087108 2.730666 31.601774 7.580444a72.675545 72.675545 0 0 1 36.408883 44.003549c2.019555 6.755555 3.100444 13.937776 3.100444 21.361775 0 18.631109-6.826666 35.626662-18.019553 48.526215a70.172435 70.172435 0 0 1-53.091548 24.419552h-31.601773c11.349332 0 22.072886 2.730666 31.601773 7.580444a72.675545 72.675545 0 0 1 36.408884 44.017772c2.005333 6.755555 3.100444 13.923554 3.100444 21.347552 0 40.29155-31.843551 72.95999-71.111101 72.95999H478.549267a924.47276 924.47276 0 0 1-222.577747-27.207107A28.44444 28.44444 0 0 1 227.555524 967.110977H85.333321a28.44444 28.44444 0 0 1-28.44444-28.444441V398.293278a28.44444 28.44444 0 0 1 28.44444-28.44444h142.222203a28.430218 28.430218 0 0 1 28.44444 28.401773 311.068401 311.068401 0 0 0 49.607105-34.503106 253.610631 253.610631 0 0 0 37.518217-39.77955c33.763551-44.799994 53.87377-95.089765 75.548434-171.064865l9.99822-35.043551c14.250665-49.919993 68.622213-74.951101 114.446207-52.693326 36.295106 17.635553 54.926215 59.519992 44.131549 99.199986l-17.336886 168.931532c-6.869332 25.244441 11.633776 50.247104 37.191106 50.247105h257.279964c39.281772 0 71.111101 32.654218 71.111101 72.959989a74.666656 74.666656 0 0 1-3.086222 21.333331z m50.047993 28.771551a131.015093 131.015093 0 0 0 9.941332-50.133326c0-70.314657-55.950214-129.834649-127.999982-129.834649H627.768802l15.644442-152.433756C658.318131 110.364429 627.967913 43.135994 567.99281 13.994665c-78.833767-38.300439-170.439087 5.589333-194.019529 88.248876l-10.012443 35.043551c-21.048886 73.841768-38.855106 116.053317-66.275546 152.419534a198.044417 198.044417 0 0 1-31.203551 32.625774 84.963544 84.963544 0 0 0-38.926217-9.386666H85.333321a85.333321 85.333321 0 0 0-85.333321 85.333322V938.666536a85.333321 85.333321 0 0 0 85.333321 85.333322h142.222203a84.977766 84.977766 0 0 0 54.698659-19.825775A981.432753 981.432753 0 0 0 478.549267 1023.999858h354.247062c72.049768 0 127.999982-59.50577 127.999982-129.834649a131.029315 131.029315 0 0 0-9.955554-50.133326 130.92976 130.92976 0 0 0 41.557327-95.758209 131.029315 131.029315 0 0 0-9.955554-50.133327A130.92976 130.92976 0 0 0 1023.999858 602.382139a130.92976 130.92976 0 0 0-41.543106-95.772432z'","d='M418.67372 152.817757l9.99822-35.043551c14.250665-49.934215 68.622213-74.979545 114.446207-52.707548 36.295106 17.635553 54.926215 59.534214 44.131549 99.214208L569.91281 333.22662c-6.869332 25.244441 11.633776 50.247104 37.191106 50.247105h257.279964c39.281772 0 71.111101 32.66844 71.111101 72.959989 0 40.29155-31.829329 72.95999-71.111101 72.95999H895.999876c39.26755 0 71.111101 32.654218 71.111101 72.945768 0 40.29155-31.843551 72.95999-71.111101 72.95999h-31.601774c39.26755 0 71.111101 32.654218 71.111101 72.95999 0 40.277328-31.843551 72.945768-71.111101 72.945767h-31.601773c39.26755 0 71.111101 32.654218 71.111101 72.95999 0 40.277328-31.843551 72.945768-71.111101 72.945768H478.549267c-81.635544 0-162.915533-10.808887-241.720855-32.15644L56.888881 886.186544V464.54038l48.241771-11.434665c90.12621-21.361775 182.229308-55.253326 237.994634-129.223093 33.763551-44.799994 53.87377-95.089765 75.548434-171.064865z'","d='M573.226587 161.663978l-17.351109 169.031087c-8.291554 33.422218 16.241776 67.00088 51.228438 67.00088h257.279964c31.089773 0 56.888881 25.955552 56.888881 58.737769 0 32.782218-25.799108 58.73777-56.888881 58.73777v14.22222a69.361768 69.361768 0 0 0 41.44355-13.653331 73.443545 73.443545 0 0 0 29.681773-59.306659c0-40.29155-31.843551-72.95999-71.111101-72.959989H607.103916c-25.55733 0-44.060438-25.002663-37.191106-50.261327l17.351108-168.931532c10.780443-39.679994-7.850666-81.578655-44.145771-99.214208-45.823994-22.271997-100.209764 2.773333-114.446207 52.707548l-9.99822 35.043551c-21.674664 75.975101-41.784883 126.264871-75.548434 171.064865-55.751103 73.955545-147.868424 107.861318-237.994634 129.223093L56.888881 464.54038V886.186544l179.939531 48.753771A924.47276 924.47276 0 0 0 478.549267 967.110977h354.247062c39.26755 0 71.111101-32.66844 71.111101-72.95999a73.443545 73.443545 0 0 0-29.681774-59.306659 69.361768 69.361768 0 0 0-41.429327-13.653331v14.22222c31.075551 0 56.888881 25.955552 56.888881 58.73777 0 32.782218-25.81333 58.73777-56.888881 58.73777H478.549267c-80.383989 0-160.412422-10.652443-237.994634-31.672885L71.111101 875.33499V475.775934l37.290662-8.831999c90.623987-21.475553 187.121752-56.277326 246.072854-134.499537 35.370662-46.904882 56.035548-99.214208 77.880879-175.729753l9.99822-35.043551c11.903998-41.742216 56.974214-62.065769 94.549321-43.804438 29.966218 14.563554 45.681771 49.407993 36.622217 82.673766l-0.298667 1.137778z m335.985731 368.981282a69.816879 69.816879 0 0 0-13.212442-1.265778h-31.601774v14.22222H895.999876c31.075551 0 56.888881 25.955552 56.888881 58.73777 0 32.782218-25.81333 58.73777-56.888881 58.73777h-31.601774v28.44444c31.075551 0 56.888881 25.94133 56.888881 58.73777 0 32.767995-25.81333 58.723547-56.888881 58.723547h-31.601773v14.22222h31.601773c4.508444 0 8.931554-0.426667 13.212443-1.265777 32.952884-6.34311 57.884436-36.039106 57.884436-71.67999a73.457768 73.457768 0 0 0-29.667551-59.306659 69.361768 69.361768 0 0 0-41.429328-13.653331H895.999876a69.688879 69.688879 0 0 0 13.226664-1.265778c32.952884-6.357332 57.884436-36.039106 57.884437-71.694212 0-35.655106-24.931552-65.33688-57.884437-71.694212z'","d='M881.635433 529.777704a13.511109 13.511109 0 0 1-13.511109 14.293332h-85.290655c-7.807999 0-14.407109-6.399999-14.748442-14.293332a13.511109 13.511109 0 0 1 13.525331-14.293331h85.276433c7.822221 0 14.421331 6.399999 14.748442 14.293331zM746.666563 675.555462a14.22222 14.22222 0 0 1 14.22222-14.222221h99.555542a14.22222 14.22222 0 1 1 0 28.444441h-99.555542a14.22222 14.22222 0 0 1-14.22222-14.22222z m0 142.222202a14.22222 14.22222 0 0 1 14.22222-14.22222H824.888774a14.22222 14.22222 0 1 1 0 28.44444h-63.999991a14.22222 14.22222 0 0 1-14.22222-14.22222z'","d='M56.888881 938.666536a28.44444 28.44444 0 0 0 28.44444 28.444441h142.222203a28.44444 28.44444 0 0 0 28.44444-28.444441V398.222167a28.44444 28.44444 0 0 0-28.44444-28.444441H85.333321a28.44444 28.44444 0 0 0-28.44444 28.444441v540.444369z'"],203:["d='M199.020712 197.183123L351.694904 41.633315c52.111781-53.079671 140.512438-41.703452 177.47463 22.864658l67.107069 117.198904a87.573041 87.573041 0 0 1-24.477808 114.323287l-19.946959 14.518357a111.601973 111.601973 0 0 1-80.938083 20.339726 123.693589 123.693589 0 0 1-53.472438 38.912l4.79737 127.270575a411.00274 411.00274 0 0 1-16.903014 133.162082 336.643507 336.643507 0 0 1 110.437699 9.117808 400.76274 400.76274 0 0 1 311.408219-117.970411c75.733918 5.035836 139.64274 58.213699 158.369315 131.77337l28.966575 113.846356c23.299507 91.570849-33.693808 184.291945-125.923945 204.842083a1938.067288 1938.067288 0 0 1-515.478794 44.130191L177.306301 1006.465753A175.973699 175.973699 0 0 1 11.151781 809.240548l16.65052-135.743123A465.302795 465.302795 0 0 1 56.530411 560.113973l142.490301-362.93085z m334.497315 506.080439l-14.336-4.615014a280.547945 280.547945 0 0 0-183.380164 3.997808l-32.571616 12.063562a354.991342 354.991342 0 0 0 62.940931-215.530959l-6.312329-167.318795-0.364712-9.356274a2.10411 2.10411 0 0 1 2.482849-2.146191c19.694466 3.647123 39.136438-1.683288 53.865206-13.297973l0.420822-0.336658a66.994849 66.994849 0 0 0 22.331616-33.03452l3.899617-12.93326a2.567014 2.567014 0 0 1 4.152109-1.192329l2.903671 2.524931 1.45885 1.234411c11.64274 9.482521 26.24526 13.606575 40.483068 12.231891a55.464329 55.464329 0 0 0 27.353425-10.380274l19.946959-14.532384a31.463452 31.463452 0 0 0 8.795178-41.072219l-67.121096-117.198904c-18.474082-32.277041-62.674411-37.972164-88.723288-11.432329L247.064548 228.323945l-138.310137 352.298082a409.193205 409.193205 0 0 0-25.249315 99.70674l-16.664548 135.729096a119.892164 119.892164 0 0 0 113.201096 134.354411l195.794411 9.510575c168.006137 8.13589 336.376986-6.270247 500.553644-42.853698a111.433644 111.433644 0 0 0 83.743561-136.24811l-28.966575-113.846356a119.303014 119.303014 0 0 0-107.716384-89.621041 344.653151 344.653151 0 0 0-284.307287 119.345096l-5.624987 6.564822z'","d='M291.713753 706.714301l11.516494 7.995617 4.881534 13.143671 32.557589-12.063562a266.520548 266.520548 0 0 1 174.220274-3.787397l23.201315 7.462575 11.698849-13.620602a330.625753 330.625753 0 0 1 272.734685-114.491617 105.275616 105.275616 0 0 1 95.049644 79.086466l28.966575 113.846356a97.406247 97.406247 0 0 1-73.208986 119.092603 1867.874192 1867.874192 0 0 1-496.822356 42.531068l-195.794411-9.496547a105.836712 105.836712 0 0 1-99.945206-118.643727l16.650521-135.729095a395.193863 395.193863 0 0 1 24.393644-96.298083l137.272109-349.632876L401.744658 90.771288a42.082192 42.082192 0 0 1 66.56 8.556712l67.107068 117.212932c4.41863 7.715068 2.314521 17.534247-4.881534 22.766465L510.59726 253.825753a41.577205 41.577205 0 0 1-51.803178-2.300493l-2.903671-2.524931a16.594411 16.594411 0 0 0-26.806356 7.701041l-3.913644 12.93326a53.205918 53.205918 0 0 1-60.612384 36.934137 16.131507 16.131507 0 0 0-19.063232 16.468165l6.677041 176.661041a340.907836 340.907836 0 0 1-60.458083 207.016328z'","d='M303.230247 714.69589l13.157698-4.867506-1.543013-4.138083-3.619069-2.524931-7.995616 11.544548z m-11.530521-7.981589l-11.530521-7.995616-7.981589 11.544548 11.530521 7.995616 7.995616-11.544548z m16.412055 21.139288l-13.157699 4.881534 4.881534 13.157699 13.143672-4.881534-4.867507-13.157699z m32.557589-12.063562l4.881534 13.157699-4.881534-13.157699z m174.220274-3.787397l-4.292384 13.354082 4.292384-13.354082z m23.201315 7.462575l-4.306411 13.354083 8.879342 2.861589 6.059836-7.069809-10.632767-9.145863z m11.698849-13.620602l10.646795 9.131835-10.646795-9.131835z m272.734685-114.491617l0.925808-13.999342-0.925808 13.999342z m95.049644 79.086466l13.592548-3.464767-13.606575 3.464767z m28.966575 113.846356l13.606576-3.464767-13.606576 3.464767zM873.345753 903.364384l-3.043945-13.69074 3.043945 13.69074z m-496.822356 42.531068l-0.673315 14.01337 0.673315-14.027397z m-195.794411-9.496548l-0.687342 13.999343 0.687342-13.999343z m-38.53326-9.300164l5.779288-12.778959-5.779288 12.764931z m-61.411945-109.343562l13.915178 1.711343-13.915178-1.711343z m16.65052-135.729096l13.915178 1.711343-13.915178-1.711343z m24.393644-96.298082l13.04548 5.134027-13.04548-5.134027z m137.27211-349.632877l-10.015562-9.819178-2.005918 2.033973-1.038027 2.665205 13.045479 5.12zM401.744658 90.771288l10.015561 9.819178-10.015561-9.819178z m66.56 8.556712l-12.175781 6.985644 12.175781-6.971617z m67.107068 117.212932l12.161753-6.971617-12.161753 6.971617z m-4.881534 22.766465l8.262137 11.334137-8.262137-11.334137zM510.59726 253.825753l8.24811 11.348165-8.24811-11.362192z m-51.803178-2.300493l-9.230027 10.56263 9.230027-10.56263z m-2.903671-2.524931l9.230027-10.576658-9.230027 10.576658z m-26.806356 7.701041l-13.424219-4.067945 13.424219 4.067945z m-3.913644 12.93326l13.438247 4.067945-13.438247-4.067945z m-60.612384 36.934137l-2.567013 13.788932 2.567013-13.788932z m-19.063232 16.468165l-14.027398 0.533041 14.027398-0.533041z m6.677041 176.661041l14.013369-0.519014-14.027397 0.519014zM311.225863 703.193425l-11.530521-7.995617-15.991232 23.061041 11.544548 7.995617 15.977205-23.061041z m10.043616 19.806685l-4.881534-13.157699-26.30137 9.749041 4.867507 13.157699 26.315397-9.749041z m14.532384-20.339726l-32.571616 12.063561 9.749041 26.30137 32.571616-12.063562-9.749041-26.301369z m183.380164-3.997809a280.547945 280.547945 0 0 0-183.380164 3.997809l9.749041 26.301369A252.493151 252.493151 0 0 1 510.59726 725.356712l8.584767-26.708164z m23.201315 7.462576l-23.201315-7.462576-8.584767 26.708165 23.187288 7.462575 8.598794-26.708164z m-3.226301-9.412384l-11.712877 13.63463 21.279562 18.277699 11.712877-13.63463-21.293589-18.277699z m284.29326-119.345096a344.653151 344.653151 0 0 0-284.307287 119.345096l21.293589 18.277699a316.598356 316.598356 0 0 1 261.162082-109.62411l1.865644-27.998685z m107.716384 89.635069a119.303014 119.303014 0 0 0-107.716384-89.635069l-1.851616 27.998685a91.248219 91.248219 0 0 1 82.382904 68.537863l27.185096-6.915507z m28.966575 113.832328l-28.966575-113.846356-27.185096 6.915507 28.966575 113.846356 27.185096-6.915507z m-83.743561 136.24811a111.433644 111.433644 0 0 0 83.743561-136.24811l-27.185096 6.915507a83.378849 83.378849 0 0 1-62.660383 101.951124l6.101918 27.381479z m-500.553644 42.853699c168.006137 8.13589 336.376986-6.270247 500.553644-42.853699l-6.101918-27.381479a1853.860822 1853.860822 0 0 1-493.091069 42.208438l-1.360657 28.02674z m-195.808439-9.510576l195.808439 9.510576 1.360657-28.02674-195.808438-9.496548-1.360658 28.012712z m-43.639232-10.520548c13.746849 6.228164 28.559781 9.791123 43.639232 10.520548l1.360658-28.012712a91.823342 91.823342 0 0 1-33.427288-8.065753l-11.572602 25.557917z m-69.547836-123.833863a119.892164 119.892164 0 0 0 69.547836 123.833863l11.572602-25.557917A91.83737 91.83737 0 0 1 94.684932 819.480548l-27.844384-3.422685zM83.491068 680.328767l-16.65052 135.729096 27.844384 3.422685 16.65052-135.729096-27.844384-3.422685z m25.263343-99.70674a409.193205 409.193205 0 0 0-25.249315 99.70674l27.830356 3.422685a381.124384 381.124384 0 0 1 23.537973-92.875397l-26.119014-10.254028z m137.27211-349.632876L108.754411 580.622027l26.119014 10.24L272.131507 241.257205l-26.119014-10.254027zM391.743123 80.938082l-142.65863 145.351891 20.003069 19.638356 142.65863-145.323836-20.003069-19.666411z m88.723288 11.432329c-18.474082-32.277041-62.674411-37.972164-88.723288-11.432329l20.017096 19.652384a28.054795 28.054795 0 0 1 44.368658 5.723178l24.337534-13.943233z m67.107068 117.198904l-67.107068-117.198904-24.337534 13.943233 67.107068 117.198904 24.337534-13.943233z m-8.78115 41.072219a31.463452 31.463452 0 0 0 8.795178-41.072219l-24.351562 13.943233a3.408658 3.408658 0 0 1-0.953863 4.446685l16.510247 22.682301z m-19.960987 14.532384l19.960987-14.532384-16.510247-22.682301-19.946959 14.518356 16.496219 22.682301z m-69.295342-3.086028a55.604603 55.604603 0 0 0 69.295342 3.086028l-16.496219-22.696329a27.549808 27.549808 0 0 1-34.339068-1.514959l-18.446028 21.12526z m-2.889644-2.524931l2.903671 2.524931 18.446028-21.12526-2.889644-2.524931-18.460055 21.12526z m-4.152109 1.192329a2.567014 2.567014 0 0 1 4.152109-1.192329l18.460055-21.139288a30.621808 30.621808 0 0 0-49.460603 14.223781l26.848439 8.107836z m-3.899617 12.93326l3.899617-12.93326-26.848439-8.107836-3.913644 12.93326 26.862466 8.107836z m-76.617644 46.669151a67.233315 67.233315 0 0 0 76.617644-46.669151l-26.862466-8.107836a39.178521 39.178521 0 0 1-44.635178 27.199124l-5.12 27.577863z m-2.482849 2.146191a2.10411 2.10411 0 0 1 2.482849-2.146191l5.12-27.577863a30.158904 30.158904 0 0 0-35.629589 30.790137l28.02674-1.066083z m6.677041 176.675069l-6.677041-176.675069-28.02674 1.066083 6.663014 176.661041 28.040767-1.052055zM303.230247 714.69589a354.935233 354.935233 0 0 0 62.940931-215.530958l-28.040767 1.052054a326.894466 326.894466 0 0 1-57.947178 198.487672l23.047014 15.991232z'","d='M466.691507 193.942795a7.013699 7.013699 0 0 1 9.791123 1.486904l16.860932 22.892712a7.013699 7.013699 0 1 1-11.306083 8.318247l-16.832876-22.892713a7.013699 7.013699 0 0 1 1.472876-9.80515z m-14.504329 5.681095a7.013699 7.013699 0 0 1 5.947617 7.939507l-7.013699 48.82937a7.013699 7.013699 0 1 1-13.887123-1.99189l7.013698-48.82937a7.013699 7.013699 0 0 1 7.939507-5.947617zM778.422356 666.076932a238.465753 238.465753 0 0 0-187.546301 91.178082L576.806575 775.153973a14.027397 14.027397 0 1 1-22.065096-17.323836l14.041425-17.898959a266.520548 266.520548 0 0 1 209.625425-101.909041h17.646466a14.027397 14.027397 0 1 1 0 28.054795h-17.646466zM233.41589 768.252493a14.027397 14.027397 0 0 1 1.795507-19.750575l62.618302-52.181918a14.027397 14.027397 0 0 1 17.955068 21.546082l-62.604274 52.181918a14.027397 14.027397 0 0 1-19.764603-1.795507z'"],204:["d='M932.408889 546.161778c2.019556 6.755556 3.100444 13.937778 3.100444 21.361778 0 40.291556-31.843556 72.945778-71.111111 72.945777H607.104c-25.557333 0-44.060444 25.002667-37.191111 50.247111l17.351111 168.931556c10.780444 39.68-7.850667 81.564444-44.145778 99.2-45.824 22.272-100.209778-2.773333-114.446222-52.693333l-9.998222-35.043556c-21.674667-75.975111-41.784889-126.264889-75.548445-171.064889a253.610667 253.610667 0 0 0-37.518222-39.779555A311.068444 311.068444 0 0 0 256 625.763556a28.430222 28.430222 0 0 1-28.444444 28.401777H85.333333a28.444444 28.444444 0 0 1-28.444444-28.444444V85.333333a28.444444 28.444444 0 0 1 28.444444-28.444444h142.222223a28.444444 28.444444 0 0 1 28.416 27.207111A924.615111 924.615111 0 0 1 478.549333 56.888889h354.247111c39.267556 0 71.111111 32.654222 71.111112 72.945778 0 7.424-1.095111 14.592-3.100445 21.347555a72.675556 72.675556 0 0 1-36.408889 44.017778 69.361778 69.361778 0 0 1-31.601778 7.580444h31.601778c21.105778 0 40.064 9.429333 53.091556 24.419556a73.756444 73.756444 0 0 1 18.019555 48.526222 74.666667 74.666667 0 0 1-3.100444 21.361778A72.675556 72.675556 0 0 1 896 341.091556a69.376 69.376 0 0 1-31.601778 7.580444H896c21.105778 0 40.064 9.443556 53.091556 24.419556A73.756444 73.756444 0 0 1 967.111111 421.617778c0 18.631111-6.812444 35.640889-18.019555 48.540444A70.172444 70.172444 0 0 1 896 494.577778h-31.601778c11.349333 0 22.087111 2.730667 31.601778 7.580444a72.675556 72.675556 0 0 1 36.408889 44.003556z m50.048-28.771556a131.015111 131.015111 0 0 1 9.941333 50.133334c0 70.314667-55.950222 129.834667-128 129.834666H627.768889l15.644444 152.433778c14.890667 63.829333-15.459556 131.072-75.434666 160.213333-78.833778 38.300444-170.439111-5.589333-194.019556-88.248889l-10.012444-35.043555c-21.048889-73.827556-38.855111-116.053333-66.275556-152.419556a198.044444 198.044444 0 0 0-31.203555-32.625777c-11.662222 6.001778-24.888889 9.386667-38.926223 9.386666H85.333333a85.333333 85.333333 0 0 1-85.333333-85.333333V85.333333A85.333333 85.333333 0 0 1 85.333333 0h142.222223c20.821333 0 39.893333 7.452444 54.698666 19.825778A981.404444 981.404444 0 0 1 478.549333 0h354.247111c72.049778 0 128 59.505778 128 129.834667a131.029333 131.029333 0 0 1-9.955555 50.133333 130.929778 130.929778 0 0 1 41.557333 95.758222 131.029333 131.029333 0 0 1-9.955555 50.133334A130.929778 130.929778 0 0 1 1024 421.617778a130.929778 130.929778 0 0 1-41.543111 95.772444z'","d='M580.394667 861.582222l-0.156445-0.554666-0.056889-0.568889-17.28-168.391111c-7.594667-29.354667 13.923556-58.652444 44.202667-58.652445h257.28c35.185778 0 64-29.297778 64-65.848889 0-36.536889-28.814222-65.848889-64-65.848889v-14.222222H896c35.171556 0 64-29.297778 64-65.834667 0-36.536889-28.828444-65.848889-64-65.848888h-31.601778v-14.222223c35.171556 0 64-29.297778 64-65.848889 0-36.522667-28.828444-65.834667-64-65.834666h-31.601778v-14.222222c35.171556 0 64-29.297778 64-65.848889 0-36.522667-28.828444-65.834667-64-65.834667H478.549333a917.333333 917.333333 0 0 0-239.857777 31.914667L64 143.246222v410.595556l42.766222 10.140444c90.368 21.404444 184.675556 55.751111 242.033778 131.84 34.56 45.866667 54.954667 97.166222 76.714667 173.411556l9.998222 35.043555c13.084444 45.838222 62.805333 68.522667 104.504889 48.256 33.137778-16.099556 50.289778-54.471111 40.376889-90.936889z'","d='M832.796444 202.808889v-14.222222c31.075556 0 56.888889-25.955556 56.888889-58.737778 0-32.782222-25.813333-58.737778-56.888889-58.737778H478.549333a910.222222 910.222222 0 0 0-237.994666 31.672889L71.111111 148.679111v399.544889l37.290667 8.832c90.624 21.475556 187.121778 56.291556 246.072889 134.499556 35.370667 46.904889 56.035556 99.214222 77.880889 175.729777l9.998222 35.043556c11.904 41.742222 56.974222 62.065778 94.549333 43.804444 29.966222-14.563556 45.681778-49.408 36.622222-82.673777l-0.298666-1.137778-17.351111-169.016889c-8.291556-33.422222 16.241778-67.000889 51.228444-67.000889h257.28c31.089778 0 56.888889-25.955556 56.888889-58.737778 0-32.782222-25.799111-58.737778-56.888889-58.737778v-14.222222c39.281778 0 71.111111 32.668444 71.111111 72.96 0 40.291556-31.829333 72.96-71.111111 72.96h-257.28c-25.557333 0-44.060444 25.002667-37.191111 50.261334l17.351111 168.931555c10.780444 39.68-7.850667 81.578667-44.145778 99.214222-45.824 22.272-100.209778-2.773333-114.446222-52.707555l-9.998222-35.043556c-21.674667-75.975111-41.784889-126.264889-75.548445-171.064889-55.751111-73.955556-147.868444-107.861333-237.994666-129.223111L56.888889 559.459556V137.813333L236.828444 89.031111A924.444444 924.444444 0 0 1 478.549333 56.888889h354.247111c39.267556 0 71.111111 32.668444 71.111112 72.96 0 40.291556-31.843556 72.96-71.111112 72.96z m31.601778 145.891555v14.222223H896c31.075556 0 56.888889 25.955556 56.888889 58.737777 0 32.782222-25.813333 58.737778-56.888889 58.737778h-31.601778v14.222222H896c39.267556 0 71.111111-32.668444 71.111111-72.96 0-40.291556-31.843556-72.96-71.111111-72.96h-31.601778z m0 0v-14.222222c31.075556 0 56.888889-25.941333 56.888889-58.737778 0-32.768-25.813333-58.723556-56.888889-58.723555h-31.601778v-14.222222h31.601778c39.267556 0 71.111111 32.668444 71.111111 72.96 0 40.291556-31.843556 72.96-71.111111 72.96z'","d='M881.635556 494.222222a13.511111 13.511111 0 0 0-13.511112-14.293333h-85.290666c-7.808 0-14.407111 6.4-14.748445 14.293333a13.511111 13.511111 0 0 0 13.525334 14.293334h85.276444c7.822222 0 14.421333-6.4 14.748445-14.293334zM746.666667 348.444444a14.222222 14.222222 0 0 0 14.222222 14.222223h99.555555a14.222222 14.222222 0 1 0 0-28.444445h-99.555555a14.222222 14.222222 0 0 0-14.222222 14.222222z m0-142.222222a14.222222 14.222222 0 0 0 14.222222 14.222222H824.888889a14.222222 14.222222 0 1 0 0-28.444444h-64a14.222222 14.222222 0 0 0-14.222222 14.222222z'","d='M56.888889 56.888889m28.444444 0l142.222223 0q28.444444 0 28.444444 28.444444l0 540.444445q0 28.444444-28.444444 28.444444l-142.222223 0q-28.444444 0-28.444444-28.444444l0-540.444445q0-28.444444 28.444444-28.444444Z'"],205:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M682.666667 583.111111a99.555556 99.555556 0 0 0-99.555556-99.555555H384a28.444444 28.444444 0 0 1-28.444444-28.444445v-113.777778a28.444444 28.444444 0 0 1 28.444444-28.444444h199.111111c149.233778 0 270.222222 120.988444 270.222222 270.222222s-120.988444 270.222222-270.222222 270.222222H437.219556a28.444444 28.444444 0 0 1-28.444445-28.444444v-113.777778a28.444444 28.444444 0 0 1 28.444445-28.444444H583.111111a99.555556 99.555556 0 0 0 99.555556-99.555556z'","d='M189.795556 373.248a14.222222 14.222222 0 0 0 0 21.504l262.727111 227.512889a14.222222 14.222222 0 0 0 23.523555-10.752V156.472889a14.222222 14.222222 0 0 0-23.523555-10.752L189.795556 373.248z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],206:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M326.314667 544.910222a10.481778 10.481778 0 0 0 15.815111 0l167.296-192.497778a10.410667 10.410667 0 0 0-7.907556-17.237333H166.926222a10.410667 10.410667 0 0 0-7.907555 17.237333l167.296 192.497778z'","d='M630.343111 372.935111c-53.191111-88.291556-181.191111-88.291556-234.382222 0l-27.790222 46.122667a28.444444 28.444444 0 0 1-39.04 9.671111l-59.448889-35.797333a28.444444 28.444444 0 0 1-9.685334-39.04l27.776-46.122667c102.286222-169.784889 348.472889-169.784889 450.744889 0l27.790223 46.108444a28.444444 28.444444 0 0 1-9.685334 39.054223l-59.448889 35.811555a28.444444 28.444444 0 0 1-39.04-9.685333l-27.790222-46.122667z'","d='M697.685333 480.995556a10.481778 10.481778 0 0 0-15.815111 0L514.574222 673.479111a10.410667 10.410667 0 0 0 7.907556 17.251556h334.592c8.96 0 13.767111-10.496 7.907555-17.251556L697.685333 480.995556z'","d='M400.412444 644.906667c53.191111 88.291556 181.191111 88.291556 234.382223 0l27.776-46.122667a28.444444 28.444444 0 0 1 39.054222-9.685333l59.448889 35.811555a28.444444 28.444444 0 0 1 9.671111 39.04l-27.776 46.122667c-102.286222 169.784889-348.458667 169.784889-450.744889 0l-27.776-46.122667a28.444444 28.444444 0 0 1 9.671111-39.04l59.463111-35.811555a28.444444 28.444444 0 0 1 39.04 9.685333l27.790222 46.122667z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],207:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M499.242667 239.175111a14.222222 14.222222 0 0 1 25.514666 0l71.708445 145.308445a14.222222 14.222222 0 0 0 10.709333 7.779555l160.355556 23.296a14.222222 14.222222 0 0 1 7.879111 24.263111l-116.024889 113.109334a14.222222 14.222222 0 0 0-4.096 12.586666l27.392 159.715556a14.222222 14.222222 0 0 1-20.636445 14.976l-143.431111-75.392a14.222222 14.222222 0 0 0-13.226666 0L361.955556 740.209778a14.222222 14.222222 0 0 1-20.636445-14.990222l27.392-159.715556a14.222222 14.222222 0 0 0-4.096-12.572444l-116.024889-113.109334a14.222222 14.222222 0 0 1 7.879111-24.263111l160.355556-23.296a14.222222 14.222222 0 0 0 10.709333-7.779555l71.708445-145.308445z'"],208:["d='M967.111111 512c0 251.349333-203.761778 455.111111-455.111111 455.111111C260.650667 967.111111 56.888889 763.349333 56.888889 512 56.888889 260.650667 260.650667 56.888889 512 56.888889c251.349333 0 455.111111 203.761778 455.111111 455.111111z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'","d='M307.996444 270.222222a37.774222 37.774222 0 0 1 22.698667 67.996445l-0.028444 392.888889a22.670222 22.670222 0 1 1-45.340445 0V338.218667A37.788444 37.788444 0 0 1 308.010667 270.222222z m160.64 15.118222c43.761778 0 72.817778 4.949333 99.584 20.764445 26.823111 15.786667 42.211556 23.566222 85.944889 23.566222 43.818667 0 72.718222-4.451556 99.612445-20.337778v251.349334c-26.894222 15.872-54.912 26.88-98.730667 26.88-43.804444 0-60.017778-4.778667-86.826667-20.764445-26.780444-15.815111-55.822222-20.736-99.584-20.736s-80.910222 15.502222-107.747555 31.431111V316.828444c26.837333-15.957333 63.985778-31.502222 107.747555-31.502222z'"],209:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M777.429333 732.401778a42.666667 42.666667 0 0 0 11.861334-59.164445L623.914667 424.988444a71.111111 71.111111 0 0 0-100.892445-18.161777l-118.144 85.560889-95.388444-224.625778a42.666667 42.666667 0 1 0-78.535111 33.365333l102.357333 241.038222c17.848889 42.055111 70.158222 56.604444 107.164444 29.809778l120.618667-87.352889 157.169778 235.918222a42.666667 42.666667 0 0 0 59.164444 11.861334z'","d='M570.88 675.2a42.666667 42.666667 0 0 0 27.804444 53.560889l135.594667 42.894222a71.111111 71.111111 0 0 0 89.258667-46.350222l42.894222-135.594667a42.666667 42.666667 0 1 0-81.351111-25.742222l-38.613333 122.026667-122.040889-38.599111a42.666667 42.666667 0 0 0-53.546667 27.804444z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"],210:["d='M512 512m-455.111111 0a455.111111 455.111111 0 1 0 910.222222 0 455.111111 455.111111 0 1 0-910.222222 0Z'","d='M777.429333 291.598222a42.666667 42.666667 0 0 1 11.861334 59.164445L623.914667 598.997333a71.111111 71.111111 0 0 1-100.892445 18.176l-118.144-85.560889-95.388444 224.625778a42.666667 42.666667 0 0 1-78.535111-33.365333l102.357333-241.038222c17.848889-42.055111 70.158222-56.604444 107.164444-29.809778l120.618667 87.352889 157.169778-235.918222a42.666667 42.666667 0 0 1 59.164444-11.861334z'","d='M570.88 348.8a42.666667 42.666667 0 0 1 27.804444-53.560889l135.594667-42.894222a71.111111 71.111111 0 0 1 89.258667 46.350222l42.894222 135.594667a42.666667 42.666667 0 1 1-81.351111 25.742222l-38.613333-122.026667-122.040889 38.599111a42.666667 42.666667 0 0 1-53.546667-27.804444z'","d='M1024 512c0 282.766222-229.233778 512-512 512S0 794.766222 0 512 229.233778 0 512 0s512 229.233778 512 512zM512 967.111111c251.349333 0 455.111111-203.761778 455.111111-455.111111C967.111111 260.650667 763.349333 56.888889 512 56.888889 260.650667 56.888889 56.888889 260.650667 56.888889 512c0 251.349333 203.761778 455.111111 455.111111 455.111111z'"]},c=exports.MindSvgColor={101:["#F85767","#FFFFFF","#FFFFFF"],102:["#FF863C","#FFFFFF","#FFFFFF"],103:["#FFB60A","#FFFFFF","#FFFFFF"],104:["#28BF5A","#FFFFFF","#FFFFFF"],105:["#21B1DF","#FFFFFF","#FFFFFF"],106:["#1E90F4","#FFFFFF","#FFFFFF"],107:["#135CEA","#FFFFFF","#FFFFFF"],108:["#7F68DA","#FFFFFF","#FFFFFF"],109:["#6D7E9E","#FFFFFF","#FFFFFF"],110:["#F85767","#FFFFFF","#FFFFFF"],111:["#FF863B","#FFFFFF","#FFFFFF"],112:["#FFB60A","#FFFFFF","#FFFFFF"],113:["#F5D00E","#FFFFFF","#FFFFFF"],114:["#A4D933","#FFFFFF","#FFFFFF"],115:["#60CE09","#FFFFFF","#FFFFFF"],116:["#0FCF4E","#FFFFFF","#FFFFFF"],117:["#00D394","#FFFFFF","#FFFFFF"],118:["#FAC900","#FFFFFF","#FEDA46","#AE660F","#FFFFFF","#AE660F","#FFFFFF","#AE660F","#AE660F"],119:["#FFFFFF","#FAC900","#FEDA46","#AE660F","#FFFFFF","#AE660F","#FFFFFF","#AE660F","#AE660F"],120:["#FFFFFF","#FAC900","#FEDA46","#AE660F","#AE660F","#FF7991","#FFFFFF","#AE660F","#94D7F9","#73C8F3","#94D7F9","#73C8F3"],121:["#FFFFFF","#FAC900","#FEDA46","#FF6636","#AE660F","#FF7991","#FFFFFF"],122:["#FAC900","#FEDA46","#FFFFFF","#AE660F","#FFFFFF","#AE660F"],123:["#EF450F","#FF6636","#FFFFFF","#681908","#FFFFFF","#681908","#FFFFFF","#681908","#681908"],124:["#FFFFFF","#FAC900","#FEDA46","#AE660F"],125:["#FFFFFF","#FAC900","#FEDA46","#AE660F","#FAC900","#FFFFFF","#FAC900","#FAC900","#FFFFFF","#AE660F"],126:["#FAC900","#FEDA46","#FFFFFF","#AE660F","#FFFFFF","#AE660F","#FFFFFF","#AE660F","#AE660F"],127:["#FFFFFF","#FAC900","#FEDA46","#AE660F"],128:["#FFD113","#FFFFFF","#FFD113","#FFFFFF","#FEDA46","#FFFFFF","#FFD113","#FAC900","#FFD113","#FAC900","#FAC900","#FEDA46","#FFFCF0","#AE660F","#FFFFFF","#AE660F","#FFFFFF","#AE660F"],129:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF"],130:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF"],131:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF"],132:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF"],133:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF"],134:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF"],135:["#F85767","#FFFFFF","#FFFFFF"],136:["#FF863B","#FFFFFF","#FFFFFF"],137:["#28BF5A","#FFFFFF","#FFFFFF"],138:["#1E90F4","#FFFFFF","#FFFFFF"],139:["#995AFF","#FFFFFF","#FFFFFF"],140:["#DC51BD","#FFFFFF","#FFFFFF"],141:["#6D7E9E","#FFFFFF","#FFFFFF"],142:["#F85767","#FFFFFF","#FFFFFF"],143:["#FF863B","#FFFFFF","#FFFFFF"],144:["#28BF5A","#FFFFFF","#FFFFFF"],145:["#1E90F4","#FFFFFF","#FFFFFF"],146:["#995AFF","#FFFFFF","#FFFFFF"],147:["#DC51BD","#FFFFFF","#FFFFFF"],148:["#6D7E9E","#FFFFFF","#FFFFFF"],149:["#067BEF","#FFFFFF","#FFFFFF"],150:["#067BEF","#FFFFFF","#FFFFFF"],151:["#067BEF","#FFFFFF","#FFFFFF"],152:["#067BEF","#FFFFFF","#FFFFFF"],153:["#067BEF","#FFFFFF","#FFFFFF"],154:["#067BEF","#FFFFFF","#FFFFFF"],155:["#067BEF","#FFFFFF","#FFFFFF"],156:["#067BEF","#FFFFFF","#FFFFFF"],157:["#067BEF","#FFFFFF","#FFFFFF"],158:["#067BEF","#FFFFFF","#FFFFFF"],159:["#067BEF","#FFFFFF","#FFFFFF"],160:["#067BEF","#FFFFFF","#FFFFFF"],161:["#6D7E9E","#FFFFFF","#FFFFFF"],162:["#6D7E9E","#FFFFFF","#FFFFFF"],163:["#6D7E9E","#FFFFFF","#FFFFFF"],164:["#6D7E9E","#FFFFFF","#FFFFFF"],165:["#6D7E9E","#FFFFFF","#FFFFFF"],166:["#6D7E9E","#FFFFFF","#FFFFFF"],167:["#6D7E9E","#FFFFFF","#FFFFFF"],168:["#28BF5A","#FFFFFF","#FFFFFF"],169:["#F85767","#FFFFFF","#FFFFFF","#FFFFFF"],170:["#995AFF","#FFFFFF","#FFFFFF","#995AFF","#FFFFFF","#995AFF"],171:["#1E90F4","#FFFFFF","#FFFFFF"],172:["#F85767","#FFFFFF","#FFFFFF","#F85767","#F85767"],173:["#125CEA","#FFFFFF","#FFFFFF","#FFFFFF"],174:["#7F68DA","#FFFFFF","#FFFFFF"],175:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF","#FF863B"],176:["#DC51BD","#FFFFFF","#FFFFFF"],177:["#1E90F4","#FFFFFF","#FFFFFF","#FFFFFF","#1E90F4","#FFFFFF","#FFFFFF","#FFFFFF"],178:["#7F68DA","#FFFFFF","#FFFFFF","#FFFFFF","#7F68DA","#7F68DA"],179:["#28BF5A","#FFFFFF","#FFFFFF","#FFFFFF","#28BF5A","#28BF5A"],180:["#995AFF","#FFFFFF","#FFFFFF","#995AFF"],181:["#1E90F4","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],182:["#FF863B","#FFFFFF","#FFFFFF"],183:["#5D8DE7","#FFFFFF","#FFFFFF","#FFFFFF"],184:["#125CEA","#FFFFFF","#FFFFFF","#125CEA","#FFFFFF","#125CEA"],185:["#DC51BD","#FFFFFF","#FFFFFF","#DC51BD","#FFFFFF","#DC51BD","#DC51BD"],186:["#28BF5A","#FFFFFF","#FFFFFF"],187:["#1E90F4","#FFFFFF","#FFFFFF"],188:["#7F68DA","#FFFFFF","#FFFFFF","#FFFFFF","#7F68DA"],189:["#F85767","#FFFFFF","#FFFFFF"],190:["#125CEA","#FFFFFF","#FFFFFF"],191:["#FF863B","#FFFFFF","#FFFFFF"],192:["#5D8DE7","#FFFFFF","#FFFFFF"],193:["#7F68DA","#FFFFFF","#FFFFFF","#FFFFFF"],194:["#6D7E9E","#FFFFFF","#FFFFFF"],195:["#6D7E9E","#FFFFFF","#FFFFFF"],196:["#6D7E9E","#FFFFFF","#FFFFFF"],197:["#6D7E9E","#FFFFFF","#FFFFFF"],198:["#6D7E9E","#FFFFFF","#FFFFFF"],199:["#6D7E9E","#FFFFFF","#FFFFFF"],200:["#6D7E9E","#FFFFFF","#FFFFFF"],201:["#FFFFFF","#FFFFFF","#FFD8C2","#FFC6A6","#FFD8C2","#FFC6A6","#AE660F","#FFC6A6","#FFC6A6","#AE660F"],202:["#FFFFFF","#FFD8C2","#FFC6A6","#DE7041","#AE660F"],203:["#FFFFFF","#FFD8C2","#FFC6A6","#FF9E74"],204:["#FFFFFF","#FFD8C2","#FFC6A6","#DE7041","#AE660F"],205:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF"],206:["#FF863B","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"],207:["#FFB60A","#FFFFFF","#FFFFFF"],208:["#FFB60A","#FFFFFF","#FFFFFF"],209:["#28BF5A","#FFFFFF","#FFFFFF","#FFFFFF"],210:["#F85767","#FFFFFF","#FFFFFF","#FFFFFF"]};
},{}],"FWYK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./mindtosvg.icons");function e(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(){i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,s=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",h=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),a=new H(n||[]);return s(o,"_invoke",{value:_(t,r,a)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var p="suspendedStart",g="suspendedYield",m="executing",v="completed",x={};function y(){}function b(){}function w(){}var k={};c(k,l,function(){return this});var A=Object.getPrototypeOf,$=A&&A(A(T([])));$&&$!==r&&n.call($,l)&&(k=$);var S=w.prototype=y.prototype=Object.create(k);function z(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function I(t,e){function r(i,s,a,l){var h=u(t[i],t,s);if("throw"!==h.type){var d=h.arg,c=d.value;return c&&"object"==o(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,l)},function(t){r("throw",t,a,l)}):e.resolve(c).then(function(t){d.value=t,a(d)},function(t){return r("throw",t,a,l)})}l(h.arg)}var i;s(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,i){r(t,n,e,i)})}return i=i?i.then(o,o):o()}})}function _(e,r,n){var i=p;return function(o,s){if(i===m)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw s;return{value:t,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var l=N(a,n);if(l){if(l===x)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var h=u(e,r,n);if("normal"===h.type){if(i=n.done?v:g,h.arg===x)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=v,n.method="throw",n.arg=h.arg)}}}function N(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),x;var o=u(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,x;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,x):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,x)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function H(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}throw new TypeError(o(e)+" is not iterable")}return b.prototype=w,s(S,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c(t,d,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},z(I.prototype),c(I.prototype,h,function(){return this}),e.AsyncIterator=I,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var s=new I(f(t,r,n,i),o);return e.isGeneratorFunction(r)?s:s.next().then(function(t){return t.done?t.value:s.next()})},z(S),c(S,d,"Generator"),c(S,l,function(){return this}),c(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,H.prototype={constructor:H,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),h=n.call(s,"finallyLoc");if(l&&h){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,x):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),x},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),x}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),x}},e}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,r,n,i,o,s){try{var a=t[o](s),l=a.value}catch(h){return void r(h)}a.done?e(l):Promise.resolve(l).then(n,i)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,l,"next",t)}function l(t){s(o,n,i,a,l,"throw",t)}a(void 0)})}}var l={init:function(){var t=a(i().mark(function t(e,r){var n,s,a,l,h,d,c,f,u,p,g,m,v,x,y,b;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r||(r={}),r.ids=r.ids||[],this.type=r.type,this.eqObj=r.eqObj,this.ids=r.ids,r.watermark&&"object"==o(r.watermark)?this.watermark=r.watermark:this.watermark={},n=r.isView,r.isVip,s=r.imgBgW,a=r.imgBgH,l=this.type=r.type||"svg",h=this,this.zoom=mind.operation.zoomVal/100,this.svgNS="http://www.w3.org/2000/svg",this.isView=n,this.imgBgW=s,this.imgBgH=a,this.partId=r.ids&&r.ids.length?r.ids[0]:null,h.dom=e,d=$(e),c=e.substring(1,e.length),0==d.length&&(d=$("<div id="+c+" style='position:fixed;z-index:-1; top: 0'></div>>").appendTo("body")),$(this.dom).html(""),(f=document.createElementNS(this.svgNS,"svg")).setAttribute("xmlns",this.svgNS),f.setAttribute("xlink","http://www.w3.org/1999/xlink"),f.setAttribute("id","mind-svg-view-con"),f.setAttribute("version","1.1"),d[0].appendChild(f),this.container=document.getElementById("mind-svg-view-con"),this.$container=$("#mind-svg-view-con"),this.defs=document.createElementNS(this.svgNS,"defs"),this.container.appendChild(this.defs),this.partId?this.partIdSearch():this.partIdArr=null,this.computeSize(),u=$("#mind_con"),p=$("#root"),g=mind.style.getThemeStyle.call(mind,null),mind.opts.themeDef&&null!=mind.opts.themeDef&&null!=mind.opts.themeDef.background?this.svgBg=mind.opts.themeDef.background:this.svgBg=g.background,mind.model&&mind.model.topic&&mind.model.topic.background&&(this.svgBg=mind.model.topic.background),"#null"==this.svgBg&&(this.svgBg="transparent"),m=l,"transparent"==this.svgBg&&"jpg"==m&&(v=$("#mind_con .mind-designer").css("background-color"),x=$("body").css("background-color"),this.svgBg="rgba(0, 0, 0, 0)"!=v?v:x),this.setConPos(),t.next=41,this.drawSvgBg();case 41:return this.setSvgStyle(),(y=$(".katex-box")).length>0&&(this.render.katexImg=y.attr("img-src"),this.render.katexW=y.width(),this.render.katexH=y.height()),b=u.find(".topic-box:not(#root)"),this.render.init(b),this.drawLine(),this.render.init(p),this.render.init(b,"free"),this.drawConnectLabel(),this.partId&&"object"==o(this.partId)||this.drawBoundaryMark(),h.watermark.download&&h.setWatermark(h.watermark.download),h.watermark.normal&&h.drawBrand(h.watermark.normal),t.abrupt("return",{w:h.svgW,h:h.svgH,bg:h.svgBg,content:$(e).html().replace(/&nbsp;/g," ")});case 54:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),setConPos:function(){var t=this.$container,e=this.svgW,r=this.svgH;this.isView?t.css({position:"absolute",width:e,height:r,transformOrigin:"0px 0px"}):t.css({position:"absolute",left:0,top:0,width:e,height:r,background:this.svgBg,zIndex:999}),t.attr("width",e+"px"),t.attr("height",r+"px")},setSvgStyle:function(){},drawSvgBg:function(){var t=a(i().mark(function t(){var e,r,n,o,s,a,l,h,d,c,f,u,p,g,m,v,x;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,r=this.container,n=this.svgNS,(o=document.createElementNS(n,"g")).setAttribute("id","svgbackgroundid"),s=document.createElementNS(this.svgNS,"defs"),o.appendChild(s),a=document.createElementNS(n,"rect"),o.appendChild(a),a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("width",this.svgW),a.setAttribute("height",this.svgH),!(this.svgBg.indexOf("url(")>-1)){t.next=31;break}if(x=function(t){return new Promise(function(e){t=t.replace("url(","").replace(")","").replace("http:","https:").replace("obqv3yxb1.bkt.clouddn.com","cdn3.processon.com");var r=document.createElement("img");r.onload=function(){var n=this.width,i=this.height;r.remove(),e({w:n,h:i,url:t})},r.onerror=function(){r.remove(),a.setAttribute("fill","#ffffff")},r.src=t})},7!=(l=this.svgBg.split(" ")).length){t.next=24;break}return m=function(){var t,r,i,o,l,g;switch(p){case"repeat":t=f+"px",r=u+"px",i=(d-e.minX_)%f+"px",o=(c-e.minY_)%u+"px",l="0px",g="0px";break;case"no-repeat":t=e.svgW+"px",r=e.svgH+"px",i="0px",o="0px",l=d-e.minX_+"px",g=c-e.minY_+"px";break;case"repeat-x":t=f+"px",r=e.svgH+"px",i=(d-e.minX_)%f+"px",o="0px",l="0px",g=c-e.minY_+"px";break;case"repeat-y":t=e.svgW+"px",r=u+"px",i="0px",o=(c-e.minY_)%u+"px",l=d-e.minX_+"px",g="0px"}var m=document.createElementNS(n,"pattern");m.setAttribute("id","svgBgId"),m.setAttribute("width",t),m.setAttribute("height",r),m.setAttribute("x",i),m.setAttribute("y",o),m.setAttribute("patternUnits","userSpaceOnUse"),m.innerHTML='<image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+h+'" width="'+f+'px" height="'+u+'px" x="'+l+'" y="'+g+'"/>',s.appendChild(m),a.setAttribute("fill","url(#svgBgId)")},h=l[0],d=parseInt(l[1]),c=parseInt(l[2]),f=parseInt(l[4]),u=parseInt(l[5]),p=l[6],t.next=19,x(h);case 19:g=t.sent,h=g.url,m(g),t.next=29;break;case 24:return v=function(t){var e=t.imgBgW,r=t.imgBgH,i=document.createElementNS(n,"pattern");i.setAttribute("id","svgBgId"),i.setAttribute("width",e),i.setAttribute("height",r),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("patternUnits","userSpaceOnUse"),i.innerHTML='<image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href='+t.url+' width="'+e+'" height="'+r+'" x="0" y="0"/>',s.appendChild(i),a.setAttribute("fill","url(#svgBgId)")},t.next=27,x(this.svgBg);case 27:g=t.sent,v(g);case 29:t.next=32;break;case 31:a.setAttribute("fill",this.svgBg);case 32:r.appendChild(o);case 33:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),drawBrand:function(t){null==t&&(t="试用水印");var e=$("#normal_brand tspan");if(e.length){e.text(t);var r=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:this.svgW,h:this.svgH,x:this.minX,y:this.minY,content:r}}var n=this.svgW,i=this.svgH,o=this.container,s=this.svgNS,a=this.getBrandColor(this.svgBg),l=0,h=0,d=0;n<700?(l=26,16,h=(n-130)/2,d=(i+48)/2):n<1200?(l=48,28,h=(n-250)/2,d=(i+76)/2,"3px"):(l=72,36,h=(n-370)/2,d=(i+110)/2,"4px");var c=document.createElementNS(s,"g");c.setAttribute("transform","translate("+h+", "+d+")"),c.innerHTML="<text id='normal_brand' style='transform:rotate(-30deg);opacity: 0.06; color:"+a+"; font-family: Microsoft Yahei;'><tspan font-size="+l+" dy=0 x=0>"+t+"</tspan></text>",o.appendChild(c);r=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:this.svgW,h:this.svgH,x:this.minX,y:this.minY,content:r}},setWatermark:function(t){var e=this.getWatermarkColor(),r="http://www.w3.org/2000/svg",n=$("#mind-svg-view-con"),i=[];"string"==typeof t&&(i=[t]),"object"==o(t)&&(i=t);for(var s=0;s<10;s++){var a=$("#pattern_mark_"+s);if(s>i.length-1){if(a.length){a.find("text").html("");continue}break}if(a.length)a.find("text").html(i[s]);else{var l=document.createElementNS(r,"g"),h=document.createElementNS(this.svgNS,"defs");l.appendChild(h);var d=document.createElementNS(r,"pattern");d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"id","pattern_mark_"+s),d.setAttributeNS(null,"width","300"),d.setAttributeNS(null,"height","300"),h.appendChild(d);var c=document.createElementNS(r,"text");c.style.dominantBaseline="middle",c.style.textAnchor="middle",c.setAttributeNS(null,"x","150"),c.setAttributeNS(null,"y",100*s+100),c.setAttributeNS(null,"fill",e),c.setAttributeNS(null,"font-size","18"),c.setAttributeNS(null,"transform","rotate(-45, 150, 150)"),c.textContent=$("<span/>").html(i[s]).text(),d.appendChild(c);var f=document.createElementNS(r,"rect");f.setAttributeNS(null,"fill","url(#pattern_mark_"+s+")"),f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y","0"),f.setAttributeNS(null,"width",this.svgW),f.setAttributeNS(null,"height",this.svgH),f.setAttributeNS(null,"id","rect_mark_"+s),f.setAttributeNS(null,"pointer-events","none"),l.appendChild(f),n.find("#svgbackgroundid").length?n.find("#svgbackgroundid").after(l):n.prepend(l)}}var u=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:this.svgW,h:this.svgH,x:this.minX,y:this.minY,content:u}},setPageColor:function(t){-1!=t.indexOf("url(")?$("#svgbackgroundid rect").attr("fill","url(#svgBgId)"):$("#svgbackgroundid rect").attr("fill",t);var e=$(this.dom).html().replace(/&nbsp;/g," ").replace(/NS[0-9]+:href/g,"xlink:href");return{w:this.svgW,h:this.svgH,x:this.minX,y:this.minY,content:e}},computeSize:function(){var t=this,e=null,r=null,n=null,i=null,o=0,s=0;$(".topic-container, .connection-svg, .mind-connection-con, .mind-designer>.boundary-mark-input").each(function(){if("connection-svg"==$(this).attr("class")&&-1!=$(this).html().indexOf("NaN"))return!0;if(t.partIdArr){if($(this).hasClass("topic-container")){var a=$(this).children(".topic-box").attr("id");if(-1==t.partIdArr.indexOf(a))return!0}if("connection-svg"==$(this).attr("class")){a=$(this).attr("id");if(!t.connectInPart(a))return!0}if($(this).hasClass("mind-connection-con")){a=$(this).attr("conn");if(!t.connectInPart("line_"+a))return!0}if($(this).hasClass("boundary-mark-input")){a=$(this).attr("id").split("mark_")[1];if(-1==t.partIdArr.indexOf(a))return!0}}var h=$(this),d=h.offset(),c=d.left/t.zoom+(0==h.outerWidth()?h[0].getBBox().width:h.outerWidth()),f=d.top/t.zoom+(0==h.outerHeight()?h[0].getBBox().height:h.outerHeight());$(".svg-connection-con");(null==e||d.left/l.zoom<e)&&(e=d.left/t.zoom,o=h.position().left),(null==r||d.top/l.zoom<r)&&(r=d.top/t.zoom,s=h.position().top),(null==n||c>n)&&(n=c),(null==i||f>i)&&(i=f)}),null==e&&(e=0,r=0,n=0,i=0),e-=30,r-=30;var a=$(".mind-container"),h=mind.designer,d=a.scrollLeft(),c=a.scrollTop();1!=t.zoom&&(d=Math.abs(h.offset().left)/t.zoom,c=Math.abs(h.offset().top)/t.zoom),o=d+e,s=c+r,this.svgW=n+30-e,this.svgH=i+30-r,this.svgDx=e,this.svgDy=r,this.minX_=o,this.minY_=s},render:{init:function(t,e){this.renderTopics(t,e)},katexImg:"",katexW:"",katexH:"",renderTopics:function(t,e){for(var r=l.partIdArr,n=l.container,i=l.svgNS,o=l.svgDx,s=l.svgDy,a=t.length,h={"font-size":"16px","font-family":"微软雅黑","border-radius":"1px",color:"rgb(68, 68, 68)","font-style":"normal",textAlign:"left","font-weight":"normal"},d=0;d<a;d++){var c=$(t[d]),f=c.offset(),u=f.left/l.zoom-o,p=f.top/l.zoom-s,g=c.outerWidth(),m=c.outerHeight(),v=c.attr("id");if(!r||-1!=r.indexOf(v)){if("free"==e){if(0==c.parents(".topic-container ").children(".free").length)continue}else if(c.parents(".topic-container ").children(".free").length>0)continue;var x=mind.model.topicList.data[v],y=x.style||{},b=mind.style.getStyle.call(mind,x),w=$.extend({},h,y,b),k=(this.getTextStyle(w),w["border-radius"]);null!=k&&k&&parseFloat(k)>m/2&&(k=m/2);var A=[],S={},z="";if(null!=w.border&&w.border){var I=w.border.split(" ");I.length>3?(A.push(I[0]),A.push(I[1]),A.push(I.slice(2).join(" "))):A=I}else A=["0px",0,"none"];null!=A&&A&&(S.stroke=A[2],S["stroke-width"]=A[0]),null!=w["border-color"]&&w["border-color"]&&(S.stroke=w["border-color"]),null!=w["border-width"]&&w["border-width"]&&(S["stroke-width"]=w["border-width"],null==w["border-color"]&&(S.stroke=w.color)),"none"==w["border-style"]&&(S["stroke-width"]="0px"),null!=w["border-style"]&&w["border-style"]&&("dashed"==w["border-style"]?(S["stroke-dasharray"]="5 3",null!=S.stroke&&"none"!=S.stroke||(S.stroke=w.color)):"double"==w["border-style"]?null!=S.stroke&&"none"!=S.stroke||(S.stroke=w.color):"dotted"==w["border-style"]&&(S["stroke-dasharray"]="3 3",null!=S.stroke&&"none"!=S.stroke||(S.stroke=w.color)));var _="";for(var N in null!=w["border-image"]&&w["border-image"]&&(_=w["border-image"].indexOf("cute1.png")>-1?"cute1":"border"),S)null!=S[N]&&S[N]&&(z+=N+":"+S[N]+";");var O="";if(_){z="",g+=2*parseInt(S["stroke-width"]),m+=2*parseInt(S["stroke-width"]),u-=parseInt(S["stroke-width"]),p-=parseInt(S["stroke-width"]);var L=window.baseDomain||window.location.origin,H=L+"/assets/images/mind/theme-border/"+_+"_left.png",T=L+"/assets/images/mind/theme-border/"+_+"_top.png",C=L+"/assets/images/mind/theme-border/"+_+"_right.png",M=L+"/assets/images/mind/theme-border/"+_+"_bottom.png",E=parseInt(S["stroke-width"]),B={left:u,top:p,bottom:p+m-E,right:u+g-E},j={x:B.left,y:B.top+E,w:.8*E,h:m-1.5*E},W={x:B.left,y:B.top+E,w:g,h:.5*E},D={x:B.left+.7*E,y:B.bottom+.5*E,w:g-2*E,h:.5*E},P={x:B.right+.2*E,y:B.top+E,w:.8*E,h:m-1.5*E};O='<image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+H+'" transform= translate('+j.x+","+j.y+')  width="'+j.w+'" height="'+j.h+'" preserveAspectRatio="none meet" /><image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+T+'" transform= translate('+W.x+","+W.y+')  width="'+W.w+'" height="'+W.h+'" preserveAspectRatio="none meet" /><image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+M+'" transform= translate('+D.x+","+D.y+')  width="'+D.w+'" height="'+D.h+'" preserveAspectRatio="none meet" /><image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+C+'" transform= translate('+P.x+","+P.y+')  width="'+P.w+'" height="'+P.h+'" preserveAspectRatio="none meet" />'}var F=c.find(".topic"),Y="",U=F.offset(),V=Math.round(U.left/l.zoom-o),X=Math.round(U.top/l.zoom-s),q=F.outerWidth(),G=F.outerHeight();q<30&&(q=30);x.title;var R=w["background-color"]||w.background||w.backgroundColor||"transparent";R=R.indexOf("http")>-1?"transparent":R,Y=this.renderTextForeignObj(F,x,V,X,q,G,w);var Z="";if(F.find(".equation-text").length>0){G+=3;var J=l.defs;Z='<rect transform="translate('+V+","+(X-3)+')"  width="'+q+'" height="'+G+'" fill=url(#katex'+v+")></rect>";var K=document.createElementNS(i,"pattern");K.setAttribute("id","katex"+v),K.setAttribute("width",q),K.setAttribute("height",G),K.setAttribute("x",0),K.setAttribute("y",0),K.setAttribute("patternUnits","userSpaceOnUse");var Q=document.getElementById("katex_"+v).offsetTop-1;K.innerHTML='<image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+this.katexImg+'" width="'+this.katexW+'px" height="'+this.katexH+'px" x="'+-0+'" y="'+-Q+'"/>',J.appendChild(K),K=null,Y=Z}var tt=c.find(".topic-icons .icon-list"),et="";tt.length>0&&(et=this.createIcon(tt));var rt=c.find(".topic-tags"),nt="";rt.length>0&&(nt=this.getLabelXMl(rt,x));var it=c.find(".topic-image img"),ot="";if(it.length>0){var st=it.outerWidth(),at=it.outerHeight(),lt=x.image.url,ht=it.offset(),dt=ht.left/l.zoom-o,ct=ht.top/l.zoom-s;lt.indexOf("processon.com")>-1?lt=lt.replace("http://","https://"):window.isPrivate&&!/^(http|https):\/\//.test(lt)&&(lt=baseDomain+"/image/"+lt+".png"),ot='<image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+lt+'" transform="translate('+dt+", "+ct+')" width="'+st+'" height="'+at+'"  />'}var ft=c.find(".topic-task"),ut="";if(ft.length>0){var pt=x.task,gt=ft.offset(),mt=gt.left/l.zoom-o,vt=gt.top/l.zoom-s,xt=(ft.find("span").eq(0),this.getTextStyle(w,"task")),yt="",bt=pt.assigned?" ("+pt.assigned+")":"";(pt.start||pt.end)&&(yt=(pt.start?pt.start:"_")+" : "+(pt.end?pt.end:"_")),(xt.indexOf("vertical-rl")>-1||xt.indexOf("vertical-lr")>-1)&&(mt+=14),ut='<text x="'+mt+'" y="'+(vt-2)+'" style="dominant-baseline: text-before-edge;fill:'+w.color+";"+xt+'">'+yt+bt+"</text>"}var wt=c.find(".topic-link img"),kt="";if(wt.length>0){var At=x.link,$t=wt.offset(),St=wt.outerWidth(),zt=wt.outerHeight(),It=$t.left/l.zoom-o,_t=$t.top/l.zoom-s,Nt=wt.attr("src");kt+='<a href="'+At.value+'" target="_blank" style="cursor:pointer;"><image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+Nt+'" transform="translate('+It+", "+_t+')" width="'+St+'" height="'+zt+'"  /></a>'}var Ot=c.find(".topic-file img"),Lt="";if(Ot.length>0){var Ht=x.file||x.link,Tt=Ot.offset(),Ct=Ot.outerWidth(),Mt=Ot.outerHeight(),Et=Tt.left/l.zoom-o,Bt=Tt.top/l.zoom-s,jt=Ot.attr("src");Lt+='<a href="'+Ht.value+'" target="_blank" style="cursor:pointer;"><image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+jt+'" transform="translate('+Et+", "+Bt+')" width="'+Ct+'" height="'+Mt+'"  /></a>'}var Wt=c.find(".topic-note img"),Dt="";if(Wt.length>0){var Pt=Wt.offset(),Ft=Pt.left/l.zoom-o,Yt=Pt.top/l.zoom-s,Ut=Wt.outerWidth(),Vt=Wt.outerHeight();Dt+='<image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+Wt.attr("src")+'" transform="translate('+Ft+", "+Yt+')" width="'+Ut+'" height="'+Vt+'"  />'}var Xt=c.find(".topic-number"),qt="";if(Xt.length>0){var Gt=Xt.offset(),Rt=Gt.left/l.zoom-o,Zt=Gt.top/l.zoom-s,Jt=Xt.outerWidth(),Kt=Xt.outerHeight(),Qt=$.extend({},w,{textAlign:"center","text-align":"center","font-size":Xt.css("font-size"),color:Xt.css("color")});if(Xt.hasClass("type5")){var te=Math.ceil(Kt/2);qt+='<g><rect x="'+(Rt+1)+'" y="'+(Zt+1)+'" rx="'+te+'" ry="'+te+'" width="'+Jt+'" height="'+Kt+'" fill="'+Xt.css("background-color")+'" /></g>'}qt+=this.renderTextForeignObj(Xt,x,Rt,Zt,Jt,Kt,Qt)}var ee="";if(w["border-bottom"]){var re=c[0].style.borderBottom.split("solid ")[1];ee='<line x1="'+u+'" y1="'+Math.floor(p+m-1)+'" x2="'+(u+g)+'" y2="'+Math.floor(p+m-1)+'"style="stroke:'+re+';stroke-width:2"/>'}w.lineStyle&&w.lineStyle.underLine&&(m-=2);var ne=document.createElementNS(i,"g");ne.setAttribute("id",v),ne.innerHTML='<rect x="'+u+'" y="'+p+'" rx="'+k+'" ry="'+k+'" width="'+g+'" height="'+m+'" style="fill: '+R+"; "+z+'"></rect>'+Y+et+nt+ot+ut+kt+Lt+Dt+qt+ee+O,n.appendChild(ne),ne=null,w={}}}},renderTextForeignObj:function(t,e,r,n,i,o,s,a){var h,d=t.html().replace(//g," ").replace(/[\u0000-\u001f]/g,""),c=[];for(var f in s)if(f.indexOf("font-size")>-1){var u=parseFloat(s[f])+"px";c.push(f+":"+u+";")}else f.indexOf("font")>-1||f.indexOf("color")>-1?c.push(f+":"+s[f]+";"):f.indexOf("font-family")>-1?c.push("font-family: "+s[f]+";"):f.indexOf("bold")>-1||(f.indexOf("italic")>-1&&null==s["font-style"]?c.push("font-style: "+(s[f]?"italic":"normal")+";"):f.indexOf("textAlign")>-1?c.push("text-align:"+(s["text-align"]||s.textAlign)+";"):f.indexOf("text-decoration")>-1?c.push("text-decoration:"+s[f]+";"):f.indexOf("flex-direction")>-1&&"row"==s[f]?c.push("writing-mode:vertical-lr;"):f.indexOf("flex-direction")>-1&&"row-reverse"==s[f]&&c.push("writing-mode:vertical-rl;"));"label"==a&&c.push("line-height:120%;");var p=$('<div style="word-break: break-all;word-wrap: break-word;position: relative;padding: 0;margin: 0; line-height: 140%;'+c.join("")+"width: "+(i+2)+"px;max-width: "+t.css("max-width")+';">'+d+"</div>").appendTo("body");return h=l.richText2svg(p,r,n,c,a),p.remove(),h},renderText:function(t,e,r,n){var i=e.title,o="";i=i.replace(/\n/g,"<br>").replace(/&nbsp;/g," ");var s=parseInt(t.css("fontSize")),a=window.getComputedStyle(t[0],null).lineHeight;"normal"==a&&(a=1.375*s);var l=document.createElement("div");document.body.appendChild(l),l.style.cssText="font-size:"+s+"px;position: absolute;display: inline-block;min-height:16px;margin:0;padding: 0;border:0;white-space: nowrap;"+n;for(var h=i.split("<br>"),d=[],c=0,f=/[A-Za-z]/,u=0,p=h.length;u<p;u++){var g=h[u];if(l.innerText=g,l.offsetWidth<=900)d.push(h[u]);else{var m="";l.innerHTML="";for(var v="",x=0,y=g.length;x<y;x++){if(" "==g[x])v="&nbsp;";else if(f.test(g[x])){if(g[x-1]&&g[x-1],v+=g[x],x+1<=y-1&&f.test(g[x+1]))continue}else v=g[x];l.innerHTML+=v;var b=l.offsetWidth,w=b-c;""==b||b<=898?(m+=v.replace("&nbsp;"," "),v="",c=b,x==y-1&&(d.push(m),m="",l.innerHTML="",c=0)):(d.push(m),m=v,l.innerHTML=v,v="",c=w)}}}document.body.removeChild(l);t.css("textAlign");for(var k=0,A=d.length;k<A;k++){var $=a;0==k&&($=0),o+='<tspan x="'+r+'" dy="'+$+'" style="dominant-baseline: text-before-edge;'+n+'">'+d[k]+"</tspan>"}return o},getTextStyle:function(t,e){var r="",n={left:"start",right:"end",center:"middle"};if(e)for(var i in t)"font-size"==i?r+=i+": 12px;":i.indexOf("font-")>-1?r+=i+":"+t[i]+";":"textAlign"==i?r+="text-anchor:"+n[t[i]]+";":"flex-direction"==i&&"row"==t[i]?r+="writing-mode:vertical-lr":"flex-direction"==i&&"row-reverse"==t[i]&&(r+="writing-mode:vertical-rl");else for(var i in t)i.indexOf("font-")>-1?r+=i+":"+t[i]+";":"textAlign"==i&&(r+="text-anchor:"+n[t[i]]+";");return r},getLabelXMl:function(t,e){var r=t.find(".topic-tag"),n=r.length,i=[],o=l.svgDx,s=l.svgDy;if(n>0)for(var a=e.tags,h=0;h<n;h++){var d=$(r[h]),c=a[h],f=d.offset(),u=f.left/l.zoom-o,p=f.top/l.zoom-s,g=d.outerWidth(),m=20,v=u+4,x=p+2;if("vertical-rl"==r.css("writing-mode")||"vertical-lr"==r.css("writing-mode")){m=d.outerHeight(),v=u+4,x=p+4;var y={"font-family":"微软雅黑","font-size":"12px",color:c.color},b=this.renderTextForeignObj(d,e,v,x,g,m,y,"label");i.push('<g><rect x="'+u+'" y="'+p+'" rx="3" ry="3" width="'+g+'" height="'+m+'" fill="'+c.background+'"></rect>'+b+"</g>")}else{var w=c.text?Array.isArray(c.text)?c.text[0]:c.text:"";i.push('<g><rect x="'+u+'" y="'+p+'" rx="3" ry="3" width="'+g+'" height="'+m+'" fill="'+c.background+'"></rect><text x="'+v+'" y="'+(x+12)+'" style="font-family: 微软雅黑;font-size:12px;fill:'+c.color+'">'+w.replace(/&nbsp;/g," ")+"</text></g>")}}return i.join("")},createIcon:function(e){for(var r=l.partIdArr,n=(l.container,l.svgNS,e.length),i="",s=l.svgDx,a=l.svgDy,h=0;h<n;h++){var d=$(e[h]),c=d.offset(),f=c.left/l.zoom-s,u=c.top/l.zoom-a,p=d.attr("ico"),g=d.css("color"),m=d.parent().parent().attr("id");if(!r||-1!=r.indexOf(m)){var v=t.MindSvg[p],x=t.MindSvgColor[p];if(p.indexOf("img")>-1){var y=d.children("img").outerWidth(),b=d.children("img").outerHeight(),w=d.attr("iconimg"),k=d.offset();i+='<image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+w+'" transform="translate('+(k.left/l.zoom-s)+", "+(k.top/l.zoom-a)+')" width="'+y+'" height="'+b+'"  />'}else if("string"==typeof v){i+="<path "+v+' fill="'+g+'" transform="translate('+f+", "+u+") scale("+d.css("font-size").split("px")[0]/1024+')"></path>'}else if("object"===o(v)){var A=v.length;i+='<g transform="translate('+f+", "+u+") scale("+d.css("font-size").split("px")[0]/1024+')">';for(var S=0;S<A;S++)i+="<path "+v[S]+' fill="'+(x?x[S]:g)+'"></path>';i+="</g>"}u=0}}return"<g>"+i+"</g>"}},drawLine:function(){for(var t=this.container,e=this.svgNS,r=document.querySelector("#mind_con"),n=$(r).find("svg:not(#mind-svg-con, .icon)"),i=this.svgDx,o=this.svgDy,s=0,a=n.length;s<a;s++){var h=n[s],d=$(h).offset(),c=$(h).siblings(".topic-box").attr("id");if(!($(h).parents(".equation-text").length>0))if(this.partIdArr&&("mind-line-svg"==$(h).attr("class")&&this.partDrawLine("root",h,s,c),-1==this.partIdArr.indexOf(c)))this.partDrawLine("children",h,s,c);else{var f=document.createElementNS(e,"g");if(f.setAttribute("transform","translate("+(d.left/l.zoom-i)+", "+(d.top/l.zoom-o)+")"),f.setAttribute("id","sdjakdjak"+s),this.isView?(f.innerHTML=h.innerHTML.replace(/pattern_mark/g,"pattern_mark_view").replace(/rect_mark/g,"rect_mark_view"),$(f).find("#pattern_mark_view,#rect_mark_view").remove()):(f.innerHTML=h.innerHTML.replace(/pattern_mark/g,"pattern_mark_svg").replace(/rect_mark/g,"rect_mark_svg"),$(f).find("#pattern_mark_svg,#rect_mark_svg").remove()),"mind-line-svg"==$(h).attr("class"))if($(t).find("#svgbackgroundid").length)$(t).find("#svgbackgroundid").after(f);else try{$(t).find("g:first").before(f)}catch(u){t.appendChild(f)}else t.appendChild(f);f=null}}n=null},partDrawLine:function(t,e,r,n){var i=this,o=this.partId,s=this.partIdArr,a=this.container,h=this.svgNS,d=this.svgDx,c=this.svgDy,f=$(e).offset(),u="",p="",g="",m="",v="",x="",y="";if("root"==t?($("#rect_mark").length&&(u=$("#rect_mark").prop("outerHTML")+$("#rect_mark").next("defs").prop("outerHTML")),$(e).find(".svg-connection-con .connection-svg").each(function(t){var e=$(this).attr("id");i.connectInPart(e)&&(p+=$(this).prop("outerHTML"))}),$(e).find(".svg-freesums-con path").each(function(t){var e=$(this).attr("id").split("_")[1];s.indexOf(e)>-1&&e!=o&&(g+=$(this).prop("outerHTML"))}),$(e).find(".svg-freebos-con path").each(function(t){var e=$(this).attr("id").split("_")[1];s.indexOf(e)>-1&&e!=o&&(m+=$(this).prop("outerHTML"))}),p=p?'<g class="svg-connection-con" transform="translate(0.5,0.5)">'+p+"</g>":"",g=g?'<g class="svg-freesums-con" transform="translate(0.5,0.5)">'+g+"</g>":"",m=m?'<g class="svg-freebos-con" transform="translate(0.5,0.5)">'+m+"</g>":""):"children"==t&&($("#subline_"+n).find("path").each(function(t){var e=$(this).attr("p");s.indexOf(e)>-1&&(v+=$(this).prop("outerHTML"))}),$(e).find(".svg-summary-con path").each(function(t){var e=$(this).attr("id").split("_")[1];s.indexOf(e)>-1&&e!=o&&(x+=$(this).prop("outerHTML"))}),$(e).find(".svg-boundary-con path").each(function(t){var e=$(this).attr("id").split("_")[1];s.indexOf(e)>-1&&e!=o&&(y+=$(this).prop("outerHTML"))}),v=v?'<g id="#subline_'+n+'" transform="translate(0.5,-0.5)">'+v+"</g>":"",x=x?'<g class="svg-summary-con" transform="translate(0.5,0.5)">'+x+"</g>":"",y=y?'<g class="svg-boundary-con" transform="translate(0.5,0.5)">'+y+"</g>":""),u||p||g||v||x||m||y){var b=document.createElementNS(h,"g");if(b.setAttribute("transform","translate("+(f.left/l.zoom-d)+", "+(f.top/l.zoom-c)+")"),b.setAttribute("id","sdjakdjak"+r),b.innerHTML=u+p+g+m+v+x+y,"mind-line-svg"==$(e).attr("class"))if($(a).find("#svgbackgroundid").length)$(a).find("#svgbackgroundid").after(b);else try{$(a).find("g:first").before(b)}catch(w){a.appendChild(b)}else a.appendChild(b);b=null}},connectInPart:function(t){var e=this.partIdArr,r=mind.model.topic.lines,n=t.split("_")[1];if(r&&r[n]){var i=r[n].from,o=r[n].to;if(-1!==e.indexOf(i)&&-1!==e.indexOf(o))return!0}return!1},drawBoundaryMark:function(){var t=this.container,e=this.svgNS,r=$("#mind_con").find(".boundary-mark-input"),n=r.length,i=this.svgDx,o=this.svgDy;if(n>0)for(var s=0;s<n;s++){var a=$(r[s]),h=a.attr("id").split("mark_")[1],d=a.offset(),c=d.left/l.zoom-i,f=d.top/l.zoom-o,u=a.outerWidth(),p=a.outerHeight(),g=a.css("backgroundColor"),m=a.css("color"),v=a.html().replace(/&nbsp;/g," ").replace(/\n/g,"</br>");if(!this.partIdArr||-1!=this.partIdArr.indexOf(h)){var x=$('<div style="font-size: 12px;color:'+m+";width: "+(u-10)+'px;word-break: break-all;line-height:150%">'+v+"</div>").appendTo("body"),y=l.richText2svg(x,c+6,f+4);x.remove();var b;b='<rect x="'+c+'" y="'+f+'" rx="4" ry="4" width="'+u+'" height="'+p+'" fill="'+(g||l.svgBg)+'"></rect>'+y;var w=document.createElementNS(e,"g");w.innerHTML=b,t.appendChild(w),w=null}}},drawConnectLabel:function(){var t=this.container,e=this.svgNS,r=$("#mind_con").find(".mind-connection-con"),n=r.length,i=this.svgDx,o=this.svgDy;if(n>0)for(var s=0;s<n;s++){var a=$(r[s]),h=a.attr("conn"),d=a.offset(),c=d.left/l.zoom-i,f=d.top/l.zoom-o,u=a.outerWidth(),p=a.outerHeight(),g=a.css("backgroundColor"),m=a.css("color"),v=a.find(".mind-connection-label").html().replace(/&nbsp;/g," ").replace(/\n/g,"</br>");if(!this.partIdArr||this.connectInPart("line_"+h)){var x=$('<div style="font-size: 13px;color:'+m+';line-height: 140%;width: 200px;word-break: break-all;font-family: Arial;">'+v+"</div>").appendTo("body"),y=l.richText2svg(x,c+8,f+6,["font-family:Arial;"]);x.remove();var b;b='<rect x="'+c+'" y="'+f+'" rx="5" ry="5" width="'+u+'" height="'+p+'" fill="'+(g||l.svgBg)+'"></rect>'+y;var w=document.createElementNS(e,"g");w.innerHTML=b,t.appendChild(w),w=null}}},renderConnectLabelText:function(t){var e=this.svgDx,r=this.svgDy,n=t.html(),i=t.offset(),o=i.left/l.zoom+8-e,s=i.top/l.zoom+6-r,a=(n=n.replace(/\n/g,"<br>")).split("<br>"),h="",d=window.getComputedStyle(t[0],null).lineHeight;"normal"==d&&(d=13*1.3);for(var c=0,f=a.length;c<f;c++){var u=d;0==c&&(u=0),h+='<tspan x="'+o+'" y="'+s+'" dy="'+u+'" style="dominant-baseline: text-before-edge;">'+a[c]+"</tspan>"}return h},richText2svg:function(t,r,n,i,o){i=i||[];for(var s=!1,a=0;a<i.length;a++)i[a].indexOf("writing-mode")>-1&&i.splice(i[a],1);"vertical-lr"!=$(t).css("writing-mode")&&"vertical-rl"!=$(t).css("writing-mode")||(s=!0);var h=t[0].style,d={anchor:"center"==h.textAlign?"middle":"right"==h.textAlign?"end":"start",family:h.fontFamily,size:h.fontSize||12,width:h.width,fill:h.color,style:h.fontStyle,variant:h.fontVariant,weight:h.fontWeight,lineHeight:h.lineHeight||"140%"};"number"==o&&(d.anchor="start"),t.find("font").each(function(){$(this).css("fill",$(this).attr("color")),$(this).css("font-family",$(this).attr("face"))}),t.find("b").css("font-weight","bold"),t.find("i").css("font-style","italic"),t.find("u").css("text-decoration","underline"),t.find("strike").css("text-decoration","line-through"),t.find("h1").css({"font-weight":"bold","font-size":2*parseInt(d.size)+"px"}),t.find("h2").css({"font-weight":"bold","font-size":1.5*parseInt(d.size)+"px"}),t.find("h3").css({"font-weight":"bold","font-size":1.17*parseInt(d.size)+"px"}),t.find("h4").css({"font-weight":"bold","font-size":1*parseInt(d.size)+"px"}),t.find("h5").css({"font-weight":"bold","font-size":.83*parseInt(d.size)+"px"}),t.find("h6").css({"font-weight":"bold","font-size":.67*parseInt(d.size)+"px"}),t.find("ol").css({"list-style-type":"decimal"}),t.find("ol").each(function(t){$(this).children("li").each(function(t){$(this).html(t+1+".&nbsp"+$(this).html())})}),t.find("ul").each(function(t){$(this).children("li").each(function(t){$(this).html('<span style="font-weight: bolder;">·</span>&nbsp;&nbsp;'+$(this).html())})});var c=[];function f(t){if(!t)return"";var e=["fill","color","font","font-size","font-family","font-weight","font-style","text-align","text-decoration","list-style-type"],r="",n={};for(var i in t.split(";").map(function(t){var r=t.split(":");if(2==r.length){var i=$.trim(r[0]),o=$.trim(r[1]).replace(/"/g,"'");-1!=e.indexOf(i)&&o&&(n[i]=o)}}),n)r+=i+":"+n[i]+";";return r}!function t(r){for(var n=0,i=r.length;n<i;n++){if("#text"==r[n].nodeName){var o,s=e(r[n].data);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(c.length){var l=$("<span style='float:left;'></span>").appendTo("body"),h=c[c.length-1],d=l.text(a).width(),u=l.text(h.text).width(),p=l.text(h.text+a).width();if(l.remove(),(p+2<d+u||-1!=["️"].indexOf(a)||0==d)&&"</br>"!=h.text){h.text+=a;continue}}if("DIV"==r[n].parentNode.nodeName)var g={text:a,style:""};else g={text:a,style:f(r[n].parentNode.getAttribute("style"))};c.push(g)}}catch(m){s.e(m)}finally{s.f()}}else"BR"==r[n].nodeName?(n>0&&"DIV"==r[n-1].nodeName&&(g={text:"</br>",style:""},c.push(g)),g={text:"</br>",style:""},c.push(g)):"DIV"==r[n].nodeName||"LI"==r[n].nodeName||r[n].nodeName.indexOf("H")>=0||"P"==r[n].nodeName?c.length>0&&"</br>"!=c[c.length-1].text&&(g={text:"</br>",style:""},c.push(g)):"DIV"==r[n].parentNode.nodeName?"function"==typeof r[n].getAttribute&&r[n].setAttribute("style",r[n].getAttribute("style")?r[n].getAttribute("style").replace(/"/g,"'"):r[n].getAttribute("style")):null==r[n].parentNode.getAttribute("style")?r[n].setAttribute("style",r[n].getAttribute("style")?r[n].getAttribute("style").replace(/"/g,"'"):r[n].getAttribute("style")):r[n].setAttribute("style",(r[n].parentNode.getAttribute("style")?r[n].parentNode.getAttribute("style").replace(/"/g,"'"):r[n].parentNode.getAttribute("style"))+(r[n].getAttribute("style")?r[n].getAttribute("style").replace(/"/g,"'"):r[n].getAttribute("style")));t(r[n].childNodes)}}(t[0].childNodes),t.empty();var u=[];for(a=0;a<c.length;a++){var p="";"</br>"==c[a].text||"<div></br></div>"==c[a].text?p=c[a].text:(c[a].text=c[a].text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),p='<span style="'+c[a].style+'">'+c[a].text+"</span>"),$(p).appendTo(t)}t.children().each(function(e){t.hasClass("topic-tag")&&(c[e].type="tag"),"</br>"==c[e].text?void 0!==c[e-1]&&"</br>"!=c[e-1].text||(c[e].dy=0,u.push(c[e])):(c[e].dy=$(this)[0].offsetTop+$(this).height(),c[e].dx=$(this)[0].offsetLeft,c[e].w=$(this).width(),c[e].h=$(this).height(),0!=u.length&&u[u.length-1].style==c[e].style&&Math.abs(u[u.length-1].dy-c[e].dy)<3&&0!==u.dy?(u[u.length-1].text+=c[e].text,u[u.length-1].w+=c[e].w):""==$.trim(c[e].text)&&0==c[e].w||u.push(c[e]))});var g="";for(a=0;a<u.length;a++){var m=u[a];if("</br>"!=m.text){if(null==m.style&&(m.style=""),m.style.indexOf("underline")>-1){var v=(y=r+m.dx)+m.w,x=b=n+m.dy-parseInt(d.size)/10;"svg"!=l.type&&w(m,y,v,b,x)}else if("underline"==h.textDecoration){v=(y=r+m.dx)+m.w,x=b=n+m.dy-parseInt(d.size)/10;"svg"!=l.type&&w(m,y,v,b,x)}if(m.style.indexOf("line-through")>-1){v=(y=r+m.dx)+m.w,x=b=n+m.dy-m.h/2-parseInt(d.size)/10;"svg"!=l.type&&w(m,y,v,b,x)}else if("line-through"==h.textDecoration){var y,b;v=(y=r+m.dx)+m.w,x=b=n+m.dy-m.h/2-parseInt(d.size)/10;"svg"!=l.type&&w(m,y,v,b,x)}}}function w(t,e,r,n,i){for(var o=t.style.split(";"),s=d.fill,a=0;a<o.length-1;a++)if(o[a].indexOf("fill")>-1){s=o[a].split(":")[1];break}g+='<line x1="'+e+'" y1="'+n+'" x2="'+r+'" y2="'+i+'"style="stroke:'+s+";stroke-width:"+Math.round(parseInt(d.size)/20)+'"/>'}var k=[];for(a=0;a<u.length;a++)0!=k.length&&Math.abs(u[a].dy-u[a-1].dy)<3&&0!==u[a].dy?k[k.length-1].texts.push(u[a]):k.push({texts:[u[a]],dy:u[a].dy});d.width=parseInt(d.width),r="middle"==d.anchor?r+d.width/2:"end"==d.anchor?d.width+r:r;var A="",S=n-.4*parseInt(d.size);for(a=0;a<k.length;a++){for(var z=k[a].texts,I="",_=0,N=0;N<z.length;N++){var O=z[N];if(O.text="</br>"==O.text?" ":O.text,O.style){for(var L=O.style.split(";"),H=0;H<L.length;H++)L[H].indexOf("font-family")>0&&(L[H]="font-family: 'Microsoft YaHei'"),L[H].indexOf("height")>0&&(_=parseInt(L[H].split(":")[1]));O.style=L.join(";").replace("color","fill"),O.style.indexOf("width")>-1?I+=s?"<tspan>"+O.text+"</tspan>":'<tspan dx="'+$.trim(O.style.split("width:")[1].split("px")[0]-6)+'">'+O.text+"</tspan>":I+='<tspan style="'+O.style+'">'+O.text+"</tspan>"}else I+="<tspan>"+O.text+"</tspan>"}if(d.lineHeight&&d.lineHeight.indexOf("%")>-1)var T=parseInt(d.lineHeight)/100;s?_>parseInt(d.size)*T?(S+=_,A+='<tspan x="'+(z[0].dx+r+4)+'" y="'+S+'">'+I+"</tspan>"):A+='<tspan x="'+(z[0].dx+r+4)+'" y="'+(S+z[0].dy)+'">'+I+"</tspan>":_>parseInt(d.size)*T?(A+='<tspan x="'+r+'" y="'+(S=S+parseInt(d.size)*T+(_-parseInt(d.size)*T)/2)+'">'+I+"</tspan>",S+=(_-parseInt(d.size)*T)/2):(12==parseInt(d.size)?S+=parseInt(d.size)*T*.95:S+=parseInt(d.size)*T,A+='<tspan x="'+r+'" y="'+S+'">'+I+"</tspan>")}return"<g>"+g+'<text text-anchor="'+d.anchor+'" align="top" anchor="'+d.anchor+'" font-size="'+d.size+'"  font-weight="'+d.weight+'" fill="'+d.fill+'" style="'+i.join("").replace(/"/g,"'")+'">'+A+"</text></g>"},getBrandColor:function(t){var e="";function r(t){return t=(t=t.replace("rgb(","")).replace(")","")}function n(t,e){var r=["#000","#fff"];return t<200||t>270?e<=30?r[1]:r[0]:e<=50?r[1]:r[0]}null!=t&&(t.indexOf("#")>=0&&t.indexOf("null")<0?e=r(t=function(t){if(t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var e="#",r=1;r<4;r+=1)e+=t.slice(r,r+1).concat(t.slice(r,r+1));t=e}for(var n=[],r=1;r<7;r+=2)n.push(parseInt("0x"+t.slice(r,r+2)));return"rgb("+n.join(",")+")"}return t}(t)):null!=t&&t.indexOf("null")<0&&t.toLowerCase().indexOf("rgb(")>=0&&(e=r(t)));var i=function(t,e,r){t/=255,e/=255,r/=255;var n,i,o=Math.max(t,e,r),s=Math.min(t,e,r),a=(o+s)/2;if(o==s)n=i=0;else{var l=o-s;switch(i=a>.5?l/(2-o-s):l/(o+s),o){case t:n=(e-r)/l+(e<r?6:0);break;case e:n=(r-t)/l+2;break;case r:n=(t-e)/l+4}n/=6}return[Math.floor(100*n),Math.round(100*i),Math.round(100*a)]}(e.split(","));return n(i[0],i[2])},getWatermarkColor:function(){var t=mind.styles,e=mind.model.topic.background||t.background;mind.util;null!=e&&e.indexOf("null")>0&&(e="rgb(244,244,244)"),e.indexOf("rgb")>=0&&(e=Util.getHexColor(e).hex);var r=Util.getRgbFromHex(e);null==r&&(r={r:190,g:190,b:190});var n=r.r-20,i=r.g-20,o=r.b-20;return n<0&&0!=r.r?n=0:r.r<10&&(n=r.r+40),i<0&&0!=r.g?i=0:r.g<10&&(i=r.g+40),o<0&&0!=r.b?o=0:r.b<10&&(o=r.b+40),"rgb("+n+","+i+","+o+")"},partIdSearch:function(){var t=this.partId,e=[];!function r(n,i,o,s){n.map(function(n,a){var l,h,d,c,f=!1;((n.id==t||i)&&(e.push(n.id),f=!0),n.children&&n.children.length>0)&&(n.summaries&&n.summaries.length&&(l=n.summaries.filter(function(t){return null==t.part||"right"==t.part})),n.boundaries&&n.boundaries.length&&(h=n.boundaries.filter(function(t){return null==t.part||"right"==t.part})),r(n.children,f,l,h));n.leftChildren&&n.leftChildren.length>0&&(n.summaries&&n.summaries.length&&(d=n.summaries.filter(function(t){return null==t.part||"left"==t.part})),n.boundaries&&n.boundaries.length&&(c=n.boundaries.filter(function(t){return null==t.part||"left"==t.part})),r(n.leftChildren,f,d,c));n.summaries&&n.summaries.length>0&&r(n.summaries,f),n.boundaries&&n.boundaries.length>0&&r(n.boundaries,f),n.id==t&&o&&o.length&&o.map(function(t){if(t.range==a+","+a){var n,i,o;if(e.push(t.id),f=!0,t.children&&t.children.length>0)t.summaries&&t.summaries.length&&(n=t.summaries.filter(function(t){return null==t.part||"right"==t.part})),t.boundaries&&t.boundaries.length&&(i=t.boundaries.filter(function(t){return null==t.part||"right"==t.part})),r(t.children,f,n,i);if(t.leftChildren&&t.leftChildren.length>0)t.summaries&&t.summaries.length&&(o=t.summaries.filter(function(t){return null==t.part||"left"==t.part})),r(t.leftChildren,f,o);t.summaries&&t.summaries.length>0&&r(t.summaries,f),t.boundaries&&t.boundaries.length>0&&r(t.boundaries,f)}}),n.id==t&&s&&s.length&&s.map(function(t){t.range==a+","+a&&(e.push(t.id),f=!0)})})}([mind.model.topic]),this.partIdArr=e}},h=exports.default=l;
},{"./mindtosvg.icons":"RC3o"}],"ArK3":[function(require,module,exports) {
var define;
var A;function e(A){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(A)}!function(t,r){"object"==("undefined"==typeof exports?"undefined":e(exports))&&"undefined"!=typeof module?module.exports=r():"function"==typeof A&&A.amd?A(r):(t=t||self).html2canvas=r()}(this,function(){"use strict";var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)e.hasOwnProperty(t)&&(A[t]=e[t])})(e,t)};function t(e,t){function r(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var r=function(){return(r=Object.assign||function(A){for(var e,t=1,r=arguments.length;t<r;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(A[n]=e[n]);return A}).apply(this,arguments)};function n(A,e,t,r){return new(t||(t=Promise))(function(n,B){function s(A){try{i(r.next(A))}catch(A){B(A)}}function o(A){try{i(r.throw(A))}catch(A){B(A)}}function i(A){A.done?n(A.value):new t(function(e){e(A.value)}).then(s,o)}i((r=r.apply(A,e||[])).next())})}function B(A,e){var t,r,n,B,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return B={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function o(B){return function(o){return function(B){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(n=2&B[0]?r.return:B[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,B[1])).done)return n;switch(r=0,n&&(B=[2&B[0],n.value]),B[0]){case 0:case 1:n=B;break;case 4:return s.label++,{value:B[1],done:!1};case 5:s.label++,r=B[1],B=[0];continue;case 7:B=s.ops.pop(),s.trys.pop();continue;default:if(!(n=0<(n=s.trys).length&&n[n.length-1])&&(6===B[0]||2===B[0])){s=0;continue}if(3===B[0]&&(!n||B[1]>n[0]&&B[1]<n[3])){s.label=B[1];break}if(6===B[0]&&s.label<n[1]){s.label=n[1],n=B;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(B);break}n[2]&&s.ops.pop(),s.trys.pop();continue}B=e.call(A,s)}catch(o){B=[6,o],r=0}finally{t=n=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,o])}}}var s=(o.prototype.add=function(A,e,t,r){return new o(this.left+A,this.top+e,this.width+t,this.height+r)},o.fromClientRect=function(A){return new o(A.left,A.top,A.width,A.height)},o);function o(A,e,t,r){this.left=A,this.top=e,this.width=t,this.height=r}for(var i=function(A){return s.fromClientRect(A.getBoundingClientRect())},a=function(A){for(var e=[],t=0,r=A.length;t<r;){var n=A.charCodeAt(t++);if(55296<=n&&n<=56319&&t<r){var B=A.charCodeAt(t++);56320==(64512&B)?e.push(((1023&n)<<10)+(1023&B)+65536):(e.push(n),t--)}else e.push(n)}return e},c=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var r=[],n=-1,B="";++n<t;){var s=A[n];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(n+1===t||16384<r.length)&&(B+=String.fromCharCode.apply(String,r),r.length=0)}return B},Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="undefined"==typeof Uint8Array?[]:new Uint8Array(256),u=0;u<Q.length;u++)w[Q.charCodeAt(u)]=u;function U(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))}var l=(C.prototype.get=function(A){var e;if(0<=A){if(A<55296||56319<A&&A<=65535)return e=((e=this.index[A>>5])<<2)+(31&A),this.data[e];if(A<=65535)return e=((e=this.index[2048+(A-55296>>5)])<<2)+(31&A),this.data[e];if(A<this.highStart)return e=2080+(A>>11),e=this.index[e],e+=A>>5&63,e=((e=this.index[e])<<2)+(31&A),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},C);function C(A,e,t,r,n,B){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=r,this.index=n,this.data=B}function g(A,e,t,r){var n=r[t];if(Array.isArray(A)?-1!==A.indexOf(n):A===n)for(var B=t;B<=r.length;){if((i=r[++B])===e)return!0;if(i!==I)break}if(n===I)for(B=t;0<B;){var s=r[--B];if(Array.isArray(A)?-1!==A.indexOf(s):A===s)for(var o=t;o<=r.length;){var i;if((i=r[++o])===e)return!0;if(i!==I)break}if(s!==I)break}return!1}function E(A,e){for(var t=A;0<=t;){var r=e[t];if(r!==I)return r;t--}return 0}function F(A,e,t,r,n){if(0===t[r])return Z;var B=r-1;if(Array.isArray(n)&&!0===n[B])return Z;var s=B-1,o=1+B,i=e[B],a=0<=s?e[s]:0,c=e[o];if(2===i&&3===c)return Z;if(-1!==AA.indexOf(i))return"!";if(-1!==AA.indexOf(c))return Z;if(-1!==eA.indexOf(c))return Z;if(8===E(B,e))return"÷";if(11===j.get(A[B])&&(c===G||c===V||c===z))return Z;if(7===i||7===c)return Z;if(9===i)return Z;if(-1===[I,T,m].indexOf(i)&&9===c)return Z;if(-1!==[R,L,O,S,P].indexOf(c))return Z;if(E(B,e)===b)return Z;if(g(23,b,B,e))return Z;if(g([R,L],D,B,e))return Z;if(g(12,12,B,e))return Z;if(i===I)return"÷";if(23===i||23===c)return Z;if(16===c||16===i)return"÷";if(-1!==[T,m,D].indexOf(c)||14===i)return Z;if(36===a&&-1!==BA.indexOf(i))return Z;if(i===P&&36===c)return Z;if(c===v&&-1!==$.concat(v,O,M,G,V,z).indexOf(i))return Z;if(-1!==$.indexOf(c)&&i===M||-1!==$.indexOf(i)&&c===M)return Z;if(i===_&&-1!==[G,V,z].indexOf(c)||-1!==[G,V,z].indexOf(i)&&c===y)return Z;if(-1!==$.indexOf(i)&&-1!==tA.indexOf(c)||-1!==tA.indexOf(i)&&-1!==$.indexOf(c))return Z;if(-1!==[_,y].indexOf(i)&&(c===M||-1!==[b,m].indexOf(c)&&e[1+o]===M)||-1!==[b,m].indexOf(i)&&c===M||i===M&&-1!==[M,P,S].indexOf(c))return Z;if(-1!==[M,P,S,R,L].indexOf(c))for(var Q=B;0<=Q;){if((w=e[Q])===M)return Z;if(-1===[P,S].indexOf(w))break;Q--}if(-1!==[_,y].indexOf(c))for(Q=-1!==[R,L].indexOf(i)?s:B;0<=Q;){var w;if((w=e[Q])===M)return Z;if(-1===[P,S].indexOf(w))break;Q--}if(k===i&&-1!==[k,W,X,J].indexOf(c)||-1!==[W,X].indexOf(i)&&-1!==[W,Y].indexOf(c)||-1!==[Y,J].indexOf(i)&&c===Y)return Z;if(-1!==nA.indexOf(i)&&-1!==[v,y].indexOf(c)||-1!==nA.indexOf(c)&&i===_)return Z;if(-1!==$.indexOf(i)&&-1!==$.indexOf(c))return Z;if(i===S&&-1!==$.indexOf(c))return Z;if(-1!==$.concat(M).indexOf(i)&&c===b||-1!==$.concat(M).indexOf(c)&&i===L)return Z;if(41===i&&41===c){for(var u=t[B],U=1;0<u&&41===e[--u];)U++;if(U%2!=0)return Z}return i===V&&c===z?Z:"÷"}var h,H,d,f,p,N,K,I=10,T=13,m=15,R=17,L=18,O=19,v=20,D=21,b=22,S=24,M=25,y=26,_=27,P=28,x=30,V=32,z=33,X=34,J=35,G=37,k=38,W=39,Y=40,q=42,Z="×",j=(h=function(A){var e,t,r,n,B,s=.75*A.length,o=A.length,i=0;"="===A[A.length-1]&&(s--,"="===A[A.length-2]&&s--);var a="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),c=Array.isArray(a)?a:new Uint8Array(a);for(e=0;e<o;e+=4)t=w[A.charCodeAt(e)],r=w[A.charCodeAt(e+1)],n=w[A.charCodeAt(e+2)],B=w[A.charCodeAt(e+3)],c[i++]=t<<2|r>>4,c[i++]=(15&r)<<4|n>>2,c[i++]=(3&n)<<6|63&B;return a}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),H=Array.isArray(h)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=4)t.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return t}(h):new Uint32Array(h),f=U(d=Array.isArray(h)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=2)t.push(A[r+1]<<8|A[r]);return t}(h):new Uint16Array(h),12,H[4]/2),p=2===H[5]?U(d,(24+H[4])/2):function(A,e,t){return A.slice?A.slice(e,t):new Uint32Array(Array.prototype.slice.call(A,e,t))}(H,Math.ceil((24+H[4])/4)),new l(H[0],H[1],H[2],H[3],f,p)),$=[x,36],AA=[1,2,3,5],eA=[I,8],tA=[_,y],rA=AA.concat(eA),nA=[k,W,Y,X,J],BA=[m,T],sA=(oA.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},oA);function oA(A,e,t,r){this.codePoints=A,this.required="!"===e,this.start=t,this.end=r}function iA(A){return 48<=A&&A<=57}function aA(A){return iA(A)||65<=A&&A<=70||97<=A&&A<=102}function cA(A){return 10===A||9===A||32===A}function QA(A){return function(A){return function(A){return 97<=A&&A<=122}(A)||function(A){return 65<=A&&A<=90}(A)}(A)||function(A){return 128<=A}(A)||95===A}function wA(A){return QA(A)||iA(A)||45===A}function uA(A,e){return 92===A&&10!==e}function UA(A,e,t){return 45===A?QA(e)||uA(e,t):!!QA(A)||!(92!==A||!uA(A,e))}function lA(A,e,t){return 43===A||45===A?!!iA(e)||46===e&&iA(t):iA(46===A?e:A)}(K=N||(N={}))[K.STRING_TOKEN=0]="STRING_TOKEN",K[K.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",K[K.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",K[K.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",K[K.COMMA_TOKEN=4]="COMMA_TOKEN",K[K.HASH_TOKEN=5]="HASH_TOKEN",K[K.DELIM_TOKEN=6]="DELIM_TOKEN",K[K.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",K[K.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",K[K.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",K[K.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",K[K.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",K[K.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",K[K.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",K[K.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",K[K.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",K[K.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",K[K.NUMBER_TOKEN=17]="NUMBER_TOKEN",K[K.FUNCTION=18]="FUNCTION",K[K.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",K[K.IDENT_TOKEN=20]="IDENT_TOKEN",K[K.COLUMN_TOKEN=21]="COLUMN_TOKEN",K[K.URL_TOKEN=22]="URL_TOKEN",K[K.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",K[K.CDC_TOKEN=24]="CDC_TOKEN",K[K.CDO_TOKEN=25]="CDO_TOKEN",K[K.COLON_TOKEN=26]="COLON_TOKEN",K[K.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",K[K.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",K[K.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",K[K.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",K[K.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",K[K.EOF_TOKEN=32]="EOF_TOKEN";var CA={type:N.LEFT_PARENTHESIS_TOKEN},gA={type:N.RIGHT_PARENTHESIS_TOKEN},EA={type:N.COMMA_TOKEN},FA={type:N.SUFFIX_MATCH_TOKEN},hA={type:N.PREFIX_MATCH_TOKEN},HA={type:N.COLUMN_TOKEN},dA={type:N.DASH_MATCH_TOKEN},fA={type:N.INCLUDE_MATCH_TOKEN},pA={type:N.LEFT_CURLY_BRACKET_TOKEN},NA={type:N.RIGHT_CURLY_BRACKET_TOKEN},KA={type:N.SUBSTRING_MATCH_TOKEN},IA={type:N.BAD_URL_TOKEN},TA={type:N.BAD_STRING_TOKEN},mA={type:N.CDO_TOKEN},RA={type:N.CDC_TOKEN},LA={type:N.COLON_TOKEN},OA={type:N.SEMICOLON_TOKEN},vA={type:N.LEFT_SQUARE_BRACKET_TOKEN},DA={type:N.RIGHT_SQUARE_BRACKET_TOKEN},bA={type:N.WHITESPACE_TOKEN},SA={type:N.EOF_TOKEN},MA=(yA.prototype.write=function(A){this._value=this._value.concat(a(A))},yA.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==SA;)A.push(e),e=this.consumeToken();return A},yA.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),t=this.peekCodePoint(1),r=this.peekCodePoint(2);if(wA(e)||uA(t,r)){var n=UA(e,t,r)?2:1,B=this.consumeName();return{type:N.HASH_TOKEN,value:B,flags:n}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),FA;break;case 39:return this.consumeStringToken(39);case 40:return CA;case 41:return gA;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),KA;break;case 43:if(lA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 44:return EA;case 45:var s=A,o=this.peekCodePoint(0),i=this.peekCodePoint(1);if(lA(s,o,i))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(UA(s,o,i))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(45===o&&62===i)return this.consumeCodePoint(),this.consumeCodePoint(),RA;break;case 46:if(lA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var a=this.consumeCodePoint();if(42===a&&47===(a=this.consumeCodePoint()))return this.consumeToken();if(-1===a)return this.consumeToken()}break;case 58:return LA;case 59:return OA;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),mA;break;case 64:if(UA(this.peekCodePoint(0),this.peekCodePoint(1),this.peekCodePoint(2)))return B=this.consumeName(),{type:N.AT_KEYWORD_TOKEN,value:B};break;case 91:return vA;case 92:if(uA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case 93:return DA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),hA;break;case 123:return pA;case 125:return NA;case 117:case 85:var Q=this.peekCodePoint(0),w=this.peekCodePoint(1);return 43!==Q||!aA(w)&&63!==w||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),dA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),HA;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),fA;break;case-1:return SA}return cA(A)?(this.consumeWhiteSpace(),bA):iA(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):QA(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:N.DELIM_TOKEN,value:c(A)}},yA.prototype.consumeCodePoint=function(){var A=this._value.shift();return void 0===A?-1:A},yA.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},yA.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},yA.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();aA(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var t=!1;63===e&&A.length<6;)A.push(e),e=this.consumeCodePoint(),t=!0;if(t){var r=parseInt(c.apply(void 0,A.map(function(A){return 63===A?48:A})),16),n=parseInt(c.apply(void 0,A.map(function(A){return 63===A?70:A})),16);return{type:N.UNICODE_RANGE_TOKEN,start:r,end:n}}var B=parseInt(c.apply(void 0,A),16);if(45===this.peekCodePoint(0)&&aA(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var s=[];aA(e)&&s.length<6;)s.push(e),e=this.consumeCodePoint();return n=parseInt(c.apply(void 0,s),16),{type:N.UNICODE_RANGE_TOKEN,start:B,end:n}}return{type:N.UNICODE_RANGE_TOKEN,start:B,end:B}},yA.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return"url"===A.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:N.FUNCTION_TOKEN,value:A}):{type:N.IDENT_TOKEN,value:A}},yA.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:N.URL_TOKEN,value:""};var e,t=this.peekCodePoint(0);if(39===t||34===t){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===N.STRING_TOKEN&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:N.URL_TOKEN,value:r.value}):(this.consumeBadUrlRemnants(),IA)}for(;;){var n=this.consumeCodePoint();if(-1===n||41===n)return{type:N.URL_TOKEN,value:c.apply(void 0,A)};if(cA(n))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:N.URL_TOKEN,value:c.apply(void 0,A)}):(this.consumeBadUrlRemnants(),IA);if(34===n||39===n||40===n||0<=(e=n)&&e<=8||11===e||14<=e&&e<=31||127===e)return this.consumeBadUrlRemnants(),IA;if(92===n){if(!uA(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),IA;A.push(this.consumeEscapedCodePoint())}else A.push(n)}},yA.prototype.consumeWhiteSpace=function(){for(;cA(this.peekCodePoint(0));)this.consumeCodePoint()},yA.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(41===A||-1===A)return;uA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},yA.prototype.consumeStringSlice=function(A){for(var e="";0<A;){var t=Math.min(6e4,A);e+=c.apply(void 0,this._value.splice(0,t)),A-=t}return this._value.shift(),e},yA.prototype.consumeStringToken=function(A){for(var e="",t=0;;){var r=this._value[t];if(-1===r||void 0===r||r===A)return e+=this.consumeStringSlice(t),{type:N.STRING_TOKEN,value:e};if(10===r)return this._value.splice(0,t),TA;if(92===r){var n=this._value[t+1];-1!==n&&void 0!==n&&(10===n?(e+=this.consumeStringSlice(t),t=-1,this._value.shift()):uA(r,n)&&(e+=this.consumeStringSlice(t),e+=c(this.consumeEscapedCodePoint()),t=-1))}t++}},yA.prototype.consumeNumber=function(){var A=[],e=4,t=this.peekCodePoint(0);for(43!==t&&45!==t||A.push(this.consumeCodePoint());iA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===t&&iA(r))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;iA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0),r=this.peekCodePoint(1);var n=this.peekCodePoint(2);if((69===t||101===t)&&((43===r||45===r)&&iA(n)||iA(r)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;iA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[function(A){var e=0,t=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(t=-1),e++);for(var r=[];iA(A[e]);)r.push(A[e++]);var n=r.length?parseInt(c.apply(void 0,r),10):0;46===A[e]&&e++;for(var B=[];iA(A[e]);)B.push(A[e++]);var s=B.length,o=s?parseInt(c.apply(void 0,B),10):0;69!==A[e]&&101!==A[e]||e++;var i=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(i=-1),e++);for(var a=[];iA(A[e]);)a.push(A[e++]);var Q=a.length?parseInt(c.apply(void 0,a),10):0;return t*(n+o*Math.pow(10,-s))*Math.pow(10,i*Q)}(A),e]},yA.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],t=A[1],r=this.peekCodePoint(0);if(UA(r,this.peekCodePoint(1),this.peekCodePoint(2))){var n=this.consumeName();return{type:N.DIMENSION_TOKEN,number:e,flags:t,unit:n}}return 37===r?(this.consumeCodePoint(),{type:N.PERCENTAGE_TOKEN,number:e,flags:t}):{type:N.NUMBER_TOKEN,number:e,flags:t}},yA.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(aA(A)){for(var e=c(A);aA(this.peekCodePoint(0))&&e.length<6;)e+=c(this.consumeCodePoint());cA(this.peekCodePoint(0))&&this.consumeCodePoint();var t=parseInt(e,16);return 0===t||55296<=t&&t<=57343||1114111<t?65533:t}return-1===A?65533:A},yA.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(wA(e))A+=c(e);else{if(!uA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),A;A+=c(this.consumeEscapedCodePoint())}}},yA);function yA(){this._value=[]}var _A=(PA.create=function(A){var e=new MA;return e.write(A),new PA(e.read())},PA.parseValue=function(A){return PA.create(A).parseComponentValue()},PA.parseValues=function(A){return PA.create(A).parseComponentValues()},PA.prototype.parseComponentValue=function(){for(var A=this.consumeToken();A.type===N.WHITESPACE_TOKEN;)A=this.consumeToken();if(A.type===N.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);for(var e=this.consumeComponentValue();(A=this.consumeToken()).type===N.WHITESPACE_TOKEN;);if(A.type===N.EOF_TOKEN)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},PA.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(e.type===N.EOF_TOKEN)return A;A.push(e),A.push()}},PA.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case N.LEFT_CURLY_BRACKET_TOKEN:case N.LEFT_SQUARE_BRACKET_TOKEN:case N.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(A.type);case N.FUNCTION_TOKEN:return this.consumeFunction(A)}return A},PA.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},t=this.consumeToken();;){if(t.type===N.EOF_TOKEN||Be(t,A))return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue()),t=this.consumeToken()}},PA.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:N.FUNCTION};;){var t=this.consumeToken();if(t.type===N.EOF_TOKEN||t.type===N.RIGHT_PARENTHESIS_TOKEN)return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue())}},PA.prototype.consumeToken=function(){var A=this._tokens.shift();return void 0===A?SA:A},PA.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},PA);function PA(A){this._tokens=A}function xA(A){return A.type===N.DIMENSION_TOKEN}function VA(A){return A.type===N.NUMBER_TOKEN}function zA(A){return A.type===N.IDENT_TOKEN}function XA(A){return A.type===N.STRING_TOKEN}function JA(A,e){return zA(A)&&A.value===e}function GA(A){return A.type!==N.WHITESPACE_TOKEN}function kA(A){return A.type!==N.WHITESPACE_TOKEN&&A.type!==N.COMMA_TOKEN}function WA(A){var e=[],t=[];return A.forEach(function(A){if(A.type===N.COMMA_TOKEN){if(0===t.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(t),void(t=[])}A.type!==N.WHITESPACE_TOKEN&&t.push(A)}),t.length&&e.push(t),e}function YA(A){return A.type===N.NUMBER_TOKEN||A.type===N.DIMENSION_TOKEN}function qA(A){return A.type===N.PERCENTAGE_TOKEN||YA(A)}function ZA(A){return 1<A.length?[A[0],A[1]]:[A[0]]}function jA(A,e,t){var r=A[0],n=A[1];return[ae(r,e),ae(void 0!==n?n:r,t)]}function $A(A){return A.type===N.DIMENSION_TOKEN&&("deg"===A.unit||"grad"===A.unit||"rad"===A.unit||"turn"===A.unit)}function Ae(A){switch(A.filter(zA).map(function(A){return A.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[se,se];case"to top":case"bottom":return Qe(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[se,ie];case"to right":case"left":return Qe(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ie,ie];case"to bottom":case"top":return Qe(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ie,se];case"to left":case"right":return Qe(270)}return 0}function ee(A){return 0==(255&A)}function te(A){var e=255&A,t=255&A>>8,r=255&A>>16,n=255&A>>24;return e<255?"rgba("+n+","+r+","+t+","+e/255+")":"rgb("+n+","+r+","+t+")"}function re(A,e){if(A.type===N.NUMBER_TOKEN)return A.number;if(A.type!==N.PERCENTAGE_TOKEN)return 0;var t=3===e?1:255;return 3===e?A.number/100*t:Math.round(A.number/100*t)}function ne(A){var e=A.filter(kA);if(3===e.length){var t=e.map(re),r=t[0],n=t[1],B=t[2];return ue(r,n,B,1)}if(4!==e.length)return 0;var s=e.map(re),o=(r=s[0],n=s[1],B=s[2],s[3]);return ue(r,n,B,o)}var Be=function(A,e){return e===N.LEFT_CURLY_BRACKET_TOKEN&&A.type===N.RIGHT_CURLY_BRACKET_TOKEN||e===N.LEFT_SQUARE_BRACKET_TOKEN&&A.type===N.RIGHT_SQUARE_BRACKET_TOKEN||e===N.LEFT_PARENTHESIS_TOKEN&&A.type===N.RIGHT_PARENTHESIS_TOKEN},se={type:N.NUMBER_TOKEN,number:0,flags:4},oe={type:N.PERCENTAGE_TOKEN,number:50,flags:4},ie={type:N.PERCENTAGE_TOKEN,number:100,flags:4},ae=function(A,e){if(A.type===N.PERCENTAGE_TOKEN)return A.number/100*e;if(xA(A))switch(A.unit){case"rem":case"em":return 16*A.number;case"px":default:return A.number}return A.number},ce=function(A){if(A.type===N.DIMENSION_TOKEN)switch(A.unit){case"deg":return Math.PI*A.number/180;case"grad":return Math.PI/200*A.number;case"rad":return A.number;case"turn":return 2*Math.PI*A.number}throw new Error("Unsupported angle type")},Qe=function(A){return Math.PI*A/180},we=function(A){if(A.type===N.FUNCTION){var e=he[A.name];if(void 0===e)throw new Error('Attempting to parse an unsupported color function "'+A.name+'"');return e(A.values)}if(A.type===N.HASH_TOKEN){if(3===A.value.length){var t=A.value.substring(0,1),r=A.value.substring(1,2),n=A.value.substring(2,3);return ue(parseInt(t+t,16),parseInt(r+r,16),parseInt(n+n,16),1)}if(4===A.value.length){t=A.value.substring(0,1),r=A.value.substring(1,2),n=A.value.substring(2,3);var B=A.value.substring(3,4);return ue(parseInt(t+t,16),parseInt(r+r,16),parseInt(n+n,16),parseInt(B+B,16)/255)}if(6===A.value.length)return t=A.value.substring(0,2),r=A.value.substring(2,4),n=A.value.substring(4,6),ue(parseInt(t,16),parseInt(r,16),parseInt(n,16),1);if(8===A.value.length)return t=A.value.substring(0,2),r=A.value.substring(2,4),n=A.value.substring(4,6),B=A.value.substring(6,8),ue(parseInt(t,16),parseInt(r,16),parseInt(n,16),parseInt(B,16)/255)}if(A.type===N.IDENT_TOKEN){var s=He[A.value.toUpperCase()];if(void 0!==s)return s}return He.TRANSPARENT},ue=function(A,e,t,r){return(A<<24|e<<16|t<<8|Math.round(255*r)<<0)>>>0};function Ue(A,e,t){return t<0&&(t+=1),1<=t&&(t-=1),t<1/6?(e-A)*t*6+A:t<.5?e:t<2/3?6*(e-A)*(2/3-t)+A:A}function le(A){var e=A.filter(kA),t=e[0],r=e[1],n=e[2],B=e[3],s=(t.type===N.NUMBER_TOKEN?Qe(t.number):ce(t))/(2*Math.PI),o=qA(r)?r.number/100:0,i=qA(n)?n.number/100:0,a=void 0!==B&&qA(B)?ae(B,1):1;if(0==o)return ue(255*i,255*i,255*i,1);var c=i<=.5?i*(1+o):i+o-i*o,Q=2*i-c,w=Ue(Q,c,s+1/3),u=Ue(Q,c,s),U=Ue(Q,c,s-1/3);return ue(255*w,255*u,255*U,a)}var Ce,ge,Ee,Fe,he={hsl:le,hsla:le,rgb:ne,rgba:ne},He={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};function de(A){var e=we(A[0]),t=A[1];return t&&qA(t)?{color:e,stop:t}:{color:e,stop:null}}function fe(A,e){var t=A[0],r=A[A.length-1];null===t.stop&&(t.stop=se),null===r.stop&&(r.stop=ie);for(var n=[],B=0,s=0;s<A.length;s++){var o=A[s].stop;if(null!==o){var i=ae(o,e);B<i?n.push(i):n.push(B),B=i}else n.push(null)}var a=null;for(s=0;s<n.length;s++){var c=n[s];if(null===c)null===a&&(a=s);else if(null!==a){for(var Q=s-a,w=(c-n[a-1])/(1+Q),u=1;u<=Q;u++)n[a+u-1]=w*u;a=null}}return A.map(function(A,t){return{color:A.color,stop:Math.max(Math.min(1,n[t]/e),0)}})}function pe(A,e){return Math.sqrt(A*A+e*e)}function Ne(A,e,t,r,n){return[[0,0],[0,e],[A,0],[A,e]].reduce(function(A,e){var B=e[0],s=e[1],o=pe(t-B,r-s);return(n?o<A.optimumDistance:o>A.optimumDistance)?{optimumCorner:e,optimumDistance:o}:A},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner}function Ke(A){var e=Qe(180),t=[];return WA(A).forEach(function(A,r){if(0===r){var n=A[0];if(n.type===N.IDENT_TOKEN&&-1!==["top","left","right","bottom"].indexOf(n.value))return void(e=Ae(A));if($A(n))return void(e=(ce(n)+Qe(270))%Qe(360))}var B=de(A);t.push(B)}),{angle:e,stops:t,type:Pe.LINEAR_GRADIENT}}function Ie(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]}(ge=Ce||(Ce={}))[ge.VALUE=0]="VALUE",ge[ge.LIST=1]="LIST",ge[ge.IDENT_VALUE=2]="IDENT_VALUE",ge[ge.TYPE_VALUE=3]="TYPE_VALUE",ge[ge.TOKEN_VALUE=4]="TOKEN_VALUE",(Fe=Ee||(Ee={}))[Fe.BORDER_BOX=0]="BORDER_BOX",Fe[Fe.PADDING_BOX=1]="PADDING_BOX";var Te={name:"background-clip",initialValue:"border-box",prefix:!(Fe[Fe.CONTENT_BOX=2]="CONTENT_BOX"),type:Ce.LIST,parse:function(A){return A.map(function(A){if(zA(A))switch(A.value){case"padding-box":return Ee.PADDING_BOX;case"content-box":return Ee.CONTENT_BOX}return Ee.BORDER_BOX})}},me={name:"background-color",initialValue:"transparent",prefix:!1,type:Ce.TYPE_VALUE,format:"color"},Re=function(A,e,t,r,n){var B="http://www.w3.org/2000/svg",s=document.createElementNS(B,"svg"),o=document.createElementNS(B,"foreignObject");return s.setAttributeNS(null,"width",A.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(n),s},Le=function(A){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(A))})},Oe={get SUPPORT_RANGE_BOUNDS(){var A=function(A){if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var t=A.createElement("boundtest");t.style.height="123px",t.style.display="block",A.body.appendChild(t),e.selectNode(t);var r=e.getBoundingClientRect(),n=Math.round(r.height);if(A.body.removeChild(t),123===n)return!0}}return!1}(document);return Object.defineProperty(Oe,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=function(A){var e=new Image,t=A.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch(A){return!1}return!0}(document);return Object.defineProperty(Oe,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A="function"==typeof Array.from&&"function"==typeof window.fetch?function(A){var e=A.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var n=new Image,B=e.toDataURL();n.src=B;var s=Re(t,t,0,0,n);return r.fillStyle="red",r.fillRect(0,0,t,t),Le(s).then(function(e){r.drawImage(e,0,0);var n=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var s=A.createElement("div");return s.style.backgroundImage="url("+B+")",s.style.height="100px",Ie(n)?Le(Re(t,t,0,0,s)):Promise.reject(!1)}).then(function(A){return r.drawImage(A,0,0),Ie(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Oe,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=void 0!==(new Image).crossOrigin;return Object.defineProperty(Oe,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Oe,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Oe,"SUPPORT_CORS_XHR",{value:A}),A}},ve=(De.prototype.debug=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console||this.info.apply(this,A))},De.prototype.getTime=function(){return Date.now()-this.start},De.create=function(A){De.instances[A.id]=new De(A)},De.destroy=function(A){delete De.instances[A]},De.getInstance=function(A){var e=De.instances[A];if(void 0===e)throw new Error("No logger instance found with id "+A);return e},De.prototype.info=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console},De.prototype.error=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console||this.info.apply(this,A))},De.instances={},De);function De(A){var e=A.id,t=A.enabled;this.id=e,this.enabled=t,this.start=Date.now()}var be=(Se.create=function(A,e){return Se._caches[A]=new Me(A,e)},Se.destroy=function(A){delete Se._caches[A]},Se.open=function(A){var e=Se._caches[A];if(void 0!==e)return e;throw new Error('Cache with key "'+A+'" not found')},Se.getOrigin=function(A){var e=Se._link;return e?(e.href=A,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},Se.isSameOrigin=function(A){return Se.getOrigin(A)===Se._origin},Se.setContext=function(A){Se._link=A.document.createElement("a"),Se._origin=Se.getOrigin(A.location.href)},Se.getInstance=function(){var A=Se._current;if(null===A)throw new Error("No cache instance attached");return A},Se.attachInstance=function(A){Se._current=A},Se.detachInstance=function(){Se._current=null},Se._caches={},Se._origin="about:blank",Se._current=null,Se);function Se(){}var Me=(ye.prototype.addImage=function(A){var e=Promise.resolve();return this.has(A)||(je(A)||Ye(A))&&(this._cache[A]=this.loadImage(A)),e},ye.prototype.match=function(A){return this._cache[A]},ye.prototype.loadImage=function(A){return n(this,void 0,void 0,function(){var e,t,r,n,s=this;return B(this,function(B){switch(B.label){case 0:return e=be.isSameOrigin(A),t=!qe(A)&&!0===this._options.useCORS&&Oe.SUPPORT_CORS_IMAGES&&!e,r=!qe(A)&&!e&&"string"==typeof this._options.proxy&&Oe.SUPPORT_CORS_XHR&&!t,e||!1!==this._options.allowTaint||qe(A)||r||t?(n=A,r?[4,this.proxy(n)]:[3,2]):[2];case 1:n=B.sent(),B.label=2;case 2:return ve.getInstance(this.id).debug("Added image "+A.substring(0,256)),[4,new Promise(function(A,e){var r=new Image;r.onload=function(){return A(r)},r.onerror=e,(Ze(n)||t)&&(r.crossOrigin="anonymous"),r.src=n,!0===r.complete&&setTimeout(function(){return A(r)},500),0<s._options.imageTimeout&&setTimeout(function(){return e("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,B.sent()]}})})},ye.prototype.has=function(A){return void 0!==this._cache[A]},ye.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},ye.prototype.proxy=function(A){var e=this,t=this._options.proxy;if(!t)throw new Error("No proxy defined");var r=A.substring(0,256);return new Promise(function(n,B){var s=Oe.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;if(o.onload=function(){if(200===o.status)if("text"==s)n(o.response);else{var A=new FileReader;A.addEventListener("load",function(){return n(A.result)},!1),A.addEventListener("error",function(A){return B(A)},!1),A.readAsDataURL(o.response)}else B("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=B,o.open("GET",t+"?url="+encodeURIComponent(A)+"&responseType="+s),"text"!=s&&o instanceof XMLHttpRequest&&(o.responseType=s),e._options.imageTimeout){var i=e._options.imageTimeout;o.timeout=i,o.ontimeout=function(){return B("Timed out ("+i+"ms) proxying "+r)}}o.send()})},ye);function ye(A,e){this.id=A,this._options=e,this._cache={}}function _e(A){var e=Ve.CIRCLE,t=Xe.FARTHEST_CORNER,r=[],n=[];return WA(A).forEach(function(A,B){var s=!0;if(0===B?s=A.reduce(function(A,e){if(zA(e))switch(e.value){case"center":return n.push(oe),!1;case"top":case"left":return n.push(se),!1;case"right":case"bottom":return n.push(ie),!1}else if(qA(e)||YA(e))return n.push(e),!1;return A},s):1===B&&(s=A.reduce(function(A,r){if(zA(r))switch(r.value){case"circle":return e=Ve.CIRCLE,!1;case nt:return e=Ve.ELLIPSE,!1;case Bt:case At:return t=Xe.CLOSEST_SIDE,!1;case et:return t=Xe.FARTHEST_SIDE,!1;case tt:return t=Xe.CLOSEST_CORNER,!1;case"cover":case rt:return t=Xe.FARTHEST_CORNER,!1}else if(YA(r)||qA(r))return Array.isArray(t)||(t=[]),t.push(r),!1;return A},s)),s){var o=de(A);r.push(o)}}),{size:t,shape:e,stops:r,position:n,type:Pe.RADIAL_GRADIENT}}var Pe,xe,Ve,ze,Xe,Je,Ge=/^data:image\/svg\+xml/i,ke=/^data:image\/.*;base64,/i,We=/^data:image\/.*/i,Ye=function(A){return Oe.SUPPORT_SVG_DRAWING||!$e(A)},qe=function(A){return We.test(A)},Ze=function(A){return ke.test(A)},je=function(A){return"blob"===A.substr(0,4)},$e=function(A){return"svg"===A.substr(-3).toLowerCase()||Ge.test(A)},At="closest-side",et="farthest-side",tt="closest-corner",rt="farthest-corner",nt="ellipse",Bt="contain";(xe=Pe||(Pe={}))[xe.URL=0]="URL",xe[xe.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",xe[xe.RADIAL_GRADIENT=2]="RADIAL_GRADIENT",(ze=Ve||(Ve={}))[ze.CIRCLE=0]="CIRCLE",ze[ze.ELLIPSE=1]="ELLIPSE",(Je=Xe||(Xe={}))[Je.CLOSEST_SIDE=0]="CLOSEST_SIDE",Je[Je.FARTHEST_SIDE=1]="FARTHEST_SIDE",Je[Je.CLOSEST_CORNER=2]="CLOSEST_CORNER",Je[Je.FARTHEST_CORNER=3]="FARTHEST_CORNER";var st,ot,it=function(A){if(A.type===N.URL_TOKEN){var e={url:A.value,type:Pe.URL};return be.getInstance().addImage(A.value),e}if(A.type!==N.FUNCTION)throw new Error("Unsupported image type");var t=at[A.name];if(void 0===t)throw new Error('Attempting to parse an unsupported image function "'+A.name+'"');return t(A.values)},at={"linear-gradient":function(A){var e=Qe(180),t=[];return WA(A).forEach(function(A,r){if(0===r){var n=A[0];if(n.type===N.IDENT_TOKEN&&"to"===n.value)return void(e=Ae(A));if($A(n))return void(e=ce(n))}var B=de(A);t.push(B)}),{angle:e,stops:t,type:Pe.LINEAR_GRADIENT}},"-moz-linear-gradient":Ke,"-ms-linear-gradient":Ke,"-o-linear-gradient":Ke,"-webkit-linear-gradient":Ke,"radial-gradient":function(A){var e=Ve.CIRCLE,t=Xe.FARTHEST_CORNER,r=[],n=[];return WA(A).forEach(function(A,B){var s=!0;if(0===B){var o=!1;s=A.reduce(function(A,r){if(o)if(zA(r))switch(r.value){case"center":return n.push(oe),A;case"top":case"left":return n.push(se),A;case"right":case"bottom":return n.push(ie),A}else(qA(r)||YA(r))&&n.push(r);else if(zA(r))switch(r.value){case"circle":return e=Ve.CIRCLE,!1;case nt:return e=Ve.ELLIPSE,!1;case"at":return!(o=!0);case At:return t=Xe.CLOSEST_SIDE,!1;case"cover":case et:return t=Xe.FARTHEST_SIDE,!1;case Bt:case tt:return t=Xe.CLOSEST_CORNER,!1;case rt:return t=Xe.FARTHEST_CORNER,!1}else if(YA(r)||qA(r))return Array.isArray(t)||(t=[]),t.push(r),!1;return A},s)}if(s){var i=de(A);r.push(i)}}),{size:t,shape:e,stops:r,position:n,type:Pe.RADIAL_GRADIENT}},"-moz-radial-gradient":_e,"-ms-radial-gradient":_e,"-o-radial-gradient":_e,"-webkit-radial-gradient":_e,"-webkit-gradient":function(A){var e=Qe(180),t=[],r=Pe.LINEAR_GRADIENT,n=Ve.CIRCLE,B=Xe.FARTHEST_CORNER;return WA(A).forEach(function(A,e){var n=A[0];if(0===e){if(zA(n)&&"linear"===n.value)return void(r=Pe.LINEAR_GRADIENT);if(zA(n)&&"radial"===n.value)return void(r=Pe.RADIAL_GRADIENT)}if(n.type===N.FUNCTION)if("from"===n.name){var B=we(n.values[0]);t.push({stop:se,color:B})}else if("to"===n.name)B=we(n.values[0]),t.push({stop:ie,color:B});else if("color-stop"===n.name){var s=n.values.filter(kA);if(2===s.length){B=we(s[1]);var o=s[0];VA(o)&&t.push({stop:{type:N.PERCENTAGE_TOKEN,number:100*o.number,flags:o.flags},color:B})}}}),r===Pe.LINEAR_GRADIENT?{angle:(e+Qe(180))%Qe(360),stops:t,type:r}:{size:B,shape:n,stops:t,position:[],type:r}}},ct={name:"background-image",initialValue:"none",type:Ce.LIST,prefix:!1,parse:function(A){if(0===A.length)return[];var e=A[0];return e.type===N.IDENT_TOKEN&&"none"===e.value?[]:A.filter(function(A){return kA(A)&&function(A){return A.type!==N.FUNCTION||at[A.name]}(A)}).map(it)}},Qt={name:"background-origin",initialValue:"border-box",prefix:!1,type:Ce.LIST,parse:function(A){return A.map(function(A){if(zA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},wt={name:"background-position",initialValue:"0% 0%",type:Ce.LIST,prefix:!1,parse:function(A){return WA(A).map(function(A){return A.filter(qA)}).map(ZA)}};(ot=st||(st={}))[ot.REPEAT=0]="REPEAT",ot[ot.NO_REPEAT=1]="NO_REPEAT",ot[ot.REPEAT_X=2]="REPEAT_X";var ut,Ut,lt={name:"background-repeat",initialValue:"repeat",prefix:!(ot[ot.REPEAT_Y=3]="REPEAT_Y"),type:Ce.LIST,parse:function(A){return WA(A).map(function(A){return A.filter(zA).map(function(A){return A.value}).join(" ")}).map(Ct)}},Ct=function(A){switch(A){case"no-repeat":return st.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return st.REPEAT_X;case"repeat-y":case"no-repeat repeat":return st.REPEAT_Y;case"repeat":default:return st.REPEAT}};function gt(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:Ce.TYPE_VALUE,format:"color"}}function Et(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:Ce.LIST,parse:function(A){return ZA(A.filter(qA))}}}(Ut=ut||(ut={})).AUTO="auto",Ut.CONTAIN="contain";var Ft,ht,Ht={name:"background-size",initialValue:"0",prefix:!(Ut.COVER="cover"),type:Ce.LIST,parse:function(A){return WA(A).map(function(A){return A.filter(dt)})}},dt=function(A){return zA(A)||qA(A)},ft=gt("top"),pt=gt("right"),Nt=gt("bottom"),Kt=gt("left"),It=Et("top-left"),Tt=Et("top-right"),mt=Et("bottom-right"),Rt=Et("bottom-left");function Lt(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"none":return Ft.NONE}return Ft.SOLID}}}function Ot(A){return{name:"border-"+A+"-width",initialValue:"0",type:Ce.VALUE,prefix:!1,parse:function(A){return xA(A)?A.number:0}}}(ht=Ft||(Ft={}))[ht.NONE=0]="NONE",ht[ht.SOLID=1]="SOLID";var vt,Dt,bt=Lt("top"),St=Lt("right"),Mt=Lt("bottom"),yt=Lt("left"),_t=Ot("top"),Pt=Ot("right"),xt=Ot("bottom"),Vt=Ot("left"),zt={name:"color",initialValue:"transparent",prefix:!1,type:Ce.TYPE_VALUE,format:"color"},Xt={name:"display",initialValue:"inline-block",prefix:!1,type:Ce.LIST,parse:function(A){return A.filter(zA).reduce(function(A,e){return A|Jt(e.value)},0)}},Jt=function(A){switch(A){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};(Dt=vt||(vt={}))[Dt.NONE=0]="NONE",Dt[Dt.LEFT=1]="LEFT",Dt[Dt.RIGHT=2]="RIGHT",Dt[Dt.INLINE_START=3]="INLINE_START";var Gt,kt,Wt,Yt,qt={name:"float",initialValue:"none",prefix:!(Dt[Dt.INLINE_END=4]="INLINE_END"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"left":return vt.LEFT;case"right":return vt.RIGHT;case"inline-start":return vt.INLINE_START;case"inline-end":return vt.INLINE_END}return vt.NONE}},Zt={name:"letter-spacing",initialValue:"0",prefix:!1,type:Ce.VALUE,parse:function(A){return A.type===N.IDENT_TOKEN&&"normal"===A.value?0:A.type===N.NUMBER_TOKEN?A.number:A.type===N.DIMENSION_TOKEN?A.number:0}},jt={name:"line-break",initialValue:(kt=Gt||(Gt={})).NORMAL="normal",prefix:!(kt.STRICT="strict"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"strict":return Gt.STRICT;case"normal":default:return Gt.NORMAL}}},$t={name:"line-height",initialValue:"normal",prefix:!1,type:Ce.TOKEN_VALUE},Ar={name:"list-style-image",initialValue:"none",type:Ce.VALUE,prefix:!1,parse:function(A){return A.type===N.IDENT_TOKEN&&"none"===A.value?null:it(A)}};(Yt=Wt||(Wt={}))[Yt.INSIDE=0]="INSIDE";var er,tr,rr={name:"list-style-position",initialValue:"outside",prefix:!(Yt[Yt.OUTSIDE=1]="OUTSIDE"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"inside":return Wt.INSIDE;case"outside":default:return Wt.OUTSIDE}}};function nr(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:Ce.TOKEN_VALUE}}(tr=er||(er={}))[tr.NONE=-1]="NONE",tr[tr.DISC=0]="DISC",tr[tr.CIRCLE=1]="CIRCLE",tr[tr.SQUARE=2]="SQUARE",tr[tr.DECIMAL=3]="DECIMAL",tr[tr.CJK_DECIMAL=4]="CJK_DECIMAL",tr[tr.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",tr[tr.LOWER_ROMAN=6]="LOWER_ROMAN",tr[tr.UPPER_ROMAN=7]="UPPER_ROMAN",tr[tr.LOWER_GREEK=8]="LOWER_GREEK",tr[tr.LOWER_ALPHA=9]="LOWER_ALPHA",tr[tr.UPPER_ALPHA=10]="UPPER_ALPHA",tr[tr.ARABIC_INDIC=11]="ARABIC_INDIC",tr[tr.ARMENIAN=12]="ARMENIAN",tr[tr.BENGALI=13]="BENGALI",tr[tr.CAMBODIAN=14]="CAMBODIAN",tr[tr.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",tr[tr.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",tr[tr.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",tr[tr.DEVANAGARI=18]="DEVANAGARI",tr[tr.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",tr[tr.GEORGIAN=20]="GEORGIAN",tr[tr.GUJARATI=21]="GUJARATI",tr[tr.GURMUKHI=22]="GURMUKHI",tr[tr.HEBREW=22]="HEBREW",tr[tr.HIRAGANA=23]="HIRAGANA",tr[tr.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",tr[tr.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",tr[tr.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",tr[tr.KANNADA=27]="KANNADA",tr[tr.KATAKANA=28]="KATAKANA",tr[tr.KATAKANA_IROHA=29]="KATAKANA_IROHA",tr[tr.KHMER=30]="KHMER",tr[tr.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",tr[tr.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",tr[tr.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",tr[tr.LAO=34]="LAO",tr[tr.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",tr[tr.MALAYALAM=36]="MALAYALAM",tr[tr.MONGOLIAN=37]="MONGOLIAN",tr[tr.MYANMAR=38]="MYANMAR",tr[tr.ORIYA=39]="ORIYA",tr[tr.PERSIAN=40]="PERSIAN",tr[tr.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",tr[tr.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",tr[tr.TAMIL=43]="TAMIL",tr[tr.TELUGU=44]="TELUGU",tr[tr.THAI=45]="THAI",tr[tr.TIBETAN=46]="TIBETAN",tr[tr.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",tr[tr.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",tr[tr.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",tr[tr.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN";var Br,sr,or={name:"list-style-type",initialValue:"none",prefix:!(tr[tr.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"disc":return er.DISC;case"circle":return er.CIRCLE;case"square":return er.SQUARE;case"decimal":return er.DECIMAL;case"cjk-decimal":return er.CJK_DECIMAL;case"decimal-leading-zero":return er.DECIMAL_LEADING_ZERO;case"lower-roman":return er.LOWER_ROMAN;case"upper-roman":return er.UPPER_ROMAN;case"lower-greek":return er.LOWER_GREEK;case"lower-alpha":return er.LOWER_ALPHA;case"upper-alpha":return er.UPPER_ALPHA;case"arabic-indic":return er.ARABIC_INDIC;case"armenian":return er.ARMENIAN;case"bengali":return er.BENGALI;case"cambodian":return er.CAMBODIAN;case"cjk-earthly-branch":return er.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return er.CJK_HEAVENLY_STEM;case"cjk-ideographic":return er.CJK_IDEOGRAPHIC;case"devanagari":return er.DEVANAGARI;case"ethiopic-numeric":return er.ETHIOPIC_NUMERIC;case"georgian":return er.GEORGIAN;case"gujarati":return er.GUJARATI;case"gurmukhi":return er.GURMUKHI;case"hebrew":return er.HEBREW;case"hiragana":return er.HIRAGANA;case"hiragana-iroha":return er.HIRAGANA_IROHA;case"japanese-formal":return er.JAPANESE_FORMAL;case"japanese-informal":return er.JAPANESE_INFORMAL;case"kannada":return er.KANNADA;case"katakana":return er.KATAKANA;case"katakana-iroha":return er.KATAKANA_IROHA;case"khmer":return er.KHMER;case"korean-hangul-formal":return er.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return er.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return er.KOREAN_HANJA_INFORMAL;case"lao":return er.LAO;case"lower-armenian":return er.LOWER_ARMENIAN;case"malayalam":return er.MALAYALAM;case"mongolian":return er.MONGOLIAN;case"myanmar":return er.MYANMAR;case"oriya":return er.ORIYA;case"persian":return er.PERSIAN;case"simp-chinese-formal":return er.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return er.SIMP_CHINESE_INFORMAL;case"tamil":return er.TAMIL;case"telugu":return er.TELUGU;case"thai":return er.THAI;case"tibetan":return er.TIBETAN;case"trad-chinese-formal":return er.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return er.TRAD_CHINESE_INFORMAL;case"upper-armenian":return er.UPPER_ARMENIAN;case"disclosure-open":return er.DISCLOSURE_OPEN;case"disclosure-closed":return er.DISCLOSURE_CLOSED;case"none":default:return er.NONE}}},ir=nr("top"),ar=nr("right"),cr=nr("bottom"),Qr=nr("left");function wr(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:Ce.TYPE_VALUE,format:"length-percentage"}}(sr=Br||(Br={}))[sr.VISIBLE=0]="VISIBLE",sr[sr.HIDDEN=1]="HIDDEN",sr[sr.SCROLL=2]="SCROLL";var ur,Ur,lr,Cr,gr={name:"overflow",initialValue:"visible",prefix:!(sr[sr.AUTO=3]="AUTO"),type:Ce.LIST,parse:function(A){return A.filter(zA).map(function(A){switch(A.value){case"hidden":return Br.HIDDEN;case"scroll":return Br.SCROLL;case"auto":return Br.AUTO;case"visible":default:return Br.VISIBLE}})}},Er={name:"overflow-wrap",initialValue:(Ur=ur||(ur={})).NORMAL="normal",prefix:!(Ur.BREAK_WORD="break-word"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"break-word":return ur.BREAK_WORD;case"normal":default:return ur.NORMAL}}},Fr=wr("top"),hr=wr("right"),Hr=wr("bottom"),dr=wr("left");(Cr=lr||(lr={}))[Cr.LEFT=0]="LEFT",Cr[Cr.CENTER=1]="CENTER";var fr,pr,Nr={name:"text-align",initialValue:"left",prefix:!(Cr[Cr.RIGHT=2]="RIGHT"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"right":return lr.RIGHT;case"center":case"justify":return lr.CENTER;case"left":default:return lr.LEFT}}};(pr=fr||(fr={}))[pr.STATIC=0]="STATIC",pr[pr.RELATIVE=1]="RELATIVE",pr[pr.ABSOLUTE=2]="ABSOLUTE",pr[pr.FIXED=3]="FIXED";var Kr,Ir,Tr={name:"position",initialValue:"static",prefix:!(pr[pr.STICKY=4]="STICKY"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"relative":return fr.RELATIVE;case"absolute":return fr.ABSOLUTE;case"fixed":return fr.FIXED;case"sticky":return fr.STICKY}return fr.STATIC}},mr={name:"text-shadow",initialValue:"none",type:Ce.LIST,prefix:!1,parse:function(A){return 1===A.length&&JA(A[0],"none")?[]:WA(A).map(function(A){for(var e={color:He.TRANSPARENT,offsetX:se,offsetY:se,blur:se},t=0,r=0;r<A.length;r++){var n=A[r];YA(n)?(0===t?e.offsetX=n:1===t?e.offsetY=n:e.blur=n,t++):e.color=we(n)}return e})}};(Ir=Kr||(Kr={}))[Ir.NONE=0]="NONE",Ir[Ir.LOWERCASE=1]="LOWERCASE",Ir[Ir.UPPERCASE=2]="UPPERCASE";var Rr,Lr,Or={name:"text-transform",initialValue:"none",prefix:!(Ir[Ir.CAPITALIZE=3]="CAPITALIZE"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"uppercase":return Kr.UPPERCASE;case"lowercase":return Kr.LOWERCASE;case"capitalize":return Kr.CAPITALIZE}return Kr.NONE}},vr={name:"transform",initialValue:"none",prefix:!0,type:Ce.VALUE,parse:function(A){if(A.type===N.IDENT_TOKEN&&"none"===A.value)return null;if(A.type!==N.FUNCTION)return null;var e=Dr[A.name];if(void 0===e)throw new Error('Attempting to parse an unsupported transform function "'+A.name+'"');return e(A.values)}},Dr={matrix:function(A){var e=A.filter(function(A){return A.type===N.NUMBER_TOKEN}).map(function(A){return A.number});return 6===e.length?e:null},matrix3d:function(A){var e=A.filter(function(A){return A.type===N.NUMBER_TOKEN}).map(function(A){return A.number}),t=e[0],r=e[1],n=(e[2],e[3],e[4]),B=e[5],s=(e[6],e[7],e[8],e[9],e[10],e[11],e[12]),o=e[13];return e[14],e[15],16===e.length?[t,r,n,B,s,o]:null}},br={type:N.PERCENTAGE_TOKEN,number:50,flags:4},Sr=[br,br],Mr={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:Ce.LIST,parse:function(A){var e=A.filter(qA);return 2!==e.length?Sr:[e[0],e[1]]}};(Lr=Rr||(Rr={}))[Lr.VISIBLE=0]="VISIBLE",Lr[Lr.HIDDEN=1]="HIDDEN";var yr,_r,Pr={name:"visible",initialValue:"none",prefix:!(Lr[Lr.COLLAPSE=2]="COLLAPSE"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"hidden":return Rr.HIDDEN;case"collapse":return Rr.COLLAPSE;case"visible":default:return Rr.VISIBLE}}};(_r=yr||(yr={})).NORMAL="normal",_r.BREAK_ALL="break-all";var xr,Vr,zr={name:"word-break",initialValue:"normal",prefix:!(_r.KEEP_ALL="keep-all"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"break-all":return yr.BREAK_ALL;case"keep-all":return yr.KEEP_ALL;case"normal":default:return yr.NORMAL}}},Xr={name:"z-index",initialValue:"auto",prefix:!1,type:Ce.VALUE,parse:function(A){if(A.type===N.IDENT_TOKEN)return{auto:!0,order:0};if(VA(A))return{auto:!1,order:A.number};throw new Error("Invalid z-index number parsed")}},Jr={name:"opacity",initialValue:"1",type:Ce.VALUE,prefix:!1,parse:function(A){return VA(A)?A.number:1}},Gr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:Ce.TYPE_VALUE,format:"color"},kr={name:"text-decoration-line",initialValue:"none",prefix:!1,type:Ce.LIST,parse:function(A){return A.filter(zA).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return 0!==A})}},Wr={name:"font-family",initialValue:"",prefix:!1,type:Ce.LIST,parse:function(A){var e=[],t=[];return A.forEach(function(A){switch(A.type){case N.IDENT_TOKEN:case N.STRING_TOKEN:e.push(A.value);break;case N.NUMBER_TOKEN:e.push(A.number.toString());break;case N.COMMA_TOKEN:t.push(e.join(" ")),e.length=0}}),e.length&&t.push(e.join(" ")),t.map(function(A){return-1===A.indexOf(" ")?A:"'"+A+"'"})}},Yr={name:"font-size",initialValue:"0",prefix:!1,type:Ce.TYPE_VALUE,format:"length"},qr={name:"font-weight",initialValue:"normal",type:Ce.VALUE,prefix:!1,parse:function(A){if(VA(A))return A.number;if(zA(A))switch(A.value){case"bold":return 700;case"normal":default:return 400}return 400}},Zr={name:"font-variant",initialValue:"none",type:Ce.LIST,prefix:!1,parse:function(A){return A.filter(zA).map(function(A){return A.value})}};function jr(A,e){return 0!=(A&e)}function $r(A,e,t){if(!A)return"";var r=A[Math.min(e,A.length-1)];return r?t?r.open:r.close:""}(Vr=xr||(xr={})).NORMAL="normal",Vr.ITALIC="italic";var An={name:"font-style",initialValue:"normal",prefix:!(Vr.OBLIQUE="oblique"),type:Ce.IDENT_VALUE,parse:function(A){switch(A){case"oblique":return xr.OBLIQUE;case"italic":return xr.ITALIC;case"normal":default:return xr.NORMAL}}},en={name:"content",initialValue:"none",type:Ce.LIST,prefix:!1,parse:function(A){if(0===A.length)return[];var e=A[0];return e.type===N.IDENT_TOKEN&&"none"===e.value?[]:A}},tn={name:"counter-increment",initialValue:"none",prefix:!0,type:Ce.LIST,parse:function(A){if(0===A.length)return null;var e=A[0];if(e.type===N.IDENT_TOKEN&&"none"===e.value)return null;for(var t=[],r=A.filter(GA),n=0;n<r.length;n++){var B=r[n],s=r[n+1];if(B.type===N.IDENT_TOKEN){var o=s&&VA(s)?s.number:1;t.push({counter:B.value,increment:o})}}return t}},rn={name:"counter-reset",initialValue:"none",prefix:!0,type:Ce.LIST,parse:function(A){if(0===A.length)return[];for(var e=[],t=A.filter(GA),r=0;r<t.length;r++){var n=t[r],B=t[r+1];if(zA(n)&&"none"!==n.value){var s=B&&VA(B)?B.number:0;e.push({counter:n.value,reset:s})}}return e}},nn={name:"quotes",initialValue:"none",prefix:!0,type:Ce.LIST,parse:function(A){if(0===A.length)return null;var e=A[0];if(e.type===N.IDENT_TOKEN&&"none"===e.value)return null;var t=[],r=A.filter(XA);if(r.length%2!=0)return null;for(var n=0;n<r.length;n+=2){var B=r[n].value,s=r[n+1].value;t.push({open:B,close:s})}return t}},Bn={name:"box-shadow",initialValue:"none",type:Ce.LIST,prefix:!1,parse:function(A){return 1===A.length&&JA(A[0],"none")?[]:WA(A).map(function(A){for(var e={color:255,offsetX:se,offsetY:se,blur:se,spread:se,inset:!1},t=0,r=0;r<A.length;r++){var n=A[r];JA(n,"inset")?e.inset=!0:YA(n)?(0===t?e.offsetX=n:1===t?e.offsetY=n:2===t?e.blur=n:e.spread=n,t++):e.color=we(n)}return e})}},sn=(on.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&this.visibility===Rr.VISIBLE},on.prototype.isTransparent=function(){return ee(this.backgroundColor)},on.prototype.isTransformed=function(){return null!==this.transform},on.prototype.isPositioned=function(){return this.position!==fr.STATIC},on.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},on.prototype.isFloating=function(){return this.float!==vt.NONE},on.prototype.isInlineLevel=function(){return jr(this.display,4)||jr(this.display,33554432)||jr(this.display,268435456)||jr(this.display,536870912)||jr(this.display,67108864)||jr(this.display,134217728)},on);function on(A){this.backgroundClip=wn(Te,A.backgroundClip),this.backgroundColor=wn(me,A.backgroundColor),this.backgroundImage=wn(ct,A.backgroundImage),this.backgroundOrigin=wn(Qt,A.backgroundOrigin),this.backgroundPosition=wn(wt,A.backgroundPosition),this.backgroundRepeat=wn(lt,A.backgroundRepeat),this.backgroundSize=wn(Ht,A.backgroundSize),this.borderTopColor=wn(ft,A.borderTopColor),this.borderRightColor=wn(pt,A.borderRightColor),this.borderBottomColor=wn(Nt,A.borderBottomColor),this.borderLeftColor=wn(Kt,A.borderLeftColor),this.borderTopLeftRadius=wn(It,A.borderTopLeftRadius),this.borderTopRightRadius=wn(Tt,A.borderTopRightRadius),this.borderBottomRightRadius=wn(mt,A.borderBottomRightRadius),this.borderBottomLeftRadius=wn(Rt,A.borderBottomLeftRadius),this.borderTopStyle=wn(bt,A.borderTopStyle),this.borderRightStyle=wn(St,A.borderRightStyle),this.borderBottomStyle=wn(Mt,A.borderBottomStyle),this.borderLeftStyle=wn(yt,A.borderLeftStyle),this.borderTopWidth=wn(_t,A.borderTopWidth),this.borderRightWidth=wn(Pt,A.borderRightWidth),this.borderBottomWidth=wn(xt,A.borderBottomWidth),this.borderLeftWidth=wn(Vt,A.borderLeftWidth),this.boxShadow=wn(Bn,A.boxShadow),this.color=wn(zt,A.color),this.display=wn(Xt,A.display),this.float=wn(qt,A.cssFloat),this.fontFamily=wn(Wr,A.fontFamily),this.fontSize=wn(Yr,A.fontSize),this.fontStyle=wn(An,A.fontStyle),this.fontVariant=wn(Zr,A.fontVariant),this.fontWeight=wn(qr,A.fontWeight),this.letterSpacing=wn(Zt,A.letterSpacing),this.lineBreak=wn(jt,A.lineBreak),this.lineHeight=wn($t,A.lineHeight),this.listStyleImage=wn(Ar,A.listStyleImage),this.listStylePosition=wn(rr,A.listStylePosition),this.listStyleType=wn(or,A.listStyleType),this.marginTop=wn(ir,A.marginTop),this.marginRight=wn(ar,A.marginRight),this.marginBottom=wn(cr,A.marginBottom),this.marginLeft=wn(Qr,A.marginLeft),this.opacity=wn(Jr,A.opacity);var e=wn(gr,A.overflow);this.overflowX=e[0],this.overflowY=e[1<e.length?1:0],this.overflowWrap=wn(Er,A.overflowWrap),this.paddingTop=wn(Fr,A.paddingTop),this.paddingRight=wn(hr,A.paddingRight),this.paddingBottom=wn(Hr,A.paddingBottom),this.paddingLeft=wn(dr,A.paddingLeft),this.position=wn(Tr,A.position),this.textAlign=wn(Nr,A.textAlign),this.textDecorationColor=wn(Gr,A.textDecorationColor||A.color),this.textDecorationLine=wn(kr,A.textDecorationLine),this.textShadow=wn(mr,A.textShadow),this.textTransform=wn(Or,A.textTransform),this.transform=wn(vr,A.transform),this.transformOrigin=wn(Mr,A.transformOrigin),this.visibility=wn(Pr,A.visibility),this.wordBreak=wn(zr,A.wordBreak),this.zIndex=wn(Xr,A.zIndex)}var an,cn=function(A){this.content=wn(en,A.content),this.quotes=wn(nn,A.quotes)},Qn=function(A){this.counterIncrement=wn(tn,A.counterIncrement),this.counterReset=wn(rn,A.counterReset)},wn=function(A,e){var t=new MA,r=null!=e?e.toString():A.initialValue;t.write(r);var n=new _A(t.read());switch(A.type){case Ce.IDENT_VALUE:var B=n.parseComponentValue();return A.parse(zA(B)?B.value:A.initialValue);case Ce.VALUE:return A.parse(n.parseComponentValue());case Ce.LIST:return A.parse(n.parseComponentValues());case Ce.TOKEN_VALUE:return n.parseComponentValue();case Ce.TYPE_VALUE:switch(A.format){case"angle":return ce(n.parseComponentValue());case"color":return we(n.parseComponentValue());case"image":return it(n.parseComponentValue());case"length":var s=n.parseComponentValue();return YA(s)?s:se;case"length-percentage":var o=n.parseComponentValue();return qA(o)?o:se}}throw new Error("Attempting to parse unsupported css format type "+A.format)},un=function(A){this.styles=new sn(window.getComputedStyle(A,null)),this.textNodes=[],this.elements=[],null!==this.styles.transform&&oB(A)&&(A.style.transform="none"),this.bounds=i(A),this.flags=0},Un=function(A,e){this.text=A,this.bounds=e},ln=function(A,e){for(var t,r=function(A,e){var t=a(A),r=function(A,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=function(A,e){void 0===e&&(e="strict");var t=[],r=[],n=[];return A.forEach(function(A,B){var s=j.get(A);if(50<s?(n.push(!0),s-=50):n.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(A))return r.push(B),t.push(16);if(4!==s&&11!==s)return r.push(B),31===s?t.push("strict"===e?D:G):s===q?t.push(x):29===s?t.push(x):43===s?131072<=A&&A<=196605||196608<=A&&A<=262141?t.push(G):t.push(x):void t.push(s);if(0===B)return r.push(B),t.push(x);var o=t[B-1];return-1===rA.indexOf(o)?(r.push(r[B-1]),t.push(o)):(r.push(B),t.push(x))}),[r,t,n]}(A,e.lineBreak),r=t[0],n=t[1],B=t[2];return"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(n=n.map(function(A){return-1!==[M,x,q].indexOf(A)?G:A})),[r,n,"keep-all"===e.wordBreak?B.map(function(e,t){return e&&19968<=A[t]&&A[t]<=40959}):void 0]}(t,e),n=r[0],B=r[1],s=r[2],o=t.length,i=0,c=0;return{next:function(){if(o<=c)return{done:!0,value:null};for(var A=Z;c<o&&(A=F(t,B,n,++c,s))===Z;);if(A===Z&&c!==o)return{done:!0,value:null};var e=new sA(t,A,i,c);return i=c,{value:e,done:!1}}}}(A,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap===ur.BREAK_WORD?"break-word":e.wordBreak}),n=[];!(t=r.next()).done;)t.value&&n.push(t.value.slice());return n},Cn=function(A,e){this.text=gn(A.data,e.textTransform),this.textBounds=function(A,e,t){var r=function(A,e){return 0!==e.letterSpacing?a(A).map(function(A){return c(A)}):ln(A,e)}(A,e),n=[],B=0;return r.forEach(function(A){if(e.textDecorationLine.length||0<A.trim().length)if(Oe.SUPPORT_RANGE_BOUNDS)n.push(new Un(A,function(A,e,t){var r=A.ownerDocument;if(!r)throw new Error("Node has no owner document");var n=r.createRange();return n.setStart(A,e),n.setEnd(A,e+t),s.fromClientRect(n.getBoundingClientRect())}(t,B,A.length)));else{var r=t.splitText(A.length);n.push(new Un(A,function(A){var e=A.ownerDocument;if(e){var t=e.createElement("html2canvaswrapper");t.appendChild(A.cloneNode(!0));var r=A.parentNode;if(r){r.replaceChild(t,A);var n=i(t);return t.firstChild&&r.replaceChild(t.firstChild,t),n}}return new s(0,0,0,0)}(t))),t=r}else Oe.SUPPORT_RANGE_BOUNDS||(t=t.splitText(A.length));B+=A.length}),n}(this.text,e,A)},gn=function(A,e){switch(e){case Kr.LOWERCASE:return A.toLowerCase();case Kr.CAPITALIZE:return A.replace(En,Fn);case Kr.UPPERCASE:return A.toUpperCase();default:return A}},En=/(^|\s|:|-|\(|\))([a-z])/g,Fn=function(A,e,t){return 0<A.length?e+t.toUpperCase():A},hn=(t(Hn,an=un),Hn);function Hn(A){var e=an.call(this,A)||this;return e.src=A.currentSrc||A.src,e.intrinsicWidth=A.naturalWidth,e.intrinsicHeight=A.naturalHeight,be.getInstance().addImage(e.src),e}var dn,fn=(t(pn,dn=un),pn);function pn(A){var e=dn.call(this,A)||this;return e.canvas=A,e.intrinsicWidth=A.width,e.intrinsicHeight=A.height,e}var Nn,Kn=(t(In,Nn=un),In);function In(A){var e=Nn.call(this,A)||this,t=new XMLSerializer;return e.svg="data:image/svg+xml,"+encodeURIComponent(t.serializeToString(A)),e.intrinsicWidth=A.width.baseVal.value,e.intrinsicHeight=A.height.baseVal.value,be.getInstance().addImage(e.svg),e}var Tn,mn=(t(Rn,Tn=un),Rn);function Rn(A){var e=Tn.call(this,A)||this;return e.value=A.value,e}var Ln,On=(t(vn,Ln=un),vn);function vn(A){var e=Ln.call(this,A)||this;return e.start=A.start,e.reversed="boolean"==typeof A.reversed&&!0===A.reversed,e}var Dn,bn=[{type:N.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],Sn=[{type:N.PERCENTAGE_TOKEN,flags:0,number:50}],Mn="checkbox",yn="radio",_n="password",Pn=707406591,xn=(t(Vn,Dn=un),Vn);function Vn(A){var e=Dn.call(this,A)||this;switch(e.type=A.type.toLowerCase(),e.checked=A.checked,e.value=function(A){var e=A.type===_n?new Array(A.value.length+1).join("•"):A.value;return 0===e.length?A.placeholder||"":e}(A),e.type!==Mn&&e.type!==yn||(e.styles.backgroundColor=3739148031,e.styles.borderTopColor=e.styles.borderRightColor=e.styles.borderBottomColor=e.styles.borderLeftColor=2779096575,e.styles.borderTopWidth=e.styles.borderRightWidth=e.styles.borderBottomWidth=e.styles.borderLeftWidth=1,e.styles.borderTopStyle=e.styles.borderRightStyle=e.styles.borderBottomStyle=e.styles.borderLeftStyle=Ft.SOLID,e.styles.backgroundClip=[Ee.BORDER_BOX],e.styles.backgroundOrigin=[0],e.bounds=function(A){return A.width>A.height?new s(A.left+(A.width-A.height)/2,A.top,A.height,A.height):A.width<A.height?new s(A.left,A.top+(A.height-A.width)/2,A.width,A.width):A}(e.bounds)),e.type){case Mn:e.styles.borderTopRightRadius=e.styles.borderTopLeftRadius=e.styles.borderBottomRightRadius=e.styles.borderBottomLeftRadius=bn;break;case yn:e.styles.borderTopRightRadius=e.styles.borderTopLeftRadius=e.styles.borderBottomRightRadius=e.styles.borderBottomLeftRadius=Sn}return e}var zn,Xn=(t(Jn,zn=un),Jn);function Jn(A){var e=zn.call(this,A)||this,t=A.options[A.selectedIndex||0];return e.value=t&&t.text||"",e}var Gn,kn=(t(Wn,Gn=un),Wn);function Wn(A){var e=Gn.call(this,A)||this;return e.value=A.value,e}function Yn(A){return we(_A.create(A).parseComponentValue())}var qn,Zn=(t(jn,qn=un),jn);function jn(A){var e=qn.call(this,A)||this;e.src=A.src,e.width=parseInt(A.width,10)||0,e.height=parseInt(A.height,10)||0,e.backgroundColor=e.styles.backgroundColor;try{if(A.contentWindow&&A.contentWindow.document&&A.contentWindow.document.documentElement){e.tree=tB(A.contentWindow.document.documentElement);var t=A.contentWindow.document.documentElement?Yn(getComputedStyle(A.contentWindow.document.documentElement).backgroundColor):He.TRANSPARENT,r=A.contentWindow.document.body?Yn(getComputedStyle(A.contentWindow.document.body).backgroundColor):He.TRANSPARENT;e.backgroundColor=ee(t)?ee(r)?e.styles.backgroundColor:r:t}}catch(A){}return e}function $n(A){return"STYLE"===A.tagName}var AB=["OL","UL","MENU"],eB=function(A){return lB(A)?new hn(A):UB(A)?new fn(A):wB(A)?new Kn(A):aB(A)?new mn(A):cB(A)?new On(A):QB(A)?new xn(A):EB(A)?new Xn(A):gB(A)?new kn(A):CB(A)?new Zn(A):new un(A)},tB=function(A){var e=eB(A);return e.flags|=4,function A(e,t,r){for(var n=e.firstChild,B=void 0;n;n=B)if(B=n.nextSibling,BB(n)&&0<n.data.trim().length)t.textNodes.push(new Cn(n,t.styles));else if(sB(n)){var s=eB(n);s.styles.isVisible()&&(rB(n,s,r)?s.flags|=4:nB(s.styles)&&(s.flags|=2),-1!==AB.indexOf(n.tagName)&&(s.flags|=8),t.elements.push(s),gB(n)||wB(n)||EB(n)||A(n,s,r))}}(A,e,e),e},rB=function(A,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||uB(A)&&t.styles.isTransparent()},nB=function(A){return A.isPositioned()||A.isFloating()},BB=function(A){return A.nodeType===Node.TEXT_NODE},sB=function(A){return A.nodeType===Node.ELEMENT_NODE},oB=function(A){return sB(A)&&void 0!==A.style&&!iB(A)},iB=function(A){return"object"==e(A.className)},aB=function(A){return"LI"===A.tagName},cB=function(A){return"OL"===A.tagName},QB=function(A){return"INPUT"===A.tagName},wB=function(A){return"svg"===A.tagName},uB=function(A){return"BODY"===A.tagName},UB=function(A){return"CANVAS"===A.tagName},lB=function(A){return"IMG"===A.tagName},CB=function(A){return"IFRAME"===A.tagName},gB=function(A){return"TEXTAREA"===A.tagName},EB=function(A){return"SELECT"===A.tagName},FB=(hB.prototype.getCounterValue=function(A){var e=this.counters[A];return e&&e.length?e[e.length-1]:1},hB.prototype.getCounterValues=function(A){return this.counters[A]||[]},hB.prototype.pop=function(A){var e=this;A.forEach(function(A){return e.counters[A].pop()})},hB.prototype.parse=function(A){var e=this,t=A.counterIncrement,r=A.counterReset,n=!0;null!==t&&t.forEach(function(A){var t=e.counters[A.counter];t&&0!==A.increment&&(n=!1,t[Math.max(0,t.length-1)]+=A.increment)});var B=[];return n&&r.forEach(function(A){var t=e.counters[A.counter];B.push(A.counter),t||(t=e.counters[A.counter]=[]),t.push(A.reset)}),B},hB);function hB(){this.counters={}}function HB(A,e,t,r,n,B){return A<e||t<A?vB(A,n,0<B.length):r.integers.reduce(function(e,t,n){for(;t<=A;)A-=t,e+=r.values[n];return e},"")+B}function dB(A,e,t,r){for(var n="";t||A--,n=r(A)+n,e<=(A/=e)*e;);return n}function fB(A,e,t,r,n){var B=t-e+1;return(A<0?"-":"")+(dB(Math.abs(A),B,r,function(A){return c(Math.floor(A%B)+e)})+n)}function pB(A,e,t){void 0===t&&(t=". ");var r=e.length;return dB(Math.abs(A),r,!1,function(A){return e[Math.floor(A%r)]})+t}function NB(A,e,t,r,n,B){if(A<-9999||9999<A)return vB(A,er.CJK_DECIMAL,0<n.length);var s=Math.abs(A),o=n;if(0===s)return e[0]+o;for(var i=0;0<s&&i<=4;i++){var a=s%10;0==a&&jr(B,1)&&""!==o?o=e[a]+o:1<a||1==a&&0===i||1==a&&1===i&&jr(B,2)||1==a&&1===i&&jr(B,4)&&100<A||1==a&&1<i&&jr(B,8)?o=e[a]+(0<i?t[i-1]:"")+o:1==a&&0<i&&(o=t[i-1]+o),s=Math.floor(s/10)}return(A<0?r:"")+o}var KB,IB,TB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},mB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},RB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},LB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},OB="마이너스",vB=function(A,e,t){var r=t?". ":"",n=t?"、":"",B=t?", ":"",s=t?" ":"";switch(e){case er.DISC:return"•"+s;case er.CIRCLE:return"◦"+s;case er.SQUARE:return"◾"+s;case er.DECIMAL_LEADING_ZERO:var o=fB(A,48,57,!0,r);return o.length<4?"0"+o:o;case er.CJK_DECIMAL:return pB(A,"〇一二三四五六七八九",n);case er.LOWER_ROMAN:return HB(A,1,3999,TB,er.DECIMAL,r).toLowerCase();case er.UPPER_ROMAN:return HB(A,1,3999,TB,er.DECIMAL,r);case er.LOWER_GREEK:return fB(A,945,969,!1,r);case er.LOWER_ALPHA:return fB(A,97,122,!1,r);case er.UPPER_ALPHA:return fB(A,65,90,!1,r);case er.ARABIC_INDIC:return fB(A,1632,1641,!0,r);case er.ARMENIAN:case er.UPPER_ARMENIAN:return HB(A,1,9999,mB,er.DECIMAL,r);case er.LOWER_ARMENIAN:return HB(A,1,9999,mB,er.DECIMAL,r).toLowerCase();case er.BENGALI:return fB(A,2534,2543,!0,r);case er.CAMBODIAN:case er.KHMER:return fB(A,6112,6121,!0,r);case er.CJK_EARTHLY_BRANCH:return pB(A,"子丑寅卯辰巳午未申酉戌亥",n);case er.CJK_HEAVENLY_STEM:return pB(A,"甲乙丙丁戊己庚辛壬癸",n);case er.CJK_IDEOGRAPHIC:case er.TRAD_CHINESE_INFORMAL:return NB(A,"零一二三四五六七八九","十百千萬","負",n,14);case er.TRAD_CHINESE_FORMAL:return NB(A,"零壹貳參肆伍陸柒捌玖","拾佰仟萬","負",n,15);case er.SIMP_CHINESE_INFORMAL:return NB(A,"零一二三四五六七八九","十百千萬","负",n,14);case er.SIMP_CHINESE_FORMAL:return NB(A,"零壹贰叁肆伍陆柒捌玖","拾佰仟萬","负",n,15);case er.JAPANESE_INFORMAL:return NB(A,"〇一二三四五六七八九","十百千万","マイナス",n,0);case er.JAPANESE_FORMAL:return NB(A,"零壱弐参四伍六七八九","拾百千万","マイナス",n,7);case er.KOREAN_HANGUL_FORMAL:return NB(A,"영일이삼사오육칠팔구","십백천만",OB,B,7);case er.KOREAN_HANJA_INFORMAL:return NB(A,"零一二三四五六七八九","十百千萬",OB,B,0);case er.KOREAN_HANJA_FORMAL:return NB(A,"零壹貳參四五六七八九","拾百千",OB,B,7);case er.DEVANAGARI:return fB(A,2406,2415,!0,r);case er.GEORGIAN:return HB(A,1,19999,LB,er.DECIMAL,r);case er.GUJARATI:return fB(A,2790,2799,!0,r);case er.GURMUKHI:return fB(A,2662,2671,!0,r);case er.HEBREW:return HB(A,1,10999,RB,er.DECIMAL,r);case er.HIRAGANA:return pB(A,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case er.HIRAGANA_IROHA:return pB(A,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case er.KANNADA:return fB(A,3302,3311,!0,r);case er.KATAKANA:return pB(A,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",n);case er.KATAKANA_IROHA:return pB(A,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",n);case er.LAO:return fB(A,3792,3801,!0,r);case er.MONGOLIAN:return fB(A,6160,6169,!0,r);case er.MYANMAR:return fB(A,4160,4169,!0,r);case er.ORIYA:return fB(A,2918,2927,!0,r);case er.PERSIAN:return fB(A,1776,1785,!0,r);case er.TAMIL:return fB(A,3046,3055,!0,r);case er.TELUGU:return fB(A,3174,3183,!0,r);case er.THAI:return fB(A,3664,3673,!0,r);case er.TIBETAN:return fB(A,3872,3881,!0,r);case er.DECIMAL:default:return fB(A,48,57,!0,r)}},DB="data-html2canvas-ignore",bB=(SB.prototype.toIFrame=function(A,e){var t=this,r=_B(A,e);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=A.defaultView.pageXOffset,o=A.defaultView.pageYOffset,i=r.contentWindow,a=i.document,c=PB(r).then(function(){return n(t,void 0,void 0,function(){var A;return B(this,function(t){switch(t.label){case 0:return this.scrolledElements.forEach(XB),i&&(i.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||i.scrollY===e.top&&i.scrollX===e.left||(a.documentElement.style.top=-e.top+"px",a.documentElement.style.left=-e.left+"px",a.documentElement.style.position="absolute")),A=this.options.onclone,void 0===this.clonedReferenceElement?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:t.sent(),t.label=2;case 2:return"function"==typeof A?[2,Promise.resolve().then(function(){return A(a)}).then(function(){return r})]:[2,r]}})})});return a.open(),a.write(VB(document.doctype)+"<html></html>"),zB(this.referenceElement.ownerDocument,s,o),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},SB.prototype.createElementClone=function(A){if(UB(A))return this.createCanvasClone(A);if($n(A))return this.createStyleClone(A);var e=A.cloneNode(!1);return lB(e)&&"lazy"===e.loading&&(e.loading="eager"),e},SB.prototype.createStyleClone=function(A){try{var e=A.sheet;if(e&&e.cssRules){var t=[].slice.call(e.cssRules,0).reduce(function(A,e){return e&&"string"==typeof e.cssText?A+e.cssText:A},""),r=A.cloneNode(!1);return r.textContent=t,r}}catch(A){if(ve.getInstance(this.options.id).error("Unable to access cssRules property",A),"SecurityError"!==A.name)throw A}return A.cloneNode(!1)},SB.prototype.createCanvasClone=function(A){if(this.options.inlineImages&&A.ownerDocument){var e=A.ownerDocument.createElement("img");try{return e.src=A.toDataURL(),e}catch(A){ve.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var t=A.cloneNode(!1);try{t.width=A.width,t.height=A.height;var r=A.getContext("2d"),n=t.getContext("2d");return n&&(r?n.putImageData(r.getImageData(0,0,A.width,A.height),0,0):n.drawImage(A,0,0)),t}catch(A){}return t},SB.prototype.cloneNode=function(A){if(BB(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var e=A.ownerDocument.defaultView;if(e&&sB(A)&&(oB(A)||iB(A))){var t=this.createElementClone(A),r=e.getComputedStyle(A),n=e.getComputedStyle(A,":before"),B=e.getComputedStyle(A,":after");this.referenceElement===A&&oB(t)&&(this.clonedReferenceElement=t),uB(t)&&WB(t);for(var s=this.counters.parse(new Qn(r)),o=this.resolvePseudoContent(A,t,n,KB.BEFORE),i=A.firstChild;i;i=i.nextSibling)sB(i)&&("SCRIPT"===i.tagName||i.hasAttribute(DB)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(i))||this.options.copyStyles&&sB(i)&&$n(i)||t.appendChild(this.cloneNode(i));o&&t.insertBefore(o,t.firstChild);var a=this.resolvePseudoContent(A,t,B,KB.AFTER);return a&&t.appendChild(a),this.counters.pop(s),r&&(this.options.copyStyles||iB(A))&&!CB(A)&&xB(r,t),0===A.scrollTop&&0===A.scrollLeft||this.scrolledElements.push([t,A.scrollLeft,A.scrollTop]),(gB(A)||EB(A))&&(gB(t)||EB(t))&&(t.value=A.value),t}return A.cloneNode(!1)},SB.prototype.resolvePseudoContent=function(A,e,t,r){var n=this;if(t){var B=t.content,s=e.ownerDocument;if(s&&B&&"none"!==B&&"-moz-alt-content"!==B&&"none"!==t.display){this.counters.parse(new Qn(t));var o=new cn(t),i=s.createElement("html2canvaspseudoelement");xB(t,i),o.content.forEach(function(e){if(e.type===N.STRING_TOKEN)i.appendChild(s.createTextNode(e.value));else if(e.type===N.URL_TOKEN){var t=s.createElement("img");t.src=e.value,t.style.opacity="1",i.appendChild(t)}else if(e.type===N.FUNCTION){if("attr"===e.name){var r=e.values.filter(zA);r.length&&i.appendChild(s.createTextNode(A.getAttribute(r[0].value)||""))}else if("counter"===e.name){var B=e.values.filter(kA),a=B[0],c=B[1];if(a&&zA(a)){var Q=n.counters.getCounterValue(a.value),w=c&&zA(c)?or.parse(c.value):er.DECIMAL;i.appendChild(s.createTextNode(vB(Q,w,!1)))}}else if("counters"===e.name){var u=e.values.filter(kA),U=(a=u[0],u[1]);if(c=u[2],a&&zA(a)){var l=n.counters.getCounterValues(a.value),C=c&&zA(c)?or.parse(c.value):er.DECIMAL,g=U&&U.type===N.STRING_TOKEN?U.value:"",E=l.map(function(A){return vB(A,C,!1)}).join(g);i.appendChild(s.createTextNode(E))}}}else if(e.type===N.IDENT_TOKEN)switch(e.value){case"open-quote":i.appendChild(s.createTextNode($r(o.quotes,n.quoteDepth++,!0)));break;case"close-quote":i.appendChild(s.createTextNode($r(o.quotes,--n.quoteDepth,!1)));break;default:i.appendChild(s.createTextNode(e.value))}}),i.className=JB+" "+GB;var a=r===KB.BEFORE?" "+JB:" "+GB;return iB(e)?e.className.baseValue+=a:e.className+=a,i}}},SB.destroy=function(A){return!!A.parentNode&&(A.parentNode.removeChild(A),!0)},SB);function SB(A,e){if(this.options=e,this.scrolledElements=[],this.referenceElement=A,this.counters=new FB,this.quoteDepth=0,!A.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(A.ownerDocument.documentElement)}(IB=KB||(KB={}))[IB.BEFORE=0]="BEFORE",IB[IB.AFTER=1]="AFTER";var MB,yB,_B=function(A,e){var t=A.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(DB,"true"),A.body.appendChild(t),t},PB=function(A){return new Promise(function(e,t){var r=A.contentWindow;if(!r)return t("No window assigned for iframe");var n=r.document;r.onload=A.onload=n.onreadystatechange=function(){r.onload=A.onload=n.onreadystatechange=null;var t=setInterval(function(){0<n.body.childNodes.length&&"complete"===n.readyState&&(clearInterval(t),e(A))},50)}})},xB=function(A,e){for(var t=A.length-1;0<=t;t--){var r=A.item(t);"content"!==r&&e.style.setProperty(r,A.getPropertyValue(r))}return e},VB=function(A){var e="";return A&&(e+="<!DOCTYPE ",A.name&&(e+=A.name),A.internalSubset&&(e+=A.internalSubset),A.publicId&&(e+='"'+A.publicId+'"'),A.systemId&&(e+='"'+A.systemId+'"'),e+=">"),e},zB=function(A,e,t){A&&A.defaultView&&(e!==A.defaultView.pageXOffset||t!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(e,t)},XB=function(A){var e=A[0],t=A[1],r=A[2];e.scrollLeft=t,e.scrollTop=r},JB="___html2canvas___pseudoelement_before",GB="___html2canvas___pseudoelement_after",kB='{\n    content: "" !important;\n    display: none !important;\n}',WB=function(A){YB(A,"."+JB+":before"+kB+"\n         ."+GB+":after"+kB)},YB=function(A,e){var t=A.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,A.appendChild(r)}};function qB(A,e){return A.length===e.length&&A.some(function(A,t){return A===e[t]})}(yB=MB||(MB={}))[yB.VECTOR=0]="VECTOR",yB[yB.BEZIER_CURVE=1]="BEZIER_CURVE";var ZB=(jB.prototype.add=function(A,e){return new jB(this.x+A,this.y+e)},jB);function jB(A,e){this.type=MB.VECTOR,this.x=A,this.y=e}function $B(A,e,t){return new ZB(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)}var As=(es.prototype.subdivide=function(A,e){var t=$B(this.start,this.startControl,A),r=$B(this.startControl,this.endControl,A),n=$B(this.endControl,this.end,A),B=$B(t,r,A),s=$B(r,n,A),o=$B(B,s,A);return e?new es(this.start,t,B,o):new es(o,s,n,this.end)},es.prototype.add=function(A,e){return new es(this.start.add(A,e),this.startControl.add(A,e),this.endControl.add(A,e),this.end.add(A,e))},es.prototype.reverse=function(){return new es(this.end,this.endControl,this.startControl,this.start)},es);function es(A,e,t,r){this.type=MB.BEZIER_CURVE,this.start=A,this.startControl=e,this.endControl=t,this.end=r}function ts(A){return A.type===MB.BEZIER_CURVE}var rs,ns,Bs=function(A){var e=A.styles,t=A.bounds,r=jA(e.borderTopLeftRadius,t.width,t.height),n=r[0],B=r[1],s=jA(e.borderTopRightRadius,t.width,t.height),o=s[0],i=s[1],a=jA(e.borderBottomRightRadius,t.width,t.height),c=a[0],Q=a[1],w=jA(e.borderBottomLeftRadius,t.width,t.height),u=w[0],U=w[1],l=[];l.push((n+o)/t.width),l.push((u+c)/t.width),l.push((B+U)/t.height),l.push((i+Q)/t.height);var C=Math.max.apply(Math,l);1<C&&(n/=C,B/=C,o/=C,i/=C,c/=C,Q/=C,u/=C,U/=C);var g=t.width-o,E=t.height-Q,F=t.width-c,h=t.height-U,H=e.borderTopWidth,d=e.borderRightWidth,f=e.borderBottomWidth,p=e.borderLeftWidth,N=ae(e.paddingTop,A.bounds.width),K=ae(e.paddingRight,A.bounds.width),I=ae(e.paddingBottom,A.bounds.width),T=ae(e.paddingLeft,A.bounds.width);this.topLeftBorderBox=0<n||0<B?is(t.left,t.top,n,B,rs.TOP_LEFT):new ZB(t.left,t.top),this.topRightBorderBox=0<o||0<i?is(t.left+g,t.top,o,i,rs.TOP_RIGHT):new ZB(t.left+t.width,t.top),this.bottomRightBorderBox=0<c||0<Q?is(t.left+F,t.top+E,c,Q,rs.BOTTOM_RIGHT):new ZB(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=0<u||0<U?is(t.left,t.top+h,u,U,rs.BOTTOM_LEFT):new ZB(t.left,t.top+t.height),this.topLeftPaddingBox=0<n||0<B?is(t.left+p,t.top+H,Math.max(0,n-p),Math.max(0,B-H),rs.TOP_LEFT):new ZB(t.left+p,t.top+H),this.topRightPaddingBox=0<o||0<i?is(t.left+Math.min(g,t.width+p),t.top+H,g>t.width+p?0:o-p,i-H,rs.TOP_RIGHT):new ZB(t.left+t.width-d,t.top+H),this.bottomRightPaddingBox=0<c||0<Q?is(t.left+Math.min(F,t.width-p),t.top+Math.min(E,t.height+H),Math.max(0,c-d),Q-f,rs.BOTTOM_RIGHT):new ZB(t.left+t.width-d,t.top+t.height-f),this.bottomLeftPaddingBox=0<u||0<U?is(t.left+p,t.top+h,Math.max(0,u-p),U-f,rs.BOTTOM_LEFT):new ZB(t.left+p,t.top+t.height-f),this.topLeftContentBox=0<n||0<B?is(t.left+p+T,t.top+H+N,Math.max(0,n-(p+T)),Math.max(0,B-(H+N)),rs.TOP_LEFT):new ZB(t.left+p+T,t.top+H+N),this.topRightContentBox=0<o||0<i?is(t.left+Math.min(g,t.width+p+T),t.top+H+N,g>t.width+p+T?0:o-p+T,i-(H+N),rs.TOP_RIGHT):new ZB(t.left+t.width-(d+K),t.top+H+N),this.bottomRightContentBox=0<c||0<Q?is(t.left+Math.min(F,t.width-(p+T)),t.top+Math.min(E,t.height+H+N),Math.max(0,c-(d+K)),Q-(f+I),rs.BOTTOM_RIGHT):new ZB(t.left+t.width-(d+K),t.top+t.height-(f+I)),this.bottomLeftContentBox=0<u||0<U?is(t.left+p+T,t.top+h,Math.max(0,u-(p+T)),U-(f+I),rs.BOTTOM_LEFT):new ZB(t.left+p+T,t.top+t.height-(f+I))};function ss(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]}function os(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]}(ns=rs||(rs={}))[ns.TOP_LEFT=0]="TOP_LEFT",ns[ns.TOP_RIGHT=1]="TOP_RIGHT",ns[ns.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",ns[ns.BOTTOM_LEFT=3]="BOTTOM_LEFT";var is=function(A,e,t,r,n){var B=(Math.sqrt(2)-1)/3*4,s=t*B,o=r*B,i=A+t,a=e+r;switch(n){case rs.TOP_LEFT:return new As(new ZB(A,a),new ZB(A,a-o),new ZB(i-s,e),new ZB(i,e));case rs.TOP_RIGHT:return new As(new ZB(A,e),new ZB(A+s,e),new ZB(i,a-o),new ZB(i,a));case rs.BOTTOM_RIGHT:return new As(new ZB(i,e),new ZB(i,e+o),new ZB(A+s,a),new ZB(A,a));case rs.BOTTOM_LEFT:default:return new As(new ZB(i,a),new ZB(i-s,a),new ZB(A,e+o),new ZB(A,e))}},as=function(A,e,t){this.type=0,this.target=6,this.offsetX=A,this.offsetY=e,this.matrix=t},cs=function(A,e){this.type=1,this.target=e,this.path=A},Qs=function(A){this.type=2,this.target=6,this.opacity=A},ws=function(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},us=(Us.prototype.getParentEffects=function(){var A=this.effects.slice(0);if(this.container.styles.overflowX!==Br.VISIBLE){var e=ss(this.curves),t=os(this.curves);qB(e,t)||A.push(new cs(t,6))}return A},Us);function Us(A,e){if(this.container=A,this.effects=e.slice(0),this.curves=new Bs(A),A.styles.opacity<1&&this.effects.push(new Qs(A.styles.opacity)),null!==A.styles.transform){var t=A.bounds.left+A.styles.transformOrigin[0].number,r=A.bounds.top+A.styles.transformOrigin[1].number,n=A.styles.transform;this.effects.push(new as(t,r,n))}if(A.styles.overflowX!==Br.VISIBLE){var B=ss(this.curves),s=os(this.curves);qB(B,s)?this.effects.push(new cs(B,6)):(this.effects.push(new cs(B,2)),this.effects.push(new cs(s,4)))}}function ls(A){var e=A.bounds,t=A.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))}function Cs(A){var e=A.styles,t=A.bounds,r=ae(e.paddingLeft,t.width),n=ae(e.paddingRight,t.width),B=ae(e.paddingTop,t.width),s=ae(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,B+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+n),-(e.borderTopWidth+e.borderBottomWidth+B+s))}function gs(A,e,t){var r=function(A,e){return 0===A?e.bounds:2===A?Cs(e):ls(e)}(fs(A.styles.backgroundOrigin,e),A),n=function(A,e){return A===Ee.BORDER_BOX?e.bounds:A===Ee.CONTENT_BOX?Cs(e):ls(e)}(fs(A.styles.backgroundClip,e),A),B=ds(fs(A.styles.backgroundSize,e),t,r),s=B[0],o=B[1],i=jA(fs(A.styles.backgroundPosition,e),r.width-s,r.height-o);return[ps(fs(A.styles.backgroundRepeat,e),i,B,r,n),Math.round(r.left+i[0]),Math.round(r.top+i[1]),s,o]}function Es(A){return zA(A)&&A.value===ut.AUTO}function Fs(A){return"number"==typeof A}var hs=function(A,e){for(var t=A instanceof On?A.start:1,r=A instanceof On&&A.reversed,n=0;n<e.length;n++){var B=e[n];B.container instanceof mn&&"number"==typeof B.container.value&&0!==B.container.value&&(t=B.container.value),B.listValue=vB(t,B.container.styles.listStyleType,!0),t+=r?-1:1}},Hs=function(A,e,t,r){var n=[];return ts(A)?n.push(A.subdivide(.5,!1)):n.push(A),ts(t)?n.push(t.subdivide(.5,!0)):n.push(t),ts(r)?n.push(r.subdivide(.5,!0).reverse()):n.push(r),ts(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},ds=function(A,e,t){var r=e[0],n=e[1],B=e[2],s=A[0],o=A[1];if(qA(s)&&o&&qA(o))return[ae(s,t.width),ae(o,t.height)];var i=Fs(B);if(zA(s)&&(s.value===ut.CONTAIN||s.value===ut.COVER))return Fs(B)?t.width/t.height<B!=(s.value===ut.COVER)?[t.width,t.width/B]:[t.height*B,t.height]:[t.width,t.height];var a=Fs(r),c=Fs(n),Q=a||c;if(Es(s)&&(!o||Es(o)))return a&&c?[r,n]:i||Q?Q&&i?[a?r:n*B,c?n:r/B]:[a?r:t.width,c?n:t.height]:[t.width,t.height];if(i){var w=0,u=0;return qA(s)?w=ae(s,t.width):qA(o)&&(u=ae(o,t.height)),Es(s)?w=u*B:o&&!Es(o)||(u=w/B),[w,u]}var U=null,l=null;if(qA(s)?U=ae(s,t.width):o&&qA(o)&&(l=ae(o,t.height)),null===U||o&&!Es(o)||(l=a&&c?U/r*n:t.height),null!==l&&Es(s)&&(U=a&&c?l/n*r:t.width),null!==U&&null!==l)return[U,l];throw new Error("Unable to calculate background-size for element")},fs=function(A,e){var t=A[e];return void 0===t?A[0]:t},ps=function(A,e,t,r,n){var B=e[0],s=e[1],o=t[0],i=t[1];switch(A){case st.REPEAT_X:return[new ZB(Math.round(r.left),Math.round(r.top+s)),new ZB(Math.round(r.left+r.width),Math.round(r.top+s)),new ZB(Math.round(r.left+r.width),Math.round(i+r.top+s)),new ZB(Math.round(r.left),Math.round(i+r.top+s))];case st.REPEAT_Y:return[new ZB(Math.round(r.left+B),Math.round(r.top)),new ZB(Math.round(r.left+B+o),Math.round(r.top)),new ZB(Math.round(r.left+B+o),Math.round(r.height+r.top)),new ZB(Math.round(r.left+B),Math.round(r.height+r.top))];case st.NO_REPEAT:return[new ZB(Math.round(r.left+B),Math.round(r.top+s)),new ZB(Math.round(r.left+B+o),Math.round(r.top+s)),new ZB(Math.round(r.left+B+o),Math.round(r.top+s+i)),new ZB(Math.round(r.left+B),Math.round(r.top+s+i))];default:return[new ZB(Math.round(n.left),Math.round(n.top)),new ZB(Math.round(n.left+n.width),Math.round(n.top)),new ZB(Math.round(n.left+n.width),Math.round(n.height+n.top)),new ZB(Math.round(n.left),Math.round(n.height+n.top))]}},Ns="Hidden Text",Ks=(Is.prototype.parseMetrics=function(A,e){var t=this._document.createElement("div"),r=this._document.createElement("img"),n=this._document.createElement("span"),B=this._document.body;t.style.visibility="hidden",t.style.fontFamily=A,t.style.fontSize=e,t.style.margin="0",t.style.padding="0",B.appendChild(t),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",n.style.fontFamily=A,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.appendChild(this._document.createTextNode(Ns)),t.appendChild(n),t.appendChild(r);var s=r.offsetTop-n.offsetTop+2;t.removeChild(n),t.appendChild(this._document.createTextNode(Ns)),t.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-t.offsetTop+2;return B.removeChild(t),{baseline:s,middle:o}},Is.prototype.getMetrics=function(A,e){var t=A+" "+e;return void 0===this._data[t]&&(this._data[t]=this.parseMetrics(A,e)),this._data[t]},Is);function Is(A){this._data={},this._document=A}var Ts=(ms.prototype.applyEffects=function(A,e){for(var t=this;this._activeEffects.length;)this.popEffect();A.filter(function(A){return jr(A.target,e)}).forEach(function(A){return t.applyEffect(A)})},ms.prototype.applyEffect=function(A){this.ctx.save(),function(A){return 2===A.type}(A)&&(this.ctx.globalAlpha=A.opacity),function(A){return 0===A.type}(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),function(A){return 1===A.type}(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},ms.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},ms.prototype.renderStack=function(A){return n(this,void 0,void 0,function(){return B(this,function(e){switch(e.label){case 0:return A.element.container.styles.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},ms.prototype.renderNode=function(A){return n(this,void 0,void 0,function(){return B(this,function(e){switch(e.label){case 0:return A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(A)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},ms.prototype.renderTextWithLetterSpacing=function(A,e){var t=this;0===e?this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height):a(A.text).map(function(A){return c(A)}).reduce(function(e,r){return t.ctx.fillText(r,e,A.bounds.top+A.bounds.height),e+t.ctx.measureText(r).width},A.bounds.left)},ms.prototype.createFontStyle=function(A){var e=A.fontVariant.filter(function(A){return"normal"===A||"small-caps"===A}).join(""),t=A.fontFamily.join(", "),r=xA(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,e,A.fontWeight,r,t].join(" "),t,r]},ms.prototype.renderTextNode=function(A,e){return n(this,void 0,void 0,function(){var t,r,n,s,o=this;return B(this,function(B){return t=this.createFontStyle(e),r=t[0],n=t[1],s=t[2],this.ctx.font=r,A.textBounds.forEach(function(A){o.ctx.fillStyle=te(e.color),o.renderTextWithLetterSpacing(A,e.letterSpacing);var t=e.textShadow;t.length&&A.text.trim().length&&(t.slice(0).reverse().forEach(function(e){o.ctx.shadowColor=te(e.color),o.ctx.shadowOffsetX=e.offsetX.number*o.options.scale,o.ctx.shadowOffsetY=e.offsetY.number*o.options.scale,o.ctx.shadowBlur=e.blur.number,o.ctx.fillText(A.text,A.bounds.left,A.bounds.top+A.bounds.height)}),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0),e.textDecorationLine.length&&(o.ctx.fillStyle=te(e.textDecorationColor||e.color),e.textDecorationLine.forEach(function(e){switch(e){case 1:var t=o.fontMetrics.getMetrics(n,s).baseline;o.ctx.fillRect(A.bounds.left,Math.round(A.bounds.top+t),A.bounds.width,1);break;case 2:o.ctx.fillRect(A.bounds.left,Math.round(A.bounds.top),A.bounds.width,1);break;case 3:var r=o.fontMetrics.getMetrics(n,s).middle;o.ctx.fillRect(A.bounds.left,Math.ceil(A.bounds.top+r),A.bounds.width,1)}}))}),[2]})})},ms.prototype.renderReplacedElement=function(A,e,t){if(t&&0<A.intrinsicWidth&&0<A.intrinsicHeight){var r=Cs(A),n=os(e);this.path(n),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(t,0,0,A.intrinsicWidth,A.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},ms.prototype.renderNodeContent=function(A){return n(this,void 0,void 0,function(){var e,t,r,n,o,i,a,c,Q,w,u,U,l,C;return B(this,function(B){switch(B.label){case 0:this.applyEffects(A.effects,4),e=A.container,t=A.curves,r=e.styles,n=0,o=e.textNodes,B.label=1;case 1:return n<o.length?(i=o[n],[4,this.renderTextNode(i,r)]):[3,4];case 2:B.sent(),B.label=3;case 3:return n++,[3,1];case 4:if(!(e instanceof hn))return[3,8];B.label=5;case 5:return B.trys.push([5,7,,8]),[4,this.options.cache.match(e.src)];case 6:return U=B.sent(),this.renderReplacedElement(e,t,U),[3,8];case 7:return B.sent(),ve.getInstance(this.options.id).error("Error loading image "+e.src),[3,8];case 8:if(e instanceof fn&&this.renderReplacedElement(e,t,e.canvas),!(e instanceof Kn))return[3,12];B.label=9;case 9:return B.trys.push([9,11,,12]),[4,this.options.cache.match(e.svg)];case 10:return U=B.sent(),this.renderReplacedElement(e,t,U),[3,12];case 11:return B.sent(),ve.getInstance(this.options.id).error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof Zn&&e.tree?[4,new ms({id:this.options.id,scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:e.width,height:e.height,cache:this.options.cache,windowWidth:e.width,windowHeight:e.height}).render(e.tree)]:[3,14];case 13:a=B.sent(),e.width&&e.height&&this.ctx.drawImage(a,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),B.label=14;case 14:if(e instanceof xn&&(c=Math.min(e.bounds.width,e.bounds.height),e.type===Mn?e.checked&&(this.ctx.save(),this.path([new ZB(e.bounds.left+.39363*c,e.bounds.top+.79*c),new ZB(e.bounds.left+.16*c,e.bounds.top+.5549*c),new ZB(e.bounds.left+.27347*c,e.bounds.top+.44071*c),new ZB(e.bounds.left+.39694*c,e.bounds.top+.5649*c),new ZB(e.bounds.left+.72983*c,e.bounds.top+.23*c),new ZB(e.bounds.left+.84*c,e.bounds.top+.34085*c),new ZB(e.bounds.left+.39363*c,e.bounds.top+.79*c)]),this.ctx.fillStyle=te(Pn),this.ctx.fill(),this.ctx.restore()):e.type===yn&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+c/2,e.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=te(Pn),this.ctx.fill(),this.ctx.restore())),Rs(e)&&e.value.length){switch(this.ctx.font=this.createFontStyle(r)[0],this.ctx.fillStyle=te(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign=Os(e.styles.textAlign),C=Cs(e),Q=0,e.styles.textAlign){case lr.CENTER:Q+=C.width/2;break;case lr.RIGHT:Q+=C.width}w=C.add(Q,0,0,-C.height/2+1),this.ctx.save(),this.path([new ZB(C.left,C.top),new ZB(C.left+C.width,C.top),new ZB(C.left+C.width,C.top+C.height),new ZB(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Un(e.value,w),r.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(!jr(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if((u=e.styles.listStyleImage).type!==Pe.URL)return[3,18];U=void 0,l=u.url,B.label=15;case 15:return B.trys.push([15,17,,18]),[4,this.options.cache.match(l)];case 16:return U=B.sent(),this.ctx.drawImage(U,e.bounds.left-(U.width+10),e.bounds.top),[3,18];case 17:return B.sent(),ve.getInstance(this.options.id).error("Error loading list-style-image "+l),[3,18];case 18:return[3,20];case 19:A.listValue&&e.styles.listStyleType!==er.NONE&&(this.ctx.font=this.createFontStyle(r)[0],this.ctx.fillStyle=te(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new s(e.bounds.left,e.bounds.top+ae(e.styles.paddingTop,e.bounds.width),e.bounds.width,function(A,e){return zA(A)&&"normal"===A.value?1.2*e:A.type===N.NUMBER_TOKEN?e*A.number:qA(A)?ae(A,e):e}(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Un(A.listValue,C),r.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),B.label=20;case 20:return[2]}})})},ms.prototype.renderStackContent=function(A){return n(this,void 0,void 0,function(){var e,t,r,n,s,o,i,a,c,Q,w,u,U,l,C;return B(this,function(B){switch(B.label){case 0:return[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:B.sent(),e=0,t=A.negativeZIndex,B.label=2;case 2:return e<t.length?(C=t[e],[4,this.renderStack(C)]):[3,5];case 3:B.sent(),B.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:B.sent(),r=0,n=A.nonInlineLevel,B.label=7;case 7:return r<n.length?(C=n[r],[4,this.renderNode(C)]):[3,10];case 8:B.sent(),B.label=9;case 9:return r++,[3,7];case 10:s=0,o=A.nonPositionedFloats,B.label=11;case 11:return s<o.length?(C=o[s],[4,this.renderStack(C)]):[3,14];case 12:B.sent(),B.label=13;case 13:return s++,[3,11];case 14:i=0,a=A.nonPositionedInlineLevel,B.label=15;case 15:return i<a.length?(C=a[i],[4,this.renderStack(C)]):[3,18];case 16:B.sent(),B.label=17;case 17:return i++,[3,15];case 18:c=0,Q=A.inlineLevel,B.label=19;case 19:return c<Q.length?(C=Q[c],[4,this.renderNode(C)]):[3,22];case 20:B.sent(),B.label=21;case 21:return c++,[3,19];case 22:w=0,u=A.zeroOrAutoZIndexOrTransformedOrOpacity,B.label=23;case 23:return w<u.length?(C=u[w],[4,this.renderStack(C)]):[3,26];case 24:B.sent(),B.label=25;case 25:return w++,[3,23];case 26:U=0,l=A.positiveZIndex,B.label=27;case 27:return U<l.length?(C=l[U],[4,this.renderStack(C)]):[3,30];case 28:B.sent(),B.label=29;case 29:return U++,[3,27];case 30:return[2]}})})},ms.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},ms.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},ms.prototype.formatPath=function(A){var e=this;A.forEach(function(A,t){var r=ts(A)?A.start:A;0===t?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),ts(A)&&e.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},ms.prototype.renderRepeat=function(A,e,t,r){this.path(A),this.ctx.fillStyle=e,this.ctx.translate(t,r),this.ctx.fill(),this.ctx.translate(-t,-r)},ms.prototype.resizeImage=function(A,e,t){if(A.width===e&&A.height===t)return A;var r=this.canvas.ownerDocument.createElement("canvas");return r.width=e,r.height=t,r.getContext("2d").drawImage(A,0,0,A.width,A.height,0,0,e,t),r},ms.prototype.renderBackgroundImage=function(A){return n(this,void 0,void 0,function(){var e,t,r,n,s,o;return B(this,function(i){switch(i.label){case 0:e=A.styles.backgroundImage.length-1,t=function(t){var n,s,o,i,a,c,Q,w,u,U,l,C,g,E,F,h,H,d,f,p,N,K,I,T,m,R,L,O,v,D,b;return B(this,function(B){switch(B.label){case 0:if(t.type!==Pe.URL)return[3,5];n=void 0,s=t.url,B.label=1;case 1:return B.trys.push([1,3,,4]),[4,r.options.cache.match(s)];case 2:return n=B.sent(),[3,4];case 3:return B.sent(),ve.getInstance(r.options.id).error("Error loading background-image "+s),[3,4];case 4:return n&&(o=gs(A,e,[n.width,n.height,n.width/n.height]),h=o[0],K=o[1],I=o[2],f=o[3],p=o[4],E=r.ctx.createPattern(r.resizeImage(n,f,p),"repeat"),r.renderRepeat(h,E,K,I)),[3,6];case 5:t.type!==Pe.LINEAR_GRADIENT?t.type===Pe.RADIAL_GRADIENT&&(F=gs(A,e,[null,null,null]),h=F[0],H=F[1],d=F[2],f=F[3],p=F[4],N=0===t.position.length?[oe]:t.position,K=ae(N[0],f),I=ae(N[N.length-1],p),T=function(A,e,t,r,n){var B=0,s=0;switch(A.size){case Xe.CLOSEST_SIDE:A.shape===Ve.CIRCLE?B=s=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-n)):A.shape===Ve.ELLIPSE&&(B=Math.min(Math.abs(e),Math.abs(e-r)),s=Math.min(Math.abs(t),Math.abs(t-n)));break;case Xe.CLOSEST_CORNER:if(A.shape===Ve.CIRCLE)B=s=Math.min(pe(e,t),pe(e,t-n),pe(e-r,t),pe(e-r,t-n));else if(A.shape===Ve.ELLIPSE){var o=Math.min(Math.abs(t),Math.abs(t-n))/Math.min(Math.abs(e),Math.abs(e-r)),i=Ne(r,n,e,t,!0),a=i[0],c=i[1];s=o*(B=pe(a-e,(c-t)/o))}break;case Xe.FARTHEST_SIDE:A.shape===Ve.CIRCLE?B=s=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-n)):A.shape===Ve.ELLIPSE&&(B=Math.max(Math.abs(e),Math.abs(e-r)),s=Math.max(Math.abs(t),Math.abs(t-n)));break;case Xe.FARTHEST_CORNER:if(A.shape===Ve.CIRCLE)B=s=Math.max(pe(e,t),pe(e,t-n),pe(e-r,t),pe(e-r,t-n));else if(A.shape===Ve.ELLIPSE){o=Math.max(Math.abs(t),Math.abs(t-n))/Math.max(Math.abs(e),Math.abs(e-r));var Q=Ne(r,n,e,t,!1);s=o*(B=pe((a=Q[0])-e,((c=Q[1])-t)/o))}}return Array.isArray(A.size)&&(B=ae(A.size[0],r),s=2===A.size.length?ae(A.size[1],n):B),[B,s]}(t,K,I,f,p),m=T[0],R=T[1],0<m&&0<m&&(L=r.ctx.createRadialGradient(H+K,d+I,0,H+K,d+I,m),fe(t.stops,2*m).forEach(function(A){return L.addColorStop(A.stop,te(A.color))}),r.path(h),r.ctx.fillStyle=L,m!==R?(O=A.bounds.left+.5*A.bounds.width,v=A.bounds.top+.5*A.bounds.height,b=1/(D=R/m),r.ctx.save(),r.ctx.translate(O,v),r.ctx.transform(1,0,0,D,0,0),r.ctx.translate(-O,-v),r.ctx.fillRect(H,b*(d-v)+v,f,p*b),r.ctx.restore()):r.ctx.fill())):(i=gs(A,e,[null,null,null]),h=i[0],K=i[1],I=i[2],f=i[3],p=i[4],a=function(A,e,t){var r="number"==typeof A?A:function(A,e,t){var r=e/2,n=t/2,B=ae(A[0],e)-r,s=n-ae(A[1],t);return(Math.atan2(s,B)+2*Math.PI)%(2*Math.PI)}(A,e,t),n=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),B=e/2,s=t/2,o=n/2,i=Math.sin(r-Math.PI/2)*o,a=Math.cos(r-Math.PI/2)*o;return[n,B-a,B+a,s-i,s+i]}(t.angle,f,p),c=a[0],Q=a[1],w=a[2],u=a[3],U=a[4],(l=document.createElement("canvas")).width=f,l.height=p,C=l.getContext("2d"),g=C.createLinearGradient(Q,u,w,U),fe(t.stops,c).forEach(function(A){return g.addColorStop(A.stop,te(A.color))}),C.fillStyle=g,C.fillRect(0,0,f,p),0<f&&0<p&&(E=r.ctx.createPattern(l,"repeat"),r.renderRepeat(h,E,K,I))),B.label=6;case 6:return e--,[2]}})},r=this,n=0,s=A.styles.backgroundImage.slice(0).reverse(),i.label=1;case 1:return n<s.length?(o=s[n],[5,t(o)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},ms.prototype.renderBorder=function(A,e,t){return n(this,void 0,void 0,function(){return B(this,function(r){return this.path(function(A,t){switch(e){case 0:return Hs(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return Hs(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return Hs(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);case 3:default:return Hs(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}}(t)),this.ctx.fillStyle=te(A),this.ctx.fill(),[2]})})},ms.prototype.renderNodeBackgroundAndBorders=function(A){return n(this,void 0,void 0,function(){var e,t,r,n,s,o,i,a,c=this;return B(this,function(B){switch(B.label){case 0:return this.applyEffects(A.effects,2),e=A.container.styles,t=!ee(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor},{style:e.borderRightStyle,color:e.borderRightColor},{style:e.borderBottomStyle,color:e.borderBottomColor},{style:e.borderLeftStyle,color:e.borderLeftColor}],n=Ls(fs(e.backgroundClip,0),A.curves),t||e.boxShadow.length?(this.ctx.save(),this.path(n),this.ctx.clip(),ee(e.backgroundColor)||(this.ctx.fillStyle=te(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:B.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(e){c.ctx.save();var t=ss(A.curves),r=e.inset?0:1e4,n=function(A,e,t,r,n){return A.map(function(A,B){switch(B){case 0:return A.add(e,t);case 1:return A.add(e+r,t);case 2:return A.add(e+r,t+n);case 3:return A.add(e,t+n)}return A})}(t,-r+(e.inset?1:-1)*e.spread.number,(e.inset?1:-1)*e.spread.number,e.spread.number*(e.inset?-2:2),e.spread.number*(e.inset?-2:2));e.inset?(c.path(t),c.ctx.clip(),c.mask(n)):(c.mask(t),c.ctx.clip(),c.path(n)),c.ctx.shadowOffsetX=e.offsetX.number+r,c.ctx.shadowOffsetY=e.offsetY.number,c.ctx.shadowColor=te(e.color),c.ctx.shadowBlur=e.blur.number,c.ctx.fillStyle=e.inset?te(e.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),B.label=2;case 2:o=s=0,i=r,B.label=3;case 3:return o<i.length?(a=i[o]).style===Ft.NONE||ee(a.color)?[3,5]:[4,this.renderBorder(a.color,s,A.curves)]:[3,7];case 4:B.sent(),B.label=5;case 5:s++,B.label=6;case 6:return o++,[3,3];case 7:return[2]}})})},ms.prototype.render=function(A){return n(this,void 0,void 0,function(){var e;return B(this,function(t){switch(t.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=te(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),e=function(A){var e=new us(A,[]),t=new ws(e),r=[];return function A(e,t,r,n){e.container.elements.forEach(function(B){var s=jr(B.flags,4),o=jr(B.flags,2),i=new us(B,e.getParentEffects());jr(B.styles.display,2048)&&n.push(i);var a=jr(B.flags,8)?[]:n;if(s||o){var c=s||B.styles.isPositioned()?r:t,Q=new ws(i);if(B.styles.isPositioned()||B.styles.opacity<1||B.styles.isTransformed()){var w=B.styles.zIndex.order;if(w<0){var u=0;c.negativeZIndex.some(function(A,e){return w>A.element.container.styles.zIndex.order?(u=e,!1):0<u}),c.negativeZIndex.splice(u,0,Q)}else if(0<w){var U=0;c.positiveZIndex.some(function(A,e){return w>=A.element.container.styles.zIndex.order?(U=e+1,!1):0<U}),c.positiveZIndex.splice(U,0,Q)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(Q)}else B.styles.isFloating()?c.nonPositionedFloats.push(Q):c.nonPositionedInlineLevel.push(Q);A(i,Q,s?Q:r,a)}else B.styles.isInlineLevel()?t.inlineLevel.push(i):t.nonInlineLevel.push(i),A(i,t,r,a);jr(B.flags,8)&&hs(B,a)})}(e,t,t,r),hs(e.container,r),t}(A),[4,this.renderStack(e)];case 1:return t.sent(),this.applyEffects([],2),[2,this.canvas]}})})},ms);function ms(A){this._activeEffects=[],this.canvas=A.canvas?A.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),(this.options=A).canvas||(this.canvas.width=Math.floor(A.width*A.scale),this.canvas.height=Math.floor(A.height*A.scale),this.canvas.style.width=A.width+"px",this.canvas.style.height=A.height+"px"),this.fontMetrics=new Ks(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-A.x+A.scrollX,-A.y+A.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],ve.getInstance(A.id).debug("Canvas renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+A.scale)}var Rs=function(A){return A instanceof kn||A instanceof Xn||A instanceof xn&&A.type!==yn&&A.type!==Mn},Ls=function(A,e){switch(A){case Ee.BORDER_BOX:return ss(e);case Ee.CONTENT_BOX:return function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]}(e);case Ee.PADDING_BOX:default:return os(e)}},Os=function(A){switch(A){case lr.CENTER:return"center";case lr.RIGHT:return"right";case lr.LEFT:default:return"left"}},vs=(Ds.prototype.render=function(A){return n(this,void 0,void 0,function(){var e,t;return B(this,function(r){switch(r.label){case 0:return e=Re(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,A),[4,Ss(e)];case 1:return t=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=te(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(t,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},Ds);function Ds(A){this.canvas=A.canvas?A.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=A,this.canvas.width=Math.floor(A.width*A.scale),this.canvas.height=Math.floor(A.height*A.scale),this.canvas.style.width=A.width+"px",this.canvas.style.height=A.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-A.x+A.scrollX,-A.y+A.scrollY),ve.getInstance(A.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+A.scale)}function bs(A){return we(_A.create(A).parseComponentValue())}var Ss=function(A){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(A))})};"undefined"!=typeof window&&be.setContext(window);return function(A,e){return void 0===e&&(e={}),t=A,o=e,n(void 0,void 0,void 0,function(){var A,e,n,a,c,Q,w,u,U,l,C,g,E,F,h,H,d,f,p,N,K,I,T;return B(this,function(B){switch(B.label){case 0:if(!(A=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(e=A.defaultView))throw new Error("Document is not attached to a Window");return n=(Math.round(1e3*Math.random())+Date.now()).toString(16),a=uB(t)||"HTML"===t.tagName?function(A){var e=A.body,t=A.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),n=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new s(0,0,r,n)}(A):i(t),c=a.width,Q=a.height,w=a.left,u=a.top,U=r({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},o),l={backgroundColor:"#ffffff",cache:o.cache?o.cache:be.create(n,U),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:e.devicePixelRatio||1,windowWidth:e.innerWidth,windowHeight:e.innerHeight,scrollX:e.pageXOffset,scrollY:e.pageYOffset,x:w,y:u,width:Math.ceil(c),height:Math.ceil(Q),id:n},C=r({},l,U,o),g=new s(C.scrollX,C.scrollY,C.windowWidth,C.windowHeight),ve.create({id:n,enabled:C.logging}),ve.getInstance(n).debug("Starting document clone"),E=new bB(t,{id:n,onclone:C.onclone,ignoreElements:C.ignoreElements,inlineImages:C.foreignObjectRendering,copyStyles:C.foreignObjectRendering}),(F=E.clonedReferenceElement)?[4,E.toIFrame(A,g)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=B.sent(),H=A.documentElement?bs(getComputedStyle(A.documentElement).backgroundColor):He.TRANSPARENT,d=A.body?bs(getComputedStyle(A.body).backgroundColor):He.TRANSPARENT,f=o.backgroundColor,p="string"==typeof f?bs(f):null===f?He.TRANSPARENT:4294967295,N=t===A.documentElement?ee(H)?ee(d)?p:d:H:p,K={id:n,cache:C.cache,canvas:C.canvas,backgroundColor:N,scale:C.scale,x:C.x,y:C.y,scrollX:C.scrollX,scrollY:C.scrollY,width:C.width,height:C.height,windowWidth:C.windowWidth,windowHeight:C.windowHeight},C.foreignObjectRendering?(ve.getInstance(n).debug("Document cloned, using foreign object rendering"),[4,new vs(K).render(F)]):[3,3];case 2:return I=B.sent(),[3,5];case 3:return ve.getInstance(n).debug("Document cloned, using computed rendering"),be.attachInstance(C.cache),ve.getInstance(n).debug("Starting DOM parsing"),T=tB(F),be.detachInstance(),N===T.styles.backgroundColor&&(T.styles.backgroundColor=He.TRANSPARENT),ve.getInstance(n).debug("Starting renderer"),[4,new Ts(K).render(T)];case 4:I=B.sent(),B.label=5;case 5:return!0===C.removeContainer&&(bB.destroy(h)||ve.getInstance(n).error("Cannot detach cloned iframe as it is not in the DOM anymore")),ve.getInstance(n).debug("Finished rendering"),ve.destroy(n),be.destroy(n),[2,I]}})});var t,o}});
},{}],"g8W8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mindEq2Img=exports.flowEq2Img=void 0;var t=e(require("../html2canvas2"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(){n=function(){return e};var t,e={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof x?e:x,i=Object.create(o.prototype),c=new I(n||[]);return a(i,"_invoke",{value:$(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",m={};function x(){}function w(){}function b(){}var L={};h(L,u,function(){return this});var O=Object.getPrototypeOf,E=O&&O(O(T([])));E&&E!==o&&i.call(E,u)&&(L=E);var _=b.prototype=x.prototype=Object.create(L);function j(t){["next","throw","return"].forEach(function(e){h(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){function n(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"==r(h)&&i.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(h).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function $(e,r,n){var o=d;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:v,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function q(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=b,a(_,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:w,configurable:!0}),w.displayName=h(b,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,f,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},j(k.prototype),h(k.prototype,s,function(){return this}),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},j(_),h(_,f,"Generator"),h(_,u,function(){return this}),h(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(q),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),q(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;q(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var a=t.apply(e,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)})}}var a=exports.flowEq2Img=function(){var e=i(n().mark(function e(){var r,o,i,a,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!($(".text_canvas .equation-text").length>0)){e.next=17;break}return r={eqImgObj:{}},o=$("<div style='z-index:-1; top:-9999px;left:-9999px;'></div>").appendTo("body"),i=0,a=0,$(".text_canvas").each(function(t,e){if(e.innerHTML.indexOf('class="equation-text" ')>0){var n=$(e).width(),c=$(e).height(),u=$(e).attr("id");$(e).children().each(function(t,e){var r=$(e).width();r>n&&(n=r)});var s=$(e).find("svg");e.getBoundingClientRect();s.each(function(){var t=$(this);t.attr("width",t.width()),t.attr("height",t.height())});var f=$(e).clone();f.css({top:i+"px",left:0}),f.css({transform:"none"}),o.append(f),r.eqImgObj[u]={w:n,h:c,x:0,y:i},i+=c,a=a<n||0==a?n:a}}),o.css({height:i,width:a,position:"fixed"}),r.w=a,r.h=i,e.next=11,(0,t.default)(o[0],{useCORS:!0,backgroundColor:"transparent",scale:3});case 11:return c=e.sent,o.remove(),e.next=15,new Promise(function(t,e){var r=c.toDataURL("image/png");poAjax({data:{img:r},success:function(e){t(e.url)}},"uploadImage64")});case 15:return r.src=e.sent,e.abrupt("return",r);case 17:return e.abrupt("return",{});case 18:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),c=exports.mindEq2Img=function(){var e=i(n().mark(function e(){var r,o,i,a,c,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$("#mind_con").find(".topic-box .topic"),o=$("#mind_con").find("[mode]"),!(r.find(".equation-text").length>0||o.length>0)){e.next=15;break}return i=0==$(".katex-box").length?$("<div class='katex-box'></div>").appendTo("body"):$(".katex-box").html(""),r.each(function(t,e){var r=$(e);if(r.find(".equation-text").length>0){var n=r.clone(),o=r.parent(),a=o.attr("style"),c=[];a.indexOf("font-size")>-1&&c.push("font-size:"+o.css("font-size")+";"),a.indexOf("font")>-1&&c.push("font:"+o.css("font")+";"),a.indexOf("color")>-1&&c.push("color:"+o.css("color")+";"),a.indexOf("font-family")>-1&&c.push("font-family: "+o.css("font-family")+";"),a.indexOf("bold")>-1&&c.push("font-weight: "+(o.css("font-weight")?"bold":"normal")+";"),a.indexOf("italic")>-1&&c.push("font-style: "+(o.css("font-style")?"italic":"normal")+";"),a.indexOf("text-align")>-1&&c.push("text-align:"+(o.css("text-align")||o.css("text-align"))+";"),a.indexOf("text-decoration")>-1&&c.push("text-decoration:"+o.css("text-decoration")+";"),a.indexOf("flex-direction")>-1&&c.push("writing-mode:"+r.css("writing-mode")+";"),c.push("max-height:"+r.css("max-height")+";max-width:"+r.css("max-width")+";width:"+(r.outerWidth()+3)+"px;height:"+(r.outerHeight()+1)+"px"),n.attr({style:c.join(""),id:"katex_"+o.attr("id")}),i.append(n)}}),i.find("svg").each(function(){var t=$(this);t.attr("width",t.width()),t.attr("height",t.height())}),a="",e.next=9,(0,t.default)(i.get(0),{useCORS:!0,backgroundColor:"transparent",scale:1,scrollY:0});case 9:return c=e.sent,a=c.toDataURL("image/png"),e.next=13,new Promise(function(t,e){poAjax({data:{img:a},success:function(e){t(e.url)}},"uploadImage64")});case 13:u=e.sent,i.attr("img-src",u);case 15:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();
},{"../html2canvas2":"ArK3"}],"geLb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("canvg"),e=o(require("./designer.2svg")),r=o(require("./mindtosvg")),n=require("./eqtoimg");function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var a=e&&e.prototype instanceof w?e:w,i=Object.create(a.prototype),u=new I(n||[]);return o(i,"_invoke",{value:j(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var v="suspendedStart",d="suspendedYield",y="executing",g="completed",m={};function w(){}function x(){}function b(){}var A={};l(A,c,function(){return this});var L=Object.getPrototypeOf,E=L&&L(L(T([])));E&&E!==r&&n.call(E,c)&&(A=E);var k=b.prototype=w.prototype=Object.create(A);function O(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){function r(o,i,u,c){var s=p(t[o],t,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==a(l)&&n.call(l,"__await")?e.resolve(l.__await).then(function(t){r("next",t,u,c)},function(t){r("throw",t,u,c)}):e.resolve(l).then(function(t){f.value=t,u(f)},function(t){return r("throw",t,u,c)})}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=v;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var c=S(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:d,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return x.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:x,configurable:!0}),x.displayName=l(b,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,f,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},O(_.prototype),l(_.prototype,s,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(h(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then(function(t){return t.done?t.value:i.next()})},O(k),l(k,f,"Generator"),l(k,c,function(){return this}),l(k,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function u(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function i(t){u(a,n,o,i,c,"next",t)}function c(t){u(a,n,o,i,c,"throw",t)}i(void 0)})}}var s={init:function(){var t=c(i().mark(function t(o,a){var u,c,s,f;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(u=a.type||"svg",c=null,!a.fileType||"mind"!=a.fileType){t.next=11;break}return t.next=5,(0,n.mindEq2Img)();case 5:return a.eqObj=t.sent,t.next=8,r.default.init(o,a);case 8:c=t.sent,t.next=15;break;case 11:return t.next=13,(0,n.flowEq2Img)();case 13:a.eqObj=t.sent,c=e.default.init(o,a);case 15:if("png"!=u&&"jpg"!=u&&"pnghd"!=u){t.next=26;break}return s=1,s="pnghd"==u?2:"jpg"==u?1.5:1,s=a.scale||s,t.next=22,this.drawCanvas(c,s,u);case 22:return f=t.sent,t.abrupt("return",f);case 26:if("svg"!=u&&"pdfhd"!=u){t.next=28;break}return t.abrupt("return",c);case 28:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),drawCanvas:function(){var e=c(i().mark(function e(r,n,o){var a,u,c,s,f,l,h;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this,!(r.w*r.h>268435456/Math.pow(n,2))){e.next=3;break}return e.abrupt("return",{status:"fail",tip:"图片大小超出限制"});case 3:return e.next=5,a.getSvgCORSImageUrl(r.content);case 5:if(!(u=e.sent).length){e.next=15;break}return e.next=9,a.replaceErrorUrl(u);case 9:if(!(c=e.sent).error){e.next=14;break}return e.abrupt("return",{status:"fail",tip:"不授信图片无法下载"});case 14:r.content=a.replaceSvgUrl(r.content,c);case 15:return $("#canvas_exporter").remove(),$('<canvas id="canvas_exporter" width="'+r.w*n+'" height="'+r.h*n+'"></canvas>').appendTo("body"),s=$("#canvas_exporter")[0],f=s.getContext("2d"),e.next=21,t.Canvg.from(f,r.content.replace(/\u00a0/g,"<tspan> </tspan>"),{anonymousCrossOrigin:!0,enableRedraw:!0,forceRedraw:!0,ignoreDimensions:!0,ignoreClear:!0,scaleWidth:r.w*n,scaleHeight:r.h*n,offsetX:r.w*(n-1)/2/n,offsetY:r.h*(n-1)/2/n});case 21:return l=e.sent,e.next=24,l.render();case 24:if(h="",h=o&&-1!==o.indexOf("jpg")?s.toDataURL("image/jpeg"):s.toDataURL(),$("#canvas_exporter").remove(),!(h.length<10)){e.next=31;break}return e.abrupt("return",{status:"exceed",tip:"文件内容超出下载限制"});case 31:return e.abrupt("return",{status:"success",img:h});case 32:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),setPageColor:function(t,n){return"flow"!=n?r.default.setPageColor(t):e.default.setPageColor(t)},setWatermark:function(t,n){return"flow"!=n?r.default.setWatermark(t):e.default.setWatermark(t)},drawBrand:function(t,n){return"flow"!=n?r.default.drawBrand(t):e.default.drawBrand(t)},getSvgCORSImageUrl:function(){var t=c(i().mark(function t(e){var r,n,o,a,u;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=function(t){var e=document.createElement("canvas");e.getContext("2d").drawImage(t,0,0);try{return e.toDataURL(),!1}catch(r){return!0}},a=function(t){return new Promise(function(e){if(t>=r.length)e(o);else{var n=new Image;n.crossOrigin="anonymous",n.onload=function(){u(n)&&o.push(r[t]),e(a(t+1))},n.onerror=function(){o.push(r[t]),e(a(t+1))},n.src=r[t]}})},r=[],(n=$("<div style='display: none;'>"+e+"</div>>").appendTo("body")).find("image").each(function(){var t=$(this).attr("xlink:href");r.includes(t)||r.push(t)}),n.remove(),o=[],t.next=9,a(0);case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),replaceErrorUrl:function(){var t=c(i().mark(function t(e){var r;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map(function(t){return encodeURIComponent(t)}),t.next=3,new Promise(function(t,n){poAjax({data:{urls:r.join(",")},type:"post",success:function(r){for(var n=r.urls,o=n.length,a={},i=0;i<o;i++)-1!=e[i].indexOf(".processon.com")?a[e[i]]="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7":a[e[i]]=n[i],n[i]||(a.error="fail"),t(a)}},"processCorsImage")});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),replaceSvgUrl:function(t,e){var r=$("<div>"+t+"</div>").appendTo("body");r.find("image").each(function(){var t=$(this).attr("xlink:href");if(t)for(var r in e){var n=t.replace(/^(http|https):\/\//,"");-1!=r.indexOf(n)&&$(this).attr("xlink:href",e[r])}});var n=r.html();return r.remove(),n}},f=exports.default=s;
},{"canvg":"e3eR","./designer.2svg":"Hq8W","./mindtosvg":"FWYK","./eqtoimg":"g8W8"}],"jSBz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){poAjax({type:"GET",success:function(i){window.memberObj=i.privilege,memberObj.member=!(!memberObj.member&&!memberObj.orgMember),memberObj.member&&(m(["processon_web"]),e())}},"privilege")},m=function(e){a.isSupportPrivilege=!!e;var m={flowShapeNum:1e5,mindShapeNum:1e5,themesCustomise:1,backgroundImage:!1,Latex:!1,download:!1,downloadPart:!0,watermark:!1,flowTemplate:!1,mindTemplate:!1,mindTheme:!1,clipboardImage:!1,insert_watermark:!1,uploadFile:!1,AIGC:!1,canvasNum:1},i={processon_web:{Latex:!0,download:!0,watermark:!0,pasteImage:!0,myShape:!0,clipboardImage:!0,insert_watermark:!0,themesCustomise:1e5,mindTheme:!0,backgroundImage:!0,uploadFile:!0,AIGC:!0,canvasNum:100}};(e=e||[]).map(function(e){i[e]&&(m=function(e,m){var i={};e.flowShapeNum&&m.flowShapeNum&&(i.flowShapeNum=Math.max(e.flowShapeNum,m.flowShapeNum));e.mindShapeNum&&m.mindShapeNum&&(i.mindShapeNum=Math.max(e.mindShapeNum,m.mindShapeNum));e.themesCustomise&&m.themesCustomise&&(i.themesCustomise=Math.max(e.themesCustomise,m.themesCustomise));return $.extend({},e,m,i)}(m,i[e]))}),a.poPrivileges=JSON.parse(JSON.stringify(m))},i={preTime:0,IntervalTime:12e4},a={wpsUserType:10,wpsVipInfo:[10],wpsVipExpireTime:{},isSupportPrivilege:null,poPrivileges:{flowShapeNum:60,mindShapeNum:150,themesCustomise:0,backgroundImage:!1,Latex:!1,download:!1,downloadPart:!1,watermark:!1,docerPicture:!1,docerIcon:!1,flowTemplate:!1,mindTemplate:!1,mindTheme:!1,clipboardImage:!1},userData:{},userTypeChangRegist:function(e){},init:function(m){var a=setTimeout(function(){m&&m()},1e4);e(function(){clearTimeout(a),m&&m(),i.preTime=(new Date).getTime()})},test:function(e){if(void 0===this.poPrivileges[e])return!1;var m=(new Date).getTime();return m-i.preTime<i.IntervalTime?this.poPrivileges[e]:(i.preTime=m,this.init(),this.poPrivileges[e])}},t=exports.default=a;
},{}],"srPL":[function(require,module,exports) {
window.TeamShape={orgId:"",isComponentAdmin:!1,config:{panelItemWidth:60,panelItemHeight:60,host:""},categories:[{id:"123",name:"",title:"未命名分类"}],shapeMaps:{},keyWord:"",moveCategorieId:"",acComponentId:"",acCategoryId:"",init:function(e,t){this.orgId=e,this.isComponentAdmin=t;var a=this;poAjax({type:"post",data:{orgId:a.orgId},success:function(e){a.categories=e;for(var t=0;t<a.categories.length;t++){var n=a.categories[t];n.id=n.componentItemId,a.renderCategory(n);var i=localStorage.getItem("team_categories");null==i?0==t&&(a.getCategoryList(n.id),$("#"+n.id).removeClass("panel_team_collapsed")):i.indexOf(n.id)>-1&&(a.getCategoryList(n.id),$("#"+n.id).removeClass("panel_team_collapsed"))}a.ui.init()},error:function(){}},"componentList"),this.initEvt(),$("#team-shapes-container").off("click.team_shape_edit li").on("click",".team_shape_edit li",function(e){e.stopPropagation();var t=$(this),a=t.parent().attr("data-shapeid"),n=t.parent().attr("data-categories"),i=t.attr("tit"),o=t.parent().attr("data-title");if("edit"==i){var s={elements:{}};TeamShape.shapeMaps[a].elements=TeamShape.utils.resetShapes(TeamShape.shapeMaps[a].elements,{x:100,y:100});for(var r=0;r<TeamShape.shapeMaps[a].elements.length;r++){var p=TeamShape.shapeMaps[a].elements[r];s.elements[p.id]=p}s.page={padding:20,backgroundColor:"transparent",orientation:"portrait",gridSize:15,width:1855,showGrid:!0,lineJumps:!1,height:844},$(".team_shape_title").text("编辑组件: "+TeamShape.shapeMaps[a].title),$("#team_shape_form_title").val(TeamShape.shapeMaps[a].title),$("#team_shape_form_def").val(window.btoa(encodeURIComponent(JSON.stringify(s)))),$("#team_shape_dialog").dialog(),0==$(".team_shape_iframe").length&&$(".team_shape_content").append('<iframe style="width:100%;height: calc(100% - 52px);border:1px solid #ccc;" name="iframe_team_shape" id="team_shape_iframe"></iframe>'),$("#team_shape_form")[0].submit(),$("#team_shape_iframe").onreadystatecgange=function(){this.readyState},TeamShape.initMessage(a,n)}else if("copy"==i)TeamShape.copyShape(a,n);else if("move"==i)TeamShape.moveShape(a,n);else if("info"==i){var l=$("#teamshape_"+a+" .panel_team_item_title"),c=l.text();l.html('<input type="text" class="po-input-other panel_team_shape_input" value="'+c+'"/>'),$(".panel_team_shape_input").focus(),$(".panel_team_shape_input").select(),$(".panel_team_shape_input").off("keyup").on("keyup",function(e){e.stopPropagation(),13!=e.keyCode||TeamShape.updataTitle(a,$(this).val())}),$(".panel_team_shape_input").off("blur").on("blur",function(){TeamShape.updataTitle(a,$(this).val())}),$(".panel_team_shape_input").off("click").on("click",function(e){e.stopPropagation()})}else"delete"==i&&TeamShape.removeShape(a,n,o);$(this).parent().remove()}),$("body").click(function(){$(".categories_edit").hide(),$(".team_shape_edit").hide()}),$(function(){$(window).unbind("beforeunload"),window.onbeforeunload=null}),void 0!==window.addEventListener?window.addEventListener("message",a.onmessage,!1):void 0!==window.attachEvent&&window.attachEvent("onmessage",a.onmessage)},initEvt:function(){var e=this;$(".panel_team_title").unbind().bind("click",function(){if(!$(this).hasClass("search")){$(this).parent().toggleClass("panel_team_collapsed");var t="";if($(".panel_team_container").each(function(e,a){if(0==$(a).hasClass("panel_team_collapsed")){var n=$(a).attr("id");n&&(t+=n+",")}}),localStorage.setItem("team_categories",t),!$(this).parent().hasClass("panel_team_collapsed")&&0==$(this).parent().find(".panel_team_box").length){var a=$(this).parent().attr("id");e.getCategoryList(a)}}}),$(document).off("mousemove.panel_team_box").on("mousemove.panel_team_box",function(e){var t=$(e.target).parents(".panel_team_container"),a=t.find(".panel-team-shape");if("dragging"==Designer.op.state&&t.length>0){if(0==$("#add_teamshape_box").length){t.css("cursor","url("+staticBasePath+"/assets/images/designer/add.svg) 0 0, pointer");var n=a.width(),i=a.height();a.offset().top;i>0&&a.prepend('<div id="add_teamshape_box" style="width:'+(n+2)+"px;height:"+i+'px; "></div>')}}else t.css("cursor","auto"),$("#add_teamshape_box").remove()}),$(".panel_team_container").off().on("mouseup.myshapes",function(){if("dragging"==Designer.op.state)if(e.isComponentAdmin){var t=$(this).attr("id"),a=Utils.getSelectedIds();if(a.length>500)$.toast({text:"图形数量不能超出500",type:"warning"});else{Utils.getControlBox(a);if(a.length>0){for(var n=[],i=0,o=a.length;i<o;i++){var s=a[i],r=Utils.copy(Model.getShapeById(s));if(n.push(r),r.children)for(var p=0;p<r.children.length;p++)if(a.indexOf(r.children[p])<0){var l=Utils.copy(Model.getShapeById(r.children[p]));n.push(l)}}var c=Utils.copyArray(Utils.getContainedShapes(n)),d=[];n=n.concat(c);for(i=0;i<c.length;i++)d.push(c[i].id);var m=Model.define.elements;for(key in m)if("linker"==m[key].name){var h=Utils.copy(m[key]);d.indexOf(h.to.id)>-1&&d.indexOf(h.from.id)>-1&&n.push(h)}var g=e.flow2svg.init(n);n=e.utils.resetShapes(n);var f={id:Utils.newId(),category:t,title:"未命名组件",elements:n,box:Utils.getShapesBounding(n),thumbnail:g};poAjax({type:"post",data:{orgId:e.orgId,componentItemId:t,title:"未命名组件",definition:JSON.stringify(n),thumbFileStr:g,ownerId:userObj.userId,ownerName:userObj.fullName},success:function(a){f.id=a.componentId,f.thumbnail=a.thumbUrl,$("#"+t).find(".team_content").hide(),e.updateShape(f,!0)},error:function(){}},"componentSave")}}}else $.toast({text:"您当前没有操作权限，请联系管理员开通",type:"warning"})}),$(".panel_team_box").off("mousedown").on("mousedown",function(t){t.stopPropagation();var a=$(this),n=a.attr("shapeId");if(!a.hasClass("readonly")&&""!=e.shapeMaps[n].elements){var i,o=[];Designer.op.changeState("creating_from_panel");var s=null,r=[],p=[],l=$("#designer_canvas"),c=e.utils.getCreatingImg(n);$("#designer").bind("mousemove.creating",function(t){e.utils.setCreatingImg(c,t)});for(var d=[],m=Model.orderList.length-1;m>=0;m--){var h=Model.orderList[m].id,g=Model.getShapeById(h);if((!g.attribute||!g.attribute.collapseBy)&&("linker"!=g.name&&!g.parent)){var f=Utils.getControlBox([h]);f.id=h,d.push(f)}}$("#canvas_container").bind("mousemove.create",function(t){var a=Utils.getRelativePos(t.pageX,t.pageY,l);if(null==s){s=e.utils.createShapes(n,a.x,a.y);for(var c=0;c<s.length;c++){(h=s[c]).pos=Utils.copy(h.props),"linker"==h.name&&(h.to_=Utils.copy(h.to),h.from_=Utils.copy(h.from),h.points_=Utils.copyArray(h.points)),r.push(h.id),$("#"+h.id).attr("class","shape_box_creating"),p.push($("#"+h.id))}}for(var m=0;m<s.length;m++){var h,g=p[m];if((h=s[m]).boxPos?(h.props.x=a.x.restoreScale()-h.boxPos.w/2+h.pos.x,h.props.y=a.y.restoreScale()-h.boxPos.h/2+h.pos.y):(h.props.x=a.x.restoreScale()-h.props.w/2,h.props.y=a.y.restoreScale()-h.props.h/2),"linker"==h.name&&(h.from=$.extend(!0,h.from,TeamShape.utils.resetPosByMouse(a,h.from_,h)),h.to=$.extend(!0,h.to,TeamShape.utils.resetPosByMouse(a,h.to_,h)),"broken"==h.linkerType||"curve"==h.linkerType))for(c=0;c<h.points_.length;c++)h.points[c]=TeamShape.utils.resetPosByMouse(a,h.points_[c],h);var f=h.props,u=Designer.op.snapLine(f,[h.id],!0,h,d);u.attach?h.attachTo=u.attach.id:delete h.attachTo,h.container||(u.container?h.container=u.container.id:delete h.container),g.css({left:h.props.x.toScale()-(g.width()-h.props.w.toScale())/2+"px",top:h.props.y.toScale()-(g.height()-h.props.h.toScale())/2+"px","z-index":Model.orderList.length})}o=Utils.getShapeAnchorInLinker(s[0]),Designer.op.hideLinkPoint();for(c=0;c<o.length;c++)for(var _=o[c],v=0;v<_.anchors.length;v++){var y=_.anchors[v];Designer.op.showLinkPoint(Utils.toScale(y))}"linker"==s[0].name&&(i=Designer.op.moveLinkerFocus(s[0]))});var u=!1;$("#canvas_container").bind("mouseup.create",function(e){u=!0}),$(document).bind("mouseup.create",function(){if($(this).unbind("mouseup.create"),$("#designer").unbind("mousemove.creating"),$("#creating_shape_container").hide(),Designer.op.hideLinkPoint(),Designer.op.hideSnapLine(),$("#canvas_container").unbind("mouseup.create").unbind("mousemove.create"),null!=s)if(0==u)for(var e=0;e<p.length;e++){(l=p[e]).remove()}else{MessageSource.beginBatch(),i&&(s[0]=Utils.copy(i));for(var t=0;t<s.length;t++){var n=s[t],l=p[t];if(n.onCreated&&name.indexOf("myshape")<0)if(0==n.onCreated())return l.remove(),void MessageSource.commit();for(key in n)key.indexOf("_")>-1&&delete n[key],"boxPos"==key&&delete n[key],"pos"==key&&delete n[key];"linker"==n.name&&(n.props={zindex:n.props.zindex}),l.attr("class","shape_box"),Designer.events.push("created",n)}Model.addMulti(s),Utils.unselect(),Utils.selectShape(r),1==s.length&&Designer.op.editShapeText(s[0]);for(Utils.getShapeContext(s[0].id),p[0].position(),e=0;e<o.length;e++){var c=o[e],d=c.linker;if("line"==c.type){Utils.copy(d);var m=Utils.copy(d);if(m.id=Utils.newId(),1==c.anchors.length){var h=c.anchors[0],g=Utils.getPointAngle(s[0].id,h.x,h.y,7);d.to={id:s[0].id,x:h.x,y:h.y,angle:g},m.from={id:s[0].id,x:h.x,y:h.y,angle:g}}else if(2==c.anchors.length){var f,_,v=c.anchors[0],y=c.anchors[1];Utils.measureDistance(d.from,v)<Utils.measureDistance(d.from,y)?(f=v,_=y):(f=y,_=v);g=Utils.getPointAngle(s[0].id,f.x,f.y,7);d.to={id:s[0].id,x:f.x,y:f.y,angle:g},g=Utils.getPointAngle(s[0].id,_.x,_.y,7),m.from={id:s[0].id,x:_.x,y:_.y,angle:g}}c.anchors.length<=2&&(d=Designer.op.beautifyLinkerFocus(d,!0),m=Designer.op.beautifyLinkerFocus(m,!0),Designer.painter.renderLinker(d,!0),Model.update(d),Designer.painter.renderLinker(m,!0),m.props.zindex=Model.maxZIndex+1,Model.add(m),Designer.events.push("linkerCreated",m))}else{h=c.anchors[0],g=Utils.getPointAngle(s[0].id,h.x,h.y,7);"from"==c.type?d.from={id:s[0].id,x:h.x,y:h.y,angle:g}:d.to={id:s[0].id,x:h.x,y:h.y,angle:g},d=Designer.op.beautifyLinkerFocus(d,!0),Designer.painter.renderLinker(d,!0),Model.update(d)}}MessageSource.commit();s[0].props.w,s[0].props.h;var x=Utils.getControlBox(r);Designer.op.changeCanvas(x),Designer.events.push("resetBrokenLinker")}a.css({left:"0px",top:"0px"}),Designer.op.resetState()})}}),$(".edit-team-container-icon").off().on("click",function(e){e.stopPropagation(),$(".team_shape_edit").hide();var t=$(this);$("#team-shapes-container .categories_edit").remove();var a=t.parent().parent().parent(),n=a.attr("id"),i=(a.find(".panel_team_title_content").text(),$("#"+n+" .panel_team_title_content")),o=i.text();i.html('<input type="text" class="po-input-other panel_team_title_input" value="'+o+'"/>'),$('<span class="po-diagraming-icons edit_panel_team_title_input">&#xe974;</span>').insertAfter("#"+n+" .panel_team_title_content"),$(".edit_team_container").css("right","1000px"),$(".panel_team_title_input").focus(),$(".panel_team_title_input").select(),$(".panel_team_title_input").off("keyup").on("keyup",function(e){e.stopPropagation(),13!=e.keyCode||TeamShape.updataCategory(n,$(this).val())}),$(".panel_team_title_input").off("blur").on("blur",function(){TeamShape.updataCategory(n,$(this).val())}),$(".panel_team_title_input").off("click").on("click",function(e){e.stopPropagation()}),$(".edit_panel_team_title_input").off("click").on("click",function(e){e.stopPropagation(),TeamShape.updataCategory(n,$(".panel_team_title_input").val())})}),$(".delete-team-container-icon").off().on("click",function(e){e.stopPropagation(),$(".team_shape_edit").hide();var t=$(this);$("#team-shapes-container .categories_edit").remove();var a=t.parent().parent().parent(),n=a.attr("id"),i=a.find(".panel_team_title_content").text();TeamShape.removeCategory(n,i)}),$(".edit_team_shape").off().on("click",function(e){e.stopPropagation(),$(".categories_edit").hide();var t=$(this);$("#team-shapes-container .team_shape_edit").remove(),$("#shape_team_thumb").hide();var a=t.parent(),n=a.attr("shapeid"),i="<ul class='team_shape_edit menu' data-categories='"+a.parent().attr("id").substring(11)+"' data-title='"+a.find(".panel_team_item_title").text()+"' data-shapeId='"+n+"' ><li class='po-menu-item' tit='edit'> &nbsp;&nbsp;编辑</li><li class='po-menu-item' tit='copy'>&nbsp;&nbsp;复制</li><li class='po-menu-item' tit='move'>&nbsp;&nbsp;移动</li><li class='po-menu-item' tit='info'>&nbsp;&nbsp;修改标题</li><li class='po-menu-item' tit='delete'>&nbsp;&nbsp;删除</li></ul>";a.append(i);var o=a.offset().top;window.innerHeight-o<170&&(o-=100),$("#team-shapes-container .team_shape_edit").css({top:o+"px"}),$("#team-shapes-container .team_shape_edit").css({left:$(this).offset().left+"px"})}),$(".edit_team_shape").off("mousedown").on("mousedown",function(e){e.stopPropagation()}),$(".panel_team_box").off("mouseenter").on("mouseenter",function(){if(!$(this).hasClass("readonly")&&"dragging"!=Designer.op.state){var t=$(this),a=$(this).attr("shapeId"),n=TeamShape.shapeMaps[a],i=$("#shape_team_thumb");i.children("div").html(n.title);var o=i.children("iframe");o.css({width:n.imgW,height:n.imgH,transform:"scale("+200/n.imgH+")"}),o.attr("src",n.thumbnail),i.attr("current",a),i.show();var s=t.offset().top-$("#designer_header").outerHeight()+t.height()/2-i.outerHeight()/2-40;s<5?s=5:s+i.outerHeight()>$("#designer_viewport").height()-5&&(s=$("#designer_viewport").height()-5-i.outerHeight()-40),i.css("top",s),e.shapeMaps[a].elements||poAjax({type:"post",data:{orgId:e.orgId,componentId:a},success:function(t){var n=t.chartComponent;e.shapeMaps[a].elements=JSON.parse(n.definition)},error:function(){}},"componentGet")}}).off("mouseleave").on("mouseleave",function(){$("#shape_team_thumb").hide()})},initMessage:function(e,t){TeamShape.acComponentId=e,TeamShape.acCategoryId=t},onmessage:function(e){if("https://api.processon.com"==e.origin){var t=e.data;if(t&&"string"!=typeof t){var a=t.thumbnailSvg,n=JSON.parse(decodeURIComponent(window.atob(t.def)));$("#team_shape_dialog").dialog("close");var i=[];for(item in n.elements)i.push(n.elements[item]);i=TeamShape.utils.resetShapes(i),TeamShape.updataShape(TeamShape.acComponentId,TeamShape.acCategoryId,JSON.stringify(i),a),$("#team_shape_iframe").remove()}}},updateShape:function(e,t){if(t){var a=e.elements;a=this.utils.resetShapes(a),e.box=Utils.getShapesBounding(a)}this.shapeMaps[e.id]=e,this.renderPanelItem(e)},renderPanelItem:function(e,t){var a=this,n=(this.config.panelItemWidth,this.config.panelItemHeight,$("#teamshape_"+e.id)),i=!1;if(0==n.length){var o="<div class='panel_team_box' id ='teamshape_"+e.id+"' shapeId ='"+e.id+"'><div style='width: 84px;height: 84px;position: absolute; z-index: 1;'></div> <span class='panel_team_item_bg'> </span><p class='panel_team_item_title'>"+e.title+"</p> "+(TeamShape.isComponentAdmin?"<span class='edit_team_shape' ><span class='po-diagraming-icons' style='font-size: 14px;color:#fff;'> &#xe904;</span></span> ":"")+"</div>";i=!0,panelBox=t?$(o).appendTo("#panel_team_"+e.category):$(o).prependTo("#panel_team_"+e.category)}var s=60,r=60,p=1,l=new Image;l.src=e.thumbnail,l.onload=function(){s=l.width,r=l.height,p=60/s,e.imgW=s,e.imgH=r,i?$("#teamshape_"+e.id).children(".panel_team_item_bg").html("<iframe class='panel_team_item' scrolling='no' style='border:none; transform: scale("+p+");' src='"+e.thumbnail+"' width='"+s+"' height='"+r+"'></iframe>"):n.children("img").attr("src",e.thumbnail),n.children("img").css({}),a.initEvt(),l=null}},removeShape:function(e,t,a){var n=this;Util.confirm({content:"是否要删除图形 <span style='color:#4386F5'>「"+a+"」</span> ，请确认？<br/> 此操作无法恢复，请谨慎操作。",okval:"删除",tokenClass:"team-shape-remove-confirm",onConfirm:function(){poAjax({type:"post",data:{componentId:e},success:function(a){$.toast({text:"组件删除成功"}),n.getCategoryList(t),delete n.shapeMaps[e]},error:function(){$.toast({text:"组件删除失败",type:"error"})}},"componentRemove")}})},copyShape:function(e,t){var a=this;poAjax({type:"post",data:{componentId:e},success:function(e){$.toast({text:"复制图形成功"}),a.getCategoryList(t)},error:function(){$.toast({text:"复制图形失败",type:"error"})}},"componentCopy")},moveShape:function(e,t){$("#search-team-category").val(""),TeamShape.keyWord="",this.renderCategoryList(e,t),$("#teamcategory_dialog").dialog()},renderCategoryList:function(e,t){var a=this;poAjax({url:"/api/org/chart/component/item/list",data:{orgId:a.orgId,keyword:TeamShape.keyWord},success:function(n){var i=n,o=[];0==i.length&&$("#team_category_list").empty().html("<div class='nofiles'><img src='"+staticBasePath+"/images/empty_state_dustbin.svg'/><div>未找到对应小组</div></div>");for(var s=0;s<i.length;s++){var r=i[s];o.push('<li data-category="'+r.componentItemId+'" class="team-component-row"><span class="member-col2 "><img class=" category-ico" src="'+staticBasePath+'/images/color_folder.svg" alt="">'+r.title+'</span> <span class="po-diagraming-icons team-component-row-icons">&#xe974;</span> </li>')}$("#team_category_list").empty().append(o.join("")),$(".team-component-row").off().on("click",TeamShape.selectCategory),$("#teamcategory_dialog .okbtn").off().on("click",function(){""!=TeamShape.moveCategorieId?TeamShape.moveCategorieId!=t?(poAjax({type:"post",data:{componentId:e,toComponentItemId:TeamShape.moveCategorieId},success:function(e){$.toast({text:"移动图形成功"}),a.getCategoryList(TeamShape.moveCategorieId),a.getCategoryList(t),TeamShape.moveCategorieId="",$("#teamcategory_dialog").dialog("close")},error:function(){$.toast({text:"移动图形失败",type:"error"})}},"componentMove"),$("#teamCategory_dialog").dialog("close")):$.toast({text:"图形已在分类中",type:"error"}):$.toast({text:"请选择要移动的项目组",type:"error"})}),$("#teamcategory_dialog .cancel-button").off().on("click",function(){$("#teamcategory_dialog").dialog("close")})}},"componentList")},selectCategory:function(){var e=$(this).attr("data-category");e&&TeamShape.moveCategorieId==e?($(this).removeClass("active"),TeamShape.moveCategorieId=""):(TeamShape.moveCategorieId=e,$(this).addClass("active").siblings().removeClass("active"))},bindCategoryEvent:function(e,t){$("#search-team-category").off().on("keyup",function(a){var n=$(this).val();13==a.keyCode&&($("#team_member_list").empty(),TeamShape.keyWord=n,TeamShape.renderCategoryList(e,t))}),$("#search-category-icons").off().on("click",function(a){var n=$(this).val();$("#team_member_list").empty(),TeamShape.keyWord=n,TeamShape.renderCategoryList(e,t)})},renderCategory:function(e){0==$("#"+e.id).length&&$("#team-shapes-container").append("<div class='panel_team_container panel_team_collapsed' id="+e.id+" ><h3 class='panel_team_title'><div class='ico ico_accordion'></div> <span class='panel_team_title_content'>"+e.title+"  </span> "+(TeamShape.isComponentAdmin?"<div class='edit_team_container' > <span class='po-diagraming-icons edit-team-container-icon' original-title='重命名' >&#xe6ae;</span>  <span class='po-diagraming-icons delete-team-container-icon' original-title='删除'>&#xe7b7;</span></div>":"")+" </h3> <div class='content'><div class='team_content'>拖到此处<br>添加到此分类</div></div><div id='panel_team_"+e.id+"' class='content panel-team-shape'></div></div>"),this.initEvt()},renderAddCategory:function(e){0==$("#"+e.id).length&&$(".panel_team_add").after("<div class='panel_team_container panel_team_collapsed' id="+e.id+" ><h3 class='panel_team_title'><div class='ico ico_accordion'></div> <span class='panel_team_title_content'>"+e.title+"  </span> "+(TeamShape.isComponentAdmin?"<div class='edit_team_container' > <span class='po-diagraming-icons edit-team-container-icon' original-title='重命名' >&#xe6ae;</span>  <span class='po-diagraming-icons delete-team-container-icon' original-title='删除' >&#xe7b7;</span></div>":"")+" </h3> <div class='content'><div class='team_content '>拖到此处<br>添加到此分类</div></div><div id='panel_team_"+e.id+"' class='content panel-team-shape'></div></div>"),this.initEvt(),$("#"+e.id).find(".team_content").show()},addCategory:function(){var e=this,t="未命名分类";$("#addcategory_dialog").dialog(),$("#name-team-category").focus(),$("#name-team-category").select(),$("#addcategory_dialog .okbtn").off().on("click",function(){""!=(t=$("#name-team-category").val())?(poAjax({type:"post",data:{orgId:e.orgId,title:t,ownerId:userObj.userId,ownerName:userObj.fullName},success:function(t){var a=t;e.categories.unshift({id:a.componentItemId,title:a.title}),e.renderAddCategory({id:a.componentItemId,title:a.title})},error:function(){}},"componentListSave"),$("#addcategory_dialog").dialog("close")):$.toast({text:"文件夹名不能为空",type:"error"})}),$("#addcategory_dialog .cancel-button").off().on("click",function(){$("#addcategory_dialog").dialog("close")})},removeCategory:function(e,t){Util.confirm({content:"是否要删除组件 <span style='color:#4386F5'>「"+t+"」</span> ，请确认？<br/> 此操作无法恢复，请谨慎操作。",okval:"删除",tokenClass:"team-shape-remove-confirm",onConfirm:function(){poAjax({type:"post",data:{componentItemId:e},success:function(t){$.toast({text:"删除分类成功"}),$("#"+e).remove()},error:function(){$.toast({text:"删除分类失败",type:"error"})}},"componentListRemove")}})},updataCategory:function(e,t){poAjax({type:"post",data:{componentItemId:e,orgId:this.orgId,title:t},success:function(a){$.toast({text:"更换标题成功"}),$("#"+e+" .panel_team_title_content").html(t),$(".edit_team_container").css("right","0px"),$(".edit_panel_team_title_input").remove()},error:function(){$.toast({text:"更换标题失败",type:"error"})}},"componentListSave")},getCategoryList:function(e){var t=this;$("#panel_team_"+e).empty(),poAjax({type:"post",data:{orgId:t.orgId,componentItemId:e},success:function(a){var n=a;n.length>0?$("#"+e).find(".team_content").hide():$("#"+e).find(".team_content").show();for(var i=0,o=n.length;i<o;i++){var s=n[i],r={id:s.componentId,category:s.componentItemId,title:s.title,elements:JSON.parse(s.definition),thumbnail:s.thumbUrl};t.shapeMaps[r.id]=r,t.renderPanelItem(r,!0)}},error:function(){}},"componentShapes")},updataTitle:function(e,t){poAjax({type:"post",data:{componentId:e,orgId:this.orgId,title:t},success:function(a){$.toast({text:"更换标题成功"}),$("#teamshape_"+e+" .panel_team_item_title").html(t),TeamShape.shapeMaps[e].title=t},error:function(){$.toast({text:"更换标题失败",type:"error"})}},"componentSave")},updataShape:function(e,t,a,n){var i=this;poAjax({type:"post",data:{componentId:e,orgId:i.orgId,definition:a,thumbFileStr:n,ignore:"definition"},success:function(e){$.toast({text:"编辑组件成功",type:"success"}),i.getCategoryList(t)},error:function(){$.toast({text:"编辑组件失败",type:"error"})}},"componentSave")},ui:{init:function(){$("#team-shapes-container").prepend(TeamShape.isComponentAdmin?"<div class='panel_team_add'><h3 class='panel_title TEAM_add_shape_class'><span class='po-diagraming-icons' style='font-size: 15px;position: absolute; font-weight: 700; left: 10px;'> &#xe6ee;</span>新建分类 "+("1_owner"==orgRole||"2_admin"==orgRole?"<div class='goto_team_container' ><span class='po-diagraming-icons' original-title='组件库管理'> &#xe867;</span></div>":"")+"</h3></div>":""),$(".TEAM_add_shape_class").off("click.teamAdd").on("click.teamAdd",function(){TeamShape.addCategory()}),$("#team-shapes-container .panel_container").each(function(e,t){$(t).css("display","block")}),$("#designer_viewport").append('<div id="shape_team_thumb" class="menu"><iframe style="border:0;" scrolling="no" width="200px" height="200px"></iframe><div></div></div>'),$(".goto_team_container").off().on("click",function(e){e.stopPropagation(),window.open("/org/manage/rolePower?curTab=2&orgid="+TeamShape.orgId)}),$("#team-shapes-container .panel_container").each(function(e,t){$(t).css("display","block")}),"true"==localStorage.getItem("team_shape_tab")&&$(".panel-tab .item[ac=team-shapes]").click()}},utils:{resetShapes:function(e,t){t=t||{x:0,y:0},e.sort(function(e,t){return e.props.zindex-t.props.zindex});for(var a=Utils.getShapesBounding(e),n=0,i=e.length;n<i;n++){var o=e[n];if("linker"==o.name){if(o.from=p(o.from),o.to=p(o.to),"broken"==o.linkerType||"curve"==o.linkerType)for(var s=0;s<o.points.length;s++)o.points[s]=p(o.points[s]);var r=Utils.getLinkerBox(o);o.props=$.extend(o.props,r)}else o.props.x=o.props.x-a.x+t.x,o.props.y=o.props.y-a.y+t.y;o.boxPos=a}function p(e){return e.x=e.x-a.x+t.x,e.y=e.y-a.y+t.y,e}return e},getCreatingImg:function(e){var t=$("#creating_shape_img"),a=$("#creating_shape_container"),n=TeamShape.shapeMaps[e];return 0==t.length?(a=$("<div id='creating_shape_container'></div>").appendTo("#designer"),t=$("<img id='creating_shape_img' src='"+n.thumbnail+"' width='"+1.5*TeamShape.config.panelItemWidth+"' height='"+1.5*TeamShape.config.panelItemHeight+"'/>").appendTo(a)):$("#creating_shape_img").attr("src",n.thumbnail),a.css({left:"0px",top:"0px",width:$(".panel_container").width(),height:$("#team-shapes-container").outerHeight()}),t},setCreatingImg:function(e,t){$("#creating_shape_container").show();var a=Utils.getRelativePos(t.pageX,t.pageY,$("#creating_shape_container"));e.css({left:a.x-1.5*TeamShape.config.panelItemWidth/2,top:a.y-1.5*TeamShape.config.panelItemHeight/2})},createShapes:function(e,t,a){for(var n=TeamShape.shapeMaps[e].elements,i=Utils.copyArray(n),o=[],s={},r=0;r<i.length;r++){var p=i[r],l=Utils.newId();s[i[r].id]=l,p.group&&(s[p.group]=Utils.newId()),i[r].id=l}for(r=0;r<i.length;r++){p=i[r];var c=t.restoreScale()-p.props.w/2,d=a.restoreScale()-p.props.h/2,m=Model.createByShape(p,c,d);if("linker"==p.name?(null!=p.from.id&&(m.from.id=s[p.from.id]),null!=p.to.id&&(m.to.id=s[p.to.id]),null!=p.textPos&&delete m.textPos):Schema.initShapeFunctions(m),p.group&&(m.group=s[p.group]),p.children)for(var h=0;h<p.children.length;h++){var g=p.children[h];m.children[h]=s[g]}p.parent&&(m.parent=s[p.parent]),p.container&&(m.container=s[p.container]),Designer.painter.renderShape(m),o.push(m)}return o},resetPosByMouse:function(e,t,a){var n={};return n.x=e.x.restoreScale()+t.x-a.boxPos.w/2,n.y=e.y.restoreScale()+t.y-a.boxPos.h/2,n}},flow2svg:{init:function(e){var t=this.calcCanvasSize(e),a=null!=Model.define.theme,n=Model.define.elements;0==$("#team_thumbnail_box").length&&$("body").append("<div id='team_thumbnail_box' style='display:none;'></div>");for(var i=t.w>t.h?t.w:t.h,o=SVG("team_thumbnail_box").size(i,i),s=0,r=(e=e.sort(function(e,t){return e.props.zindex-t.props.zindex})).length;s<r;s++){var p=Utils.copy(e[s]);if("linker"==p.name)flow2svg.linker2svg(p,o,t,a);else if((""==p.parent||null==p.parent)&&(flow2svg.shape2svg(p,o,t),null!=p.children&&p.children.length>0))for(var l=p.children,c=0;c<l.length;c++){var d=l[c],m=Utils.copy(n[d]);flow2svg.shape2svg(m,o,t,a)}}o.attr("viewBox","0 0 "+t.w+" "+t.h);var h=$("#team_thumbnail_box").html().replace(/&nbsp;/g," ");return $("#team_thumbnail_box").remove(),"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(h)))},calcCanvasSize:function(e){for(var t=null,a=null,n=null,i=null,o=0,s=e.length;o<s;o++){var r=e[o],p=$("#"+r.id),l=p.position();if(p.hasClass("linker_box")){p.attr("id");var c=r.from.x,d=r.from.y,m=r.to.x,h=r.to.y;if(Math.abs(c-m)<1&&Math.abs(d-h)<1)return!0}var g=l.left+p.width(),f=l.top+p.height();if(p.children(".linker_text").length>0){var u=p.children(".linker_text").position().left,_=l.left+u+p.children(".linker_text").width();u<0&&(l.left=l.left+u),_>g&&(g=_)}if(p.children(".text_canvas").length>0){var v=p.children(".text_canvas"),y=v.position(),x=v.height(),S=p.height();y.top<0&&(l.top=l.top+y.top),y.top+x>S&&(f=p.position().top+y.top+x)}var b=0,I=0;p.find(".attr_canvas").each(function(){var e=$(this),t=e.position(),a=t.left+e.width()-p.width();t.left<0?(0==b||t.left<b)&&(b=t.left):(0==I||a>I)&&(I=a)}),(null==t||l.left+b<t)&&(t=l.left+b),(null==a||l.top<a)&&(a=l.top),(null==n||g+I>n)&&(n=g+I),(null==i||f>i)&&(i=f)}null==t&&(t=0,a=0,n=0,i=0);var k=i-(a-=10);return{w:(n-(t-=10)).restoreScale()-20,h:k.restoreScale()-20,minX:t.restoreScale()-2,minY:a.restoreScale()-2}}}};
},{}],"Iovh":[function(require,module,exports) {
window.smartAiHelpCon={params:{newclass:"",hotCon:"",subUnit:!1,designerType:1,channel:1,tutorial:"45%",resultNum:5,extra:!0,questions:5},init:function(t){var e=this,i=$("#right-help-con"),o=e.params=$.extend({},this.params,t);if(i.length<1){i=$("<div id='right-help-con' class='right-help-con "+(o.ai_class||"")+"'></div>").appendTo("body").hide(),o.newclass&&i.addClass(o.newclass);var s=$("<div class='ai-search-input'><span class='ai-search-btn po-diagraming-icons'>&#xe6c9;</span><input id='powerIpt' autocomplete='off' class='power-input' type='text' placeholder='搜索你想要的功能' /><div class='search-hot tag-box'><div class='hot-temp'></div></div><div class='power-search-del' style='display:none'><i class='po-diagraming-icons'>&#xe6b9;</i></div></div>");i.append(s);var a=$("<div class='tag-box power-hot-tag colle-box' style='display:none'><h6>热搜</h6><div class='hot-temp'></div></div>");i.append(a);var n=$("<div class='power-search-result' style='display: none'></div>");if(i.append(n),o.subUnit){var r=o.subUnit,c="";if("string"==typeof r)c=r;else{if(!(r instanceof Array))return;$.each(r,function(t,e){c+=e})}i.append(c)}o.comm_question&&e.renderQuestion(o),i.css({top:o.top,bottom:o.bottom,left:o.left,right:o.right,width:o.width||i.outerWidth(),height:o.height||i.outerHeight()}),e.spread()}var l=$(".ai-search-input"),p=l.find(".power-search-del"),h=0,d=$("#powerIpt");d.off().on({keydown:function(t){t.stopPropagation()},keyup:function(t){t.stopPropagation()},input:function(t){null,h=t.timeStamp,setTimeout(function(){h==t.timeStamp&&d.siblings(".ai-search-btn").trigger("click")},400)},focus:function(t){t.preventDefault();var i=d.val();if(""==i)e.hotLabelHideorShow("hide","show");else{if(e.hotLabelHideorShow("hide","hide"),"block"==$(".power-search-result").css("display"))return;e.powerSearch(i)}o.extra||$("#extra-box").hide(),p.show()},blur:function(t){""==d.val()?(setTimeout(function(){e.hotLabelHideorShow("show","hide")},10),o.extra||$("#extra-box").show(),p.hide()):e.hotLabelHideorShow("hide","hide"),t.stopPropagation()}}),l.off("click.search").on("click.search",".ai-search-btn",function(t){var i=d.val();""!=i?(e.powerSearch(i),e.hotLabelHideorShow("hide","hide"),p.show()):($(".power-search-result").hide(),e.hotLabelHideorShow("hide","show"),p.hide()),t.stopPropagation()}),l.off("click.del").on("click.del",".power-search-del",function(){d.val(""),$(".power-search-result").hide(),e.hotLabelHideorShow("show","hide"),$("#extra-box").css("display","block"),p.hide()}),$(".search-hot").off("click.hot").on("click.hot",".hot-item",function(t){t.stopPropagation();var e=$(this).text();e!=d.val()&&(d.val(e),d.focus())}),$(".power-hot-tag, .power-search-result").off("mousedown").on("mousedown",".hot-item",function(t){t.stopPropagation();var e=$(this).text(),i=d.val();d.focus(),e!=i&&(d.val(e),d.siblings(".ai-search-btn").trigger("click"))}),i.off("click.power").on("click.power",".comm-item",function(){var t=$(this),e=t.text(),i=t.attr("desc"),o=t.attr("url");e&&i&&o&&searchGuide.tutorial(e,i,o)}),i.off("click.ai-pin").on("click.ai-pin",".res-temp",function(t){var i=$(this),s=i.attr("tit"),a=i.attr("desc")||"",n=i.attr("photoUrl")||"",r=o.ai_tag_list;if(a||n){var c=i.text();return searchGuide.tutorial(c,a,n),void e.close()}if(null!=r[s]){var l=r[s].trigger_btn;r[s].ponalign;l?($(l).trigger("click"),$(r[s].tag)):$(r[s]),setTimeout(function(){searchGuide.init(r[s]),e.close()},200),t.stopPropagation()}}),$("#right-help-con").off("mousedown.helpcon").on("mousedown.helpcon",function(t){t.stopPropagation()}),e.getHotCon(o)},renderQuestion:function(t){var e="https://ai.processon.com/doc/random/"+t.channel+"/"+t.designerType+"/"+t.questions;$.ajax({url:e,type:"get",contentType:"application/json",success:function(t){if("success"==t.result){t=t.data;for(var e="<div class='comm-question'><div class='comm-question'><div class='comm-set'></div><div class='comm-tit'>常见问题</div>",i=0;i<t.length;i++){var o=t[i];o.photoUrl.indexOf("http://")>=0&&(o.photoUrl=o.photoUrl.replace("http://","https://")),e+="<div class='comm-item' desc = '"+o.desc+"' url = '"+o.photoUrl+"'>"+o.title+"</div>"}e+="</div>",$("#extra-box").length?$("#extra-box").append(e):$("#right-help-con").append(e)}},error:function(){}})},receiveHot:!1,getHotCon:function(t){var e=this;if(!e.receiveHot){var i="https://ai.processon.com/searchTag/"+t.channel+"/"+t.designerType;$.ajax({url:i,type:"Post",success:function(i){if("success"==i.result){if("success"==i.result){if(null==i.data)return;t.hotCon=i.data.tag;var o=t.hotCon.split(","),s="",a="";$.each(o,function(t,e){if(t>3)return!1;t<2&&(s+="<span class='hot-item'>"+e+"</span>"),a+="<span class='hot-item'>"+e+"</span>"})}$(".ai-search-input").find(".hot-temp").html(s),$(".power-hot-tag").find(".hot-temp").html(a),e.receiveHot=!0}},error:function(){}})}},resultLoading:!1,powerSearch:function(t){var e=this;if(!e.resultLoading){e.resultLoading=!0;var i=$(".power-search-result"),o=JSON.stringify({keyword:t,designerType:e.params.designerType,channel:e.params.channel});$.ajax({url:"https://ai.processon.com/search",type:"POST",contentType:"application/json",data:o,success:function(o){if("success"==o.result){var s=o.data,a=s.toolbarList,n=s.docList,r=[];if(!s.elementsCount||s.elementsCount<1){if($(".tag-box.empty-rec").length>0)return e.resultLoading=!1,void i.show();i.hide(),r.push("<div class='tag-box empty-rec colle-box'><h6 style='margin-top:-3px'>找不到你想要的，试试这样搜</h6><div class='hot-temp'>");var c=e.params.hotCon.split(",");$.each(c,function(t,e){t<4&&r.push("<span class='hot-item'>"+e+"</span>")}),r.push("</div></div>")}else{if(i.hide(),a.length)for(var l=0;l<a.length;l++){var p=u((d=a[l]).func.split(",")[0],t);l<e.params.resultNum&&r.push("<div id='"+d.id+"' class='res-temp' tit='"+d.tit+"'>"+p+"</div>")}if(n.length)for(var h=0;h<n.length;h++){var d;p=u((d=n[h]).title.split(",")[0],t);h<e.params.resultNum&&r.push("<div desc='"+d.desc+"' photoUrl='"+d.photoUrl+"' id='"+d.id+"' class='res-temp'>"+p+"</div>")}}function u(t,e){var i=e.length,o=t.indexOf(e);return o>-1?t.substring(0,o)+'<span style="color:#DE0F18">'+e+"</span>"+t.substring(o+i):t}r=r.splice(0,e.params.resultNum).join(""),i.html(r).show(100),e.resultLoading=!1}else{if($(".tag-box.empty-rec").length>0)return void(e.resultLoading=!1);r="<div class='tag-box empty-rec colle-box'><h6 style='margin-top:-3px'>找不到你想要的，试试这样搜</h6><div class='hot-temp'>",c=e.params.hotCon.split(",");$.each(c,function(t,e){t<4&&(r+="<span class='hot-item'>"+e+"</span>")}),r+="</div></div>",$(".power-search-result").html(r),e.resultLoading=!1}},error:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){e.resultLoading=!1})})}},drawingTime:null,drawingPin:function(t,e){if(t.length){var i=$("#earch-drawing-pin");if(i.length)clearTimeout(this.drawingTime);else{var o=$("#right-help-con").find(".ai-search-btn").offset(),s=o.top,a=o.left;i=$("<div id='earch-drawing-pin' style='top:"+(s-2)+"px; left:"+a+"px' class='search-drawing-pin'><div class='pin'><span class='icons'>&#xe6c1c;</span></div><div class='pulse'></div></div>").appendTo($("body"))}var n=t.offset(),r=n.left,c=n.top,l=r,p=c-24;isNaN(parseInt(e))?"center"==e&&(l+=t.outerWidth()/2-8):l+=parseInt(e),p=p>0?p:0,setTimeout(function(){i.css({top:p,left:l})}),this.drawingTime=setTimeout(function(){i.remove()},5e3),$(".power-search-result").hide()}},tutorial:function(t,e,i,o){var s=$("#power-tutorial-con");s.length<1&&(s=$('<div id="power-tutorial-con" style="overflow:hidden" class="tutorial-detail dialog-box"><h3></h3><div class="tutorial-image"></div><div class="tutorial-text"><div class="textarea"></div></div></div>')).appendTo("body");var a=s.find("h3"),n=s.find(".tutorial-image"),r=s.find(".tutorial-text");if(a.text(t),r.find(".textarea").html(e),null!=i){n.css({border:"1px solid #e3e3e3",padding:"20px 0px 20px 0px"}),s.css({"z-index":11,width:this.params.tutorial});var c='<img style="width:100%" src="'+i+'"/>';n.html(c),n.find("img").on("load",function(){l(s)})}else n.empty(),n.css({border:"none",padding:0}),l(s);function l(t){t.dialog()}$(".power-search-result").hide()},close:function(){var t=$("#right-help-con");t.addClass("remove"),$(".ai-search-input").find(".power-search-del").trigger("click"),setTimeout(function(){t.css("display","none")},300)},spread:function(){$("#right-help-con").removeClass("remove").css("display","block"),$("#extra-box").css("display","block")},hotLabelHideorShow:function(t,e){var i=$(".tag-box.power-hot-tag"),o=$(".ai-search-input").find(".search-hot");"show"==t?o.css({display:"block"}):o.css({display:"none"}),"show"==e?i.css({display:"block"}):i.css({display:"none"})}};
},{}],"CmJo":[function(require,module,exports) {
var define;
var t;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(r,n){"object"==("undefined"==typeof exports?"undefined":e(exports))&&"object"==("undefined"==typeof module?"undefined":e(module))?module.exports=n():"function"==typeof t&&t.amd?t([],n):"object"==("undefined"==typeof exports?"undefined":e(exports))?exports.katex=n():r.katex=n()}("undefined"!=typeof self?self:this,function(){return function(t){var r={};function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=r,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==e(t)&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,r){},function(t,e,r){"use strict";r.r(e),r(0);var n=function(){function t(t,e,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=r}return t.range=function(e,r){return r?e&&e.loc&&r.loc&&e.loc.lexer===r.loc.lexer?new t(e.loc.lexer,e.loc.start,r.loc.end):null:e&&e.loc},t}(),a=function(){function t(t,e){this.text=void 0,this.loc=void 0,this.text=t,this.loc=e}return t.prototype.range=function(e,r){return new t(r,n.range(this,e))},t}(),i=function t(e,r){this.position=void 0;var n,a="KaTeX parse error: "+e,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;n=i.start;var s=i.end;n===o.length?a+=" at end of input: ":a+=" at position "+(n+1)+": ";var h=o.slice(n,s).replace(/[^]/g,"$&̲");a+=(n>15?"…"+o.slice(n-15,n):o.slice(0,n))+h+(s+15<o.length?o.slice(s,s+15)+"…":o.slice(s))}var l=new Error(a);return l.name="ParseError",l.__proto__=t.prototype,l.position=n,l};i.prototype.__proto__=Error.prototype;var o=i,s=/([A-Z])/g,h={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},l=/[&><"']/g,m=function t(e){return"ordgroup"===e.type?1===e.body.length?t(e.body[0]):e:"color"===e.type?1===e.body.length?t(e.body[0]):e:"font"===e.type?t(e.body):e},c={contains:function(t,e){return-1!==t.indexOf(e)},deflt:function(t,e){return void 0===t?e:t},escape:function(t){return String(t).replace(l,function(t){return h[t]})},hyphenate:function(t){return t.replace(s,"-$1").toLowerCase()},getBaseElem:m,isCharacterBox:function(t){var e=m(t);return"mathord"===e.type||"textord"===e.type||"atom"===e.type}},u=function(){function t(t){this.displayMode=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.allowedProtocols=void 0,t=t||{},this.displayMode=c.deflt(t.displayMode,!1),this.leqno=c.deflt(t.leqno,!1),this.fleqn=c.deflt(t.fleqn,!1),this.throwOnError=c.deflt(t.throwOnError,!0),this.errorColor=c.deflt(t.errorColor,"#cc0000"),this.macros=t.macros||{},this.colorIsTextColor=c.deflt(t.colorIsTextColor,!1),this.strict=c.deflt(t.strict,"warn"),this.maxSize=Math.max(0,c.deflt(t.maxSize,1/0)),this.maxExpand=Math.max(0,c.deflt(t.maxExpand,1e3)),this.allowedProtocols=c.deflt(t.allowedProtocols,["http","https","mailto","_relative"])}var e=t.prototype;return e.reportNonstrict=function(t,e,r){var n=this.strict;if("function"==typeof n&&(n=n(t,e,r)),n&&"ignore"!==n&&(!0===n||"error"===n))throw new o("LaTeX-incompatible input and strict mode is set to 'error': "+e+" ["+t+"]",r)},e.useStrictBehavior=function(t,e,r){var n=this.strict;if("function"==typeof n)try{n=n(t,e,r)}catch(t){n="error"}return!(!n||"ignore"===n||!0!==n&&"error"!==n)},t}(),d=function(){function t(t,e,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=r}var e=t.prototype;return e.sup=function(){return p[f[this.id]]},e.sub=function(){return p[g[this.id]]},e.fracNum=function(){return p[x[this.id]]},e.fracDen=function(){return p[v[this.id]]},e.cramp=function(){return p[y[this.id]]},e.text=function(){return p[b[this.id]]},e.isTight=function(){return this.size>=2},t}(),p=[new d(0,0,!1),new d(1,0,!0),new d(2,1,!1),new d(3,1,!0),new d(4,2,!1),new d(5,2,!0),new d(6,3,!1),new d(7,3,!0)],f=[4,5,4,5,6,7,6,7],g=[5,5,5,5,7,7,7,7],x=[2,3,4,5,6,7,6,7],v=[3,3,5,5,7,7,7,7],y=[1,1,3,3,5,5,7,7],b=[0,1,2,3,2,3,2,3],w={DISPLAY:p[0],TEXT:p[2],SCRIPT:p[4],SCRIPTSCRIPT:p[6]},k=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],S=[];function z(t){for(var e=0;e<S.length;e+=2)if(t>=S[e]&&t<=S[e+1])return!0;return!1}k.forEach(function(t){return t.blocks.forEach(function(t){return S.push.apply(S,t)})});var M={path:{sqrtMain:"M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,\n-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,\n-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,\n35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,\n-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467\ns-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422\ns-65,47,-65,47z M834 80H400000v40H845z",sqrtSize1:"M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,\n158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067\nc4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,\n175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71\nc-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,\n-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26\ns76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z",sqrtSize2:"M1001,80H400000v40H1013.1s-83.4,268,-264.1,840c-180.7,\n572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,\n-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744c-10,12,-21,25,-33,39s-32,39,-32,39\nc-6,-5.3,-15,-14,-27,-26s25,-30,25,-30c26.7,-32.7,52,-63,76,-91s52,-60,52,-60\ns208,722,208,722c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,\n-658.5c53.7,-170.3,84.5,-266.8,92.5,-289.5c4,-6.7,10,-10,18,-10z\nM1001 80H400000v40H1013z",sqrtSize3:"M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,\n-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,\n25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,\n-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079\nc169.3,-717.3,254.7,-1077.7,256,-1081c4,-6.7,10,-10,18,-10H400000v40H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M1001 80H400000v40H1014z",sqrtSize4:"M473,2793c339.3,-1799.3,509.3,-2700,510,-2702\nc3.3,-7.3,9.3,-11,18,-11H400000v40H1017.7s-90.5,478,-276.2,1466c-185.7,988,\n-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,\n-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200c0,-1.3,-5.3,8.7,-16,30c-10.7,\n21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26s76,-153,76,-153s77,-151,\n77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,606z\nM1001 80H400000v40H1017z",doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"}},T=function(){function t(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var e=t.prototype;return e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},e.toMarkup=function(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t},e.toText=function(){return this.children.map(function(t){return t.toText()}).join("")},t}(),A=function(t){return t.filter(function(t){return t}).join(" ")},B=function(t,e,r){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},e){e.style.isTight()&&this.classes.push("mtight");var n=e.getColor();n&&(this.style.color=n)}},C=function(t){var e=document.createElement(t);for(var r in e.className=A(this.classes),this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&e.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)e.appendChild(this.children[a].toNode());return e},N=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+c.escape(A(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=c.hyphenate(n)+":"+this.style[n]+";");for(var a in r&&(e+=' style="'+c.escape(r)+'"'),this.attributes)this.attributes.hasOwnProperty(a)&&(e+=" "+a+'="'+c.escape(this.attributes[a])+'"');e+=">";for(var i=0;i<this.children.length;i++)e+=this.children[i].toMarkup();return e+"</"+t+">"},q=function(){function t(t,e,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,B.call(this,t,r,n),this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){return C.call(this,"span")},e.toMarkup=function(){return N.call(this,"span")},t}(),E=function(){function t(t,e,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,B.call(this,e,n),this.children=r||[],this.setAttribute("href",t)}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){return C.call(this,"a")},e.toMarkup=function(){return N.call(this,"a")},t}(),O={"î":"ı̂","ï":"ı̈","í":"ı́","ì":"ı̀"},I=function(){function t(t,e,r,n,a,i,o,s){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=r||0,this.italic=n||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=s||{},this.maxFontSize=0;var h=function(t){for(var e=0;e<k.length;e++)for(var r=k[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[\xee\xef\xed\xec]/.test(this.text)&&(this.text=O[this.text])}var e=t.prototype;return e.hasClass=function(t){return c.contains(this.classes,t)},e.toNode=function(){var t=document.createTextNode(this.text),e=null;for(var r in this.italic>0&&((e=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((e=e||document.createElement("span")).className=A(this.classes)),this.style)this.style.hasOwnProperty(r)&&((e=e||document.createElement("span")).style[r]=this.style[r]);return e?(e.appendChild(t),e):t},e.toMarkup=function(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=c.escape(A(this.classes)),e+='"');var r="";for(var n in this.italic>0&&(r+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(r+=c.hyphenate(n)+":"+this.style[n]+";");r&&(t=!0,e+=' style="'+c.escape(r)+'"');var a=c.escape(this.text);return t?(e+=">",e+=a,e+="</span>"):a},t}(),R=function(){function t(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t},e.toMarkup=function(){var t="<svg";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+"</svg>"},t}(),L=function(){function t(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",M.path[this.pathName]),t},e.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+M.path[this.pathName]+"'/>"},t}(),D=function(){function t(t){this.attributes=void 0,this.attributes=t||{}}var e=t.prototype;return e.toNode=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","line");for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);return t},e.toMarkup=function(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+"='"+this.attributes[e]+"'");return t+"/>"},t}(),H={"AMS-Regular":{65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473]},"Fraktur-Regular":{33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],163:[0,.69444,0,0,.86853],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],163:[0,.69444,0,0,.76909],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],305:[0,.43056,0,.02778,.32246],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],567:[.19444,.43056,0,.08334,.38403],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.67,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.744,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.744,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333]},"Math-Italic":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"Math-Regular":{65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059]},"SansSerif-Bold":{33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212]},"Size1-Regular":{40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},P={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2]},F={"Å":"A","Ç":"C","Ð":"D","Þ":"o","å":"a","ç":"c","ð":"d","þ":"o","А":"A","Б":"B","В":"B","Г":"F","Д":"A","Е":"E","Ж":"K","З":"3","И":"N","Й":"N","К":"K","Л":"N","М":"M","Н":"H","О":"O","П":"N","Р":"P","С":"C","Т":"T","У":"y","Ф":"O","Х":"X","Ц":"U","Ч":"h","Ш":"W","Щ":"W","Ъ":"B","Ы":"X","Ь":"B","Э":"3","Ю":"X","Я":"R","а":"a","б":"b","в":"a","г":"r","д":"y","е":"e","ж":"m","з":"e","и":"n","й":"n","к":"n","л":"n","м":"m","н":"n","о":"o","п":"n","р":"p","с":"c","т":"o","у":"y","ф":"b","х":"x","ц":"n","ч":"n","ш":"w","щ":"w","ъ":"a","ы":"m","ь":"a","э":"e","ю":"m","я":"r"};function V(t,e,r){if(!H[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0);t[0]in F&&(n=F[t[0]].charCodeAt(0));var a=H[e][n];if(a||"text"!==r||z(n)&&(a=H[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var U={},G={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Y={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},_={math:{},text:{}},W=_;function X(t,e,r,n,a,i){_[t][a]={font:e,group:r,replace:n},i&&n&&(_[t][n]=_[t][a])}var j="main",$="ams",Z="bin",K="mathord",J="op-token",Q="rel",tt="spacing";X("math",j,Q,"≡","\\equiv",!0),X("math",j,Q,"≺","\\prec",!0),X("math",j,Q,"≻","\\succ",!0),X("math",j,Q,"∼","\\sim",!0),X("math",j,Q,"⊥","\\perp"),X("math",j,Q,"⪯","\\preceq",!0),X("math",j,Q,"⪰","\\succeq",!0),X("math",j,Q,"≃","\\simeq",!0),X("math",j,Q,"∣","\\mid",!0),X("math",j,Q,"≪","\\ll",!0),X("math",j,Q,"≫","\\gg",!0),X("math",j,Q,"≍","\\asymp",!0),X("math",j,Q,"∥","\\parallel"),X("math",j,Q,"⋈","\\bowtie",!0),X("math",j,Q,"⌣","\\smile",!0),X("math",j,Q,"⊑","\\sqsubseteq",!0),X("math",j,Q,"⊒","\\sqsupseteq",!0),X("math",j,Q,"≐","\\doteq",!0),X("math",j,Q,"⌢","\\frown",!0),X("math",j,Q,"∋","\\ni",!0),X("math",j,Q,"∝","\\propto",!0),X("math",j,Q,"⊢","\\vdash",!0),X("math",j,Q,"⊣","\\dashv",!0),X("math",j,Q,"∋","\\owns"),X("math",j,"punct",".","\\ldotp"),X("math",j,"punct","⋅","\\cdotp"),X("math",j,"textord","#","\\#"),X("text",j,"textord","#","\\#"),X("math",j,"textord","&","\\&"),X("text",j,"textord","&","\\&"),X("math",j,"textord","ℵ","\\aleph",!0),X("math",j,"textord","∀","\\forall",!0),X("math",j,"textord","ℏ","\\hbar",!0),X("math",j,"textord","∃","\\exists",!0),X("math",j,"textord","∇","\\nabla",!0),X("math",j,"textord","♭","\\flat",!0),X("math",j,"textord","ℓ","\\ell",!0),X("math",j,"textord","♮","\\natural",!0),X("math",j,"textord","♣","\\clubsuit",!0),X("math",j,"textord","℘","\\wp",!0),X("math",j,"textord","♯","\\sharp",!0),X("math",j,"textord","♢","\\diamondsuit",!0),X("math",j,"textord","ℜ","\\Re",!0),X("math",j,"textord","♡","\\heartsuit",!0),X("math",j,"textord","ℑ","\\Im",!0),X("math",j,"textord","♠","\\spadesuit",!0),X("text",j,"textord","§","\\S",!0),X("text",j,"textord","¶","\\P",!0),X("math",j,"textord","†","\\dag"),X("text",j,"textord","†","\\dag"),X("text",j,"textord","†","\\textdagger"),X("math",j,"textord","‡","\\ddag"),X("text",j,"textord","‡","\\ddag"),X("text",j,"textord","‡","\\textdaggerdbl"),X("math",j,"close","⎱","\\rmoustache",!0),X("math",j,"open","⎰","\\lmoustache",!0),X("math",j,"close","⟯","\\rgroup",!0),X("math",j,"open","⟮","\\lgroup",!0),X("math",j,Z,"∓","\\mp",!0),X("math",j,Z,"⊖","\\ominus",!0),X("math",j,Z,"⊎","\\uplus",!0),X("math",j,Z,"⊓","\\sqcap",!0),X("math",j,Z,"∗","\\ast"),X("math",j,Z,"⊔","\\sqcup",!0),X("math",j,Z,"◯","\\bigcirc"),X("math",j,Z,"∙","\\bullet"),X("math",j,Z,"‡","\\ddagger"),X("math",j,Z,"≀","\\wr",!0),X("math",j,Z,"⨿","\\amalg"),X("math",j,Z,"&","\\And"),X("math",j,Q,"⟵","\\longleftarrow",!0),X("math",j,Q,"⇐","\\Leftarrow",!0),X("math",j,Q,"⟸","\\Longleftarrow",!0),X("math",j,Q,"⟶","\\longrightarrow",!0),X("math",j,Q,"⇒","\\Rightarrow",!0),X("math",j,Q,"⟹","\\Longrightarrow",!0),X("math",j,Q,"↔","\\leftrightarrow",!0),X("math",j,Q,"⟷","\\longleftrightarrow",!0),X("math",j,Q,"⇔","\\Leftrightarrow",!0),X("math",j,Q,"⟺","\\Longleftrightarrow",!0),X("math",j,Q,"↦","\\mapsto",!0),X("math",j,Q,"⟼","\\longmapsto",!0),X("math",j,Q,"↗","\\nearrow",!0),X("math",j,Q,"↩","\\hookleftarrow",!0),X("math",j,Q,"↪","\\hookrightarrow",!0),X("math",j,Q,"↘","\\searrow",!0),X("math",j,Q,"↼","\\leftharpoonup",!0),X("math",j,Q,"⇀","\\rightharpoonup",!0),X("math",j,Q,"↙","\\swarrow",!0),X("math",j,Q,"↽","\\leftharpoondown",!0),X("math",j,Q,"⇁","\\rightharpoondown",!0),X("math",j,Q,"↖","\\nwarrow",!0),X("math",j,Q,"⇌","\\rightleftharpoons",!0),X("math",$,Q,"≮","\\nless",!0),X("math",$,Q,"","\\nleqslant"),X("math",$,Q,"","\\nleqq"),X("math",$,Q,"⪇","\\lneq",!0),X("math",$,Q,"≨","\\lneqq",!0),X("math",$,Q,"","\\lvertneqq"),X("math",$,Q,"⋦","\\lnsim",!0),X("math",$,Q,"⪉","\\lnapprox",!0),X("math",$,Q,"⊀","\\nprec",!0),X("math",$,Q,"⋠","\\npreceq",!0),X("math",$,Q,"⋨","\\precnsim",!0),X("math",$,Q,"⪹","\\precnapprox",!0),X("math",$,Q,"≁","\\nsim",!0),X("math",$,Q,"","\\nshortmid"),X("math",$,Q,"∤","\\nmid",!0),X("math",$,Q,"⊬","\\nvdash",!0),X("math",$,Q,"⊭","\\nvDash",!0),X("math",$,Q,"⋪","\\ntriangleleft"),X("math",$,Q,"⋬","\\ntrianglelefteq",!0),X("math",$,Q,"⊊","\\subsetneq",!0),X("math",$,Q,"","\\varsubsetneq"),X("math",$,Q,"⫋","\\subsetneqq",!0),X("math",$,Q,"","\\varsubsetneqq"),X("math",$,Q,"≯","\\ngtr",!0),X("math",$,Q,"","\\ngeqslant"),X("math",$,Q,"","\\ngeqq"),X("math",$,Q,"⪈","\\gneq",!0),X("math",$,Q,"≩","\\gneqq",!0),X("math",$,Q,"","\\gvertneqq"),X("math",$,Q,"⋧","\\gnsim",!0),X("math",$,Q,"⪊","\\gnapprox",!0),X("math",$,Q,"⊁","\\nsucc",!0),X("math",$,Q,"⋡","\\nsucceq",!0),X("math",$,Q,"⋩","\\succnsim",!0),X("math",$,Q,"⪺","\\succnapprox",!0),X("math",$,Q,"≆","\\ncong",!0),X("math",$,Q,"","\\nshortparallel"),X("math",$,Q,"∦","\\nparallel",!0),X("math",$,Q,"⊯","\\nVDash",!0),X("math",$,Q,"⋫","\\ntriangleright"),X("math",$,Q,"⋭","\\ntrianglerighteq",!0),X("math",$,Q,"","\\nsupseteqq"),X("math",$,Q,"⊋","\\supsetneq",!0),X("math",$,Q,"","\\varsupsetneq"),X("math",$,Q,"⫌","\\supsetneqq",!0),X("math",$,Q,"","\\varsupsetneqq"),X("math",$,Q,"⊮","\\nVdash",!0),X("math",$,Q,"⪵","\\precneqq",!0),X("math",$,Q,"⪶","\\succneqq",!0),X("math",$,Q,"","\\nsubseteqq"),X("math",$,Z,"⊴","\\unlhd"),X("math",$,Z,"⊵","\\unrhd"),X("math",$,Q,"↚","\\nleftarrow",!0),X("math",$,Q,"↛","\\nrightarrow",!0),X("math",$,Q,"⇍","\\nLeftarrow",!0),X("math",$,Q,"⇏","\\nRightarrow",!0),X("math",$,Q,"↮","\\nleftrightarrow",!0),X("math",$,Q,"⇎","\\nLeftrightarrow",!0),X("math",$,Q,"△","\\vartriangle"),X("math",$,"textord","ℏ","\\hslash"),X("math",$,"textord","▽","\\triangledown"),X("math",$,"textord","◊","\\lozenge"),X("math",$,"textord","Ⓢ","\\circledS"),X("math",$,"textord","®","\\circledR"),X("text",$,"textord","®","\\circledR"),X("math",$,"textord","∡","\\measuredangle",!0),X("math",$,"textord","∄","\\nexists"),X("math",$,"textord","℧","\\mho"),X("math",$,"textord","Ⅎ","\\Finv",!0),X("math",$,"textord","⅁","\\Game",!0),X("math",$,"textord","k","\\Bbbk"),X("math",$,"textord","‵","\\backprime"),X("math",$,"textord","▲","\\blacktriangle"),X("math",$,"textord","▼","\\blacktriangledown"),X("math",$,"textord","■","\\blacksquare"),X("math",$,"textord","⧫","\\blacklozenge"),X("math",$,"textord","★","\\bigstar"),X("math",$,"textord","∢","\\sphericalangle",!0),X("math",$,"textord","∁","\\complement",!0),X("math",$,"textord","ð","\\eth",!0),X("math",$,"textord","╱","\\diagup"),X("math",$,"textord","╲","\\diagdown"),X("math",$,"textord","□","\\square"),X("math",$,"textord","□","\\Box"),X("math",$,"textord","◊","\\Diamond"),X("math",$,"textord","¥","\\yen",!0),X("text",$,"textord","¥","\\yen",!0),X("math",$,"textord","✓","\\checkmark",!0),X("text",$,"textord","✓","\\checkmark"),X("math",$,"textord","ℶ","\\beth",!0),X("math",$,"textord","ℸ","\\daleth",!0),X("math",$,"textord","ℷ","\\gimel",!0),X("math",$,"textord","ϝ","\\digamma"),X("math",$,"textord","ϰ","\\varkappa"),X("math",$,"open","┌","\\ulcorner",!0),X("math",$,"close","┐","\\urcorner",!0),X("math",$,"open","└","\\llcorner",!0),X("math",$,"close","┘","\\lrcorner",!0),X("math",$,Q,"≦","\\leqq",!0),X("math",$,Q,"⩽","\\leqslant",!0),X("math",$,Q,"⪕","\\eqslantless",!0),X("math",$,Q,"≲","\\lesssim",!0),X("math",$,Q,"⪅","\\lessapprox",!0),X("math",$,Q,"≊","\\approxeq",!0),X("math",$,Z,"⋖","\\lessdot"),X("math",$,Q,"⋘","\\lll",!0),X("math",$,Q,"≶","\\lessgtr",!0),X("math",$,Q,"⋚","\\lesseqgtr",!0),X("math",$,Q,"⪋","\\lesseqqgtr",!0),X("math",$,Q,"≑","\\doteqdot"),X("math",$,Q,"≓","\\risingdotseq",!0),X("math",$,Q,"≒","\\fallingdotseq",!0),X("math",$,Q,"∽","\\backsim",!0),X("math",$,Q,"⋍","\\backsimeq",!0),X("math",$,Q,"⫅","\\subseteqq",!0),X("math",$,Q,"⋐","\\Subset",!0),X("math",$,Q,"⊏","\\sqsubset",!0),X("math",$,Q,"≼","\\preccurlyeq",!0),X("math",$,Q,"⋞","\\curlyeqprec",!0),X("math",$,Q,"≾","\\precsim",!0),X("math",$,Q,"⪷","\\precapprox",!0),X("math",$,Q,"⊲","\\vartriangleleft"),X("math",$,Q,"⊴","\\trianglelefteq"),X("math",$,Q,"⊨","\\vDash",!0),X("math",$,Q,"⊪","\\Vvdash",!0),X("math",$,Q,"⌣","\\smallsmile"),X("math",$,Q,"⌢","\\smallfrown"),X("math",$,Q,"≏","\\bumpeq",!0),X("math",$,Q,"≎","\\Bumpeq",!0),X("math",$,Q,"≧","\\geqq",!0),X("math",$,Q,"⩾","\\geqslant",!0),X("math",$,Q,"⪖","\\eqslantgtr",!0),X("math",$,Q,"≳","\\gtrsim",!0),X("math",$,Q,"⪆","\\gtrapprox",!0),X("math",$,Z,"⋗","\\gtrdot"),X("math",$,Q,"⋙","\\ggg",!0),X("math",$,Q,"≷","\\gtrless",!0),X("math",$,Q,"⋛","\\gtreqless",!0),X("math",$,Q,"⪌","\\gtreqqless",!0),X("math",$,Q,"≖","\\eqcirc",!0),X("math",$,Q,"≗","\\circeq",!0),X("math",$,Q,"≜","\\triangleq",!0),X("math",$,Q,"∼","\\thicksim"),X("math",$,Q,"≈","\\thickapprox"),X("math",$,Q,"⫆","\\supseteqq",!0),X("math",$,Q,"⋑","\\Supset",!0),X("math",$,Q,"⊐","\\sqsupset",!0),X("math",$,Q,"≽","\\succcurlyeq",!0),X("math",$,Q,"⋟","\\curlyeqsucc",!0),X("math",$,Q,"≿","\\succsim",!0),X("math",$,Q,"⪸","\\succapprox",!0),X("math",$,Q,"⊳","\\vartriangleright"),X("math",$,Q,"⊵","\\trianglerighteq"),X("math",$,Q,"⊩","\\Vdash",!0),X("math",$,Q,"∣","\\shortmid"),X("math",$,Q,"∥","\\shortparallel"),X("math",$,Q,"≬","\\between",!0),X("math",$,Q,"⋔","\\pitchfork",!0),X("math",$,Q,"∝","\\varpropto"),X("math",$,Q,"◀","\\blacktriangleleft"),X("math",$,Q,"∴","\\therefore",!0),X("math",$,Q,"∍","\\backepsilon"),X("math",$,Q,"▶","\\blacktriangleright"),X("math",$,Q,"∵","\\because",!0),X("math",$,Q,"⋘","\\llless"),X("math",$,Q,"⋙","\\gggtr"),X("math",$,Z,"⊲","\\lhd"),X("math",$,Z,"⊳","\\rhd"),X("math",$,Q,"≂","\\eqsim",!0),X("math",j,Q,"⋈","\\Join"),X("math",$,Q,"≑","\\Doteq",!0),X("math",$,Z,"∔","\\dotplus",!0),X("math",$,Z,"∖","\\smallsetminus"),X("math",$,Z,"⋒","\\Cap",!0),X("math",$,Z,"⋓","\\Cup",!0),X("math",$,Z,"⩞","\\doublebarwedge",!0),X("math",$,Z,"⊟","\\boxminus",!0),X("math",$,Z,"⊞","\\boxplus",!0),X("math",$,Z,"⋇","\\divideontimes",!0),X("math",$,Z,"⋉","\\ltimes",!0),X("math",$,Z,"⋊","\\rtimes",!0),X("math",$,Z,"⋋","\\leftthreetimes",!0),X("math",$,Z,"⋌","\\rightthreetimes",!0),X("math",$,Z,"⋏","\\curlywedge",!0),X("math",$,Z,"⋎","\\curlyvee",!0),X("math",$,Z,"⊝","\\circleddash",!0),X("math",$,Z,"⊛","\\circledast",!0),X("math",$,Z,"⋅","\\centerdot"),X("math",$,Z,"⊺","\\intercal",!0),X("math",$,Z,"⋒","\\doublecap"),X("math",$,Z,"⋓","\\doublecup"),X("math",$,Z,"⊠","\\boxtimes",!0),X("math",$,Q,"⇢","\\dashrightarrow",!0),X("math",$,Q,"⇠","\\dashleftarrow",!0),X("math",$,Q,"⇇","\\leftleftarrows",!0),X("math",$,Q,"⇆","\\leftrightarrows",!0),X("math",$,Q,"⇚","\\Lleftarrow",!0),X("math",$,Q,"↞","\\twoheadleftarrow",!0),X("math",$,Q,"↢","\\leftarrowtail",!0),X("math",$,Q,"↫","\\looparrowleft",!0),X("math",$,Q,"⇋","\\leftrightharpoons",!0),X("math",$,Q,"↶","\\curvearrowleft",!0),X("math",$,Q,"↺","\\circlearrowleft",!0),X("math",$,Q,"↰","\\Lsh",!0),X("math",$,Q,"⇈","\\upuparrows",!0),X("math",$,Q,"↿","\\upharpoonleft",!0),X("math",$,Q,"⇃","\\downharpoonleft",!0),X("math",$,Q,"⊸","\\multimap",!0),X("math",$,Q,"↭","\\leftrightsquigarrow",!0),X("math",$,Q,"⇉","\\rightrightarrows",!0),X("math",$,Q,"⇄","\\rightleftarrows",!0),X("math",$,Q,"↠","\\twoheadrightarrow",!0),X("math",$,Q,"↣","\\rightarrowtail",!0),X("math",$,Q,"↬","\\looparrowright",!0),X("math",$,Q,"↷","\\curvearrowright",!0),X("math",$,Q,"↻","\\circlearrowright",!0),X("math",$,Q,"↱","\\Rsh",!0),X("math",$,Q,"⇊","\\downdownarrows",!0),X("math",$,Q,"↾","\\upharpoonright",!0),X("math",$,Q,"⇂","\\downharpoonright",!0),X("math",$,Q,"⇝","\\rightsquigarrow",!0),X("math",$,Q,"⇝","\\leadsto"),X("math",$,Q,"⇛","\\Rrightarrow",!0),X("math",$,Q,"↾","\\restriction"),X("math",j,"textord","‘","`"),X("math",j,"textord","$","\\$"),X("text",j,"textord","$","\\$"),X("text",j,"textord","$","\\textdollar"),X("math",j,"textord","%","\\%"),X("text",j,"textord","%","\\%"),X("math",j,"textord","_","\\_"),X("text",j,"textord","_","\\_"),X("text",j,"textord","_","\\textunderscore"),X("math",j,"textord","∠","\\angle",!0),X("math",j,"textord","∞","\\infty",!0),X("math",j,"textord","′","\\prime"),X("math",j,"textord","△","\\triangle"),X("math",j,"textord","Γ","\\Gamma",!0),X("math",j,"textord","Δ","\\Delta",!0),X("math",j,"textord","Θ","\\Theta",!0),X("math",j,"textord","Λ","\\Lambda",!0),X("math",j,"textord","Ξ","\\Xi",!0),X("math",j,"textord","Π","\\Pi",!0),X("math",j,"textord","Σ","\\Sigma",!0),X("math",j,"textord","Υ","\\Upsilon",!0),X("math",j,"textord","Φ","\\Phi",!0),X("math",j,"textord","Ψ","\\Psi",!0),X("math",j,"textord","Ω","\\Omega",!0),X("math",j,"textord","A","Α"),X("math",j,"textord","B","Β"),X("math",j,"textord","E","Ε"),X("math",j,"textord","Z","Ζ"),X("math",j,"textord","H","Η"),X("math",j,"textord","I","Ι"),X("math",j,"textord","K","Κ"),X("math",j,"textord","M","Μ"),X("math",j,"textord","N","Ν"),X("math",j,"textord","O","Ο"),X("math",j,"textord","P","Ρ"),X("math",j,"textord","T","Τ"),X("math",j,"textord","X","Χ"),X("math",j,"textord","¬","\\neg",!0),X("math",j,"textord","¬","\\lnot"),X("math",j,"textord","⊤","\\top"),X("math",j,"textord","⊥","\\bot"),X("math",j,"textord","∅","\\emptyset"),X("math",$,"textord","∅","\\varnothing"),X("math",j,K,"α","\\alpha",!0),X("math",j,K,"β","\\beta",!0),X("math",j,K,"γ","\\gamma",!0),X("math",j,K,"δ","\\delta",!0),X("math",j,K,"ϵ","\\epsilon",!0),X("math",j,K,"ζ","\\zeta",!0),X("math",j,K,"η","\\eta",!0),X("math",j,K,"θ","\\theta",!0),X("math",j,K,"ι","\\iota",!0),X("math",j,K,"κ","\\kappa",!0),X("math",j,K,"λ","\\lambda",!0),X("math",j,K,"μ","\\mu",!0),X("math",j,K,"ν","\\nu",!0),X("math",j,K,"ξ","\\xi",!0),X("math",j,K,"ο","\\omicron",!0),X("math",j,K,"π","\\pi",!0),X("math",j,K,"ρ","\\rho",!0),X("math",j,K,"σ","\\sigma",!0),X("math",j,K,"τ","\\tau",!0),X("math",j,K,"υ","\\upsilon",!0),X("math",j,K,"ϕ","\\phi",!0),X("math",j,K,"χ","\\chi",!0),X("math",j,K,"ψ","\\psi",!0),X("math",j,K,"ω","\\omega",!0),X("math",j,K,"ε","\\varepsilon",!0),X("math",j,K,"ϑ","\\vartheta",!0),X("math",j,K,"ϖ","\\varpi",!0),X("math",j,K,"ϱ","\\varrho",!0),X("math",j,K,"ς","\\varsigma",!0),X("math",j,K,"φ","\\varphi",!0),X("math",j,Z,"∗","*"),X("math",j,Z,"+","+"),X("math",j,Z,"−","-"),X("math",j,Z,"⋅","\\cdot",!0),X("math",j,Z,"∘","\\circ"),X("math",j,Z,"÷","\\div",!0),X("math",j,Z,"±","\\pm",!0),X("math",j,Z,"×","\\times",!0),X("math",j,Z,"∩","\\cap",!0),X("math",j,Z,"∪","\\cup",!0),X("math",j,Z,"∖","\\setminus"),X("math",j,Z,"∧","\\land"),X("math",j,Z,"∨","\\lor"),X("math",j,Z,"∧","\\wedge",!0),X("math",j,Z,"∨","\\vee",!0),X("math",j,"textord","√","\\surd"),X("math",j,"open","(","("),X("math",j,"open","[","["),X("math",j,"open","⟨","\\langle",!0),X("math",j,"open","∣","\\lvert"),X("math",j,"open","∥","\\lVert"),X("math",j,"close",")",")"),X("math",j,"close","]","]"),X("math",j,"close","?","?"),X("math",j,"close","!","!"),X("math",j,"close","⟩","\\rangle",!0),X("math",j,"close","∣","\\rvert"),X("math",j,"close","∥","\\rVert"),X("math",j,Q,"=","="),X("math",j,Q,"<","<"),X("math",j,Q,">",">"),X("math",j,Q,":",":"),X("math",j,Q,"≈","\\approx",!0),X("math",j,Q,"≅","\\cong",!0),X("math",j,Q,"≥","\\ge"),X("math",j,Q,"≥","\\geq",!0),X("math",j,Q,"←","\\gets"),X("math",j,Q,">","\\gt"),X("math",j,Q,"∈","\\in",!0),X("math",j,Q,"","\\@not"),X("math",j,Q,"⊂","\\subset",!0),X("math",j,Q,"⊃","\\supset",!0),X("math",j,Q,"⊆","\\subseteq",!0),X("math",j,Q,"⊇","\\supseteq",!0),X("math",$,Q,"⊈","\\nsubseteq",!0),X("math",$,Q,"⊉","\\nsupseteq",!0),X("math",j,Q,"⊨","\\models"),X("math",j,Q,"←","\\leftarrow",!0),X("math",j,Q,"≤","\\le"),X("math",j,Q,"≤","\\leq",!0),X("math",j,Q,"<","\\lt"),X("math",j,Q,"→","\\rightarrow",!0),X("math",j,Q,"→","\\to"),X("math",$,Q,"≱","\\ngeq",!0),X("math",$,Q,"≰","\\nleq",!0),X("math",j,tt," ","\\ "),X("math",j,tt," ","~"),X("math",j,tt," ","\\space"),X("math",j,tt," ","\\nobreakspace"),X("text",j,tt," ","\\ "),X("text",j,tt," ","~"),X("text",j,tt," ","\\space"),X("text",j,tt," ","\\nobreakspace"),X("math",j,tt,null,"\\nobreak"),X("math",j,tt,null,"\\allowbreak"),X("math",j,"punct",",",","),X("math",j,"punct",";",";"),X("math",$,Z,"⊼","\\barwedge",!0),X("math",$,Z,"⊻","\\veebar",!0),X("math",j,Z,"⊙","\\odot",!0),X("math",j,Z,"⊕","\\oplus",!0),X("math",j,Z,"⊗","\\otimes",!0),X("math",j,"textord","∂","\\partial",!0),X("math",j,Z,"⊘","\\oslash",!0),X("math",$,Z,"⊚","\\circledcirc",!0),X("math",$,Z,"⊡","\\boxdot",!0),X("math",j,Z,"△","\\bigtriangleup"),X("math",j,Z,"▽","\\bigtriangledown"),X("math",j,Z,"†","\\dagger"),X("math",j,Z,"⋄","\\diamond"),X("math",j,Z,"⋆","\\star"),X("math",j,Z,"◃","\\triangleleft"),X("math",j,Z,"▹","\\triangleright"),X("math",j,"open","{","\\{"),X("text",j,"textord","{","\\{"),X("text",j,"textord","{","\\textbraceleft"),X("math",j,"close","}","\\}"),X("text",j,"textord","}","\\}"),X("text",j,"textord","}","\\textbraceright"),X("math",j,"open","{","\\lbrace"),X("math",j,"close","}","\\rbrace"),X("math",j,"open","[","\\lbrack"),X("text",j,"textord","[","\\lbrack"),X("math",j,"close","]","\\rbrack"),X("text",j,"textord","]","\\rbrack"),X("math",j,"open","(","\\lparen"),X("math",j,"close",")","\\rparen"),X("text",j,"textord","<","\\textless"),X("text",j,"textord",">","\\textgreater"),X("math",j,"open","⌊","\\lfloor",!0),X("math",j,"close","⌋","\\rfloor",!0),X("math",j,"open","⌈","\\lceil",!0),X("math",j,"close","⌉","\\rceil",!0),X("math",j,"textord","\\","\\backslash"),X("math",j,"textord","∣","|"),X("math",j,"textord","∣","\\vert"),X("text",j,"textord","|","\\textbar"),X("math",j,"textord","∥","\\|"),X("math",j,"textord","∥","\\Vert"),X("text",j,"textord","∥","\\textbardbl"),X("text",j,"textord","~","\\textasciitilde"),X("text",j,"textord","\\","\\textbackslash"),X("text",j,"textord","^","\\textasciicircum"),X("math",j,Q,"↑","\\uparrow",!0),X("math",j,Q,"⇑","\\Uparrow",!0),X("math",j,Q,"↓","\\downarrow",!0),X("math",j,Q,"⇓","\\Downarrow",!0),X("math",j,Q,"↕","\\updownarrow",!0),X("math",j,Q,"⇕","\\Updownarrow",!0),X("math",j,J,"∐","\\coprod"),X("math",j,J,"⋁","\\bigvee"),X("math",j,J,"⋀","\\bigwedge"),X("math",j,J,"⨄","\\biguplus"),X("math",j,J,"⋂","\\bigcap"),X("math",j,J,"⋃","\\bigcup"),X("math",j,J,"∫","\\int"),X("math",j,J,"∫","\\intop"),X("math",j,J,"∬","\\iint"),X("math",j,J,"∭","\\iiint"),X("math",j,J,"∏","\\prod"),X("math",j,J,"∑","\\sum"),X("math",j,J,"⨂","\\bigotimes"),X("math",j,J,"⨁","\\bigoplus"),X("math",j,J,"⨀","\\bigodot"),X("math",j,J,"∮","\\oint"),X("math",j,J,"∯","\\oiint"),X("math",j,J,"∰","\\oiiint"),X("math",j,J,"⨆","\\bigsqcup"),X("math",j,J,"∫","\\smallint"),X("text",j,"inner","…","\\textellipsis"),X("math",j,"inner","…","\\mathellipsis"),X("text",j,"inner","…","\\ldots",!0),X("math",j,"inner","…","\\ldots",!0),X("math",j,"inner","⋯","\\@cdots",!0),X("math",j,"inner","⋱","\\ddots",!0),X("math",j,"textord","⋮","\\varvdots"),X("math",j,"accent-token","ˊ","\\acute"),X("math",j,"accent-token","ˋ","\\grave"),X("math",j,"accent-token","¨","\\ddot"),X("math",j,"accent-token","~","\\tilde"),X("math",j,"accent-token","ˉ","\\bar"),X("math",j,"accent-token","˘","\\breve"),X("math",j,"accent-token","ˇ","\\check"),X("math",j,"accent-token","^","\\hat"),X("math",j,"accent-token","⃗","\\vec"),X("math",j,"accent-token","˙","\\dot"),X("math",j,"accent-token","˚","\\mathring"),X("math",j,K,"ı","\\imath",!0),X("math",j,K,"ȷ","\\jmath",!0),X("text",j,"textord","ı","\\i",!0),X("text",j,"textord","ȷ","\\j",!0),X("text",j,"textord","ß","\\ss",!0),X("text",j,"textord","æ","\\ae",!0),X("text",j,"textord","æ","\\ae",!0),X("text",j,"textord","œ","\\oe",!0),X("text",j,"textord","ø","\\o",!0),X("text",j,"textord","Æ","\\AE",!0),X("text",j,"textord","Œ","\\OE",!0),X("text",j,"textord","Ø","\\O",!0),X("text",j,"accent-token","ˊ","\\'"),X("text",j,"accent-token","ˋ","\\`"),X("text",j,"accent-token","ˆ","\\^"),X("text",j,"accent-token","˜","\\~"),X("text",j,"accent-token","ˉ","\\="),X("text",j,"accent-token","˘","\\u"),X("text",j,"accent-token","˙","\\."),X("text",j,"accent-token","˚","\\r"),X("text",j,"accent-token","ˇ","\\v"),X("text",j,"accent-token","¨",'\\"'),X("text",j,"accent-token","˝","\\H"),X("text",j,"accent-token","◯","\\textcircled");var et={"--":!0,"---":!0,"``":!0,"''":!0};X("text",j,"textord","–","--"),X("text",j,"textord","–","\\textendash"),X("text",j,"textord","—","---"),X("text",j,"textord","—","\\textemdash"),X("text",j,"textord","‘","`"),X("text",j,"textord","‘","\\textquoteleft"),X("text",j,"textord","’","'"),X("text",j,"textord","’","\\textquoteright"),X("text",j,"textord","“","``"),X("text",j,"textord","“","\\textquotedblleft"),X("text",j,"textord","”","''"),X("text",j,"textord","”","\\textquotedblright"),X("math",j,"textord","°","\\degree",!0),X("text",j,"textord","°","\\degree"),X("text",j,"textord","°","\\textdegree",!0),X("math",j,K,"£","\\pounds"),X("math",j,K,"£","\\mathsterling",!0),X("text",j,K,"£","\\pounds"),X("text",j,K,"£","\\textsterling",!0),X("math",$,"textord","✠","\\maltese"),X("text",$,"textord","✠","\\maltese"),X("text",j,tt," ","\\ "),X("text",j,tt," "," "),X("text",j,tt," ","~");for(var rt=0;rt<'0123456789/@."'.length;rt++){var nt='0123456789/@."'.charAt(rt);X("math",j,"textord",nt,nt)}for(var at=0;at<'0123456789!@*()-=+[]<>|";:?/.,'.length;at++){var it='0123456789!@*()-=+[]<>|";:?/.,'.charAt(at);X("text",j,"textord",it,it)}for(var ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",st=0;st<ot.length;st++){var ht=ot.charAt(st);X("math",j,K,ht,ht),X("text",j,"textord",ht,ht)}X("math",$,"textord","C","ℂ"),X("text",$,"textord","C","ℂ"),X("math",$,"textord","H","ℍ"),X("text",$,"textord","H","ℍ"),X("math",$,"textord","N","ℕ"),X("text",$,"textord","N","ℕ"),X("math",$,"textord","P","ℙ"),X("text",$,"textord","P","ℙ"),X("math",$,"textord","Q","ℚ"),X("text",$,"textord","Q","ℚ"),X("math",$,"textord","R","ℝ"),X("text",$,"textord","R","ℝ"),X("math",$,"textord","Z","ℤ"),X("text",$,"textord","Z","ℤ"),X("math",j,K,"h","ℎ"),X("text",j,K,"h","ℎ");for(var lt="",mt=0;mt<ot.length;mt++){var ct=ot.charAt(mt);X("math",j,K,ct,lt=String.fromCharCode(55349,56320+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56372+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56424+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56580+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56736+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56788+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56840+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56944+mt)),X("text",j,"textord",ct,lt),mt<26&&(X("math",j,K,ct,lt=String.fromCharCode(55349,56632+mt)),X("text",j,"textord",ct,lt),X("math",j,K,ct,lt=String.fromCharCode(55349,56476+mt)),X("text",j,"textord",ct,lt))}X("math",j,K,"k",lt=String.fromCharCode(55349,56668)),X("text",j,"textord","k",lt);for(var ut=0;ut<10;ut++){var dt=ut.toString();X("math",j,K,dt,lt=String.fromCharCode(55349,57294+ut)),X("text",j,"textord",dt,lt),X("math",j,K,dt,lt=String.fromCharCode(55349,57314+ut)),X("text",j,"textord",dt,lt),X("math",j,K,dt,lt=String.fromCharCode(55349,57324+ut)),X("text",j,"textord",dt,lt),X("math",j,K,dt,lt=String.fromCharCode(55349,57334+ut)),X("text",j,"textord",dt,lt)}for(var pt=0;pt<"ÇÐÞçþ".length;pt++){var ft="ÇÐÞçþ".charAt(pt);X("math",j,K,ft,ft),X("text",j,"textord",ft,ft)}X("text",j,"textord","ð","ð"),X("text",j,"textord","–","–"),X("text",j,"textord","—","—"),X("text",j,"textord","‘","‘"),X("text",j,"textord","’","’"),X("text",j,"textord","“","“"),X("text",j,"textord","”","”");var gt=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathdefault","textit","Math-Italic"],["mathdefault","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],xt=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],vt=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],yt=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],bt=function(t,e){return e.size<2?t:vt[t-1][e.size-1]},wt=function(){function t(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||t.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=yt[this.size-1],this.maxSize=e.maxSize,this._fontMetrics=void 0}var e=t.prototype;return e.extend=function(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new t(r)},e.havingStyle=function(t){return this.style===t?this:this.extend({style:t,size:bt(this.textSize,t)})},e.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},e.havingSize=function(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:yt[t-1]})},e.havingBaseStyle=function(e){e=e||this.style.text();var r=bt(t.BASESIZE,e);return this.size===r&&this.textSize===t.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})},e.havingBaseSizing=function(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})},e.withColor=function(t){return this.extend({color:t})},e.withPhantom=function(){return this.extend({phantom:!0})},e.withFont=function(t){return this.extend({font:t})},e.withTextFontFamily=function(t){return this.extend({fontFamily:t,font:""})},e.withTextFontWeight=function(t){return this.extend({fontWeight:t,font:""})},e.withTextFontShape=function(t){return this.extend({fontShape:t,font:""})},e.sizingClasses=function(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]},e.baseSizingClasses=function(){return this.size!==t.BASESIZE?["sizing","reset-size"+this.size,"size"+t.BASESIZE]:[]},e.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(t){var e;if(!U[e=t>=5?0:t>=3?1:2]){var r=U[e]={cssEmPerMu:P.quad[e]/18};for(var n in P)P.hasOwnProperty(n)&&(r[n]=P[n][e])}return U[e]}(this.size)),this._fontMetrics},e.getColor=function(){return this.phantom?"transparent":null!=this.color&&t.colorMap.hasOwnProperty(this.color)?t.colorMap[this.color]:this.color},t}();wt.BASESIZE=6,wt.colorMap={"katex-blue":"#6495ed","katex-orange":"#ffa500","katex-pink":"#ff00af","katex-red":"#df0030","katex-green":"#28ae7b","katex-gray":"gray","katex-purple":"#9d38bd","katex-blueA":"#ccfaff","katex-blueB":"#80f6ff","katex-blueC":"#63d9ea","katex-blueD":"#11accd","katex-blueE":"#0c7f99","katex-tealA":"#94fff5","katex-tealB":"#26edd5","katex-tealC":"#01d1c1","katex-tealD":"#01a995","katex-tealE":"#208170","katex-greenA":"#b6ffb0","katex-greenB":"#8af281","katex-greenC":"#74cf70","katex-greenD":"#1fab54","katex-greenE":"#0d923f","katex-goldA":"#ffd0a9","katex-goldB":"#ffbb71","katex-goldC":"#ff9c39","katex-goldD":"#e07d10","katex-goldE":"#a75a05","katex-redA":"#fca9a9","katex-redB":"#ff8482","katex-redC":"#f9685d","katex-redD":"#e84d39","katex-redE":"#bc2612","katex-maroonA":"#ffbde0","katex-maroonB":"#ff92c6","katex-maroonC":"#ed5fa6","katex-maroonD":"#ca337c","katex-maroonE":"#9e034e","katex-purpleA":"#ddd7ff","katex-purpleB":"#c6b9fc","katex-purpleC":"#aa87ff","katex-purpleD":"#7854ab","katex-purpleE":"#543b78","katex-mintA":"#f5f9e8","katex-mintB":"#edf2df","katex-mintC":"#e0e5cc","katex-grayA":"#f6f7f7","katex-grayB":"#f0f1f2","katex-grayC":"#e3e5e6","katex-grayD":"#d6d8da","katex-grayE":"#babec2","katex-grayF":"#888d93","katex-grayG":"#626569","katex-grayH":"#3b3e40","katex-grayI":"#21242c","katex-kaBlue":"#314453","katex-kaGreen":"#71B307"};var kt=wt,St={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},zt={ex:!0,em:!0,mu:!0},Mt=function(t,e){var r;if(t.unit in St)r=St[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if("mu"===t.unit)r=e.fontMetrics().cssEmPerMu;else{var n;if(n=e.style.isTight()?e.havingStyle(e.style.text()):e,"ex"===t.unit)r=n.fontMetrics().xHeight;else{if("em"!==t.unit)throw new o("Invalid unit: '"+t.unit+"'");r=n.fontMetrics().quad}n!==e&&(r*=n.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*r,e.maxSize)},Tt=["\\imath","ı","\\jmath","ȷ","\\pounds","\\mathsterling","\\textsterling","£"],At=function(t,e,r){return W[r][t]&&W[r][t].replace&&(t=W[r][t].replace),{value:t,metrics:V(t,e,r)}},Bt=function(t,e,r,n,a){var i,o=At(t,e,r),s=o.metrics;if(t=o.value,s){var h=s.italic;("text"===r||n&&"mathit"===n.font)&&(h=0),i=new I(t,s.height,s.depth,h,s.skew,s.width,a)}else i=new I(t,0,0,0,0,0,a);if(n){i.maxFontSize=n.sizeMultiplier,n.style.isTight()&&i.classes.push("mtight");var l=n.getColor();l&&(i.style.color=l)}return i},Ct=function(t,e){if(A(t.classes)!==A(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var n in e.style)if(e.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;return!0},Nt=function(t){for(var e=0,r=0,n=0,a=0;a<t.children.length;a++){var i=t.children[a];i.height>e&&(e=i.height),i.depth>r&&(r=i.depth),i.maxFontSize>n&&(n=i.maxFontSize)}t.height=e,t.depth=r,t.maxFontSize=n},qt=function(t,e,r,n){var a=new q(t,e,r,n);return Nt(a),a},Et=function(t,e,r,n){return new q(t,e,r,n)},Ot=function(t){var e=new T(t);return Nt(e),e},It=function(t,e,r){var n="";switch(t){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=t}return n+"-"+("textbf"===e&&"textit"===r?"BoldItalic":"textbf"===e?"Bold":"textit"===e?"Italic":"Regular")},Rt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Lt={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Dt={fontMap:Rt,makeSymbol:Bt,mathsym:function(t,e,r,n){return void 0===n&&(n=[]),r&&r.font&&"boldsymbol"===r.font&&At(t,"Main-Bold",e).metrics?Bt(t,"Main-Bold",e,r,n.concat(["mathbf"])):"\\"===t||"main"===W[e][t].font?Bt(t,"Main-Regular",e,r,n):Bt(t,"AMS-Regular",e,r,n.concat(["amsrm"]))},makeSpan:qt,makeSvgSpan:Et,makeLineSpan:function(t,e,r){var n=qt([t],[],e);return n.height=r||e.fontMetrics().defaultRuleThickness,n.style.borderBottomWidth=n.height+"em",n.maxFontSize=1,n},makeAnchor:function(t,e,r,n){var a=new E(t,e,r,n);return Nt(a),a},makeFragment:Ot,wrapFragment:function(t,e){return t instanceof T?qt([],[t],e):t},makeVList:function(t,e){for(var r=function(t){if("individualShift"===t.positionType){for(var e=t.children,r=[e[0]],n=-e[0].shift-e[0].elem.depth,a=n,i=1;i<e.length;i++){var o=-e[i].shift-a-e[i].elem.depth,s=o-(e[i-1].elem.height+e[i-1].elem.depth);a+=o,r.push({type:"kern",size:s}),r.push(e[i])}return{children:r,depth:n}}var h;if("top"===t.positionType){for(var l=t.positionData,m=0;m<t.children.length;m++){var c=t.children[m];l-="kern"===c.type?c.size:c.elem.height+c.elem.depth}h=l}else if("bottom"===t.positionType)h=-t.positionData;else{var u=t.children[0];if("elem"!==u.type)throw new Error('First child must have type "elem".');if("shift"===t.positionType)h=-u.elem.depth-t.positionData;else{if("firstBaseline"!==t.positionType)throw new Error("Invalid positionType "+t.positionType+".");h=-u.elem.depth}}return{children:t.children,depth:h}}(t),n=r.children,a=r.depth,i=0,o=0;o<n.length;o++){var s=n[o];if("elem"===s.type){var h=s.elem;i=Math.max(i,h.maxFontSize,h.height)}}i+=2;var l=qt(["pstrut"],[]);l.style.height=i+"em";for(var m=[],c=a,u=a,d=a,p=0;p<n.length;p++){var f=n[p];if("kern"===f.type)d+=f.size;else{var g=f.elem,x=f.wrapperClasses||[],v=f.wrapperStyle||{},y=qt(x,[l,g],void 0,v);y.style.top=-i-d-g.depth+"em",f.marginLeft&&(y.style.marginLeft=f.marginLeft),f.marginRight&&(y.style.marginRight=f.marginRight),m.push(y),d+=g.height+g.depth}c=Math.min(c,d),u=Math.max(u,d)}var b,w=qt(["vlist"],m);if(w.style.height=u+"em",c<0){var k=qt([],[]),S=qt(["vlist"],[k]);S.style.height=-c+"em";var z=qt(["vlist-s"],[new I("​")]);b=[qt(["vlist-r"],[w,z]),qt(["vlist-r"],[S])]}else b=[qt(["vlist-r"],[w])];var M=qt(["vlist-t"],b);return 2===b.length&&M.classes.push("vlist-t2"),M.height=u,M.depth=-c,M},makeOrd:function(t,e,r){var n,a=t.mode,i=t.text,s=["mord"],h="math"===a||"text"===a&&e.font,l=h?e.font:e.fontFamily;if(55349===i.charCodeAt(0)){var m=function(t,e){var r=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,n="math"===e?0:1;if(119808<=r&&r<120484){var a=Math.floor((r-119808)/26);return[gt[a][2],gt[a][n]]}if(120782<=r&&r<=120831){var i=Math.floor((r-120782)/10);return[xt[i][2],xt[i][n]]}if(120485===r||120486===r)return[gt[0][2],gt[0][n]];if(120486<r&&r<120782)return["",""];throw new o("Unsupported character: "+t)}(i,a),u=m[0],d=m[1];return Bt(i,u,a,e,s.concat(d))}if(l){var p,f;if("boldsymbol"===l||"mathnormal"===l){var g="boldsymbol"===l?At(i,"Math-BoldItalic",a).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}:(n=i,c.contains(Tt,n)?{fontName:"Main-Italic",fontClass:"mathit"}:/[0-9]/.test(n.charAt(0))?{fontName:"Caligraphic-Regular",fontClass:"mathcal"}:{fontName:"Math-Italic",fontClass:"mathdefault"});p=g.fontName,f=[g.fontClass]}else c.contains(Tt,i)?(p="Main-Italic",f=["mathit"]):h?(p=Rt[l].fontName,f=[l]):(p=It(l,e.fontWeight,e.fontShape),f=[l,e.fontWeight,e.fontShape]);if(At(i,p,a).metrics)return Bt(i,p,a,e,s.concat(f));if(et.hasOwnProperty(i)&&"Typewriter"===p.substr(0,10)){for(var x=[],v=0;v<i.length;v++)x.push(Bt(i[v],p,a,e,s.concat(f)));return Ot(x)}}if("mathord"===r){var y=function(t,e,r,n){return/[0-9]/.test(t.charAt(0))||c.contains(Tt,t)?{fontName:"Main-Italic",fontClass:"mathit"}:{fontName:"Math-Italic",fontClass:"mathdefault"}}(i);return Bt(i,y.fontName,a,e,s.concat([y.fontClass]))}if("textord"===r){var b=W[a][i]&&W[a][i].font;if("ams"===b){var w=It("amsrm",e.fontWeight,e.fontShape);return Bt(i,w,a,e,s.concat("amsrm",e.fontWeight,e.fontShape))}if("main"!==b&&b){var k=It(b,e.fontWeight,e.fontShape);return Bt(i,k,a,e,s.concat(k,e.fontWeight,e.fontShape))}var S=It("textrm",e.fontWeight,e.fontShape);return Bt(i,S,a,e,s.concat(e.fontWeight,e.fontShape))}throw new Error("unexpected type: "+r+" in makeOrd")},makeGlue:function(t,e){var r=qt(["mspace"],[],e),n=Mt(t,e);return r.style.marginRight=n+"em",r},staticSvg:function(t,e){var r=Lt[t],n=r[0],a=r[1],i=r[2],o=new L(n),s=new R([o],{width:a+"em",height:i+"em",style:"width:"+a+"em",viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),h=Et(["overlay"],[s],e);return h.height=i,h.style.height=i+"em",h.style.width=a+"em",h},svgData:Lt,tryCombineChars:function(t){for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof I&&n instanceof I&&Ct(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t}};function Ht(t,e){var r=Pt(t,e);if(!r)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return r}function Pt(t,e){return t&&t.type===e?t:null}function Ft(t,e){var r=function(t,e){return t&&"atom"===t.type&&t.family===e?t:null}(t,e);if(!r)throw new Error('Expected node of type "atom" and family "'+e+'", but got '+(t?"atom"===t.type?"atom of family "+t.family:"node of type "+t.type:String(t)));return r}function Vt(t){return t&&("atom"===t.type||Y.hasOwnProperty(t.type))?t:null}var Ut={number:3,unit:"mu"},Gt={number:4,unit:"mu"},Yt={number:5,unit:"mu"},_t={mord:{mop:Ut,mbin:Gt,mrel:Yt,minner:Ut},mop:{mord:Ut,mop:Ut,mrel:Yt,minner:Ut},mbin:{mord:Gt,mop:Gt,mopen:Gt,minner:Gt},mrel:{mord:Yt,mop:Yt,mopen:Yt,minner:Yt},mopen:{},mclose:{mop:Ut,mbin:Gt,mrel:Yt,minner:Ut},mpunct:{mord:Ut,mop:Ut,mrel:Yt,mopen:Ut,mclose:Ut,mpunct:Ut,minner:Ut},minner:{mord:Ut,mop:Ut,mbin:Gt,mrel:Yt,mopen:Ut,mpunct:Ut,minner:Ut}},Wt={mord:{mop:Ut},mop:{mord:Ut,mop:Ut},mbin:{},mrel:{},mopen:{},mclose:{mop:Ut},mpunct:{},minner:{mop:Ut}},Xt={},jt={},$t={};function Zt(t){for(var e=t.type,r=(t.nodeType,t.names),n=t.props,a=t.handler,i=t.htmlBuilder,o=t.mathmlBuilder,s={type:e,numArgs:n.numArgs,argTypes:n.argTypes,greediness:void 0===n.greediness?1:n.greediness,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,consumeMode:n.consumeMode,handler:a},h=0;h<r.length;++h)Xt[r[h]]=s;e&&(i&&(jt[e]=i),o&&($t[e]=o))}function Kt(t){Zt({type:t.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:t.htmlBuilder,mathmlBuilder:t.mathmlBuilder})}var Jt=function(t){var e=Pt(t,"ordgroup");return e?e.body:[t]},Qt=Dt.makeSpan,te=["leftmost","mbin","mopen","mrel","mop","mpunct"],ee=["rightmost","mrel","mclose","mpunct"],re={display:w.DISPLAY,text:w.TEXT,script:w.SCRIPT,scriptscript:w.SCRIPTSCRIPT},ne={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ae=function(t,e,r,n){void 0===n&&(n=[null,null]);for(var a=[],i=0;i<t.length;i++){var o=le(t[i],e);if(o instanceof T){var s=o.children;a.push.apply(a,s)}else a.push(o)}if(!r)return a;var h=e;if(1===t.length){var l=Pt(t[0],"sizing")||Pt(t[0],"styling");l&&("sizing"===l.type?h=e.havingSize(l.size):"styling"===l.type&&(h=e.havingStyle(re[l.style])))}var m=Qt([n[0]||"leftmost"],[],e),u=Qt([n[1]||"rightmost"],[],e);return ie(a,function(t,e){var r=e.classes[0],n=t.classes[0];"mbin"===r&&c.contains(ee,n)?e.classes[0]="mord":"mbin"===n&&c.contains(te,r)&&(t.classes[0]="mord")},{node:m},u),ie(a,function(t,e){var r=se(e),n=se(t),a=r&&n?t.hasClass("mtight")?Wt[r][n]:_t[r][n]:null;if(a)return Dt.makeGlue(a,h)},{node:m},u),a},ie=function t(e,r,n,a){a&&e.push(a);for(var i=0;i<e.length;i++){var o=e[i],s=oe(o);if(s)t(s.children,r,n);else if("mspace"!==o.classes[0]){var h=r(o,n.node);h&&(n.insertAfter?n.insertAfter(h):(e.unshift(h),i++)),n.node=o,n.insertAfter=function(t){return function(r){e.splice(t+1,0,r),i++}}(i)}}a&&e.pop()},oe=function(t){return t instanceof T||t instanceof E?t:null},se=function(t,e){return t?(e&&(t=function t(e,r){var n=oe(e);if(n){var a=n.children;if(a.length){if("right"===r)return t(a[a.length-1],"right");if("left"===r)return t(a[0],"left")}}return e}(t,e)),ne[t.classes[0]]||null):null},he=function(t,e){var r=["nulldelimiter"].concat(t.baseSizingClasses());return Qt(e.concat(r))},le=function(t,e,r){if(!t)return Qt();if(jt[t.type]){var n=jt[t.type](t,e);if(r&&e.size!==r.size){n=Qt(e.sizingClasses(r),[n],e);var a=e.sizeMultiplier/r.sizeMultiplier;n.height*=a,n.depth*=a}return n}throw new o("Got group of unknown type: '"+t.type+"'")};function me(t,e){var r=Qt(["base"],t,e),n=Qt(["strut"]);return n.style.height=r.height+r.depth+"em",n.style.verticalAlign=-r.depth+"em",r.children.unshift(n),r}function ce(t,e){var r=null;1===t.length&&"tag"===t[0].type&&(r=t[0].tag,t=t[0].body);for(var n,a=ae(t,e,!0),i=[],o=[],s=0;s<a.length;s++)if(o.push(a[s]),a[s].hasClass("mbin")||a[s].hasClass("mrel")||a[s].hasClass("allowbreak")){for(var h=!1;s<a.length-1&&a[s+1].hasClass("mspace")&&!a[s+1].hasClass("newline");)s++,o.push(a[s]),a[s].hasClass("nobreak")&&(h=!0);h||(i.push(me(o,e)),o=[])}else a[s].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(me(o,e)),o=[]),i.push(a[s]));o.length>0&&i.push(me(o,e)),r&&((n=me(ae(r,e,!0))).classes=["tag"],i.push(n));var l=Qt(["katex-html"],i);if(l.setAttribute("aria-hidden","true"),n){var m=n.children[0];m.style.height=l.height+l.depth+"em",m.style.verticalAlign=-l.depth+"em"}return l}function ue(t){return new T(t)}var de=function(){function t(t,e){this.type=void 0,this.attributes=void 0,this.children=void 0,this.type=t,this.attributes={},this.children=e||[]}var e=t.prototype;return e.setAttribute=function(t,e){this.attributes[t]=e},e.getAttribute=function(t){return this.attributes[t]},e.toNode=function(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(var r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t},e.toMarkup=function(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=c.escape(this.attributes[e]),t+='"');t+=">";for(var r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t+"</"+this.type+">"},e.toText=function(){return this.children.map(function(t){return t.toText()}).join("")},t}(),pe=function(){function t(t){this.text=void 0,this.text=t}var e=t.prototype;return e.toNode=function(){return document.createTextNode(this.text)},e.toMarkup=function(){return c.escape(this.toText())},e.toText=function(){return this.text},t}(),fe={MathNode:de,TextNode:pe,SpaceNode:function(){function t(t){this.width=void 0,this.character=void 0,this.width=t,this.character=t>=.05555&&t<=.05556?" ":t>=.1666&&t<=.1667?" ":t>=.2222&&t<=.2223?" ":t>=.2777&&t<=.2778?"  ":t>=-.05556&&t<=-.05555?" ⁣":t>=-.1667&&t<=-.1666?" ⁣":t>=-.2223&&t<=-.2222?" ⁣":t>=-.2778&&t<=-.2777?" ⁣":null}var e=t.prototype;return e.toNode=function(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",this.width+"em"),t},e.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},e.toText=function(){return this.character?this.character:" "},t}(),newDocumentFragment:ue},ge=function(t,e,r){return!W[e][t]||!W[e][t].replace||55349===t.charCodeAt(0)||et.hasOwnProperty(t)&&r&&(r.fontFamily&&"tt"===r.fontFamily.substr(4,2)||r.font&&"tt"===r.font.substr(4,2))||(t=W[e][t].replace),new fe.TextNode(t)},xe=function(t){return 1===t.length?t[0]:new fe.MathNode("mrow",t)},ve=function(t,e){if("texttt"===e.fontFamily)return"monospace";if("textsf"===e.fontFamily)return"textit"===e.fontShape&&"textbf"===e.fontWeight?"sans-serif-bold-italic":"textit"===e.fontShape?"sans-serif-italic":"textbf"===e.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===e.fontShape&&"textbf"===e.fontWeight)return"bold-italic";if("textit"===e.fontShape)return"italic";if("textbf"===e.fontWeight)return"bold";var r=e.font;if(!r||"mathnormal"===r)return null;var n=t.mode;if("mathit"===r)return"italic";if("boldsymbol"===r)return"bold-italic";var a=t.text;return c.contains(["\\imath","\\jmath"],a)?null:(W[n][a]&&W[n][a].replace&&(a=W[n][a].replace),V(a,Dt.fontMap[r].fontName,n)?Dt.fontMap[r].variant:null)},ye=function(t,e){for(var r,n=[],a=0;a<t.length;a++){var i=we(t[a],e);if(i instanceof de&&r instanceof de){if("mtext"===i.type&&"mtext"===r.type&&i.getAttribute("mathvariant")===r.getAttribute("mathvariant")){var o;(o=r.children).push.apply(o,i.children);continue}if("mn"===i.type&&"mn"===r.type){var s;(s=r.children).push.apply(s,i.children);continue}if("mi"===i.type&&1===i.children.length&&"mn"===r.type){var h=i.children[0];if(h instanceof pe&&"."===h.text){var l;(l=r.children).push.apply(l,i.children);continue}}}n.push(i),r=i}return n},be=function(t,e){return xe(ye(t,e))},we=function(t,e){if(!t)return new fe.MathNode("mrow");if($t[t.type])return $t[t.type](t,e);throw new o("Got group of unknown type: '"+t.type+"'")},ke=function(t){return new kt({style:t.displayMode?w.DISPLAY:w.TEXT,maxSize:t.maxSize})},Se=function(t,e){if(e.displayMode){var r=["katex-display"];e.leqno&&r.push("leqno"),e.fleqn&&r.push("fleqn"),t=Dt.makeSpan(r,[t])}return t},ze={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⎵",overbrace:"⏞",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋"},Me={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Te=function(t){var e=new fe.MathNode("mo",[new fe.TextNode(ze[t.substr(1)])]);return e.setAttribute("stretchy","true"),e},Ae=function(t,e){var r=function(){var r=4e5,n=t.label.substr(1);if(c.contains(["widehat","widecheck","widetilde","utilde"],n)){var a,i,o,s=function(t){return"ordgroup"===t.type?t.body.length:1}(t.base);if(s>5)"widehat"===n||"widecheck"===n?(a=420,r=2364,o=.42,i=n+"4"):(a=312,r=2340,o=.34,i="tilde4");else{var h=[1,1,2,2,3,3][s];"widehat"===n||"widecheck"===n?(r=[0,1062,2364,2364,2364][h],a=[0,239,300,360,420][h],o=[0,.24,.3,.3,.36,.42][h],i=n+h):(r=[0,600,1033,2339,2340][h],a=[0,260,286,306,312][h],o=[0,.26,.286,.3,.306,.34][h],i="tilde"+h)}var l=new L(i),m=new R([l],{width:"100%",height:o+"em",viewBox:"0 0 "+r+" "+a,preserveAspectRatio:"none"});return{span:Dt.makeSvgSpan([],[m],e),minWidth:0,height:o}}var u,d,p=[],f=Me[n],g=f[0],x=f[1],v=f[2],y=v/1e3,b=g.length;if(1===b)u=["hide-tail"],d=[f[3]];else if(2===b)u=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else{if(3!==b)throw new Error("Correct katexImagesData or update code here to support\n                    "+b+" children.");u=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"]}for(var w=0;w<b;w++){var k=new L(g[w]),S=new R([k],{width:"400em",height:y+"em",viewBox:"0 0 "+r+" "+v,preserveAspectRatio:d[w]+" slice"}),z=Dt.makeSvgSpan([u[w]],[S],e);if(1===b)return{span:z,minWidth:x,height:y};z.style.height=y+"em",p.push(z)}return{span:Dt.makeSpan(["stretchy"],p,e),minWidth:x,height:y}}(),n=r.span,a=r.minWidth,i=r.height;return n.height=i,n.style.height=i+"em",a>0&&(n.style.minWidth=a+"em"),n},Be=function(t,e){var r,n,a,i=Pt(t,"supsub");i?(r=(n=Ht(i.base,"accent")).base,i.base=r,a=function(t){if(t instanceof q)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}(le(i,e)),i.base=n):r=(n=Ht(t,"accent")).base;var o=le(r,e.havingCrampedStyle()),s=0;if(n.isShifty&&c.isCharacterBox(r)){var h=c.getBaseElem(r);s=function(t){if(t instanceof I)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}(le(h,e.havingCrampedStyle())).skew}var l,m=Math.min(o.height,e.fontMetrics().xHeight);if(n.isStretchy)l=Ae(n,e),l=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:s>0?{width:"calc(100% - "+2*s+"em)",marginLeft:2*s+"em"}:void 0}]},e);else{var u,d;"\\vec"===n.label?(u=Dt.staticSvg("vec",e),d=Dt.svgData.vec[1]):((u=Dt.makeSymbol(n.label,"Main-Regular",n.mode,e)).italic=0,d=u.width),l=Dt.makeSpan(["accent-body"],[u]);var p="\\textcircled"===n.label;p&&(l.classes.push("accent-full"),m=o.height);var f=s;p||(f-=d/2),l.style.left=f+"em","\\textcircled"===n.label&&(l.style.top=".2em"),l=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-m},{type:"elem",elem:l}]},e)}var g=Dt.makeSpan(["mord","accent"],[l],e);return a?(a.children[0]=g,a.height=Math.max(g.height,a.height),a.classes[0]="mord",a):g},Ce=function(t,e){var r=t.isStretchy?Te(t.label):new fe.MathNode("mo",[ge(t.label,t.mode)]),n=new fe.MathNode("mover",[we(t.base,e),r]);return n.setAttribute("accent","true"),n},Ne=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(function(t){return"\\"+t}).join("|"));Zt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(t,e){var r=e[0],n=!Ne.test(t.funcName),a=!n||"\\widehat"===t.funcName||"\\widetilde"===t.funcName||"\\widecheck"===t.funcName;return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:Be,mathmlBuilder:Ce}),Zt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!1},handler:function(t,e){var r=e[0];return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:Be,mathmlBuilder:Ce}),Zt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(t,e){var r=t.parser,n=t.funcName,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:function(t,e){var r=le(t.base,e),n=Ae(t,e),a="\\utilde"===t.label?.12:0,i=Dt.makeVList({positionType:"bottom",positionData:n.height+a,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return Dt.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:function(t,e){var r=Te(t.label),n=new fe.MathNode("munder",[we(t.base,e),r]);return n.setAttribute("accentunder","true"),n}}),Zt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,r){var n=t.parser,a=t.funcName;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder:function(t,e){var r,n=e.style,a=e.havingStyle(n.sup()),i=Dt.wrapFragment(le(t.body,a,e),e);i.classes.push("x-arrow-pad"),t.below&&(a=e.havingStyle(n.sub()),(r=Dt.wrapFragment(le(t.below,a,e),e)).classes.push("x-arrow-pad"));var o,s=Ae(t,e),h=-e.fontMetrics().axisHeight+.5*s.height,l=-e.fontMetrics().axisHeight-.5*s.height-.111;if((i.depth>.25||"\\xleftequilibrium"===t.label)&&(l-=i.depth),r){var m=-e.fontMetrics().axisHeight+r.height+.5*s.height+.111;o=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:l},{type:"elem",elem:s,shift:h},{type:"elem",elem:r,shift:m}]},e)}else o=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:l},{type:"elem",elem:s,shift:h}]},e);return o.children[0].children[0].children[1].classes.push("svg-align"),Dt.makeSpan(["mrel","x-arrow"],[o],e)},mathmlBuilder:function(t,e){var r,n,a=Te(t.label);if(t.body){var i=we(t.body,e);t.below?(n=we(t.below,e),r=new fe.MathNode("munderover",[a,n,i])):r=new fe.MathNode("mover",[a,i])}else t.below?(n=we(t.below,e),r=new fe.MathNode("munder",[a,n])):r=new fe.MathNode("mover",[a]);return r}}),Zt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){for(var r=t.parser,n=Ht(e[0],"ordgroup").body,a="",i=0;i<n.length;i++)a+=Ht(n[i],"textord").text;var s=parseInt(a);if(isNaN(s))throw new o("\\@char has non-numeric argument "+a);return{type:"textord",mode:r.mode,text:String.fromCharCode(s)}}});var qe=function(t,e){var r=ae(t.body,e.withColor(t.color),!1);return Dt.makeFragment(r)},Ee=function(t,e){var r=ye(t.body,e),n=new fe.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};Zt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","original"]},handler:function(t,e){var r=t.parser,n=Ht(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:Jt(a)}},htmlBuilder:qe,mathmlBuilder:Ee}),Zt({type:"color",names:["\\blue","\\orange","\\pink","\\red","\\green","\\gray","\\purple","\\blueA","\\blueB","\\blueC","\\blueD","\\blueE","\\tealA","\\tealB","\\tealC","\\tealD","\\tealE","\\greenA","\\greenB","\\greenC","\\greenD","\\greenE","\\goldA","\\goldB","\\goldC","\\goldD","\\goldE","\\redA","\\redB","\\redC","\\redD","\\redE","\\maroonA","\\maroonB","\\maroonC","\\maroonD","\\maroonE","\\purpleA","\\purpleB","\\purpleC","\\purpleD","\\purpleE","\\mintA","\\mintB","\\mintC","\\grayA","\\grayB","\\grayC","\\grayD","\\grayE","\\grayF","\\grayG","\\grayH","\\grayI","\\kaBlue","\\kaGreen"],props:{numArgs:1,allowedInText:!0,greediness:3},handler:function(t,e){var r=t.parser,n=t.funcName,a=e[0];return{type:"color",mode:r.mode,color:"katex-"+n.slice(1),body:Jt(a)}},htmlBuilder:qe,mathmlBuilder:Ee}),Zt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,greediness:3,argTypes:["color"]},handler:function(t,e){var r=t.parser,n=t.breakOnTokenText,a=Ht(e[0],"color-token").color,i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:qe,mathmlBuilder:Ee}),Zt({type:"cr",names:["\\cr","\\newline"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e,r){var n=t.parser,a=t.funcName,i=r[0],o="\\cr"===a,s=!1;return o||(s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode")),{type:"cr",mode:n.mode,newLine:s,newRow:o,size:i&&Ht(i,"size").value}},htmlBuilder:function(t,e){if(t.newRow)throw new o("\\cr valid only within a tabular/array environment");var r=Dt.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=Mt(t.size,e)+"em")),r},mathmlBuilder:function(t,e){var r=new fe.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",Mt(t.size,e)+"em")),r}});var Oe=function(t,e,r){var n=V(W.math[t]&&W.math[t].replace||t,e,r);if(!n)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return n},Ie=function(t,e,r,n){var a=r.havingBaseStyle(e),i=Dt.makeSpan(n.concat(a.sizingClasses(r)),[t],r),o=a.sizeMultiplier/r.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},Re=function(t,e,r){var n=e.havingBaseStyle(r),a=(1-e.sizeMultiplier/n.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=a+"em",t.height-=a,t.depth+=a},Le=function(t,e,r,n,a,i){var o=function(t,e,r,n){return Dt.makeSymbol(t,"Size"+e+"-Regular",r,n)}(t,e,a,n),s=Ie(Dt.makeSpan(["delimsizing","size"+e],[o],n),w.TEXT,n,i);return r&&Re(s,n,w.TEXT),s},De=function(t,e,r){var n;return n="Size1-Regular"===e?"delim-size1":"delim-size4",{type:"elem",elem:Dt.makeSpan(["delimsizinginner",n],[Dt.makeSpan([],[Dt.makeSymbol(t,e,r)])])}},He=function(t,e,r,n,a,i){var o,s,h,l;o=h=l=t,s=null;var m="Size1-Regular";"\\uparrow"===t?h=l="⏐":"\\Uparrow"===t?h=l="‖":"\\downarrow"===t?o=h="⏐":"\\Downarrow"===t?o=h="‖":"\\updownarrow"===t?(o="\\uparrow",h="⏐",l="\\downarrow"):"\\Updownarrow"===t?(o="\\Uparrow",h="‖",l="\\Downarrow"):"["===t||"\\lbrack"===t?(o="⎡",h="⎢",l="⎣",m="Size4-Regular"):"]"===t||"\\rbrack"===t?(o="⎤",h="⎥",l="⎦",m="Size4-Regular"):"\\lfloor"===t||"⌊"===t?(h=o="⎢",l="⎣",m="Size4-Regular"):"\\lceil"===t||"⌈"===t?(o="⎡",h=l="⎢",m="Size4-Regular"):"\\rfloor"===t||"⌋"===t?(h=o="⎥",l="⎦",m="Size4-Regular"):"\\rceil"===t||"⌉"===t?(o="⎤",h=l="⎥",m="Size4-Regular"):"("===t||"\\lparen"===t?(o="⎛",h="⎜",l="⎝",m="Size4-Regular"):")"===t||"\\rparen"===t?(o="⎞",h="⎟",l="⎠",m="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(o="⎧",s="⎨",l="⎩",h="⎪",m="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(o="⎫",s="⎬",l="⎭",h="⎪",m="Size4-Regular"):"\\lgroup"===t||"⟮"===t?(o="⎧",l="⎩",h="⎪",m="Size4-Regular"):"\\rgroup"===t||"⟯"===t?(o="⎫",l="⎭",h="⎪",m="Size4-Regular"):"\\lmoustache"===t||"⎰"===t?(o="⎧",l="⎭",h="⎪",m="Size4-Regular"):"\\rmoustache"!==t&&"⎱"!==t||(o="⎫",l="⎩",h="⎪",m="Size4-Regular");var c=Oe(o,m,a),u=c.height+c.depth,d=Oe(h,m,a),p=d.height+d.depth,f=Oe(l,m,a),g=f.height+f.depth,x=0,v=1;if(null!==s){var y=Oe(s,m,a);x=y.height+y.depth,v=2}var b=u+g+x,k=Math.ceil((e-b)/(v*p)),S=b+k*v*p,z=n.fontMetrics().axisHeight;r&&(z*=n.sizeMultiplier);var M=S/2-z,T=[];if(T.push(De(l,m,a)),null===s)for(var A=0;A<k;A++)T.push(De(h,m,a));else{for(var B=0;B<k;B++)T.push(De(h,m,a));T.push(De(s,m,a));for(var C=0;C<k;C++)T.push(De(h,m,a))}T.push(De(o,m,a));var N=n.havingBaseStyle(w.TEXT),q=Dt.makeVList({positionType:"bottom",positionData:M,children:T},N);return Ie(Dt.makeSpan(["delimsizing","mult"],[q],N),w.TEXT,n,i)},Pe=function(t,e,r,n){var a;"sqrtTall"===t&&(a="M702 80H400000v40H742v"+(r-54-80)+"l-4 4-4 4c-.667.7\n-2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1h-12l-28-84c-16.667-52-96.667\n-294.333-240-727l-212 -643 -85 170c-4-3.333-8.333-7.667-13 -13l-13-13l77-155\n 77-156c66 199.333 139 419.667 219 661 l218 661zM702 80H400000v40H742z");var i=new L(t,a),o=new R([i],{width:"400em",height:e+"em",viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Dt.makeSvgSpan(["hide-tail"],[o],n)},Fe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Ve=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],Ue=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Ge=[0,1.2,1.8,2.4,3],Ye=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],_e=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"stack"}],We=[{type:"small",style:w.SCRIPTSCRIPT},{type:"small",style:w.SCRIPT},{type:"small",style:w.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Xe=function(t){if("small"===t.type)return"Main-Regular";if("large"===t.type)return"Size"+t.size+"-Regular";if("stack"===t.type)return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},je=function(t,e,r,n){for(var a=Math.min(2,3-n.style.size);a<r.length&&"stack"!==r[a].type;a++){var i=Oe(t,Xe(r[a]),"math"),o=i.height+i.depth;if("small"===r[a].type&&(o*=n.havingBaseStyle(r[a].style).sizeMultiplier),o>e)return r[a]}return r[r.length-1]},$e=function(t,e,r,n,a,i){var o;"<"===t||"\\lt"===t||"⟨"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"⟩"!==t||(t="\\rangle"),o=c.contains(Ue,t)?Ye:c.contains(Fe,t)?We:_e;var s=je(t,e,o,n);return"small"===s.type?function(t,e,r,n,a,i){var o=Dt.makeSymbol(t,"Main-Regular",a,n),s=Ie(o,e,n,i);return r&&Re(s,n,e),s}(t,s.style,r,n,a,i):"large"===s.type?Le(t,s.size,r,n,a,i):He(t,e,r,n,a,i)},Ze=function(t,e,r,n,a){if("<"===t||"\\lt"===t||"⟨"===t?t="\\langle":">"!==t&&"\\gt"!==t&&"⟩"!==t||(t="\\rangle"),c.contains(Fe,t)||c.contains(Ue,t))return Le(t,e,!1,r,n,a);if(c.contains(Ve,t))return He(t,Ge[e],!1,r,n,a);throw new o("Illegal delimiter: '"+t+"'")},Ke=$e,Je=function(t,e,r,n,a,i){var o=n.fontMetrics().axisHeight*n.sizeMultiplier,s=5/n.fontMetrics().ptPerEm,h=Math.max(e-o,r+o),l=Math.max(h/500*901,2*h-s);return $e(t,l,!0,n,a,i)},Qe={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},tr=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function er(t,e){var r=Vt(t);if(r&&c.contains(tr,r.text))return r;throw new o("Invalid delimiter: '"+(r?r.text:JSON.stringify(t))+"' after '"+e.funcName+"'",t)}function rr(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Zt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1},handler:function(t,e){var r=er(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:Qe[t.funcName].size,mclass:Qe[t.funcName].mclass,delim:r.text}},htmlBuilder:function(t,e){return"."===t.delim?Dt.makeSpan([t.mclass]):Ze(t.delim,t.size,e,t.mode,[t.mclass])},mathmlBuilder:function(t){var e=[];"."!==t.delim&&e.push(ge(t.delim,t.mode));var r=new fe.MathNode("mo",e);return"mopen"===t.mclass||"mclose"===t.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r}}),Zt({type:"leftright-right",names:["\\right"],props:{numArgs:1},handler:function(t,e){return{type:"leftright-right",mode:t.parser.mode,delim:er(e[0],t).text}}}),Zt({type:"leftright",names:["\\left"],props:{numArgs:1},handler:function(t,e){var r=er(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=Ht(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim}},htmlBuilder:function(t,e){rr(t);for(var r,n,a=ae(t.body,e,!0,["mopen","mclose"]),i=0,o=0,s=!1,h=0;h<a.length;h++)a[h].isMiddle?s=!0:(i=Math.max(a[h].height,i),o=Math.max(a[h].depth,o));if(i*=e.sizeMultiplier,o*=e.sizeMultiplier,r="."===t.left?he(e,["mopen"]):Je(t.left,i,o,e,t.mode,["mopen"]),a.unshift(r),s)for(var l=1;l<a.length;l++){var m=a[l].isMiddle;m&&(a[l]=Je(m.delim,i,o,m.options,t.mode,[]))}return n="."===t.right?he(e,["mclose"]):Je(t.right,i,o,e,t.mode,["mclose"]),a.push(n),Dt.makeSpan(["minner"],a,e)},mathmlBuilder:function(t,e){rr(t);var r=ye(t.body,e);if("."!==t.left){var n=new fe.MathNode("mo",[ge(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if("."!==t.right){var a=new fe.MathNode("mo",[ge(t.right,t.mode)]);a.setAttribute("fence","true"),r.push(a)}return xe(r)}}),Zt({type:"middle",names:["\\middle"],props:{numArgs:1},handler:function(t,e){var r=er(e[0],t);if(!t.parser.leftrightDepth)throw new o("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:function(t,e){var r;if("."===t.delim)r=he(e,[]);else{r=Ze(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:function(t,e){var r=new fe.MathNode("mo",[ge(t.delim,t.mode)]);return r.setAttribute("fence","true"),r}});var nr=function(t,e){var r,n,a=Dt.wrapFragment(le(t.body,e),e),i=t.label.substr(1),o=e.sizeMultiplier,s=0,h=c.isCharacterBox(t.body);if("sout"===i)(r=Dt.makeSpan(["stretchy","sout"])).height=e.fontMetrics().defaultRuleThickness/o,s=-.5*e.fontMetrics().xHeight;else{/cancel/.test(i)?h||a.classes.push("cancel-pad"):a.classes.push("boxpad");var l;r=function(t,e,r,n){var a,i=t.height+t.depth+2*r;if(/fbox|color/.test(e)){if(a=Dt.makeSpan(["stretchy",e],[],n),"fbox"===e){var o=n.color&&n.getColor();o&&(a.style.borderColor=o)}}else{var s=[];/^[bx]cancel$/.test(e)&&s.push(new D({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&s.push(new D({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var h=new R(s,{width:"100%",height:i+"em"});a=Dt.makeSvgSpan([],[h],n)}return a.height=i,a.style.height=i+"em",a}(a,i,l=/box/.test(i)?"colorbox"===i?.3:.34:h?.2:0,e),s=a.depth+l,t.backgroundColor&&(r.style.backgroundColor=t.backgroundColor,t.borderColor&&(r.style.borderColor=t.borderColor))}return n=t.backgroundColor?Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:s},{type:"elem",elem:a,shift:0}]},e):Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:r,shift:s,wrapperClasses:/cancel/.test(i)?["svg-align"]:[]}]},e),/cancel/.test(i)&&(n.height=a.height,n.depth=a.depth),/cancel/.test(i)&&!h?Dt.makeSpan(["mord","cancel-lap"],[n],e):Dt.makeSpan(["mord"],[n],e)},ar=function(t,e){var r=new fe.MathNode("menclose",[we(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":case"\\fcolorbox":r.setAttribute("notation","box");break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};Zt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,greediness:3,argTypes:["color","text"]},handler:function(t,e,r){var n=t.parser,a=t.funcName,i=Ht(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:nr,mathmlBuilder:ar}),Zt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,greediness:3,argTypes:["color","color","text"]},handler:function(t,e,r){var n=t.parser,a=t.funcName,i=Ht(e[0],"color-token").color,o=Ht(e[1],"color-token").color,s=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:s}},htmlBuilder:nr,mathmlBuilder:ar}),Zt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0},handler:function(t,e){return{type:"enclose",mode:t.parser.mode,label:"\\fbox",body:e[0]}}}),Zt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout"],props:{numArgs:1},handler:function(t,e,r){var n=t.parser,a=t.funcName,i=e[0];return{type:"enclose",mode:n.mode,label:a,body:i}},htmlBuilder:nr,mathmlBuilder:ar});var ir={};function or(t){for(var e=t.type,r=t.names,n=t.props,a=t.handler,i=t.htmlBuilder,o=t.mathmlBuilder,s={type:e,numArgs:n.numArgs||0,greediness:1,allowedInText:!1,numOptionalArgs:0,handler:a},h=0;h<r.length;++h)ir[r[h]]=s;i&&(jt[e]=i),o&&($t[e]=o)}function sr(t){var e=[];t.consumeSpaces();for(var r=t.nextToken.text;"\\hline"===r||"\\hdashline"===r;)t.consume(),e.push("\\hdashline"===r),t.consumeSpaces(),r=t.nextToken.text;return e}function hr(t,e,r){var n=e.hskipBeforeAndAfter,a=e.addJot,i=e.cols,s=e.arraystretch;if(t.gullet.beginGroup(),t.gullet.macros.set("\\\\","\\cr"),!s){var h=t.gullet.expandMacroAsText("\\arraystretch");if(null==h)s=1;else if(!(s=parseFloat(h))||s<0)throw new o("Invalid \\arraystretch: "+h)}var l=[],m=[l],c=[],u=[];for(u.push(sr(t));;){var d=t.parseExpression(!1,"\\cr");d={type:"ordgroup",mode:t.mode,body:d},r&&(d={type:"styling",mode:t.mode,style:r,body:[d]}),l.push(d);var p=t.nextToken.text;if("&"===p)t.consume();else{if("\\end"===p){1===l.length&&"styling"===d.type&&0===d.body[0].body.length&&m.pop(),u.length<m.length+1&&u.push([]);break}if("\\cr"!==p)throw new o("Expected & or \\\\ or \\cr or \\end",t.nextToken);var f=Ht(t.parseFunction(),"cr");c.push(f.size),u.push(sr(t)),l=[],m.push(l)}}return t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:s,body:m,cols:i,rowGaps:c,hskipBeforeAndAfter:n,hLinesBeforeRow:u}}function lr(t){return"d"===t.substr(0,1)?"display":"text"}var mr=function(t,e){var r,n,a=t.body.length,i=t.hLinesBeforeRow,s=0,h=new Array(a),l=[],m=1/e.fontMetrics().ptPerEm,u=5*m,d=12*m,p=3*m,f=t.arraystretch*d,g=.7*f,x=.3*f,v=0;function y(t){for(var e=0;e<t.length;++e)e>0&&(v+=.25),l.push({pos:v,isDashed:t[e]})}for(y(i[0]),r=0;r<t.body.length;++r){var b=t.body[r],w=g,k=x;s<b.length&&(s=b.length);var S=new Array(b.length);for(n=0;n<b.length;++n){var z=le(b[n],e);k<z.depth&&(k=z.depth),w<z.height&&(w=z.height),S[n]=z}var M=t.rowGaps[r],T=0;M&&(T=Mt(M,e))>0&&(k<(T+=x)&&(k=T),T=0),t.addJot&&(k+=p),S.height=w,S.depth=k,v+=w,S.pos=v,v+=k+T,h[r]=S,y(i[r+1])}var A,B,C=v/2+e.fontMetrics().axisHeight,N=t.cols||[],q=[];for(n=0,B=0;n<s||B<N.length;++n,++B){for(var E=N[B]||{},O=!0;"separator"===E.type;){if(O||((A=Dt.makeSpan(["arraycolsep"],[])).style.width=e.fontMetrics().doubleRuleSep+"em",q.push(A)),"|"===E.separator){var I=Dt.makeSpan(["vertical-separator"],[],e);I.style.height=v+"em",I.style.verticalAlign=-(v-C)+"em",q.push(I)}else{if(":"!==E.separator)throw new o("Invalid separator type: "+E.separator);var R=Dt.makeSpan(["vertical-separator","vs-dashed"],[],e);R.style.height=v+"em",R.style.verticalAlign=-(v-C)+"em",q.push(R)}E=N[++B]||{},O=!1}if(!(n>=s)){var L=void 0;(n>0||t.hskipBeforeAndAfter)&&0!==(L=c.deflt(E.pregap,u))&&((A=Dt.makeSpan(["arraycolsep"],[])).style.width=L+"em",q.push(A));var D=[];for(r=0;r<a;++r){var H=h[r],P=H[n];if(P){var F=H.pos-C;P.depth=H.depth,P.height=H.height,D.push({type:"elem",elem:P,shift:F})}}D=Dt.makeVList({positionType:"individualShift",children:D},e),D=Dt.makeSpan(["col-align-"+(E.align||"c")],[D]),q.push(D),(n<s-1||t.hskipBeforeAndAfter)&&0!==(L=c.deflt(E.postgap,u))&&((A=Dt.makeSpan(["arraycolsep"],[])).style.width=L+"em",q.push(A))}}if(h=Dt.makeSpan(["mtable"],q),l.length>0){for(var V=Dt.makeLineSpan("hline",e,.05),U=Dt.makeLineSpan("hdashline",e,.05),G=[{type:"elem",elem:h,shift:0}];l.length>0;){var Y=l.pop(),_=Y.pos-C;Y.isDashed?G.push({type:"elem",elem:U,shift:_}):G.push({type:"elem",elem:V,shift:_})}h=Dt.makeVList({positionType:"individualShift",children:G},e)}return Dt.makeSpan(["mord"],[h],e)},cr=function(t,e){return new fe.MathNode("mtable",t.body.map(function(t){return new fe.MathNode("mtr",t.map(function(t){return new fe.MathNode("mtd",[we(t,e)])}))}))},ur=function(t,e){var r,n=[],a=hr(t.parser,{cols:n,addJot:!0},"display"),i=0,s={type:"ordgroup",mode:t.mode,body:[]},h=Pt(e[0],"ordgroup");if(h){for(var l="",m=0;m<h.body.length;m++)l+=Ht(h.body[m],"textord").text;r=Number(l),i=2*r}var c=!i;a.body.forEach(function(t){for(var e=1;e<t.length;e+=2){var n=Ht(t[e],"styling");Ht(n.body[0],"ordgroup").body.unshift(s)}if(c)i<t.length&&(i=t.length);else{var a=t.length/2;if(r<a)throw new o("Too many math in a row: expected "+r+", but got "+a,t[0])}});for(var u=0;u<i;++u){var d="r",p=0;u%2==1?d="l":u>0&&c&&(p=1),n[u]={type:"align",align:d,pregap:p,postgap:0}}return a};or({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(t,e){var r={cols:(Vt(e[0])?[e[0]]:Ht(e[0],"ordgroup").body).map(function(t){var e=function(t){var e=Vt(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}(t).text;if(-1!=="lcr".indexOf(e))return{type:"align",align:e};if("|"===e)return{type:"separator",separator:"|"};if(":"===e)return{type:"separator",separator:":"};throw new o("Unknown column alignment: "+e,t)}),hskipBeforeAndAfter:!0};return hr(t.parser,r,lr(t.envName))},htmlBuilder:mr,mathmlBuilder:cr}),or({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix"],props:{numArgs:0},handler:function(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName],r=hr(t.parser,{hskipBeforeAndAfter:!1},lr(t.envName));return e?{type:"leftright",mode:t.mode,body:[r],left:e[0],right:e[1]}:r},htmlBuilder:mr,mathmlBuilder:cr}),or({type:"array",names:["cases","dcases"],props:{numArgs:0},handler:function(t){var e=hr(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},lr(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:"\\{",right:"."}},htmlBuilder:mr,mathmlBuilder:cr}),or({type:"array",names:["aligned"],props:{numArgs:0},handler:ur,htmlBuilder:mr,mathmlBuilder:cr}),or({type:"array",names:["gathered"],props:{numArgs:0},handler:function(t){return hr(t.parser,{cols:[{type:"align",align:"c"}],addJot:!0},"display")},htmlBuilder:mr,mathmlBuilder:cr}),or({type:"array",names:["alignedat"],props:{numArgs:1},handler:ur,htmlBuilder:mr,mathmlBuilder:cr}),Zt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(t,e){throw new o(t.funcName+" valid only within array environment")}});var dr=ir;Zt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(t,e){var r=t.parser,n=t.funcName,a=e[0];if("ordgroup"!==a.type)throw new o("Invalid environment name",a);for(var i="",s=0;s<a.body.length;++s)i+=Ht(a.body[s],"textord").text;if("\\begin"===n){if(!dr.hasOwnProperty(i))throw new o("No such environment: "+i,a);var h=dr[i],l=r.parseArguments("\\begin{"+i+"}",h),m=l.args,c=l.optArgs,u={mode:r.mode,envName:i,parser:r},d=h.handler(u,m,c);r.expect("\\end",!1);var p=r.nextToken,f=Ht(r.parseFunction(),"environment");if(f.name!==i)throw new o("Mismatch: \\begin{"+i+"} matched by \\end{"+f.name+"}",p);return d}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var pr=Dt.makeSpan;function fr(t,e){var r=ae(t.body,e,!0);return pr([t.mclass],r,e)}function gr(t,e){var r=ye(t.body,e);return fe.newDocumentFragment(r)}Zt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1},handler:function(t,e){var r=t.parser,n=t.funcName,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.substr(5),body:Jt(a)}},htmlBuilder:fr,mathmlBuilder:gr});var xr=function(t){var e="ordgroup"===t.type&&t.body.length?t.body[0]:t;return"atom"!==e.type||"bin"!==e.family&&"rel"!==e.family?"mord":"m"+e.family};Zt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(t,e){return{type:"mclass",mode:t.parser.mode,mclass:xr(e[0]),body:[e[1]]}}}),Zt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(t,e){var r,n=t.parser,a=t.funcName,i=e[1],o=e[0];r="\\stackrel"!==a?xr(i):"mrel";var s={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,symbol:!1,suppressBaseShift:"\\stackrel"!==a,body:Jt(i)},h={type:"supsub",mode:o.mode,base:s,sup:"\\underset"===a?null:o,sub:"\\underset"===a?o:null};return{type:"mclass",mode:n.mode,mclass:r,body:[h]}},htmlBuilder:fr,mathmlBuilder:gr});var vr=function(t,e){var r=t.font,n=e.withFont(r);return le(t.body,n)},yr=function(t,e){var r=t.font,n=e.withFont(r);return we(t.body,n)},br={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Zt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,greediness:2},handler:function(t,e){var r=t.parser,n=t.funcName,a=e[0],i=n;return i in br&&(i=br[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:vr,mathmlBuilder:yr}),Zt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1,greediness:2},handler:function(t,e){var r=t.parser,n=e[0];return{type:"mclass",mode:r.mode,mclass:xr(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}]}}}),Zt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var r=t.parser,n=t.funcName,a=t.breakOnTokenText,i=r.mode,o=r.parseExpression(!0,a);return{type:"font",mode:i,font:"math"+n.slice(1),body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:vr,mathmlBuilder:yr});var wr=function(t,e){var r=e.style;"display"===t.size?r=w.DISPLAY:"text"===t.size&&r.size===w.DISPLAY.size?r=w.TEXT:"script"===t.size?r=w.SCRIPT:"scriptscript"===t.size&&(r=w.SCRIPTSCRIPT);var n,a=r.fracNum(),i=r.fracDen();n=e.havingStyle(a);var o=le(t.numer,n,e);if(t.continued){var s=8.5/e.fontMetrics().ptPerEm,h=3.5/e.fontMetrics().ptPerEm;o.height=o.height<s?s:o.height,o.depth=o.depth<h?h:o.depth}n=e.havingStyle(i);var l,m,c,u,d,p,f,g,x,v,y=le(t.denom,n,e);if(t.hasBarLine?(t.barSize?(m=Mt(t.barSize,e),l=Dt.makeLineSpan("frac-line",e,m)):l=Dt.makeLineSpan("frac-line",e),m=l.height,c=l.height):(l=null,m=0,c=e.fontMetrics().defaultRuleThickness),r.size===w.DISPLAY.size?(u=e.fontMetrics().num1,d=m>0?3*c:7*c,p=e.fontMetrics().denom1):(m>0?(u=e.fontMetrics().num2,d=c):(u=e.fontMetrics().num3,d=3*c),p=e.fontMetrics().denom2),l){var b=e.fontMetrics().axisHeight;u-o.depth-(b+.5*m)<d&&(u+=d-(u-o.depth-(b+.5*m))),b-.5*m-(y.height-p)<d&&(p+=d-(b-.5*m-(y.height-p)));var k=-(b-.5*m);f=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:p},{type:"elem",elem:l,shift:k},{type:"elem",elem:o,shift:-u}]},e)}else{var S=u-o.depth-(y.height-p);S<d&&(u+=.5*(d-S),p+=.5*(d-S)),f=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:p},{type:"elem",elem:o,shift:-u}]},e)}return n=e.havingStyle(r),f.height*=n.sizeMultiplier/e.sizeMultiplier,f.depth*=n.sizeMultiplier/e.sizeMultiplier,g=r.size===w.DISPLAY.size?e.fontMetrics().delim1:e.fontMetrics().delim2,x=null==t.leftDelim?he(e,["mopen"]):Ke(t.leftDelim,g,!0,e.havingStyle(r),t.mode,["mopen"]),v=t.continued?Dt.makeSpan([]):null==t.rightDelim?he(e,["mclose"]):Ke(t.rightDelim,g,!0,e.havingStyle(r),t.mode,["mclose"]),Dt.makeSpan(["mord"].concat(n.sizingClasses(e)),[x,Dt.makeSpan(["mfrac"],[f]),v],e)},kr=function(t,e){var r=new fe.MathNode("mfrac",[we(t.numer,e),we(t.denom,e)]);if(t.hasBarLine){if(t.barSize){var n=Mt(t.barSize,e);r.setAttribute("linethickness",n+"em")}}else r.setAttribute("linethickness","0px");if(null!=t.leftDelim||null!=t.rightDelim){var a=[];if(null!=t.leftDelim){var i=new fe.MathNode("mo",[new fe.TextNode(t.leftDelim)]);i.setAttribute("fence","true"),a.push(i)}if(a.push(r),null!=t.rightDelim){var o=new fe.MathNode("mo",[new fe.TextNode(t.rightDelim)]);o.setAttribute("fence","true"),a.push(o)}return xe(a)}return r};Zt({type:"genfrac",names:["\\cfrac","\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,greediness:2},handler:function(t,e){var r,n=t.parser,a=t.funcName,i=e[0],o=e[1],s=null,h=null,l="auto";switch(a){case"\\cfrac":case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,s="(",h=")";break;case"\\\\bracefrac":r=!1,s="\\{",h="\\}";break;case"\\\\brackfrac":r=!1,s="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(a){case"\\cfrac":case"\\dfrac":case"\\dbinom":l="display";break;case"\\tfrac":case"\\tbinom":l="text"}return{type:"genfrac",mode:n.mode,continued:"\\cfrac"===a,numer:i,denom:o,hasBarLine:r,leftDelim:s,rightDelim:h,size:l,barSize:null}},htmlBuilder:wr,mathmlBuilder:kr}),Zt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(t){var e,r=t.parser,n=t.funcName,a=t.token;switch(n){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:e,token:a}}});var Sr=["display","text","script","scriptscript"],zr=function(t){var e=null;return t.length>0&&(e="."===(e=t)?null:e),e};Zt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,greediness:6,argTypes:["math","math","size","text","math","math"]},handler:function(t,e){var r=t.parser,n=e[4],a=e[5],i=Pt(e[0],"atom");i&&(i=Ft(e[0],"open"));var o=i?zr(i.text):null,s=Pt(e[1],"atom");s&&(s=Ft(e[1],"close"));var h,l=s?zr(s.text):null,m=Ht(e[2],"size"),c=null;h=!!m.isBlank||(c=m.value).number>0;var u="auto",d=Pt(e[3],"ordgroup");if(d){if(d.body.length>0){var p=Ht(d.body[0],"textord");u=Sr[Number(p.text)]}}else d=Ht(e[3],"textord"),u=Sr[Number(d.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:h,barSize:c,leftDelim:o,rightDelim:l,size:u}},htmlBuilder:wr,mathmlBuilder:kr}),Zt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(t,e){var r=t.parser,n=(t.funcName,t.token);return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Ht(e[0],"size").value,token:n}}}),Zt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(t,e){var r=t.parser,n=(t.funcName,e[0]),a=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}(Ht(e[1],"infix").size),i=e[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:wr,mathmlBuilder:kr});var Mr=function(t,e){var r,n,a=e.style,i=Pt(t,"supsub");i?(r=i.sup?le(i.sup,e.havingStyle(a.sup()),e):le(i.sub,e.havingStyle(a.sub()),e),n=Ht(i.base,"horizBrace")):n=Ht(t,"horizBrace");var o,s=le(n.base,e.havingBaseStyle(w.DISPLAY)),h=Ae(n,e);if(n.isOver?(o=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:h}]},e)).children[0].children[0].children[1].classes.push("svg-align"):(o=Dt.makeVList({positionType:"bottom",positionData:s.depth+.1+h.height,children:[{type:"elem",elem:h},{type:"kern",size:.1},{type:"elem",elem:s}]},e)).children[0].children[0].children[0].classes.push("svg-align"),r){var l=Dt.makeSpan(["mord",n.isOver?"mover":"munder"],[o],e);o=n.isOver?Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},e):Dt.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return Dt.makeSpan(["mord",n.isOver?"mover":"munder"],[o],e)};Zt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(t,e){var r=t.parser,n=t.funcName;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:Mr,mathmlBuilder:function(t,e){var r=Te(t.label);return new fe.MathNode(t.isOver?"mover":"munder",[we(t.base,e),r])}}),Zt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(t,e){var r=t.parser,n=e[1],a=Ht(e[0],"url").url;return{type:"href",mode:r.mode,href:a,body:Jt(n)}},htmlBuilder:function(t,e){var r=ae(t.body,e,!1);return Dt.makeAnchor(t.href,[],r,e)},mathmlBuilder:function(t,e){var r=be(t.body,e);return r instanceof de||(r=new de("mrow",[r])),r.setAttribute("href",t.href),r}}),Zt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(t,e){for(var r=t.parser,n=Ht(e[0],"url").url,a=[],i=0;i<n.length;i++){var o=n[i];"~"===o&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var s={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:Jt(s)}}}),Zt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(t,e){return{type:"htmlmathml",mode:t.parser.mode,html:Jt(e[0]),mathml:Jt(e[1])}},htmlBuilder:function(t,e){var r=ae(t.html,e,!1);return Dt.makeFragment(r)},mathmlBuilder:function(t,e){return be(t.mathml,e)}}),Zt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],allowedInText:!0},handler:function(t,e){var r=t.parser,n=t.funcName,a=Ht(e[0],"size");if(r.settings.strict){var i="m"===n[1],o="mu"===a.value.unit;i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+a.value.unit+" units"),"math"!==r.mode&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder:function(t,e){return Dt.makeGlue(t.dimension,e)},mathmlBuilder:function(t,e){var r=Mt(t.dimension,e);return new fe.SpaceNode(r)}}),Zt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,n=t.funcName,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:function(t,e){var r;"clap"===t.alignment?(r=Dt.makeSpan([],[le(t.body,e)]),r=Dt.makeSpan(["inner"],[r],e)):r=Dt.makeSpan(["inner"],[le(t.body,e)]);var n=Dt.makeSpan(["fix"],[]),a=Dt.makeSpan([t.alignment],[r,n],e),i=Dt.makeSpan(["strut"]);return i.style.height=a.height+a.depth+"em",i.style.verticalAlign=-a.depth+"em",a.children.unshift(i),a=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a}]},e),Dt.makeSpan(["mord"],[a],e)},mathmlBuilder:function(t,e){var r=new fe.MathNode("mpadded",[we(t.body,e)]);if("rlap"!==t.alignment){var n="llap"===t.alignment?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}}),Zt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1,consumeMode:"math"},handler:function(t,e){var r=t.funcName,n=t.parser,a=n.mode;n.switchMode("math");var i="\\("===r?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i,!1),n.switchMode(a),n.consume(),{type:"styling",mode:n.mode,style:"text",body:o}}}),Zt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(t,e){throw new o("Mismatched "+t.funcName)}});var Tr=function(t,e){switch(e.style.size){case w.DISPLAY.size:return t.display;case w.TEXT.size:return t.text;case w.SCRIPT.size:return t.script;case w.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Zt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4},handler:function(t,e){return{type:"mathchoice",mode:t.parser.mode,display:Jt(e[0]),text:Jt(e[1]),script:Jt(e[2]),scriptscript:Jt(e[3])}},htmlBuilder:function(t,e){var r=Tr(t,e),n=ae(r,e,!1);return Dt.makeFragment(n)},mathmlBuilder:function(t,e){var r=Tr(t,e);return be(r,e)}});var Ar=function(t,e){var r,n,a,i=!1,o=Pt(t,"supsub");o?(r=o.sup,n=o.sub,a=Ht(o.base,"op"),i=!0):a=Ht(t,"op");var s,h=e.style,l=!1;if(h.size===w.DISPLAY.size&&a.symbol&&!c.contains(["\\smallint"],a.name)&&(l=!0),a.symbol){var m=l?"Size2-Regular":"Size1-Regular",u="";if("\\oiint"!==a.name&&"\\oiiint"!==a.name||(u=a.name.substr(1),a.name="oiint"===u?"\\iint":"\\iiint"),s=Dt.makeSymbol(a.name,m,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var d=s.italic,p=Dt.staticSvg(u+"Size"+(l?"2":"1"),e);s=Dt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:p,shift:l?.08:0}]},e),a.name="\\"+u,s.classes.unshift("mop"),s.italic=d}}else if(a.body){var f=ae(a.body,e,!0);1===f.length&&f[0]instanceof I?(s=f[0]).classes[0]="mop":s=Dt.makeSpan(["mop"],Dt.tryCombineChars(f),e)}else{for(var g=[],x=1;x<a.name.length;x++)g.push(Dt.mathsym(a.name[x],a.mode));s=Dt.makeSpan(["mop"],g,e)}var v=0,y=0;if((s instanceof I||"\\oiint"===a.name||"\\oiiint"===a.name)&&!a.suppressBaseShift&&(v=(s.height-s.depth)/2-e.fontMetrics().axisHeight,y=s.italic),i){var b,k,S;if(s=Dt.makeSpan([],[s]),r){var z=le(r,e.havingStyle(h.sup()),e);k={elem:z,kern:Math.max(e.fontMetrics().bigOpSpacing1,e.fontMetrics().bigOpSpacing3-z.depth)}}if(n){var M=le(n,e.havingStyle(h.sub()),e);b={elem:M,kern:Math.max(e.fontMetrics().bigOpSpacing2,e.fontMetrics().bigOpSpacing4-M.height)}}if(k&&b){var T=e.fontMetrics().bigOpSpacing5+b.elem.height+b.elem.depth+b.kern+s.depth+v;S=Dt.makeVList({positionType:"bottom",positionData:T,children:[{type:"kern",size:e.fontMetrics().bigOpSpacing5},{type:"elem",elem:b.elem,marginLeft:-y+"em"},{type:"kern",size:b.kern},{type:"elem",elem:s},{type:"kern",size:k.kern},{type:"elem",elem:k.elem,marginLeft:y+"em"},{type:"kern",size:e.fontMetrics().bigOpSpacing5}]},e)}else if(b){var A=s.height-v;S=Dt.makeVList({positionType:"top",positionData:A,children:[{type:"kern",size:e.fontMetrics().bigOpSpacing5},{type:"elem",elem:b.elem,marginLeft:-y+"em"},{type:"kern",size:b.kern},{type:"elem",elem:s}]},e)}else{if(!k)return s;var B=s.depth+v;S=Dt.makeVList({positionType:"bottom",positionData:B,children:[{type:"elem",elem:s},{type:"kern",size:k.kern},{type:"elem",elem:k.elem,marginLeft:y+"em"},{type:"kern",size:e.fontMetrics().bigOpSpacing5}]},e)}return Dt.makeSpan(["mop","op-limits"],[S],e)}return v&&(s.style.position="relative",s.style.top=v+"em"),s},Br=function(t,e){var r;if(t.symbol)r=new de("mo",[ge(t.name,t.mode)]);else{if(!t.body)return ue([r=new de("mi",[new pe(t.name.slice(1))]),new de("mo",[ge("⁡","text")])]);r=new de("mo",ye(t.body,e))}return r},Cr={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};Zt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(t,e){var r=t.parser,n=t.funcName;return 1===n.length&&(n=Cr[n]),{type:"op",mode:r.mode,limits:!0,symbol:!0,name:n}},htmlBuilder:Ar,mathmlBuilder:Br}),Zt({type:"op",names:["\\mathop"],props:{numArgs:1},handler:function(t,e){var r=t.parser,n=e[0];return{type:"op",mode:r.mode,limits:!1,symbol:!1,body:Jt(n)}},htmlBuilder:Ar,mathmlBuilder:Br});var Nr={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};function qr(t,e,r){for(var n=ae(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return Dt.makeFragment(n)}Zt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(t){var e=t.parser,r=t.funcName;return{type:"op",mode:e.mode,limits:!1,symbol:!1,name:r}},htmlBuilder:Ar,mathmlBuilder:Br}),Zt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(t){var e=t.parser,r=t.funcName;return{type:"op",mode:e.mode,limits:!0,symbol:!1,name:r}},htmlBuilder:Ar,mathmlBuilder:Br}),Zt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(t){var e=t.parser,r=t.funcName;return 1===r.length&&(r=Nr[r]),{type:"op",mode:e.mode,limits:!1,symbol:!0,name:r}},htmlBuilder:Ar,mathmlBuilder:Br}),Zt({type:"operatorname",names:["\\operatorname"],props:{numArgs:1},handler:function(t,e){var r=t.parser,n=e[0];return{type:"operatorname",mode:r.mode,body:Jt(n)}},htmlBuilder:function(t,e){if(t.body.length>0){for(var r=t.body.map(function(t){var e=t.text;return"string"==typeof e?{type:"textord",mode:t.mode,text:e}:t}),n=ae(r,e.withFont("mathrm"),!0),a=0;a<n.length;a++){var i=n[a];i instanceof I&&(i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}return Dt.makeSpan(["mop"],n,e)}return Dt.makeSpan(["mop"],[],e)},mathmlBuilder:function(t,e){for(var r=ye(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(i instanceof fe.SpaceNode);else if(i instanceof fe.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=i.children[0];1===i.children.length&&o instanceof fe.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var s=r.map(function(t){return t.toText()}).join("");r=[new fe.TextNode(s)]}var h=new fe.MathNode("mi",r);h.setAttribute("mathvariant","normal");var l=new fe.MathNode("mo",[ge("⁡","text")]);return fe.newDocumentFragment([h,l])}}),Kt({type:"ordgroup",htmlBuilder:function(t,e){return t.semisimple?Dt.makeFragment(ae(t.body,e,!1)):Dt.makeSpan(["mord"],ae(t.body,e,!0),e)},mathmlBuilder:function(t,e){return be(t.body,e)}}),Zt({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(t,e){var r=t.parser,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder:function(t,e){var r=le(t.body,e.havingCrampedStyle()),n=Dt.makeLineSpan("overline-line",e),a=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*n.height},{type:"elem",elem:n},{type:"kern",size:n.height}]},e);return Dt.makeSpan(["mord","overline"],[a],e)},mathmlBuilder:function(t,e){var r=new fe.MathNode("mo",[new fe.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new fe.MathNode("mover",[we(t.body,e),r]);return n.setAttribute("accent","true"),n}}),Zt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,n=e[0];return{type:"phantom",mode:r.mode,body:Jt(n)}},htmlBuilder:function(t,e){var r=ae(t.body,e.withPhantom(),!1);return Dt.makeFragment(r)},mathmlBuilder:function(t,e){var r=ye(t.body,e);return new fe.MathNode("mphantom",r)}}),Zt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:function(t,e){var r=Dt.makeSpan([],[le(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Dt.makeSpan(["mord"],[r],e)},mathmlBuilder:function(t,e){var r=ye(Jt(t.body),e),n=new fe.MathNode("mphantom",r);return n.setAttribute("height","0px"),n}}),Zt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){var r=t.parser,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:function(t,e){var r=Dt.makeSpan(["inner"],[le(t.body,e.withPhantom())]),n=Dt.makeSpan(["fix"],[]);return Dt.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:function(t,e){var r=ye(Jt(t.body),e),n=new fe.MathNode("mphantom",r);return n.setAttribute("width","0px"),n}});var Er=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Or=function(t,e){var r=e.havingSize(t.size);return qr(t.body,r,e)};Zt({type:"sizing",names:Er,props:{numArgs:0,allowedInText:!0},handler:function(t,e){var r=t.breakOnTokenText,n=t.funcName,a=t.parser,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:Er.indexOf(n)+1,body:i}},htmlBuilder:Or,mathmlBuilder:function(t,e){var r=e.havingSize(t.size),n=ye(t.body,r),a=new fe.MathNode("mstyle",n);return a.setAttribute("mathsize",r.sizeMultiplier+"em"),a}}),Zt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","text"],allowedInText:!0},handler:function(t,e){var r=t.parser,n=Ht(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder:function(t,e){var r={type:"text",mode:t.mode,body:Jt(t.body),font:"mathrm"},n={type:"sizing",mode:t.mode,body:[r],size:6},a=Or(n,e),i=Mt(t.dy,e);return Dt.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:a}]},e)},mathmlBuilder:function(t,e){var r=new fe.MathNode("mpadded",[we(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}}),Zt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(t,e,r){var n=t.parser,a=r[0],i=Ht(e[0],"size"),o=Ht(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&Ht(a,"size").value,width:i.value,height:o.value}},htmlBuilder:function(t,e){var r=Dt.makeSpan(["mord","rule"],[],e),n=0;t.shift&&(n=Mt(t.shift,e));var a=Mt(t.width,e),i=Mt(t.height,e);return r.style.borderRightWidth=a+"em",r.style.borderTopWidth=i+"em",r.style.bottom=n+"em",r.width=a,r.height=i+n,r.depth=-n,r.maxFontSize=1.125*i*e.sizeMultiplier,r},mathmlBuilder:function(t,e){return new fe.MathNode("mrow")}}),Zt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(t,e,r){var n=t.parser,a=!1,i=!1,o=r[0]&&Ht(r[0],"ordgroup");if(o)for(var s="",h=0;h<o.body.length;++h)if("t"===(s=o.body[h].text))a=!0;else{if("b"!==s){a=!1,i=!1;break}i=!0}else a=!0,i=!0;var l=e[0];return{type:"smash",mode:n.mode,body:l,smashHeight:a,smashDepth:i}},htmlBuilder:function(t,e){var r=Dt.makeSpan([],[le(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Dt.makeSpan(["mord"],[i],e)},mathmlBuilder:function(t,e){var r=new fe.MathNode("mpadded",[we(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}}),Zt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(t,e,r){var n=t.parser,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder:function(t,e){var r=le(t.body,e.havingCrampedStyle());0===r.height&&(r.height=e.fontMetrics().xHeight),r=Dt.wrapFragment(r,e);var n=e.fontMetrics().defaultRuleThickness,a=n;e.style.id<w.TEXT.id&&(a=e.fontMetrics().xHeight);var i=n+a/4,o=function(t,e){var r,n,a=e.havingBaseSizing(),i=je("\\surd",t*a.sizeMultiplier,We,a),o=a.sizeMultiplier,s=0,h=0,l=0;return"small"===i.type?(t<1?o=1:t<1.4&&(o=.7),h=1/o,(r=Pe("sqrtMain",s=1.08/o,l=1080,e)).style.minWidth="0.853em",n=.833/o):"large"===i.type?(l=1080*Ge[i.size],h=Ge[i.size]/o,s=(Ge[i.size]+.08)/o,(r=Pe("sqrtSize"+i.size,s,l,e)).style.minWidth="1.02em",n=1/o):(s=t+.08,h=t,l=Math.floor(1e3*t)+80,(r=Pe("sqrtTall",s,l,e)).style.minWidth="0.742em",n=1.056),r.height=h,r.style.height=s+"em",{span:r,advanceWidth:n,ruleWidth:e.fontMetrics().sqrtRuleThickness*o}}(r.height+r.depth+i+n,e),s=o.span,h=o.ruleWidth,l=o.advanceWidth,m=s.height-h;m>r.height+r.depth+i&&(i=(i+m-r.height-r.depth)/2);var c=s.height-r.height-i-h;r.style.paddingLeft=l+"em";var u=Dt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+c)},{type:"elem",elem:s},{type:"kern",size:h}]},e);if(t.index){var d=e.havingStyle(w.SCRIPTSCRIPT),p=le(t.index,d,e),f=.6*(u.height-u.depth),g=Dt.makeVList({positionType:"shift",positionData:-f,children:[{type:"elem",elem:p}]},e),x=Dt.makeSpan(["root"],[g]);return Dt.makeSpan(["mord","sqrt"],[x,u],e)}return Dt.makeSpan(["mord","sqrt"],[u],e)},mathmlBuilder:function(t,e){var r=t.body,n=t.index;return n?new fe.MathNode("mroot",[we(r,e),we(n,e)]):new fe.MathNode("msqrt",[we(r,e)])}});var Ir={display:w.DISPLAY,text:w.TEXT,script:w.SCRIPT,scriptscript:w.SCRIPTSCRIPT};Zt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0},handler:function(t,e){var r=t.breakOnTokenText,n=t.funcName,a=t.parser,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder:function(t,e){var r=Ir[t.style],n=e.havingStyle(r).withFont("");return qr(t.body,n,e)},mathmlBuilder:function(t,e){var r={display:w.DISPLAY,text:w.TEXT,script:w.SCRIPT,scriptscript:w.SCRIPTSCRIPT}[t.style],n=e.havingStyle(r),a=ye(t.body,n),i=new fe.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return i.setAttribute("scriptlevel",o[0]),i.setAttribute("displaystyle",o[1]),i}}),Kt({type:"supsub",htmlBuilder:function(t,e){var r=function(t,e){var r=t.base;return r?"op"===r.type?r.limits&&(e.style.size===w.DISPLAY.size||r.alwaysHandleSupSub)?Ar:null:"accent"===r.type?c.isCharacterBox(r.base)?Be:null:"horizBrace"===r.type&&!t.sub===r.isOver?Mr:null:null}(t,e);if(r)return r(t,e);var n,a,i,o=t.base,s=t.sup,h=t.sub,l=le(o,e),m=e.fontMetrics(),u=0,d=0,p=o&&c.isCharacterBox(o);if(s){var f=e.havingStyle(e.style.sup());n=le(s,f,e),p||(u=l.height-f.fontMetrics().supDrop*f.sizeMultiplier/e.sizeMultiplier)}if(h){var g=e.havingStyle(e.style.sub());a=le(h,g,e),p||(d=l.depth+g.fontMetrics().subDrop*g.sizeMultiplier/e.sizeMultiplier)}i=e.style===w.DISPLAY?m.sup1:e.style.cramped?m.sup3:m.sup2;var x,v=e.sizeMultiplier,y=.5/m.ptPerEm/v+"em",b=null;if(a){var k=t.base&&"op"===t.base.type&&t.base.name&&("\\oiint"===t.base.name||"\\oiiint"===t.base.name);(l instanceof I||k)&&(b=-l.italic+"em")}if(n&&a){u=Math.max(u,i,n.depth+.25*m.xHeight),d=Math.max(d,m.sub2);var S=4*m.defaultRuleThickness;if(u-n.depth-(a.height-d)<S){d=S-(u-n.depth)+a.height;var z=.8*m.xHeight-(u-n.depth);z>0&&(u+=z,d-=z)}var M=[{type:"elem",elem:a,shift:d,marginRight:y,marginLeft:b},{type:"elem",elem:n,shift:-u,marginRight:y}];x=Dt.makeVList({positionType:"individualShift",children:M},e)}else if(a){d=Math.max(d,m.sub1,a.height-.8*m.xHeight);var T=[{type:"elem",elem:a,marginLeft:b,marginRight:y}];x=Dt.makeVList({positionType:"shift",positionData:d,children:T},e)}else{if(!n)throw new Error("supsub must have either sup or sub.");u=Math.max(u,i,n.depth+.25*m.xHeight),x=Dt.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:n,marginRight:y}]},e)}var A=se(l,"right")||"mord";return Dt.makeSpan([A],[l,Dt.makeSpan(["msupsub"],[x])],e)},mathmlBuilder:function(t,e){var r,n=!1,a=Pt(t.base,"horizBrace");a&&!!t.sup===a.isOver&&(n=!0,r=a.isOver);var i,o=[we(t.base,e)];if(t.sub&&o.push(we(t.sub,e)),t.sup&&o.push(we(t.sup,e)),n)i=r?"mover":"munder";else if(t.sub)if(t.sup){var s=t.base;i=s&&"op"===s.type&&s.limits&&e.style===w.DISPLAY?"munderover":"msubsup"}else{var h=t.base;i=h&&"op"===h.type&&h.limits&&e.style===w.DISPLAY?"munder":"msub"}else{var l=t.base;i=l&&"op"===l.type&&l.limits&&e.style===w.DISPLAY?"mover":"msup"}return new fe.MathNode(i,o)}}),Kt({type:"atom",htmlBuilder:function(t,e){return Dt.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder:function(t,e){var r=new fe.MathNode("mo",[ge(t.text,t.mode)]);if("bin"===t.family){var n=ve(t,e);"bold-italic"===n&&r.setAttribute("mathvariant",n)}else"punct"===t.family&&r.setAttribute("separator","true");return r}});var Rr={mi:"italic",mn:"normal",mtext:"normal"};Kt({type:"mathord",htmlBuilder:function(t,e){return Dt.makeOrd(t,e,"mathord")},mathmlBuilder:function(t,e){var r=new fe.MathNode("mi",[ge(t.text,t.mode,e)]),n=ve(t,e)||"italic";return n!==Rr[r.type]&&r.setAttribute("mathvariant",n),r}}),Kt({type:"textord",htmlBuilder:function(t,e){return Dt.makeOrd(t,e,"textord")},mathmlBuilder:function(t,e){var r,n=ge(t.text,t.mode,e),a=ve(t,e)||"normal";return r="text"===t.mode?new fe.MathNode("mtext",[n]):/[0-9]/.test(t.text)?new fe.MathNode("mn",[n]):"\\prime"===t.text?new fe.MathNode("mo",[n]):new fe.MathNode("mi",[n]),a!==Rr[r.type]&&r.setAttribute("mathvariant",a),r}});var Lr={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Dr={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Kt({type:"spacing",htmlBuilder:function(t,e){if(Dr.hasOwnProperty(t.text)){var r=Dr[t.text].className||"";if("text"===t.mode){var n=Dt.makeOrd(t,e,"textord");return n.classes.push(r),n}return Dt.makeSpan(["mspace",r],[Dt.mathsym(t.text,t.mode,e)],e)}if(Lr.hasOwnProperty(t.text))return Dt.makeSpan(["mspace",Lr[t.text]],[],e);throw new o('Unknown type of space "'+t.text+'"')},mathmlBuilder:function(t,e){if(!Dr.hasOwnProperty(t.text)){if(Lr.hasOwnProperty(t.text))return new fe.MathNode("mspace");throw new o('Unknown type of space "'+t.text+'"')}return new fe.MathNode("mtext",[new fe.TextNode(" ")])}}),Kt({type:"tag",mathmlBuilder:function(t,e){var r=new fe.MathNode("mtable",[new fe.MathNode("mlabeledtr",[new fe.MathNode("mtd",[be(t.tag,e)]),new fe.MathNode("mtd",[be(t.body,e)])])]);return r.setAttribute("side","right"),r}});var Hr={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Pr={"\\textbf":"textbf"},Fr={"\\textit":"textit"},Vr=function(t,e){var r=t.font;return r?Hr[r]?e.withTextFontFamily(Hr[r]):Pr[r]?e.withTextFontWeight(Pr[r]):e.withTextFontShape(Fr[r]):e};Zt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textit"],props:{numArgs:1,argTypes:["text"],greediness:2,allowedInText:!0,consumeMode:"text"},handler:function(t,e){var r=t.parser,n=t.funcName,a=e[0];return{type:"text",mode:r.mode,body:Jt(a),font:n}},htmlBuilder:function(t,e){var r=Vr(t,e),n=ae(t.body,r,!0);return Dt.makeSpan(["mord","text"],Dt.tryCombineChars(n),r)},mathmlBuilder:function(t,e){var r=Vr(t,e);return be(t.body,r)}}),Zt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(t,e){return{type:"underline",mode:t.parser.mode,body:e[0]}},htmlBuilder:function(t,e){var r=le(t.body,e),n=Dt.makeLineSpan("underline-line",e),a=Dt.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:n.height},{type:"elem",elem:n},{type:"kern",size:3*n.height},{type:"elem",elem:r}]},e);return Dt.makeSpan(["mord","underline"],[a],e)},mathmlBuilder:function(t,e){var r=new fe.MathNode("mo",[new fe.TextNode("‾")]);r.setAttribute("stretchy","true");var n=new fe.MathNode("munder",[we(t.body,e),r]);return n.setAttribute("accentunder","true"),n}}),Zt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(t,e,r){throw new o("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(t,e){for(var r=Ur(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];"~"===o&&(o="\\textasciitilde"),n.push(Dt.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return Dt.makeSpan(["mord","text"].concat(a.sizingClasses(e)),Dt.tryCombineChars(n),a)},mathmlBuilder:function(t,e){var r=new fe.TextNode(Ur(t)),n=new fe.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var Ur=function(t){return t.body.replace(/ /g,t.star?"␣":" ")},Gr=Xt,Yr=new RegExp("^(\\\\[a-zA-Z@]+)[ \r\n\t]*$"),_r=new RegExp("[̀-ͯ]+$"),Wr="([ \r\n\t]+)|([!-\\[\\]-‧‪-퟿豈-￿][̀-ͯ]*|[\ud800-\udbff][\udc00-\udfff][̀-ͯ]*|\\\\verb\\*([^]).*?\\3|\\\\verb([^*a-zA-Z]).*?\\4|\\\\[a-zA-Z@]+[ \r\n\t]*|\\\\[^\ud800-\udfff])",Xr=function(){function t(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(Wr,"g"),this.catcodes={"%":14}}var e=t.prototype;return e.setCatcode=function(t,e){this.catcodes[t]=e},e.lex=function(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new a("EOF",new n(this,e,e));var r=this.tokenRegex.exec(t);if(null===r||r.index!==e)throw new o("Unexpected character: '"+t[e]+"'",new a(t[e],new n(this,e,e+1)));var i=r[2]||" ";if(14===this.catcodes[i]){var s=t.indexOf("\n",this.tokenRegex.lastIndex);return-1===s?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}var h=i.match(Yr);return h&&(i=h[1]),new a(i,new n(this,e,this.tokenRegex.lastIndex))},t}(),jr=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}var e=t.prototype;return e.beginGroup=function(){this.undefStack.push({})},e.endGroup=function(){if(0===this.undefStack.length)throw new o("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?delete this.current[e]:this.current[e]=t[e])},e.has=function(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)},e.get=function(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]},e.set=function(t,e,r){if(void 0===r&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}this.current[t]=e},t}(),$r={},Zr=$r;function Kr(t,e){$r[t]=e}Kr("\\@firstoftwo",function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}}),Kr("\\@secondoftwo",function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}}),Kr("\\@ifnextchar",function(t){var e=t.consumeArgs(3),r=t.future();return 1===e[0].length&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}}),Kr("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Kr("\\TextOrMath",function(t){var e=t.consumeArgs(2);return"text"===t.mode?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var Jr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Kr("\\char",function(t){var e,r=t.popToken(),n="";if("'"===r.text)e=8,r=t.popToken();else if('"'===r.text)e=16,r=t.popToken();else if("`"===r.text)if("\\"===(r=t.popToken()).text[0])n=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new o("\\char` missing argument");n=r.text.charCodeAt(0)}else e=10;if(e){if(null==(n=Jr[r.text])||n>=e)throw new o("Invalid base-"+e+" digit "+r.text);for(var a;null!=(a=Jr[t.future().text])&&a<e;)n*=e,n+=a,t.popToken()}return"\\@char{"+n+"}"});var Qr=function(t,e){var r=t.consumeArgs(1)[0];if(1!==r.length)throw new o("\\gdef's first argument must be a macro name");var n=r[0].text,a=0;for(r=t.consumeArgs(1)[0];1===r.length&&"#"===r[0].text;){if(1!==(r=t.consumeArgs(1)[0]).length)throw new o('Invalid argument number length "'+r.length+'"');if(!/^[1-9]$/.test(r[0].text))throw new o('Invalid argument number "'+r[0].text+'"');if(a++,parseInt(r[0].text)!==a)throw new o('Argument number "'+r[0].text+'" out of order');r=t.consumeArgs(1)[0]}return t.macros.set(n,{tokens:r,numArgs:a},e),""};Kr("\\gdef",function(t){return Qr(t,!0)}),Kr("\\def",function(t){return Qr(t,!1)}),Kr("\\global",function(t){var e=t.consumeArgs(1)[0];if(1!==e.length)throw new o("Invalid command after \\global");var r=e[0].text;if("\\def"===r)return Qr(t,!0);throw new o("Invalid command '"+r+"' after \\global")});var tn=function(t,e,r){var n=t.consumeArgs(1)[0];if(1!==n.length)throw new o("\\newcommand's first argument must be a macro name");var a=n[0].text,i=t.isDefined(a);if(i&&!e)throw new o("\\newcommand{"+a+"} attempting to redefine "+a+"; use \\renewcommand");if(!i&&!r)throw new o("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var s=0;if(1===(n=t.consumeArgs(1)[0]).length&&"["===n[0].text){for(var h="",l=t.expandNextToken();"]"!==l.text&&"EOF"!==l.text;)h+=l.text,l=t.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new o("Invalid number of arguments: "+h);s=parseInt(h),n=t.consumeArgs(1)[0]}return t.macros.set(a,{tokens:n,numArgs:s}),""};Kr("\\newcommand",function(t){return tn(t,!1,!0)}),Kr("\\renewcommand",function(t){return tn(t,!0,!1)}),Kr("\\providecommand",function(t){return tn(t,!0,!0)}),Kr("\\bgroup","{"),Kr("\\egroup","}"),Kr("\\lq","`"),Kr("\\rq","'"),Kr("\\aa","\\r a"),Kr("\\AA","\\r A"),Kr("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),Kr("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Kr("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),Kr("ℬ","\\mathscr{B}"),Kr("ℰ","\\mathscr{E}"),Kr("ℱ","\\mathscr{F}"),Kr("ℋ","\\mathscr{H}"),Kr("ℐ","\\mathscr{I}"),Kr("ℒ","\\mathscr{L}"),Kr("ℳ","\\mathscr{M}"),Kr("ℛ","\\mathscr{R}"),Kr("ℭ","\\mathfrak{C}"),Kr("ℌ","\\mathfrak{H}"),Kr("ℨ","\\mathfrak{Z}"),Kr("·","\\cdotp"),Kr("\\llap","\\mathllap{\\textrm{#1}}"),Kr("\\rlap","\\mathrlap{\\textrm{#1}}"),Kr("\\clap","\\mathclap{\\textrm{#1}}"),Kr("\\not","\\mathrel{\\mathrlap\\@not}"),Kr("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),Kr("\\ne","\\neq"),Kr("≠","\\neq"),Kr("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),Kr("∉","\\notin"),Kr("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),Kr("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),Kr("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),Kr("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),Kr("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),Kr("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),Kr("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),Kr("⟂","\\perp"),Kr("‼","\\mathclose{!\\mkern-0.8mu!}"),Kr("∌","\\notni"),Kr("⌜","\\ulcorner"),Kr("⌝","\\urcorner"),Kr("⌞","\\llcorner"),Kr("⌟","\\lrcorner"),Kr("©","\\copyright"),Kr("®","\\textregistered"),Kr("️","\\textregistered"),Kr("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Kr("⋮","\\vdots"),Kr("\\varGamma","\\mathit{\\Gamma}"),Kr("\\varDelta","\\mathit{\\Delta}"),Kr("\\varTheta","\\mathit{\\Theta}"),Kr("\\varLambda","\\mathit{\\Lambda}"),Kr("\\varXi","\\mathit{\\Xi}"),Kr("\\varPi","\\mathit{\\Pi}"),Kr("\\varSigma","\\mathit{\\Sigma}"),Kr("\\varUpsilon","\\mathit{\\Upsilon}"),Kr("\\varPhi","\\mathit{\\Phi}"),Kr("\\varPsi","\\mathit{\\Psi}"),Kr("\\varOmega","\\mathit{\\Omega}"),Kr("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),Kr("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Kr("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Kr("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Kr("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var en={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Kr("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in en?e=en[r]:"\\not"===r.substr(0,4)?e="\\dotsb":r in W.math&&c.contains(["bin","rel"],W.math[r].group)&&(e="\\dotsb"),e});var rn={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Kr("\\dotso",function(t){return t.future().text in rn?"\\ldots\\,":"\\ldots"}),Kr("\\dotsc",function(t){var e=t.future().text;return e in rn&&","!==e?"\\ldots\\,":"\\ldots"}),Kr("\\cdots",function(t){return t.future().text in rn?"\\@cdots\\,":"\\@cdots"}),Kr("\\dotsb","\\cdots"),Kr("\\dotsm","\\cdots"),Kr("\\dotsi","\\!\\cdots"),Kr("\\dotsx","\\ldots\\,"),Kr("\\DOTSI","\\relax"),Kr("\\DOTSB","\\relax"),Kr("\\DOTSX","\\relax"),Kr("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Kr("\\,","\\tmspace+{3mu}{.1667em}"),Kr("\\thinspace","\\,"),Kr("\\>","\\mskip{4mu}"),Kr("\\:","\\tmspace+{4mu}{.2222em}"),Kr("\\medspace","\\:"),Kr("\\;","\\tmspace+{5mu}{.2777em}"),Kr("\\thickspace","\\;"),Kr("\\!","\\tmspace-{3mu}{.1667em}"),Kr("\\negthinspace","\\!"),Kr("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Kr("\\negthickspace","\\tmspace-{5mu}{.277em}"),Kr("\\enspace","\\kern.5em "),Kr("\\enskip","\\hskip.5em\\relax"),Kr("\\quad","\\hskip1em\\relax"),Kr("\\qquad","\\hskip2em\\relax"),Kr("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Kr("\\tag@paren","\\tag@literal{({#1})}"),Kr("\\tag@literal",function(t){if(t.macros.get("\\df@tag"))throw new o("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Kr("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Kr("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Kr("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Kr("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Kr("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\mathrlap{\\mkern0.4mu\\raisebox{0.4mu}{$#1$}}{\\mkern0.8mu#1}}}{\\mathbf{#1}}"),Kr("\\\\","\\newline"),Kr("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var nn=H["Main-Regular"]["T".charCodeAt(0)][1]-.7*H["Main-Regular"]["A".charCodeAt(0)][1]+"em";Kr("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+nn+"}{\\scriptsize A}\\kern-.15em\\TeX}{LaTeX}}"),Kr("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+nn+"}{\\scriptsize A}\\kern-.15em\\TeX}{KaTeX}}"),Kr("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Kr("\\@hspace","\\hskip #1\\relax"),Kr("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Kr("\\ordinarycolon",":"),Kr("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Kr("\\dblcolon","\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}"),Kr("\\coloneqq","\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}"),Kr("\\Coloneqq","\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}"),Kr("\\coloneq","\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}"),Kr("\\Coloneq","\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}"),Kr("\\eqqcolon","\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Kr("\\Eqqcolon","\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Kr("\\eqcolon","\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Kr("\\Eqcolon","\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Kr("\\colonapprox","\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}"),Kr("\\Colonapprox","\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}"),Kr("\\colonsim","\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}"),Kr("\\Colonsim","\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}"),Kr("≔","\\coloneqq"),Kr("≕","\\eqqcolon"),Kr("⩴","\\Coloneqq"),Kr("\\ratio","\\vcentcolon"),Kr("\\coloncolon","\\dblcolon"),Kr("\\colonequals","\\coloneqq"),Kr("\\coloncolonequals","\\Coloneqq"),Kr("\\equalscolon","\\eqqcolon"),Kr("\\equalscoloncolon","\\Eqqcolon"),Kr("\\colonminus","\\coloneq"),Kr("\\coloncolonminus","\\Coloneq"),Kr("\\minuscolon","\\eqcolon"),Kr("\\minuscoloncolon","\\Eqcolon"),Kr("\\coloncolonapprox","\\Colonapprox"),Kr("\\coloncolonsim","\\Colonsim"),Kr("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Kr("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Kr("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Kr("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Kr("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),Kr("\\limsup","\\DOTSB\\mathop{\\operatorname{lim\\,sup}}\\limits"),Kr("\\liminf","\\DOTSB\\mathop{\\operatorname{lim\\,inf}}\\limits"),Kr("⟦","\\mathopen{[\\mkern-3.2mu[}"),Kr("⟧","\\mathclose{]\\mkern-3.2mu]}"),Kr("\\darr","\\downarrow"),Kr("\\dArr","\\Downarrow"),Kr("\\Darr","\\Downarrow"),Kr("\\lang","\\langle"),Kr("\\rang","\\rangle"),Kr("\\uarr","\\uparrow"),Kr("\\uArr","\\Uparrow"),Kr("\\Uarr","\\Uparrow"),Kr("\\N","\\mathbb{N}"),Kr("\\R","\\mathbb{R}"),Kr("\\Z","\\mathbb{Z}"),Kr("\\alef","\\aleph"),Kr("\\alefsym","\\aleph"),Kr("\\Alpha","\\mathrm{A}"),Kr("\\Beta","\\mathrm{B}"),Kr("\\bull","\\bullet"),Kr("\\Chi","\\mathrm{X}"),Kr("\\clubs","\\clubsuit"),Kr("\\cnums","\\mathbb{C}"),Kr("\\Complex","\\mathbb{C}"),Kr("\\Dagger","\\ddagger"),Kr("\\diamonds","\\diamondsuit"),Kr("\\empty","\\emptyset"),Kr("\\Epsilon","\\mathrm{E}"),Kr("\\Eta","\\mathrm{H}"),Kr("\\exist","\\exists"),Kr("\\harr","\\leftrightarrow"),Kr("\\hArr","\\Leftrightarrow"),Kr("\\Harr","\\Leftrightarrow"),Kr("\\hearts","\\heartsuit"),Kr("\\image","\\Im"),Kr("\\infin","\\infty"),Kr("\\Iota","\\mathrm{I}"),Kr("\\isin","\\in"),Kr("\\Kappa","\\mathrm{K}"),Kr("\\larr","\\leftarrow"),Kr("\\lArr","\\Leftarrow"),Kr("\\Larr","\\Leftarrow"),Kr("\\lrarr","\\leftrightarrow"),Kr("\\lrArr","\\Leftrightarrow"),Kr("\\Lrarr","\\Leftrightarrow"),Kr("\\Mu","\\mathrm{M}"),Kr("\\natnums","\\mathbb{N}"),Kr("\\Nu","\\mathrm{N}"),Kr("\\Omicron","\\mathrm{O}"),Kr("\\plusmn","\\pm"),Kr("\\rarr","\\rightarrow"),Kr("\\rArr","\\Rightarrow"),Kr("\\Rarr","\\Rightarrow"),Kr("\\real","\\Re"),Kr("\\reals","\\mathbb{R}"),Kr("\\Reals","\\mathbb{R}"),Kr("\\Rho","\\mathrm{R}"),Kr("\\sdot","\\cdot"),Kr("\\sect","\\S"),Kr("\\spades","\\spadesuit"),Kr("\\sub","\\subset"),Kr("\\sube","\\subseteq"),Kr("\\supe","\\supseteq"),Kr("\\Tau","\\mathrm{T}"),Kr("\\thetasym","\\vartheta"),Kr("\\weierp","\\wp"),Kr("\\Zeta","\\mathrm{Z}"),Kr("\\argmin","\\DOTSB\\mathop{\\operatorname{arg\\,min}}\\limits"),Kr("\\argmax","\\DOTSB\\mathop{\\operatorname{arg\\,max}}\\limits");var an={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},on=function(){function t(t,e,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new jr(Zr,e.macros),this.mode=r,this.stack=[]}var e=t.prototype;return e.feed=function(t){this.lexer=new Xr(t,this.settings)},e.switchMode=function(t){this.mode=t},e.beginGroup=function(){this.macros.beginGroup()},e.endGroup=function(){this.macros.endGroup()},e.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},e.popToken=function(){return this.future(),this.stack.pop()},e.pushToken=function(t){this.stack.push(t)},e.pushTokens=function(t){var e;(e=this.stack).push.apply(e,t)},e.consumeSpaces=function(){for(;" "===this.future().text;)this.stack.pop()},e.consumeArgs=function(t){for(var e=[],r=0;r<t;++r){this.consumeSpaces();var n=this.popToken();if("{"===n.text){for(var a=[],i=1;0!==i;){var s=this.popToken();if(a.push(s),"{"===s.text)++i;else if("}"===s.text)--i;else if("EOF"===s.text)throw new o("End of input in macro argument",n)}a.pop(),a.reverse(),e[r]=a}else{if("EOF"===n.text)throw new o("End of input expecting macro argument");e[r]=[n]}}return e},e.expandOnce=function(){var t=this.popToken(),e=t.text,r=this._getExpansion(e);if(null==r)return this.pushToken(t),t;if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new o("Too many expansions: infinite loop or need to increase maxExpand setting");var n=r.tokens;if(r.numArgs)for(var a=this.consumeArgs(r.numArgs),i=(n=n.slice()).length-1;i>=0;--i){var s=n[i];if("#"===s.text){if(0===i)throw new o("Incomplete placeholder at end of macro body",s);if("#"===(s=n[--i]).text)n.splice(i+1,1);else{if(!/^[1-9]$/.test(s.text))throw new o("Not a valid argument number",s);var h;(h=n).splice.apply(h,[i,2].concat(a[+s.text-1]))}}}return this.pushTokens(n),n},e.expandAfterFuture=function(){return this.expandOnce(),this.future()},e.expandNextToken=function(){for(;;){var t=this.expandOnce();if(t instanceof a){if("\\relax"!==t.text)return this.stack.pop();this.stack.pop()}}throw new Error},e.expandMacro=function(t){if(this.macros.get(t)){var e=[],r=this.stack.length;for(this.pushToken(new a(t));this.stack.length>r;)this.expandOnce()instanceof a&&e.push(this.stack.pop());return e}},e.expandMacroAsText=function(t){var e=this.expandMacro(t);return e?e.map(function(t){return t.text}).join(""):e},e._getExpansion=function(t){var e=this.macros.get(t);if(null==e)return e;var r="function"==typeof e?e(this):e;if("string"==typeof r){var n=0;if(-1!==r.indexOf("#"))for(var a=r.replace(/##/g,"");-1!==a.indexOf("#"+(n+1));)++n;for(var i=new Xr(r,this.settings),o=[],s=i.lex();"EOF"!==s.text;)o.push(s),s=i.lex();return o.reverse(),{tokens:o,numArgs:n}}return r},e.isDefined=function(t){return this.macros.has(t)||Gr.hasOwnProperty(t)||W.math.hasOwnProperty(t)||W.text.hasOwnProperty(t)||an.hasOwnProperty(t)},t}(),sn={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"}},hn={"á":"á","à":"à","ä":"ä","ǟ":"ǟ","ã":"ã","ā":"ā","ă":"ă","ắ":"ắ","ằ":"ằ","ẵ":"ẵ","ǎ":"ǎ","â":"â","ấ":"ấ","ầ":"ầ","ẫ":"ẫ","ȧ":"ȧ","ǡ":"ǡ","å":"å","ǻ":"ǻ","ḃ":"ḃ","ć":"ć","č":"č","ĉ":"ĉ","ċ":"ċ","ď":"ď","ḋ":"ḋ","é":"é","è":"è","ë":"ë","ẽ":"ẽ","ē":"ē","ḗ":"ḗ","ḕ":"ḕ","ĕ":"ĕ","ě":"ě","ê":"ê","ế":"ế","ề":"ề","ễ":"ễ","ė":"ė","ḟ":"ḟ","ǵ":"ǵ","ḡ":"ḡ","ğ":"ğ","ǧ":"ǧ","ĝ":"ĝ","ġ":"ġ","ḧ":"ḧ","ȟ":"ȟ","ĥ":"ĥ","ḣ":"ḣ","í":"í","ì":"ì","ï":"ï","ḯ":"ḯ","ĩ":"ĩ","ī":"ī","ĭ":"ĭ","ǐ":"ǐ","î":"î","ǰ":"ǰ","ĵ":"ĵ","ḱ":"ḱ","ǩ":"ǩ","ĺ":"ĺ","ľ":"ľ","ḿ":"ḿ","ṁ":"ṁ","ń":"ń","ǹ":"ǹ","ñ":"ñ","ň":"ň","ṅ":"ṅ","ó":"ó","ò":"ò","ö":"ö","ȫ":"ȫ","õ":"õ","ṍ":"ṍ","ṏ":"ṏ","ȭ":"ȭ","ō":"ō","ṓ":"ṓ","ṑ":"ṑ","ŏ":"ŏ","ǒ":"ǒ","ô":"ô","ố":"ố","ồ":"ồ","ỗ":"ỗ","ȯ":"ȯ","ȱ":"ȱ","ő":"ő","ṕ":"ṕ","ṗ":"ṗ","ŕ":"ŕ","ř":"ř","ṙ":"ṙ","ś":"ś","ṥ":"ṥ","š":"š","ṧ":"ṧ","ŝ":"ŝ","ṡ":"ṡ","ẗ":"ẗ","ť":"ť","ṫ":"ṫ","ú":"ú","ù":"ù","ü":"ü","ǘ":"ǘ","ǜ":"ǜ","ǖ":"ǖ","ǚ":"ǚ","ũ":"ũ","ṹ":"ṹ","ū":"ū","ṻ":"ṻ","ŭ":"ŭ","ǔ":"ǔ","û":"û","ů":"ů","ű":"ű","ṽ":"ṽ","ẃ":"ẃ","ẁ":"ẁ","ẅ":"ẅ","ŵ":"ŵ","ẇ":"ẇ","ẘ":"ẘ","ẍ":"ẍ","ẋ":"ẋ","ý":"ý","ỳ":"ỳ","ÿ":"ÿ","ỹ":"ỹ","ȳ":"ȳ","ŷ":"ŷ","ẏ":"ẏ","ẙ":"ẙ","ź":"ź","ž":"ž","ẑ":"ẑ","ż":"ż","Á":"Á","À":"À","Ä":"Ä","Ǟ":"Ǟ","Ã":"Ã","Ā":"Ā","Ă":"Ă","Ắ":"Ắ","Ằ":"Ằ","Ẵ":"Ẵ","Ǎ":"Ǎ","Â":"Â","Ấ":"Ấ","Ầ":"Ầ","Ẫ":"Ẫ","Ȧ":"Ȧ","Ǡ":"Ǡ","Å":"Å","Ǻ":"Ǻ","Ḃ":"Ḃ","Ć":"Ć","Č":"Č","Ĉ":"Ĉ","Ċ":"Ċ","Ď":"Ď","Ḋ":"Ḋ","É":"É","È":"È","Ë":"Ë","Ẽ":"Ẽ","Ē":"Ē","Ḗ":"Ḗ","Ḕ":"Ḕ","Ĕ":"Ĕ","Ě":"Ě","Ê":"Ê","Ế":"Ế","Ề":"Ề","Ễ":"Ễ","Ė":"Ė","Ḟ":"Ḟ","Ǵ":"Ǵ","Ḡ":"Ḡ","Ğ":"Ğ","Ǧ":"Ǧ","Ĝ":"Ĝ","Ġ":"Ġ","Ḧ":"Ḧ","Ȟ":"Ȟ","Ĥ":"Ĥ","Ḣ":"Ḣ","Í":"Í","Ì":"Ì","Ï":"Ï","Ḯ":"Ḯ","Ĩ":"Ĩ","Ī":"Ī","Ĭ":"Ĭ","Ǐ":"Ǐ","Î":"Î","İ":"İ","Ĵ":"Ĵ","Ḱ":"Ḱ","Ǩ":"Ǩ","Ĺ":"Ĺ","Ľ":"Ľ","Ḿ":"Ḿ","Ṁ":"Ṁ","Ń":"Ń","Ǹ":"Ǹ","Ñ":"Ñ","Ň":"Ň","Ṅ":"Ṅ","Ó":"Ó","Ò":"Ò","Ö":"Ö","Ȫ":"Ȫ","Õ":"Õ","Ṍ":"Ṍ","Ṏ":"Ṏ","Ȭ":"Ȭ","Ō":"Ō","Ṓ":"Ṓ","Ṑ":"Ṑ","Ŏ":"Ŏ","Ǒ":"Ǒ","Ô":"Ô","Ố":"Ố","Ồ":"Ồ","Ỗ":"Ỗ","Ȯ":"Ȯ","Ȱ":"Ȱ","Ő":"Ő","Ṕ":"Ṕ","Ṗ":"Ṗ","Ŕ":"Ŕ","Ř":"Ř","Ṙ":"Ṙ","Ś":"Ś","Ṥ":"Ṥ","Š":"Š","Ṧ":"Ṧ","Ŝ":"Ŝ","Ṡ":"Ṡ","Ť":"Ť","Ṫ":"Ṫ","Ú":"Ú","Ù":"Ù","Ü":"Ü","Ǘ":"Ǘ","Ǜ":"Ǜ","Ǖ":"Ǖ","Ǚ":"Ǚ","Ũ":"Ũ","Ṹ":"Ṹ","Ū":"Ū","Ṻ":"Ṻ","Ŭ":"Ŭ","Ǔ":"Ǔ","Û":"Û","Ů":"Ů","Ű":"Ű","Ṽ":"Ṽ","Ẃ":"Ẃ","Ẁ":"Ẁ","Ẅ":"Ẅ","Ŵ":"Ŵ","Ẇ":"Ẇ","Ẍ":"Ẍ","Ẋ":"Ẋ","Ý":"Ý","Ỳ":"Ỳ","Ÿ":"Ÿ","Ỹ":"Ỹ","Ȳ":"Ȳ","Ŷ":"Ŷ","Ẏ":"Ẏ","Ź":"Ź","Ž":"Ž","Ẑ":"Ẑ","Ż":"Ż","ά":"ά","ὰ":"ὰ","ᾱ":"ᾱ","ᾰ":"ᾰ","έ":"έ","ὲ":"ὲ","ή":"ή","ὴ":"ὴ","ί":"ί","ὶ":"ὶ","ϊ":"ϊ","ΐ":"ΐ","ῒ":"ῒ","ῑ":"ῑ","ῐ":"ῐ","ό":"ό","ὸ":"ὸ","ύ":"ύ","ὺ":"ὺ","ϋ":"ϋ","ΰ":"ΰ","ῢ":"ῢ","ῡ":"ῡ","ῠ":"ῠ","ώ":"ώ","ὼ":"ὼ","Ύ":"Ύ","Ὺ":"Ὺ","Ϋ":"Ϋ","Ῡ":"Ῡ","Ῠ":"Ῠ","Ώ":"Ώ","Ὼ":"Ὼ"},ln=function(){function t(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new on(t,e,this.mode),this.settings=e,this.leftrightDepth=0}var e=t.prototype;return e.expect=function(t,e){if(void 0===e&&(e=!0),this.nextToken.text!==t)throw new o("Expected '"+t+"', got '"+this.nextToken.text+"'",this.nextToken);e&&this.consume()},e.consume=function(){this.nextToken=this.gullet.expandNextToken()},e.switchMode=function(t){this.mode=t,this.gullet.switchMode(t)},e.parse=function(){this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor"),this.consume();var t=this.parseExpression(!1);return this.expect("EOF",!1),this.gullet.endGroup(),t},e.parseExpression=function(e,r){for(var n=[];;){"math"===this.mode&&this.consumeSpaces();var a=this.nextToken;if(-1!==t.endOfExpression.indexOf(a.text))break;if(r&&a.text===r)break;if(e&&Gr[a.text]&&Gr[a.text].infix)break;var i=this.parseAtom(r);if(!i)break;n.push(i)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)},e.handleInfixNodes=function(t){for(var e,r=-1,n=0;n<t.length;n++){var a=Pt(t[n],"infix");if(a){if(-1!==r)throw new o("only one infix operator per group",a.token);r=n,e=a.replaceWith}}if(-1!==r&&e){var i,s,h=t.slice(0,r),l=t.slice(r+1);return i=1===h.length&&"ordgroup"===h[0].type?h[0]:{type:"ordgroup",mode:this.mode,body:h},s=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===e?this.callFunction(e,[i,t[r],s],[]):this.callFunction(e,[i,s],[])]}return t},e.handleSupSubscript=function(e){var r=this.nextToken,n=r.text;this.consume(),this.consumeSpaces();var a=this.parseGroup(e,!1,t.SUPSUB_GREEDINESS);if(!a)throw new o("Expected group after '"+n+"'",r);return a},e.handleUnsupportedCmd=function(){for(var t=this.nextToken.text,e=[],r=0;r<t.length;r++)e.push({type:"textord",mode:"text",text:t[r]});var n={type:"text",mode:this.mode,body:e},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]};return this.consume(),a},e.parseAtom=function(t){var e,r,n=this.parseGroup("atom",!1,null,t);if("text"===this.mode)return n;for(;;){this.consumeSpaces();var a=this.nextToken;if("\\limits"===a.text||"\\nolimits"===a.text){var i=Pt(n,"op");if(!i)throw new o("Limit controls must follow a math operator",a);var s="\\limits"===a.text;i.limits=s,i.alwaysHandleSupSub=!0,this.consume()}else if("^"===a.text){if(e)throw new o("Double superscript",a);e=this.handleSupSubscript("superscript")}else if("_"===a.text){if(r)throw new o("Double subscript",a);r=this.handleSupSubscript("subscript")}else{if("'"!==a.text)break;if(e)throw new o("Double superscript",a);var h={type:"textord",mode:this.mode,text:"\\prime"},l=[h];for(this.consume();"'"===this.nextToken.text;)l.push(h),this.consume();"^"===this.nextToken.text&&l.push(this.handleSupSubscript("superscript")),e={type:"ordgroup",mode:this.mode,body:l}}}return e||r?{type:"supsub",mode:this.mode,base:n,sup:e,sub:r}:n},e.parseFunction=function(t,e,r){var n=this.nextToken,a=n.text,i=Gr[a];if(!i)return null;if(null!=r&&i.greediness<=r)throw new o("Got function '"+a+"' with no arguments"+(e?" as "+e:""),n);if("text"===this.mode&&!i.allowedInText)throw new o("Can't use function '"+a+"' in text mode",n);if("math"===this.mode&&!1===i.allowedInMath)throw new o("Can't use function '"+a+"' in math mode",n);if(i.argTypes&&"url"===i.argTypes[0]&&this.gullet.lexer.setCatcode("%",13),i.consumeMode){var s=this.mode;this.switchMode(i.consumeMode),this.consume(),this.switchMode(s)}else this.consume();var h=this.parseArguments(a,i),l=h.args,m=h.optArgs;return this.callFunction(a,l,m,n,t)},e.callFunction=function(t,e,r,n,a){var i={funcName:t,parser:this,token:n,breakOnTokenText:a},s=Gr[t];if(s&&s.handler)return s.handler(i,e,r);throw new o("No function handler for "+t)},e.parseArguments=function(t,e){var r=e.numArgs+e.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};for(var n=e.greediness,a=[],i=[],s=0;s<r;s++){var h=e.argTypes&&e.argTypes[s],l=s<e.numOptionalArgs;s>0&&!l&&this.consumeSpaces(),0!==s||l||"math"!==this.mode||this.consumeSpaces();var m=this.nextToken,c=this.parseGroupOfType("argument to '"+t+"'",h,l,n);if(!c){if(l){i.push(null);continue}throw new o("Expected group after '"+t+"'",m)}(l?i:a).push(c)}return{args:a,optArgs:i}},e.parseGroupOfType=function(t,e,r,n){switch(e){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseGroup(t,r,n,void 0,e);case"raw":if(r&&"{"===this.nextToken.text)return null;var a=this.parseStringGroup("raw",r,!0);if(a)return{type:"raw",mode:"text",string:a.text};throw new o("Expected raw group",this.nextToken);case"original":case null:case void 0:return this.parseGroup(t,r,n);default:throw new o("Unknown group type as "+t,this.nextToken)}},e.consumeSpaces=function(){for(;" "===this.nextToken.text;)this.consume()},e.parseStringGroup=function(t,e,r){var n=e?"[":"{",a=e?"]":"}",i=this.nextToken;if(i.text!==n){if(e)return null;if(r&&"EOF"!==i.text&&/[^{}[\]]/.test(i.text))return this.gullet.lexer.setCatcode("%",14),this.consume(),i}var s=this.mode;this.mode="text",this.expect(n);for(var h="",l=this.nextToken,m=0,c=l;r&&m>0||this.nextToken.text!==a;){switch(this.nextToken.text){case"EOF":throw new o("Unexpected end of input in "+t,l.range(c,h));case n:m++;break;case a:m--}h+=(c=this.nextToken).text,this.consume()}return this.mode=s,this.gullet.lexer.setCatcode("%",14),this.expect(a),l.range(c,h)},e.parseRegexGroup=function(t,e){var r=this.mode;this.mode="text";for(var n=this.nextToken,a=n,i="";"EOF"!==this.nextToken.text&&t.test(i+this.nextToken.text);)i+=(a=this.nextToken).text,this.consume();if(""===i)throw new o("Invalid "+e+": '"+n.text+"'",n);return this.mode=r,n.range(a,i)},e.parseColorGroup=function(t){var e=this.parseStringGroup("color",t);if(!e)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!r)throw new o("Invalid color: '"+e.text+"'",e);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}},e.parseSizeGroup=function(t){var e,r=!1;if(!(e=t||"{"===this.nextToken.text?this.parseStringGroup("size",t):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;t||0!==e.text.length||(e.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!n)throw new o("Invalid size: '"+e.text+"'",e);var a,i={number:+(n[1]+n[2]),unit:n[3]};if("string"!=typeof(a=i)&&(a=a.unit),!(a in St||a in zt||"ex"===a))throw new o("Invalid unit: '"+i.unit+"'",e);return{type:"size",mode:this.mode,value:i,isBlank:r}},e.parseUrlGroup=function(t){var e=this.parseStringGroup("url",t,!0);if(!e)return null;var r=e.text.replace(/\\([#$%&~_^{}])/g,"$1"),n=/^\s*([^\\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(r);n=null!=n?n[1]:"_relative";var a=this.settings.allowedProtocols;if(!c.contains(a,"*")&&!c.contains(a,n))throw new o("Forbidden protocol '"+n+"'",e);return{type:"url",mode:this.mode,url:r}},e.parseGroup=function(e,r,a,i,s){var h,l,m=this.mode,c=this.nextToken,u=c.text;if(s&&this.switchMode(s),r?"["===u:"{"===u||"\\begingroup"===u){h=t.endOfGroup[u],this.gullet.beginGroup(),this.consume();var d=this.parseExpression(!1,h),p=this.nextToken;this.gullet.endGroup(),l={type:"ordgroup",mode:this.mode,loc:n.range(c,p),body:d,semisimple:"\\begingroup"===u||void 0}}else if(r)l=null;else if(null==(l=this.parseFunction(i,e,a)||this.parseSymbol())&&"\\"===u[0]&&!an.hasOwnProperty(u)){if(this.settings.throwOnError)throw new o("Undefined control sequence: "+u,c);l=this.handleUnsupportedCmd()}return s&&this.switchMode(m),h&&this.expect(h),l},e.formLigatures=function(t){for(var e=t.length-1,r=0;r<e;++r){var a=t[r],i=a.text;"-"===i&&"-"===t[r+1].text&&(r+1<e&&"-"===t[r+2].text?(t.splice(r,3,{type:"textord",mode:"text",loc:n.range(a,t[r+2]),text:"---"}),e-=2):(t.splice(r,2,{type:"textord",mode:"text",loc:n.range(a,t[r+1]),text:"--"}),e-=1)),"'"!==i&&"`"!==i||t[r+1].text!==i||(t.splice(r,2,{type:"textord",mode:"text",loc:n.range(a,t[r+1]),text:i+i}),e-=1)}},e.parseSymbol=function(){var t=this.nextToken,e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var r=e.slice(5),a="*"===r.charAt(0);if(a&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new o("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:r=r.slice(1,-1),star:a}}hn.hasOwnProperty(e[0])&&!W[this.mode][e[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=hn[e[0]]+e.substr(1));var i,s=_r.exec(e);if(s&&("i"===(e=e.substring(0,s.index))?e="ı":"j"===e&&(e="ȷ")),W[this.mode][e]){this.settings.strict&&"math"===this.mode&&"ÇÐÞçþ".indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var h,l=W[this.mode][e].group,m=n.range(t);if(G.hasOwnProperty(l)){var c=l;h={type:"atom",mode:this.mode,family:c,loc:m,text:e}}else h={type:l,mode:this.mode,loc:m,text:e};i=h}else{if(!(e.charCodeAt(0)>=128))return null;this.settings.strict&&(z(e.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'" ('+e.charCodeAt(0)+")",t)),i={type:"textord",mode:this.mode,loc:n.range(t),text:e}}if(this.consume(),s)for(var u=0;u<s[0].length;u++){var d=s[0][u];if(!sn[d])throw new o("Unknown accent ' "+d+"'",t);var p=sn[d][this.mode];if(!p)throw new o("Accent "+d+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:n.range(t),label:p,isStretchy:!1,isShifty:!0,base:i}}return i},t}();ln.endOfExpression=["}","\\endgroup","\\end","\\right","&"],ln.endOfGroup={"[":"]","{":"}","\\begingroup":"\\endgroup"},ln.SUPSUB_GREEDINESS=1;var mn=function(t,e){if(!("string"==typeof t||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new ln(t,e);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(r.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new o("\\tag works only in display equations");r.gullet.feed("\\df@tag"),n=[{type:"tag",mode:"text",body:n,tag:r.parse()}]}return n},cn=function(t,e,r){e.textContent="";var n=dn(t,r).toNode();e.appendChild(n)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&(cn=function(){throw new o("KaTeX doesn't work in quirks mode.")});var un=function(t,e,r){if(r.throwOnError||!(t instanceof o))throw t;var n=Dt.makeSpan(["katex-error"],[new I(e)]);return n.setAttribute("title",t.toString()),n.setAttribute("style","color:"+r.errorColor),n},dn=function(t,e){var r=new u(e);try{return function(t,e,r){var n=ke(r),a=function(t,e,r){var n,a=ye(t,r);n=1===a.length&&a[0]instanceof de&&c.contains(["mrow","mtable"],a[0].type)?a[0]:new fe.MathNode("mrow",a);var i=new fe.MathNode("annotation",[new fe.TextNode(e)]);i.setAttribute("encoding","application/x-tex");var o=new fe.MathNode("semantics",[n,i]),s=new fe.MathNode("math",[o]);return Dt.makeSpan(["katex-mathml"],[s])}(t,e,n),i=ce(t,n),o=Dt.makeSpan(["katex"],[a,i]);return Se(o,r)}(mn(t,r),t,r)}catch(e){return un(e,t,r)}},pn={version:"0.10.1",render:cn,renderToString:function(t,e){return dn(t,e).toMarkup()},ParseError:o,__parse:function(t,e){var r=new u(e);return mn(t,r)},__renderToDomTree:dn,__renderToHTMLTree:function(t,e){var r=new u(e);try{return function(t,e,r){var n=ce(t,ke(r)),a=Dt.makeSpan(["katex"],[n]);return Se(a,r)}(mn(t,r),0,r)}catch(e){return un(e,t,r)}},__setFontMetrics:function(t,e){H[t]=e},__defineSymbol:X,__defineMacro:Kr,__domTree:{Span:q,Anchor:E,SymbolNode:I,SvgNode:R,PathNode:L,LineNode:D}};e.default=pn}]).default});
},{}],"GEVF":[function(require,module,exports) {
window.QRCode,function(){function t(t){this.mode=s.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=[],r=0,o=this.data.length;o>r;r++){var i=this.data.charCodeAt(r);i>65536?(e[0]=240|(1835008&i)>>>18,e[1]=128|(258048&i)>>>12,e[2]=128|(4032&i)>>>6,e[3]=128|63&i):i>2048?(e[0]=224|(61440&i)>>>12,e[1]=128|(4032&i)>>>6,e[2]=128|63&i):i>128?(e[0]=192|(1984&i)>>>6,e[1]=128|63&i):e[0]=i,this.parsedData=this.parsedData.concat(e)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function o(t,e){this.totalCount=t,this.dataCount=e}function i(){this.buffer=[],this.length=0}function n(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,aMat=e.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(t=parseFloat(aMat[1]))),t}function a(t,e){for(var r=1,o=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),i=0,n=d.length;n>=i;i++){var a=0;switch(e){case h.L:a=d[i][0];break;case h.M:a=d[i][1];break;case h.Q:a=d[i][2];break;case h.H:a=d[i][3]}if(a>=o)break;r++}if(r>d.length)throw new Error("Too long data");return r}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;r>e;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[o][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+r][e+o]=r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=l.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var n=1*i,a=0;a<this.modules[i].length;a++){var s=1*a;this.modules[i][a]&&(o.beginFill(0,100),o.moveTo(s,n),o.lineTo(s+1,n),o.lineTo(s+1,n+1),o.lineTo(s,n+1),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=0==e%2)},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],i=t[r];if(null==this.modules[o][i])for(var n=-2;2>=n;n++)for(var a=-2;2>=a;a++)this.modules[o+n][i+a]=-2==n||2==n||-2==a||2==a||0==n&&0==a}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!t&&1==(1&e>>r);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(r=0;18>r;r++){o=!t&&1==(1&e>>r);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=l.getBCHTypeInfo(r),i=0;15>i;i++){var n=!t&&1==(1&o>>i);6>i?this.modules[i][8]=n:8>i?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(i=0;15>i;i++){n=!t&&1==(1&o>>i);8>i?this.modules[8][this.moduleCount-i-1]=n:9>i?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,i=7,n=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var h=!1;n<t.length&&(h=1==(1&t[n]>>>i)),l.getMask(e,o,a-s)&&(h=!h),this.modules[o][a-s]=h,-1==--i&&(n++,i=7)}if(0>(o+=r)||this.moduleCount<=o){o-=r,r=-r;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,r,n){for(var a=o.getRSBlocks(t,r),s=new i,h=0;h<n.length;h++){var u=n[h];s.put(u.mode,4),s.put(u.getLength(),l.getLengthInBits(u.mode,t)),u.write(s)}var f=0;for(h=0;h<a.length;h++)f+=a[h].dataCount;if(s.getLengthInBits()>8*f)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*f+")");for(s.getLengthInBits()+4<=8*f&&s.put(0,4);0!=s.getLengthInBits()%8;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*f)&&(s.put(e.PAD0,8),!(s.getLengthInBits()>=8*f));)s.put(e.PAD1,8);return e.createBytes(s,a)},e.createBytes=function(t,e){for(var o=0,i=0,n=0,a=new Array(e.length),s=new Array(e.length),h=0;h<e.length;h++){var u=e[h].dataCount,f=e[h].totalCount-u;i=Math.max(i,u),n=Math.max(n,f),a[h]=new Array(u);for(var g=0;g<a[h].length;g++)a[h][g]=255&t.buffer[g+o];o+=u;var d=l.getErrorCorrectPolynomial(f),c=new r(a[h],d.getLength()-1).mod(d);s[h]=new Array(d.getLength()-1);for(g=0;g<s[h].length;g++){var p=g+c.getLength()-s[h].length;s[h][g]=p>=0?c.get(p):0}}var m=0;for(g=0;g<e.length;g++)m+=e[g].totalCount;var _=new Array(m),v=0;for(g=0;i>g;g++)for(h=0;h<e.length;h++)g<a[h].length&&(_[v++]=a[h][g]);for(g=0;n>g;g++)for(h=0;h<e.length;h++)g<s[h].length&&(_[v++]=s[h][g]);return _};for(var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},h={L:1,M:0,Q:3,H:2},u={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;l.getBCHDigit(e)-l.getBCHDigit(l.G15)>=0;)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;l.getBCHDigit(e)-l.getBCHDigit(l.G18)>=0;)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case u.PATTERN000:return 0==(e+r)%2;case u.PATTERN001:return 0==e%2;case u.PATTERN010:return 0==r%3;case u.PATTERN011:return 0==(e+r)%3;case u.PATTERN100:return 0==(Math.floor(e/2)+Math.floor(r/3))%2;case u.PATTERN101:return 0==e*r%2+e*r%3;case u.PATTERN110:return 0==(e*r%2+e*r%3)%2;case u.PATTERN111:return 0==(e*r%3+(e+r)%2)%2;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),o=0;t>o;o++)e=e.multiply(new r([1,f.gexp(o)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:case s.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var i=0;e>i;i++){for(var n=0,a=t.isDark(o,i),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var h=-1;1>=h;h++)0>i+h||i+h>=e||(0!=s||0!=h)&&a==t.isDark(o+s,i+h)&&n++;n>5&&(r+=3+n-5)}for(o=0;e-1>o;o++)for(i=0;e-1>i;i++){var u=0;t.isDark(o,i)&&u++,t.isDark(o+1,i)&&u++,t.isDark(o,i+1)&&u++,t.isDark(o+1,i+1)&&u++,(0==u||4==u)&&(r+=3)}for(o=0;e>o;o++)for(i=0;e-6>i;i++)t.isDark(o,i)&&!t.isDark(o,i+1)&&t.isDark(o,i+2)&&t.isDark(o,i+3)&&t.isDark(o,i+4)&&!t.isDark(o,i+5)&&t.isDark(o,i+6)&&(r+=40);for(i=0;e>i;i++)for(o=0;e-6>o;o++)t.isDark(o,i)&&!t.isDark(o+1,i)&&t.isDark(o+2,i)&&t.isDark(o+3,i)&&t.isDark(o+4,i)&&!t.isDark(o+5,i)&&t.isDark(o+6,i)&&(r+=40);var l=0;for(i=0;e>i;i++)for(o=0;e>o;o++)t.isDark(o,i)&&l++;return r+10*(Math.abs(100*l/e/e-50)/5)}},f={glog:function(t){if(1>t)throw new Error("glog("+t+")");return f.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return f.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},g=0;8>g;g++)f.EXP_TABLE[g]=1<<g;for(g=8;256>g;g++)f.EXP_TABLE[g]=f.EXP_TABLE[g-4]^f.EXP_TABLE[g-5]^f.EXP_TABLE[g-6]^f.EXP_TABLE[g-8];for(g=0;255>g;g++)f.LOG_TABLE[f.EXP_TABLE[g]]=g;r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),o=0;o<this.getLength();o++)for(var i=0;i<t.getLength();i++)e[o+i]^=f.gexp(f.glog(this.get(o))+f.glog(t.get(i)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=f.glog(this.get(0))-f.glog(t.get(0)),o=new Array(this.getLength()),i=0;i<this.getLength();i++)o[i]=this.get(i);for(i=0;i<t.getLength();i++)o[i]^=f.gexp(f.glog(t.get(i))+e);return new r(o,0).mod(t)}},o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o.getRSBlocks=function(t,e){var r=o.getRsBlockTable(t,e);if(null==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=r.length/3,n=[],a=0;i>a;a++)for(var s=r[3*a+0],h=r[3*a+1],u=r[3*a+2],l=0;s>l;l++)n.push(new o(h,u));return n},o.getRsBlockTable=function(t,e){switch(e){case h.L:return o.RS_BLOCK_TABLE[4*(t-1)+0];case h.M:return o.RS_BLOCK_TABLE[4*(t-1)+1];case h.Q:return o.RS_BLOCK_TABLE[4*(t-1)+2];case h.H:return o.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(1&this.buffer[e]>>>7-t%8)},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(1&t>>>e-r-1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var d=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],c=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&r.setAttribute(o,e[o]);return r}var r=this._htOption,o=this._el,i=t.getModuleCount();Math.floor(r.width/i),Math.floor(r.height/i),this.clear();var n=e("svg",{viewBox:"0 0 "+String(i)+" "+String(i),width:"100%",height:"100%",fill:r.colorLight});n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(n),n.appendChild(e("rect",{fill:r.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;i>a;a++)for(var s=0;i>s;s++)if(t.isDark(a,s)){var h=e("use",{x:String(a),y:String(s)});h.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),n.appendChild(h)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),p="svg"===document.documentElement.tagName.toLowerCase()?c:"undefined"!=typeof CanvasRenderingContext2D?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,r=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,o,i,n,a,s,h,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*e;else void 0===u&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);r.apply(this,arguments)}}var o=function(t,e){this._bIsPainted=!1,this._android=n(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return o.prototype.draw=function(t){var e=this._elImage,r=this._oContext,o=this._htOption,i=t.getModuleCount(),n=o.width/i,a=o.height/i,s=Math.round(n),h=Math.round(a);e.style.display="none",this.clear();for(var u=0;i>u;u++)for(var l=0;i>l;l++){var f=t.isDark(u,l),g=l*n,d=u*a;r.strokeStyle=f?o.colorDark:o.colorLight,r.lineWidth=1,r.fillStyle=f?o.colorDark:o.colorLight,r.fillRect(g,d,n,a),r.strokeRect(Math.floor(g)+.5,Math.floor(d)+.5,s,h),r.strokeRect(Math.ceil(g)-.5,Math.ceil(d)-.5,s,h)}this._bIsPainted=!0},o.prototype.makeImage=function(){this._bIsPainted&&function(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var o=document.createElement("img"),i=function(){r._bSupportDataURI=!1,r._fFail&&_fFail.call(r)};return o.onabort=i,o.onerror=i,o.onload=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)},void(o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===r._bSupportDataURI&&r._fSuccess?r._fSuccess.call(r):!1===r._bSupportDataURI&&r._fFail&&r._fFail.call(r)}.call(this,t)},o.prototype.isPainted=function(){return this._bIsPainted},o.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},o.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},o}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,o=t.getModuleCount(),i=Math.floor(e.width/o),n=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var h=0;o>h;h++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+n+"px;background-color:"+(t.isDark(s,h)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var u=r.childNodes[0],l=(e.width-u.offsetWidth)/2,f=(e.height-u.offsetHeight)/2;l>0&&f>0&&(u.style.margin=f+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();QRCode=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:h.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._android=n(),this._el=t,this._oQRCode=null,this._oDrawing=new p(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(t){this._oQRCode=new e(a(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=h}();
},{}],"L7Le":[function(require,module,exports) {
"use strict";var e=i(require("./jquery-1.10.2")),t=require("./utils"),a=require("./pay/qrcode");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){l(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function l(e,t,a){return(t=s(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e){var t=d(e,"string");return"symbol"===o(t)?t:String(t)}function d(e,t){if("object"!==o(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}require("./common"),window.insert={image:{type:"mind",callback:null,init:function(t){var a=window.location.href;a.indexOf("mindmap")>-1?this.type="mind":a.indexOf("diagraming")>-1&&(this.type="flow"),(0,e.default)("#po_image_box").dialog({onClose:function(){e.default.loading("close")}}),this.loadUserImages(),this.initEvent(),this.callback=t||null},initEvent:function(){var t=this;(0,e.default)("#text-search-img").empty().searchInput({maxLength:30,search:function(e){var a=e.toLowerCase();""!=a.trim()?(a=Util.restoreXss(a),t.searchImages(a)):this.empty()},empty:function(){(0,e.default)("#search-img-list").html('<div class="search-img-empty"><img src="'+staticBasePath+'/images/search-img.svg" style="width:120px;height:auto;margin:0"><div class="text-tip">输入搜索关键字，建议使用英文单词搜索</div></div>')}}),(0,e.default)(".img-tab-list").children("a").on("mousedown",function(t){var a=(0,e.default)(this),i=a.attr("tit");a.addClass("active").siblings().removeClass("active"),(0,e.default)(".po-image-detail").children("[tit="+i+"]").show().siblings().hide(),t.stopPropagation()}),(0,e.default)("#upload_po_img [name=type]").val(t.type),(0,e.default)("#po_upload_img_file").off("change").on("change",function(a){var i=(0,e.default)(this),o=this.files[0],n=o.type;if(""!=e.default.trim(i.val()))if(n.indexOf("image")>=0){if(!/image\/\w+/.test(n))return e.default.toast({type:"error",text:"您可以上传 JPG，GIF 或者 PNG 格式的图片文件（文件大小不能超过2MB）",target:(0,e.default)("#po_image_box")}),i.val(""),!1;if(o.size>2097152)return e.default.toast({type:"error",text:"图片大小不能超过2M",target:(0,e.default)("#po_image_box")}),i.val(""),!1;e.default.loading({text:"正在上传中",target:(0,e.default)("#po_image_box")});var r=document.getElementById("upload_po_img"),l=new FormData(r);poAjax({contentType:!1,processData:!1,data:l,success:function(a){return e.default.loading("close"),a.userImage&&a.url?((0,e.default)(".empty-upload").length>0&&(0,e.default)(".empty-upload").remove(),t.appendUserImage(a.userImage),null!=a.userImage&&t.insertUserImage(a),void i.val("")):(e.default.toast({type:"error",text:"上传失败",target:(0,e.default)("#po_image_box")}),void i.val(""))},error:function(){e.default.loading("close")}},"uploadImageForm")}else e.default.toast({type:"error",text:"上传失败，不支持的文件格式",target:(0,e.default)("#po_image_box")}),i.val("")}),(0,e.default)("#btn-insert-img").off("click").on("click",function(){var a=(0,e.default)("#text-insert-img"),i=(0,e.default)(this).parent();if(""==e.default.trim(a.val())||!/(http[s]?:\/\/.*\.(png|jpg|gif|svg|jpeg)$)/i.test(a.val()))return a.addClass("error"),i.next(".text-tip").text("请检查输入的url是否合法"),void a.select();i.next(".text-tip").text(""),t.insertUserImage(e.default.trim(a.val())),a.val("")})},insertUserImage:function(t){var a=this,i="";i="string"==typeof t?t:t.userImage.fileId;var o=new Image;o.src=i,o.onload=function(){a.callback&&a.callback(i,o),e.default.loading("close"),(0,e.default)("#po_image_box").dialog("close")}},loadUserImages:function(){var t=this,a=(0,e.default)("#upload-imgs");a.attr("loaded")||(a.empty(),poAjax({data:{type:t.type},success:function(e){if(e&&e.length>0)for(var i=0;i<e.length;i++){var o=e[i];t.appendUserImage(o)}else a.append("<div class='empty-upload image-tip'><img src='"+staticBasePath+"/images/empty.svg'/><div class='text-tip'>暂时没有使用过图片</div><br></div>")}},"userImgs"),a.attr("loaded","true"))},appendUserImage:function(t){var a=this,i=(0,e.default)("<div class='upload-img' id='"+t.imageId+"' fileId='"+t.fileId+"'></div>").appendTo((0,e.default)("#upload-imgs")),o="https://cdn.processon.com/"+t.fileId;null!=t.fileId&&t.fileId.indexOf("http")>=0&&((o=t.fileId).indexOf("orgu2a928.bkt.clouddn.com")>=0?o=o.replace("orgu2a928.bkt.clouddn.com","cdn2.processon.com"):o.indexOf("7xt9nt.com1.z0.glb.clouddn.com")>=0?o=o.replace("7xt9nt.com1.z0.glb.clouddn.com","cdn.processon.com"):o.indexOf("p7o7ul1nf.bkt.clouddn.com")>=0&&(o=o.replace("p7o7ul1nf.bkt.clouddn.com","cdn1.processon.com"))),(0,e.default)("<div class='image_box'><img src='"+o+"'/></div>").appendTo(i),i.off().on("click",function(){(0,e.default)(this).attr("fileid");a.insertUserImage(o)}).on("mouseenter",function(){var t=(0,e.default)(this),a=(0,e.default)("<div title='删除图片' class='remove_icons'><span class='po-diagraming-icons'>&#xe7b7;</span></div>").appendTo(t),i=t.attr("id");a.on("click",function(a){t.fadeOut(),poAjax({data:{imageId:i},type:"get",success:function(){t.remove(),(0,e.default)(".po-hover-tip").remove(),0==(0,e.default)("#upload-imgs").find("img").length&&(0,e.default)("#upload-imgs").html("<div class='empty-upload image-tip' style='margin-left:-7px'><img src='"+staticBasePath+"/images/empty.svg'/><div class='text-tip'>还没有使用过图片</div><br></div>")}},"removeImg"),a.stopPropagation()})}).on("mouseleave",function(){(0,e.default)(this).find(".remove_icons").remove()})},loadingSearchImg:!0,loadingSearchMore:!0,searchImages:function(t){var a=this;(0,e.default)("#search-img-list").empty();var i=1;function o(t){a.loadingSearchImg&&(a.loadingSearchImg=!1,e.default.loading({text:"加载中"}),function(t,a){t=encodeURIComponent(t);var o=["5eed8a83e4b0b8982239fcab","5f576558e4b0c94f9b1b76a7","64ed8c59e4b0bf419b63e6e2"],n=o[Math.round((o.length-1)*Math.random())];e.default.getJSON("https://iconsapi.com/api/search?appkey="+n+"&page="+i+"&size=24&query="+t).done(function(e){a&&a(e)}).fail(function(e,t,i){a&&a()})}(t,function(t){e.default.loading("close"),a.loadingSearchImg=!0,t&&t.pages&&t.pages.elements&&t.pages.elements.length?(t.pages.elements.length<20&&(a.loadingSearchMore=!1),n(t.pages)):(0,e.default)("#search-img-list").html('<div class="search-img-empty"><img src="'+staticBasePath+'/images/search-img.svg" style="width:120px;height:auto;margin:0"><div class="text-tip">没有找到相关图片，建议使用英文单词搜索</div></div>')}))}function n(n){var r=(0,e.default)("#search-img-list");(0,e.default)(".search-img-empty").remove();for(var l="",s=0,d=(n=n.elements).length;s<d;s++){var c=n[s];null!=c&&null!=c.url&&(l+='<img msrc="'+c.url+'" alt="'+c.iconName+'" src="'+c.url+'" />')}r.append(l),r.children("img").off().on("click",function(){var t=(0,e.default)(this).attr("msrc");a.insertUserImage(t)}),(0,e.default)(".search-img-con").off().on("scroll",function(){(0,e.default)(this).scrollTop()+(0,e.default)(this).innerHeight()>=r.innerHeight()-50&&a.loadingSearchImg&&a.loadingSearchMore&&(i++,o(t))})}o(t)}},link:{linkTimer:null,show:!0,showInput:!0,render:function(t,a,i){if(null!=t.target){if(this.target=t.target,0==(0,e.default)("#po_link_box").length){(0,e.default)("body").append('<div id="po_link_box" class="po-link-box po-dropdown"><div class="po-link-top"><div class="name">ProcessOn</div><div class="title-toolbar"><div class="po-tool-devider" style="margin:0 0 0 8px"></div><a id="po-open-link" target="_blank" class="po-tool-button other" style="color:#212930">打开链接</a><div id="po-copy-link" class="po-tool-button other" title="复制" title-pos="top"><span class="po-diagraming-icons text_content">&#xe7b8;</span></div><div id="po-edit-link" class="po-tool-button other" title="编辑" title-pos="top"><span class="po-diagraming-icons text_content">&#xe6ae;</span></div><div id="po-remove-link" class="po-tool-button other" title="删除" title-pos="top"><span class="po-diagraming-icons text_content">&#xe7b7;</span></div></div></div><div class="link-input-box"><span>附件</span><div style="display:flex;flex:1;align-items: center;height:32px"><input id="po-file-address"  class="po-input-other po-link-address disabled"/><a id="po-upload-file" class="po-button second upload-file-btn"><span class="text">上传附件</span></a></div></div><div class="link-input-box"><span>链接</span><input  id="po-url-address" class="po-input-other po-link-address" placeholder="输入链接地址"/></div><div class="text-tip">请输入有效链接</div><div class="link-input-box" style="margin-top:12px;"><span>标题</span><input  id="po-link-title" class="po-input-other po-link-title" placeholder="输入文本（非必填）"/></div><div class="po-buttons link-btns"><div class="po-button cancel" style="margin-right:16px">取消</div><div class="po-button primary ok">确定</div></div></div>')}(0,e.default)(".po-link-address").attr("placeholder","输入链接地址");var o=(0,e.default)(".po-link-top"),n=(0,e.default)(".po-link-title"),r=(0,e.default)("#po-copy-link"),l=(0,e.default)("#po-open-link"),s=(0,e.default)(".link-input-box"),d=(0,e.default)("#po-file-address"),c=(0,e.default)("#po-url-address"),u=(0,e.default)("#po-edit-link");r.show(),s.hide(),o.hide(),s.eq(2).css("display","flex"),this.showInput=!0;var p=t.link,f=t.type;if(p&&p.type==f){o.css({display:"flex","margin-bottom":"18px"});var g=Util.restoreXss(p.title);o.find(".name").text(g||(p.value?p.value:"ProcessOn")),l.attr("href",p.value),n.val(g),u.addClass("selected"),"file"==f?(l.text("打开附件"),s.eq(0).css("display","flex"),(0,e.default)("#po-upload-file").addClass("refresh").find(".text").text("重新上传"),d.val(p.value).show()):"t_link"==f?(l.text("前往主题"),r.hide()):"url"==f&&(s.eq(1).css("display","flex"),(0,e.default)(".link-btns").css("display","flex"),l.text("打开链接"),c.val(p.value)),i&&(s.hide(),(0,e.default)(".link-btns").hide(),o.css("margin-bottom","0"),u.removeClass("selected"),this.showInput=!1)}else"file"==f?(s.eq(0).css("display","flex"),d.hide()):"url"==f&&(s.eq(1).css("display","flex"),(0,e.default)(".link-btns").css("display","flex"),""==c.val()&&c.focus());this.resetPanel(t),""==c.val()&&c.focus(),this.initEvent(t,f,a)}},initEvent:function(t,a,i){var o=this,n=(0,e.default)(".po-link-top"),r=(0,e.default)("#po-link-title"),l=(0,e.default)(".link-input-box"),s=(0,e.default)("#po-url-address"),d=(0,e.default)("#po-file-address"),c=(0,e.default)(".link-btns .cancel"),u=(0,e.default)(".link-btns .ok");(0,e.default)(document).on("mousedown.link","#po_link_box",function(e){e.stopPropagation()});var p=!1;function f(){o.showInput||(o.show=!1,o.linkTimer=setTimeout(function(){o.show||(0,e.default)("#po_link_box").remove(),clearTimeout(o.linkTimer)},500))}function g(t,a){var i=e.default.trim(t.val());""!=(i=(0,e.default)("<span/>").text(i).html())&&!Util.isUrl(i)&&i.length<200&&Util.isUrl("http://"+i)&&t.val("http://"+i),a||m()}function m(t){var o="url"==a?s.val():d.val();if(""!=(o=Util.filterXss(e.default.trim(o)))&&Util.isUrl(o)){var n=Util.filterXss(e.default.trim(r.val()));i({value:o,title:n,type:a},a),t&&(0,e.default)("#po_link_box").remove()}else s.is(":visible")&&s.parent().next(".text-tip").show()}(0,e.default)("#po_link_box").unbind("mouseenter mouseleave").hover(function(){o.show=!0},function(){f()}),o.target.off("mouseleave").on("mouseleave",function(e){f()}),(0,e.default)("#po-open-link").off("click.openlink").on("click.openlink",function(e){"t_link"!=a&&"file"!=a||(i(null,"open"),e.stopPropagation(),e.preventDefault())}),(0,e.default)("#po-copy-link").off("click.copylink").on("click.copylink",function(){if(!p){var t=(0,e.default)(this);if("file"==a)var i=d.val();else i=s.val();var o=document.createElement("input");o.setAttribute("value",i),document.body.appendChild(o),o.select(),document.execCommand("copy",!1),p=!0,t.attr("original-title","复制成功").trigger("mouseover"),setTimeout(function(){p=!1,t.attr("original-title","复制").trigger("mouseover")},1500),document.body.removeChild(o)}}),(0,e.default)("#po-edit-link").off().on("click",function(){if("t_link"!=a){var r=(0,e.default)(this);o.showInput=!0,r.hasClass("selected")?(l.hide(),(0,e.default)(".link-btns").hide(),n.css("margin-bottom","0"),r.removeClass("selected")):(n.css("margin-bottom","18px"),r.addClass("selected"),l.eq(2).css("display","flex"),"file"==a?l.eq(0).css("display","flex"):(l.eq(1).css("display","flex"),(0,e.default)(".link-btns").css("display","flex"))),o.resetPanel(t)}else i(null,"edit")}),(0,e.default)("#po-remove-link").off().on("click",function(){(0,e.default)("#po_link_box,.po-hover-tip").remove(),i(null,"remove")}),r.off().on("blur",function(){var t=Util.filterXss(e.default.trim((0,e.default)(this).val()));""!=t&&t.length<50&&m()}).on("keyup",function(t){t.stopPropagation();var a=(0,e.default)(this);if(13==t.keyCode){var i=Util.filterXss(e.default.trim(a.val()));""!=i&&i.length<50&&m()}}).on("keydown",function(e){e.stopPropagation()}),(0,e.default)(".po-link-address").off().on("blur",function(){g((0,e.default)(this),!0)}).on("keyup",function(t){var a=(0,e.default)(this);a.parent().next(".text-tip").hide(),13==t.keyCode&&g(a)}).on("keydown",function(t){if("9"==t.keyCode){var a=(0,e.default)(this);a.parent().next(".text-tip").hide(),g(a,!0)}t.stopPropagation()}),(0,e.default)("#po-upload-file").off().on("click",function(){o.uploadFile(i)}),c.off().on("mousedown",function(t){(0,e.default)("#po_link_box").remove()}),u.off().on("mousedown",function(){var t=(0,e.default)("#po-url-address"),a=e.default.trim(t.val());""!=(a=(0,e.default)("<span/>").text(a).html())&&!Util.isUrl(a)&&a.length<200&&(Util.isUrl("http://"+a)?t.val("http://"+a):t.parent().next(".text-tip").show()),m(!0)})},uploadFile:function(t){function a(e,t,a,i){var o=document.createElement(e);return o.setAttribute("name",a),o.setAttribute("type",t),null!=i&&o.setAttribute("value",i),o}(0,e.default)("#upload_form").remove();var i=document.createElement("form"),o=a("input","file","file"),n=a("input","hidden","chartId",chartId),r=a("input","hidden","topicId");i.setAttribute("id","upload_form"),i.setAttribute("action",poApi.uploadAtta),i.setAttribute("method","post"),i.setAttribute("enctype","multipart/form-data"),i.appendChild(o),i.appendChild(n),i.appendChild(r),document.body.appendChild(i),(0,e.default)(o).off("change").on("change",function(a){this.files[0].type;if(""!=e.default.trim((0,e.default)(this).val())){try{var n=0;n=o.files[0].size,n/=1024,n/=1024}catch(a){n=100}if(n>5)e.default.toast({type:"success",text:"上传文件大小不能超过5M"});else{e.default.loading({text:"正在上传中"});var r=new FormData(i);poAjax({contentType:!1,processData:!1,data:r,success:function(a){if(e.default.loading("close"),""!=a.file_url){var n={value:a.file_url,title:a.file_name,type:"file"};e.default.toast({type:"success",text:"附件上传成功"}),(0,e.default)("#po-file-address").show().val(a.file_url),(0,e.default)("#po-link-title").val(a.file_name),(0,e.default)("#po-upload-file").addClass("refresh").find(".text").text("重新上传"),(0,e.default)(o).val(""),t(n,"file"),(0,e.default)(i).remove()}},error:function(t){e.default.loading("close"),(0,e.default)(i).remove()}},"uploadAtta")}}}),(0,e.default)(o).trigger("click")},resetPanel:function(t){e.default.fn.showPanel(e.default.extend({target:t.target,panel:(0,e.default)("#po_link_box"),position:"top"},t))}},equation:{equationInit:function(t,a){var i;(0,e.default)(".pop-editor").hide();var o,n,r,l=(0,e.default)(".eq-editor");if(0==l.length&&(l=(0,e.default)('<div class="eq-editor"><div><div class="po-input-other notranslate" contenteditable="true"></div><div class="eq-tip">*方程式错误</div></div><div class="eg-title"><span>上/下标</span><span>根号/分号</span><span>积分/极限/求和/乘积</span><div class="more">更多<span  class="po-diagraming-icons">&#xe6c7;</span></div></div><div class="eg-con"></div></div>').appendTo("body"),l=(0,e.default)(".eq-editor")),(0,e.default)(".eg-con").html(""),(0,e.default)(".eg-title span").removeClass("on"),document.selection)o=document.selection.createRange(),n=document.getSelection().toString().replace(/\n/g,""),r=o.htmlText;else{var s=window.getSelection();o=s.getRangeAt(0),n=s.toString().replace(/\n/g,"");var d=document.createElement("div");d.appendChild(o.cloneContents()),r=d.innerHTML}var c=document.createElement("div");c.innerHTML=r;var u=(0,e.default)(c).find(".equation-text");u.length>0&&!a&&(a=t.find(".equation-text[data-index="+u.eq(0).data("index")+"]"));var p=(0,e.default)(".notranslate");if(a)p.text((0,e.default)(a[0].outerHTML).data("equation"));else{var f=document.createElement("span");f.className="eq-l";var g=document.createElement("span");g.className="eq-r",o.insertNode(f),o.collapse(!1),o.insertNode(g),(i=t.clone(!0)).find(".equation-temp").remove(),o.setStart(f,0),o.setEnd(g,0),t.find(".eq-l,.eq-r").remove(),p.text(n);var m=(0,e.default)('<span class="equation-text" contenteditable="false"><span></span><span>&#65279;</span></span>')[0];m.childNodes[0].appendChild(o.cloneContents());var h=(0,e.default)(o.startContainer).parents(".equation-text");h.length>0&&o.setStartAfter(h.get(0));var v=o.startContainer,x=o.endContainer;o.deleteContents(),o.insertNode(m),s.removeAllRanges(),function e(t){if(v!=t){if("textarea_topic"==t.className){var a=o.extractContents();return void v.append(a)}e(t.parentNode)}}(x),function e(t){if(!t.innerHTML){var a=t.parentNode;t.remove(),e(a)}}(x),a=(0,e.default)(m)}t.find(".equation-text").each(function(t,a){(0,e.default)(a).attr("data-index",t)}),i||(i=t.clone(!0)),a.addClass("cur");var b=0,w=0;try{var y=t[0].getBoundingClientRect();b=y.width,w=y.height}catch(O){if(window.location.href.indexOf("mindmap/")>=0)var k=mind.operation.zoomVal/100;else k=1;b=t.outerWidth()*k,w=t.outerHeight()*k}var q=(0,e.default)(window).width(),_=(0,e.default)(window).height(),C=t.offset(),I=C.top+w+8,P=C.left-160+b/2;I>_-l.outerHeight()-68&&(I=_-l.outerHeight()-68),P>q-320?P=q-320:P<8&&(P=8),l.css({left:P,top:I}).show(),(0,e.default)("body").append("<div class='eq-shade' style='position:fixed;top:0;left:0;width:100%;height:100%;z-index:1'></div>"),p.focus(),setTimeout(function(){p.selectText()}),insert.equation.equationInitEvent.call(this,t,i,a)},equationInitEvent:function(t,a,i){var o=this,n=!1,r=!1,l=!1,s=(0,e.default)(".eq-editor"),d=(0,e.default)(".notranslate"),c=d.text();function u(o){var n,r;(r=window.getSelection?(n=window.getSelection()).getRangeAt(0):(n=document.selection).createRange()).deleteContents(),r=r.cloneRange();var l,s=(0,e.default)(i[0].outerHTML).data("index");t.hasClass("invalid")&&(a.find(".equation-temp").remove(),t.html(a.html()),l=o&&37==o.keyCode?t.find(".eq-l").get(0):t.find(".eq-r").get(0)),l||(l=t.find(".equation-text[data-index="+s+"]").get(0)),t.focus(),o&&37==o.keyCode?r.setEndBefore(l):r.setStartAfter(l),r.collapse(!0),n.removeAllRanges(),n.addRange(r),f(o)}function p(){try{var a=d.text(),n=katex.renderToString(a);(0,e.default)(".eq-tip").hide(),i.attr("data-equation",a),t.removeClass("invalid")}catch(r){n="无效方程式";(0,e.default)(".eq-tip").show(),t.addClass("invalid")}i.children(":first").html(n),t.trigger("keyup"),window.location.href.indexOf("mindmap/")>=0&&o.operation.writingMode.call(o,i)}function f(a){""==(0,e.default)(i[0].outerHTML).data("equation")&&(i.remove(),t.find(".equation-text").each(function(t,a){(0,e.default)(a).attr("data-index",t)})),s.hide(),(0,e.default)(".eq-shade").remove(),i.removeClass("cur"),t.find(".eq-l,.eq-r").remove(),a||(n||t.addClass("invalid"),t.trigger("blur"))}(0,e.default)(document).off("mousedown.equation").on("mousedown.equation",function(){n=!0,f()}),(0,e.default)(document).on("mousedown.equation",".equation-help",function(e){e.stopPropagation()}),s.off().on("keydown",function(e){e.stopPropagation()}).on("mousedown",function(e){e.stopPropagation()}).on("click",".eg-title>span, .eg-title .more, .eg-con",function(t){var a=["x^{y^z_w}=(1+{\\rm e}^x)^{-2xy^w}","x=\\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}","x = (-b +- sqrt(b^2-4ac))/(2a)"],i=t.target,o=i.className?i.className:i.parentNode.className;if("more"==o||"more"==i.parentNode.className)0==(0,e.default)(".equation-help").length&&insert.equation.loadEquation(),"mind"==fileType?mindUI.showCorner("equation"):Dock.show("equation");else if("eg-con"==o)d.html(a[(0,e.default)(".eg-title .on").index()]).trigger("input"),d.textMoveToEnd();else{var n=(0,e.default)(this);n.addClass("on").siblings().removeClass("on");var r=a[n.index()],l=katex.renderToString(r);(0,e.default)(".eg-con").html('<span style="align-self: flex-start;color:#999">例：</span><div style="margin:0 auto 10px;pointer-events:none">'+l+"</div>")}t.stopPropagation()}),d.off().on("mousedown",function(e){e.stopPropagation()}).on("keydown",function(a){if((0,e.default)(".equation-tip-dlg").is(":visible"))return!1;if(13==a.keyCode)return t.hasClass("invalid")?void a.preventDefault():(n=!0,void f());if(39==a.keyCode||37==a.keyCode){var i=window.getSelection?window.getSelection():document.selection;(i.anchorOffset==d.text().length&&39==a.keyCode||0==i.anchorOffset&&37==a.keyCode)&&(r?setTimeout(function(){u(a),r=!0},10):setTimeout(function(){r||(u(a),r=!0)},300))}r=!1}).on("keyup",function(e){r=!0}).on("input",function(){if(p(),i.outerWidth()>900&&!l){(0,e.default)(".equation-tip-dlg").dialog(),(0,e.default)(".po-hover-tip").hide();var a=900/i.outerWidth();c=d.text(),(0,e.default)("#equation-ok").off("click").on("click",function(){var i=(0,e.default)('<span style="position: fixed;z-index:-9999;top:-9999px;left:-9999px"></span>').appendTo("body");(0,e.default)(".equation-tip-dlg").dialog("close"),function e(t){try{var a=katex.renderToString(t);if(i.html(a),i.outerWidth()>900)return t=t.substr(0,t.length-1),void e(t);d.text(t),p()}catch(o){t=t.substr(0,t.length-1),e(t)}i.remove()}(c.substring(0,parseFloat(c.length*a)));var n=c.substring(d.text().length,d.text().length+500);u(!0),insert.equation.equationInit.call(o,t),d.text(n).trigger("input")}),(0,e.default)("#equation-cancel").off("click").on("click",function(){(0,e.default)(".equation-tip-dlg").dialog("close"),l=!0})}}).on("paste",function(e){e.preventDefault();var t=null;if(t=window.clipboardData&&clipboardData.setData?window.clipboardData.getData("text"):(e.originalEvent||e).clipboardData.getData("text/plain"),document.body.createTextRange){if(document.selection)textRange=document.selection.createRange();else if(window.getSelection){sel=window.getSelection();var a=sel.getRangeAt(0),i=document.createElement("span");i.innerHTML="&#FEFF;",a.deleteContents(),a.insertNode(i),textRange=document.body.createTextRange(),textRange.moveToElementText(i),i.parentNode.removeChild(i)}textRange.text=t,textRange.collapse(!1),textRange.select()}else document.execCommand("insertText",!1,t)}),p()},renderEquation:function(t){(0,e.default)(t).find(".equation-text").each(function(){var t=(0,e.default)(this),a=t.data("equation")?t.data("equation").toString():"",i=katex.renderToString(a);t.children(":first").html(i)})},loadEquation:function(){var t=(0,e.default)("body");(0,e.default)(".mind-corner.right").length>0&&(t=(0,e.default)(".mind-corner.right")),(0,e.default)("#po-flow-dock-layout-equation").length>0&&(t=(0,e.default)("#po-flow-dock-layout-equation")),t.append('<div tit="equation" class="equation-help"><div class="title">LaTeX常用方程式</div><div class="po-tool-select-button-large eq-select"><span class="text-content">上标、下标及积分等</span></div><div id="eq-container"><div style="padding:0 16px"></div></div></div>');var a={"上标、下标及积分等":["a^2","a_2","a^{2+2}","a_{i,j}","{}_1^2\\!X_3^4","\\overset{\\frown} {AB}","\\overline{hij}","\\underline{klm}","\\overbrace{1+2+\\cdots+100}","\\begin{matrix} 5050 \\\\ \\overbrace{ 1+2+\\cdots+100 }\\end{matrix}","\\underbrace{a+b+\\cdots+z}","\\sum_{k=1}^N k^2","\\begin{matrix} \\sum_{k=1}^N k^2 \\end{matrix}","\\prod_{i=1}^N x_i","\\begin{matrix} \\prod_{i=1}^N x_i \\end{matrix}","\\coprod_{i=1}^N x_i","\\begin{matrix} \\coprod_{i=1}^N x_i \\end{matrix}","\\lim_{n \\to \\infty}x_n","\\begin{matrix} \\ lim_{n \\to \\infty}x_n \\end{matrix}","\\int_{-N}^{N} e^x\\, \\mathrm{d}x","\\begin{matrix} \\int_{_N}^{N} e^x\\, \\mathrm{d}x \\end{matrix}","\\iint_{D}^{W} \\, \\mathrm{d}x\\,\\mathrm{d}y","\\iiint_{E}^{V} \\,\\mathrm{d}x\\,\\mathrm{d}y,\\mathrm{d}z","\\oint_{C} x^3\\, \\mathrm{d}x + 4y^2\\, \\mathrm{d}y","\\bigcap_1^{n} p","\\bigcup_1^{k} p"],"括号和分隔符":["\\left(\\frac{a}{b} \\right)","\\left[\\frac{a}{b} \\right]","\\left\\{\\frac{a}{b} \\right\\}","\\left \\langle \\frac{a}{b} \\right \\rangle","\\left|\\frac{a}{b} \\right|","\\left \\lceil \\frac{c}{d} \\right \\rceil","\\left / \\frac{a}{b} \\right \\backslash","\\left \\Uparrow \\frac{a}{b} \\right \\Downarrow","\\left \\updownarrow \\frac{a}{b} \\right \\Updownarrow","\\left [ 0,1 \\right ) \\left \\langle \\psi \\right |","\\left \\{ \\frac{a}{b} \\right.","\\left . \\frac{a}{b} \\right \\}","\\langle","\\rangle","\\lceil","\\rceil","\\lfloor","\\rfloor","\\lbrace","\\rbrace","\\lvert","\\rvert"],"根号":["\\sqrt{3}","\\sqrt[n]{3}"],"函数":["\\sin\\theta","\\cos\\theta","\\tan\\theta","\\arcsin\\frac{L}{r}","\\arccos\\frac{T}{r}","\\arctan\\frac{L}{T}","\\sinh g","\\cosh h","\\tanh i","\\coth j","\\operatorname{sh}j","\\operatorname{ch}h","\\operatorname{th}i","\\operatorname{argsh}k","\\operatorname{argch}l","\\operatorname{argth}m","\\limsup S","\\liminf I","\\max H","\\min L","\\inf s","\\sup t","\\exp\\!t","\\ln X","\\lg X","\\log X","\\log_\\alpha X","\\ker x","\\deg x","\\gcd(T,U,V,W,X)","\\Pr x","\\det x","\\hom x","\\arg x","\\dim x","\\lim_{t\\to n}T"],"微分及导数":["\\nabla\\psi","\\partial x","\\mathrm{d}x","\\dot x","\\ddot y","X^\\prime","\\backprime","f^{(3)}"],"关系运算符":["\\pm","\\times","\\div","\\mid","\\nmid","\\cdot","\\circ","\\ast","\\bigodot","\\bigotimes","\\bigoplus","\\leq","\\geq","\\leqq","\\geqq","=","\\neq","\\approx","\\equiv","\\not\\equiv","\\sum","\\prod","\\coprod","\\backslash","\\sim","\\backsim","\\simeq","\\cong","\\dot=","\\ggg","\\gg",">","<","\\ll","\\lll","\\propto"],"集合与逻辑符号":["\\emptyset","\\varnothing","\\in","\\not\\in","\\subset","\\supset","\\subseteq","\\supseteq","\\sqsubseteq","\\sqsupseteq","\\cap","\\cup","\\bigcup","\\bigcap","\\sqcap","\\sqcup","\\uplus","\\biguplus","\\bigsqcup","\\top","\\bot","\\complement","\\vee","\\wedge","\\bigvee","\\bigwedge","\\forall","\\exists","\\not\\subset","\\not=","\\not<","\\not>","\\because","\\therefore","\\neg","\\bar{q} \\to p","\\setminus","\\smallsetminus"],"几何符号":["\\Diamond","\\Box","\\triangle","\\perp","\\angle\\Alpha\\Beta\\Gamma","60^\\circ"],"戴帽符号":["\\vec{c}","\\overleftarrow{ab}","\\overrightarrow{cd}","\\overleftrightarrow{ab}","\\widehat{efg}","\\overset{\\frown} {AB}","\\hat{xyz}","\\tilde{xy}","\\bar{y}","\\widetilde{xyz}","\\acute{y}","\\breve{y}","\\check{y}","\\grave{y}"],"箭头符号":["\\to","\\mapsto","\\underrightarrow{1^\\circ/min}","\\implies","\\impliedby","\\iff","\\uparrow","\\downarrow","\\Uparrow","\\Downarrow","\\leftarrow","\\rightarrow","\\leftrightarrow","\\Leftarrow","\\Rightarrow","\\Leftrightarrow","\\longleftarrow","\\longrightarrow","\\longleftrightarrow","\\Longleftarrow","\\Longrightarrow","\\Longleftrightarrow"],"特殊符号":["\\eth","\\%","\\dagger","\\ddagger","\\star","*","\\ldots","\\smile","\\frown","\\wr"],"分数、矩阵和多行列式":["\\frac{2}{4}=0.5","{2 \\over 3}","{{a+b} \\over {a-b}}","\\tfrac{2}{4} = 0.5","\\cfrac{2}{c + \\cfrac{2}{d + \\cfrac{2}{4}}} = a","\\begin{matrix}x & y \\\\z & v\\end{matrix}","\\begin{vmatrix}x & y \\\\z & v\\end{vmatrix}","\\begin{Vmatrix}x & y \\\\z & v\\end{Vmatrix}","\\begin{bmatrix}0& \\cdots & 0\\\\\\vdots & \\ddots & \\vdots \\\\0& \\cdots & 0\\end{bmatrix}","\\begin{Bmatrix}x & y \\\\z & v\\end{Bmatrix}","\\begin{pmatrix}x & y \\\\z & v\\end{pmatrix}","\\begin{cases}3x + 5y +  z \\\\7x - 2y + 4z \\\\-6x + 3y + 2z\\end{cases}","\\begin{array}{|c|c||c|} a & b & S \\\\\\hline0&0&1\\\\0&1&1\\\\1&0&1\\\\1&1&0\\\\\\end{array}"],"希腊字母":["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\zeta","\\eta","\\theta","\\iota","\\kappa","\\lambda","\\mu","\\nu","\\xi","o","\\pi","\\rho","\\sigma","\\tau","\\upsilon","\\phi","\\chi","\\psi","\\omega"]};for(var i in 0==(0,e.default)("#eq-select-list").length&&(0,e.default)("body").append(' <ul id="eq-select-list" class="po-menu auto-target"></ul>'),a){(0,e.default)("#eq-select-list").append('<li class="po-menu-item" ac="'+i+'"><div class="po-menu-item-box"> <span class="text">'+i+"</span></div></li>");for(var o="<h3>"+i+'</h3><div class="table"><div class="title"><span>效果</span><span>语法</span></div>',n=0;n<a[i].length;n++)o+='<div title="点击复制" title-pos="top"><span>'+katex.renderToString(a[i][n])+'</span><span class="copy"><span>'+a[i][n]+"</span></span></div>";o+="</div>",(0,e.default)("#eq-container>div").append(o)}(0,e.default)(".eq-select").button({onClick:function(t,a){(0,e.default)("#eq-select-list").dropdown({target:a,isSelect:!0,position:"left",onSelect:function(t){(0,e.default)(".eq-input").val(t.text());var a=document.getElementById("eq-container").getElementsByTagName("h3")[t.index()].offsetTop-100;(0,e.default)("#eq-container").scrollTop(a)}})}}),(0,e.default)(".table>div:not(.title)").off().on("mousedown",function(e){e.stopPropagation()}).on("click",function(t){t.stopPropagation(),(0,e.default)(".table .tip").remove();var a=(0,e.default)(this),i=document.createElement("input");i.setAttribute("value",a.find(".copy").text()),document.body.appendChild(i),i.select();try{if(document.execCommand("copy",!1,null)){a.attr("original-title","复制成功").trigger("mouseover");var o=(0,e.default)(".notranslate");if((0,e.default)(".eq-editor").is(":visible")){var n=o.html()+a.find(".copy").text();o.html(n).trigger("input"),o.textMoveToEnd()}a.attr("original-title","点击复制")}}catch(t){}document.body.removeChild(i)}),(0,e.default)("body").off("click.eq").on("click.eq",function(){(0,e.default)(".eq-select").removeClass("on")})}},share:{init:function(e){e&&1==e.isHide||insert.iframeDlg(r(r({width:"680px",height:"533px",type:"share",fdata:JSON.stringify(chartObj)},e),{},{callback:function(e){}}))},dialogPre:function(){insert.iframeDlgPre({width:"680px",height:"533px",type:"share",fdata:JSON.stringify(chartObj),callback:function(e){}})}},copyAndMove:{init:function(e){e&&1==e.isHide||insert.iframeDlg(r(r({width:"556px",height:"450px",type:"copy",fdata:JSON.stringify(chartObj)},e),{},{callback:function(e){}}))}},publish:{init:function(e){userObj&&!userObj.phone?"undefined"==typeof phoneBind?bigPipe.render({js:[staticBasePath+"/assets/js/users/phonebind.js"],css:[staticBasePath+"/assets/css/users/phonebind.css"]},function(){phoneBind.init(function(e){userObj.phone=e,insert.iframeDlg({width:"742px",height:"530px",type:"pubpo",fdata:JSON.stringify(chartObj),callback:function(e){}})})}):phoneBind.init(function(e){userObj.phone=e,insert.iframeDlg({width:"742px",height:"530px",type:"pubpo",fdata:JSON.stringify(chartObj),callback:function(e){}})}):insert.iframeDlg({width:"742px",height:"600px",type:"pubpo",fdata:JSON.stringify(chartObj),callback:function(e){}})}},pay:{init:function(t){var a="616px",i=navigator.userAgent.toLowerCase();/electron/gi.test(i)&&(window.parent.postMessage({type:"getAppId"},"*"),window.addEventListener("message",function(e){if("send-appid"===e.data.type){var t=e.data.APP_ID;a="6b0d49b3ca3544178660f33adf6a0b60"==t?"540px":"616px"}}));var o=chartObj.category.startsWith("outline")?"思维笔记编辑器":chartObj.category.startsWith("mind")?"思维导图编辑器":"流程图编辑器",n=e.default.extend({width:"840px",height:a,type:"dlgPay",title:"支付",pointsPage:o,pointsSource:"头像_升级",callback:function(e){}},t);chartObj&&chartObj.orgId&&e.default.extend(n,{pageStatus:"index",height:"602px",payTitle:n.title,orgInfo:{orgId:chartObj.orgId},type:"dlgOrgPay",url:"/org/dlgapi"}),insert.iframeDlg(n)}},feedback:{init:function(t){var a=e.default.extend({width:"600px",height:"471px",type:"dlgFeedback",title:"感谢您的反馈",callback:function(e){}},t);insert.iframeDlg(a)}},watermark:{option:{},maxNum:9,init:function(t){var a=this;a.option=t;var i='<div class="po-show-watermark-con"><div class="po-checkbox-group"><div id="po-show-watermark" class="po-diagraming-icons po-checkbox"></div> <span class="po-lable">显示水印</span><img class="po-vip-icon" src="'+staticBasePath+'/assets/images/vip-tip.svg" /></div></div><div class="po-watermark-input-container"><input id="po-add-watermark-input" class="po-input-other-small dock-add-watermark-input" type="text" placeholder="不超过15个字，回车保存"><span class="po-diagraming-icons po-clear-input">&#xe6c8;</span><div class="error-tip"> *水印最多支持15个字</div></div><div class="po-watermark-list-title">我的水印</div><ul class="po-watermark-list-con"></ul>';t.target=t.target||(0,e.default)(".po-watermark-con"),t.target.html(i),a.getWatermarks(t.change),(0,e.default)("#po-show-watermark").parent(".po-checkbox-group").off().on("click",function(i){i.stopPropagation(),(0,e.default)("#po-show-watermark").checkbox("isChecked")?(a.setVal({showWatermark:!1}),t.change({showWatermark:!1})):a.watermarks.indexOf(t.watermark)<0?(t.change({showWatermark:!0,watermark:"ProcessOn@"+a.option.userName}),a.setVal({showWatermark:!0,watermark:"ProcessOn@"+a.option.userName})):(t.change({showWatermark:!0}),a.setVal({showWatermark:!0}))}),(0,e.default)("#po-add-watermark-input").off().on("keydown",function(t){t.stopPropagation(),"13"==t.keyCode&&(0,e.default)(this).blur()}).on("blur",function(i){a.addWatermark(t.change),(0,e.default)(this).next(".po-clear-input").hide()}).on("input",function(t){var a=(0,e.default)(this).val(),i=(0,e.default)(this).next(".po-clear-input");a.length>0?i.show():i.hide(),e.default.trim(a).length>15?((0,e.default)(this).addClass("error"),(0,e.default)(this).nextAll(".error-tip").show()):((0,e.default)(this).removeClass("error"),(0,e.default)(this).nextAll(".error-tip").hide())}),(0,e.default)("#po-add-watermark-input").next(".po-clear-input").off().on("mousedown",function(t){t.stopPropagation(),(0,e.default)("#po-add-watermark-input").val(""),(0,e.default)(this).hide()}),a.initEvent(t.change)},isSend:!1,addWatermark:function(t){var a=this,i=e.default.trim((0,e.default)("#po-add-watermark-input").val());""==i||i.length>16||(a.watermarks.length>a.maxNum+1?e.default.toast({type:"error",text:"最多可添加10条自定义水印，如需添加新水印请先删除多余水印"}):"mind"!=fileType||mind.events.push("testVip","insert_watermark")?["designer","flow"].indexOf(fileType)>-1&&!Designer.events.push("testVip","insert_watermark")?Designer.events.push("vip-limit","insert_watermark"):a.watermarks.indexOf(i)>-1?e.default.toast({type:"error",text:"该水印已经存在"}):a.isSend||(a.isSend=!0,poAjax({data:{watermark:i},success:function(o){a.isSend=!1,(0,e.default)("#po-add-watermark-input").val(""),a.appendWatermark(i),a.setVal({showWatermark:!0,watermark:i}),t({showWatermark:!0,watermark:i})},error:function(t){832==t.code?e.default.toast({type:"error",text:"最多可添加10条自定义水印，如需添加新水印请先删除多余水印"}):618==t.code&&a.events.push("vip-limit","insert_watermark")}},"addWaterMark")):mind.events.push("vip-limit","insert_watermark"))},watermarks:[],getWatermarks:function(t,a){var i=this;this.watermarks.push("ProcessOn@"+i.option.userName);var o=(0,e.default)(".po-watermark-list-con"),n='<li class="po-menu-item"><span class="text">ProcessOn@'+i.option.userName+'</span><span class="po-diagraming-icons selected-icon">&#xe6ba;</span></li>';o.html(n),poAjax({type:"GET",success:function(e){var t=e.watermarks;if(0!=t.length)for(var a=0,o=t.length;a<o;a++)i.appendWatermark(t[a])}},"getWaterMark")},appendWatermark:function(t){this.watermarks.push(t),(0,e.default)(".po-watermark-list-con li").eq(0).after('<li class="po-menu-item"><span class="text">'+t+'</span><span class="po-diagraming-icons selected-icon">&#xe6ba;</span><span class="po-diagraming-icons delete">&#xe7b7;</span></li>')},initEvent:function(t){var a=this;(0,e.default)(".po-watermark-list-con").off("click.delete").on("click.delete",".delete",function(t){t.stopPropagation();var i=(0,e.default)(this),o=(0,e.default)(this).siblings(".text").text();poAjax({data:{watermark:o},success:function(e){i.parents(".po-menu-item").remove();var t=a.watermarks.indexOf(o);t>-1&&a.watermarks.splice(t,1)}},"delWaterMark")}),(0,e.default)(".po-watermark-list-con").off("click.select").on("click.select",".po-menu-item",function(a){if(vipState.test("insert_watermark")){(0,e.default)(this).addClass("selected").siblings(".selected").removeClass("selected");var i=(0,e.default)(this).find(".text").text();t({watermark:i})}else insert.pay.init({title:"升级会员添加自定义水印",pointsSource:"添加水印"})})},setVal:function(t){t.showWatermark?((0,e.default)("#po-show-watermark").checkbox("check"),(0,e.default)(".po-watermark-list-con").button("enable")):((0,e.default)("#po-show-watermark").checkbox("uncheck"),(0,e.default)(".po-watermark-list-con").button("disable")),t.watermark&&((0,e.default)("#po-watermark-select .text-content").text(t.watermark),(0,e.default)(".po-watermark-list-con li").each(function(a,i){(0,e.default)(i).find(".text").text()!=t.watermark||(0,e.default)(i).addClass("selected").siblings(".selected").removeClass("selected")}))}},iframeDlgPre:function(t){var a=window.location.origin,i=(t=e.default.extend({url:a+"/dlgapi",width:"770px",height:"537px",type:"dlgPay",title:"支付"},t),(0,e.default)("#po-dialog-iframe-"+t.type+" iframe"));0==i.length&&(i=(0,e.default)('<div id="po-dialog-iframe-'+t.type+'" class="po-dialog po-dialog-iframe"><div class="po-dialog-header" style="position: absolute;width: calc(100% - 42px);height: 20px"></div><iframe></iframe></div>').appendTo("body").find("iframe")).width(t.width).height(t.height).attr("src",t.url)},iframeDlgPms:{},prevMsg:"",iframeDlg:function(a){var i=this,o=null;a.fdata&&(o=JSON.parse(a.fdata).orgId);var n=window.location.origin;t.isLocal&&(n+="/vue");var r="?";(a=e.default.extend({url:n+(o?"/org":"")+"/dlgapi",width:"770px",height:"537px",type:"dlgPay",title:"支付"},a)).type&&(r=r+"type="+a.type,"dlgPay"==a.type&&(r+="&pointspage="+a.pointsPage,r+="&pointssource="+a.pointsSource)),a.title&&(r=r+"&title="+a.title),a.fdata&&(r=r+"&fdata="+encodeURIComponent(a.fdata)),a.pattern&&(r+="&pattern="+a.pattern),a.pageStatus&&(r=r+"&pageStatus="+a.pageStatus),a.payTitle&&(r=r+"&payTitle="+a.payTitle),a.orgInfo&&(r=r+"&orgInfo="+JSON.stringify(a.orgInfo)),(0,e.default)("#po-dialog-iframe-"+a.type).remove();var l=(0,e.default)("#po-dialog-iframe-"+a.type+" iframe");if(0==l.length){var s=(0,e.default)('<div id="po-dialog-iframe-'+a.type+'" class="po-dialog po-dialog-iframe"><div class="po-iframe-loading-wrap"><img src="'+staticBasePath+'/assets/images/iframe_loading.gif"></div><div class="po-dialog-header" style="position: absolute;width: calc(100% - 42px);height: 20px"></div><iframe></iframe></div>').appendTo("body");(l=s.find("iframe")).width(a.width).height(a.height).attr("src",a.url+r)}if(this.iframeDlgPms[a.type]||(this.iframeDlgPms[a.type]={}),this.iframeDlgPms[a.type].messengerIframe||(this.iframeDlgPms[a.type].messengerIframe=new Messenger("edit","v5",[{target:l[0].contentWindow,targetName:"filelist"},{target:window,targetName:"edit"}],function(t){var o=JSON.parse(t||"{}");if(i.prevMsg!==t||"resize"===o.instructs){if(i.prevMsg=t,"dlgShare"==o.type||"share"==o.type)if("close"==o.instructs){insert.publish.init();var n=o.width,r=o.height;(0,e.default)("#po-dialog-iframe-"+a.type).css({width:n,height:r}),l.width(n).height(r)}else"orgClose"==o.instructs&&window.location.reload();else if("dlgPubpo"==o.type)"close"==o.instructs&&(0,e.default)("#po-dialog-iframe-pubpo").dialog("close");else if("dlgPay"==o.type)"close"==o.instructs?window.location.reload():"paySuccess"==o.instructs&&memberObj&&(memberObj.member=!0);else if("dlgFeedback"==o.type)"close"==o.instructs&&(0,e.default)("#po-dialog-iframe-dlgFeedback").dialog("close");else if("copyAndMove"==o.optType){if(i.prevMsg=null,"close"==o.instructs)return void(0,e.default)("#po-dialog-iframe-copy").dialog("close");"move"==o.type&&(chartObj.folderId=o.targetFolderId||"root",chartObj.teamId=o.teamId||"",orgJs.toolFun&&orgJs.toolFun.getFilePath());var s="move"==o.type?"移动成功":"复制成功";e.default.toast({text:s}),(0,e.default)("#po-dialog-iframe-copy").dialog("close")}if("resize"==o.instructs){n=o.width,r=o.height;var d=o.type;"dlgShare"===d&&(d="share"),(0,e.default)("#po-dialog-iframe-"+d).css({marginTop:-r/2+"px",width:n,height:r,marginLeft:-n/2+"px"}),(0,e.default)("#po-dialog-iframe-"+d).children("iframe").width(n).height(r)}}})),!a.isHide){e.default.mask(),(0,e.default)("#po-dialog-iframe-"+a.type).width(a.width).height(parseInt(a.height)).dialog({onClose:function(){e.default.mask("close")}});var d=this;l.off("load").on("load",function(){(0,e.default)(".po-iframe-loading-wrap").fadeOut("500");var t=setTimeout(function(){(0,e.default)(".po-iframe-loading-wrap").remove(),clearTimeout(t)},500);if(void 0!==d.iframeDlgPms[a.type].messengerIframe){var i={type:a.type,instructs:"init"};d.iframeDlgPms[a.type].messengerIframe.targets.filelist.send(JSON.stringify(i))}}),"pubpo"===a.type&&(0,e.default)("#po-dialog-iframe-"+a.type).css({})}},userPhotoMenu:{tar:(0,e.default)("#po-user-photo"),menus:{user:{icon:"https://user-photo.ks3-cn-beijing.ksyuncs.com/518dcca57b584c3285cc3fa6330894a5",text:"123"},topay:{icon:"&#xe96b;",text:"升级"},file:{icon:"&#xe70f;",text:"我的文件"},logout:{icon:"&#xe94e;",text:"退出"}},init:function(t,a){this.tar=t,e.default.extend(this.menus,a),this.render()},render:function(){var t=(0,e.default)("#po-user-photo-menu");for(var a in this.menus){var i=this.menus[a];"user"==a?(t.find("[tit="+a+"]").find("img").attr("src",i.icon),t.find("[tit="+a+"]").find(".text").html(i.text)):(t.find("[tit="+a+"]").find(".po-diagraming-icons").html(i.icon),t.find("[tit="+a+"]").find(".text").html(i.text))}t.dropdown({target:this.tar,zindex:10,position:"right",onSelect:function(e){switch(e.attr("tit")){case"user":location.href="/setting";break;case"topay":insert.pay.init({title:"开通会员享全部会员权益",pointsSource:"头像_升级"});break;case"file":var t="/diagrams";chartObj.orgId&&(t="/org"),location.href=t;break;case"logout":poAjax({type:"GET",success:function(e){Util.setCookies("token","",-1),"function"==typeof randerComplete&&randerComplete(viewChart),location.href="/login"}},"logOut")}}})}},clonPay:{init:function(e){var t=this;t.errorFn=e.errorFn,t.successFn=e.successFn;var a={orderType:"clone",upgradeType:"",coupon:"",realMoney:"",orgId:"",teamusercount:"",orgName:"",chartId:e.chartId};poAjax({data:a,isErr:!0,success:function(e){200==e.code&&t.getCode(e.data.order.id)}},"payPreOrder")},getCode:function(t){var a=this;poAjax({data:{orderId:t},contentType:"application/x-www-form-urlencoded;charset=UTF-8",isErr:!0,success:function(i){var o=(0,e.default)("<div class='po-dialog' style='width: 230px; height: 260px;'><p style='text-align: center;padding-top:12px;'>微信扫一扫</p><div style='margin:30px; margin-top: 0;' id='po-payimg'></div></div>").appendTo("body");o.dialog({onClose:function(){o.remove(),clearInterval(window.checkWxTimer)}});var n=i.data;new QRCode(document.getElementById("po-payimg"),{width:170,height:170}).makeCode(n.code_url),window.checkWxTimer=setInterval(function(){a.checkWxOrder(t,checkWxTimer,o)},2e3)}},"payWechat")},checkWxOrder:function(e,t,a){var i=this;poAjax({data:{orderId:e},isErr:!0,success:function(e){var o=e.data;e.acti;o&&"SUCCESS"==o.trade_state?(clearInterval(t),a.remove(),i.successFn&&i.successFn(o)):i.errorFn&&i.errorFn(o)},error:function(e){i.errorFn&&i.errorFn(e)}},"payQuery")}}},window.PoGuide={config:{margin:{top:0,left:0,right:0,bottom:0},isClose:!0},tools:[{name:"theme",target:(0,e.default)("#shape_panel"),pos:"right",margin:{top:105,left:20},title:"图形",text:"拖动图形至画布, 开始创建流程图"},{name:"theme",target:(0,e.default)(".panel-more-box"),pos:"right",margin:{top:-50},title:"更多图形",text:"在这里选择您需要的图形"},{name:"theme",target:(0,e.default)("#po-flow-dist-align"),pos:"bottom",title:"对齐、分布",text:"分布、对齐功能在这里了~"},{name:"theme",target:(0,e.default)("#po-tool-dock-button"),pos:"bottom",margin:{left:-40},title:"样式",text:"页面样式、主题样式在这里~"}],step:0,init:function(e){this.tools=e||this.tools,this.config.isClose=!1,this.step=0,this.show(this.step)},show:function(t){if(t===this.step){var a=this,i=a.tools[t];if(void 0===i||a.config.isClose)a.close();else{if(0==(o=(0,e.default)(".po-guide")).length)var o=(0,e.default)("<div class='po-guide'></div>").appendTo("body");var n="<div class='po-guide-arrow'></div><div class='po-guide-title'><span>"+i.title+"</span>（"+(t+1)+"/"+a.tools.length+"）</div><ul class='po-guide-text'><li>"+i.text+"</li></ul><div class='po-guide-step'><div class='step'>"+(t==a.tools.length-1?"":"跳过")+"</div><div class='next-btn po-button-small'>"+(t==a.tools.length-1?"完成":"下一步")+"</div></div>";o.html(n);var r=o.children(".po-guide-arrow"),l=0,s=0,d=o.outerWidth(),c=o.outerHeight(),u=i.target.offset(),p=i.target.outerHeight(),f=i.target.outerWidth();i.margin=i.margin||{};var g=i.margin.top||a.config.margin.top,m=i.margin.left||a.config.margin.left,h=i.margin.right||a.config.margin.right,v=i.margin.bottom||a.config.margin.bottom;"right"==i.pos?(l=u.top+g,s=u.left+f+m+10,r.addClass("po-guide-arrow-right")):"top"==i.pos?(l=u.top-c-v-10,s=u.left-(d-f)/2+m,r.addClass("po-guide-arrow-top"),r.css({left:u.left-s+f/2})):"bottom"==i.pos?(l=u.top+p+g+10,s=u.left-(d-f)/2+m,r.addClass("po-guide-arrow-bottom"),r.css({left:u.left-s+f/2})):(l=u.top+g,s=u.left-d-h-10,r.addClass("po-guide-arrow-left"),r.css({top:p/2-g})),o.css({top:l,left:s}),o.find(".po-button-small").off("click.guide").on("click.guide",function(e){a.step++,a.show(a.step),i.target.off("mousedown.guide"),"siblings"==i.target.attr("tit")&&(i.target.prev().off("mousedown.guide"),i.target.next().off("mousedown.guide"))}),o.find(".step").off("click.guidestep").on("click.guidestep",function(e){a.close()}),(0,e.default)(window).off("resize.guide").on("resize.guide",function(){a.show(a.step)}),"siblings"==i.target.attr("tit")?(i.target.prev().off("mousedown.guide").on("mousedown.guide",function(t){(0,e.default)(".po-guide .next-btn").trigger("click"),i.target.off("mousedown.guide"),i.target.prev().off("mousedown.guide"),i.target.next().off("mousedown.guide")}),i.target.next().off("mousedown.guide").on("mousedown.guide",function(t){(0,e.default)(".po-guide .next-btn").trigger("click"),i.target.off("mousedown.guide"),i.target.prev().off("mousedown.guide"),i.target.next().off("mousedown.guide")}),i.target.off("mousedown.guide").on("mousedown.guide",function(t){(0,e.default)(".po-guide .next-btn").trigger("click"),i.target.off("mousedown.guide"),i.target.prev().off("mousedown.guide"),i.target.next().off("mousedown.guide")})):i.target.off("mousedown.guide").on("mousedown.guide",function(t){"themes"==i.target.attr("tit")?setTimeout(function(){(0,e.default)(".po-guide .next-btn").trigger("click")},400):(0,e.default)(".po-guide .next-btn").trigger("click"),i.target.off("mousedown.guide")})}}},close:function(){(0,e.default)(".po-guide").remove(),this.config.isClose=!0}},window.searchGuide={config:{margin:{top:0,left:0,right:0,bottom:0},isClose:!1},tool:{},init:function(t){var a=this;if(a.tool=t,this.config.isClose=!1,t.expand&&(0,e.default)(".mind-header").hasClass("fold"))return(0,e.default)(".mind-header, .mind-corner").removeClass("fold"),(0,e.default)(".mind-toolbar [tit=expand]").attr("title","折叠").find(".po-diagraming-icons").html("&#xe9b2;"),void setTimeout(function(){a.show(t)},300);a.show(t)},show:function(t){var a=this;if(void 0===t||a.config.isClose)a.close();else{var i=t.trigger_btn;if(i&&((0,e.default)(i).trigger("mouseenter"),(0,e.default)(i).trigger("click")),0==(o=(0,e.default)(".po-guide")).length)var o=(0,e.default)("<div class='po-guide'></div>").appendTo("body");var n="<div class='po-guide-quot'><div class='wave_wrapper'><span class='wave_scale'></span><span class='wave_scale delay'> </span></div></div><div class='po-guide-title'>"+t.title+"</div><div class='po-guide-text'>"+t.text+"</div><div class='po-guide-step' style='justify-content:right'><div class='next-btn po-button-small' >我知道了</div></div>";o.html(n);var r=o.children(".po-guide-quot"),l=t.target;if(l.is(":visible")||(l=(0,e.default)(".mind-toolbar [tit=more]").is(":visible")?(0,e.default)(".mind-toolbar [tit=more]"):(0,e.default)(".mind-toolbar [tit=insert]")).is(":visible")){var s=0,d=0,c=o.outerWidth(),u=o.outerHeight(),p=l.offset(),f=l.outerHeight(),g=l.outerWidth();t.margin=t.margin||{};var m=t.margin.top||a.config.margin.top,h=t.margin.left||a.config.margin.left,v=t.margin.right||a.config.margin.right,x=t.margin.bottom||a.config.margin.bottom;"right"==t.pos?(s=p.top+m,d=p.left+g+h+38,r.addClass("po-guide-quot-right"),r.css({top:f/2-m})):"top"==t.pos?(s=p.top-u-x-38,d=p.left-(c-g)/2+h,r.addClass("po-guide-quot-top"),r.css({left:p.left-d+g/2})):"bottom"==t.pos?(s=p.top+f+m+38,d=p.left-(c-g)/2+h,r.addClass("po-guide-quot-bottom"),r.css({left:p.left-d+g/2})):(s=p.top+m,d=p.left-c-v-38,r.addClass("po-guide-quot-left"),r.css({top:f/2-m})),o.css({top:s,left:d}),o.find(".po-button-small").off("click.guide").on("click.guide",function(e){a.close()}),(0,e.default)(window).off("resize.guide").on("resize.guide",function(){a.show(t)})}else a.close()}},close:function(){(0,e.default)(".po-guide").remove(),this.config.isClose=!0},tutorial:function(t,a,i){var o=(0,e.default)("#power-tutorial-con");o.length<1&&(o=(0,e.default)('<div id="power-tutorial-con" class="tutorial-detail"><div class="po-dialog-header"></div><div class="tutorial-image"></div><div class="tutorial-text"><div class="textarea"></div></div><div style="text-align:center;margin:24px 0;"><div class="po-button primary">我知道了</div></div></div>')).appendTo("body");var n=o.find(".po-dialog-header"),r=o.find(".tutorial-image"),l=o.find(".tutorial-text");if(n.text(t),l.find(".textarea").html(a),null!=i){r.css({padding:"20px 24px"}),o.css({"z-index":11,width:"45%"});var s='<img style="width:100%" src="'+i+'"/>';r.html(s),r.find("img").css({border:"1px solid #e3e3e3"}).on("load",function(){d(o)})}else r.empty(),r.css({border:"none",padding:0}),d(o);function d(e){e.dialog()}(0,e.default)(".power-search-result").hide(),o.find(".po-button").off().on("click",function(){o.dialog("close")})}},window.PoPagination=function(e,t,a){return};
},{"./jquery-1.10.2":"gPHy","./utils":"RKzI","./common":"Sa63","./pay/qrcode":"GEVF"}],"r86J":[function(require,module,exports) {
var define;
var t,e=r(require("../../common/exportfile/exportfile"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){"use strict";o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof w?e:w,i=Object.create(o.prototype),u=new T(n||[]);return a(i,"_invoke",{value:N(t,r,u)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",v="suspendedYield",y="executing",g="completed",m={};function w(){}function b(){}function x(){}var S={};f(S,s,function(){return this});var L=Object.getPrototypeOf,E=L&&L(L(V([])));E&&E!==r&&i.call(E,s)&&(S=E);var _=x.prototype=w.prototype=Object.create(S);function G(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,a,u,s){var c=p(t[o],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,u,s)},function(t){r("throw",t,u,s)}):e.resolve(f).then(function(t){l.value=t,u(l)},function(t){return r("throw",t,u,s)})}s(c.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}})}function N(e,r,n){var o=d;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=j(u,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=p(e,r,n);if("normal"===c.type){if(o=n.done?g:v,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function V(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=x,a(_,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},G(O.prototype),f(O.prototype,c,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},G(_),f(_,l,"Generator"),f(_,s,function(){return this}),f(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=V,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:V(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function i(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function u(t){i(a,n,o,u,s,"next",t)}function s(t){i(a,n,o,u,s,"throw",t)}u(void 0)})}}var u={preStatus:!1,getSvg:!1};function s(t,e){window.URL=window.URL||window.webkitURL;var r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="blob",r.onload=function(){if(200==this.status){var t=this.response,r=new FileReader;r.onloadend=function(t){var r=t.target.result;e(r)},r.readAsDataURL(t)}},r.send()}function c(t){"undefined"!=typeof getsvgTimer&&clearTimeout(getsvgTimer);var e=$("#svg_exporter").html().replace(/&nbsp;/g," "),r=new FormData;r.append("svg",e),poAjax({data:r,processData:!1,contentType:!1,timeout:6e4,type:"post",success:function(e){window.parent.postMessage(JSON.stringify({eventName:"returnSVG",data:e.url,chartId:t}),"*"),flow2svg.cleanSvgHtml()},error:function(){window.parent.postMessage(JSON.stringify({eventName:"returnSVG",data:"error",chartId:t}),"*")}},"uploadSVGForm")}Object.defineProperty(u,"status",{get:function(){return this.preStatus},set:function(t){!0===t&&!1===this.preStatus&&this.getSvg&&(this.getSvg=!1,void 0!==l&&l.init()),this.preStatus=t}}),window.exportCanHandle=u,void 0!==f&&window.removeEventListener("message",f);var l={postChartId:null,getSVG:!1,init:function(){var t=a(o().mark(function t(){var r,n,i,a,u;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.postChartId,this.getSVG){t.next=6;break}return window.parent.postMessage(JSON.stringify({eventName:"returnSVG",data:"error",chartId:r}),"*"),l.postChartId=null,l.getSVG=!1,t.abrupt("return");case 6:return l.postChartId=null,l.getSVG=!1,0==$("#svg_exporter").length&&$('<div id="svg_exporter" style="display:none;position:fixed;z-index:-10;"></div>').appendTo("body"),n="",Model.define.page.showWatermark&&(n=Model.define.page.watermark),t.next=13,e.default.init("#svg_exporter",{type:"svg",watermark:{download:n}});case 13:if(t.sent,i=document.querySelector("#svg_exporter"),0!=(a=i.querySelectorAll("image")).length){t.next=19;break}return c(r),t.abrupt("return");case 19:u=0,Array.prototype.forEach.call(a,function(t,e){var n=t.getAttribute("href")||t.getAttribute("xlink:href");if(!n)return(u+=1)>=a.length&&c(r),!0;s(n,function(e){var n=e;t.setAttribute("href",n),(u+=1)>=a.length&&c(r)})}),getsvgTimer=setTimeout(function(){u<a.length&&c(r)},6e3);case 22:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()};function f(t){if("object"===n(t.data))return!1;if(!t.data||"v5"===t.data.substr(0,2))return!1;if((t.data+"").startsWith("setImmediate"))return!1;var e=JSON.parse(t.data);if("getSVG"==e.eventName){var r=e.chartId;if("edit"==e.type&&0==sendMessage.version)return void window.parent.postMessage(JSON.stringify({eventName:"returnSVG",data:"nochange",chartId:r}),"*");l.postChartId=r,l.getSVG=!0,u.status?l.init():u.getSvg=!0}else if("updateViewUI"==e.eventName){var o=document.querySelector(".flow-back");o&&(o.style.display="none");var i=document.querySelector(".po-flow-header-right");i&&(i.style.display="none")}}if(window.removeEventListener("message",f),window.addEventListener("message",f,!1),!window.SVG){var h=document.createElement("script");h.src=staticBasePath+"/assets/js/svgUtil.js",h.async="async",document.head.appendChild(h),h.onerror=function(){this.onerror=null,this.onload=null},h.onload=function(){this.onerror=null,this.onload=null}}
},{"../../common/exportfile/exportfile":"geLb"}],"hAOg":[function(require,module,exports) {
window.orgJs={openFileQuery:{pageSize:5,curPage:0,orgId:""},quickFileQuery:{pageSize:15,curPage:0,orgId:""},orgId:"",doMain:"/",fileIdObj:{},timor:null,loading:!1,myTeamId:"",isShared:!1,initData:function(){function e(){orgJs.Server.getOpenFile(function(e){var r=e.charts,o=e.pageCount,t=e.curPage,a="";r.forEach(function(e){var r=e.chartId||e.folderId;orgJs.fileIdObj[r]=e;var o=orgJs.toolFun.getImgPath(e);a+='<li fileId="'.concat(r,'"><img src="').concat(o,'" alt=""><span class="txt">').concat(e.title,"</span></li>")}),$(".wrap_org_menu .wrap_conten .rencent_visite").append(a),t+1>=o&&$(".wrap_org_menu .wrap_conten .get_recent").remove()},orgJs.openFileQuery)}function r(){orgJs.Server.getQuickList(function(e){var r="",o=e.members,t=e.pageCount,a=e.curPage;o.forEach(function(e){var o=e.folder||e.chart,t=o.chartId||o.folderId;orgJs.fileIdObj[t]=o,e.folder&&(o.category="folder",o.isFolder=!0);var a=orgJs.toolFun.getImgPath(o);r+='<li fileId="'.concat(t,'"><img src="').concat(a,'" alt=""><span class="txt">').concat(o.title,"</span></li>")}),$(".wrap_org_menu .wrap_conten .quick_visite").append(r),orgJs.loading=a+1>=t,o.length||a?$(".wrap_org_menu .wrap_conten .wrap_quick").show():$(".wrap_org_menu .wrap_conten .wrap_quick").hide()},orgJs.quickFileQuery)}function o(){chartObj.addQuickAccess?$(".wrap_opt ul.visite .is_add .txt").text("取消快捷访问").siblings().html("&#xe84a;"):$(".wrap_opt ul.visite .is_add .txt").text("添加到快捷访问").siblings().html("&#xe63b;")}$(".wrap_org_menu .wrap_conten .quick_visite, .wrap_org_menu .wrap_conten .rencent_visite").html(""),orgJs.openFileQuery.orgId=orgJs.orgId,orgJs.quickFileQuery.orgId=orgJs.orgId,orgJs.openFileQuery.curPage=0,orgJs.quickFileQuery.curPage=0,orgJs.isShared=!1,e(),r(),orgJs.Server.getIsAddQuick(function(e){chartObj.addQuickAccess=e,o()}),orgJs.toolFun.getFilePath(),$(".wrap_conten .org_go_home").off().on("click",function(e){window.open("/org")}),$(".wrap_org_menu .wrap_conten .wrap_scroll").off().on("scroll",orgJs.toolFun.throttle(function(){if(!orgJs.loading){var e=$(".wrap_org_menu .wrap_conten .wrap_scroll");e.outerHeight()+e.scrollTop()>e.find(".inner_height").outerHeight()-100&&(orgJs.loading=!0,orgJs.quickFileQuery.curPage+=1,r())}},20)),$(".wrap_org_menu .wrap_conten .get_recent").off().on("click",function(r){orgJs.openFileQuery.curPage+=1,e()}),$(".wrap_opt ul.visite .is_add").off().on("click",function(e){var r=chartObj.addQuickAccess?"remove":"add";orgJs.Server.setQuickAccess(function(e){chartObj.addQuickAccess=!chartObj.addQuickAccess,o()},r)}),$(".wrap_conten .wrap_place, .wrap_opt ul .place").off().on("click",function(e){var r={teamId:chartObj.teamId,orgId:orgJs.orgId,folderId:chartObj.folderId};orgJs.toolFun.dealGoTo(r)}),$(".wrap_place .wrap_opt").off().on("click",function(e){return!1}),$(".wrap_place .wrap_opt .copy_move").off().on("click",function(e){insert.copyAndMove.init()}),$(".wrap_org_menu .wrap_conten .file_list").off().on("click",function(e){var r="";r="li"!==$(e.target).prop("tagName").toLowerCase()?$(e.target).parent("li").attr("fileId"):$(e.target).attr("fileId"),orgJs.toolFun.dealGoTo(orgJs.fileIdObj[r])})},drowMenuInit:function(){function e(){clearTimeout(orgJs.timor),$(".wrap_org_menu").show(300)}function r(){$(window).height()-60>690?$(".wrap_org_menu .wrap_conten").css({maxHeight:"690px"}):$(".wrap_org_menu .wrap_conten").css({maxHeight:"calc(100vh - 100px)"})}orgJs.orgId=Util.getCookies("po-last-platform"),$("#po-flow-back, #mind-designer-back").on("mouseenter",function(r){orgJs.initData(),e()}),$(".wrap_org_menu").on("mouseenter",function(r){e()}),$("#po-flow-back, .wrap_org_menu, #mind-designer-back").on("mouseleave",function(e){clearTimeout(orgJs.timor),orgJs.timor=setTimeout(function(){$(".wrap_org_menu").css({display:"none"})},200)}),orgJs.Server.getPersonalspace(function(e){orgJs.myTeamId=e.groupId||""}),r(),$(window).resize(r),function(){var e=$("#po-flow-back");e.offset()||(e=$("#mind-designer-back"));var r=e.offset(),o=e.height()+r.top+18;$(".wrap_org_menu").css({top:o+"px",left:r.left+"px"})}()},toolFun:{throttle:function(e,r){var o=0;return function(){var t=+new Date;if(t-o>r){o=t;for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];e.apply(this,n)}}},getFilePath:function(){orgJs.Server.getSourcePath(function(e){var r=e.csource,o=e.path,t=e.source;[0,3].includes(r)?($(".wrap_conten .wrap_place .wrap_txt .txt").text("与我协作"),$(".wrap_place .wrap_opt ul .place").text("来自"+o),$(".wrap_place .wrap_opt .copy_move").remove(),orgJs.isShared=!0):[4,5,6].includes(r)?$(".wrap_conten .wrap_big_place").remove():($(".wrap_conten .wrap_place .wrap_txt .txt").text(t),$(".wrap_place .wrap_opt ul .place").text(o))})},dealGoTo:function(e){if(e.chartId){var r=e.category,o="";switch(r){case"outline":o="outline";break;default:o=r.indexOf("mind")>-1?"mindmap":"diagraming"}window.open(orgJs.doMain+o+"/"+e.chartId)}else{var t="org/",a="root"===e.folderId?"":e.folderId;orgJs.isShared?t+="shared":e.teamId?(orgJs.toolFun.saveForderId(e.teamId,a),t+="teams/"+e.teamId):(orgJs.toolFun.saveForderId("publicfiles",a),t+="publicfiles"),window.open(orgJs.doMain+t)}},saveForderId:function(e,r){var o=userObj.userId+orgJs.orgId,t=JSON.parse(localStorage.getItem(o))||{};t[e]=r,localStorage.setItem(o,JSON.stringify(t))},getImgPath:function(e){var r="";if(!e.category)return r;switch(e.category){case"outline":r="outline.png";break;case"folder":r="folder.png";break;default:r=e.category.indexOf("mind")>-1?"mind.png":"flow.png"}return staticBasePath+"/images/"+r}},Server:{getPersonalspace:function(e){Util.ajax({url:"/api/org/team/personalspace",type:"POST",data:{orgId:orgJs.orgId},success:function(r){e(r)},error:function(e){}})},getSourcePath:function(e){Util.ajax({url:"/api/org/file/source/path",type:"POST",data:{orgId:orgJs.orgId,chartId:chartObj.chartId},success:function(r){e(r)},error:function(e){}})},setQuickAccess:function(e,r){Util.ajax({url:"/api/org/quick/access/"+r,type:"POST",data:{orgId:orgJs.orgId,fileId:chartObj.chartId,fileType:"chart"},success:function(r){e(r)},error:function(e){}})},getQuickList:function(e,r){Util.ajax({url:"/api/org/quick/access/file/page",type:"POST",data:r,success:function(r){e(r)},error:function(e){}})},getIsAddQuick:function(e){Util.ajax({url:"/api/org/quick/access/isAdd",type:"GET",data:{fileId:chartObj.chartId,orgId:orgJs.orgId},success:function(r){e(r)},error:function(e){}})},getOpenFile:function(e,r){Util.ajax({url:"/api/org/chart/record/open_files",type:"POST",data:r,success:function(r){e(r)},error:function(e){}})},getFilePath:function(e){Util.ajax({url:"/api/org/file/path",type:"POST",data:{folderId:chartObj.folderId,teamId:chartObj.teamId,orgId:orgJs.orgId},success:function(r){e(r)},error:function(e){}})}}};
},{}],"Zp0M":[function(require,module,exports) {
var define;
var define,clipboard=_interopRequireWildcard(require("./clipboard")),_chartconfig=require("./chartconfig.json"),_exportfile=_interopRequireDefault(require("../../common/exportfile/exportfile")),_vip_state=_interopRequireDefault(require("../../common/vip/vip_state"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(_getRequireWildcardCache=function(e){return e?o:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=_getRequireWildcardCache(t);if(o&&o.has(e))return o.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}return n.default=e,o&&o.set(e,n),n}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return t};var e,t={},o=Object.prototype,n=o.hasOwnProperty,a=Object.defineProperty||function(e,t,o){e[t]=o.value},i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,o){return e[t]=o}}function p(e,t,o,n){var i=t&&t.prototype instanceof b?t:b,r=Object.create(i.prototype),s=new U(n||[]);return a(r,"_invoke",{value:I(e,o,s)}),r}function d(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var h="suspendedStart",u="suspendedYield",f="executing",g="completed",m={};function b(){}function y(){}function v(){}var k={};c(k,r,function(){return this});var w=Object.getPrototypeOf,$=w&&w(w(M([])));$&&$!==o&&n.call($,r)&&(k=$);var x=v.prototype=b.prototype=Object.create(k);function S(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function C(e,t){function o(a,i,r,s){var l=d(e[a],e,i);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==_typeof(p)&&n.call(p,"__await")?t.resolve(p.__await).then(function(e){o("next",e,r,s)},function(e){o("throw",e,r,s)}):t.resolve(p).then(function(e){c.value=e,r(c)},function(e){return o("throw",e,r,s)})}s(l.arg)}var i;a(this,"_invoke",{value:function(e,n){function a(){return new t(function(t,a){o(e,n,t,a)})}return i=i?i.then(a,a):a()}})}function I(t,o,n){var a=h;return function(i,r){if(a===f)throw new Error("Generator is already running");if(a===g){if("throw"===i)throw r;return{value:e,done:!0}}for(n.method=i,n.arg=r;;){var s=n.delegate;if(s){var l=D(s,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===h)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var c=d(t,o,n);if("normal"===c.type){if(a=n.done?g:u,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=g,n.method="throw",n.arg=c.arg)}}}function D(t,o){var n=o.method,a=t.iterator[n];if(a===e)return o.delegate=null,"throw"===n&&t.iterator.return&&(o.method="return",o.arg=e,D(t,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=d(a,t.iterator,o.arg);if("throw"===i.type)return o.method="throw",o.arg=i.arg,o.delegate=null,m;var r=i.arg;return r?r.done?(o[t.resultName]=r.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,m):r:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,m)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function M(t){if(t||""===t){var o=t[r];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function o(){for(;++a<t.length;)if(n.call(t,a))return o.value=t[a],o.done=!1,o;return o.value=e,o.done=!0,o};return i.next=i}}throw new TypeError(_typeof(t)+" is not iterable")}return y.prototype=v,a(x,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(C.prototype),c(C.prototype,s,function(){return this}),t.AsyncIterator=C,t.async=function(e,o,n,a,i){void 0===i&&(i=Promise);var r=new C(p(e,o,n,a),i);return t.isGeneratorFunction(o)?r:r.next().then(function(e){return e.done?e.value:r.next()})},S(x),c(x,l,"Generator"),c(x,r,function(){return this}),c(x,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),o=[];for(var n in t)o.push(n);return o.reverse(),function e(){for(;o.length;){var n=o.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function a(n,a){return s.type="throw",s.arg=t,o.next=n,a&&(o.method="next",o.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],s=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var l=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),A(o),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var a=n.arg;A(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,o,n){return this.delegate={iterator:M(t),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function asyncGeneratorStep(e,t,o,n,a,i,r){try{var s=e[i](r),l=s.value}catch(c){return void o(c)}s.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,o=arguments;return new Promise(function(n,a){var i=e.apply(t,o);function r(e){asyncGeneratorStep(i,n,a,r,s,"next",e)}function s(e){asyncGeneratorStep(i,n,a,r,s,"throw",e)}r(void 0)})}}function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}require("../../common/common.less"),require("../css/designer.css"),require("../css/ui.css"),require("../css/pageList.less"),require("../../common/insert.css"),require("../css/renderchart.css"),require("../../common/katex.min.css"),require("../css/designer.team.css"),window.editorGlobal={},window.chartObj={},window.userObj={},window.memberObj={},window.outhObj={},window.orgRole="",window.tutorial=localStorage.getItem("po_flow_tutorial"),window.isComponentAdmin=!1,window.showCommentIco=!1,window.localRuntime=!1,window.showToolbar=!0,window.userId="123",window.deviceType="pc",window.fileType="flow",window.orgNickNameOrg={},window.dateFormat="yyyy-MM-dd hh:mm",window.domain=window.domain?window.domain:window.location.port?"":window.location.origin,window.staticBasePath=window.staticBasePath?window.staticBasePath:window.domain+"/v5_editor/static",window.$=require("../../common/jquery-1.10.2"),require("../../common/xss/index"),require("../../common/po/common"),require("./schame/schema"),require("./schame/themes"),device.indexOf("mobi")>-1?require("./designer.mobi.core"):require("./designer.core"),require("./ai.draw"),require("./designer.events"),require("./designer.methods"),require("./designer.beautify"),require("../../common/collaboration/config"),require("./designer.server"),require("./designer.team.js"),require("./aihelp"),window.katex=require("../../common/katex.min"),require("../../common/insert"),require("./insert"),window.token=Util.getUrlParams("token"),require("../../common/insert/orgIndex.js"),window.vipState=require("../../common/vip/vip_state").default;var headerObj={flowBack:{isShow:!0,id:"flow-back",onClick:function(){}},flowLogo:{isShow:!0,id:"flow-logo",onClick:function(){}},export:{isShow:!0,id:"header-export",onClick:function(){}},toolbar:{file:{menu:{create:{isShow:!0,ac:"create",onClick:function(){}}},id:"header-file",isShow:!0,onClick:function(){}}}};window.headerUI={init:function(e){for(key in e){var t=e[key];!1===t.isShow&&$("#"+t.id).hide()}var o=e.toolbar;for(key in o){var n=o[key];!1===n.isShow?$("#"+n.id).hide():$("#"+n.id).show()}chartObj.orgId&&($("#header-fav").remove(),$("#header-file-menu li[ac=copy]").eq(0).remove(),$("#header-file-menu li[ac=publish]").remove(),$("#po-publish-button").remove(),"viewer"==chartObj.collaRole&&($("#header-export").remove(),$("#header-file-menu [ac=export-file]").remove())),$(".flow-back").hover(function(e){injectExtraAsynCall("onBackHover",{event:e})}),$(".flow-back").button({onClick:function(){injectExtraAsynCall("onLinkToFilePage",{},function(){var e=localStorage.getItem("po_file_source");localStorage.removeItem("po_file_source");var t=e||"/diagrams";window.location.href=t})}}),$(".flow-logo").off("click").on("click",function(e){injectExtraAsynCall("onLinkToFilePage",{},function(){var e=localStorage.getItem("po_file_source");localStorage.removeItem("po_file_source");var t=e||"/diagrams";window.location.href=t})}),$("#header-rename").on("blur",function(){var e=Util.filterXss($(this).text().trim());$("#header-rename").html(""),setTimeout(function(){$("#header-rename").html(e)},60),chartObj.title!=e&&UI.rename(e)}).on("keydown",function(e){e.stopPropagation(),13==e.keyCode&&$("#header-rename").blur()}).on("focus",function(e){$(this).selectText()}),UI.favouriteFn(chartObj.favourite),$("#header-fav").button({onClick:function(e,t){UI.favChart()}}),$("#header-history").button({onClick:function(e,t){"A"!==e.target.tagName&&History.init()}}),$("#po-viewer-btn").button({onClick:function(e,t){$("#po-apply-role").dropdown({target:t,position:"left"})}}),$("#po-clb-user-btn").off().on("click",function(e){$("#po-clb-user-menu").dropdown({target:$("#po-clb-user-btn"),position:"right"})}),$("#po-clb-user-menu .po-clb-admin").off().on("click",function(e){$("#po-clb-user-menu").hide(),insert.share.init()}),$("#po-clb-button").off().on("click",function(e){insert.share.init()}),$("#po-publish-button").off().on("click",function(){insert.publish.init()}),$("#po-flow-user-photo img").attr("src",userObj.photoUrl),$("#po-flow-user-photo").off().on("click",function(e){var t=$(this);injectExtraAsynCall("onHeadHandle",e,function(){insert.userPhotoMenu.init(t,{user:{icon:userObj.photoUrl,text:userObj.fullName}})})}),$("#header-export").button({onClick:function(e,t){$("#header-export-menu").dropdown({target:t,position:"right",onSelect:function(e){var t=e.attr("type");"download_part"==t?Designer.events.push("downloadPart"):injectExtraAsynCall("onBeforeExport",{type:t},function(){UI.export(t)})}});try{var o=window.location.href.indexOf("down")>=0?"个人文件页":"流程图编辑器",n="私人文件";"undefined"!=typeof chartObj&&chartObj.orgId&&(n="团队文件",window.location.href.indexOf("down")>=0&&(o="团队文件页")),poPoint.collect("export_click",{"当前页面":o,"文件类型":CategoryMap[chartObj.category],"文件属性":n})}catch(e){}}}),$(".header-container-bottom .po-tool-button").off().on("mouseenter",function(e){var t=$(".po-flow-header-container .po-menu:visible"),o=$(this);t.length>0&&t.attr("id").indexOf(o.attr("id"))<0&&($(this).trigger("mousedown"),$(this).trigger("click"))}),$("#header-file").button({onClick:function(e,t){for(var n in o.file.menu)!1===o.file.menu[n].isShow&&$("#header-file-menu li[ac="+o.file.menu[n].id+"]").hide();$("#header-file-menu").dropdown({target:t,onSelect:function(e){var t=e.attr("ac");if(o.file.menu[t]&&"function"==typeof o.file.menu[t].onClick)o.file.menu[t].onClick();else if("creat"==t){var n=e.attr("cate");injectExtraAsynCall("onCreateFile",{type:n},function(){UI.newFile(n)})}else if("temp"==t)window.open("/diagrams/new?category="+mind);else if("file"==t){var a=e.attr("file");window.open("/diagraming/"+a)}else if("rename"==t)$("#header-rename").focus(),$("#header-rename").select();else if("save"==t)UI.save();else{if("view"==t)return void window.open("/preview/"+chartObj.chartId);if("copy"==t)injectExtraAsynCall("onFileClone",{},function(){UI.copyFile()});else if("move"==t);else if("export"==t){var i=e.attr("type");"download_part"==i?Designer.events.push("downloadPart"):injectExtraAsynCall("onBeforeExport",{type:i},function(){UI.export(i)})}else"history"==t?History.init():"publish"==t?insert.publish.init():"share"==t?insert.share.init():"print"==t?UI.print.init():"close"==t&&(window.location.href=domain+"/diagrams")}}})}}),$("#header-edit").button({onClick:function(e,t){null==Model.define.defaultStyle&&null==Model.define.defaultLinkerStyle?$("#header-clear-default-style").hide():$("#header-clear-default-style").show(),$("#header-edit-menu").dropdown({target:t,onSelect:function(e){var t=e.attr("ac");"undo"==t?MessageSource.undo():"redo"==t?MessageSource.redo():"cut"==t?clipboard.cut(null,Utils,Designer,publicCLB):"copy"==t?clipboard.copy(null,Utils,publicCLB):"paste"==t?clipboard.paste({Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI}):"duplicate"==t?clipboard.duplicate({Schema:Schema,Designer:Designer,Utils:Utils,Model:Model,publicCLB:publicCLB,UI:UI,memberObj:memberObj,insert:insert,$:$}):"brush"==t?Designer.clipboard.brush():"defaultStyle"==t?UI.setDefaultStyle(e):"beautify"==t?Designer.beautify():"find"==t?UI.showSearchReplace("search"):"replace"==t?UI.showSearchReplace("replace"):"selectall"==t?Designer.selectAll():"delete"==t&&Designer.op.removeShape()}})}}),$("#header-select").button({onClick:function(e,t){$("#header-select-menu").dropdown({target:t,onSelect:function(e){var t=e.attr("ac");"selectall"==t?Designer.selectAll():"shape-select-part"==t?(Server.setConfig("shapeSelectPart",!0),authObj.shapeSelectPart=!0):"shape-select-all"==t&&(Server.setConfig("shapeSelectPart",!1),authObj.shapeSelectPart=!1)}}),window.authObj&&authObj.shapeSelectPart?($("#header-select-menu [ac=shape-select-part]").menuitem("select"),$("#header-select-menu [ac=shape-select-all]").menuitem("unselect")):($("#header-select-menu [ac=shape-select-part]").menuitem("unselect"),$("#header-select-menu [ac=shape-select-all]").menuitem("select"))}}),$("#header-clear-default-style").off().on("click",function(e){e.stopPropagation(),Model.clearDefaultStyle(),$("#header-edit-menu").hide(),$.toast({text:"默认样式已清除成功"})}),$("#clear-default-style").off().on("click",function(e){e.stopPropagation(),Model.clearDefaultStyle(),$("#designer-contextmenu").hide(),$.toast({text:"默认样式已清除成功"})}),$("#header-view").button({onClick:function(e,t){$("#header-view-menu").dropdown({target:t,onSelect:function(e){var t=e.attr("ac");if("in"==t)Designer.zoomIn("center");else if("out"==t)Designer.zoomOut("center");else{var o=parseFloat(t);Designer.setZoomScale(o,"center")}}})}}),$("#header-insert").button({onClick:function(e,t){$("#header-insert-menu").dropdown({target:t,onSelect:function(e){var t=e.attr("ac");if("text"==t)Designer.op.changeState("creating_free_text");else if("image"==t)$("#upload-imgs").removeAttr("loaded"),insert.image.init(function(e,t){UI.insertImage(e,t.width,t.height)});else if("line"==t)Designer.op.changeState("creating_free_linker");else if("equation"==t){var o=Utils.getSelected()[0];Designer.op.equation.insertLastEquation(o)}else"attr"==t?Dock.show("attr"):"comment"==t&&Dock.show("comment")}})}}),$("#header-page").button({onClick:function(e,t){$("#header-page-menu").dropdown({target:t,onSelect:function(e){var t=e.attr("ac");if("grid-size"==t){var o=e.attr("size");"custom"==o?Dock.show("page"):Designer.setPageStyle({gridSize:parseInt(o)})}else"size"==t||"watermark"==t?(Dock.show("page"),Dock.update("page")):"themes"==t&&$("#panel-tab [ac=themes]").trigger("click")}}),$("#header-page-menu [ac=page-color]").off("mouseenter").on("mouseenter",function(){$.colorpicker({target:$("#header-page-menu [ac=page-color]"),color:Model.define.page.backgroundColor||"transparent",position:"right",dropdown:!1,trans:!0,onSelect:function(e){Designer.setPageStyle({backgroundColor:e})}})}),$("#header-page-menu [ac=page-color]").off("mouseleave.colorpicker").on("mouseleave.colorpicker",function(e){setTimeout(function(){$("#header-page-menu [ac=page-color]").hasClass("selected")||$("#color_picker").hide()},10)}),$("#header-page-menu li").off("click.grid").on("click.grid",function(e){e.stopPropagation();var t=$(this),o=t.attr("ac");if("grid"==o)t.menuitem("isSelected")?(t.menuitem("unselect"),Designer.setPageStyle({showGrid:!1})):(t.menuitem("select"),Designer.setPageStyle({showGrid:!0}));else if("linejump"==o){var n=!1;t.menuitem("isSelected")?(n=!0,t.menuitem("unselect"),Designer.setPageStyle({lineJumps:!1})):(t.menuitem("select"),n=!1,Designer.setPageStyle({lineJumps:!0})),Designer.events.push("resetBrokenLinker",n)}else if("showPrintLine"==o){n=!1;if(t.menuitem("isSelected"))t.menuitem("unselect"),Designer.setPageStyle({showPrintLine:!1});else{t.menuitem("select");var a=Utils.getPrintPageSize();Designer.setPageStyle({showPrintLine:!0,width:a.width,height:a.height})}}}),Model.define.page.showGrid?($("#header-page-menu [ac=grid]").menuitem("select"),$("#header-page-menu [size="+Model.define.page.gridSize+"]").menuitem("select"),$("#header-page-menu [grid=size]").button("enable")):($("#header-page-menu [ac=grid]").menuitem("unselect"),$("#header-page-menu [grid=size]").button("disable")),Model.define.page.lineJumps?$("#header-page-menu [ac=linejump]").menuitem("select"):$("#header-page-menu [ac=linejump]").menuitem("unselect"),Model.define.page.showPrintLine?$("#header-page-menu [ac=showPrintLine]").menuitem("select"):$("#header-page-menu [ac=showPrintLine]").menuitem("unselect")}}),$("#header-arrange").button({onClick:function(e,t){$("#header-arrange-menu").dropdown({target:t,onSelect:function(e){var t=e.attr("ac"),o=e.attr("al"),n=e.attr("dist");"front"==t?Designer.layerShapes("front"):"back"==t?Designer.layerShapes("back"):"forward"==t?Designer.layerShapes("forward"):"backward"==t?Designer.layerShapes("backward"):o?Designer.alignShapes(o):n?Designer.distributeShapes(n):"w"==t?Designer.matchSize({w:"auto"}):"h"==t?Designer.matchSize({h:"auto"}):"wh"==t?Designer.matchSize({w:"auto",h:"auto"}):"group"==t?Designer.group():"ungroup"==t?Designer.ungroup():"lock"==t?Designer.lockShapes():"unlock"==t&&Designer.unlockShapes()}})}}),$("#header-help").button({onClick:function(e,t){$("#header-help-menu").dropdown({target:t,onSelect:function(e){}})}}),setTimeout(function(){headerUI.selectTypeTips()},1500)},selectTypeTips:function(){var e=localStorage.getItem("po_flow_tutorial"),t=!!userObj.registDate&&new Date(userObj.registDate).getTime()<16734816e5;if($(".po-guide").length&&$(".po-guide").is(":visible"))setTimeout(function(){headerUI.selectTypeTips()},2e3);else if(e&&"viewer"!=chartObj.collaRole&&t&&(null==authObj.shapeSelectPart||null==authObj.shapeSelectPart)){$(".po-guide").remove();var o=$('<div class="po-guide"><div class="po-guide-arrow po-guide-arrow-bottom" style="left: 116px;"></div><div class="po-guide-title">框选局部，也可以选中图形啦~</div><div class="po-guide-step"><div class="next-btn po-button-small">我知道了</div></div></div>');o.css({left:$("#header-select").offset().left-97,top:$("#header-select").offset().top+30}),o.appendTo("body"),o.find(".next-btn").off("click").on("click",function(){Server.setConfig("shapeSelectPart",!1),authObj.shapeSelectPart=!1,o.remove()})}}},window.initialize=function(e){(userObj=e.userObj,authObj=e.authObj,showCommentIco=authObj.showCommentIco,userObj.account=userObj.phone?userObj.phone:userObj.email,Schema.flowBasicConfig=authObj.flowBasicConfig?authObj.flowBasicConfig.split(","):Schema.flowBasicConfig,chartObj=e.chartObj,chartId=chartObj.chartId,Designer.init(e),"undefined"==typeof isView)&&("trial"==chartObj.collaRole?Designer.status="demo":"viewer"==chartObj.collaRole&&(Designer.status="readonly"),"readonly"==Designer.status?(Navigator.init(),0==localRuntime&&Designer.setReadonly(!0)):setTimeout(function(){UI.init(),Dock.init(),Navigator.init(),$("#po-global-loading-wrap").fadeOut(function(){tutorial||"viewer"==chartObj.collaRole||(localStorage.setItem("po_flow_tutorial",!0),Designer.events.push("poGuide"))})},300),showToolbar&&($("#bar_collapse").children("div").attr("class","ico expand"),$(".titlebar").hide(),$("#bar_return").show(),$(".layout").height($(window).height()-73),$(".lanebar").css({top:35})))},$(document).ready(function(){injectExtraAsynCall("onInitInfo",{chartId:chartId},function(e){initialize(e)}),_vip_state.default.init()}),window.UI={toolbarInit:function(){($("#po-toolbar").addClass(device.indexOf("mobi")>-1?"mobi":"pc"),device.indexOf("mobi")>-1)&&(0==$("#po-flow-shape-delete").length&&$("#po-flow-font-family").before('<div id="po-flow-shape-delete" class="permanent po-tool-button"><span class="po-diagraming-icons">&#xe7b7;</span></div>'))},init:function init(){headerUI.init(headerObj),this.toolbarInit(),$("#panel-tab .item").off().on("click",function(e){var t=$(this).attr("ac");$("#panel-tab .item").removeClass("active"),$(this).addClass("active"),$(".po-flow-layout").hide(),$("#"+t+"-container").show(),"themes"==t&&UI.showThemeSelect()}),UI.toolbarResize(),$(window).bind("resize.toolbar",function(){UI.toolbarResize()}),$(".po-slide-left").off().on("click",function(e){$(".po-toolbar-container").css({left:0,right:"initial"}),UI.toolbarResize()}),$(".po-slide-right").off().on("click",function(e){$(".po-toolbar-container").css({left:"initial",right:"0"}),UI.toolbarResize()}),$("#po-flow-shape-delete").button({onClick:function(){Designer.op.removeShape()}}),$("#po-flow-undo").button({onClick:function(){MessageSource.undo()}}),$("#po-flow-redo").button({onClick:function(){MessageSource.redo()}}),$("#po-flow-brush").button({onClick:function(e,t){t.button("isSelected")?Designer.events.push("useBrush","unbrush"):Designer.events.push("useBrush","brush"),t.trigger("mouseover")}}),$("#po-flow-beautify").button({onClick:function(e,t){t.button("disable"),Designer.beautify(),t.button("enable")}}),$("#po-flow-page-fill").colorButton({trans:!0,position:"left",onSelect:function(e){Designer.setPageStyle({backgroundColor:e})}}),$("#po-flow-page-fill").parents(".po-tool-button").off().on("click",function(){$("#po-flow-page-fill").trigger("click")}),$("#po-flow-insert-image").button({onClick:function(e,t){insert.image.init(function(e,t){UI.insertImage(e,t.width,t.height)})}}),$("#po-flow-insert-link").button({onClick:function(e,t){UI.showInsertLink()}}),$("#designer_canvas").off("mouseenter.shapelink").on("mouseenter.shapelink",".shape_link",function(e){var t=$(this),o=t.attr("data-shape-id"),n=Model.getShapeById(o);clearTimeout(insert.link.linkTimer),insert.link.render({target:t,type:"url",link:{value:n.link,title:n.linkTitle,type:"url"},position:"bottom"},function(e,t){"remove"==t?UI.removeLink(n.id):UI.setLink(n.id,e.value,e.title)},"hover")}),$("#po-flow-font-family").button({onClick:function(e,t){var o=t.text().trim();$("#po-flow-font-family-menu").dropdown({target:t,onSelect:function(e){o=e.attr("ac"),Designer.setFontStyle({fontFamily:o}),t.button("setText",o),t.attr("ac",o)}}),$("#po-flow-font-family-menu [ac='"+o+"']").menuitem("select")}}),$("#po-flow-font-size").spinner({min:12,max:100,step:1,unit:"px",width:62,onChange:function(e){Designer.setFontStyle({size:e})}}),$("#po-flow-font-bold").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({bold:o}),t.toggleClass("selected")}}),$("#po-flow-font-italic").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({italic:o}),t.toggleClass("selected")}}),$("#po-flow-font-underline").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({underline:o}),t.toggleClass("selected")}}),$("#po-flow-font-middleline").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({middleline:o})}}),$("#po-flow-font-orientation").button({onClick:function(e,t){$("#po-flow-font-orientation-menu").dropdown({target:t,position:"left",onSelect:function(e){e.attr("ac")}})}}),$("#po-flow-font-align").button({onClick:function(e,t){var o={textAlign:t.attr("text-align"),vAlign:t.attr("v-align")};$("#po-flow-font-align-menu").dropdown({target:t,position:"left",onSelect:function(e){var n=e.attr("ac");o[e.attr("cate")]=n,Designer.setFontStyle(o),t.attr("text-align",o.textAlign),t.attr("v-align",o.vAlign)}})}}),$("#po-flow-line-height").button({onClick:function(e,t){var o=t.attr("line-height");$("#po-flow-line-height-menu").dropdown({target:t,position:"left",onSelect:function(e){o=e.attr("ac"),Designer.setFontStyle({lineHeight:o}),t.attr("line-height",o)}}),$("#po-flow-line-height-menu [ac='"+o+"']").menuitem("select")}}),$("#po-flow-fill-color").button({onClick:function(e,t){var o=t.button("getColor");$.colorpicker({target:t,trans:!0,position:"left",onSelect:function(e){"transparent"==e?(Designer.setFillStyle({type:"none"}),t.button("setColor","#FFF")):(Designer.setFillStyle({type:"solid",color:e}),t.button("setColor",e))},color:o,extend:"<div id='po-flow-fill-gradient' title='颜色渐变' class='extend_item'><img src='"+staticBasePath+"/assets/images/bg_gradient.svg'></div><div id='po-flow-fill-img' title='图片填充' class='extend_item'><img src='"+staticBasePath+"/assets/images/bg_img.svg'></div>"}),$("#po-flow-fill-gradient").off().on("click",function(){Designer.setFillStyle({type:"gradient"}),Dock.show("shape"),$("#color_picker").dropdown("close")}),$("#po-flow-fill-img").off().on("click",function(){insert.image.init(function(e,t){Designer.setFillStyle({type:"image",fileId:e,imageW:t.w,imageH:t.h})}),$("#color_picker").dropdown("close")})}}),$("#po-flow-linker-color").button({onClick:function(e,t){var o=t.button("getColor");$.colorpicker({target:t,position:"left",onSelect:function(e){Designer.setLineStyle({lineColor:e}),t.button("setColor",e)},color:o})}}),$("#po-flow-font-color").button({onClick:function(e,t){var o=t.button("getColor");$.colorpicker({target:t,position:"left",onSelect:function(e){Designer.setFontStyle({color:e}),t.button("setColor",e)},color:o})}}),$("#po-flow-linker-width").button({onClick:function(e,t){var o=t.attr("line-width");$("#po-flow-linker-width-menu").dropdown({target:t,position:"left",onSelect:function(e){o=parseFloat(e.attr("ac")),Designer.setLineStyle({lineWidth:o}),t.attr("line-width",o)}}),$("#po-flow-linker-width-menu [ac='"+o+"']").menuitem("select")}}),$("#po-flow-linker-style").button({onClick:function(e,t){var o=t.attr("line-style");$("#po-flow-linker-style-menu").dropdown({target:t,position:"left",onSelect:function(e){o=e.attr("ac"),Designer.setLineStyle({lineStyle:o}),t.attr("line-style",o)}}),$("#po-flow-linker-style-menu [ac='"+o+"']").menuitem("select")}}),$("#po-flow-linker-type").button({onClick:function(e,t){var o=t.attr("line-type");$("#po-flow-linker-type-menu").dropdown({target:t,position:"left",onSelect:function(e){o=e.attr("ac"),Designer.setLinkerType(o),t.attr("line-type",o);var n=$("#po-flow-linker-type-menu [ac="+o+"]").text();t.button("setText",n)}}),$("#po-flow-linker-type-menu [ac='"+o+"']").menuitem("select")}}),$("#po-flow-linker-beginarrow").button({onClick:function(e,t){var o=t.attr("arrow");$("#po-flow-linker-beginarrow-menu").dropdown({target:t,position:"left",onSelect:function(e){o=e.attr("ac"),Designer.setLineStyle({beginArrowStyle:o}),t.attr("arrow",o);var n=$("#po-flow-linker-beginarrow-menu [ac="+o+"]").find(".po-diagraming-icons").html();t.button("setText",n)}}),$("#po-flow-linker-beginarrow-menu [ac='"+o+"']").menuitem("select")}}),$("#po-flow-linker-endarrow").button({onClick:function(e,t){var o=t.attr("arrow");$("#po-flow-linker-endarrow-menu").dropdown({target:t,position:"left",onSelect:function(e){o=e.attr("ac"),Designer.setLineStyle({endArrowStyle:o}),t.attr("arrow",o);var n=$("#po-flow-linker-endarrow-menu [ac="+o+"]").find(".po-diagraming-icons").html();t.button("setText",n)}}),$("#po-flow-linker-endarrow-menu [ac='"+o+"']").menuitem("select")}}),$("#po-flow-layer-arrange").button({onClick:function(e,t){$("#po-flow-layer-arrange-menu").dropdown({target:t,position:"left",onSelect:function(e){var t=e.attr("ac");Designer.layerShapes(t)}})}}),$("#po-flow-shape-group").button({onClick:function(e,t){$("#po-flow-shape-group-menu").dropdown({target:t,position:"left",onSelect:function(e){var t=e.attr("ac");"group"==t?Designer.group():"ungroup"==t&&Designer.ungroup()}})}}),$("#po-flow-dist-align").button({onClick:function(e,t){$("#po-flow-dist-align-menu").dropdown({target:t,position:"left",onSelect:function(e){var t=e.attr("al"),o=e.attr("dist");t?Designer.alignShapes(t):o&&Designer.distributeShapes(o)}})}}),$("#po-flow-arrange-match").button({onClick:function(e,t){$("#po-flow-arrange-match-menu").dropdown({target:t,position:"left",onSelect:function(e){var t=e.attr("ac"),o={};e.attr("w"),e.attr("h");"w"==t?o.w="auto":"h"==t?o.h="auto":"wh"==t&&(o.w="auto",o.h="auto"),Designer.matchSize(o)}})}}),$("#po-flow-more-tool").button({onClick:function(e,t){$("#po-flow-more-tool-menu").dropdown({target:t,position:"left",onSelect:function(e){var t=e.attr("ac");Dock.show(t)}})}}),device.indexOf("mobi")>-1&&($("#po-chart-toolbar-type").button({onClick:function(e,t){var o=Utils.getSelectedShapeIds()[0],n=Model.getShapeById(o).name,a=_chartconfig.changeType[n];if(a){for(var i="",r=0,s=Array.from(new Set(a.map(function(e){return e.split("_").slice(1,2).join("")})));r<s.length;r++){var l=s[r];i+='<div class="chartType" type="'.concat(l,'">\n                                <div class="title">').concat(_chartconfig.typeToTitle[l],'</div>\n                                <div class="content"></div>\n                            </div>')}$("#po-chart-toolbar-type-menu").html(i);var c,p=_createForOfIteratorHelper(a);try{for(p.s();!(c=p.n()).done;){var d=c.value,h=d.split("_").slice(1,2).join("");$('\n                                <div class="po-menu-item" ac="'.concat(d,'" onClick = "Designer.setChartType(\'').concat(d,'\')">\n                                <div class="po-menu-item-box">\n                                    <img src="').concat(staticBasePath,"/assets/images/designer/chart/").concat(d,'.png" alt="" />\n                                </div>\n                                </div>\n                            ')).appendTo("#po-chart-toolbar-type-menu>.chartType[type="+h+"]>.content")}}catch(u){p.e(u)}finally{p.f()}}else $("#po-chart-toolbar-type-menu").html("");$("#po-chart-toolbar-type-menu").dropdown({target:t,position:"left"})}}),$("#po-chart-toolbar-data").button({onClick:function(e,t){Designer.painter.createPanel()}})),$("#po-flow-lane-num").spinner({min:0,max:20,width:"50",onChange:function(e){Schema.shapes.verticalPool?Designer.setLaneNum(e):bigPipe.render({js:[staticBasePath+"/diagrams/categories/lane.js"]},function(){Schema.init(!0),Designer.setLaneNum(e)})}}),$("#bar_pool_horizontal").off("click").on("click",function(){for(var e=!1,t=0;t<Schema.categories.length;t++){"lane"==Schema.categories[t].name&&(e=!0)}e?Designer.setPoolOrientation("horizontal"):Designer.renderSchemaJs("lane",function(){Designer.setPoolOrientation("horizontal")})}),$("#po-flow-lane-vertical").button({onClick:function(e,t){Designer.setPoolOrientation("vertical")}}),$("#po-flow-lane-horizontal").button({onClick:function(e,t){Designer.setPoolOrientation("horizontal")}}),$("#po-flow-lane-text-vertical").button({onClick:function(e,t){Designer.setPoolText("horizontal")}}),$("#po-flow-lane-text-horizontal").button({onClick:function(e,t){Designer.setPoolText("vertical")}}),$("#po-flow-grid-row").spinner({min:1,max:40,step:1,width:50,onChange:function(e){var t={type:"row",val:e-Utils.getSelected()[0].path.length};Designer.setGridNum(t)}}),$("#po-flow-grid-column").spinner({min:1,max:40,step:1,width:50,onChange:function(e){var t={type:"column",val:e-Utils.getSelected()[0].path[0].length};Designer.setGridNum(t)}}),$("#po-flow-column-before").button({onClick:function(){Utils.getSelected()[0].path[0].length;var e=Utils.gridSelectObj,t={type:"column",val:1,columnIndex:e.columns[0]+1,rowIndex:e.rows[0]+1,direction:"before"};Designer.setGridNum(t)}}),$("#po-flow-column-after").button({onClick:function(){var e=Utils.gridSelectObj,t={type:"column",val:1,columnIndex:e.columns[e.columns.length-1]+1,rowIndex:e.rows[e.rows.length-1]+1,direction:"after"};Designer.setGridNum(t)}}),$("#po-flow-row-before").button({onClick:function(){var e=Utils.gridSelectObj,t={type:"row",val:1,columnIndex:e.columns[0]+1,rowIndex:e.rows[0]+1,direction:"before"};Designer.setGridNum(t)}}),$("#po-flow-row-after").button({onClick:function(){var e=Utils.gridSelectObj,t={type:"row",val:1,columnIndex:e.columns[e.columns.length-1]+1,rowIndex:e.rows[e.rows.length-1]+1,direction:"after"};Designer.setGridNum(t)}}),$("#po-flow-del-column").button({onClick:function(){var e=Utils.gridSelectObj,t={type:"column",val:-1,columnIndex:e.columns[e.columns.length-1]+1,rowIndex:e.rows[e.rows.length-1]+1};Designer.setGridNum(t)}}),$("#po-flow-del-row").button({onClick:function(){var e=Utils.gridSelectObj,t={type:"row",val:-1,columnIndex:e.columns[e.columns.length-1]+1,rowIndex:e.rows[e.rows.length-1]+1};Designer.setGridNum(t)}}),$("#po-flow-grid-marge").button({onClick:function(){Designer.mergeGrid()}}),$("#po-flow-grid-split").button({onClick:function(){Designer.splitGrid()}}),$("#po-flow-grid-fill").colorButton({onSelect:function(e){Designer.setFillStyle({type:"solid",color:e})}}),$("#po-flow-uitab-num").spinner({min:1,max:40,step:1,width:50,onChange:function(e){for(var t=Utils.getSelectedShapeIds(),o=Model.getShapeById(t[0]),n=0,a=0;a<o.path.length-1;a++){if(void 0===o.path[a].fillStyle){n=a;break}}var i=o.path[o.path.length-1];if(e!=o.path.length-1){n>e-1&&(n=e-1,$("#change_uitab_index").spinner("setValue",e)),o.path=[];var r=[];for(a=0;a<e;a++){var s={actions:[{action:"move",x:"w/"+e+"*"+a,y:"h"},{action:"line",x:"w/"+e+"*"+a,y:7},{action:"quadraticCurve",x1:"w/"+e+"*"+a,y1:0,x:"w/"+e+"*"+a+"+7",y:0},{action:"line",x:"w/"+e+"*"+(a+1)+"-7",y:0},{action:"quadraticCurve",x1:"w/"+e+"*"+(a+1),y1:0,x:"w/"+e+"*"+(a+1),y:7},{action:"line",x:"w/"+e+"*"+(a+1),y:"h"}]};if(a!=n&&(s.fillStyle={color:"r-20,g-20,b-20"},s.actions.push({action:"close"})),o.path.push(s),a<o.textBlock.length){var l=o.textBlock[a];l.position.x="w/"+e+"*"+a+"+5",l.position.w="w/"+e+"-10",r.push(l)}else r.push({position:{x:"w/"+e+"*"+a+"+5",y:5,w:"w/"+e+"-10",h:"h-10"},text:"Tab "+(a+1)})}o.textBlock=r,o.path.push(i),Schema.initShapeFunctions(o),Model.update(o),Designer.painter.renderShape(o),UI.update()}}}),$("#po-flow-uitab-select-num").spinner({min:1,max:40,step:1,width:50,onChange:function(e){for(var t=Utils.getSelectedShapeIds(),o=Model.getShapeById(t[0]),n=0,a=0;a<o.path.length-1;a++){if(void 0===o.path[a].fillStyle){n=a;break}}n!=e-1&&(o.path[n].fillStyle={color:"r-20,g-20,b-20"},o.path[n].actions.push({action:"close"}),delete o.path[e-1].fillStyle,o.path[e-1].actions.splice(6,1),Schema.initShapeFunctions(o),Model.update(o),Designer.painter.renderShape(o),UI.update())}}),$("#po-flow-uigrid-row").spinner({min:1,max:20,step:1,width:50,onChange:function onChange(count){for(var shapeIds=Utils.getSelectedShapeIds(),shape=Model.getShapeById(shapeIds[0]),row=1,column=1,gridPath=shape.path[2],i=0;i<gridPath.actions.length-1;i++){var pathAction=gridPath.actions[i];"move"==pathAction.action&&0==pathAction.x?row++:"move"==pathAction.action&&0==pathAction.y&&column++}$("#grid_dom").remove();for(var props=shape.props,x=props.x,y=props.y,w=props.w,h=props.h,path2=shape.path[2].actions,rowArr=[.5],columnArr=[.5],i=0;i<path2.length;i++){var pathItem=path2[i];if(0==pathItem.x){var pathY=eval("var w="+w+";var h = "+h+";"+pathItem.y);rowArr.push(pathY)}else if(0==pathItem.y){var pathX=eval("var w="+w+";var h = "+h+";"+pathItem.x);columnArr.push(pathX)}}if(rowArr.push(h+.5),columnArr.push(w+.5),count>row){for(var rowLen=rowArr.length,hVal=rowArr[rowLen-1]-rowArr[rowLen-2],i=rowLen-1;i<count;i++)rowArr.push(rowArr[rowArr.length-1]+hVal);h=rowArr[rowArr.length-1]-.5}else if(count<row){for(var rowLen=rowArr.length,i=count;i<rowLen-1;i++)rowArr.splice(rowArr.length-1,1);h=rowArr[rowArr.length-1]-.5}var headActions=shape.path[1].actions;headActions[2].y="Math.floor(h*"+rowArr[1]/h+")+0.5",headActions[3].y="Math.floor(h*"+rowArr[1]/h+")+0.5";for(var gridActions=[],i=1;i<rowArr.length-1;i++){var yFormla="Math.floor(h*"+rowArr[i]/h+")+0.5";gridActions.push({action:"move",x:0,y:yFormla}),gridActions.push({action:"line",x:"w",y:yFormla})}for(var i=0;i<shape.path[2].actions.length;i++){var action=shape.path[2].actions[i];0!=action.y&&"h"!=action.y||gridActions.push(action)}for(var textBlockArr=[],textNum=0,i=0;i<rowArr.length-1;i++)for(var j=0;j<columnArr.length-1;j++){var textX="Math.floor(w*"+columnArr[j]/w+")",textW="Math.floor(w*"+(columnArr[j+1]-columnArr[j])/w+")",textY="Math.floor(h*"+rowArr[i]/h+")",textH="Math.floor(h*"+(rowArr[i+1]-rowArr[i])/h+")",position={x:textX,y:textY,w:textW,h:textH},text="";shape.textBlock[textNum]&&(text=shape.textBlock[textNum].text?shape.textBlock[textNum].text:""),textBlockArr.push({position:position,text:text}),textNum++}shape.textBlock=textBlockArr,shape.path[2].actions=gridActions,shape.props.w=w,shape.props.h=h,Schema.initShapeFunctions(shape),Model.update(shape),Designer.painter.renderShape(shape),row=count,Utils.unselect(),Utils.selectShape(shape.id),$("#change_uigrid_row input").focus()}}),$("#po-flow-uigrid-column").spinner({min:1,max:20,step:1,width:50,onChange:function onChange(count){for(var shapeIds=Utils.getSelectedShapeIds(),shape=Model.getShapeById(shapeIds[0]),row=1,column=1,gridPath=shape.path[2],i=0;i<gridPath.actions.length-1;i++){var pathAction=gridPath.actions[i];"move"==pathAction.action&&0==pathAction.x?row++:"move"==pathAction.action&&0==pathAction.y&&column++}$("#grid_dom").remove();for(var props=shape.props,x=props.x,y=props.y,w=props.w,h=props.h,path2=shape.path[2].actions,rowArr=[.5],columnArr=[.5],i=0;i<path2.length;i++){var pathItem=path2[i];if(0==pathItem.x){var pathY=eval("var w="+w+";var h = "+h+";"+pathItem.y);rowArr.push(pathY)}else if(0==pathItem.y){var pathX=eval("var w="+w+";var h = "+h+";"+pathItem.x);columnArr.push(pathX)}}if(rowArr.push(h+.5),columnArr.push(w+.5),count>column){for(var columnLen=columnArr.length,wVal=columnArr[columnLen-1]-columnArr[columnLen-2],i=columnLen-1;i<count;i++)columnArr.push(columnArr[columnArr.length-1]+wVal);w=columnArr[columnArr.length-1]-.5}else if(count<column){for(var columnLen=columnArr.length,i=count;i<columnLen-1;i++)columnArr.splice(columnArr.length-1,1);w=columnArr[columnArr.length-1]-.5}for(var gridActions=[],i=0;i<shape.path[2].actions.length;i++){var action=shape.path[2].actions[i];0!=action.x&&"w"!=action.x||gridActions.push(action)}for(var i=1;i<columnArr.length-1;i++){var xFormla="Math.floor(w*"+columnArr[i]/w+")+0.5";gridActions.push({action:"move",x:xFormla,y:0}),gridActions.push({action:"line",x:xFormla,y:"h"})}for(var textBlockArr=[],textNum=0,i=0;i<rowArr.length-1;i++)for(var j=0;j<columnArr.length-1;j++){var textX="Math.floor(w*"+columnArr[j]/w+")",textW="Math.floor(w*"+(columnArr[j+1]-columnArr[j])/w+")",textY="Math.floor(h*"+rowArr[i]/h+")",textH="Math.floor(h*"+(rowArr[i+1]-rowArr[i])/h+")",position={x:textX,y:textY,w:textW,h:textH},text="";count>column?count>j+(count-column)?(text=shape.textBlock[textNum].text?shape.textBlock[textNum].text:"",textNum++):0==i&&(text="标题"+(j+1)):count<column&&(text=shape.textBlock[textNum].text?shape.textBlock[textNum].text:"",textNum++,count==j+1&&(textNum+=column-count)),textBlockArr.push({position:position,text:text})}shape.textBlock=textBlockArr,shape.path[2].actions=gridActions,shape.props.w=w,shape.props.h=h,Schema.initShapeFunctions(shape),Model.update(shape),Designer.painter.renderShape(shape),column=count,UI.hideShapeOptions(),Utils.unselect(),Utils.selectShape(shape.id),$("#change_uigrid_column input").focus()}}),$("#panel-more-shape").off().on("click",function(e){UI.showShapesManage()}),$("#po-tool-search-text").button({onClick:function(e,t){UI.showSearchReplace()}}),$("#po-tool-dock-button").button({onClick:function(e,t){if($("#po-tool-dock-button").hasClass("active"))Dock.hide();else{var o=Utils.getSelectedIds().length>0?"shape":"page";Dock.show(o),Dock.update()}}}),$("#po-tool-collapse-button").button({onClick:function(e,t){UI.toogleTitleBar()?t.attr("title","展开"):t.attr("title","折叠");setTimeout(function(){PoGuide&&!PoGuide.config.isClose&&PoGuide.show(PoGuide.step),$(".po-guide-quot").length>0&&searchGuide.show(searchGuide.tool)},200)}}),$(".po-extend-toolbar").off("mousedown touchstart").on("mousedown touchstart",function(e){e.stopPropagation()}),Designer.events.push("selectChanged",0),Designer.events.push("clipboardChanged",0),Designer.events.push("undoStackChanged",0),Designer.events.push("redoStackChanged",0)},update:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var t,o,n,a,i,r,s,l,c,p,d,h,u,f,g,m,b,y,v,k,w,x,S,C,I,D,_,A,U,M,T,P,j,O,L,B,F,z,q,N;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Utils.getSelectedIds(),o=t.length,n=Utils.getSelectedLinkerIds(),a=n.length,i=Utils.getSelectedShapeIds(),r=i.length,s=Utils.getSelectedLockedIds().length,l=Utils.getSelectedGroups().length,c=Utils.getSelectedGroupsAndShapes().length,p=Utils.getSelectedLanes().length,d=$("#header-edit-menu"),h=$("#header-arrange-menu"),u=$("#header-insert-menu"),e.next=15,clipboard.get();case 15:if(f=e.sent,f.content&&d.children("li[ac=paste]").menuitem("enable"),$("#po-flow-page-fill").colorButton("setColor",Model.define.page.backgroundColor),0!=o){e.next=51;break}$("#po-toolbar").find(".selected").removeClass("selected"),Utils.selectCallback?($("#po-flow-brush").button("enable"),$("#po-flow-brush").button("select"),$("#header-edit-menu").children("li[ac=brush]").menuitem("enable"),$("#header-edit-menu").children("li[ac=brush]").menuitem("select")):($("#po-flow-brush").button("disable"),$("#header-edit-menu").children("li[ac=brush]").menuitem("disable")),$("#po-flow-insert-link").button("disable"),$("#po-flow-shape-delete").button("disable"),$("#po-flow-font-family").button("disable"),$("#po-flow-font-size").button("disable"),$("#po-flow-font-bold").button("disable"),$("#po-flow-font-italic").button("disable"),$("#po-flow-font-underline").button("disable"),$("#po-flow-font-middleline").button("disable"),$("#po-flow-font-color").button("disable"),$("#po-flow-font-orientation").button("disable"),$("#po-flow-font-align").button("disable"),$("#po-flow-linker-color").button("disable"),$("#po-flow-linker-width").button("disable"),$("#po-flow-linker-style").button("disable"),$("#po-flow-layer-arrange").button("disable"),d.children("li[ac=cut]").menuitem("disable"),d.children("li[ac=copy]").menuitem("disable"),d.children("li[ac=duplicate]").menuitem("disable"),d.children("li[ac=brush]").menuitem("disable"),d.children("li[ac=defaultStyle]").menuitem("disable"),d.children("li[ac=delete]").menuitem("disable"),h.children("li[ac=front]").menuitem("disable"),h.children("li[ac=back]").menuitem("disable"),h.children("li[ac=forward]").menuitem("disable"),h.children("li[ac=backward]").menuitem("disable"),h.children("li[ac=lock]").menuitem("disable"),u.children("li[ac=equation]").menuitem("disable"),e.next=93;break;case 51:if($("#po-flow-brush").button("enable"),Utils.selectCallback&&$("#po-flow-brush").button("select"),$("#po-flow-shape-delete").button("enable"),$("#po-flow-font-family").button("enable"),$("#po-flow-font-size").button("enable"),$("#po-flow-font-bold").button("enable"),$("#po-flow-font-italic").button("enable"),$("#po-flow-font-underline").button("enable"),$("#po-flow-font-middleline").button("enable"),$("#po-flow-font-color").button("enable"),$("#po-flow-font-align").button("enable"),$("#po-flow-linker-color").button("enable"),$("#po-flow-linker-width").button("enable"),$("#po-flow-linker-style").button("enable"),$("#po-flow-layer-arrange").button("enable"),g=Model.getShapeById(t[0])){e.next=69;break}return e.abrupt("return");case 69:"linker"==g.name?(m=Utils.getLinkerFontStyle(g.fontStyle),b=Utils.getLinkerLineStyle(g.lineStyle)):(m=Utils.getShapeFontStyleByEditor(g),b=Utils.getShapeLineStyle(g.lineStyle)),m.fontFamily.indexOf("微软雅黑")>-1&&(m.fontFamily="微软雅黑"),$("#po-flow-font-family").button("setText",m.fontFamily),$("#po-flow-font-size").spinner("setValue",m.size+"px"),m.bold?$("#po-flow-font-bold").button("select"):$("#po-flow-font-bold").button("unselect"),m.italic?$("#po-flow-font-italic").button("select"):$("#po-flow-font-italic").button("unselect"),m.underline?$("#po-flow-font-underline").button("select"):$("#po-flow-font-underline").button("unselect"),$("#po-flow-font-color").button("setColor",m.color),$("#po-flow-linker-color").button("setColor",b.lineColor),$("#po-flow-font-align").attr("text-align",m.textAlign),$("#po-flow-font-align").attr("v-align",m.vAlign),$("#po-flow-line-height").attr("line-height",m.lineHeight),$("#po-flow-linker-width").attr("line-width",b.lineWidth),$("#po-flow-linker-style").attr("line-style",b.lineStyle),d.children("li[ac=cut]").menuitem("enable"),d.children("li[ac=copy]").menuitem("enable"),d.children("li[ac=duplicate]").menuitem("enable"),d.children("li[ac=brush]").menuitem("enable"),d.children("li[ac=delete]").menuitem("enable"),h.children("li[ac=front]").menuitem("enable"),h.children("li[ac=back]").menuitem("enable"),h.children("li[ac=forward]").menuitem("enable"),h.children("li[ac=backward]").menuitem("enable"),h.children("li[ac=lock]").menuitem("enable");case 93:if(0!=r){e.next=99;break}$("#po-flow-fill-color").button("disable"),$("#po-flow-line-height").button("disable"),$(".po-extend-toolbar").removeClass("show"),e.next=135;break;case 99:if($("#po-flow-fill-color").button("enable"),$("#po-flow-line-height").button("enable"),$("#po-flow-linker-width-menu li[ac=0]").menuitem("enable"),g=Model.getShapeById(i[0]),y=Utils.getShapeFillStyle(g.fillStyle),m=Utils.getLinkerFontStyle(g.fontStyle),v=$("#shape_controls"),k=parseFloat(v.css("left")),w=parseFloat(v.css("top")),parseFloat(v.width()),"solid"==y.type?$("#po-flow-fill-color").button("setColor",y.color):"gradient"==y.type&&$("#po-flow-fill-color").button("setColor",y.endColor),g.name.indexOf("Pool")>-1?($("#po-lane-toolbar").addClass("show"),x=Utils.getLanesByPool(g),S=x.length,$("#po-flow-lane-num").spinner("setValue",S),g.name.indexOf("vertical")>-1?($("#po-flow-lane-vertical").button("select"),$("#po-flow-lane-horizontal").button("unselect")):($("#po-flow-lane-vertical").button("unselect"),$("#po-flow-lane-horizontal").button("select")),"horizontal"==g.fontStyle.orientation?($("#po-flow-lane-text-vertical").button("select"),$("#po-flow-lane-text-horizontal").button("unselect")):($("#po-flow-lane-text-vertical").button("unselect"),$("#po-flow-lane-text-horizontal").button("select")),$("#po-lane-toolbar").css({left:k,top:w-45,"z-index":Model.maxZIndex+4,transform:"scale("+1..restoreScale()+")",transformOrigin:"left bottom"}).show()):$("#po-lane-toolbar").removeClass("show"),g.name.indexOf("grid")>-1?($("#po-grid-toolbar").addClass("show"),$("#po-grid-toolbar").css({left:k,top:w-45,"z-index":Model.maxZIndex+4,transform:"scale("+1..restoreScale()+")",transformOrigin:"left bottom"}).show(),C=g.path.length,I=g.path[0].length,$("#po-flow-grid-row").spinner("setValue",C),$("#po-flow-grid-column").spinner("setValue",I),Utils.gridSelectObj.indexs.length>0?($("#po-flow-column-before").button("enable"),$("#po-flow-column-after").button("enable"),$("#po-flow-row-before").button("enable"),$("#po-flow-row-after").button("enable"),$("#po-flow-del-column").button("enable"),$("#po-flow-del-row").button("enable"),$(".grid-toolbar-group-one").show()):($("#po-flow-column-before").button("disable"),$("#po-flow-column-after").button("disable"),$("#po-flow-row-before").button("disable"),$("#po-flow-row-after").button("disable"),$("#po-flow-del-column").button("disable"),$("#po-flow-del-row").button("disable"),$(".grid-toolbar-group-one").hide()),C>=40&&($("#po-flow-row-before").button("disable"),$("#po-flow-row-after").button("disable")),I>=40&&($("#po-flow-column-before").button("disable"),$("#po-flow-column-after").button("disable")),C<=1&&$("#po-flow-del-row").button("disable"),I<=1&&$("#po-flow-del-column").button("disable"),D=Utils.isMergeGrid(),_=Utils.isMergeGrid(),D||_?($(".grid-toolbar-group-two").show(),D?$("#po-flow-grid-marge").button("enable"):$("#po-flow-grid-marge").button("disable"),_?$("#po-flow-grid-split").button("enable"):$("#po-flow-grid-split").button("disable")):$(".grid-toolbar-group-two").hide()):$("#po-grid-toolbar").removeClass("show"),"uiTab"!=g.name){e.next=132;break}$("#po-uitab-toolbar").addClass("show"),$("#po-uitab-toolbar").css({left:k,top:w-45,"z-index":Model.maxZIndex+4,transform:"scale("+1..restoreScale()+")",transformOrigin:"left bottom"}).show(),A=0,U=0;case 119:if(!(U<g.path.length-1)){e.next=127;break}if(void 0!==g.path[U].fillStyle){e.next=124;break}return A=U+1,e.abrupt("break",127);case 124:U++,e.next=119;break;case 127:$("#po-flow-uitab-num").spinner("setValue",g.path.length-1),$("#po-flow-uitab-select-num").spinner("setValue",A),$("#po-flow-uitab-select-num").spinner("setOptions",{max:g.path.length-1}),e.next=133;break;case 132:$("#po-uitab-toolbar").removeClass("show");case 133:if("uiGrid"==g.name){for($("#po-uigrid-toolbar").addClass("show"),$("#po-uigrid-toolbar").css({left:k,top:w-45,"z-index":Model.maxZIndex+4,transform:"scale("+1..restoreScale()+")",transformOrigin:"left bottom"}).show(),M=1,T=1,P=g.path[2],U=0;U<P.actions.length-1;U++)"move"==(j=P.actions[U]).action&&0==j.x?M++:"move"==j.action&&0==j.y&&T++;$("#po-flow-uigrid-row").spinner("setValue",M),$("#po-flow-uigrid-column").spinner("setValue",T)}else $("#po-uigrid-toolbar").removeClass("show");1==r&&g.name.indexOf("chart_")>-1&&(O=[{txt:"切换类型",icon:"&#xe72c;",key:"changeType"},{txt:"",icon:"&#xe92c;",key:"editData"}],L=g.name,B=_chartconfig.changeType[L],"pc"==device?(UI.renderSubMenu(B,O),UI.renderSubMenuPos({top:23}),$(".pop-sub-editor>div").removeClass("active"),$("#po-flow-dock-layout-chartdata").hasClass("hide")||Dock.hide()):device.indexOf("mobi")>-1&&(B?$("#po-chart-toolbar-type").removeClass("disabled"):$("#po-chart-toolbar-type").addClass("disabled"),$("#po-chart-toolbar").addClass("show")));case 135:0==s?h.children("li[ac=unlock]").menuitem("disable"):h.children("li[ac=unlock]").menuitem("enable"),0==a?($("#po-flow-linker-type").button("disable"),$("#po-flow-linker-beginarrow").button("disable"),$("#po-flow-linker-endarrow").button("disable")):($("#po-flow-linker-type").button("enable"),$("#po-flow-linker-beginarrow").button("enable"),$("#po-flow-linker-endarrow").button("enable"),g=Model.getShapeById(n[0]),b=Utils.getLinkerLineStyle(g.lineStyle),F=$("#po-flow-linker-type-menu [ac="+g.linkerType+"]").text(),$("#po-flow-linker-type").button("setText",F),$("#po-flow-linker-type").attr("line-type",g.linkerType),z=$("#po-flow-linker-beginarrow-menu [ac="+b.beginArrowStyle+"]").find(".po-diagraming-icons").html(),$("#po-flow-linker-beginarrow").button("setText",z),$("#po-flow-linker-beginarrow").attr("arrow",b.beginArrowStyle),q=$("#po-flow-linker-endarrow-menu [ac="+b.endArrowStyle+"]").find(".po-diagraming-icons").html(),$("#po-flow-linker-endarrow").button("setText",q),$("#po-flow-linker-endarrow").attr("arrow",b.endArrowStyle),$("#po-flow-linker-width-menu li[ac=0]").menuitem("disable")),1==o||p>=2?($("#po-flow-dist-align").button("disable"),h.children("li[ac=arrange]").menuitem("disable"),d.children("li[ac=defaultStyle]").menuitem("enable")):o<2?($("#po-flow-shape-group").button("disable"),h.children("li[ac=group]").menuitem("disable"),$("#po-flow-dist-align").button("disable"),h.children("li[ac=arrange]").menuitem("disable")):($("#po-flow-shape-group").button("enable"),$("#po-flow-shape-group-menu [ac='group']").menuitem("enable"),h.children("li[ac=group]").menuitem("enable"),$("#po-flow-dist-align").button("enable"),$("#po-flow-dist-align-menu li").menuitem("enable"),h.children("li[ac=arrange]").menuitem("enable"),h.find("[dist]").menuitem("enable"),h.find("[al]").menuitem("enable")),c<3&&($("#po-flow-dist-align-menu [dist]").menuitem("disable"),h.find("[dist]").menuitem("disable")),0==l?($("#po-flow-shape-group-menu [ac='ungroup']").menuitem("disable"),h.children("li[ac=ungroup]").menuitem("disable")):($("#po-flow-shape-group-menu [ac='ungroup']").menuitem("enable"),h.children("li[ac=ungroup]").menuitem("enable")),r<2||p>0?($("#po-flow-arrange-match").button("disable"),h.children("li[ac=match]").menuitem("disable")):($("#po-flow-arrange-match").button("enable"),h.children("li[ac=match]").menuitem("enable")),1==r&&((g=Model.getShapeById(i[0])).name.startsWith("chart_")||"standardImage"==g.name?u.children("li[ac=equation]").menuitem("disable"):u.children("li[ac=equation]").menuitem("enable"),$("#po-flow-insert-link").button("enable")),Designer.events.push("downloadPartShow"),UI.toolbarResize(),device.indexOf("mobi")>-1&&(N=$("#po-toolbar .po-toolbar-container").children(".po-tool-devider"),0==o?(N.eq(N.length-2).css("display","none"),N.eq(N.length-1).css("display","none")):(N.eq(N.length-2).css("display","black"),N.eq(N.length-1).css("display","black")));case 146:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),renderSubMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===$(".pop-sub-editor").length){var o='<div class="pop-sub-editor">';for(var n in t)"changeType"==t[n].key&&void 0===e?o+='<div class="disabled" data-key="'.concat(t[n].key,'">'):o+='<div data-key="'.concat(t[n].key,'">'),t[n].txt&&(o+="<div>".concat(t[n].txt,"</div>")),t[n].icon&&(o+='<div class="po-diagraming-icons '.concat(t[n].key,'">').concat(t[n].icon,"</div>")),o+="</div>",n!=t.length-1&&(o+='<div class="po-tool-devider"></div>');o+='</div>\n            <div id="pop-sub-editor-menu"></div>\n            ',$(o).appendTo("#designer_canvas")}else void 0!==e?$(".pop-sub-editor>div[data-key='changeType']").removeClass("disabled"):$(".pop-sub-editor>div[data-key='changeType']").addClass("disabled");$(".pop-sub-editor>div[data-key='changeType']").unbind("mousedown touchend").bind("mousedown touchend",function(t){t.stopPropagation();var o=Utils.getSelectedShapeIds()[0],n=Model.getShapeById(o).name;(e=_chartconfig.changeType[n])&&UI.renderChartsType(e)}),$(".pop-sub-editor>div[data-key='editData']").unbind("mousedown").bind("mousedown",function(e){e.stopPropagation(),Designer.painter.createPanel()}),$("#pop-sub-editor-menu").unbind("mousedown").bind("mousedown",function(e){e.stopPropagation();var t=0===$(e.target).children().length||"po-menu-item-box"==e.target.className?$(e.target).parents(".po-menu-item:first"):e.target,o=$(t).attr("ac");Designer.setChartType(o),$("#pop-sub-editor-menu").removeClass("show"),$(".pop-sub-editor>div[data-key='changeType']").removeClass("active")})},renderSubMenuPos:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=$(".pop-sub-editor"),n=$("#shape_controls"),a=$("#pop-sub-editor-menu"),i=parseFloat(n.css("left")),r=parseFloat(n.css("top")),s=parseFloat(n.width()),l=null!==(e=null==t?void 0:t.top)&&void 0!==e?e:0;o.css({left:i+parseFloat(s/2),top:r-40-l,"z-index":Model.maxZIndex+4}).show(),a.css({left:i+parseFloat(s/2),top:r,"z-index":Model.maxZIndex+4})},renderChartsType:function(e){if(e){for(var t="",o=0,n=Array.from(new Set(e.map(function(e){return e.split("_").slice(1,2).join("")})));o<n.length;o++){var a=n[o];t+='<div class="chartType" type="'.concat(a,'">\n                    <div class="title">').concat(_chartconfig.typeToTitle[a],'</div>\n                    <div class="content"></div>\n                </div>')}$("#pop-sub-editor-menu").html(t);var i,r=_createForOfIteratorHelper(e);try{for(r.s();!(i=r.n()).done;){var s=i.value,l=s.split("_").slice(1,2).join("");$('\n                    <div class="po-menu-item" ac="'.concat(s,'">\n                    <div class="po-menu-item-box">\n                        <img src="').concat(staticBasePath,"/assets/images/designer/chart/").concat(s,'.png" alt="" />\n                    </div>\n                    </div>\n                ')).appendTo("#pop-sub-editor-menu>.chartType[type="+l+"]>.content")}}catch(c){r.e(c)}finally{r.f()}$("#pop-sub-editor-menu").toggleClass("show"),$(".pop-sub-editor>div:not([data-key='changeType'])").removeClass("active"),Dock.hide(),$(".pop-sub-editor>div[data-key='changeType']").toggleClass("active")}},toolbarResize:function(){$(".po-toolbar-center").width()>$(".po-toolbar-container").width()?($(".po-toolbar-container").css({left:0,right:"initial"}),$(".po-slide-left").hide(),$(".po-slide-right").hide()):0!==$(".po-toolbar-container").position().left?($(".po-slide-left").show(),$(".po-slide-right").hide()):($(".po-slide-left").hide(),$(".po-slide-right").show())},showShapeOptions:function(){var e=Utils.getSelectedShapeIds();if(UI.hideShapeOptions(),1==e.length){var t=Model.getShapeById(e[0]);if(t.attribute.collapsable){var o=$("#shape-opt-collapsed-box");if(0==o.length){var n=t.attribute.collapsed?"&#xe9a9;":"&#xe9a8;",a=t.attribute.collapsed?"展开":"收缩";(o=$("<div id='shape-opt-collapsed-box' title="+a+" class='shape-opt-box shape-opt-collapsed-box'><span class='po-diagraming-icons'>"+n+"</span></div>").appendTo("#designer_canvas")).on("mousedown",function(e){e.stopPropagation()}).on("mousemove",function(e){e.stopPropagation()}).on("click",function(e){e.stopPropagation(),function(){MessageSource.beginBatch();var e=[];t.attribute.markers||(t.attribute.markers=[]);if(t.attribute.collapsed){for(var n=Utils.getCollapsedShapesById(t.id),a=0;a<n.length;a++){var i=n[a];delete i.attribute.collapseBy,e.push(i),Designer.painter.renderShape(i)}for(var r=Utils.getOutlinkers(n),a=0;a<r.length;a++){var s=r[a];delete s.attribute,e.push(s),Designer.painter.renderLinker(s)}Utils.removeFromArray(t.attribute.markers,"expand"),t.attribute.container=!0,t.attribute.collapsed=!1;var l=t.attribute.collapseW?t.attribute.collapseW:400,c=t.attribute.collapseH?t.attribute.collapseH:300;Designer.setShapeProps({w:l,h:c},[t]),o.attr("title","收缩"),o.children(".po-diagraming-icons").html("&#xe9a8;")}else{for(var p=Utils.getContainedShapes([t]),a=0;a<p.length;a++){var i=p[a];void 0===i.attribute&&(i.attribute={}),i.attribute.collapseBy=t.id,e.push(i),Designer.painter.renderShape(i)}for(var r=Utils.getOutlinkers(p),a=0;a<r.length;a++){var s=r[a];s.attribute={collapseBy:t.id},e.push(s),Designer.painter.renderLinker(s)}t.attribute.markers.push("expand"),t.attribute.container=!1,t.attribute.collapsed=!0,t.attribute.collapseW=t.props.w,t.attribute.collapseH=t.props.h,Designer.setShapeProps({w:120,h:80},[t]),o.attr("title","展开"),o.children(".po-diagraming-icons").html("&#xe9a9;")}e.length>0&&Model.updateMulti(e);Utils.selectShape(t.id),MessageSource.commit()}()})}o.show();var i=Utils.getShapeBox(t);o.css({left:(i.x+i.w/2-20).toScale(),top:(i.y+i.h+10).toScale(),"z-index":Model.orderList.length+1})}}},hideShapeOptions:function(){$(".shape-opt-box").hide()},showShapesManage:function(){Schema.isDialog=!0,$("#po-flow-shapes-dialog").dialog({onClose:function(){Schema.isDialog=!1,$("#po-flow-shapes-dialog .shape-name-container").empty()}});var e=$("#po-flow-shapes-dialog .shape-name-container");$("#shape-name-list li").each(function(t,o){var n=$(o).attr("cate");if(n)if(Schema.network[n])for(var a=0;a<Schema.network[n].length;a++){var i=Schema.network[n][a];e.append("<div id='dialog-shape-"+i+"' class='dialog-shape-con'><div class='dialog-shape-cate-title'>"+i+"</div><div class='dialog-shape-box'></div></div>")}else e.append("<div id='dialog-shape-"+n+"' class='dialog-shape-con'><div class='dialog-shape-cate-title'>"+$(o).find(".po-lable").eq(0).text()+"</div><div class='dialog-shape-box'></div></div>"),"basic"==n&&$("#dialog-shape-"+n).append("<div class='dialog-shape-box-del'></div>")}),$("#po-flow-close-shapes").off().on("click",function(){$("#po-flow-shapes-dialog").dialog("close")}),0==Schema.categories_.length&&(Schema.shapes_=Utils.copy(Schema.shapes),Schema.categories_=Utils.copyArray(Schema.categories),CategoryMapping_=Utils.copy(CategoryMapping)),$("#shape-name-list .po-checkbox").removeClass("checked").each(function(e,t){var o=$(t).attr("po-data");if(CategoryMapping.network&&"network"==o||CategoryMapping.huawei_compute&&"network_huaweiyun"==o||CategoryMapping.ali_app_service&&"network_aliyun"==o||CategoryMapping.tencent_cloud_basic&&"network_tencentcloud"==o||CategoryMapping.aws_analytics&&"network_aws"==o||CategoryMapping.cisco_bulidings&&"network_cisco"==o||CategoryMapping.azure&&"network_azure"==o||CategoryMapping.aws2019_compute&&"network_aws2019"==o||CategoryMapping[o]){$(t).checkbox("check");var n=!0;$(t).parents(".child").find(".po-checkbox").each(function(e,t){$(t).hasClass("checked")||(n=!1)}),n?$(t).parents(".child").siblings(".item-box").children(".po-checkbox").addClass("checked"):$(t).parents(".child").siblings(".item-box").children(".po-checkbox").removeClass("checked")}}),$("#shape-name-list .po-checkbox").off("click.check").on("click.check",function(e){e.stopPropagation(),$(this).checkbox("isChecked")?$(this).checkbox("uncheck"):$(this).checkbox("check"),$(this).hasClass("checked")?$(this).parent().siblings().find(".po-checkbox").addClass("checked"):$(this).parent().siblings().find(".po-checkbox").removeClass("checked");var t=!0;$(this).parents(".child").find(".po-checkbox").each(function(e,o){$(o).hasClass("checked")||(t=!1)}),t?$(this).parents(".child").siblings(".item-box").children(".po-checkbox").addClass("checked"):$(this).parents(".child").siblings(".item-box").children(".po-checkbox").removeClass("checked")}),$("#po-flow-save-shapes").off().on("click",function(){staticBasePath;var e=["standard"];$("#shape-name-list .po-checkbox").each(function(t,o){if($(o).hasClass("checked")){var n=$(o).attr("po-data");"string"==typeof n&&e.push(n)}}),$("#po-flow-shapes-dialog").dialog("close"),UI.setSchema(e)});var t=[];function o(o){if(t.length>1){$("#po-flow-shapes-dialog .shape-name-container").children(".cate-des").remove();var n=t[0];if(CategoryMapping_[n]&&CategoryMapping_[n].content){var a=CategoryMapping_[n].content;e.prepend('<div class="cate-des"><h3>'+a.text+'</h3><div class="img-box" style="background-image: url('+staticBasePath+a.image+')"></div>')}}else{if("uml_common"!=t[0]&&"ui_input"!=t[0]&&"ios_devices"!=t[0]&&"andriod_devices"!=t[0]&&"network"!=t[0])$("#po-flow-shapes-dialog .shape-name-container").children(".cate-des").remove(),(a=CategoryMapping_[o].content)&&e.prepend('<div class="cate-des"><h3>'+a.text+'</h3><div class="img-box" style="background-image: url('+staticBasePath+a.image+')"></div>')}var i=$("#dialog-shape-"+o);i.css("display","block");var r=i.children(".dialog-shape-box"),s=i.children(".dialog-shape-box-del");if(!(r.children().length>0&&"basic"!=o)){r.empty(),s.empty();for(key in Schema.shapes_){var l=Schema.shapes_[key];if(l.category==o&&l.attribute.visible){var c=Designer.config.panelItemWidth;Designer.config.panelItemHeight;("ui"==l.category||"ui_input"==l.category||l.category.indexOf("ios_")>=0||l.category.indexOf("andriod_")>=0)&&(c=30,30);var p="basic"==o?"<span class='del po-diagraming-icons'>&#xe80a;</span>":"",d="basic"==o?"<span class='add po-diagraming-icons'>&#xe80b;</span>":"";if(o.startsWith("chart_")){var h=$("<div shape-name='"+l.name+"' class='item'>"+p+"</div>").appendTo(r);Designer.painter.drawChart(h[0],l,"library")}else{var u=(h=$("<div shape-name='"+l.name+"' class='item'><canvas width='"+c+"' height='"+c+"'></canvas>"+p+"</div>").appendTo(r)).children()[0];if(Schema.initShapePath(l),Schema.initShapeFunctions(l),Designer.painter.drawPanelItem(u,l.name),"basic"==o){var f=$("<div shape-name='"+l.name+"' class='item'><canvas width='"+c+"' height='"+c+"'></canvas>"+d+"</div>").appendTo(s).children()[0];Designer.painter.drawPanelItem(f,l.name),-1==Schema.flowBasicConfig.indexOf(key)?b(key):y(key)}}}}for(var g="",m=0;m<20;m++)g+="<div class='item empt-item' style='height: 0;'></div>";r.append(g),s.append(g),"basic"==o&&(r.find(".del").off("click").on("click",function(e){var t=$(this).parent(".item").attr("shape-name");b(t),Utils.removeFromArray(Schema.flowBasicConfig,t),Server.setBasicConfig(Schema.flowBasicConfig.join(","))}),s.find(".add").off("click").on("click",function(e){var t=$(this).parent(".item").attr("shape-name");y(t),Schema.flowBasicConfig.push(t),Server.setBasicConfig(Schema.flowBasicConfig.join(","))})),isLoading=!1}function b(e){r.children(".item[shape-name="+e+"]").css("display","none"),s.children(".item[shape-name="+e+"]").css("display","block"),$("#shape_panel [shapeName="+e+"]").css("display","none")}function y(e){r.children(".item[shape-name="+e+"]").css("display","block"),s.children(".item[shape-name="+e+"]").css("display","none"),$("#shape_panel [shapeName="+e+"]").css("display","block")}}$("#shape-name-list li").off("click.select").on("click.select",function(e){if(isLoading=!0,e.stopPropagation(),$("#po-flow-shapes-dialog .shape-name-container").children(".dialog-shape-con").css("display","none"),$("#po-flow-shapes-dialog .shape-name-container").children(".cate-des").remove(),t=[],$(this).children(".child").length>0){var n=[];$(this).children(".child").find("li").each(function(e,a){var i=$(a).attr("cate");if(CategoryMapping_[i])if(Schema.network[i])for(var r=0;r<Schema.network[i].length;r++){o(Schema.network[i][r])}else o(i);else n.push(staticBasePath+"/diagrams/categories/"+i+".js");t.push(i)}),bigPipe.render({js:n},function(){for(var e=0,n=t.length;e<n;e++){var a=t[e];if(Schema.network[a])for(var i=0;i<Schema.network[a].length;i++){o(Schema.network[a][i])}else o(a)}})}else{var a=$(this).attr("cate");if(t.push(a),CategoryMapping_[a])if(Schema.network[a])for(var i=0;i<Schema.network[a].length;i++){o(Schema.network[a][i])}else o(a);else bigPipe.render({js:[staticBasePath+"/diagrams/categories/"+a+".js"]},function(){if(Schema.network[a])for(var e=0;e<Schema.network[a].length;e++){o(Schema.network[a][e])}else o(a)})}}),$("#shape-name-list .shape-name-item").eq(0).trigger("click")},toogleTitleBar:function(){var e=$("#po-tool-collapse-button"),t=$(".header").height(),o=$("#po-header").outerHeight(),n=$("#po-toolbar").outerHeight();if(e.hasClass("collapse")){e.removeClass("collapse"),e.children(".po-diagraming-icons").html("&#xe972;"),$(".header").slideDown(200);var a=$(".designer-layout").height();return $(".designer-layout").animate({height:a-t+"px"},200),$(".po-flow-dock-layout").animate({top:n+o},200),!1}e.addClass("collapse"),e.children(".po-diagraming-icons").html("&#xe96f;"),$(".header").slideUp(200);a=$(".designer-layout").height();return $(".designer-layout").animate({height:a+t+"px"},200),$(".po-flow-dock-layout").animate({top:n},200),!0},setSchema:function(e,t){for(var o=[],n=0;n<e.length;n++){var a=e[n];"string"==typeof a&&"standard"!=a&&o.push(staticBasePath+"/diagrams/categories/"+a+".js")}var i={action:"changeSchema",categories:e.join(",")};t||sendMessage.send(i),Schema.empty(),o.push(staticBasePath+"/diagrams/categories/standard.js"),bigPipe.render({js:o},function(){Schema.categories=[];for(var t=0;t<e.length;t++){var o=e[t],n=Schema.network[o];if(n)for(var a=0;a<n.length;a++)Schema.categories.push(CategoryMapping[n[a]]);else Schema.categories.push(CategoryMapping[o])}Schema.init(!0),Designer.initialize.initShapes()})},showThemeSelect:function(){var e=$("#themes-container .themes-box");if(0==e.children(".item-box").length){var t=0,o=Model.define.theme||{};for(var n in Schema.themes){t++;Schema.themes[n];$("<div theme='"+n+"' class='item-box "+(o.name==n?"active":"")+"'><img width='130' height='130' src='"+staticBasePath+"/assets/images/themes/"+t+".svg'/>").appendTo(e).on("click",function(){if(!$(this).hasClass("active")){var t=$(this).attr("theme");e.children(".active").removeClass("active"),$(this).addClass("active"),UI.setTheme(t)}})}e.append("<div class='item-empty-box'></div><div class='item-empty-box'></div><div class='item-empty-box'></div><div class='item-empty-box'></div><div class='item-empty-box'></div>")}},setTheme:function(e){var t=Schema.themes[e];Model.setTheme(t),UI.update(),Designer.events.push("resetBrokenLinker")},setDefaultStyle:function(e){var t=Designer.op.setDefaultStyle();null==t||"error"!=t?(e.find(".po-menu-hotkey").show(),setTimeout(function(){$.toast({text:"默认样式设置成功"})},0)):setTimeout(function(){$.toast({type:"error",text:"当前图形不可设置为默认图形"})},0)},newFile:function(e){Server.newFile(e,function(e){var t=e.chart.chartId,o=e.chart.category,n="/";n="outline"==o?"/outline/"+t:o.indexOf("mind")>-1?"/mindmap/"+t:"/diagraming/"+t,Util.localChange({type:"newfile",chartId:t}),window.open(n,t)});try{buried_point_fn("click","new_function",buried_point.visit.pageName,{"操作":"新建文件","新建类型":"空白文件","文件类型":e})}catch(t){}},rename:function(e){if(e&&""!=chartId){var t=Util.restoreXss(e);if(Util.getCharLength(t)>128)return void $.toast({type:"error",text:"文件名不能超过128个字符"});var o={action:"changeTitle",title:e};sendMessage.send(o),chartObj.title=e,$("title").html(e+"-ProcessOn"),Util.localChange({type:"rename",chartId:chartObj.chartId,title:chartObj.title})}},isSaveAll:!0,save:function(){if(this.isSaveAll){sendMessage.saveOnline(),$.toast({text:"保存成功"}),this.isSaveAll=!1;var e=this;setTimeout(function(){e.isSaveAll=!0},3e4)}},copyFile:function(){Server.copyFile(function(e){var t=e.chart.chartId;Util.localChange({type:"clone",chartId:t}),window.open("/diagraming/"+t)});try{buried_point_fn("click","new_function",buried_point.visit.pageName,{"操作":"克隆文件","文件类型":cate})}catch(e){}},favChart:function(){Server.favChart(function(e){chartObj.favourite=!chartObj.favourite,UI.favouriteFn(chartObj.favourite),$("#header-fav").trigger("mouseover")})},favouriteFn:function(e){e?($("#header-fav").children("span").html("&#xe71e;"),$("#header-fav").attr("original-title","取消收藏"),$("#header-fav").addClass("active")):($("#header-fav").children("span").html("&#xe6b2;"),$("#header-fav").attr("original-title","收藏"),$("#header-fav").removeClass("active"))},insertImage:function(e,t,o){o=0===o?150:o,(t=0===t?150:t)>1e3&&(o=o/t*1e3,t=1e3),o>1e3&&(t=t/o*1e3,o=1e3),t=parseInt(t),o=parseInt(o);var n=$("#designer_layout"),a=n.width()/2+n.offset().left,i=n.height()/2+n.offset().top,r=Utils.getRelativePos(a,i,$("#designer_canvas")),s=r.x.restoreScale()-t/2,l=r.y.restoreScale()-o/2,c=Model.create("standardImage",s<0?0:s,l<0?0:l);c.props.w=t,c.props.h=o,c.fillStyle={type:"image",fileId:e,display:"stretch",imageW:t,imageH:o},Designer.painter.renderShape(c),Model.add(c),Utils.unselect(),Utils.selectShape(c.id)},showInsertLink:function(){if(0!=Utils.getSelected().length){var e=Utils.getSelected()[0],t=e.link||"",o=(e.linkTitle,$("#"+e.id));t?insert.link.render({target:o,type:"url",link:{value:e.link,title:e.linkTitle,type:"url"},position:"bottom"},function(t,o){"remove"==o?UI.removeLink(e.id):UI.setLink(e.id,t.value,t.title)}):insert.link.render({target:o,type:"url",position:"bottom"},function(t,o){UI.setLink(e.id,t.value,t.title)})}},export:function(e,t){if("pnghd"!=e||Designer.events.push("testVip","download")){if(t)for(var o in t)$("#svg_"+t[o])&&$("#svg_"+t[o]).find("svg:first").attr("part","part");else{var n=Model.define.elements;for(var a in n)$("#svg_"+n[a].id)&&$("#svg_"+n[a].id).find("svg:first").removeAttr("part")}if(e.startsWith("pos"))e.indexOf("all")>-1?$("#export_source").val("official_flow_pos"):($("#export_defs").val(JSON.stringify(Model.define)),$("#export_title").val(chartObj.title),$("#export_source").val("official_old_pos")),$("#export_form").attr("action","/chart_image/export/file"),$("#export_type").val("pos"),$("#export_id").val(chartId),$("#export_form").submit(),$("#export_definition").val("");else if(e.startsWith("visio")){var i=0,r=[];function s(t){if(-1==e.indexOf("all"))return r=Model.define,void l();t?injectExtraAsynCall("onDefById",{defId:t.definitionId},function(e){var o=JSON.parse(e.def);o.page.name=PageModel.data[t.definitionId].title,r.push(o),i++,s(PageModel.list[i])}):l()}function l(){VisioPo.exportVsdx({type:"blob",data:r}).then(function(e){var t=document.createElement("a");t.download=(chartObj.title||"未命名文件")+".vsdx",t.href=URL.createObjectURL(e),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)})}"object"!=("undefined"==typeof VisioPo?"undefined":_typeof(VisioPo))?bigPipe.render({js:[staticBasePath+"/assets/js/visio.sdk.umd.js"]},function(){s(PageModel.list[i])}):s(PageModel.list[i])}else"png"==e||"jpg"==e||"pnghd"==e?ExportImage(e,t,function(t){var o,n,a,i,r="jpg"==e?"jpg":"png";o=URL.createObjectURL(function(e,t){for(var o=atob(e.split(",")[1]),n=o.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=o.charCodeAt(i);return new Blob([a],{type:"image/"+t})}(t,r)),n=chartObj.title+"."+r,a=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),(i=document.createElement("a")).setAttribute("download",n),i.setAttribute("href",o),i.setAttribute("target","_blank"),i.dispatchEvent(a)}):"svg"!=e&&"pdfhd"!=e||ExportImage(e,function(t){$("#export_form").attr("action","/chart_image/diagram_export/flow"),$("#export_type").val("pdfhd"==e?"pdfHD":"svg"),$("#export_definition").val(t.content),$("#export_title").val(chartObj.title),$("#export_id").val(chartId),$("#export_width").val(t.w),$("#export_height").val(t.h),$("#export_form").submit(),$("#export_definition").val("")});try{var c=chartObj.orgId?"团队文件":"private"==chartObj.status?"私人文件":"公开文件",p="流程图编辑器";window.location.href.indexOf("down")>=0&&(p="undefined"!=typeof chartObj&&chartObj.orgId?"团队文件页":"个人文件页"),poPoint.collect("export_result",{"操作结果":"成功","文件类型":CategoryMap[chartObj.category],"下载格式":e,"文件属性":c,"页面来源":p})}catch(d){}}else Designer.events.push("vipLimit","download")},print:{data:{loading:!1,svgPos:{w:0,h:0,minX:0,minY:0},pageSize:{w:0,h:0},printSize:{w:1050,h:1485}},init:function(){var e=this,t=this.data;t.loading||(t.loading=!0,$.loading({text:"打印加载中"}),t.svgPos=$.extend({w:0,h:0,minX:0,minY:0},flow2svg.calcCanvasSize()),t.svgPos.minX+=15,t.svgPos.minY+=15,t.pageSize.w=Model.define.page.width,t.pageSize.h=Model.define.page.height,t.printSize.w=1050,t.printSize.h=1485,"landscape"==Model.define.page.orientation&&(t.pageSize.w=[t.pageSize.h,t.pageSize.h=t.pageSize.w][0],t.printSize.w=[t.printSize.h,t.printSize.h=t.printSize.w][0]),ExportImage("svg",function(t){e.svgCallback(t.content)}))},svgCallback:function(e){var t=this.data.svgPos,o=this.data.printSize,n=this.data.pageSize,a=$("<div></div>").css({width:o.w,height:o.h-4,padding:"landscape"==Model.define.page.orientation?"3mm 4mm 0 4mm":"6mm 4mm 0 4mm",pageBreakInside:"avoid"}),i=$("<div>"+e+"</div>").css({width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:"rgb("+(Model.define.page.backgroundColor||"255,255,255")+")",backgroundPosition:"10px -20px"}).appendTo(a);if(i.children().css({width:"100%",height:"100%"}),i.find("#pattern_mark").length){i.find("#svgbackgroundid").remove(),i.find("#pattern_mark").children().html("");var r=$("#watermarkCanvas")[0].toDataURL();i.css({backgroundImage:"url("+r+")"})}for(var s=Math.ceil(n.w/o.w),l=Math.ceil(n.h/o.h),c="",p=0;p<l;p++)for(var d=0;d<s;d++){var h=d*o.w-t.minX,u=p*o.h-t.minY;i.children().attr("viewBox",h+" "+u+" "+o.w+" "+o.h),c+=a.prop("outerHTML")}this.creatIframe(c)},creatIframe:function(e){var t=this.data,o="landscape"==Model.define.page.orientation?"landscape":"portrait",n="<style>*{margin:0;padding:0} html,body{width:"+this.data.printSize.w+"px;-webkit-print-color-adjust:exact;color-adjust:exact;} @media print{@page{size:A4 "+o+";margin:0mm;}}</style>";$("#printIframe").length&&$("#printIframe").remove();var a=$("<iframe id='printIframe'></iframe>").css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}).appendTo("body"),i=a[0].contentWindow.document;i.write(n),i.write(e),i.close(),a[0].contentWindow.focus(),setTimeout(function(){t.loading=!1,a[0].contentWindow.print(),$.loading("close"),a.remove()},1e3)}},editMyshape:{params:{},config:{width:90,height:90,padding:1},isLoading:!0,init:function(){var e=Schema.myShapes,t=(e.length,$("#myshape-dialog .no_myshape")),o=$("#myshape-dialog .myshape_wrap .myshape_box");if(0==e.length)return t.css("display","block"),void t.off().on("click",function(e){$("#import_myshape").trigger("click")});t.css("display","none"),o.remove();for(var n=0;n<e.length;n++){var a=e[n];UI.editMyshape.renderMyshape($("#myshape-dialog .myshape_wrap"),a)}UI.editMyshape.moveEvent()},renderMyshape:function(e,t){var o=this,n="<div class='myshape_box' id="+t.name+" ><div class='canvas_box'> <i class='po-diagraming-icons'>&#xe904;</i> <canvas class='myshape_item' width="+UI.editMyshape.config.width+" height="+UI.editMyshape.config.height+"></canvas><div class='canvas_box_mask'></div></div><input type='text' value='"+t.title+"' /></div>",a=$(n).appendTo(e),i=a.find("canvas")[0];i.getContext("2d").clearRect(0,0,90,90),Designer.painter.drawPanelItemByShape(i,t,UI.editMyshape.config),a.find("i").off().on("click",function(e){e.stopPropagation();var t=$(this);a.find(".canvas_box").addClass("active"),$("#myshape-more-menu").dropdown({target:t,zindex:25,position:"right",onSelect:function(e){var t=e.attr("ac");if("rename"==t)a.find(":text").focus();else if("delete"==t){var n=a.attr("id");if(!o.isLoading)return;UI.editMyshape.deleteMyshape(n,a)}a.find(".canvas_box").removeClass("active")},onClose:function(){a.find(".canvas_box").removeClass("active")}})}),a.find(":text").focus(function(){this.select()}),a.find(":text").blur(function(){var e=$.trim($(this).val());e=Util.filterXss(e),t.title!=e&&""!=e&&(e.length>20?$.toast({text:"图形名称字符不能超过20",target:$("#myshape-dialog"),type:"error"}):poAjax({data:{title:e,shapeId:t.id},success:function(o){t.title=e,$.toast({text:"修改成功",target:$("#myshape-dialog")})}},"updateTitle"))})},deleteMyshape:function(e,t){var o=this;o.isLoading=!1;for(var n=Schema.myShapes.length,a=0;a<n;a++){var i=Schema.myShapes[a];if(i.name==e){poAjax({data:{shapeId:i.id},type:"GET",success:function(e){o.isLoading=!0,Schema.myShapes.splice(a,1),t.remove(),1==n&&$("#myshape-dialog .no_myshape").css("display","block"),$.toast({text:"删除成功",target:$("#myshape-dialog")})},error:function(){$.toast({text:"删除失败",type:"error",target:$("#myshape-dialog")})}},"removeShape");break}}},moveEvent:function(){var e,t,o,n,a,i=this,r=0,s=0,l=0;$(".myshape_wrap").off().on("mousedown.myshape",function(c){if(2!=c.button&&(e=$("#myshape-dialog"),t=$(".myshape_wrap"),o=$(".myshape_wrap .myshape_box"),n=$(c.target).parents(".myshape_box"),"INPUT"!=c.target.tagName&&"I"!=c.target.tagName&&0!=n.length)){s=n.index()-1,r=n.index(),l=Schema.myShapes.length;var p=e.position(),d=t.position(),h=t.outerWidth(),u=t.outerHeight(),f=o.outerWidth(),g=o.outerHeight(),m=o.children(".canvas_box").outerWidth(),b=o.children(".canvas_box").outerHeight(),y=c.pageX,v=c.pageY,k=y-(p.left-e.outerWidth()/2+d.left),w=v-(p.top-e.outerHeight()/2+d.top);(a=n.children(".canvas_box").clone(!1).appendTo(".myshape_wrap").removeAttr("id").addClass("clone_shape").off()).find("canvas_box").off();var x=a.find("canvas")[0];x.getContext("2d").clearRect(0,0,90,90);var S=Utils.copy(Schema.myShapes[s]);Designer.painter.drawPanelItemByShape(x,S,UI.editMyshape.config),a.find("i").remove(),a.css({position:"absolute","z-index":"1",top:w-b/2+t.scrollTop()+"px",left:k-m/2+"px"}),setTimeout(function(){a.css("transform","scale(0.7)")},0),n.css({opacity:.3}),a.off("contextmenu").on("contextmenu",function(e){return!1}),$(".myshape_wrap").on("mousemove.myshape",function(e){if(2!=e.button){var o=t.scrollTop(),i=e.pageX,s=e.pageY,c=k+(i-y),p=w+o+(s-v);if(a.css({top:p-b/2+"px",left:c-m/2+"px"}),c>h||p>u+o||c<=6||p<=6)return a.remove(),n.css({opacity:1}),$(".myshape_wrap").off("mousemove.myshape"),void $(".myshape_rule").remove();var d=Math.round(c/(f+16)),x=Math.floor(p/(g+16));if(r!=6*x+d){var S=$(".myshape_rule");if(0==S.length&&(t.append('<div class="myshape_rule"><div>'),S=$(".myshape_rule")),6*x+d<l)S.css({left:118*d,top:148*x});else{var C=l%6==0?6:l%6,I=l%6==0?Math.floor(l/6)-1:Math.floor(l/6);S.css({left:118*C,top:148*I})}}r=6*x+d}}),$(".myshape_wrap").off("mouseup.myshape").on("mouseup.myshape",function(e){if(2!=e.button&&"INPUT"!=e.target.tagName&&"I"!=e.target.tagName&&0!=n.length&&($(".myshape_wrap").off("mousemove.myshape"),a.remove(),$(".myshape_rule").remove(),n.css({opacity:1}),i.isLoading&&(r=r>l?l:r)!=s&&(0!=r||0!=s))){if((r=s>r?r:r-1)==s)return;i.isLoading=!1;$("#panel_myshape .panel_box");var t=Schema.myShapes[s].id;poAjax({data:{offset:s+"-"+r,shapeId:t},success:function(e){var t=Schema.myShapes.splice(s,1)[0];Schema.myShapes.splice(r,0,t);var n=o.eq(s),a=o.eq(r),l=r%6-s%6,c=Math.floor(r/6)-Math.floor(s/6);s>r?(o.each(function(e,t){e>=r&&e<s&&(e%6==4?$(t).css({transform:"translate(738px,-148px)"}):$(t).css({transform:"translate(-120px,0px)"}))}),n.css({transform:"translate("+120*l+"px ,"+148*c+"px)"}),o.css({transition:"transform 0.3s"}),setTimeout(function(){a.before(n),o.css({transform:"translate(0)",transition:"none"}),i.isLoading=!0},300)):(o.each(function(e,t){e<=r&&e>s&&(e%6==0?$(t).css({transform:"translate(738px,-148px)"}):$(t).css({transform:"translate(-120px,0px)"}))}),n.css({transform:"translate("+120*l+"px ,"+148*c+"px)"}),o.css({transition:"transform 0.3s"}),setTimeout(function(){a.after(n),o.css({transform:"translate(0)",transition:"none"}),i.isLoading=!0},300))},error:function(){i.isLoading=!0,$.toast({type:"error",text:"保存失败",target:$("#myshape-dialog")})}},"updateSort")}})}})}},showShapeCount:function(e){var t=Utils.getSelectedIds().length;void 0!==e&&$("#po-foot-shape-total").html(e),t>0?$("#po-foot-select-total").html(t+"/"):$("#po-foot-select-total").html("")},showSearchReplace:function(e){function t(){$("#po-flow-search-replace .tab-item").removeClass("active"),$("#po-flow-search-replace [ac=search]").addClass("active"),$("#po-flow-search-replace .flow-search-box").addClass("show"),$("#po-flow-search-replace .flow-replace-box").removeClass("show"),$("#po-flow-search-replace .po-buttons").removeClass("show")}function o(){$("#po-flow-search-replace .tab-item").removeClass("active"),$("#po-flow-search-replace [ac=replace]").addClass("active"),$("#po-flow-search-replace .flow-search-box").addClass("show"),$("#po-flow-search-replace .flow-replace-box").addClass("show"),$("#po-flow-search-replace .po-buttons").addClass("show"),$("#po-flow-replace-text").val("")}"search"==(e=e||"search")?t():o(),$("#po-flow-search-replace").show(),$("#po-flow-search-replace").css({top:"120px",left:"initial"}),$("#po-flow-search-text").focus(),$("#po-flow-search-replace .po-flow-search-replace-close").off().on("click",function(e,t){UI.hideSearchReplace()}),$("#po-flow-search-replace .tab-item").button({onClick:function(e,n){"search"==n.attr("ac")?t():o(),$("#po-flow-search-text").focus()}}),$("#po-flow-search-replace .search-replace-tab").draggable({target:$("#po-flow-search-replace")});var n="";$("#po-flow-search-text").off("input").on("input",function(){n=$(this).val(),UI.searchAndReplace.searchText(n)}).off("keydown.saerch").on("keydown.saerch",function(e){UI.searchAndReplace.index=UI.searchAndReplace.index+1,UI.searchAndReplace.searchText(n)}),$("#shape-text-search-down").button({onClick:function(e,t){UI.searchAndReplace.index=UI.searchAndReplace.index-1,UI.searchAndReplace.searchText(n)}}),$("#shape-text-search-up").button({onClick:function(e,t){UI.searchAndReplace.index=UI.searchAndReplace.index+1,UI.searchAndReplace.searchText(n)}}),$("#shape-text-replace-btn").off().on("click",function(e){UI.searchAndReplace.replaceText=$("#po-flow-replace-text").val(),UI.searchAndReplace.replaceTextByShape()}),$("#shape-text-replace-all").off().on("click",function(e){UI.searchAndReplace.replaceText=$("#po-flow-replace-text").val(),UI.searchAndReplace.replaceTextByShape("all")})},hideSearchReplace:function(){$("#po-flow-search-replace").hide(),UI.searchAndReplace.clearSearch()},searchAndReplace:{searchTexts:[],ids:[],index:0,total:0,text:"",replaceText:"",searchText:function(e){this.text=e;for(var t=Model.define.elements,o=0;o<this.ids.length;o++){var n=this.ids[o];t[n.id]&&Designer.painter.renderShape(t[n.id])}for(var a in this.searchTexts=[],this.ids=[],t){var i=t[a];if("linker"==i.name){if(i.text&&i.text.indexOf(e)>-1){this.ids.push({id:i.id,index:0,name:i.name});var r=i.text.split(e);for(o=0;o<r.length-1;o++)this.searchTexts.push({id:i.id,index:0,tIndex:o,name:i.name})}}else this.getIdByText(e,i)}this.ids.length>0&&e.length>0?(this.renderSearchText(e),$("#shape-text-search-down").button("enable"),$("#shape-text-search-up").button("enable"),$("#shape-text-replace-btn").button("enable"),$("#shape-text-replace-all").button("enable")):($("#shape-text-search-num").html("0/0"),$("#shape-text-search-down").button("disable"),$("#shape-text-search-up").button("disable"),$("#shape-text-replace-btn").button("disable"),$("#shape-text-replace-all").button("disable"))},getIdByText:function(e,t){for(var o=t.textBlock,n=0;n<o.length;n++){o[n].text;var a=$("#text_"+t.id+"_"+n).clone();a.find(".katex").remove(),a.find(".equation-text").remove();var i=a.text();if(i&&i.indexOf(e)>-1){this.ids.push({id:t.id,index:n,name:t.name});for(var r=i.split(e),s=0;s<r.length-1&&r.length>1;s++)this.searchTexts.push({id:t.id,index:n,tIndex:s,name:t.name})}}},renderSearchText:function(e){this.total=this.searchTexts.length,this.index>this.searchTexts.length-1&&(this.index=0),this.index<0&&(this.index=this.searchTexts.length-1);for(var t=this.searchTexts[this.index],o=0,n=this.ids.length;o<n;o++){var a=this.ids[o],i=$("#text_"+a.id+"_"+a.index);if(!(0==i.length||i.find(".equation-text").length>0)){var r="",s=i.html().split(e);if(t.id==a.id&&t.index==a.index){for(var l=0;l<s.length-1;l++)l==t.tIndex?r+=s[l]+"<font id='text_canvas_selected' style='background-color: #FF9933'>"+e+"</font>":r+=s[l]+"<font style='background-color: rgba(255, 153, 51, 0.25);'>"+e+"</font>";r+=s[s.length-1]}else r=s.join("<font style='background-color: #ffff00'>"+e+"</font>");i.html(r)}}this.moveShapeToCenter($("#text_canvas_selected")),$("#shape-text-search-num").html(this.index+1+"/"+this.total),this.total},moveShapeToCenter:function(e){if(0!=e.length){var t=$("#designer_layout"),o={x:e.offset().left,y:e.offset().top,w:e.width(),h:e.height()},n={x:t.offset().left,y:t.offset().top,w:t.width(),h:t.height()};if(!Utils.rectInRect(o,n)){var a=o.x+t.scrollLeft()-n.w/2+o.w/2,i=o.y+t.scrollTop()-n.h/2+o.h/2;t.scrollLeft(a),t.scrollTop(i)}}},clearSearch:function(){if(0!=this.text.length){$("#po-flow-search-text").val(""),this.text="";for(var e=0;e<this.ids.length;e++){var t=this.ids[e];Designer.painter.renderShape(Model.getShapeById(t.id))}$("#shape-text-search-num").html("0/0"),$("#shape-text-replace-btn").button("disable"),$("#shape-text-replace-all").button("disable"),this.ids=[]}},replaceTextByShape:function(e){if(0!=this.searchTexts.length&&this.text!=this.replaceText){if("all"==e){for(var t=[],o=0;o<this.ids.length;o++){var n=this.ids[o];if("linker"==(i=Model.getShapeById(n.id)).name){var a=i.text;i.text=a.split(this.text).join(this.replaceText)}else{a=i.textBlock[n.index].text;i.textBlock[n.index].text=a.split(this.text).join(this.replaceText)}Designer.painter.renderShape(i),t.push(i)}Model.updateMulti(t)}else{n=this.searchTexts[this.index],a="";for(var i,r=(a="linker"==(i=Model.getShapeById(n.id)).name?i.text:i.textBlock[n.index].text).split(this.text),s="",l=0;l<r.length-1;l++)l==n.tIndex?s+=r[l]+this.replaceText:s+=r[l]+this.text;s+=r[r.length-1],"linker"==i.name?i.text=s:i.textBlock[n.index].text=s,Designer.painter.renderShape(i),Model.update(i)}this.searchText(this.text)}}},setLink:function(e,t,o){var n=Model.getShapeById(e);n.link=t,n.linkTitle=o,Model.update(n),Designer.painter.renderShape(n)},removeLink:function(e){var t=Model.getShapeById(e);t.link="",t.linkTitle="",Model.update(t),Designer.painter.renderShape(t)}},window.ExportImage=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,o,n){var a,i;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o?"function"==typeof o&&(n=o,o=[]):o=[],0==$("#svg_exporter").length&&$('<div id="svg_exporter" style="display:none;position:fixed;z-index:-10;"></div>').appendTo("body"),a="",Model.define.page.showWatermark&&(a=Model.define.page.watermark),e.next=6,_exportfile.default.init("#svg_exporter",{type:t,ids:o,watermark:{download:a}});case 6:if(i=e.sent,$("#svg_exporter").empty(),"svg"!=t&&"pdfhd"!=t){e.next=11;break}return n(i),e.abrupt("return",i);case 11:return n(i.img),e.abrupt("return",i.img);case 13:case"end":return e.stop()}},e)}));return function(t,o,n){return e.apply(this,arguments)}}(),window.Dock={isOpen:!1,openView:"page",show:function(e){if(this.isOpen=!0,Dock.openView=e,"page"!=Dock.openView&&"shape"!=Dock.openView&&Dock.update(),$("#po-flow-dock-layout").addClass("show"),"page"==e||"shape"==e){$("#po-flow-dock-layout-page-shape").removeClass("hide"),$("#po-flow-dock-layout-page-shape").siblings().addClass("hide"),$("#po-tool-dock-button").addClass("active"),$("#po-flow-dock-layout .dock-header .dock-header-item").removeClass("active"),$("#po-flow-dock-layout .dock-header .dock-header-item[ac="+e+"]").addClass("active"),$("#po-flow-dock-layout .dock-header").removeClass("active-page").removeClass("active-shape"),$("#po-flow-dock-layout .dock-header").addClass("active-"+e),$("#po-flow-dock-layout .dock-container-item").addClass("hide"),$("#po-dock-"+e).removeClass("hide");$("#po-flow-dock-layout-page-shape .dock-header-item[ac='"+e+"']");$("#po-dock-"+e).addClass("show")}else $("#po-tool-dock-button").removeClass("active"),$("#po-flow-dock-layout-"+e).removeClass("hide"),$("#po-flow-dock-layout-"+e).siblings().addClass("hide");$("#po-flow-dock-layout").css("width","240px"),$("#designer_viewport").css({"margin-right":"240px"}),$("#po-designer-foot").addClass("shrink"),$(".bottom_temp_wrap").css("right","240px")},hide:function(){this.isOpen=!1,$("#po-flow-dock-layout").removeClass("show"),$("#po-tool-dock-button").removeClass("active"),$("#designer_viewport").css({"margin-right":"0"}),$("#po-designer-foot").removeClass("shrink"),$(".bottom_temp_wrap").css("right","0px"),$(".po-flow-dock-layout").css("width","240px"),$("#po-designer-foot").removeAttr("style")},init:function(){$("#po-flow-dock-layout .dock-header .dock-header-item").off().on("click",function(e){var t=$(this).attr("ac");Dock.show(t),Dock.update()}),$("#po-flow-dock-layout-attr .po-close-btn").off().on("click",function(e){Dock.hide()}),$("#po-flow-dock-layout-comment .po-close-btn").off().on("click",function(e){Dock.hide()}),$("#po-flow-dock-layout-chartdata .po-close-btn").off().on("click",function(e){Dock.hide(),$(".pop-sub-editor>div[data-key='editData']").removeClass("active"),$("#po-flow-dock-layout-chartdata").addClass("hide")}),$("#dock-page-size").button({onClick:function(e,t){$("#dock-page-size-menu").dropdown({target:t,position:"center",onSelect:function(e){var o=parseInt(e.attr("w")),n=parseInt(e.attr("h"));Designer.setPageStyle({width:o,height:n}),t.button("setText",e.find(".po-menu-item-box").text()),$("#dock-page-size-w").spinner("setValue",o+"px"),$("#dock-page-size-h").spinner("setValue",n+"px")}})}}),$("#dock-page-size-w").spinner({min:500,max:1e4,step:10,unit:"px",width:85,onChange:function(e){Designer.setPageStyle({width:e})}}),$("#dock-page-size-h").spinner({min:500,max:1e4,step:10,unit:"px",width:85,onChange:function(e){Designer.setPageStyle({height:e})}}),$("#dock-page-ori").button({onClick:function(e,t){var o=Model.define.page.width,n=Model.define.page.height;Designer.setPageStyle({height:o,width:n})}}),$("#dock-page-grid-show").parent(".po-checkbox-group").off("click.check").on("click.check",function(e){e.stopPropagation();var t=$("#dock-page-grid-show");t.checkbox("isChecked")?t.checkbox("uncheck"):t.checkbox("check");var o=t.checkbox("isChecked");Designer.setPageStyle({showGrid:o})}),$("#dock-grid-style").button({onClick:function(e,t){$("#dock-grid-style-menu").dropdown({target:t,position:"center",onSelect:function(e){t.button("setText",e.find(".po-menu-item-box").text())}})}}),$("#dock-grid-type").button({onClick:function(e,t){$("#dock-grid-type-menu").dropdown({target:t,position:"center",isSelect:!0,onSelect:function(e){var t=parseInt(e.attr("ac"));Designer.setPageStyle({gridSize:t}),$("#dock-grid-size").spinner("setValue",t+"px")}})}}),$("#dock-grid-size").spinner({min:10,max:100,step:2,unit:"px",width:140,onChange:function(e){Designer.setPageStyle({gridSize:e})}}),$("#dock-linejump-show").parent(".po-checkbox-group").off("click.check").on("click.check",function(e){e.stopPropagation();var t=$("#dock-linejump-show");t.checkbox("isChecked")?t.checkbox("uncheck"):t.checkbox("check");var o=Model.define.page.lineJumps,n=t.checkbox("isChecked");n!=o&&(Designer.setPageStyle({lineJumps:n}),Designer.events.push("resetBrokenLinker",o))}),$("#dock-print-line-show").parent(".po-checkbox-group").off("click.check").on("click.check",function(e){e.stopPropagation();var t=$("#dock-print-line-show");if(t.checkbox("isChecked"))t.checkbox("uncheck"),Designer.setPageStyle({showPrintLine:!1});else{t.checkbox("check");var o=Utils.getPrintPageSize();Designer.setPageStyle({showPrintLine:!0,width:o.width,height:o.height})}}),$("#dock-page-color-show").parent(".po-checkbox-group").off("click.check").on("click.check",function(e){e.stopPropagation();var t=$("#dock-page-color-show");t.checkbox("isChecked")?t.checkbox("uncheck"):t.checkbox("check")}),$("#dock-page-fill-color").colorButton({position:"right",zindex:2,trans:!0,onSelect:function(e){Designer.setPageStyle({backgroundColor:e})}}),$("#dock-page-fill-input-color").colorInput({onChange:function(e){Designer.setPageStyle({backgroundColor:e})}}),insert.watermark.init({con:$(".po-watermark-con"),watermark:Model.define.page.watermark,userName:userObj.fullName,change:function(e){Designer.setPageStyle(e)}}),$("#dock-shape-dist-align .po-tool-button-small").button({onClick:function(e,t){var o=t.attr("al");o&&("more"!=o?Designer.alignShapes(o):$("#dock-shape-dist-menu").dropdown({target:t,position:"right",onSelect:function(e){var t=$(e).attr("dist");Designer.distributeShapes(t)}}))}}),$("#dock-shape-width").spinner({min:20,max:1e3,width:100,step:10,unit:"px",onChange:function(e){Designer.setShapeProps({w:e})}}),$("#dock-shape-height").spinner({min:20,width:100,max:1e3,step:10,unit:"px",onChange:function(e){Designer.setShapeProps({h:e})}}),$("#dock-shape-x").spinner({min:0,max:1e4,step:10,unit:"px",width:100,onChange:function(e){Designer.setShapeProps({x:e})}}),$("#dock-shape-y").spinner({min:0,max:1e4,step:10,unit:"px",width:100,onChange:function(e){Designer.setShapeProps({y:e})}}),$("#dock-shape-angle").spinner({min:0,max:360,step:10,unit:"°",width:140,onChange:function(e){var t=e/180*Math.PI;Designer.setShapeProps({angle:t})}}),$("#dock-shape-angle-h").button({onClick:function(e,t){Designer.setShapeProps({angle:0})}}),$("#dock-shape-angle-v").button({onClick:function(e,t){Designer.setShapeProps({angle:Math.PI/2})}}),$("#dock-shape-fill-type").button({onClick:function(e,t){var o=t.find(".text-content").text();$("#dock-shape-fill-type-menu").dropdown({target:t,position:"right",isSelect:!0,onSelect:function(e){var n=e.attr("ac");if("image"==n)$("#upload-imgs").removeAttr("loaded"),insert.image.init(function(e,o){Designer.setFillStyle({type:"image",fileId:e,imageW:o.width,imageH:o.height}),t.find(".text-content").text("图片")}),t.find(".text-content").text(o);else{Designer.setFillStyle({type:n});var a=Utils.getSelectedShapeIds(),i=Model.getShapeById(a[0]),r=Utils.getShapeFillStyle(i.fillStyle);Dock.setFillStyle(r)}}})}}),$("#dock-line-height").button({onClick:function(e,t){var o=t.find(".text-content").text();"1.0"!=o&&"3.0"!=o||(o=o.slice(0,1)),$("#dock-line-height-menu").dropdown({target:t,position:"right",onSelect:function(e){var o=e.attr("ac");Designer.setFontStyle({lineHeight:o}),t.attr("line-height",o)}}),$("#dock-line-height-menu [ac='"+o+"']").menuitem("select")}}),$("#dock-shape-fill-solid").colorButton({position:"right",zindex:2,onSelect:function(e){"transparent"==e?Designer.setFillStyle({type:"none"}):Designer.setFillStyle({type:"solid",color:e})}}),$("#dock-shape-fill-gradient-begin").colorButton({position:"right",zindex:2,trans:!1,onSelect:function(e){Designer.setFillStyle({beginColor:e})}}),$("#dock-shape-fill-gradient-end").colorButton({position:"right",zindex:2,trans:!1,onSelect:function(e){Designer.setFillStyle({endColor:e})}}),$("#dock-shape-fill-gradient-swap").button({onClick:function(){var e=$("#dock-shape-fill-gradient-begin").colorButton("getRgbColor"),t=$("#dock-shape-fill-gradient-end").colorButton("getRgbColor");$("#dock-shape-fill-gradient-begin").colorButton("setColor",t),$("#dock-shape-fill-gradient-end").colorButton("setColor",e),Designer.setFillStyle({beginColor:t,endColor:e})}}),$("#dock-shape-gradient-type").button({onClick:function(e,t){$("#dock-shape-gradient-type-menu").dropdown({target:t,position:"left",isSelect:!0,onSelect:function(e){var t=e.attr("ac");Designer.setFillStyle({gradientType:t}),$(".gradient-details").hide(),$(".gradient-type-"+t).show();var o=Utils.getSelectedShapeIds(),n=Model.getShapeById(o[0]),a=Utils.getShapeFillStyle(n.fillStyle);"linear"==t?$("#dock-shape-gradient-angle").spinner("setValue",Math.round(a.angle/Math.PI*180)+"°"):$("#dock-shape-gradient-radius").spinner("setValue",Math.round(100*a.radius)+"%")}})}}),$("#dock-shape-gradient-angle").spinner({min:0,max:360,unit:"°",step:15,width:102,onChange:function(e){var t=e/180*Math.PI;Designer.setFillStyle({angle:t})}}),$("#dock-shape-gradient-radius").spinner({min:0,max:100,unit:"%",step:5,width:108,onChange:function(e){Designer.setFillStyle({radius:e/100})}}),$("#dock-shape-fill-image").button({onClick:function(e,t){$("#upload-imgs").removeAttr("loaded"),insert.image.init(function(e,t){Designer.setFillStyle({type:"image",fileId:e,imageW:t.w,imageH:t.h})})}}),$("#dock-fill-image-display").button({onClick:function(e,t){$("#dock-fill-image-display-menu").dropdown({target:t,position:"left",isSelcet:!0,onSelect:function(e){var t=$(e).attr("ac");Designer.setFillStyle({display:t})}})}}),$("#dock-font-family").button({onClick:function(e,t){$("#po-flow-font-family-menu").dropdown({target:t,position:"center",onSelect:function(e){var o=e.attr("ac");Designer.setFontStyle({fontFamily:o}),t.button("setText",o)}})}}),$("#dock-font-size").spinner({min:12,max:30,step:1,unit:"px",width:100,onChange:function(e){Designer.setFontStyle({size:e})}}),$("#dock-font-bold").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({bold:o})}}),$("#dock-font-italic").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({italic:o})}}),$("#dock-font-underline").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({underline:o})}}),$("#dock-font-middleline").button({onClick:function(e,t){var o=!t.button("isSelected");Designer.setFontStyle({middleline:o})}}),$("#dock-font-color").colorButton({position:"right",zindex:2,onSelect:function(e){Designer.setFontStyle({color:e})},trans:!1}),$("#dock-font-align div").button({onClick:function(e,t){if(!t.hasClass("selected")){"textAlign"==t.attr("cate")?$("#dock-font-align [cate=textAlign]").removeClass("selected"):"vAlign"==t.attr("cate")&&$("#dock-font-align [cate=vAlign]").removeClass("selected"),t.button("select");var o={textAlign:$("#dock-font-align .selected[cate=textAlign]").attr("ac"),vAlign:$("#dock-font-align .selected[cate=vAlign]").attr("ac")};Designer.setFontStyle(o)}}}),$("#dock-shape-opacity").spinner({min:0,max:100,unit:"%",step:5,width:90,onChange:function(e){Designer.setShapeStyle({alpha:e/100})}}),$("#dock-linker-color").colorButton({position:"right",zindex:2,trans:!1,onSelect:function(e){Designer.setLineStyle({lineColor:e})}}),$("#dock-linker-style").button({onClick:function(e,t){$("#dock-linker-style-menu").dropdown({target:t,position:"center",onSelect:function(e){var o=e.attr("ac");Designer.setLineStyle({lineStyle:o}),t.button("setText",e.text())}})}}),$("#dock-linker-width").spinner({min:0,max:10,step:1,unit:"px",width:114,onChange:function(e){Designer.setLineStyle({lineWidth:e})}}),$("#dock-linker-type .po-tool-button-small").button({onClick:function(e,t){var o=t.attr("ac");Designer.setLinkerType(o)}}),$("#dock-linker-beginarrow").button({onClick:function(e,t){var o=t.attr("arrow");$("#po-flow-linker-beginarrow-menu").dropdown({target:t,position:"center",onSelect:function(e){o=e.attr("ac"),Designer.setLineStyle({beginArrowStyle:o});var n=$("#po-flow-linker-beginarrow-menu [ac="+o+"]").find(".po-diagraming-icons").html();t.button("setText",n)}}),$("#po-flow-linker-beginarrow-menu [ac='"+o+"']").menuitem("select")}}),$("#dock-linker-endarrow").button({onClick:function(e,t){var o=t.attr("arrow");$("#po-flow-linker-endarrow-menu").dropdown({target:t,position:"center",onSelect:function(e){o=e.attr("ac"),Designer.setLineStyle({endArrowStyle:o})}}),$("#po-flow-linker-endarrow-menu [ac='"+o+"']").menuitem("select")}}),$("#dock-layer-arrange div").button({onClick:function(e,t){var o=t.attr("ac");Designer.layerShapes(o)}}),$("#dock-arrange-match div").button({onClick:function(e,t){var o=t.attr("ac"),n={};"w"==o?n.w="auto":"h"==o?n.h="auto":"wh"==o&&(n.w="auto",n.h="auto"),Designer.matchSize(n)}}),$("#dock-shape-group div").button({onClick:function(e,t){var o=t.attr("ac");"group"==o?Designer.group():"ungroup"==o&&Designer.ungroup()}}),$("#dock-shape-lock div").button({onClick:function(e,t){var o=t.attr("ac");"lock"==o?Designer.lockShapes():"unlock"==o&&Designer.unlockShapes()}})},update:function(){if(this.isOpen){var e=this.openView;if("shape"==e){var t=(P=Utils.getSelectedIds()).length,o=Utils.getSelectedLinkerIds(),n=o.length,a=Utils.getSelectedShapeIds(),i=a.length,r=Utils.getSelectedLockedIds().length,s=Utils.getSelectedGroups().length,l=Utils.getSelectedGroupsAndShapes().length,c=Utils.getSelectedLanes().length,p=Utils.getSelectedCharts().length;$("#header-edit-menu"),$("#header-arrange-menu");if(i>0){var d,h=!0,u=_createForOfIteratorHelper(a);try{for(u.s();!(d=u.n()).done;){var f=d.value;if(!(m=Model.getShapeById(f)).name.startsWith("chart_")){h=!1;break}}}catch(j){u.e(j)}finally{u.f()}}if(0==t||h)$("#shape-dist-align .po-tool-button-small").button("disable"),$("#dock-shape-width").spinner("disable"),$("#dock-shape-height").spinner("disable"),$("#dock-shape-x").spinner("disable"),$("#dock-shape-y").spinner("disable"),$("#dock-shape-angle").spinner("disable"),$("#dock-shape-angle-h").button("disable"),$("#dock-shape-angle-v").button("disable"),$("#dock-shape-fill-type").button("disable"),$("#dock-shape-fill-solid").button("disable"),$("#dock-shape-fill-input-solid").attr("disabled",!0),$("#dock-shape-opacity").button("disable"),$("#dock-font-family").button("disable"),$("#dock-font-size").button("disable"),$("#dock-font-bold").button("disable"),$("#dock-font-italic").button("disable"),$("#dock-font-underline").button("disable"),$("#dock-font-middleline").button("disable"),$("#dock-font-color").button("disable"),$("#dock-font-align div").button("disable"),$("#dock-line-height").button("disable"),$(".po-spinner-group-inside").button("disable"),$("#dock-linker-color").button("disable"),$("#dock-linker-width").button("disable"),$("#dock-linker-style").button("disable"),$("#dock-layer-arrange div").button("disable"),$("#dock-shape-lock [ac=lock]").button("disable");else{"linker"==(m=Model.getShapeById(P[0])).name?(y=Utils.getLinkerFontStyle(m.fontStyle),v=Utils.getLinkerLineStyle(m.lineStyle)):(y=Utils.getShapeFontStyleByEditor(m),v=Utils.getShapeLineStyle(m.lineStyle)),$("#dock-font-family").button("enable"),$("#dock-font-size").button("enable"),$("#dock-font-bold").button("enable"),$("#dock-font-italic").button("enable"),$("#dock-font-underline").button("enable"),$("#dock-font-middleline").button("enable"),$("#dock-font-color").button("enable"),$("#dock-font-align div").button("enable"),$("#dock-line-height").button("enable"),$(".po-spinner-group-inside").button("enable"),$("#dock-linker-color").button("enable"),$("#dock-linker-width").button("enable"),$("#dock-linker-style").button("enable"),y.fontFamily.indexOf("微软雅黑")>-1&&(y.fontFamily="微软雅黑"),$("#dock-font-family").button("setText",y.fontFamily),$("#dock-font-size").spinner("setValue",y.size+"px"),$("#dock-line-height").button("setText",y.lineHeight),$("#dock-font-color").colorButton("setColor",y.color),y.bold?$("#dock-font-bold").button("select"):$("#dock-font-bold").button("unselect"),y.italic?$("#dock-font-italic").button("select"):$("#dock-font-italic").button("unselect"),y.underline?$("#dock-font-underline").button("select"):$("#dock-font-underline").button("unselect"),y.middleline?$("#dock-font-middleline").button("select"):$("#dock-font-middleline").button("unselect"),$("#dock-font-align div").button("unselect"),$("#dock-font-"+y.textAlign).button("select"),$("#dock-font-"+y.vAlign).button("select"),$("#dock-linker-color").colorButton("setColor",v.lineColor),$("#dock-linker-width").spinner("setValue",v.lineWidth+"px");var g=$("#dock-linker-style-menu [ac="+v.lineStyle+"]").text();$("#dock-linker-style").button("setText",g),$("#dock-layer-arrange div").button("enable"),$("#dock-shape-lock [ac=lock]").button("enable")}if(0==i)$("#dock-shape-fill-type").button("disable"),$("#dock-shape-fill-solid").button("disable"),Dock.setFillStyle({type:"none"}),$("#po-flow-line-height").button("disable");else if(!h){$("#dock-shape-fill-type").button("enable"),$("#dock-shape-fill-solid").button("enable"),$("#dock-shape-opacity").button("enable"),$("#dock-shape-fill-input-solid").removeAttr("disabled"),$("#po-flow-line-height").button("enable");var m=Model.getShapeById(a[0]),b=Utils.getShapeFillStyle(m.fillStyle),y=Utils.getLinkerFontStyle(m.fontStyle);$("#dock-shape-width").spinner("enable").spinner("setValue",Math.round(m.props.w)+"px"),$("#dock-shape-height").spinner("enable").spinner("setValue",Math.round(m.props.h)+"px"),$("#dock-shape-x").spinner("enable").spinner("setValue",Math.round(m.props.x)+"px"),$("#dock-shape-y").spinner("enable").spinner("setValue",Math.round(m.props.y)+"px"),$("#dock-shape-angle").spinner("enable").spinner("setValue",Math.round(m.props.angle/Math.PI*180)+"°"),$("#dock-shape-angle-h").button("enable"),$("#dock-shape-angle-v").button("enable"),c>0&&($("#dock-shape-width").spinner("disable"),$("#dock-shape-height").spinner("disable"),$("#dock-shape-x").spinner("disable"),$("#dock-shape-y").spinner("disable"),$("#dock-shape-angle").spinner("disable"),$("#dock-shape-angle-h").button("disable"),$("#dock-shape-angle-v").button("disable"),$("#dock-arrange-match div").button("disable")),$("#dock-shape-opacity").spinner("setValue",Math.round(m.shapeStyle.alpha/1*100)+"%"),Dock.setFillStyle(b)}if(0==r?$("#dock-shape-lock [ac=unlock]").button("disable"):$("#dock-shape-lock [ac=unlock]").button("enable"),0==n)$("#dock-linker-type").button("disable"),$("#dock-linker-beginarrow").button("disable"),$("#dock-linker-endarrow").button("disable");else{$("#dock-linker-type").button("enable"),$("#dock-linker-beginarrow").button("enable"),$("#dock-linker-endarrow").button("enable");m=Model.getShapeById(o[0]);var v=Utils.getLinkerLineStyle(m.lineStyle);$("#dock-linker-type div").button("unselect"),$("#dock-linker-type [ac="+m.linkerType+"]").button("select");var k=$("#po-flow-linker-beginarrow-menu [ac="+v.beginArrowStyle+"]").find(".po-diagraming-icons").html();$("#dock-linker-beginarrow").button("setText",k),$("#dock-linker-beginarrow").attr("arrow",v.beginArrowStyle);var w=$("#po-flow-linker-endarrow-menu [ac="+v.endArrowStyle+"]").find(".po-diagraming-icons").html();$("#dock-linker-endarrow").button("setText",w),$("#dock-linker-endarrow").attr("arrow",v.endArrowStyle)}1==t||c>=2?$("#dock-shape-dist-align div").button("disable"):t<2?($("#dock-shape-group div").button("disable"),$("#dock-shape-dist-align div").button("disable")):($("#dock-shape-group [ac='group']").button("enable"),$("#dock-shape-dist-align div").button("enable")),(l<3||c>0)&&$("#dock-shape-dist-align [al=more]").button("disable"),0==s?$("#dock-shape-group [ac='ungroup']").button("disable"):$("#dock-shape-group [ac='ungroup']").button("enable"),i<2||c>=1?$("#dock-arrange-match div").button("disable"):$("#dock-arrange-match div").button("enable"),h&&($("#dock-shape-fill-type").button("disable"),$("#dock-shape-fill-solid").button("disable"),Dock.setFillStyle({type:"none"})),p>0&&($("#dock-shape-width").spinner("disable"),$("#dock-shape-height").spinner("disable"),$("#dock-shape-x").spinner("disable"),$("#dock-shape-y").spinner("disable"),$("#dock-shape-angle").spinner("disable"),$("#dock-shape-angle-h").button("disable"),$("#dock-shape-angle-v").button("disable"),$("#dock-arrange-match div").button("disable"))}else if("page"==e){var x=Model.define.page,S=x.width,C=x.height,I=x.lineJumps,D=x.showPrintLine,_=x.gridSize,A=$("#dock-page-size-menu").children("li[w="+S+"][h="+C+"]"),U="";U=A.length>0?A.text():"自定义尺寸("+S+"px*"+C+"px)",$("#dock-page-size").button("setText",U),$("#dock-page-size-w").spinner("setValue",S+"px"),$("#dock-page-size-h").spinner("setValue",C+"px"),x.showGrid?($("#dock-page-grid-show").checkbox("check"),$("#dock-grid-style").button("enable"),$("#dock-grid-type").button("enable"),$("#dock-grid-size").button("enable")):($("#dock-page-grid-show").checkbox("uncheck"),$("#dock-grid-style").button("disable"),$("#dock-grid-type").button("disable"),$("#dock-grid-size").button("disable"));var M=$("#dock-grid-type-menu").children("li[ac="+_+"]");if(M.length>0)var T=M.text();$("#dock-grid-type").button("setText",T),$("#dock-grid-size").spinner("setValue",_+"px"),I?$("#dock-linejump-show").checkbox("check"):$("#dock-linejump-show").checkbox("uncheck"),D?$("#dock-print-line-show").checkbox("check"):$("#dock-print-line-show").checkbox("uncheck"),$("#dock-page-fill-color").colorButton("setColor",x.backgroundColor),$("#dock-page-fill-input-color").colorInput("setColor",x.backgroundColor),insert.watermark.setVal({showWatermark:x.showWatermark,watermark:x.watermark})}else if("attr"==e){var P;1!=(t=(P=Utils.getSelectedIds()).length)?(0==$("#po-flow-dock-layout-attr .po-dock-attr-none").length&&$("#po-flow-dock-layout-attr").append("<div class='po-dock-attr-none'>选择一个图形后，在这里查看数据属性</div>"),$("#shape-attr-container").empty(),$("#po-flow-dock-layout-attr .add-attr-container").hide()):($("#po-flow-dock-layout-attr .po-dock-attr-none").remove(),this.setAttributeList(),this.initAddAttribute())}else"comment"==e?this.comments.init():"hotkey"==e&&HotKey.renderLayout()}},attrType:{string:"文本",link:"链接",number:"数值",date:"日期",boolean:"布尔",list:"列表"},initAddAttribute:function(){this.resetAddAttr(),$("#dock-add-attr-type").button({onClick:function(e,t){$("#dock-attr-type-menu").dropdown({target:t,position:"left",isSelect:!0,onSelect:function(e){var o=$(e).attr("ac");t.attr("ty",o)}})}}),$("#dock-add-attr-btn").off().on("click",function(e){var t=$("#dock-add-attr-name").val(),o=$("#dock-add-attr-value").val(),n=$("#dock-add-attr-type").attr("ty");if(o=Util.filterXss(o),""!=(t=Util.filterXss(t))){var a={name:t,type:n,value:o};Designer.addDataAttribute(a),Dock.setAttributeList()}else $("#dock-add-attr-name").focus()})},setAttributeList:function(){var e=Utils.getSelectedIds();if($("#shape-attr-container").empty(),1!=e.length)return $("#po-flow-dock-layout-attr .add-attr-container").hide(),void $("#po-flow-dock-layout-attr .add-attr-container").hide();var t=Model.getShapeById(e[0]);if($("#po-flow-dock-layout-attr .add-attr-container").show(),$("#po-flow-dock-layout-attr .attr-container").remove(),t.dataAttributes)for(var o=0;o<t.dataAttributes.length;o++){var n=t.dataAttributes[o],a=$("<div class='shape-attr-item'><div id='"+n.id+'\' class="container-title" onclick="Dock.editAttr(\''+n.id+'\')"><span class="attr-name">'+Util.filterXss(n.name)+'</span><span class="attr-type">'+this.attrType[n.type]+'</span><span class="attr-value">'+Util.filterXss(n.value)+"</span></div></div>").appendTo($("#shape-attr-container"));"default"!=n.category&&a.children(".container-title").append("<div class='po-diagraming-icons attr-delete' onclick=\"Dock.deleteAttr('"+n.id+"', event)\">&#xe6b9;</div>")}},editAttr:function(e){var t=Designer.getDataAttrById(e),o="none";t.showType&&(o=t.showType);var n=$("#attr-edit-showtype-menu [ac="+o+"] .text").text(),a=t.showName?"checked":"",i=t.horizontal||"mostleft",r=$("#attr-location-h-menu [loc="+i+"] .text").text(),s=t.vertical||"mosttop",l=$("#attr-location-v-menu [loc="+s+"] .text").text(),c="无";t.icon&&(c=isNaN(parseInt(t.icon))?"<img src= "+t.icon+">":"<img src= "+staticBasePath+"/assets/images/data_attr/"+t.icon+".png>");var p='<input class="po-input-other-small attr-value" type="text" placeholder="属性值" value="'+t.value+'">';if("list"==t.type){var d=t.listItems;p='<div id="attr-list-value" class="po-tool-select-button"><span class="text-content">'+(t.value||d[0])+'</span><input class="attr-value" type="hidden" value="'+(t.value||d[0])+'"></div>';for(var h="",u=0;u<d.length;u++)h+='<li class="po-menu-item"><div class="po-menu-item-box"><span class="text">'+d[u]+"</span></div></li>";$("#attr-list-value-menu").html(h)}else if("boolean"==t.type){var f=[!0,!1];p='<div id="attr-boolean-value" class="po-tool-select-button"><span class="text-content">'+(t.value||f[0])+'</span><input class="attr-value" type="hidden" value="'+(t.value||f[0])+'"></div>';for(h="",u=0;u<f.length;u++)h+='<li class="po-menu-item"><div class="po-menu-item-box"><span class="text">'+f[u]+"</span></div></li>";$("#attr-boolean-value-menu").html(h)}var g='<div id="edit-'+e+'"  class="attr-container"><div class="container">'+t.name+'</div><div class="container"><span>'+this.attrType[t.type]+"</span>"+p+'</div><div class="container"><span>显示为</span><div id="attr-edit-showtype" class="po-tool-select-button" ty='+o+'><span class="text-content">'+n+'</span></div></div><div class="attr-display-options"><div class="container"><div class="po-checkbox-group"><div id="attr-display-name" class="po-checkbox '+a+'"></div><span>显示属性名</span></div></div><div class="container attr-icon-area"><span>图标</span><div id="attr-display-icon" class="po-tool-select-button" ico='+t.icon+'><span class="text-content">'+c+'</span></div></div><div class="container"><span>显示位置</span><div id="attr-location-h" class="po-tool-select-button" loc='+i+'><span class="text-content">'+r+'</span></div></div><div class="container"><span></span><div id="attr-location-v" class="po-tool-select-button" loc='+s+'><span class="text-content">'+l+'</span></div></div></div><div class="po-buttons"><div id="dock-cancel-edit-attr-btn" class="po-button-small">取消</div><div id="dock-save-edit-attr-btn" class="po-button-small primary">确定</div></div></div>';$("#po-flow-dock-layout-attr .attr-container").remove(),$("#po-flow-dock-layout-attr .container-title").show(),$("#"+e).hide(),$("#"+e).parent(".shape-attr-item").append(g);o="none";t.showType&&(o=t.showType),Dock.setAttrDisplay(o),$("#attr-list-value").button({onClick:function(e,t){$("#attr-list-value-menu").dropdown({target:t,position:"right",isSelect:!0,onSelect:function(e){var o=$(e).find(".text").text();t.find(".attr-value").val(o)}})}}),$("#attr-boolean-value").button({onClick:function(e,t){$("#attr-boolean-value-menu").dropdown({target:t,position:"left",isSelect:!0,onSelect:function(e){var o=$(e).find(".text").text();t.find(".attr-value").val(o)}})}}),$("#attr-edit-showtype").button({onClick:function(e,t){$("#attr-edit-showtype-menu").dropdown({target:t,position:"left",isSelect:!0,onSelect:function(e){var o=e.attr("ac");t.attr("ty",o),Dock.setAttrDisplay(o)}})}}),$("#attr-display-name").parent(".po-checkbox-group").off("click").on("click",function(e){e.stopPropagation(),$("#attr-display-name").checkbox("isChecked")?$("#attr-display-name").checkbox("uncheck"):$("#attr-display-name").checkbox("check")}),$("#attr-display-icon").button({onClick:function(e,t){$("#attr-display-icon-menu").dropdown({target:t,position:"right"})}}),$("#attr-display-icon-menu .po-button-small").off("click").on("click",function(e){e.stopPropagation(),Dock.uploadAttrIcon(function(e){Dock.setAttrIcon(e)})}),$("#attr-location-h").button({onClick:function(e,t){$("#attr-location-h-menu").dropdown({target:t,position:"left",isSelect:!0,onSelect:function(e){var o=$(e).attr("loc");t.attr("loc",o)}})}}),$("#attr-location-v").button({onClick:function(e,t){$("#attr-location-v-menu").dropdown({target:t,position:"left",isSelect:!0,onSelect:function(e){var o=$(e).attr("loc");t.attr("loc",o)}})}}),$("#dock-save-edit-attr-btn").off().on("click",function(t){t.stopPropagation(),Dock.saveAttrEdit(e)}),$("#dock-cancel-edit-attr-btn").off().on("click",function(e){e.stopPropagation(),Dock.setAttributeList()})},setAttrDisplay:function(e){"none"==e?$(".attr-display-options").hide():($(".attr-display-options").show(),"icon"==e?$(".attr-icon-area").show():$(".attr-icon-area").hide())},setAttrIcon:function(e){$("#attr-display-icon").attr("ico",e).button("setText",""),e&&(isNaN(parseInt(e))?$("#attr-display-icon").button("setText","<img src= "+e+">"):$("#attr-display-icon").button("setText","<img src= "+staticBasePath+"/assets/images/data_attr/"+e+".png>")),$("#attr-display-icon-menu").hide()},saveAttrEdit:function(e){var t=$("#edit-"+e),o=Designer.getDataAttrById(e);o.value=t.find(".attr-value").val();var n=$("#attr-edit-showtype").attr("ty");o.showType=n,"none"!=n&&(o.showName=$("#attr-display-name").checkbox("isChecked"),o.horizontal=$("#attr-location-h").attr("loc"),o.vertical=$("#attr-location-v").attr("loc"),"icon"==n&&(o.icon=$("#attr-display-icon").attr("ico")));var a=Utils.getSelectedIds(),i=Model.getShapeById(a[0]);if("default"==o.category&&"bpmn"==i.category){i.attribute||(i.attribute={}),i.attribute.markers||(i.attribute.markers=[]);var r=i.attribute.markers;if("loopCharacteristics"==o.name||"循环特征"==o.name){if(Utils.removeFromArray(r,"loop"),Utils.removeFromArray(r,"sequential"),Utils.removeFromArray(r,"parallel"),"StandardLoopCharacteristics"==o.value||"标准"==o.value)Utils.addToArray(r,"loop");else if("MultipleLoopCharacteristics"==o.value||"多例"==o.value){var s=Designer.getDefaultDataAttrByName("isSequantial");null==s&&(s=Designer.getDefaultDataAttrByName("是否为序列")),null!=s&&("true"==s.value?Utils.addToArray(r,"sequential"):Utils.addToArray(r,"parallel"))}}else if("isSequantial"==o.name||"是否为序列"==o.name){Utils.removeFromArray(r,"sequential"),Utils.removeFromArray(r,"parallel");var l=Designer.getDefaultDataAttrByName("loopCharacteristics");null==l&&(l=Designer.getDefaultDataAttrByName("循环特征")),null==l||"MultipleLoopCharacteristics"!=l.value&&"多例"!=l.value||("true"==o.value?Utils.addToArray(r,"sequential"):Utils.addToArray(r,"parallel"))}else"isForCompensation"==o.name||"是否为补偿"==o.name?(Utils.removeFromArray(r,"compensation"),"true"==o.value&&Utils.addToArray(r,"compensation")):"isCollection"==o.name||"participantMultiplicity"==o.name||"是否为集合"==o.name||"多重参与者"==o.name?(Utils.removeFromArray(r,"parallel"),"true"==o.value&&Utils.addToArray(r,"parallel")):"loopType"!=o.name&&"循环类型"!=o.name||(Utils.removeFromArray(r,"loop"),Utils.removeFromArray(r,"sequential"),Utils.removeFromArray(r,"parallel"),"Standard"==o.value||"标准"==o.value?Utils.addToArray(r,"loop"):"MultiInstanceSequential"==o.value||"实例化多例序列"==o.value?Utils.addToArray(r,"sequential"):"MultiInstanceParallel"!=o.value&&"实例化多例并行"!=o.value||Utils.addToArray(r,"parallel"))}o.value=Util.filterXss(o.value),o.name=Util.filterXss(o.name),Designer.updateDataAttribute(o),this.setAttributeList()},deleteAttr:function(e,t){t.stopPropagation(),$("#"+e).parent(".shape-attr-item").remove(),Designer.deleteDataAttribute(e)},resetAddAttr:function(){$("#dock-add-attr-name").val(""),$("#dock-add-attr-type").button("setVal","文本"),$("#dock-add-attr-value").val("")},uploadAttrIcon:function(e){$("#import_attricon_input").trigger("click"),$("#import_attricon_input").off("change").on("change",function(t){var o=this.files[0].type,n=this.files[0].size/1204;if(""!=$.trim($(this).val()))if(o.indexOf("image")<0)$.toast({type:"error",text:"该文件格式不支持"});else if(n>200)$.toast({type:"error",text:"该文件超出200KB，暂不支持"});else{var a=new FormData($("#frm_import_attricon")[0]);poAjax({contentType:!1,processData:!1,data:a,success:function(t){e(t.url)},error:function(e){"803"==e.code?$.toast({type:"error",text:"该文件格式不支持"}):e.code}},"uploadImageForm")}})},setFillStyle:function(e){if($("#dock-shape-fill-type").button("setText",{none:"纯色",solid:"纯色",gradient:"渐变",image:"图片"}[e.type]),$(".fill-detail").hide(),"solid"==e.type||"none"==e.type)$(".fill-solid-detail").show(),$("#dock-shape-fill-type").css("width",168),"none"==e.type?$("#dock-shape-fill-solid").colorButton("setColor","transparent"):$("#dock-shape-fill-solid").colorButton("setColor",e.color);else if("gradient"==e.type)$("#dock-shape-fill-type").css("width",98),$(".fill-gradient-detail").show(),$("#dock-shape-fill-gradient-begin").colorButton("setColor",e.beginColor),$("#dock-shape-fill-gradient-end").colorButton("setColor",e.endColor),$("#dock-shape-gradient-type").button("setText",{linear:"线性渐变",radial:"径向渐变"}[e.gradientType]),$(".gradient-details").hide(),"linear"==e.gradientType?($(".gradient-type-linear").show(),$("#dock-shape-gradient-angle").spinner("setValue",Math.round(e.angle/Math.PI*180)+"°")):($(".gradient-type-radial").show(),$("#dock-shape-gradient-radius").spinner("setValue",Math.round(100*e.radius)+"%"));else if("image"==e.type){$(".fill-image-detail").show(),$("#dock-shape-fill-type").css("width",168),$("#dock-shape-fill-image").css("background-image","url("+e.fileId+")");var t=e.display||"fill";$("#dock-fill-image-display").button("setText",$("#dock-fill-image-display-menu").children("li[ac="+t+"]").find(".text").text())}else"none"==e.type&&$("#dock-shape-fill-solid").colorButton("setColor","transparent")},comments:{data:Model.comments,init:function(){var e=this;e.loadComments(),showCommentIco?$("#comment-show-icon").checkbox("check"):$("#comment-show-icon").checkbox("uncheck"),$("#comment-show-icon").parent(".po-checkbox-group").off("click").on("click",function(e){$("#comment-show-icon").checkbox("isChecked")?$("#comment-show-icon").checkbox("uncheck"):$("#comment-show-icon").checkbox("check");var t=$("#comment-show-icon").checkbox("isChecked");for(var o in Server.setConfig("showCommentIco",t),showCommentIco=t,Model.define.elements){var n=Model.getShapeById(o);"linker"!=n.name&&Designer.painter.renderShape(n)}});var t=$("#dock-comment-text");function o(){var o="",n=Utils.getSelectedShapeIds();1==n.length&&(o=n[0]);var a=Util.filterXss($.trim(t.val()));if(0!=a.length){var i={action:"comment",userId:userObj.userId,photoUrl:userObj.photoUrl,id:Utils.newId(),name:userObj.fullName,content:a,shapeId:o,replyId:""};if(sendMessage.send(i),e.appendComment(i),t.val(""),Model.comments||(Model.comments=[]),Model.comments.push(i),""!=o){var r=Model.getShapeById(o);Designer.painter.renderShape(r)}}}$("#dock-comment-submit").off("click").on("click",o),t.off("keyup.comment").on("keyup.comment",function(e){e.stopPropagation(),"13"==e.keyCode&&(e.returnValue=!1,e.preventDefault(),o())}),$("#dock-comment-list").off("click.reply").on("click.reply",".dock-comment-item",function(t){if(t.stopPropagation(),"INPUT"!=t.target.tagName){var o=$("#dock-comment-list").find(".po-input-other-small");if(o.length>0)o.remove();else{var n=$(this),a=n.parents(".dock-comment-item");a.length>0&&(n=a),(o=$("<input class='po-input-other-small' type='text' placeholder='回复此评论'/>").appendTo(n)).off().on("keydown",function(t){if(13==t.keyCode){var n=Util.filterXss($.trim($(this).val()));if(0==n.length)return;var a=$(this).parents(".dock-comment-item"),i=a.eq(a.length-1).attr("com_id"),r={action:"comment",userId:userObj.userId,photoUrl:userObj.photoUrl,id:Utils.newId(),name:userObj.fullName,content:n,shapeId:"",replyId:i};sendMessage.send(r),e.appendComment(r),Model.comments.push(r),o.remove()}})}}}),$("#dock-comment-list").off("click.delete").on("click.delete",".delete",function(e){e.stopPropagation();var t=$(this).parents(".dock-comment-item").eq(0),o=t.attr("com_id"),n={action:"removeComment",id:o};sendMessage.send(n);for(var a=[],i=0;i<Model.comments.length;i++){var r=Model.comments[i];r.id!=o&&r.replyId!=o&&a.push(r)}Model.comments=a,t.remove();var s=$(this).parents(".dock-comment-item").attr("shape_id"),l=Model.getShapeById(s);null!=l&&"linker"!=l.name&&Designer.painter.renderShape(l)})},loadComments:function(){var e,t=$("#dock-comment-list"),o=Utils.getSelectedShapeIds();if(e=1==o.length?o[0]:"",this.currentCommentId!=e)if(this.currentCommentId=e,Model.comments&&0!=Model.comments.length){t.empty();for(var n=0;n<Model.comments.length;n++){var a=Model.comments[n];(a.shapeId==e||a.replyId||""==e)&&this.appendComment(a)}}else t.html("<div class='comment_none' style='padding: 16px'>没有评论</div>")},appendComment:function(e){var t=Utils.copy(e);void 0===t.photoUrl&&(t.photoUrl=staticBasePath+"/assets/images/default_photo.png");var o=new Date;t.time&&o.setTime(t.time),t.time=o.format(dateFormat),$("#dock-comment-list .comment_none").remove();var n='<div class="dock-comment-item" com_id="'+t.id+'" shape_id="'+t.shapeId+'">                        <div class="top">                            <div class="po-user-photo"><img src="'+t.photoUrl+'" alt=""></div>                            <div>                                <div class="uesr-name">'+t.name+'</div><span class="po-diagraming-icons delete">&#xe6b9;</span>                                <div class="comment-time">'+t.time+'</div>                            </div>                        </div>                        <div class="text">'+t.content+"</div>                    </div>",a=$("#dock-comment-list");t.replyId&&(a=$("#dock-comment-list [com_id="+t.replyId+"]")),a.append(n)}}},window.History={isShow:!1,init:function(){var e=this;$("#history-container").show(),e.isShow=!0,$("#history-container .po-close-btn").off().on("click",function(){$("#history-container").hide()}),$("#creat-history-btn").off().on("click",function(e){$("#creat-history-box").show()}),$("#creat-history-box .close").off().on("click",function(e){$("#creat-history-box").hide()}),$("#creat-history-box .primary").off().on("click",function(e){var t=$.trim($("#creat-history-box .po-textarea").val());t.length>0&&(sendMessage.saveVersion(t),$("#creat-history-box .po-textarea").val(""),$("#creat-history-box").hide())});var t=$("#history-container-wrap").height();$("#history-container-wrap").off().on("scroll",function(){var o=$(this).scrollTop(),n=$(this).children(".po-flow-history-box").height();t+o>n-20&&e.loadHistorys()}),e.loadHistorys(!0)},historyPage:1,loadingHistory:!1,cursor:"",sign:"",loadHistorys:function(e){var t=this;if(e&&(t.cursor="",t.sign="",this.loadingHistory=!1,this.historyPage=1),!this.loadingHistory){var o=$("#history-container-wrap .po-flow-history-box"),n="";if(""!=chartId){0==o.length&&(o=$('<ul class="po-flow-history-box"><ul>').appendTo($("#history-container-wrap")));var a=PageModel.data[Model.pageId].canvasId,i={chartId:chartId,canvasId:a,pages:t.historyPage,cursor:t.cursor,sign:t.sign};$("#history_more").show(),poAjax({type:"post",data:JSON.stringify(i),contentType:"application/json",success:function(a){var i=a.rsList||[];t.cursor=a.cursor,t.sign=a.sign,i.length<=20&&$("#history_more").hide(),e&&o.html("");for(var r=0,s=i.length;r<s;r++){var l=i[r];n+='<li class="item" chart="'+l.chartId+'" def="'+l.definitionId+'" vid="'+l._id.$oid+'">                        <div class="item-top">                            <div class="item-title">'+l.remark+'</div>                            <div class="po-buttons">                               <div class="po-diagraming-icons restore" def="'+l.definitionId+'" vid="'+l._id.$oid+'">&#xe6ac;</div>                               <div class="po-diagraming-icons delete" vid="'+l._id.$oid+'">&#xe7b7;</div>                            </div>                        </div>                        <div class="item-bottom">                            <span class="po-fullName">'+l.fullName+"</span><span>"+Util.splitDate(l.createDate)+"</span>                        </div>                </li>"}o.append(n),o.children("li").length>0?$("#history-none-tip").hide():$("#history-none-tip").show(),History.resetVersions(),"-1"==a.nextPage?(History.loadingHistory=!0,t.historyPage=1):(t.historyPage=a.nextPage,History.loadingHistory=!1)},error:function(){$("#history_more").removeClass("disable"),$("#history_more").find(".icons").css("display","none")}},"getHistorys"),this.loadingHistory=!0}else $("#history-container-wrap").html("<div style='padding: 20px 10px;'>没有历史版本</div>")}},resetVersions:function(){$("#history-container-wrap .item").off().on("click",function(e){var t=$(this).attr("def"),o=$(this).attr("vid");$("#history-container-wrap .item").removeClass("selected"),$(this).addClass("selected"),History.getVersiondef(t,o,!0)}),$("#history-container-wrap .restore").popconfirm({title:"你确定要恢复此版本吗?",btnStyle:"btn",success:function(e){var t=e.attr("def"),o=e.attr("vid");History.getVersiondef(t,o)},cancel:function(){$("#history-container-wrap .item").removeClass("active")},onClick:function(e){$(e.target).parents(".item").addClass("active"),$(e.target).addClass("active"),$(e.target).siblings().removeClass("active")}}),$("#history-container-wrap .delete").popconfirm({title:"你确定要删除此版本吗?",btnStyle:"btn",success:function(e){var t=e.attr("vid");History.initRemoveHistory(t)},cancel:function(){$("#history-container-wrap .item").removeClass("active")},onClick:function(e){$(e.target).parents(".item").addClass("active"),$(e.target).addClass("active"),$(e.target).siblings().removeClass("active")}})},getVersiondef:function(e,t,o){poAjax({data:{chartId:chartId,versionId:t},type:"GET",success:function(e){o?History.openHistory(e.definition):History.restoreVersion(t,e.definition)}},"getHistory")},initRemoveHistory:function(e){poAjax({data:{versionId:e,chartId:chartId},success:function(t){$("[vid='"+e+"']").hasClass("selected")&&History.closeHistory(),$("#history-container-wrap [vid='"+e+"']").remove()}},"removeHistory")},currentDefinition:null,openHistory:function(e){null==this.currentDefinition&&(this.currentDefinition=$.extend(!0,{},Model.define)),Utils.unselect(),Designer.open(e),Designer.hotkey.cancel(),Designer.op.cancel(),Designer.contextMenu.destroy(),Designer.op.canvasDraggable(),$("#header-rename").addClass("readonly"),$(".po-flow-header-container .po-menu").children("li").addClass("readonly"),$("#po-toolbar .po-toolbar-container div").addClass("disabled"),$("#po-flow-dock-layout .dock-container").addClass("readonly"),$("#po-flow-dock-layout .dock-container").addClass("readonly"),$(".po-flow-layout").addClass("readonly"),$("#history-container").removeClass("readonly"),$("#po-flow-search-replace .tab-item[ac='replace']").css("display","none"),$("#page_box").addClass("readonly"),$("#po-tool-ai-button").addClass("readonly"),$.toast({target:$("#designer_viewport"),type:"secondary",text:"您正在浏览一个历史版本<a href=\"javascript:\" style=\"margin-left: 10px;color:#1F88F1;text-decoration:underline;\" onclick=\"History.getVersiondef($('#history-container-wrap .selected').attr('def'),$('#history-container-wrap .selected').attr('vid')); $.toast('close');\">恢复此版本</a>",autoClose:!1,name:"history",onClose:function(){History.closeHistory()}})},closeHistory:function(){this.isShow=!1,null!=this.currentDefinition&&(Designer.open(this.currentDefinition),this.currentDefinition=null,this.activeOperation(),$.toast("close","history"),$("#history-container-wrap .item").removeClass("selected"))},activeOperation:function(){Designer.hotkey.init(),Designer.op.init(),Designer.contextMenu.init(),$("#header-rename").removeClass("readonly"),$(".po-flow-header-container .po-menu").children("li").removeClass("readonly"),$("#po-toolbar .po-toolbar-container div").removeClass("disabled"),$("#po-flow-dock-layout .dock-container").removeClass("readonly"),$(".po-flow-layout").removeClass("readonly"),$("#po-flow-search-replace .tab-item[ac='replace']").css("display","block"),$("#page_box").removeClass("readonly"),$("#po-tool-ai-button").removeClass("readonly")},restoreVersion:function(e,t){var o=this,n=Model.pageId;poAjax({data:{chartId:chartId,definitionId:n,versionId:e},success:function(e){Designer.open(t),MessageSource.redoStack.stack=[],MessageSource.undoStack.stack=[],Designer.events.push("undoStackChanged",0),Designer.events.push("redoStackChanged",0),History.activeOperation(),$.toast("close"),$.toast({text:"历史版本还原成功"}),o.currentDefinition=null,$("#btn_history_clear").button("disable"),$("#history_versions").find("input[type=checkbox]").prop("checked","")}},"revertHistory")}},window.HotKey={renderLayout:function(){var e=$("#po-flow-dock-layout-hotkey .layout-hotkey-container"),t="",o=this.data;for(key in e.empty(),o){var n=o[key];t+="<div class='hotkey-title'>"+n.text+"</div>";for(var a=0;a<n.list.length;a++){var i=n.list[a],r="<label>"+(Util.isMac()&&i.macKey||i.key)+"</label>";t+="<div class='hotkey-item'><span class='text'>"+i.text+"</span> "+r+"</div>"}}e.html(t)},data:{common:{text:"通用",list:[{key:"<span class='keys'>Space</span><i>+</i><span class='keys'>鼠标拖拽</span>",text:"移动画布"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>点击</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>点击</span>",text:"多选"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>A</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>A</span>",text:"全选"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>F</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>F</span>",text:"查找替换"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>/</i><span class='keys'>option</span><i>+</i><span class='keys'>(+),(-)</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>(+),(-)</span>",text:"放大，缩小"},{key:"<span class='keys'>Esc</span>",text:"取消选中或取消当前操作"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>P</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>P</span>",text:"打印"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>C</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>C</span>",text:"格式刷"}]},edit:{text:"文本和图形编辑",list:[{key:"<span class='keys'>T</span>",text:"插入文本"},{key:"<span class='keys'>I</span>",text:"插入图片"},{key:"<span class='keys'>L</span><i>+</i><span class='keys'>鼠标拖拽</span>",text:"插入连线"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>E</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>E</span>",text:"插入公式"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>K</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>K</span>",text:"插入链接"},{key:"<i>(选中图形)</i><span class='keys'>空格</span>",text:"进入编辑"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>B</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>B</span>",text:"加粗"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>I</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>I</span>",text:"斜体"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>U</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>U</span>",text:"下划线"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>C</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>C</span>",text:"复制"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>X</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>X</span>",text:"剪切"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>V</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>V</span>",text:"粘贴"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>Z</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>Z</span>",text:"撤销"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>Y</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>Y</span>",text:"恢复"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>D</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>D</span>",text:"复用图形"},{macKey:"<span class='keys'>delete</span>",key:"<span class='keys'>delete</span><i>/</i><span class='keys'>backspace</span>",text:"删除"},{key:"<span class='keys'>Alt</span><i>+</i><span class='keys'>L</span>",text:"左对齐"},{key:"<span class='keys'>Alt</span><i>+</i><span class='keys'>C</span>",text:"居中对齐"},{key:"<span class='keys'>Alt</span><i>+</i><span class='keys'>R</span>",text:"右对齐"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>]</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>]</span>",text:"置于顶层"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>[</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>[</span>",text:"置于底层"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>[</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>]</span>",text:"上移一层"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>[</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>[</span>",text:"下移一层"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>L</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>L</span>",text:"锁定"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>L</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>L</span>",text:"取消锁定"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>G</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>G</span>",text:"组合"},{macKey:"<span class='po-diagraming-icons keys'>&#xe795;</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>G</span>",key:"<span class='keys'>Ctrl</span><i>+</i><span class='keys'>Shift</span><i>+</i><span class='keys'>G</span>",text:"取消组合"},{key:"<span class='keys'>←↑↓→</span>",text:"向左、向上、向下、向右移动"},{key:"<span class='keys'>Shift</span><i>+</i><span class='keys'>←↑↓→</span>",text:"微移1像素"},{macKey:"<span class='keys'><span class='po-diagraming-icons'>&#xe795;</span>/Shift</span><i>+</i><span class='keys'>拖拽</span>",key:"<span class='keys'>Ctrl/Shift</span><i>+</i><span class='keys'>拖拽</span>",text:"固定比例调整大小"}]}}},window.CategoryMap={flow:"流程图",ui:"原型图",org:"组织结构-流程图",uml:"UML",bpmn:"BPMN",network:"网络拓扑图",venn:"Venn韦恩图",evc:"EVC企业价值链",epc:"EPC事件过程链图",weizhu_bm:"魏朱商业模式"};
},{"./clipboard":"IXVj","./chartconfig.json":"uKLG","../../common/common.less":"c5ZJ","../css/designer.css":"M7Y9","../css/ui.css":"wKBg","../css/pageList.less":"Zcgp","../../common/insert.css":"Zcgp","../css/renderchart.css":"Zcgp","../../common/katex.min.css":"TCx6","../css/designer.team.css":"eWbC","../../common/jquery-1.10.2":"gPHy","../../common/xss/index":"xvXS","../../common/po/common":"d8RM","./schame/schema":"Wcrk","./schame/themes":"h4tm","./designer.mobi.core":"SPLt","./designer.core":"P4BJ","./ai.draw":"EkD1","./designer.events":"iNYO","./designer.methods":"r6N2","./designer.beautify":"Sk2s","../../common/collaboration/config":"a54O","./designer.server":"tgKe","../../common/exportfile/exportfile":"geLb","../../common/vip/vip_state":"jSBz","./designer.team.js":"srPL","./aihelp":"Iovh","../../common/katex.min":"CmJo","../../common/insert":"L7Le","./insert":"r86J","../../common/insert/orgIndex.js":"hAOg"}],"ARet":[function(require,module,exports) {
var t=null;function e(){return t||(t=n()),t}function n(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return r(t[0])}return"/"}function r(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}exports.getBundleURL=e,exports.getBaseURL=r;
},{}],"yU0Q":[function(require,module,exports) {
var r=require("./bundle-url").getBundleURL;function e(r){Array.isArray(r)||(r=[r]);var e=r[r.length-1];try{return Promise.resolve(require(e))}catch(n){if("MODULE_NOT_FOUND"===n.code)return new s(function(n,i){t(r.slice(0,-1)).then(function(){return require(e)}).then(n,i)});throw n}}function t(r){return Promise.all(r.map(u))}var n={};function i(r,e){n[r]=e}module.exports=exports=e,exports.load=t,exports.register=i;var o={};function u(e){var t;if(Array.isArray(e)&&(t=e[1],e=e[0]),o[e])return o[e];var i=(e.substring(e.lastIndexOf(".")+1,e.length)||e).toLowerCase(),u=n[i];return u?o[e]=u(r()+e).then(function(r){return r&&module.bundle.register(t,r),r}).catch(function(r){throw delete o[e],r}):void 0}function s(r){this.executor=r,this.promise=null}s.prototype.then=function(r,e){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.then(r,e)},s.prototype.catch=function(r){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.catch(r)};
},{"./bundle-url":"ARet"}],0:[function(require,module,exports) {
var b=require("yU0Q");
},{}]},{},[0,"Zp0M"], null)