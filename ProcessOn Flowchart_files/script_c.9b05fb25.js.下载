parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"w2v9":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function t(i){var n=i.startTime,o=i.endTime,r=i.imageUrl,a=i.overlayImageUrl;e(this,t),this.startTime=new Date(n),this.endTime=new Date(o);var l=new Date,s=this.cumputedCloseFlag();if(!(l<this.startTime||l>this.endTime||memberObj&&memberObj.member||s||"outline"==window.fileType)){this.imageUrl=r,this.overlayImageUrl=a;this.containerElement=$("<div>").addClass("time-controlled-image-container").css({position:"fixed",bottom:"4.31rem",right:"2.46rem",width:"200px",height:"200px",positon:"relative"}),this.imageElement=$("<img>").attr("src",r).css({cursor:"pointer",width:"5.38rem",height:"5.38rem",position:"absolute",right:"0px",bottom:"0px"}),this.overlayElement=$("<img>").attr("src",a).addClass("overlay-image").css({cursor:"pointer",display:"none",position:"absolute",bottom:"6.15rem",right:"0",width:"14.23rem",height:"10.15rem"}),this.closeElement=$("<div>").css({cursor:"pointer",position:"absolute",bottom:"4.1rem",right:"0px",width:"15px",height:"15px"}),this.containerElement.append(this.imageElement,this.overlayElement,this.closeElement),$("body").append(this.containerElement),window.buried_point_fn&&buried_point_fn("collect","activity_show",{"弹窗名称":"".concat(window.fileType,"编辑器右下角浮窗")}),this.setupEventListeners()}}return i(t,[{key:"setupEventListeners",value:function(){var e=this;this.imageElement.on("click",function(){e.handleImageClick("logo")}),this.overlayElement.on("click",function(){e.handleImageClick("logobanner")}),this.closeElement.on("click",function(){e.closeOverlay()}),this.imageElement.on("mouseenter",function(){e.showOverlay()}),this.containerElement.on("mouseleave",function(){e.hideOverlay()})}},{key:"handleImageClick",value:function(e){window.open("/ac/231111?from=".concat(window.fileType,"edit&pos=").concat(e),"_blank")}},{key:"showOverlay",value:function(){this.overlayElement.css("display","block")}},{key:"hideOverlay",value:function(){this.overlayElement.css("display","none")}},{key:"removeElement",value:function(){this.containerElement.remove()}},{key:"closeOverlay",value:function(){this.removeElement(),localStorage.setItem("closedTime",(new Date).toString())}},{key:"cumputedCloseFlag",value:function(){var e=localStorage.getItem("closedTime");if(e){var t=new Date,i=new Date(e);return i.setDate(i.getDate()+7),t<i}return!1}}]),t}();exports.default=n;
},{}],"AzEq":[function(require,module,exports) {
"use strict";var e=t(require("./20231111.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={getUrlParams:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},getCookies:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var n=document.cookie.indexOf(";",t);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(t,n))}}return""},setCookies:function(e,t,n){var a=new Date;a.setDate(a.getDate()+n),document.cookie=e+"="+escape(t)+(null==n?"":";path=/;expires="+a.toGMTString())},createDom:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},getDef:function(e,t){var n=e.chartId,r=o.getUrlParams("linkId"),i=o.getUrlParams("isTemp"),d="",s=window.location.pathname;0==s.indexOf("/embed/")&&(d=s.substring(s.lastIndexOf("/")-0+1));var f="/api/personal/diagraming/get/chart/def",l={chartId:n},u="GET";if(r)l={viewLinkId:r,viewPassword:o.getCookies("link_pw_"+r)},f="/api/personal/view/link/def",u="POST";else if(i){if(o.getUrlParams("token"))return void c(n,e.defId,t);l={chartId:n,template:!0},f="/api/personal/diagraming/get/template/def",u="GET"}else d&&(l={chartId:d},f="/api/personal/embed/get/def/v2",u="GET");Util.ajax({url:f,data:a({defId:e.defId},l),cache:!1,noToken:!0,type:u,success:function(e){t&&t(e)},error:function(){}})},getPage:function(e,t,n,a){Util.ajax({url:e,noToken:!0,data:t,type:n,success:function(e){a(e)},error:function(e){console.log(e)}})},getDefById:function(e,t,n,a){Util.ajax({url:e,data:t,noToken:!0,cache:!1,type:n,success:function(e){a&&a(e)},error:function(){a&&a()}})},getCollaboration:function(e,t){Util.ajax({url:"/api/personal/collaboration/join_link/"+e,noToken:!0,cache:!1,type:"GET",success:function(e){t(e.shareCollaboration.chartId)},error:function(){}})},loadCAllCommon:function(e,t){if("undefined"==typeof cAllCommon){bigPipe.render({js:["/assets/plugins/cAllCommon.js"]},function(){cAllCommon.init(e,t)})}else cAllCommon.init(e,t)},addRecord:function(e,t){var n=Util.getUrlParams("token")||Util.getCookies("token"),a=Util.getCookies("po-last-platform");e&&n&&a&&"personal"!==a&&Util.ajax({url:"/api/org/chart/record/add",type:"post",data:{chartId:e},noToken:!0,isErr:!0,function:function(e){t(e)}})}};function i(e,t,n){var a=function(e){for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n)-1;t+=String.fromCharCode(a)}return t}(decodeURIComponent(t));localStorage.manageToken=a,Util.ajax({url:"/api/admin/manage/file/canvas/get/template/chartdefids",data:{chartId:e},noToken:!0,type:"GET",headers:{token:a},success:function(t){var a={},r=t.canvas||t;if(a.chartDefIds=r.chartDefIds,a.mainCanvasId=r.mainCanvasId,t.def&&t.chart)return a.def=t.def,a.chartObj=t.chart,void n(a);var o=r.mainCanvasId;c(e,o,function(e){a.def=e.def,a.chartObj=e.chart,n(a)})},error:function(e){}})}function c(e,t,n){var a=function(e){for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n)-1;t+=String.fromCharCode(a)}return t}(decodeURIComponent(t));Util.ajax({url:"/api/admin/manage/file/diagraming/getdef",data:{templateId:e},noToken:!0,type:"GET",headers:{token:a},success:function(e){var t={def:e.data.def,chartObj:{},chartDefIds:[],mainCanvasId:"",isTemp:!0},r=JSON.parse(e.data.def);null!=r&&"string"==typeof r.theme&&r.theme.indexOf("customise_")>=0?function(e,t){Util.ajax({url:"/api/admin/manage/file/gettheme",data:{id:e},noToken:!0,type:"GET",headers:{token:a},success:function(e){t(JSON.parse(e))},error:function(e){}})}(r.theme,function(e){t.theme=e,n(t)}):n(t)},error:function(e){}})}window.editorGlobalConfig={getUserInfo:function(e,t){Util.ajax({url:"/api/personal/user/info",type:"GET",success:function(e){t(e)},error:function(e){}})},onInitInfo:function(e,t){var n={},a=Util.getUrlParams("token")||Util.getCookies("token");function r(a){var r=["designer","flow"].indexOf(fileType)>-1?"/api/personal/canvas/get/chartdefids":"/api/personal/diagraming/"+e.chartId;Util.ajax({url:r,type:["designer","flow"].indexOf(fileType)>-1?"GET":"POST",data:{chartId:e.chartId},success:function(e){n.chartObj=e.chart||{},o.loadCAllCommon(e.chart,a),"board"!=n.chartObj.category?"designer"==fileType||"flow"==fileType?(n.chartDefIds=e.canvas.chartDefIds,n.mainCanvasId=e.canvas.mainCanvasId,o.getDef({defId:e.canvas.mainCanvasId,chartId:e.chart.chartId},function(e){n.def=e.def,t(n)})):(n.def=e.def,t(n)):$.toast({text:"暂时不支持打开白板",type:"error",autoClose:!1,name:"board"})},error:function(e){console.log(e)}})}$.ajax({url:"/api/personal/user/info",type:"GET",headers:{token:a},success:function(t){editorGlobalConfig.iflyYtekLogin(),200==t.code&&(t=t.data,n.userObj=t.user,n.authObj=t.auth,function(t){var n=window.location.pathname;if(0==n.indexOf("/v/")||0==n.indexOf("/collaboration/invite/")){var a="";0==n.indexOf("/v/")?a=n.substring(n.lastIndexOf("/")-0+1):0==n.indexOf("/collaboration/invite/")&&(a=n.substring(n.lastIndexOf("/")-0)),o.getCollaboration(a,function(n){e.chartId=n,r(t)})}else r(t)}(n.userObj))},error:function(e){console.log(e)}}),e.chartId&&o.addRecord(e.chartId)},iflyYtekLogin:function(){location.href.indexOf("partner=")>-1?window.localStorage.setItem("fromIflyYtek","true"):window.localStorage.removeItem("fromIflyYtek")},getDefById:function(e,t){e={defId:e.defId,chartId:chartId};o.getDef(e,function(e){t(e)})},onDefById:function(e,t){e={defId:e.defId,chartId:chartId};o.getDef(e,function(e){t(e)})},onViewInitInfo:function(e,t){var n={},a=o.getUrlParams("chartId"),r=o.getUrlParams("linkId"),i=o.getUrlParams("isTemp"),d="",s=window.location.pathname;0==s.indexOf("/embed/")&&(d=s.substring(s.lastIndexOf("/")-0+1));var f="/api/personal/canvas/get/chartdefids",l={chartId:a},u="GET",p="GET",m="/api/personal/diagraming/get/chart/def";if(r)f="/api/personal/view/link/v2",l={viewLinkId:r,viewPassword:o.getCookies("link_pw_"+r)},m="/api/personal/view/link/def",u="POST",p="POST";else if(i){var g=o.getUrlParams("token");if(g)return void c(a,g,t);f="/api/personal/canvas/get/template/chartdefids",l={chartId:a,template:!0},m="/api/personal/diagraming/get/template/def",u="GET",p="GET",n.isTemp=!0}else d&&(f="/api/personal/embed/get/chartdefids",l={chartId:d},m="/api/personal/embed/get/def/v2",u="GET",p="GET",n.isEmbed=!0);["designer","flow"].indexOf(fileType)>-1?o.getPage(f,l,u,function(e){var a=e.canvas||e;if(n.chartDefIds=a.chartDefIds,n.mainCanvasId=a.mainCanvasId,e.def&&e.chart)return n.def=e.def,n.chartObj=e.chart||{},void t(n);l.defId=a.mainCanvasId,o.getDefById(m,l,p,function(e){n.def=e.def,n.chartObj=e.chart,t(n)})}):(r?(m="/api/personal/view/link/"+r,l={viewLinkId:r,viewPassword:o.getCookies("link_pw_"+r)},p="POST"):i?(m="/api/personal/diagraming/getdef",l={id:l.chartId,template:!0},p="GET"):d&&(m="/api/personal/embed/get/def",l={chartId:d},p="GET"),o.getDefById(m,l,p,function(e){n.def=e.def,n.theme=e.themeDef?JSON.parse(e.themeDef):null,n.chartObj=e.chart||{},t(n)})),!a||i||d||o.addRecord(a)},onRanderComplete:function(){console.log("编辑器初始化完成");new e.default({startTime:"2023-10-20 20:00:00",endTime:"2023-11-20 23:59:59",imageUrl:"https://pocdn.processon.com/activity/2023/db_11/Component52x.png",overlayImageUrl:"https://pocdn.processon.com/activity/2023/db_11/Component62x.png"})},onLinkToOutline:function(e,t){"app"!=o.getUrlParams("sourceType")?t&&t():window.location.replace("/outline/"+chartId+"?sourceType=app")},onLinkToMindmap:function(e,t){"app"!=o.getUrlParams("sourceType")?t&&t():window.location.replace("/mindmap/"+chartId+"?sourceType=app")}};
},{"./20231111.js":"w2v9"}]},{},["AzEq"], null)